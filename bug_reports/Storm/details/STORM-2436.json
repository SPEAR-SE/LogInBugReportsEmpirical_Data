{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13059972","self":"https://issues.apache.org/jira/rest/api/2/issue/13059972","key":"STORM-2436","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2017-07-14T20:01:04.171+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Feb 14 04:33:34 UTC 2018","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_27804382613_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2018-02-14T04:33:34.769+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2436/watchers","watchCount":2,"isWatching":false},"created":"2017-03-29T09:07:12.198+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327123","id":"12327123","description":"security feature branch","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-11-05"}],"customfield_12312339":null,"issuelinks":[],"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-02-14T04:33:34.809+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"We have created below logger configuration in worker.xml of storm cluster\n\n<!-- This is new appender we want to add -->\n    <FDPRollingFile name=\"RollingFileInfo\" filename=\"${sys:storm.log.dir}/userlogs/info-${sys:logfile.name}\"\n        filepattern=\"${sys:storm.log.dir}/userlogs/info-${sys:logfile.name}.%d{yyyy-MM-dd-HH-mm}\" append=\"true\">\n            <PatternLayout>\n             <pattern>${patternFdpNew}</pattern>\n           </PatternLayout>\n            <Policies>\n                <SizeBasedTriggeringPolicy size=\"100 MB\"/> <!-- Or every 100 MB -->\n            </Policies> \n        </FDPRollingFile>\n    <FDPRollingFile name=\"RollingFileDebug\" filename=\"${sys:storm.log.dir}/userlogs/debug-${sys:logfile.name}\"\n            filepattern=\"${sys:storm.log.dir}/userlogs/debug-${sys:logfile.name}.%d{yyyy-MM-dd-HH-mm}\" append=\"true\">\n          <PatternLayout>\n             <pattern>${patternFdpNew}</pattern>\n           </PatternLayout>\n            <Policies>\n                <SizeBasedTriggeringPolicy size=\"100 MB\"/> <!-- Or every 100 MB -->\n            </Policies> \n    </FDPRollingFile>\n    <FDPRollingFile name=\"RollingFileError\" filename=\"${sys:storm.log.dir}/userlogs/error-${sys:logfile.name}\"\n            filepattern=\"${sys:storm.log.dir}/userlogs/error-${sys:logfile.name}.%d{yyyy-MM-dd-HH-mm}\" append=\"true\">\n        <PatternLayout>\n             <pattern>${patternFdpNew}</pattern>\n        </PatternLayout>\n        <Policies>\n            <SizeBasedTriggeringPolicy size=\"100 MB\"/> <!-- Or every 100 MB -->\n        </Policies>\n    </FDPRollingFile>\n<!-- This is new appender we want to add -->\n\n\n\nWe have created below logger configuration in worker.xml of storm cluster\n\n       <!-- This is new appender we want to add -->\n    <FDPRollingFile name=\"RollingFileInfo\" filename=\"${sys:storm.log.dir}/userlogs/info-${sys:logfile.name}\"\n        filepattern=\"${sys:storm.log.dir}/userlogs/info-${sys:logfile.name}.%d{yyyy-MM-dd-HH-mm}\" append=\"true\">\n            <PatternLayout>\n             <pattern>${patternFdpNew}</pattern>\n           </PatternLayout>\n            <Policies>\n                <SizeBasedTriggeringPolicy size=\"100 MB\"/> <!-- Or every 100 MB -->\n            </Policies> \n        </FDPRollingFile>\n    <FDPRollingFile name=\"RollingFileDebug\" filename=\"${sys:storm.log.dir}/userlogs/debug-${sys:logfile.name}\"\n            filepattern=\"${sys:storm.log.dir}/userlogs/debug-${sys:logfile.name}.%d{yyyy-MM-dd-HH-mm}\" append=\"true\">\n          <PatternLayout>\n             <pattern>${patternFdpNew}</pattern>\n           </PatternLayout>\n            <Policies>\n                <SizeBasedTriggeringPolicy size=\"100 MB\"/> <!-- Or every 100 MB -->\n            </Policies> \n    </FDPRollingFile>\n    <FDPRollingFile name=\"RollingFileError\" filename=\"${sys:storm.log.dir}/userlogs/error-${sys:logfile.name}\"\n            filepattern=\"${sys:storm.log.dir}/userlogs/error-${sys:logfile.name}.%d{yyyy-MM-dd-HH-mm}\" append=\"true\">\n        <PatternLayout>\n             <pattern>${patternFdpNew}</pattern>\n        </PatternLayout>\n        <Policies>\n            <SizeBasedTriggeringPolicy size=\"100 MB\"/> <!-- Or every 100 MB -->\n        </Policies>\n    </FDPRollingFile>\n<!-- This is new appender we want to add -->\nand custom logger defined in below fashion\n\n    <Logger name=\"custom-logger\" additivity=\"false\" level=\"INFO\">\n     <appender-ref ref=\"RollingFileDebug\" level=\"TRACE\"/>\n     <appender-ref ref=\"RollingFileError\" level=\"WARN\"/>\n     <appender-ref ref=\"RollingFileInfo\" level=\"INFO\"/>\n   </Logger>\n\n\nIn storm topology builder main class\n\n   config.put(\"topology.classpath\",\"/usr/local/Cellar/storm/mylogger.jar\");\nand\n\n In spout\n\nprivate static org.slf4j.Logger _logger =LoggerFactory.getLogger(\"custom-    logger\");\n\nNow what happens it detect my jar and write one line of log in log file but post that doesn't log any line to the log file.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Custom Log4j2 appender not working with storm","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nis3000","name":"nis3000","key":"nis3000","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Malhotra","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nis3000","name":"nis3000","key":"nis3000","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Malhotra","active":true,"timeZone":"Etc/UTC"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Storm Mapr Cluster","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10431","value":"Important","id":"10431"}],"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13059972/comment/15946769","id":"15946769","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nis3000","name":"nis3000","key":"nis3000","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Malhotra","active":true,"timeZone":"Etc/UTC"},"body":"http://stackoverflow.com/questions/43086693/custom-log4j2-appender-not-working-with-storm","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nis3000","name":"nis3000","key":"nis3000","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Malhotra","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-29T09:07:38.327+0000","updated":"2017-03-29T09:07:38.327+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13059972/comment/15946774","id":"15946774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nis3000","name":"nis3000","key":"nis3000","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Malhotra","active":true,"timeZone":"Etc/UTC"},"body":"There is only one spout in topology for now and configured with 2 executors.\n  \t \t\nAlso default logger if we don't use custom logger is able to log every log line to file as usual. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nis3000","name":"nis3000","key":"nis3000","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Malhotra","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-29T09:10:22.580+0000","updated":"2017-03-29T09:10:22.580+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13059972/comment/16087943","id":"16087943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"body":"[~nis3000] Are you still having an issue? If so, could you please post the logged line? \n\nI'm not too familiar with custom log4j2 appenders, but have you checked that the appender works from a toy project, e.g. a small console application that logs some lines from a few threads? It would help to isolate the potential error if we know that it works in an environment with less moving parts.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"created":"2017-07-14T20:01:04.171+0000","updated":"2017-07-14T20:01:04.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13059972/comment/16363465","id":"16363465","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"The version is not we're tracking now. Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2018-02-14T04:33:34.802+0000","updated":"2018-02-14T04:33:34.802+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2436/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3cxnr:"}}