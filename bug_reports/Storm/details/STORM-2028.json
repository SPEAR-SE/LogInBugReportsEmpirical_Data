{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12996014","self":"https://issues.apache.org/jira/rest/api/2/issue/12996014","key":"STORM-2028","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":9600,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false}],"aggregatetimespent":9600,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-08-17T01:32:41.405+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Aug 09 04:45:28 UTC 2017","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_30811260710_*|*_3_*:*_1_*:*_678865275_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2017-08-09T04:45:28.107+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2028/watchers","watchCount":4,"isWatching":false},"created":"2016-08-09T17:30:02.192+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["newbie"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":0,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-08-09T04:45:28.165+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327953","id":"12327953","name":"storm-jdbc","description":"Storm JDBC Integration"}],"timeoriginalestimate":null,"description":"When an Exception is triggered in JdbcClient.executeInsertQuery there is the potential for a follow-up Exception in close() to take precedence over the previously thrown Exception, when triggered in the finally block. This makes debugging the actual Exception impossible.\n\nAs far as I can tell it would be better to catch the Exception form close() in the finally-block, and to combine it with the existing Exception, so that the key information for debugging purposes isn't lost.\n\nFor data consistency purposes we have to make sure that the Exception from closing the connection is thrown (or do we? can we be sure that a successful commit has persisted the data?) but \"overlapping\" Exceptions have to be dealt with.\n\nAlternatively it might be a good idea to log the Exceptions before throwing them, so that the stack trace isn't lost. This is probably easier than tracking in the finally block whether a previous Exception has been thrown, and what to do with it.\n\nIf there's a workaround for this, that I might have missed, to get to the root of the Exception, I would also be interested in hearing, I'm currently looking at a situation where jdbc fails, and there being no indication of what's going on.\n\nI labelled this newbie-level, since the implementation is pretty trivial; but the decision of which way to pursue isn't as clear to me.","customfield_10010":null,"timetracking":{"remainingEstimate":"0h","timeSpent":"2h 40m","remainingEstimateSeconds":0,"timeSpentSeconds":9600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":0,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Exceptions in JDBCClient are hidden by subsequent SQL-Exception in close()","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":9600,"total":9600,"percent":100},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":9600,"total":9600,"percent":100},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/15423729","id":"15423729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salilkanetkar","name":"salilkanetkar","key":"salilkanetkar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Salil Kanetkar","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~RPCMoritz], \nI am new to the open source community. I was looking for issues to contribute towards, and I think this issue would be a good starting point. I have started looking at the https://github.com/apache/storm/blob/master/external/storm-jdbc/src/main/java/org/apache/storm/jdbc/common/JdbcClient.java class. Any other part I should look into?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salilkanetkar","name":"salilkanetkar","key":"salilkanetkar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Salil Kanetkar","active":true,"timeZone":"Etc/UTC"},"created":"2016-08-17T01:32:41.405+0000","updated":"2016-08-17T01:33:45.403+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/15426427","id":"15426427","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"body":"From my analysis, this issue is restricted to that class, so I think you should be able to solve it within that scope.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"created":"2016-08-18T13:20:18.575+0000","updated":"2016-08-18T13:20:29.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/15436749","id":"15436749","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"body":"Upon inspection, something like the following method should be called within finally:\n\ncloseWithStackSaver(Closeable toClose, Exception ex){\nException finalException = ex;\ntry { toClose.close() }\ncatch (Exception e){\nif (finalException!=null) {\nLOG.error (Error closing connection);\nelse {finalExcpetion = e;}\n}\nif (finalExcpetion != null){\nthrow new IllegalStateException(finalException);\n}\n}\n\nthis can be re-used easily in every finally block where close() is called.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"created":"2016-08-25T12:23:29.730+0000","updated":"2016-08-25T12:23:29.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16101917","id":"16101917","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~RPCMoritz], Can I take up this one just to start as a fresh contributor. I might just follow up with the approach discussed in the description to log the connection closure and finally throwing the actual exception with appropriate message. Will also make sure to take care of the stack trace for the exception.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-26T16:49:38.902+0000","updated":"2017-07-26T16:54:20.183+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16101943","id":"16101943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"body":"Sure, go right ahead - back then eventually our support partner provided a solution which was eerily similar to what I proposed here, but they failed to publish their code. I think the trickiest bit of this, is to add an Exception-throwing jdbc-connection for testing purposes. If you provide a patch, I'll happily review it - and hopefully we can get something merged.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"created":"2017-07-26T17:14:14.111+0000","updated":"2017-07-26T17:14:14.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16103063","id":"16103063","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~RPCMoritz], Should I email the patch or attach it right here for the review??","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-27T11:00:16.632+0000","updated":"2017-07-27T11:00:16.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16103112","id":"16103112","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"body":"Ideally create a GitHub pull request linked to this JIRA-issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"created":"2017-07-27T12:07:56.861+0000","updated":"2017-07-27T12:07:56.861+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16106498","id":"16106498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"body":"Well then, can you please add me as a contributor?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-30T13:36:17.943+0000","updated":"2017-07-30T13:36:17.943+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16106522","id":"16106522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"body":"[~CobraCrowe] No, I don't have the rights in Jira to do that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=RPCMoritz","name":"RPCMoritz","key":"rpcmoritz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Moritz","active":true,"timeZone":"Europe/Berlin"},"created":"2017-07-30T14:35:02.578+0000","updated":"2017-07-30T14:35:02.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16106768","id":"16106768","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"[~CobraCrowe] Just added and assigned.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2017-07-31T03:40:37.360+0000","updated":"2017-07-31T03:40:37.360+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16106934","id":"16106934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"body":"PR: https://github.com/apache/storm/pull/2248","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=CobraCrowe","name":"CobraCrowe","key":"cobracrowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rahul Jain","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-31T07:54:14.507+0000","updated":"2017-07-31T07:54:14.507+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/comment/16119407","id":"16119407","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Thanks [~CobraCrowe], I merged into master.\nKeep up the good work.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2017-08-09T04:45:28.159+0000","updated":"2017-08-09T04:45:28.159+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2028/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":20,"worklogs":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49411","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user rahuljain373 opened a pull request:\n\n    https://github.com/apache/storm/pull/2248\n\n    STORM-2028: Fix for uprooting the JDBC client exceptions in case of s…\n\n    Fix for uprooting the JDBC client exceptions in case of subsequent connection closure issues\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/rahuljain373/storm STORM-2028\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/2248.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #2248\n    \n----\ncommit 024d2694cca2c98daed769fb82f93c945e715a10\nAuthor: Rahul Jain <rahulja@adobe.com>\nDate:   2017-07-31T07:44:39Z\n\n    STORM-2028: Fix for uprooting the JDBC client exceptions in case of subsequent connection closure issues\n\n----\n","created":"2017-07-31T07:49:40.645+0000","updated":"2017-07-31T07:49:40.645+0000","started":"2017-07-31T07:49:40.645+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49411","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49412","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user rahuljain373 closed the pull request at:\n\n    https://github.com/apache/storm/pull/2248\n","created":"2017-07-31T07:52:25.969+0000","updated":"2017-07-31T07:52:25.969+0000","started":"2017-07-31T07:52:25.968+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49412","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49413","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user rahuljain373 reopened a pull request:\n\n    https://github.com/apache/storm/pull/2248\n\n    STORM-2028: Fix for uprooting the JDBC client exceptions in case of s…\n\n    Fix for uprooting the JDBC client exceptions in case of subsequent connection closure issues\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/rahuljain373/storm STORM-2028\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/2248.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #2248\n    \n----\ncommit 024d2694cca2c98daed769fb82f93c945e715a10\nAuthor: Rahul Jain <rahulja@adobe.com>\nDate:   2017-07-31T07:44:39Z\n\n    STORM-2028: Fix for uprooting the JDBC client exceptions in case of subsequent connection closure issues\n\n----\n","created":"2017-07-31T07:53:06.760+0000","updated":"2017-07-31T07:53:06.760+0000","started":"2017-07-31T07:53:06.759+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49413","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49455","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user RPCMoritz commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r130360350\n  \n    --- Diff: external/storm-jdbc/src/test/java/org/apache/storm/jdbc/common/JdbcClientTest.java ---\n    @@ -92,3 +115,27 @@ public void cleanup() {\n             client.executeSql(\"drop table \" + tableName);\n         }\n     }\n    +\n    +class MockConnectionProvider implements ConnectionProvider {\n    +\n    +    private Map<String, Object> configMap;\n    +\n    +    public MockConnectionProvider(Map<String, Object> mockCPConfigMap) {\n    +        this.configMap = mockCPConfigMap;\n    +    }\n    +\n    +    @Override\n    +    public synchronized void prepare() {\n    +        // To be Implemented\n    +    }\n    +\n    +    @Override\n    +    public Connection getConnection() {\n    +        throw new RuntimeException(\"connection error\");\n    +    }\n    +\n    +    @Override\n    +    public void cleanup() {\n    +        // To be Implemented\n    --- End diff --\n    \n    this comment isn't necessary/misguiding\n","created":"2017-07-31T14:11:56.518+0000","updated":"2017-07-31T14:11:56.518+0000","started":"2017-07-31T14:11:56.517+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49455","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49456","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user RPCMoritz commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r130360392\n  \n    --- Diff: external/storm-jdbc/src/test/java/org/apache/storm/jdbc/common/JdbcClientTest.java ---\n    @@ -92,3 +115,27 @@ public void cleanup() {\n             client.executeSql(\"drop table \" + tableName);\n         }\n     }\n    +\n    +class MockConnectionProvider implements ConnectionProvider {\n    +\n    +    private Map<String, Object> configMap;\n    +\n    +    public MockConnectionProvider(Map<String, Object> mockCPConfigMap) {\n    +        this.configMap = mockCPConfigMap;\n    +    }\n    +\n    +    @Override\n    +    public synchronized void prepare() {\n    +        // To be Implemented\n    --- End diff --\n    \n    this comment isn't necessary/misguiding\n","created":"2017-07-31T14:11:56.563+0000","updated":"2017-07-31T14:11:56.563+0000","started":"2017-07-31T14:11:56.562+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49456","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49457","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user RPCMoritz commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r130361066\n  \n    --- Diff: external/storm-jdbc/src/main/java/org/apache/storm/jdbc/common/JdbcClient.java ---\n    @@ -223,13 +237,25 @@ private void setPreparedStatementParams(PreparedStatement preparedStatement, Lis\n             }\n         }\n     \n    -    private void closeConnection(Connection connection) {\n    +    private void closeConnection(Connection connection, Exception finalException) {\n             if (connection != null) {\n                 try {\n                     connection.close();\n                 } catch (SQLException e) {\n    -                throw new RuntimeException(\"Failed to close connection\", e);\n    +                if (finalException != null)\n    +                {\n    +                    LOG.error(\"Failed to close connection\");\n    --- End diff --\n    \n    We should still log ```e``` here\n","created":"2017-07-31T14:11:56.566+0000","updated":"2017-07-31T14:11:56.566+0000","started":"2017-07-31T14:11:56.565+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49457","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49458","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user RPCMoritz commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r130362674\n  \n    --- Diff: external/storm-jdbc/src/test/java/org/apache/storm/jdbc/common/JdbcClientTest.java ---\n    @@ -80,6 +85,24 @@ public void testInsertAndSelect() {\n             Assert.assertEquals(rows, selectedRows);\n         }\n     \n    +    @Rule\n    +    public ExpectedException thrown = ExpectedException.none();\n    +\n    +    @Test\n    +    public void testInsertConnectionError() {\n    +\n    +        ConnectionProvider connectionProvider = new MockConnectionProvider(null);\n    +        this.client = new JdbcClient(connectionProvider, 60);\n    +\n    +        List<Column> row = createRow(1, \"frank\");\n    +        List<List<Column>> rows  = new ArrayList<List<Column>>();\n    +        rows.add(row);\n    +        String query  = \"insert into user_details values(?,?,?)\";\n    +\n    +        thrown.expect(MultipleFailureException.class);\n    --- End diff --\n    \n    Is this specific enough to fail with the previous code?\n","created":"2017-07-31T14:11:56.842+0000","updated":"2017-07-31T14:11:56.842+0000","started":"2017-07-31T14:11:56.841+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49458","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user RPCMoritz commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r130360205\n  \n    --- Diff: external/storm-jdbc/src/test/java/org/apache/storm/jdbc/common/JdbcClientTest.java ---\n    @@ -92,3 +115,27 @@ public void cleanup() {\n             client.executeSql(\"drop table \" + tableName);\n         }\n     }\n    +\n    +class MockConnectionProvider implements ConnectionProvider {\n    +\n    +    private Map<String, Object> configMap;\n    +\n    +    public MockConnectionProvider(Map<String, Object> mockCPConfigMap) {\n    --- End diff --\n    \n    The class name could be chosen to be more descriptive -- ThrowingConnectionProvider?\n","created":"2017-07-31T14:11:56.844+0000","updated":"2017-07-31T14:11:56.844+0000","started":"2017-07-31T14:11:56.843+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49459","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user rahuljain373 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r130399722\n  \n    --- Diff: external/storm-jdbc/src/test/java/org/apache/storm/jdbc/common/JdbcClientTest.java ---\n    @@ -80,6 +85,24 @@ public void testInsertAndSelect() {\n             Assert.assertEquals(rows, selectedRows);\n         }\n     \n    +    @Rule\n    +    public ExpectedException thrown = ExpectedException.none();\n    +\n    +    @Test\n    +    public void testInsertConnectionError() {\n    +\n    +        ConnectionProvider connectionProvider = new MockConnectionProvider(null);\n    +        this.client = new JdbcClient(connectionProvider, 60);\n    +\n    +        List<Column> row = createRow(1, \"frank\");\n    +        List<List<Column>> rows  = new ArrayList<List<Column>>();\n    +        rows.add(row);\n    +        String query  = \"insert into user_details values(?,?,?)\";\n    +\n    +        thrown.expect(MultipleFailureException.class);\n    --- End diff --\n    \n    Yup, RuntimeException is expected with earlier code.\n","created":"2017-07-31T16:22:46.853+0000","updated":"2017-07-31T16:22:46.853+0000","started":"2017-07-31T16:22:46.852+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49472","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49616","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user rahuljain373 commented on the issue:\n\n    https://github.com/apache/storm/pull/2248\n  \n    @RPCMoritz Should i ask someone for merge??\n","created":"2017-08-02T07:22:48.868+0000","updated":"2017-08-02T07:22:48.868+0000","started":"2017-08-02T07:22:48.867+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49616","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49617","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user RPCMoritz commented on the issue:\n\n    https://github.com/apache/storm/pull/2248\n  \n    @HeartSaVioR since you helped out with this issue previously - can we get some committer attention to this PR? LGTM quickly.\n","created":"2017-08-02T07:31:06.300+0000","updated":"2017-08-02T07:31:06.300+0000","started":"2017-08-02T07:31:06.299+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49617","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49815","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r131020840\n  \n    --- Diff: external/storm-jdbc/src/main/java/org/apache/storm/jdbc/common/JdbcClient.java ---\n    @@ -223,13 +237,25 @@ private void setPreparedStatementParams(PreparedStatement preparedStatement, Lis\n             }\n         }\n     \n    -    private void closeConnection(Connection connection) {\n    +    private void closeConnection(Connection connection, Exception finalException) {\n             if (connection != null) {\n                 try {\n                     connection.close();\n                 } catch (SQLException e) {\n    -                throw new RuntimeException(\"Failed to close connection\", e);\n    +                if (finalException != null)\n    --- End diff --\n    \n    `{` after `)` with a space.\n","created":"2017-08-02T23:19:41.478+0000","updated":"2017-08-02T23:19:41.478+0000","started":"2017-08-02T23:19:41.477+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49815","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49816","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r131020932\n  \n    --- Diff: external/storm-jdbc/src/main/java/org/apache/storm/jdbc/common/JdbcClient.java ---\n    @@ -223,13 +237,25 @@ private void setPreparedStatementParams(PreparedStatement preparedStatement, Lis\n             }\n         }\n     \n    -    private void closeConnection(Connection connection) {\n    +    private void closeConnection(Connection connection, Exception finalException) {\n             if (connection != null) {\n                 try {\n                     connection.close();\n                 } catch (SQLException e) {\n    -                throw new RuntimeException(\"Failed to close connection\", e);\n    +                if (finalException != null)\n    +                {\n    +                    LOG.error(\"Failed to close connection: \" + e.getMessage());\n    +                }\n    +                else\n    +                {\n    +                    finalException = new RuntimeException(\"Failed to close connection\", e);\n    +                }\n                 }\n             }\n    +\n    +        if (finalException != null)\n    --- End diff --\n    \n    `{` after `)` with a space.\n","created":"2017-08-02T23:19:41.479+0000","updated":"2017-08-02T23:19:41.479+0000","started":"2017-08-02T23:19:41.478+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49816","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49817","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r131020922\n  \n    --- Diff: external/storm-jdbc/src/main/java/org/apache/storm/jdbc/common/JdbcClient.java ---\n    @@ -223,13 +237,25 @@ private void setPreparedStatementParams(PreparedStatement preparedStatement, Lis\n             }\n         }\n     \n    -    private void closeConnection(Connection connection) {\n    +    private void closeConnection(Connection connection, Exception finalException) {\n             if (connection != null) {\n                 try {\n                     connection.close();\n                 } catch (SQLException e) {\n    -                throw new RuntimeException(\"Failed to close connection\", e);\n    +                if (finalException != null)\n    +                {\n    +                    LOG.error(\"Failed to close connection: \" + e.getMessage());\n    +                }\n    --- End diff --\n    \n    `else` after `}` with a space, `{` after `else` with a space.\n","created":"2017-08-02T23:19:41.484+0000","updated":"2017-08-02T23:19:41.484+0000","started":"2017-08-02T23:19:41.483+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49817","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user rahuljain373 commented on the issue:\n\n    https://github.com/apache/storm/pull/2248\n  \n    @HeartSaVioR Squashed the commits and fixed the styling issues\n","created":"2017-08-03T06:49:14.375+0000","updated":"2017-08-03T06:49:14.375+0000","started":"2017-08-03T06:49:14.374+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49862","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r131263697\n  \n    --- Diff: external/storm-jdbc/src/test/java/org/apache/storm/jdbc/common/JdbcClientTest.java ---\n    @@ -80,6 +85,24 @@ public void testInsertAndSelect() {\n             Assert.assertEquals(rows, selectedRows);\n         }\n     \n    +    @Rule\n    +    public ExpectedException thrown = ExpectedException.none();\n    +\n    +    @Test\n    +    public void testInsertConnectionError() {\n    +\n    +        ConnectionProvider connectionProvider = new MockConnectionProvider(null);\n    +        this.client = new JdbcClient(connectionProvider, 60);\n    +\n    +        List<Column> row = createRow(1, \"frank\");\n    +        List<List<Column>> rows  = new ArrayList<List<Column>>();\n    +        rows.add(row);\n    +        String query  = \"insert into user_details values(?,?,?)\";\n    +\n    +        thrown.expect(MultipleFailureException.class);\n    --- End diff --\n    \n    I am not super familiar with MultipleFailureException.  I though that `thrown.expect(MultipleFailureException.class)` will verify that an instance of MultipleFailureException is thrown by `client.executeInsertQuery...` but because it is not a part of our code I must be wrong.  Is it being treated like a wild card then?\n","created":"2017-08-03T21:25:07.215+0000","updated":"2017-08-03T21:25:07.215+0000","started":"2017-08-03T21:25:07.214+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49962","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/49963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/storm/pull/2248\n  \n    To me it looks good, just one question about the test (and this is mostly for my own knowledge).\n","created":"2017-08-03T21:25:43.365+0000","updated":"2017-08-03T21:25:43.365+0000","started":"2017-08-03T21:25:43.364+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"49963","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/50088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user rahuljain373 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2248#discussion_r131534160\n  \n    --- Diff: external/storm-jdbc/src/test/java/org/apache/storm/jdbc/common/JdbcClientTest.java ---\n    @@ -80,6 +85,24 @@ public void testInsertAndSelect() {\n             Assert.assertEquals(rows, selectedRows);\n         }\n     \n    +    @Rule\n    +    public ExpectedException thrown = ExpectedException.none();\n    +\n    +    @Test\n    +    public void testInsertConnectionError() {\n    +\n    +        ConnectionProvider connectionProvider = new MockConnectionProvider(null);\n    +        this.client = new JdbcClient(connectionProvider, 60);\n    +\n    +        List<Column> row = createRow(1, \"frank\");\n    +        List<List<Column>> rows  = new ArrayList<List<Column>>();\n    +        rows.add(row);\n    +        String query  = \"insert into user_details values(?,?,?)\";\n    +\n    +        thrown.expect(MultipleFailureException.class);\n    --- End diff --\n    \n    It's thrown from closeConnection via throw new IllegalStateException(finalException). If an exception is embedded into another exception, it will be thrown as MultipleFailureException. \n","created":"2017-08-06T04:22:21.550+0000","updated":"2017-08-06T04:22:21.550+0000","started":"2017-08-06T04:22:21.550+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"50088","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/50288","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/2248\n  \n    +1\n","created":"2017-08-09T04:44:34.999+0000","updated":"2017-08-09T04:44:34.999+0000","started":"2017-08-09T04:44:34.997+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"50288","issueId":"12996014"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12996014/worklog/50289","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/2248\n","created":"2017-08-09T04:44:41.373+0000","updated":"2017-08-09T04:44:41.373+0000","started":"2017-08-09T04:44:41.372+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"50289","issueId":"12996014"}]},"customfield_12311820":"0|i323lz:"}}