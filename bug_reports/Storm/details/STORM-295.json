{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12710381","self":"https://issues.apache.org/jira/rest/api/2/issue/12710381","key":"STORM-295","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326452","id":"12326452","name":"0.9.2-incubating","archived":false,"released":true,"releaseDate":"2014-06-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-04-24T18:09:01.938+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 19 22:06:57 UTC 2014","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2174728991_*|*_5_*:*_1_*:*_0","customfield_12310420":"388703","customfield_12312321":null,"resolutiondate":"2014-05-19T22:06:46.510+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-295/watchers","watchCount":3,"isWatching":false},"created":"2014-04-24T18:01:17.560+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"customfield_12312339":null,"issuelinks":[{"id":"12388614","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12388614","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12711223","key":"STORM-304","self":"https://issues.apache.org/jira/rest/api/2/issue/12711223","fields":{"summary":"Use JAVA_HOME set in storm_env.ini to launch workers","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-10-05T02:18:17.245+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"Currently storm uses either /usr/bin/java (most likely) or java pointed to by PATH.\n\nStorm requires a way to define JAVA_HOME in configuration. This will simplify pointing to a version of java that a cluster admin or test frameworks intend to use for storm, especially in an environments where multiple versions of java is on the cluster nodes.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"388954","customfield_12312823":null,"summary":"Add storm configuration to define JAVA_HOME","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980033","id":"13980033","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user sureshms opened a pull request:\n\n    https://github.com/apache/incubator-storm/pull/85\n\n    STORM-295. Add storm configuration to define JAVA_HOME\n\n    Here is a patch that adds support for JAVA_HOME. The patch does the following:\n    # New file conf/storm-env.sh is added to setup environment. This is where JAVA_HOME is set.\n    # I moved storm python script to storm.py. A new shell script storm sets up the environment variables and launches storm.py. \n    # Storm.py now uses java path derived from JAVA_HOME or uses java from PATH if JAVA_HOME is not set.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/sureshms/incubator-storm STORM-295\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/incubator-storm/pull/85.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #85\n    \n----\ncommit d7b74d030c4e4212c9241b6f387304deb128848f\nAuthor: P. Taylor Goetz <ptgoetz@gmail.com>\nDate:   2014-02-19T22:26:23Z\n\n    STORM-295. Add storm configuration to define JAVA_HOME\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T18:09:01.938+0000","updated":"2014-04-24T18:09:01.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980130","id":"13980130","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user d2r commented on a diff in the pull request:\n\n    https://github.com/apache/incubator-storm/pull/85#discussion_r11967225\n  \n    --- Diff: bin/storm ---\n    @@ -8,449 +10,50 @@\n     # \"License\"); you may not use this file except in compliance\n     # with the License.  You may obtain a copy of the License at\n     #\n    -# http://www.apache.org/licenses/LICENSE-2.0\n    +#     http://www.apache.org/licenses/LICENSE-2.0\n     #\n     # Unless required by applicable law or agreed to in writing, software\n     # distributed under the License is distributed on an \"AS IS\" BASIS,\n     # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     # See the License for the specific language governing permissions and\n     # limitations under the License.\n    +#\n     \n    -import os\n    -import sys\n    -import random\n    -import subprocess as sub\n    -import getopt\n    -import re\n    -import shlex\n    -\n    -def identity(x):\n    -    return x\n    -\n    -def cygpath(x):\n    -    command = [\"cygpath\", \"-wp\", x]\n    -    p = sub.Popen(command,stdout=sub.PIPE)\n    -    output, errors = p.communicate()\n    -    lines = output.split(\"\\n\")\n    -    return lines[0]\n    -\n    -if sys.platform == \"cygwin\":\n    -    normclasspath = cygpath\n    -else:\n    -    normclasspath = identity\n    -\n    -STORM_DIR = \"/\".join(os.path.realpath( __file__ ).split(\"/\")[:-2])\n    -USER_CONF_DIR = os.path.expanduser(\"~/.storm\")\n    -CLUSTER_CONF_DIR = STORM_DIR + \"/conf\"\n    -if (not os.path.isfile(USER_CONF_DIR + \"/storm.yaml\")):\n    -    USER_CONF_DIR = CLUSTER_CONF_DIR\n    -CONFIG_OPTS = []\n    -CONFFILE = \"\"\n    -JAR_JVM_OPTS = shlex.split(os.getenv('STORM_JAR_JVM_OPTS', ''))\n    -\n    -\n    -def get_config_opts():\n    -    global CONFIG_OPTS\n    -    return \"-Dstorm.options=\" + (','.join(CONFIG_OPTS)).replace(' ', \"%%%%\")\n    -\n    -if not os.path.exists(STORM_DIR + \"/RELEASE\"):\n    -    print \"******************************************\"\n    -    print \"The storm client can only be run from within a release. You appear to be trying to run the client from a checkout of Storm's source code.\"\n    -    print \"\\nYou can download a Storm release at http://storm-project.net/downloads.html\"\n    -    print \"******************************************\"\n    -    sys.exit(1)  \n    -\n    -def get_jars_full(adir):\n    -    files = os.listdir(adir)\n    -    ret = []\n    -    for f in files:\n    -        if f.endswith(\".jar\"):\n    -            ret.append(adir + \"/\" + f)\n    -    return ret\n    -\n    -def get_classpath(extrajars):\n    -    ret = get_jars_full(STORM_DIR)\n    -    ret.extend(get_jars_full(STORM_DIR + \"/lib\"))\n    -    ret.extend(extrajars)\n    -    return normclasspath(\":\".join(ret))\n    -\n    -def confvalue(name, extrapaths):\n    -    global CONFFILE\n    -    command = [\n    -        \"java\", \"-client\", get_config_opts(), \"-Dstorm.conf.file=\" + CONFFILE, \"-cp\", get_classpath(extrapaths), \"backtype.storm.command.config_value\", name\n    -    ]\n    -    p = sub.Popen(command, stdout=sub.PIPE)\n    -    output, errors = p.communicate()\n    -    lines = output.split(\"\\n\")\n    -    for line in lines:\n    -        tokens = line.split(\" \")\n    -        if tokens[0] == \"VALUE:\":\n    -            return \" \".join(tokens[1:])\n    -    return \"\"\n    -\n    -def print_localconfvalue(name):\n    -    \"\"\"Syntax: [storm localconfvalue conf-name]\n    -\n    -    Prints out the value for conf-name in the local Storm configs. \n    -    The local Storm configs are the ones in ~/.storm/storm.yaml merged \n    -    in with the configs in defaults.yaml.\n    -    \"\"\"\n    -    print name + \": \" + confvalue(name, [USER_CONF_DIR])\n    -\n    -def print_remoteconfvalue(name):\n    -    \"\"\"Syntax: [storm remoteconfvalue conf-name]\n    -\n    -    Prints out the value for conf-name in the cluster's Storm configs. \n    -    The cluster's Storm configs are the ones in $STORM-PATH/conf/storm.yaml \n    -    merged in with the configs in defaults.yaml. \n    -\n    -    This command must be run on a cluster machine.\n    -    \"\"\"\n    -    print name + \": \" + confvalue(name, [CLUSTER_CONF_DIR])\n    -\n    -def parse_args(string):\n    -    r\"\"\"Takes a string of whitespace-separated tokens and parses it into a list.\n    -    Whitespace inside tokens may be quoted with single quotes, double quotes or\n    -    backslash (similar to command-line arguments in bash).\n    -\n    -    >>> parse_args(r'''\"a a\" 'b b' c\\ c \"d'd\" 'e\"e' 'f\\'f' \"g\\\"g\" \"i\"\"i\" 'j''j' k\" \"k l' l' mm n\\\\n''')\n    -    ['a a', 'b b', 'c c', \"d'd\", 'e\"e', \"f'f\", 'g\"g', 'ii', 'jj', 'k k', 'l l', 'mm', r'n\\n']\n    -    \"\"\"\n    -    re_split = re.compile(r'''((?:\n    -        [^\\s\"'\\\\] |\n    -        \"(?: [^\"\\\\] | \\\\.)*\" |\n    -        '(?: [^'\\\\] | \\\\.)*' |\n    -        \\\\.\n    -    )+)''', re.VERBOSE)\n    -    args = re_split.split(string)[1::2]\n    -    args = [re.compile(r'\"((?:[^\"\\\\]|\\\\.)*)\"').sub('\\\\1', x) for x in args]\n    -    args = [re.compile(r\"'((?:[^'\\\\]|\\\\.)*)'\").sub('\\\\1', x) for x in args]\n    -    return [re.compile(r'\\\\(.)').sub('\\\\1', x) for x in args]\n    -\n    -def exec_storm_class(klass, jvmtype=\"-server\", jvmopts=[], extrajars=[], args=[], fork=False):\n    -    global CONFFILE\n    -    all_args = [\n    -        \"java\", jvmtype, get_config_opts(),\n    -        \"-Dstorm.home=\" + STORM_DIR, \n    -        \"-Djava.library.path=\" + confvalue(\"java.library.path\", extrajars),\n    -        \"-Dstorm.conf.file=\" + CONFFILE,\n    -        \"-cp\", get_classpath(extrajars),\n    -    ] + jvmopts + [klass] + list(args)\n    -    print \"Running: \" + \" \".join(all_args)\n    -    if fork:\n    -        os.spawnvp(os.P_WAIT, \"java\", all_args)\n    -    else:\n    -        os.execvp(\"java\", all_args) # replaces the current process and never returns\n    -\n    -def jar(jarfile, klass, *args):\n    -    \"\"\"Syntax: [storm jar topology-jar-path class ...]\n    -\n    -    Runs the main method of class with the specified arguments. \n    -    The storm jars and configs in ~/.storm are put on the classpath. \n    -    The process is configured so that StormSubmitter \n    -    (http://storm.incubator.apache.org/apidocs/backtype/storm/StormSubmitter.html)\n    -    will upload the jar at topology-jar-path when the topology is submitted.\n    -    \"\"\"\n    -    exec_storm_class(\n    -        klass,\n    -        jvmtype=\"-client\",\n    -        extrajars=[jarfile, USER_CONF_DIR, STORM_DIR + \"/bin\"],\n    -        args=args,\n    -        jvmopts=JAR_JVM_OPTS + [\"-Dstorm.jar=\" + jarfile])\n    -\n    -def kill(*args):\n    -    \"\"\"Syntax: [storm kill topology-name [-w wait-time-secs]]\n    -\n    -    Kills the topology with the name topology-name. Storm will \n    -    first deactivate the topology's spouts for the duration of \n    -    the topology's message timeout to allow all messages currently \n    -    being processed to finish processing. Storm will then shutdown \n    -    the workers and clean up their state. You can override the length \n    -    of time Storm waits between deactivation and shutdown with the -w flag.\n    -    \"\"\"\n    -    exec_storm_class(\n    -        \"backtype.storm.command.kill_topology\", \n    -        args=args, \n    -        jvmtype=\"-client\", \n    -        extrajars=[USER_CONF_DIR, STORM_DIR + \"/bin\"])\n    -\n    -def activate(*args):\n    -    \"\"\"Syntax: [storm activate topology-name]\n    -\n    -    Activates the specified topology's spouts.\n    -    \"\"\"\n    -    exec_storm_class(\n    -        \"backtype.storm.command.activate\", \n    -        args=args, \n    -        jvmtype=\"-client\", \n    -        extrajars=[USER_CONF_DIR, STORM_DIR + \"/bin\"])\n    -\n    -def listtopos(*args):\n    -    \"\"\"Syntax: [storm list]\n    -\n    -    List the running topologies and their statuses.\n    -    \"\"\"\n    -    exec_storm_class(\n    -        \"backtype.storm.command.list\", \n    -        args=args, \n    -        jvmtype=\"-client\", \n    -        extrajars=[USER_CONF_DIR, STORM_DIR + \"/bin\"])\n    -\n    -def deactivate(*args):\n    -    \"\"\"Syntax: [storm deactivate topology-name]\n    -\n    -    Deactivates the specified topology's spouts.\n    -    \"\"\"\n    -    exec_storm_class(\n    -        \"backtype.storm.command.deactivate\", \n    -        args=args, \n    -        jvmtype=\"-client\", \n    -        extrajars=[USER_CONF_DIR, STORM_DIR + \"/bin\"])\n    -\n    -def rebalance(*args):\n    -    \"\"\"Syntax: [storm rebalance topology-name [-w wait-time-secs] [-n new-num-workers] [-e component=parallelism]*]\n    -\n    -    Sometimes you may wish to spread out where the workers for a topology \n    -    are running. For example, let's say you have a 10 node cluster running \n    -    4 workers per node, and then let's say you add another 10 nodes to \n    -    the cluster. You may wish to have Storm spread out the workers for the \n    -    running topology so that each node runs 2 workers. One way to do this \n    -    is to kill the topology and resubmit it, but Storm provides a \"rebalance\" \n    -    command that provides an easier way to do this.\n    -\n    -    Rebalance will first deactivate the topology for the duration of the \n    -    message timeout (overridable with the -w flag) and then redistribute \n    -    the workers evenly around the cluster. The topology will then return to \n    -    its previous state of activation (so a deactivated topology will still \n    -    be deactivated and an activated topology will go back to being activated).\n    -    \n    -    The rebalance command can also be used to change the parallelism of a running topology.\n    -    Use the -n and -e switches to change the number of workers or number of executors of a component\n    -    respectively.\n    -    \"\"\"\n    -    exec_storm_class(\n    -        \"backtype.storm.command.rebalance\", \n    -        args=args, \n    -        jvmtype=\"-client\", \n    -        extrajars=[USER_CONF_DIR, STORM_DIR + \"/bin\"])\n    -\n    -def shell(resourcesdir, command, *args):\n    -    tmpjarpath = \"stormshell\" + str(random.randint(0, 10000000)) + \".jar\"\n    -    os.system(\"jar cf %s %s\" % (tmpjarpath, resourcesdir))\n    -    runnerargs = [tmpjarpath, command]\n    -    runnerargs.extend(args)\n    -    exec_storm_class(\n    -        \"backtype.storm.command.shell_submission\", \n    -        args=runnerargs, \n    -        jvmtype=\"-client\", \n    -        extrajars=[USER_CONF_DIR],\n    -        fork=True)\n    -    os.system(\"rm \" + tmpjarpath)\n    -\n    -def repl():\n    -    \"\"\"Syntax: [storm repl]\n    -\n    -    Opens up a Clojure REPL with the storm jars and configuration \n    -    on the classpath. Useful for debugging.\n    -    \"\"\"\n    -    cppaths = [CLUSTER_CONF_DIR]\n    -    exec_storm_class(\"clojure.lang.Repl\", jvmtype=\"-client\", extrajars=cppaths)\n    -\n    -def nimbus(klass=\"backtype.storm.daemon.nimbus\"):\n    -    \"\"\"Syntax: [storm nimbus]\n    -\n    -    Launches the nimbus daemon. This command should be run under \n    -    supervision with a tool like daemontools or monit. \n    -\n    -    See Setting up a Storm cluster for more information.\n    -    (http://storm.incubator.apache.org/documentation/Setting-up-a-Storm-cluster)\n    -    \"\"\"\n    -    cppaths = [CLUSTER_CONF_DIR]\n    -    jvmopts = parse_args(confvalue(\"nimbus.childopts\", cppaths)) + [\n    -        \"-Dlogfile.name=nimbus.log\",\n    -        \"-Dlogback.configurationFile=\" + STORM_DIR + \"/logback/cluster.xml\",\n    -    ]\n    -    exec_storm_class(\n    -        klass, \n    -        jvmtype=\"-server\", \n    -        extrajars=cppaths, \n    -        jvmopts=jvmopts)\n    -\n    -def supervisor(klass=\"backtype.storm.daemon.supervisor\"):\n    -    \"\"\"Syntax: [storm supervisor]\n    -\n    -    Launches the supervisor daemon. This command should be run \n    -    under supervision with a tool like daemontools or monit. \n    -\n    -    See Setting up a Storm cluster for more information.\n    -    (http://storm.incubator.apache.org/documentation/Setting-up-a-Storm-cluster)\n    -    \"\"\"\n    -    cppaths = [CLUSTER_CONF_DIR]\n    -    jvmopts = parse_args(confvalue(\"supervisor.childopts\", cppaths)) + [\n    -        \"-Dlogfile.name=supervisor.log\",\n    -        \"-Dlogback.configurationFile=\" + STORM_DIR + \"/logback/cluster.xml\",\n    -    ]\n    -    exec_storm_class(\n    -        klass, \n    -        jvmtype=\"-server\", \n    -        extrajars=cppaths, \n    -        jvmopts=jvmopts)\n    -\n    -def ui():\n    -    \"\"\"Syntax: [storm ui]\n    -\n    -    Launches the UI daemon. The UI provides a web interface for a Storm \n    -    cluster and shows detailed stats about running topologies. This command \n    -    should be run under supervision with a tool like daemontools or monit. \n    -\n    -    See Setting up a Storm cluster for more information.\n    -    (http://storm.incubator.apache.org/documentation/Setting-up-a-Storm-cluster)\n    -    \"\"\"\n    -    cppaths = [CLUSTER_CONF_DIR]\n    -    jvmopts = parse_args(confvalue(\"ui.childopts\", cppaths)) + [\n    -        \"-Dlogfile.name=ui.log\",\n    -        \"-Dlogback.configurationFile=\" + STORM_DIR + \"/logback/cluster.xml\",\n    -    ]\n    -    exec_storm_class(\n    -        \"backtype.storm.ui.core\", \n    -        jvmtype=\"-server\", \n    -        jvmopts=jvmopts, \n    -        extrajars=[STORM_DIR, CLUSTER_CONF_DIR])\n    -\n    -def logviewer():\n    -    \"\"\"Syntax: [storm logviewer]\n    -\n    -    Launches the log viewer daemon. It provides a web interface for viewing\n    -    storm log files. This command should be run under supervision with a \n    -    tool like daemontools or monit. \n    -\n    -    See Setting up a Storm cluster for more information.\n    -    (http://storm.incubator.apache.org/documentation/Setting-up-a-Storm-cluster)\n    -    \"\"\"\n    -    cppaths = [CLUSTER_CONF_DIR]\n    -    jvmopts = parse_args(confvalue(\"logviewer.childopts\", cppaths)) + [\n    -        \"-Dlogfile.name=logviewer.log\",\n    -        \"-Dlogback.configurationFile=\" + STORM_DIR + \"/logback/cluster.xml\",\n    -    ]\n    -    exec_storm_class(\n    -        \"backtype.storm.daemon.logviewer\", \n    -        jvmtype=\"-server\", \n    -        jvmopts=jvmopts, \n    -        extrajars=[STORM_DIR, CLUSTER_CONF_DIR])\n    -\n    -def drpc():\n    -    \"\"\"Syntax: [storm drpc]\n    -\n    -    Launches a DRPC daemon. This command should be run under supervision \n    -    with a tool like daemontools or monit. \n    -\n    -    See Distributed RPC for more information.\n    -    (http://storm.incubator.apache.org/documentation/Distributed-RPC)\n    -    \"\"\"\n    -    cppaths = [CLUSTER_CONF_DIR]\n    -    jvmopts = parse_args(confvalue(\"drpc.childopts\", cppaths)) + [\n    -        \"-Dlogfile.name=drpc.log\",\n    -        \"-Dlogback.configurationFile=\" + STORM_DIR + \"/logback/cluster.xml\"\n    -    ]\n    -    exec_storm_class(\n    -        \"backtype.storm.daemon.drpc\", \n    -        jvmtype=\"-server\", \n    -        jvmopts=jvmopts, \n    -        extrajars=[CLUSTER_CONF_DIR])\n    -\n    -def dev_zookeeper():\n    -    \"\"\"Syntax: [storm dev-zookeeper]\n    -  \n    -    Launches a fresh Zookeeper server using \"dev.zookeeper.path\" as its local dir and\n    -    \"storm.zookeeper.port\" as its port. This is only intended for development/testing, the\n    -    Zookeeper instance launched is not configured to be used in production.\n    -    \"\"\"\n    -    cppaths = [CLUSTER_CONF_DIR]\n    -    exec_storm_class(\n    -        \"backtype.storm.command.dev_zookeeper\", \n    -        jvmtype=\"-server\", \n    -        extrajars=[CLUSTER_CONF_DIR])\n    -\n    -def version():\n    -  \"\"\"Syntax: [storm version]\n    -  \n    -  Prints the version number of this Storm release.  \n    -  \"\"\"\n    -  releasefile = STORM_DIR + \"/RELEASE\"\n    -  if os.path.exists(releasefile):\n    -    print open(releasefile).readline().strip()\n    -  else:\n    -    print \"Unknown\"\n    -\n    -def print_classpath():\n    -    \"\"\"Syntax: [storm classpath]\n    -\n    -    Prints the classpath used by the storm client when running commands.\n    -    \"\"\"\n    -    print get_classpath([])\n    -\n    -def print_commands():\n    -    \"\"\"Print all client commands and link to documentation\"\"\"\n    -    print \"Commands:\\n\\t\",  \"\\n\\t\".join(sorted(COMMANDS.keys()))\n    -    print \"\\nHelp:\", \"\\n\\thelp\", \"\\n\\thelp <command>\"\n    -    print \"\\nDocumentation for the storm client can be found at http://storm.incubator.apache.org/documentation/Command-line-client.html\\n\"\n    -    print \"Configs can be overridden using one or more -c flags, e.g. \\\"storm list -c nimbus.host=nimbus.mycompany.com\\\"\\n\"\n    -\n    -def print_usage(command=None):\n    -    \"\"\"Print one help message or list of available commands\"\"\"\n    -    if command != None:\n    -        if COMMANDS.has_key(command):\n    -            print (COMMANDS[command].__doc__ or \n    -                  \"No documentation provided for <%s>\" % command)\n    -        else:\n    -           print \"<%s> is not a valid command\" % command\n    -    else:\n    -        print_commands()\n    -\n    -def unknown_command(*args):\n    -    print \"Unknown command: [storm %s]\" % ' '.join(sys.argv[1:])\n    -    print_usage()\n    -\n    -COMMANDS = {\"jar\": jar, \"kill\": kill, \"shell\": shell, \"nimbus\": nimbus, \"ui\": ui, \"logviewer\": logviewer,\n    -            \"drpc\": drpc, \"supervisor\": supervisor, \"localconfvalue\": print_localconfvalue,\n    -            \"remoteconfvalue\": print_remoteconfvalue, \"repl\": repl, \"classpath\": print_classpath,\n    -            \"activate\": activate, \"deactivate\": deactivate, \"rebalance\": rebalance, \"help\": print_usage,\n    -            \"list\": listtopos, \"dev-zookeeper\": dev_zookeeper, \"version\": version}\n    -\n    -def parse_config(config_list):\n    -    global CONFIG_OPTS\n    -    if len(config_list) > 0:\n    -        for config in config_list:\n    -            CONFIG_OPTS.append(config)\n    -\n    -def parse_config_opts(args):\n    -  curr = args[:]\n    -  curr.reverse()\n    -  config_list = []\n    -  args_list = []\n    -  \n    -  while len(curr) > 0:\n    -    token = curr.pop()\n    -    if token == \"-c\":\n    -      config_list.append(curr.pop())\n    -    elif token == \"--config\":\n    -      global CONFFILE\n    -      CONFFILE = curr.pop()\n    -    else:\n    -      args_list.append(token)\n    -  \n    -  return config_list, args_list\n    -    \n    -def main():\n    -    if len(sys.argv) <= 1:\n    -        print_usage()\n    -        sys.exit(-1)\n    -    global CONFIG_OPTS\n    -    config_list, args = parse_config_opts(sys.argv[1:])\n    -    parse_config(config_list)\n    -    COMMAND = args[0]\n    -    ARGS = args[1:]\n    -    (COMMANDS.get(COMMAND, unknown_command))(*ARGS)\n    -    \n    -if __name__ == \"__main__\":\n    -    main()\n    +# Resolve links - $0 may be a softlink\n    +PRG=\"${0}\"\n    +\n    +while [ -h \"${PRG}\" ]; do\n    +  ls=`ls -ld \"${PRG}\"`\n    +  link=`expr \"$ls\" : '.*-> \\(.*\\)$'`\n    +  if expr \"$link\" : '/.*' > /dev/null; then\n    +    PRG=\"$link\"\n    +  else\n    +    PRG=`dirname \"${PRG}\"`/\"$link\"\n    +  fi\n    +done\n    +\n    +# find python >= 2.6\n    +if [ -a /usr/bin/python2.6 ]; then\n    +  PYTHON=/usr/bin/python2.6\n    +fi\n    +\n    +if [ -z \"$PYTHON\" ]; then\n    +  PYTHON=/usr/bin/python\n    +fi\n    +\n    +# check for version\n    +majversion=`$PYTHON -V 2>&1 | awk '{print $2}' | cut -d'.' -f1`\n    +minversion=`$PYTHON -V 2>&1 | awk '{print $2}' | cut -d'.' -f2`\n    +numversion=$(( 10 * $majversion + $minversion))\n    +if (( $numversion < 26 )); then\n    +  echo \"Need python version > 2.6\"\n    +  exit 1\n    +fi\n    +\n    +STORM_BIN_DIR=`dirname ${PRG}`\n    +STORM_BASE_DIR=`cd ${STORM_BIN_DIR}/..;pwd`\n    +export STORM_BASE_DIR\n    +\n    +. ${STORM_BASE_DIR}/bin/storm-config.sh\n    +\n    +$PYTHON ${STORM_BIN_DIR}/storm.py $@\n    --- End diff --\n    \n    `\"$@\"` to separately quote arguments in case of spaces.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T19:24:48.996+0000","updated":"2014-04-24T19:24:48.996+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980156","id":"13980156","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/85#issuecomment-41323561\n  \n    I really don't see why we need a shell script layer of indirection to sit on top of our python layer of indirection.  I would rather have the python do something simple like,\n    ```\n    JAVA_HOME=os.getenv('STORM_JAVA_HOME', os.getenv('JAVA_HOME', None))\n    if JAVA_HOME is None:\n      #look for java on the path and use that\n    ```\n    \n    If we really feel that we need a separate config file to set JAVA_HOME and STORM_CONF_DIR, lets have it be written in python or be a simple config file and have storm work with it explicitly.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T19:48:03.048+0000","updated":"2014-04-24T19:48:03.048+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980180","id":"13980180","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sureshms commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/85#issuecomment-41324906\n  \n    The problem with the approach you are talking about is, the shell where STORM services are started, STORM_JAVA_HOME should be set. Having storm_env.sh, some what similar hadoop_env.sh could be a nice way to capture configuration and use it in the scripts. I can certainly turn storm_env.sh into an ini file and directly use it in python, instead of using shell script that uses storm_env.sh to launch python script. What do you think?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T20:00:16.651+0000","updated":"2014-04-24T20:00:16.651+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980192","id":"13980192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/85#issuecomment-41325810\n  \n    I would prefer the .ini file.  In general I would like to see most of the config coming from storm.yaml, but I realize in this case it is a bit of a chicken and egg problem because we need to use JAVA_HOME to run the code to pull the configs out of storm.yaml.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T20:08:10.634+0000","updated":"2014-04-24T20:08:10.634+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980207","id":"13980207","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sureshms commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/85#issuecomment-41326757\n  \n    You are right about the chicken and egg problem. We should consider PyYaml to process yaml in python instead of depending on java to process yaml. Something we could do in the future. I will post a patch based on storm_env.ini file.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T20:17:11.140+0000","updated":"2014-04-24T20:17:11.140+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980215","id":"13980215","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/85#issuecomment-41327257\n  \n    Yes we though about this too, but you have to be sure that you are able to process the command line overrides and defaults.yaml in the same way as the java code.  The command line overrides are fairly simple, but defaults.yaml may involve walking through jar files, and a classpath to find it.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T20:21:34.653+0000","updated":"2014-04-24T20:21:34.653+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980325","id":"13980325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sureshms closed the pull request at:\n\n    https://github.com/apache/incubator-storm/pull/85\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T21:34:47.426+0000","updated":"2014-04-24T21:34:47.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980362","id":"13980362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/86#issuecomment-41337736\n  \n    The code looks good to me.  Please rename the pull request to have \"STORM-295\" in it so the linkage happens.  The only other issue I have is that JAVA_HOME is not being propagated to the worker when it is launched.  The supervisor is still going off of the path.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T21:55:58.556+0000","updated":"2014-04-24T21:55:58.556+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980423","id":"13980423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sureshms commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/86#issuecomment-41341951\n  \n    bq. Please rename the pull request to have \"STORM-295\" in it so the linkage happens.\n    How do I do that? I am a \"pull request\" novice :) You mean the commit messages need to have STORM-295?\n    \n    As regards to supevisor still going off the path, I will create another jira.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T22:48:27.829+0000","updated":"2014-04-24T22:48:27.829+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13980512","id":"13980512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user sureshms opened a pull request:\n\n    https://github.com/apache/incubator-storm/pull/87\n\n    STORM-295. Add storm configuration to define JAVA_HOME\n\n    New pull request with all the previous multiple commits squashed together.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/sureshms/incubator-storm STORM-295\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/incubator-storm/pull/87.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #87\n    \n----\ncommit 2d7f9774160a0520087cdf2cfef968debc5eb168\nAuthor: Suresh Srinivas <sureshms@yahoo-inc.com>\nDate:   2014-04-24T21:33:34Z\n\n    STORM-295. Add storm configuration to define JAVA_HOME\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-24T23:52:20.792+0000","updated":"2014-04-24T23:52:20.792+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13981428","id":"13981428","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/87#issuecomment-41426040\n  \n    The code looks fine.  I just still have the same comment as before.  The supervisor is launching the worker based off of the java on the path, not the JAVA_HOME set in the .ini file.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-25T18:42:38.177+0000","updated":"2014-04-25T18:42:38.177+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13981450","id":"13981450","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. The supervisor is launching the worker based off of the java on the path, not the JAVA_HOME set in the .ini file.\nNot sure if you saw my earlier comment about doing this in a separate jira. The JAVA_HOME changes here are relevant to the scripts alone. If still you want to address supervisor changes as well in this jira, I can upload a new patch with additional changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-25T18:57:27.548+0000","updated":"2014-04-25T18:57:27.548+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13981465","id":"13981465","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"A separate JIRA is fine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2014-04-25T19:08:28.723+0000","updated":"2014-04-25T19:08:28.723+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13981467","id":"13981467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Just to be clear then I am a +1 on this change","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2014-04-25T19:09:13.403+0000","updated":"2014-04-25T19:09:13.403+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13991938","id":"13991938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/87#issuecomment-42443868\n  \n    @revans2 this pull request now launches workers with java from JAVA_HOME if set. It uses a slightly different approach than #97 and updates the unit tests.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-07T15:43:18.853+0000","updated":"2014-05-07T15:43:18.853+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13991952","id":"13991952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/87#issuecomment-42445852\n  \n    +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-07T15:57:53.494+0000","updated":"2014-05-07T15:57:53.494+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/13998089","id":"13998089","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user d2r commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/87#issuecomment-43140840\n  \n    +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-14T21:35:39.522+0000","updated":"2014-05-14T21:35:39.522+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/14002479","id":"14002479","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Thanks Taylor and Suresh,\n\nI merged this into master.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2014-05-19T22:06:46.541+0000","updated":"2014-05-19T22:06:46.541+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710381/comment/14002480","id":"14002480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/incubator-storm/pull/87\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-19T22:06:57.561+0000","updated":"2014-05-19T22:06:57.561+0000"}],"maxResults":20,"total":20,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-295/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1uygn:"}}