{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12903111","self":"https://issues.apache.org/jira/rest/api/2/issue/12903111","key":"STORM-1096","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327123","id":"12327123","description":"security feature branch","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-11-05"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-10-07T21:40:32.008+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 11 15:41:42 UTC 2016","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_152546912_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2015-10-09T14:23:42.081+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1096/watchers","watchCount":4,"isWatching":false},"created":"2015-10-07T20:01:15.201+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327123","id":"12327123","description":"security feature branch","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-11-05"}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-07-11T15:41:42.341+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"We have started using 0.10.0 under load and found a few issues around the UI and impersonation.\n\nThe UI when trying to connect to nimbus will impersonate other users.  Nimbus, by default allows impersonation and just outputs a warning message that it is allowed.  We really should default to not allowing impersonation.  having the authorizer configured by default does not hurt when running insecure because impersonation is not possible, but when security is enabled if someone forgets to set this config we are now insecure by default.\n\nIf you do set all of that up correctly the UI now can impersonate the wrong user when connecting to nimbus.\n\nThe UI decides which user to impersonate by pulling it from the request context.  The requestContext is populated from the HttpRequest when assert-authorized-user is called.  assert-authorized-user takes a topology-conf as a parameter.  The only way to get this topology conf is to talk to nimbus, which will get the wrong user because the request context has not been populated yet.\n\nThis just because a huge pain for users who way too often will not be able to see pages on the UI.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"UI tries to impersonate wrong user when getting topology conf for authorization, impersonation is allowed by default","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14947647","id":"14947647","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user revans2 opened a pull request:\n\n    https://github.com/apache/storm/pull/787\n\n    STORM-1096: Fix some issues with impersonation on the UI\n\n    Conflicts:\n    \tstorm-core/src/clj/backtype/storm/ui/core.clj\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/revans2/incubator-storm STORM-1096-0.10.x\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/787.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #787\n    \n----\ncommit b4806113a7b06a93ea737f681e966701397e539c\nAuthor: Robert (Bobby) Evans <evans@yahoo-inc.com>\nDate:   2015-10-07T21:03:38Z\n\n    STORM-1096: Fix some issues with impersonation on the UI\n    \n    Conflicts:\n    \tstorm-core/src/clj/backtype/storm/ui/core.clj\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-07T21:40:32.008+0000","updated":"2015-10-07T21:40:32.008+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14947648","id":"14947648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user revans2 opened a pull request:\n\n    https://github.com/apache/storm/pull/788\n\n    STORM-1096: Fix some issues with impersonation on the UI\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/revans2/incubator-storm STORM-1096\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/788.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #788\n    \n----\ncommit 0476b92dd82e726adab200d5a77944a5f4f3883c\nAuthor: Robert (Bobby) Evans <evans@yahoo-inc.com>\nDate:   2015-10-07T21:03:38Z\n\n    STORM-1096: Fix some issues with impersonation on the UI\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-07T21:40:34.602+0000","updated":"2015-10-07T21:40:34.602+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14948659","id":"14948659","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/787#issuecomment-146548927\n  \n    The test failure was the intermittent kafka issue.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-08T13:41:36.760+0000","updated":"2015-10-08T13:41:36.760+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14948711","id":"14948711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user kishorvpatil commented on the pull request:\n\n    https://github.com/apache/storm/pull/787#issuecomment-146558088\n  \n    +1. Good catch.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-08T14:12:40.013+0000","updated":"2015-10-08T14:12:40.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14948714","id":"14948714","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user kishorvpatil commented on the pull request:\n\n    https://github.com/apache/storm/pull/788#issuecomment-146558244\n  \n    +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-08T14:13:16.603+0000","updated":"2015-10-08T14:13:16.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14948759","id":"14948759","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user d2r commented on the pull request:\n\n    https://github.com/apache/storm/pull/788#issuecomment-146565508\n  \n    +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-08T14:36:59.474+0000","updated":"2015-10-08T14:36:59.474+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14948761","id":"14948761","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user d2r commented on the pull request:\n\n    https://github.com/apache/storm/pull/787#issuecomment-146566393\n  \n    +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-08T14:40:12.483+0000","updated":"2015-10-08T14:40:12.483+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14949942","id":"14949942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/787#issuecomment-146762852\n  \n    I found that I made a mistake while backporting. At least bin/storm.py should be fixed.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-09T06:01:25.422+0000","updated":"2015-10-09T06:01:25.422+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14950441","id":"14950441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/788\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-09T14:09:42.166+0000","updated":"2015-10-09T14:09:42.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14950462","id":"14950462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/787\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-09T14:23:23.394+0000","updated":"2015-10-09T14:23:23.394+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/14950463","id":"14950463","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Thanks for the reviews I merged this into master and 0.10.x-branch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2015-10-09T14:23:42.103+0000","updated":"2015-10-09T14:23:42.103+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15348854","id":"15348854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2] sorry not bringing this before we merged into the repo.\nFew questions around the config, \n1. we made nimbus.impersonation.authorizer as default but without any nimbus.impersonation.acl configs . This will immediately block anyone from submitting the topology except storm user.\n2. configs right now requires username as key: hosts , groups as values. This is not easy to automate via deployment tools. Also every user who wants to submit should be listed in this config (correct me if I am wrong here).\n3. I understand security should be closed by default . But here in this case we are just blocking everyone to submit a topology or look at topology metrics .\n\nIdeally we should provide wildcard support and make it default or at least have that option to user. \nWildcard should be that a given user can impersonate user x . So I can just add config like any user can impersonate user x.\n\nThe problem I am seeing here in case of Ambari we've a storm view that will send requests through Ambari proxy server. In this case it will send user \"harsha\" is trying to impersonate user \"ambari-server1\" (user x in above example). With current implementation, any user who is trying to access their topology needs to be added to the nimbus.impersonation.acl along with hostname from which they might be querying etc.. in a hosted platform this going to be harder as we keep adding users to the config.\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-24T23:19:00.334+0000","updated":"2016-06-24T23:19:00.334+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15362047","id":"15362047","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"@revan2 any thoughts on above. This behavior seems to be inverse what we want. \n{code}\n user = storm-storm, principal = storm-storm@EXAMPLE.COM is attempting to impersonate user = ambari-server-storm\n{code}\nIn above we should be listing ambari-server-storm in the \n{code}\nnimbus.impersonation.acl:\n     ambari-server-storm: // proxy user\n                       users: [storm-storm, another-user] // wild-card can be used \n                       groups: [*] // should be optional\n                       hosts: [*] \n{code}\nif the user is allowed to impersonate ambari-server-storm in above example we should allow the principal and check if the principal (storm-storm) has access to the requested resource.\ncurrently we check if ambari-server-storm has access to the resources . IMO current behavior doesn't seem to be right especially incase of proxy services. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-05T05:44:58.023+0000","updated":"2016-07-05T05:44:58.023+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15368287","id":"15368287","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"[~sriharsha]\n\nSorry I have been out a lot lately and I am now just catching up.\n\nThere were a few things that went into this one pull request.\n\n1) {{nimbus.impersonation.authorizer}} was set to {{\"backtype.storm.security.auth.authorizer.ImpersonationAuthorizer\"}} by default. This was done so when security is enabled it is one less config that needs to be changed when enabling security to get it to work, and to fail closed (like you mentioned)\n2) {{populate-context!}} was added to make sure that the user we impersonate is always the one from the UI.\n3) In the servlet callback handler we null out the \"user\" to try and avoid these sort of leaks again in the future.\n\nFirst of all to clarify a few things.  Having impersonation locked down should not prevent someone from submitting a topology.  It prevents someone from submitting a topology as someone else (which is the entire point of this JIRA). They can still submit a topology as themselves, without impersonation.  If that does not work then we need to file a separate JIRA and fix that, because I should always be able to submit something as myself no ACL required.\n\nI am confused about what behavior is the opposite of what we want.\n\nFrom what I see if you want ambari and the UI to both work, you would set {{nimbus.impersonation.acl}} to something like\n\n{code}\nnimbus.impersonation.acl:\n     ambari-server-storm: // super user\n                       users: [*]\n                       hosts: [*]\n    ui-storm: //super user\n                       users: [*]\n                       hosts: [\"my.nimbus.host\"]\n{code}\n\nI don't really see why this is hard to automate.  If you have a cleaner way to do it I am all in favor of it, but we cannot default to allowing anyone to impersonate anyone else by default.  It is too easy for someone to shoot themselves in the foot and be completely insecure when they think thy are OK.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-07-08T19:44:06.590+0000","updated":"2016-07-08T19:44:06.590+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15368476","id":"15368476","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2] Thanks for the reply.\nso in your above example for the config .Current implementation does't work like that. \nExample:\nLets I say Kinit with storm user and deployed word count topology.\n\nnow I am making call to storm ui to get topology details\n{code}\nhttp://ui-daemon-host-name:8080/api/v1/topology/wordcount-1-1425844354\\?doAsUser=testUSer1\n{code}\n\nIn this case we need to have the following ACL in place for it to work\n{code}\nnimbus.impersonation.acl:\n     storm: // super user\n                       users: [*]\n                       hosts: [*]\n \n{code}\n\nWe are checking in ImpersonationAuthorizer if the ctx.realPrincipal() is in the nimbus.impersonation.acl list. So lets say if I kinitted as another user \"topology-user1\" . Than this user needs to be added to the list. Basically we need all the topology users to be in the list here. Otherwise the realPrincipal() ( where the topology owner's principal will be) won't be found in the ACLs\n\nWhat I was asking exactly what you showed in the example above. Instead of listing the users in the ACL we should've proxy-user there and it should've list of users, hosts, groups who can impersonate that user.\n\nIt doesn't throw any issues in uploading the topology. Only issues is getting the information about topology using REST Apis. If you pass doAs even if we have the nimbus.impersonation.acl set and it passes through that authorizer it will get authorization exception through simpleACLAuthorizer because actual user(storm) is in ctx.realPrincipal and ctx.principal() contains ambari-server-storm and this user doesn't have permissions on the topology. Either we make this principal a super user than we might be getting into another issue where one user can see other users topology information if they both are in impersonation acl or we should modify the simpleACLAuthorizer to check the realPrincipal and if happens to be a owner of the topology.\n\nI've a patch ready I'll post one in another JIRA. That probably makes it easier to discuss what I am suggesting.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-08T21:10:20.601+0000","updated":"2016-07-08T21:10:20.601+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15368572","id":"15368572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"realPrincipal is the actual user making the thrift call. In the case of a normal UI interaction/REST call this is the UI user.\nprincipal is the user being impersonated by the thrift call.  In the case of a normal UI interaction/REST call this is the user that authenticated with the UI (\"topology-user1\").\n\nFrom the ImpersonationAuthorizer code we see that the key is the super user.\n\nhttps://github.com/apache/storm/blob/master/storm-core/src/jvm/org/apache/storm/security/auth/authorizer/ImpersonationAuthorizer.java#L65-66\nhttps://github.com/apache/storm/blob/master/storm-core/src/jvm/org/apache/storm/security/auth/authorizer/ImpersonationAuthorizer.java#L76\n\nNow the next question is what happens if I try to double impersonate.  If I want to do a REST call to the UI impersonating another user.  {{?doAsUser=testUSer1}}\n\nThe DefaultHttpCredentailsPlugin will set up the impersonation\n\nhttps://github.com/apache/storm/blob/master/storm-core/src/jvm/org/apache/storm/security/auth/DefaultHttpCredentialsPlugin.java#L74-L84\n\ninside core we are checking it with ImpersonationAuthorizer, and then we pull the user out (not the real user but the user being impersonated, and pass it on to be used when the UI tries to impersonate a user)\n\nhttps://github.com/apache/storm/blob/master/storm-core/src/clj/org/apache/storm/ui/core.clj#L87-L112\nhttps://github.com/apache/storm/blob/master/storm-core/src/clj/org/apache/storm/ui/core.clj#L1063-L1065\n\nhttps://github.com/apache/storm/blob/master/storm-clojure/src/clj/org/apache/storm/thrift.clj#L94\n\nTo me it looks like everything is already written how you want it to be.  There could be some bugs in there because I honestly don't use the double impersonation, but it should be working how you want it to.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-07-08T22:05:08.876+0000","updated":"2016-07-08T22:05:08.876+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15369391","id":"15369391","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2]\nI think the issue here is incase of a proxy server calling the UI with doAsUser param. \nAlso we check impersonation twice it seems once in UI and another in nimbus\nhttps://github.com/apache/storm/blob/master/storm-core/src/clj/org/apache/storm/ui/core.clj#L92\nBy adding nimbus.impersonation.authorizer in defaults we are going to generate quite a bit of logs and could be confusing for the users who are not using it in secure mode. This is already addressed in another JIRA.\nI'll remove the double impersonation my side and it should be ok. Few things I would like to address is \n1. remove impersonation check on UI side. Let me know if this is necessary\n2. Currently we've groups, hosts and I would like to add users section to restrict the impersonation to few users.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-10T02:22:23.690+0000","updated":"2016-07-10T02:22:23.690+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15370789","id":"15370789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"[~sriharsha],\n\nIf we want to support doAsUser on the REST API then we have to have REST/UI also validate that it is OK, otherwise I can add that parameter in and pretend to be anyone through the REST API.\n\nIt is a chain of trust.  userB is pretending to be userA to the UI, so the UI in turn pretends to be userA to nimbus.  The thrift connection to nimbus from the UI loses the fact that userB is the real user and as such will never be able to properly validate that userB is allowed to impersonate userA.  If we change how the impersonation code works so that the UI can say to nimbus I am the UI but I am pretending to be userB who is pretending to be userA we could make it work.  But this would be a non-standard change as SASL does not really support that.  We could hack it in, but I prefer the way it is.\n\nWe cannot have impersonation fail open.  I will -1 anything that tries to do that.\n\nhttps://github.com/apache/storm/blob/master/storm-core/src/clj/org/apache/storm/ui/core.clj#L92-L105\nand \nhttps://github.com/apache/storm/blob/master/storm-core/src/clj/org/apache/storm/daemon/nimbus.clj#L1017-L1038\n\n{code}\n(log-warn \" principal \" (.realPrincipal context) \" is trying to impersonate \" (.principal context) \" but \" NIMBUS-IMPERSONATION-AUTHORIZER \" has no authorizer configured. This is a potential security hole. Please see SECURITY.MD to learn how to configure an impersonation authorizer.\")\n{code}\n{code}\n(log-warn \"impersonation attempt but \" NIMBUS-IMPERSONATION-AUTHORIZER \" has no authorizer configured. potential security risk, please see SECURITY.MD to learn how to configure impersonation authorizer.\")\n{code}\n\nSome warning messages appearing in a log somewhere saying you configured security incorrectly and by the way we are printing this out because someone may have just pawned you is not enough. What is more your complaints about it being difficult to configure correctly and wanting to disable it tell me that we cannot have it off because there will be lots and lots of people who will leave it off and think that they are secure when they are not.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-07-11T13:46:51.698+0000","updated":"2016-07-11T13:46:51.698+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15370946","id":"15370946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2] Agree. It looks confusing and would be good add some comments around that.\nSecurity is off by default and turning it on is today takes lot of steps and we are adding another step to it which is not ideal. But printing these messages when most of the users are in non-secure environment does no good to the users. Why would they need to see these messages in non-secure cluster.\nTurning these log messages in secure environment makes sense if the users are not configuring impersonation authorizer.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-11T15:14:36.002+0000","updated":"2016-07-11T15:14:36.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15370999","id":"15370999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"[~harsha_ch],\n\nThen it sounds like we are trying to enforce security when it is turned off, and that is the real underlying problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-07-11T15:36:33.923+0000","updated":"2016-07-11T15:36:33.923+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12903111/comment/15371011","id":"15371011","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2] not sure if we are talking about the same issue :). I was pointing to having nimbus.impersonation.authorizer in defaults.yaml which seems to be confusing to the users given we print logs on every request. I don't think users will expect us to check impersonation in non-secure environments. \nOr atleast lets check on another config that indicates that the cluster is secure and than only print the logs if we want to have this as default.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-11T15:41:42.341+0000","updated":"2016-07-11T15:41:42.341+0000"}],"maxResults":21,"total":21,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1096/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2mpjz:"}}