{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13000119","self":"https://issues.apache.org/jira/rest/api/2/issue/13000119","key":"STORM-2056","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":2400,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335748","id":"12335748","name":"1.1.0","archived":false,"released":true,"releaseDate":"2017-03-29"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12337341","id":"12337341","name":"1.0.3","archived":false,"released":true,"releaseDate":"2017-02-14"}],"aggregatetimespent":2400,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-08-31T22:49:06.603+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Aug 31 22:49:06 UTC 2016","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_534348707_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2016-08-31T22:49:06.468+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2056/watchers","watchCount":2,"isWatching":false},"created":"2016-08-25T18:23:19.653+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":0,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jerrypeng","name":"jerrypeng","key":"jerrypeng","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jerrypeng&avatarId=25476","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jerrypeng&avatarId=25476","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jerrypeng&avatarId=25476","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jerrypeng&avatarId=25476"},"displayName":"Boyang Jerry Peng","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-09-01T15:57:01.022+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"1. Incorrect url for prev,first,last,next buttons when viewing daemon logs via logviewer\n\nExample:\n\nhttp://storm.cluster.com:8000/log?file=nimbus.log&start=0&length=51200\n\nshould be:\n\nhttp://storm.cluster.com:8000/daemonlog?file=nimbus.log&start=0&length=51200\n\nFunction with bug:\nhttps://github.com/apache/storm/blob/master/storm-core/src/clj/org/apache/storm/daemon/logviewer.clj#L374\n\n2. Downloading daemon files causes exception to be thrown because of function download-log-file checks authorization via worker.yaml.  Obviously daemon log root will not have this file.\n\njava.io.FileNotFoundException: /home/y/var/storm/workers-artifacts/supervisor.log/worker.yaml (No such file or directory)\n\tat java.io.FileInputStream.open0(Native Method)\n\tat java.io.FileInputStream.open(FileInputStream.java:195)\n\tat java.io.FileInputStream.<init>(FileInputStream.java:138)\n\tat java.io.FileReader.<init>(FileReader.java:72)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:422)\n\tat clojure.lang.Reflector.invokeConstructor(Reflector.java:180)\n\tat backtype.storm.util$clojure_from_yaml_file.invoke(util.clj:1066)\n\tat backtype.storm.daemon.logviewer$get_log_user_group_whitelist.invoke(logviewer.clj:310)\n\tat backtype.storm.daemon.logviewer$authorized_log_user_QMARK_.invoke(logviewer.clj:326)\n\tat backtype.storm.daemon.logviewer$download_log_file.invoke(logviewer.clj:497)\n\tat backtype.storm.daemon.logviewer$fn__11528.invoke(logviewer.clj:1024)\n\tat org.apache.storm.shade.compojure.core$make_route$fn__6445.invoke(core.clj:93)\n\tat org.apache.storm.shade.compojure.core$if_route$fn__6433.invoke(core.clj:39)\n\tat org.apache.storm.shade.compojure.core$if_method$fn__6426.invoke(core.clj:24)\n\tat org.apache.storm.shade.compojure.core$routing$fn__6451.invoke(core.clj:106)\n\tat clojure.core$some.invoke(core.clj:2515)\n\tat org.apache.storm.shade.compojure.core$routing.doInvoke(core.clj:106)\n\tat clojure.lang.RestFn.applyTo(RestFn.java:139)\n\tat clojure.core$apply.invoke(core.clj:626)\n\tat org.apache.storm.shade.compojure.core$routes$fn__6455.invoke(core.clj:111)\n\n3. search-log-file should not check for authorized users in worker.yaml\n\nhttps://github.com/apache/storm/blob/master/storm-core/src/clj/org/apache/storm/daemon/logviewer.clj#L833","customfield_10010":null,"timetracking":{"remainingEstimate":"0h","timeSpent":"40m","remainingEstimateSeconds":0,"timeSpentSeconds":2400},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":0,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Bugs in logviewer","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jerrypeng","name":"jerrypeng","key":"jerrypeng","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jerrypeng&avatarId=25476","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jerrypeng&avatarId=25476","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jerrypeng&avatarId=25476","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jerrypeng&avatarId=25476"},"displayName":"Boyang Jerry Peng","active":true,"timeZone":"Etc/UTC"},"subtasks":[{"id":"13000434","key":"STORM-2060","self":"https://issues.apache.org/jira/rest/api/2/issue/13000434","fields":{"summary":"Consolidate duplicated code in logviewer","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jerrypeng","name":"jerrypeng","key":"jerrypeng","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jerrypeng&avatarId=25476","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jerrypeng&avatarId=25476","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jerrypeng&avatarId=25476","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jerrypeng&avatarId=25476"},"displayName":"Boyang Jerry Peng","active":true,"timeZone":"Etc/UTC"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":2400,"total":2400,"percent":100},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":2400,"total":2400,"percent":100},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000119/comment/15453625","id":"15453625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Thanks [~jerrypeng], I merged into master, 1.x, 1.0.x branches.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2016-08-31T22:49:06.603+0000","updated":"2016-08-31T22:49:06.603+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2056/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":4,"worklogs":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000119/worklog/27457","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user jerrypeng opened a pull request:\n\n    https://github.com/apache/storm/pull/1659\n\n    [STORM-2056] - Bugs in logviewer\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/jerrypeng/storm STORM-2056\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1659.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1659\n    \n----\ncommit 71fb390a0b31d3b48a238b6777c3a9c7cb481245\nAuthor: Boyang Jerry Peng <jerrypeng@yahoo-inc.com>\nDate:   2016-08-30T20:38:05Z\n\n    [STORM-2056] - Bugs in logviewer\n\n----\n","created":"2016-08-30T20:45:36.487+0000","updated":"2016-08-30T20:45:36.487+0000","started":"2016-08-30T20:45:36.487+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"27457","issueId":"13000119"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000119/worklog/27533","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user abellina commented on the issue:\n\n    https://github.com/apache/storm/pull/1659\n  \n    \uD83D\uDC4D \n","created":"2016-08-31T03:18:40.915+0000","updated":"2016-08-31T03:18:40.915+0000","started":"2016-08-31T03:18:40.914+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"27533","issueId":"13000119"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000119/worklog/27559","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/1659\n  \n    +1 Nice work.\n","created":"2016-08-31T07:12:43.804+0000","updated":"2016-08-31T07:12:43.804+0000","started":"2016-08-31T07:12:43.804+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"27559","issueId":"13000119"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000119/worklog/27657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/1659\n","created":"2016-08-31T22:47:58.960+0000","updated":"2016-08-31T22:47:58.960+0000","started":"2016-08-31T22:47:58.959+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"27657","issueId":"13000119"}]},"customfield_12311820":"0|i32sxj:"}}