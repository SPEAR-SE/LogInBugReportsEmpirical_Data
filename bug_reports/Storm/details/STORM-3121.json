{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13167865","self":"https://issues.apache.org/jira/rest/api/2/issue/13167865","key":"STORM-3121","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":11400,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343340","id":"12343340","name":"1.2.3","archived":false,"released":false}],"aggregatetimespent":11400,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-06-26T08:00:30.974+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jun 26 08:00:30 UTC 2018","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2548150_*|*_3_*:*_1_*:*_160412732_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2018-06-26T08:00:30.938+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-3121/watchers","watchCount":1,"isWatching":false},"created":"2018-06-24T10:44:30.115+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["pull-request-available"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":0,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-07-29T12:53:57.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"The tests are flaky, but only rarely fail. I've only seen them fail on Travis when Travis is under load.\r\n\r\nExample failures:\r\n{code}\r\nclassname: org.apache.storm.metrics-test / testname: test-custom-metric-with-multi-tasks\r\nexpected: (clojure.core/= [1 0 0 0 0 0 2] (clojure.core/subvec (org.apache.storm.metrics-test/lookup-bucket-by-comp-id-&-metric-name! \"2\" \"my-custom-metric\") 0 N__3207__auto__))\r\n  actual: (not (clojure.core/= [1 0 0 0 0 0 2] [1 0 0 0 0 0 0]))\r\n      at: test_runner.clj:105\r\n{code}\r\n{code}\r\nclassname: org.apache.storm.metrics-test / testname: test-builtin-metrics-2\r\nexpected: (clojure.core/= [1 1] (clojure.core/subvec (org.apache.storm.metrics-test/lookup-bucket-by-comp-id-&-metric-name! \"myspout\" \"__emit-count/default\") 0 N__3207__auto__))\r\n  actual: (not (clojure.core/= [1 1] [1 0]))\r\n      at: test_runner.clj:105\r\n{code}\r\n\r\nThe problem is that the tests increment metrics counters in the executor async loops, then expect the counters to end up in exact metrics buckets. The creation of a bucket is triggered by the metrics timer. The timer is included in time simulation and LocalCluster.waitForIdle, but the executor async loop isn't. There isn't any guarantee that the executor async loop gets to run when the test does a sequence like\r\n{code}\r\nTime.advanceClusterTime\r\ncluster.waitForIdle\r\n{code}\r\nbecause the waitForIdle check doesn't know about the executor async loop.","customfield_10010":null,"timetracking":{"remainingEstimate":"0h","timeSpent":"3h 10m","remainingEstimateSeconds":0,"timeSpentSeconds":11400},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":0,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Fix flaky metrics tests in storm-core","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":11400,"total":11400,"percent":100},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":11400,"total":11400,"percent":100},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/comment/16523377","id":"16523377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Thanks [~Srdo], I merged into master.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2018-06-26T08:00:30.974+0000","updated":"2018-06-26T08:00:30.974+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-3121/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":19,"worklogs":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user srdo opened a pull request:\n\n    https://github.com/apache/storm/pull/2735\n\n    STORM-3121: Fix flaky metrics tests in storm-core\n\n    https://issues.apache.org/jira/browse/STORM-3121\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/srdo/storm STORM-3121\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/2735.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #2735\n    \n----\ncommit f1a856b7703387a4a3367c6322359cffbb9a0247\nAuthor: Stig Rohde Døssing <srdo@...>\nDate:   2018-06-24T10:55:11Z\n\n    STORM-3121: Fix flaky metrics tests in storm-core\n\n----\n","created":"2018-06-24T11:27:23.536+0000","updated":"2018-06-24T11:27:23.536+0000","started":"2018-06-24T11:27:23.535+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115157","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2735#discussion_r197651740\n  \n    --- Diff: storm-core/test/clj/org/apache/storm/metrics_test.clj ---\n    @@ -87,12 +91,22 @@\n           (first) ;; pick first task in the list, ignore other tasks' metric data.\n           (second)\n           (or [])))\n    -\n    -(defmacro assert-buckets! [comp-id metric-name expected cluster]\n    -  `(do\n    -     (let [N# (count ~expected)]\n    -       (wait-for-atleast-N-buckets! N# ~comp-id ~metric-name ~cluster)\n    -       (is (= ~expected (subvec (lookup-bucket-by-comp-id-&-metric-name! ~comp-id ~metric-name) 0 N#))))))\n    +       \n    +(defn assert-metric-running-sum! [comp-id metric-name expected min-buckets cluster]\n    +  (try\n    +    (do\n    +      (wait-for-atleast-N-buckets! min-buckets comp-id metric-name cluster)\n    +      (.until \n    --- End diff --\n    \n    So as far as I understand the description of issue, the metric value may not be added to exactly N bucket though we simulate the time, so we need to wait more to check if condition is met, and though we are now having another waiting logic, we still have to call `wait-for-atleast-N-buckets!` because of advancing simulated time, correct?\n","created":"2018-06-24T20:21:00.782+0000","updated":"2018-06-24T20:21:00.782+0000","started":"2018-06-24T20:21:00.782+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115218","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115220","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2735#discussion_r197652249\n  \n    --- Diff: storm-core/test/clj/org/apache/storm/metrics_test.clj ---\n    @@ -87,12 +91,22 @@\n           (first) ;; pick first task in the list, ignore other tasks' metric data.\n           (second)\n           (or [])))\n    -\n    -(defmacro assert-buckets! [comp-id metric-name expected cluster]\n    -  `(do\n    -     (let [N# (count ~expected)]\n    -       (wait-for-atleast-N-buckets! N# ~comp-id ~metric-name ~cluster)\n    -       (is (= ~expected (subvec (lookup-bucket-by-comp-id-&-metric-name! ~comp-id ~metric-name) 0 N#))))))\n    +       \n    +(defn assert-metric-running-sum! [comp-id metric-name expected min-buckets cluster]\n    +  (try\n    +    (do\n    +      (wait-for-atleast-N-buckets! min-buckets comp-id metric-name cluster)\n    +      (.until \n    --- End diff --\n    \n    The part about the metric value not being added to exactly bucket N is right. The reason we call `wait-for-atleast-N-buckets` is to preserve the existing test logic as much as possible. For example, one of the replaced `assert-buckets` were asserting that a metric had buckets `[1 0 0 0 0 0]`. The new assert would just assert that the running sum is 1. By also waiting for 6 buckets, we are able to assert that the running sum is 1 within the first 6 buckets, rather than potentially stopping the check as soon as the first bucket is available.\n","created":"2018-06-24T20:37:34.866+0000","updated":"2018-06-24T20:37:34.866+0000","started":"2018-06-24T20:37:34.865+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115220","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115221","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on the issue:\n\n    https://github.com/apache/storm/pull/2735\n  \n    I saw failures in the metrics tests very often when adding Java 10 to the testing matrix, e.g. https://travis-ci.org/srdo/storm/builds/395663084. Maybe Travis runs the tests on the same machine, and the extra load happens to trigger the failure? I've also been unable to trigger the error locally or on master.\n","created":"2018-06-24T20:37:53.614+0000","updated":"2018-06-24T20:37:53.614+0000","started":"2018-06-24T20:37:53.613+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115221","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115238","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/2735\n  \n    @srdo Yeah... strange that it fails on JDK 8 instead of JDK 10, which happened rarely. We would be better to fix it anyway.\n","created":"2018-06-24T22:04:33.435+0000","updated":"2018-06-24T22:04:33.435+0000","started":"2018-06-24T22:04:33.435+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115238","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115239","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2735#discussion_r197654356\n  \n    --- Diff: storm-core/test/clj/org/apache/storm/metrics_test.clj ---\n    @@ -87,12 +91,22 @@\n           (first) ;; pick first task in the list, ignore other tasks' metric data.\n           (second)\n           (or [])))\n    -\n    -(defmacro assert-buckets! [comp-id metric-name expected cluster]\n    -  `(do\n    -     (let [N# (count ~expected)]\n    -       (wait-for-atleast-N-buckets! N# ~comp-id ~metric-name ~cluster)\n    -       (is (= ~expected (subvec (lookup-bucket-by-comp-id-&-metric-name! ~comp-id ~metric-name) 0 N#))))))\n    +       \n    +(defn assert-metric-running-sum! [comp-id metric-name expected min-buckets cluster]\n    +  (try\n    +    (do\n    +      (wait-for-atleast-N-buckets! min-buckets comp-id metric-name cluster)\n    +      (.until \n    --- End diff --\n    \n    Thanks for the details. Now I can understand what the patch is addressing clearer.\n","created":"2018-06-24T22:05:41.466+0000","updated":"2018-06-24T22:05:41.466+0000","started":"2018-06-24T22:05:41.465+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115239","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115469","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2735#discussion_r197838595\n  \n    --- Diff: storm-core/pom.xml ---\n    @@ -184,6 +184,10 @@\n                 <artifactId>mockito-core</artifactId>\n                 <scope>test</scope>\n             </dependency>\n    +        <dependency>\n    +            <groupId>org.awaitility</groupId>\n    +            <artifactId>awaitility</artifactId>\n    +        </dependency>\n    --- End diff --\n    \n    nit: like in the other pull request, it would be nice to have this marked as test here too, just so it is obvious.\n","created":"2018-06-25T15:26:41.434+0000","updated":"2018-06-25T15:26:41.434+0000","started":"2018-06-25T15:26:41.433+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115469","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2735#discussion_r197856967\n  \n    --- Diff: storm-core/pom.xml ---\n    @@ -184,6 +184,10 @@\n                 <artifactId>mockito-core</artifactId>\n                 <scope>test</scope>\n             </dependency>\n    +        <dependency>\n    +            <groupId>org.awaitility</groupId>\n    +            <artifactId>awaitility</artifactId>\n    +        </dependency>\n    --- End diff --\n    \n    The scope is inherited from dependencyManagement. Do you want me to add it anyway?\n","created":"2018-06-25T16:20:53.362+0000","updated":"2018-06-25T16:20:53.362+0000","started":"2018-06-25T16:20:53.361+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115493","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2735#discussion_r197962370\n  \n    --- Diff: storm-core/pom.xml ---\n    @@ -184,6 +184,10 @@\n                 <artifactId>mockito-core</artifactId>\n                 <scope>test</scope>\n             </dependency>\n    +        <dependency>\n    +            <groupId>org.awaitility</groupId>\n    +            <artifactId>awaitility</artifactId>\n    +        </dependency>\n    --- End diff --\n    \n    I'm not sure we are consistent regarding this, but IMHO explicitly marking it looks better for me, though we know the scope is inherited. I'm OK if we are already not consistent on this.\n","created":"2018-06-25T22:29:18.619+0000","updated":"2018-06-25T22:29:18.619+0000","started":"2018-06-25T22:29:18.619+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115686","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115780","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2735#discussion_r198022430\n  \n    --- Diff: storm-core/pom.xml ---\n    @@ -184,6 +184,10 @@\n                 <artifactId>mockito-core</artifactId>\n                 <scope>test</scope>\n             </dependency>\n    +        <dependency>\n    +            <groupId>org.awaitility</groupId>\n    +            <artifactId>awaitility</artifactId>\n    +        </dependency>\n    --- End diff --\n    \n    Added scope\n","created":"2018-06-26T06:06:37.040+0000","updated":"2018-06-26T06:06:37.040+0000","started":"2018-06-26T06:06:37.039+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115780","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/115834","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/2735\n","created":"2018-06-26T07:53:15.197+0000","updated":"2018-06-26T07:53:15.197+0000","started":"2018-06-26T07:53:15.197+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"115834","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/128519","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user HeartSaVioR opened a pull request:\n\n    https://github.com/apache/storm/pull/2778\n\n    (1.x) STORM-3121: Fix flaky metrics tests in storm-core\n\n    This ports back #2735 to 1.x-branch since I can see flaky metrics tests from 1.x-branch.\r\n    \r\n    https://travis-ci.org/apache/storm/jobs/408847970#L1079-L1082\r\n    \r\n    I also fixed merge conflict so would like to review rather than pushing the change without notice.\r\n    \r\n    @srdo Could you take a look? Thanks in advance!\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/HeartSaVioR/storm STORM-3121-1.x\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/2778.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #2778\n    \n----\ncommit 50ea2149776adecdb270e81c60ab5192fbd50e79\nAuthor: Stig Rohde Døssing <srdo@...>\nDate:   2018-06-24T10:55:11Z\n\n    STORM-3121: Fix flaky metrics tests in storm-core\n\n----\n","created":"2018-07-29T08:04:56.549+0000","updated":"2018-07-29T08:04:56.549+0000","started":"2018-07-29T08:04:56.548+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"128519","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/128520","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2778#discussion_r205964723\n  \n    --- Diff: storm-core/test/clj/org/apache/storm/metrics_test.clj ---\n    @@ -15,16 +15,14 @@\n     ;; limitations under the License.\n     (ns org.apache.storm.metrics-test\n       (:use [clojure test])\n    -  (:import [org.apache.storm.topology TopologyBuilder])\n    -  (:import [org.apache.storm.generated InvalidTopologyException SubmitOptions TopologyInitialStatus])\n    -  (:import [org.apache.storm.testing TestWordCounter TestWordSpout TestGlobalCount\n    -            TestAggregatesCounter TestConfBolt AckFailMapTracker PythonShellMetricsBolt PythonShellMetricsSpout])\n    -  (:import [org.apache.storm.task ShellBolt])\n    -  (:import [org.apache.storm.spout ShellSpout])\n    -  (:import [org.apache.storm.metric.api CountMetric IMetricsConsumer$DataPoint IMetricsConsumer$TaskInfo])\n    -  (:import [org.apache.storm.metric.api.rpc CountShellMetric])\n    -  (:import [org.apache.storm.utils Utils])\n    -  \n    +  (:import [org.apache.storm.testing AckFailMapTracker PythonShellMetricsBolt PythonShellMetricsSpout])\n    --- End diff --\n    \n    Most of changes from import are removing unused import.\n","created":"2018-07-29T08:05:41.757+0000","updated":"2018-07-29T08:05:41.757+0000","started":"2018-07-29T08:05:41.757+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"128520","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/128527","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/2778\n  \n    https://travis-ci.org/HeartSaVioR/storm/jobs/409469987 (passed)\r\n    https://travis-ci.org/HeartSaVioR/storm/jobs/409469988 (passed)\r\n    https://travis-ci.org/apache/storm/jobs/409470450 (integration.org.apache.storm.integration-test failed)\r\n    https://travis-ci.org/apache/storm/jobs/409470451 (integration.org.apache.storm.integration-test failed)\n","created":"2018-07-29T08:31:20.145+0000","updated":"2018-07-29T08:31:20.145+0000","started":"2018-07-29T08:31:20.145+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"128527","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/128528","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2778#discussion_r205965554\n  \n    --- Diff: storm-core/test/resources/log4j2-test.xml ---\n    @@ -25,7 +25,8 @@\n         <Loggers>\n             <!-- suppress ERROR org.apache.storm.blobstore.BlobStoreUtils - Could not update the blob with key: key when testing -->\n             <Logger name=\"org.apache.storm.blobstore\" level=\"FATAL\" />\n    -        <Logger name=\"org.apache.zookeeper\" level=\"WARN\"/>\n    +        <Logger name=\"org.apache.storm.shade.org.apache.zookeeper\" level=\"WARN\"/>\n    --- End diff --\n    \n    Could you verify that this change makes sense on 1.x? I think it is here because master has the shaded-deps module, but in 1.x the shading happens as part of building storm-core, so I'm not sure the test classpath is affected by the relocation.\n","created":"2018-07-29T08:35:34.022+0000","updated":"2018-07-29T08:35:34.022+0000","started":"2018-07-29T08:35:34.021+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"128528","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/128529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2778#discussion_r205965687\n  \n    --- Diff: storm-core/test/resources/log4j2-test.xml ---\n    @@ -25,7 +25,8 @@\n         <Loggers>\n             <!-- suppress ERROR org.apache.storm.blobstore.BlobStoreUtils - Could not update the blob with key: key when testing -->\n             <Logger name=\"org.apache.storm.blobstore\" level=\"FATAL\" />\n    -        <Logger name=\"org.apache.zookeeper\" level=\"WARN\"/>\n    +        <Logger name=\"org.apache.storm.shade.org.apache.zookeeper\" level=\"WARN\"/>\n    --- End diff --\n    \n    @srdo I think we need to use origin package name. I missed here. Fixed.\n","created":"2018-07-29T08:41:07.217+0000","updated":"2018-07-29T08:41:07.217+0000","started":"2018-07-29T08:41:07.216+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"128529","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/128530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on the issue:\n\n    https://github.com/apache/storm/pull/2778\n  \n    +1, thanks for backporting.\n","created":"2018-07-29T08:42:33.870+0000","updated":"2018-07-29T08:42:33.870+0000","started":"2018-07-29T08:42:33.870+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"128530","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/128543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/2778\n  \n    @srdo Thanks for the review. Since this is a patch for backport I'll skip waiting 24hrs for this.\n","created":"2018-07-29T12:38:02.482+0000","updated":"2018-07-29T12:38:02.482+0000","started":"2018-07-29T12:38:02.482+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"128543","issueId":"13167865"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13167865/worklog/128545","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/2778\n","created":"2018-07-29T12:53:32.393+0000","updated":"2018-07-29T12:53:32.393+0000","started":"2018-07-29T12:53:32.393+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"128545","issueId":"13167865"}]},"customfield_12311820":"0|i3v66f:"}}