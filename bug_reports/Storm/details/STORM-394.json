{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12725956","self":"https://issues.apache.org/jira/rest/api/2/issue/12725956","key":"STORM-394","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327112","id":"12327112","name":"0.9.3","archived":false,"released":true,"releaseDate":"2014-11-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-06-20T03:36:41.815+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jun 20 03:36:41 UTC 2016","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_61589138326_*|*_6_*:*_1_*:*_0","customfield_12310420":"404114","customfield_12312321":null,"resolutiondate":"2016-06-20T03:38:01.426+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-394/watchers","watchCount":2,"isWatching":false},"created":"2014-07-08T07:32:23.460+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326788","id":"12326788","name":"0.9.1-incubating","archived":false,"released":true,"releaseDate":"2014-02-10"}],"customfield_12312339":null,"issuelinks":[{"id":"12470827","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12470827","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12771585","key":"STORM-643","self":"https://issues.apache.org/jira/rest/api/2/issue/12771585","fields":{"summary":"KafkaUtils repeatedly fetches messages whose offset is out of range","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12425512","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12425512","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12786418","key":"STORM-732","self":"https://issues.apache.org/jira/rest/api/2/issue/12786418","fields":{"summary":"PartitionManager should remove those messages not exists in kafka from waiting queue","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vesense","name":"vesense","key":"vesense","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vesense&avatarId=25513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vesense&avatarId=25513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vesense&avatarId=25513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vesense&avatarId=25513"},"displayName":"Xin Wang","active":true,"timeZone":"Asia/Shanghai"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-06-20T03:38:01.575+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12324393","id":"12324393","name":"storm-kafka","description":"Storm Kafka Integration"}],"timeoriginalestimate":null,"description":"Issue created here (https://github.com/wurstmeister/storm-kafka-0.8-plus/issues/55) but closed since the module is maintened under the Storm umbrella now.\n\nI think there might be a case that is not covered :\n0) messages in Kafka has expired\n1) so offset stored in Zookeeper are no longer valid\n2) error OFFSET_OUT_OF_RANGE is thrown\n3) getOffset with startOffsetTime\n4) retry the fetch with the returned startOffset\n5) get an ByteBufferMessageSet but empty\n\nKafkaUtils.fetchMessages seeems to be called again and again with the old offset and we get to step 2 again.\nI guess the new startOffset is not commited to Zookeeper since we do not have new messages.\n\nThis can happen in the case of a topology restart, so it goes through the TridentKafkaEmitter.reEmitPartitionBatch","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"404154","customfield_12312823":null,"summary":"Messages has expired, OFFSET_OUT_OF_RANGE, new offset startOffsetTime, no new messages, again and again","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vpernin","name":"vpernin","key":"vpernin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vladislav Pernin","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vpernin","name":"vpernin","key":"vpernin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vladislav Pernin","active":true,"timeZone":"Etc/UTC"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725956/comment/15338943","id":"15338943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vesense","name":"vesense","key":"vesense","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vesense&avatarId=25513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vesense&avatarId=25513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vesense&avatarId=25513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vesense&avatarId=25513"},"displayName":"Xin Wang","active":true,"timeZone":"Asia/Shanghai"},"body":"This bug should has fixed by STORM-643, so close this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vesense","name":"vesense","key":"vesense","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vesense&avatarId=25513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vesense&avatarId=25513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vesense&avatarId=25513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vesense&avatarId=25513"},"displayName":"Xin Wang","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-06-20T03:36:41.815+0000","updated":"2016-06-20T03:36:41.815+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-394/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1xjt3:"}}