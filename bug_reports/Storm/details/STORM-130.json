{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12684756","self":"https://issues.apache.org/jira/rest/api/2/issue/12684756","key":"STORM-130","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327123","id":"12327123","description":"security feature branch","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-11-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12332476","id":"12332476","name":"0.9.5","archived":false,"released":true,"releaseDate":"2015-06-04"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-01-29T01:55:58.230+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 16 05:13:49 UTC 2015","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_37626149924_*|*_5_*:*_1_*:*_0","customfield_12310420":"363828","customfield_12312321":null,"resolutiondate":"2015-02-23T16:50:42.107+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-130/watchers","watchCount":18,"isWatching":false},"created":"2013-12-15T05:08:12.263+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"10.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326452","id":"12326452","name":"0.9.2-incubating","archived":false,"released":true,"releaseDate":"2014-06-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12327112","id":"12327112","name":"0.9.3","archived":false,"released":true,"releaseDate":"2014-11-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12329548","id":"12329548","name":"0.9.4","archived":false,"released":true,"releaseDate":"2015-03-25"}],"customfield_12312339":null,"issuelinks":[{"id":"12407566","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12407566","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12773340","key":"STORM-661","self":"https://issues.apache.org/jira/rest/api/2/issue/12773340","fields":{"summary":"java.io.FileNotFoundException: File 'stormconf.ser' does not exist","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12412380","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12412380","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12787080","key":"STORM-739","self":"https://issues.apache.org/jira/rest/api/2/issue/12787080","fields":{"summary":"If a worker dies supervisor clears local topology jar and re-downloads from nimbus","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-12-16T05:13:49.900+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"https://github.com/nathanmarz/storm/issues/438\n\nHi developers,\n\nWe met critical issue with deploying storm topology to our prod cluster.\n\nAfter deploying topology we got trace on workers (Storm 0.8.2/zookeeper-3.3.6) :\n\n2013-01-14 10:57:39 ZooKeeper [INFO] Initiating client connection, connectString=zookeeper1.company.com:2181,zookeeper2.company.com:2181,zookeeper3.company.com:2181 sessionTimeout=20000 watcher=com.netflix.curator.ConnectionState@254ba9a2\n2013-01-14 10:57:39 ClientCnxn [INFO] Opening socket connection to server zookeeper1.company.com/10.72.209.112:2181\n2013-01-14 10:57:39 ClientCnxn [INFO] Socket connection established to zookeeper1.company.com/10.72.209.112:2181, initiating session\n2013-01-14 10:57:39 ClientCnxn [INFO] Session establishment complete on server zookeeper1.company.com/10.72.209.112:2181, sessionid = 0x13b3e4b5c780239, negotiated timeout = 20000\n2013-01-14 10:57:39 zookeeper [INFO] Zookeeper state update: :connected:none\n2013-01-14 10:57:39 ZooKeeper [INFO] Session: 0x13b3e4b5c780239 closed\n2013-01-14 10:57:39 ClientCnxn [INFO] EventThread shut down\n2013-01-14 10:57:39 CuratorFrameworkImpl [INFO] Starting\n2013-01-14 10:57:39 ZooKeeper [INFO] Initiating client connection, connectString=zookeeper1.company.com:2181,zookeeper2.company.com:2181,zookeeper3.company.com:2181/storm sessionTimeout=20000 watcher=com.netflix.curator.ConnectionState@33a998c7\n2013-01-14 10:57:39 ClientCnxn [INFO] Opening socket connection to server zookeeper1.company.com/10.72.209.112:2181\n2013-01-14 10:57:39 ClientCnxn [INFO] Socket connection established to zookeeper1.company.com/10.72.209.112:2181, initiating session\n2013-01-14 10:57:39 ClientCnxn [INFO] Session establishment complete on server zookeeper1.company.com/10.72.209.112:2181, sessionid = 0x13b3e4b5c78023a, negotiated timeout = 20000\n2013-01-14 10:57:39 worker [ERROR] Error on initialization of server mk-worker\njava.io.FileNotFoundException: File '/tmp/storm/supervisor/stormdist/normalization-prod-1-1358161053/stormconf.ser' does not exist\nat org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:137)\nat org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1135)\nat backtype.storm.config$read_supervisor_storm_conf.invoke(config.clj:138)\nat backtype.storm.daemon.worker$worker_data.invoke(worker.clj:146)\nat backtype.storm.daemon.worker$fn__4348$exec_fn__1228__auto____4349.invoke(worker.clj:332)\nat clojure.lang.AFn.applyToHelper(AFn.java:185)\nat clojure.lang.AFn.applyTo(AFn.java:151)\nat clojure.core$apply.invoke(core.clj:601)\nat backtype.storm.daemon.worker$fn__4348$mk_worker__4404.doInvoke(worker.clj:323)\nat clojure.lang.RestFn.invoke(RestFn.java:512)\nat backtype.storm.daemon.worker$_main.invoke(worker.clj:433)\nat clojure.lang.AFn.applyToHelper(AFn.java:172)\nat clojure.lang.AFn.applyTo(AFn.java:151)\nat backtype.storm.daemon.worker.main(Unknown Source)\n2013-01-14 10:57:39 util [INFO] Halting process: (\"Error on initialization\")\n\nSupervisor trace:\n\n2013-01-14 10:59:01 supervisor [INFO] d6735377-f0d6-4247-9f35-c8620e2b0e26 still hasn't started\n2013-01-14 10:59:02 supervisor [INFO] d6735377-f0d6-4247-9f35-c8620e2b0e26 still hasn't starte\n.......\n2013-01-14 10:59:34 supervisor [INFO] d6735377-f0d6-4247-9f35-c8620e2b0e26 still hasn't started\n2013-01-14 10:59:35 supervisor [INFO] Worker d6735377-f0d6-4247-9f35-c8620e2b0e26 failed to start\n2013-01-14 10:59:35 supervisor [INFO] Worker 234264c6-d9d6-4e8a-ab0a-8926bdd6b536 failed to start\n2013-01-14 10:59:35 supervisor [INFO] Shutting down and clearing state for id 234264c6-d9d6-4e8a-ab0a-8926bdd6b536. Current supervisor time: 1358161175. State: :disallowed, Heartbeat: nil\n2013-01-14 10:59:35 supervisor [INFO] Shutting down d5c3235f-5880-4be8-a759-5654b3df6a27:234264c6-d9d6-4e8a-ab0a-8926bdd6b536\n2013-01-14 10:59:35 util [INFO] Error when trying to kill 4819. Process is probably already dead.\n2013-01-14 10:59:35 supervisor [INFO] Shut down d5c3235f-5880-4be8-a759-5654b3df6a27:234264c6-d9d6-4e8a-ab0a-8926bdd6b536\n2013-01-14 10:59:35 supervisor [INFO] Shutting down and clearing state for id d6735377-f0d6-4247-9f35-c8620e2b0e26. Current supervisor time: 1358161175. State: :disallowed, Heartbeat: nil\n2013-01-14 10:59:35 supervisor [INFO] Shutting down d5c3235f-5880-4be8-a759-5654b3df6a27:d6735377-f0d6-4247-9f35-c8620e2b0e26\n2013-01-14 10:59:35 util [INFO] Error when trying to kill 4809. Process is probably already dead.\n2013-01-14 10:59:35 supervisor [INFO] Shut down d5c3235f-5880-4be8-a759-5654b3df6a27:d6735377-f0d6-4247-9f35-c8620e2b0e26\n\nThanks!\nOleg M.\n\n----------\nxiaokang: We also encountered this problem and the DEBUG log showed that storm-code-map is null and new-assignment is not null. I may be that new-assignment is got from zk after storm-code-map. So we changed the storm-code-map after all-assignment and the problem disapeared.\n\n(defn mk-synchronize-supervisor [supervisor sync-processes event-manager processes-event-manager]\n  (fn this []\n(let [conf (:conf supervisor)\n      storm-cluster-state (:storm-cluster-state supervisor)\n      ^ISupervisor isupervisor (:isupervisor supervisor)\n      ^LocalState local-state (:local-state supervisor)\n      sync-callback (fn [& ignored] (.add event-manager this))\n      storm-code-map (read-storm-code-locations storm-cluster-state sync-callback)\n      downloaded-storm-ids (set (read-downloaded-storm-ids conf))\n      all-assignment (read-assignments\n                       storm-cluster-state\n                       (:supervisor-id supervisor)\n                       sync-callback)\n      new-assignment (->> all-assignment\n                          (filter-key #(.confirmAssigned isupervisor %)))\n      assigned-storm-ids (assigned-storm-ids-from-port-assignments new-assignment)\n      existing-assignment (.get local-state LS-LOCAL-ASSIGNMENTS)]\n  (log-debug \"Synchronizing supervisor\")\n  (log-debug \"Storm code map: \" storm-code-map)\n  (log-debug \"Downloaded storm ids: \" downloaded-storm-ids)\n  (log-debug \"All assignment: \" all-assignment)\n  (log-debug \"New assignment: \" new-assignment)\n\n----------\nNJtwentyone: I ran into having a similar problem once. Haven't had it lately. I was going to investigate more and before I created a posted but... There are two schedule-recurring functions of intertest in the function (mk-supervisor).\n\n(schedule-recurring (:timer supervisor) 0 10 (fn ))\n(schedule-recurring (:timer supervisor)\n0\n(conf SUPERVISOR-MONITOR-FREQUENCY-SECS)\n(fn )))\n\nSo function-1 (synchronize-supervisor) will eventually remove that dir [../stormconf.ser]\nAnd function-2 (sync-processes) will eventually hang wanting to create workers saying repeatedly\n2013-01-13 22:13:13 b.s.d.supervisor [INFO] 6f73facd-8722-4b83-959c-a7b396c61224 still hasn't started\n\nI'm using the distributed setup of (Storm 0.8.2/zookeeper-3.4.5) on my mac and a hp using storm.starter.WordCountTopology\n\n----------\nmiggi: Well this problem was resolved only after reinstalling new instance of ZK (3.3.6), we had other issues with deploy topology on 0.8.1 version, so it was decided use new instance ZK. \nBtw: removing storm data folders didn't help\n\n----------\nnathanmarz: For those of you hitting the problem, it would be really useful if you could turn on DEBUG logging on the supervisor and show those logs when the problem is hit.\n\n----------\nmiggi: After few months stable work - we ran into the same issue again.\n\nLogs (\"topology.debug: true\") \nSupervisor logs: http://cl.ly/0p2W3N0A2V3S\nWorker logs: http://cl.ly/2w1j1r0a3X46\n\nCleaning/restarting ZK/Nimbus/Worker components didn't help. \nNow we down: haven't tried solution proposed by xiaokang but probably it would be our next steps.\n\nAny fresh ideas ?\n\n----------\ndevoncrouse: +1 - ran into this twice now. We've \"reset\" things by clearing out Storm stuff in Zk, wiping out Storm data directory, and restarting the topology, but it happens again in time.\n\nStorm 0.9.0-wip16\nZk 3.3.6\n\n----------\nd2r: +1 seen this happen many times. same work-around\nMost recently Storm 0.8.2-wip22\n\nI'll try to collect a look and debug logs from the supervisor and have a look.\n\n----------\nmiggi: Hey guys, \ntry restart your cluster and ensure that all previous workers (java processes) was killed after this operation. \nAlso we've updated cluster to storm 0.8.3-wip1 with possible fix.\n\nHope it helps \n----––––\nOleg M.\n\n----------\ndevoncrouse: Simple restart doesn't cut it; have to totally clear out all Storm state in Zk and data directory (cluster otherwise quickly becomes unbalanced with same errors in the logs) - and again, we're on 0.9.0-wip16.\n\n----------\nxiaokang: We encountered the same problem in production cluster. The log showed that a worker died and supervisor and nimbus found that at the same time. Than nimbus assign the worker to other host and the supervisor's sync-supervisor delete topo's code while sync-process try to restart the died timeouted worker.\n\nOur solution is change supervisor's woker timeout from 30 to 5 seconds and nimbus remain 30. It works.\n\n----------\nd2r: We have tried the same work-around from @xiaokang, but we still see the issue.\n\n----------\nnathanmarz: @d2r This is fixed in the 0.8.3 wip, please try that out and let me know if it fixes the issue for you.\n\n----------\nd2r: @nathanmarz Yes, pulling in the fix to supervisor.clj from 0.8.3 did resolve the issue for us. Thanks!\n\n----------\ndevoncrouse: Is this fix going to be applied to the newer builds (e.g. 0.9.0) as well?\n\nd5207b5\n\n---------\nviceyang: We encountered the same problem, our version is 0.8.3, i read supervisor code, it seems not a bug, the key reason is \"synchronize-supervisor\" which responsible for download file and remove file thread and \"sync-processes\" which responsible for start worker process thread is Asynchronous. \nsee this case: in synchronize-supervisor read assigment information from zk, supervisor download necessary file from nimbus and write local state . in aother thread sync-processes funciton read local state to launch workor process, when the worker process has not start ,synchronize-supervisor function is called again topology's assignment information has changed (cased by rebalance,or worker time out etc.) worker assignment to this supervisor has move to another supervisor, synchronize-supervisor remove the unnecessary file (jar file and ser file etc.) , after this, worker launched by \" sync-processes\" ,ser file was not exsit , this issue occur. \nThough in this issue exception occured but logic sees right. this excetion can't compelety Eliminate unless change thread Asynchronous feather. \nthere is some way reduction the exception occur, @xiaokang metioned \"change supervisor's woker timeout from 30 to 5 seconds and nimbus remain 30\" this method redeuce nimbus reassign topology. another way change \"synchronize-supervisor\" thread loop time to a longger than 10(default time) sec, such as 30 sec。","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724953","id":"12724953","filename":"nimbus.log.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.231+0000","size":85723,"mimeType":"application/gzip","content":"https://issues.apache.org/jira/secure/attachment/12724953/nimbus.log.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724954","id":"12724954","filename":"README.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.242+0000","size":1001,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12724954/README.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724955","id":"12724955","filename":"supervisor_logs.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.252+0000","size":7390990,"mimeType":"application/gzip","content":"https://issues.apache.org/jira/secure/attachment/12724955/supervisor_logs.tar.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12753595","id":"12753595","filename":"supervisor.log.2015-08-26","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-01T21:33:19.018+0000","size":126031,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12753595/supervisor.log.2015-08-26"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724957","id":"12724957","filename":"worker_logs_of_kafka_traffic.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.295+0000","size":2783799,"mimeType":"application/gzip","content":"https://issues.apache.org/jira/secure/attachment/12724957/worker_logs_of_kafka_traffic.tar.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724958","id":"12724958","filename":"worker_logs_of_zookeeper_traffic_2015-04-11.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.312+0000","size":6676002,"mimeType":"application/gzip","content":"https://issues.apache.org/jira/secure/attachment/12724958/worker_logs_of_zookeeper_traffic_2015-04-11.tar.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724959","id":"12724959","filename":"worker_logs_of_zookeeper_traffic_2015-04-12.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.340+0000","size":6666795,"mimeType":"application/gzip","content":"https://issues.apache.org/jira/secure/attachment/12724959/worker_logs_of_zookeeper_traffic_2015-04-12.tar.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724960","id":"12724960","filename":"worker_logs_of_zookeeper_traffic_2015-04-13.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.365+0000","size":3892732,"mimeType":"application/gzip","content":"https://issues.apache.org/jira/secure/attachment/12724960/worker_logs_of_zookeeper_traffic_2015-04-13.tar.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724956","id":"12724956","filename":"worker_logs.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.282+0000","size":2723692,"mimeType":"application/gzip","content":"https://issues.apache.org/jira/secure/attachment/12724956/worker_logs.tar.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724961","id":"12724961","filename":"workers_with_stormconf.ser.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.386+0000","size":4952,"mimeType":"application/gzip","content":"https://issues.apache.org/jira/secure/attachment/12724961/workers_with_stormconf.ser.gz"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"364134","customfield_12312823":null,"summary":"[Storm 0.8.2]: java.io.FileNotFoundException: File '../stormconf.ser' does not exist","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xumingming","name":"xumingming","key":"xumingming","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=xumingming&avatarId=18354","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xumingming&avatarId=18354","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xumingming&avatarId=18354","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xumingming&avatarId=18354"},"displayName":"James Xu","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xumingming","name":"xumingming","key":"xumingming","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=xumingming&avatarId=18354","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xumingming&avatarId=18354","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xumingming&avatarId=18354","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xumingming&avatarId=18354"},"displayName":"James Xu","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14296241","id":"14296241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"This can be reproducible with following steps\n1) Run a storm cluster  with atleast 2 supervisors with 4 slots each\n2) Deploy a topology that uses 4 workers, topology will be distributed with each supervisor having two workers each\n3) kill one of the supervisor lets say supervisor1 \n4) wait till topology re-balances to occupy 4 workers on supervisor2\n5) now bring up supervisor1, It goes through the cycle of cleaning up old topology code\n6) nimbus re-balances topology which triggers supervisor.sync-process method\n7) sync-process tries to launch a worker for the topology whose code data is delete when the supervisor started causing it throw up following exception\n\n2015-01-28T17:15:01.512-0800 b.s.d.supervisor [INFO] Removing code for storm id WordCount-1-1422493587\n2015-01-28T17:15:01.521-0800 b.s.d.supervisor [INFO] Shutting down and clearing state for id 6ef95e67-10ab-4dca-8d8f-a43a172012d2. \nCurrent supervisor time: 1422494101. State: :timed-out, Heartbeat: #backtype.storm.daemon.common.WorkerHeartbeat{:time-secs 1422493\n975, :storm-id \"WordCount-1-1422493587\", :executors #{[2 2] [22 22] [18 18] [6 6] [-1 -1] [26 26] [10 10] [14 14]}, :port 6706}\n2015-01-28T17:15:01.521-0800 b.s.d.supervisor [INFO] Shutting down 289c048e-1848-42aa-92a2-7e1d69dbe6fe:6ef95e67-10ab-4dca-8d8f-a43\na172012d2\n2015-01-28T17:15:01.522-0800 b.s.config [INFO] GET worker-user 6ef95e67-10ab-4dca-8d8f-a43a172012d2\n2015-01-28T17:15:01.551-0800 b.s.util [INFO] Error when trying to kill 76150. Process is probably already dead.\n2015-01-28T17:15:01.559-0800 b.s.util [INFO] Error when trying to kill 76171. Process is probably already dead.\n2015-01-28T17:15:01.567-0800 b.s.util [INFO] Error when trying to kill 76172. Process is probably already dead.\n2015-01-28T17:15:02.579-0800 b.s.util [INFO] Error when trying to kill 76150. Process is probably already dead.\n2015-01-28T17:15:02.588-0800 b.s.util [INFO] Error when trying to kill 76171. Process is probably already dead.\n2015-01-28T17:15:02.595-0800 b.s.util [INFO] Error when trying to kill 76172. Process is probably already dead.\n2015-01-28T17:15:02.612-0800 b.s.config [INFO] REMOVE worker-user 6ef95e67-10ab-4dca-8d8f-a43a172012d2\n2015-01-28T17:15:02.613-0800 b.s.d.supervisor [INFO] Shut down 289c048e-1848-42aa-92a2-7e1d69dbe6fe:6ef95e67-10ab-4dca-8d8f-a43a172\n012d2\n2015-01-28T17:15:02.615-0800 b.s.d.supervisor [INFO] Shutting down and clearing state for id e27c5dad-2d2e-46f3-9597-4236f6eaa682. \nCurrent supervisor time: 1422494101. State: :timed-out, Heartbeat: #backtype.storm.daemon.common.WorkerHeartbeat{:time-secs 1422493\n976, :storm-id \"WordCount-1-1422493587\", :executors #{[8 8] [12 12] [24 24] [28 28] [20 20] [-1 -1] [16 16] [4 4]}, :port 6707}\n2015-01-28T17:15:02.615-0800 b.s.d.supervisor [INFO] Shutting down 289c048e-1848-42aa-92a2-7e1d69dbe6fe:e27c5dad-2d2e-46f3-9597-423\n6f6eaa682\n2015-01-28T17:15:02.615-0800 b.s.config [INFO] GET worker-user e27c5dad-2d2e-46f3-9597-4236f6eaa682\n2015-01-28T17:15:02.624-0800 b.s.util [INFO] Error when trying to kill 76151. Process is probably already dead.\n2015-01-28T17:15:02.644-0800 b.s.util [INFO] Error when trying to kill 76166. Process is probably already dead.\n2015-01-28T17:15:02.656-0800 b.s.util [INFO] Error when trying to kill 76168. Process is probably already dead.\n2015-01-28T17:15:03.665-0800 b.s.util [INFO] Error when trying to kill 76151. Process is probably already dead.\n2015-01-28T17:15:03.675-0800 b.s.util [INFO] Error when trying to kill 76166. Process is probably already dead.\n2015-01-28T17:15:03.685-0800 b.s.util [INFO] Error when trying to kill 76168. Process is probably already dead.\n2015-01-28T17:15:03.733-0800 b.s.config [INFO] REMOVE worker-user e27c5dad-2d2e-46f3-9597-4236f6eaa682\n2015-01-28T17:15:03.734-0800 b.s.d.supervisor [INFO] Shut down 289c048e-1848-42aa-92a2-7e1d69dbe6fe:e27c5dad-2d2e-46f3-9597-4236f6e\naa682\n2015-01-28T17:15:03.799-0800 b.s.d.supervisor [INFO] Launching worker with assignment #backtype.storm.daemon.supervisor.LocalAssign\nment{:storm-id \"WordCount-1-1422493587\", :executors ([2 2] [22 22] [18 18] [6 6] [26 26] [10 10] [14 14])} for this supervisor 289c\n048e-1848-42aa-92a2-7e1d69dbe6fe on port 6706 with id 82392b07-e3e7-4ec9-915b-5c1e79da5aae\n2015-01-28T17:15:03.933-0800 b.s.event [ERROR] Error when processing event\njava.io.FileNotFoundException: File 'storm-local/supervisor/stormdist/WordCount-1-1422493587/stormconf.ser' does not exist\n        at org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:299) ~[commons-io-2.4.jar:2.4]\n        at org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1763) ~[commons-io-2.4.jar:2.4]\n        at backtype.storm.config$read_supervisor_storm_conf.invoke(config.clj:214) ~[storm-core-0.10.0-SNAPSHOT.jar:0.10.0-SNAPSHOT]\n        at backtype.storm.daemon.supervisor$fn__5499.invoke(supervisor.clj:627) ~[storm-core-0.10.0-SNAPSHOT.jar:0.10.0-SNAPSHOT]\n        at clojure.lang.MultiFn.invoke(MultiFn.java:241) ~[clojure-1.6.0.jar:na]\n        at backtype.storm.daemon.supervisor$sync_processes$iter__5355__5359$fn__5360.invoke(supervisor.clj:366) ~[storm-core-0.10.0-SNAPSHOT.jar:0.10.0-SNAPSHOT]\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-29T01:55:58.230+0000","updated":"2015-01-29T01:55:58.230+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14296264","id":"14296264","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user harshach opened a pull request:\n\n    https://github.com/apache/storm/pull/400\n\n    STORM-130. Supervisor getting killed due to java.io.FileNotFoundException: File '../stormconf.ser' does not exist.\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/harshach/incubator-storm STORM-130\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/400.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #400\n    \n----\ncommit a16a95c5e8d889685389607f3a67514b73688e14\nAuthor: Sriharsha Chintalapani <mail@harsha.io>\nDate:   2015-01-29T02:07:42Z\n\n    STORM-130. Supervisor getting killed due to java.io.FileNotFoundException: File '../stormconf.ser' does not exist.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T02:08:59.745+0000","updated":"2015-01-29T02:08:59.745+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14296267","id":"14296267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/400#issuecomment-71956562\n  \n    @revans2 @ptgoetz @d2r @Parth-Brahmbhatt  please take a look at this patch. Thanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T02:09:34.052+0000","updated":"2015-01-29T02:09:34.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14296384","id":"14296384","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on the pull request:\n\n    https://github.com/apache/storm/pull/400#issuecomment-71970386\n  \n    @harshach One nit: white space changes make the diff harder to read. (Though appending '?w=1' to the URL will force github to ignore white space.)\n    \n    Otherwise, given a cursory review of the changes, I'm +1 initially. I'd like to verify the patch myself and/or give others a chance to do so as well.\n    \n    Regardless, nice work on tracking down the probable root cause and formulating a fix. This has been an oft reported issue that's difficult to reproduce.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T05:13:49.561+0000","updated":"2015-01-29T05:13:49.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297225","id":"14297225","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/400#issuecomment-72070868\n  \n    Closing this pr will re-open a new one. Thanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T17:50:41.841+0000","updated":"2015-01-29T17:50:41.841+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297226","id":"14297226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach closed the pull request at:\n\n    https://github.com/apache/storm/pull/400\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T17:50:43.414+0000","updated":"2015-01-29T17:50:43.414+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297237","id":"14297237","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user Parth-Brahmbhatt commented on the pull request:\n\n    https://github.com/apache/storm/pull/400#issuecomment-72071447\n  \n    +1, lgtm.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T17:54:40.805+0000","updated":"2015-01-29T17:54:40.805+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297286","id":"14297286","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user harshach opened a pull request:\n\n    https://github.com/apache/storm/pull/401\n\n    STORM-130: Supervisor getting killed due to java.io.FileNotFoundException: File '../stormconf.ser' does not exist.\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/harshach/incubator-storm STORM-130-V2\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/401.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #401\n    \n----\ncommit 6b061aaab5a39e4b95670e3f0590bb48de4375fd\nAuthor: Sriharsha Chintalapani <mail@harsha.io>\nDate:   2015-01-29T18:22:20Z\n\n    STORM-130: Supervisor getting killed due to java.io.FileNotFoundException: File '../stormconf.ser' does not exist.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T18:23:53.682+0000","updated":"2015-01-29T18:23:53.682+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297307","id":"14297307","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-72078838\n  \n    @ptgoetz  @d2r @revans2 @Parth-Brahmbhatt  Please take a look at the new PR. I apologize for the whitespace issue. There are still few left in this patch. As Taylor suggested please ?w=1 to the URL.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T18:37:35.310+0000","updated":"2015-01-29T18:37:35.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297639","id":"14297639","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/401#discussion_r23801424\n  \n    --- Diff: storm-core/src/clj/backtype/storm/daemon/supervisor.clj ---\n    @@ -349,6 +350,20 @@\n                             (keys keepers))\n                (zipmap (vals new-worker-ids) (keys new-worker-ids))\n                ))\n    +\n    +    ;; check storm topology code dir exists before launching workers\n    +    (doseq [[port assignment] reassign-executors]\n    +      (let [storm-cluster-state (:storm-cluster-state supervisor)\n    +            downloaded-storm-ids (set (read-downloaded-storm-ids conf))\n    +            storm-id (:storm-id assignment)\n    +            assignment-info (.assignment-info-with-version storm-cluster-state storm-id nil)\n    --- End diff --\n    \n    This is going to cause a large load on zookeeper.  There is a reason we have the cache for the assignment info, and we only download it when it has changed.  We really should use the cache here if we can.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T20:51:21.633+0000","updated":"2015-01-29T20:51:21.633+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297644","id":"14297644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/401#discussion_r23801588\n  \n    --- Diff: storm-core/src/clj/backtype/storm/daemon/supervisor.clj ---\n    @@ -349,6 +350,20 @@\n                             (keys keepers))\n                (zipmap (vals new-worker-ids) (keys new-worker-ids))\n                ))\n    +\n    +    ;; check storm topology code dir exists before launching workers\n    +    (doseq [[port assignment] reassign-executors]\n    +      (let [storm-cluster-state (:storm-cluster-state supervisor)\n    +            downloaded-storm-ids (set (read-downloaded-storm-ids conf))\n    +            storm-id (:storm-id assignment)\n    +            assignment-info (.assignment-info-with-version storm-cluster-state storm-id nil)\n    --- End diff --\n    \n    @revans2 are you talking about .assignment-info-with-version?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T20:53:38.124+0000","updated":"2015-01-29T20:53:38.124+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297654","id":"14297654","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-72102590\n  \n    For the most part it looks good, I would like to see us use the cached assignment instead of going to zookeeper again to get it.  I would also like to understand better how we avoid issues with downloading the same thing in two different threads.  I'm not sure I understand the exact cause of what puts us in this situation to begin with, so I don't feel comfortable that we will not try to download the same thing twice and cause some issues when we do.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T20:57:47.191+0000","updated":"2015-01-29T20:57:47.191+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297664","id":"14297664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-72103305\n  \n    @revans2 thanks for the review. I am looking for cached assignment code will send updated patch. \n    To address downloading the same code twice. It can happen in download-storm-code method I am checking if the topology code dir exists in the supervisor it won't overwrite and deletes the tmp dir.  More details on this comment on how this can happen https://issues.apache.org/jira/browse/STORM-130?focusedCommentId=14296241&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14296241\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T21:02:14.838+0000","updated":"2015-01-29T21:02:14.838+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297689","id":"14297689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/401#discussion_r23803166\n  \n    --- Diff: storm-core/src/clj/backtype/storm/daemon/supervisor.clj ---\n    @@ -349,6 +350,20 @@\n                             (keys keepers))\n                (zipmap (vals new-worker-ids) (keys new-worker-ids))\n                ))\n    +\n    +    ;; check storm topology code dir exists before launching workers\n    +    (doseq [[port assignment] reassign-executors]\n    +      (let [storm-cluster-state (:storm-cluster-state supervisor)\n    +            downloaded-storm-ids (set (read-downloaded-storm-ids conf))\n    +            storm-id (:storm-id assignment)\n    +            assignment-info (.assignment-info-with-version storm-cluster-state storm-id nil)\n    --- End diff --\n    \n    Yes.  We could replace it with ```@(:assignment-versions supervisor)``` and presumably get the same result without hitting zookeeper.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T21:15:17.781+0000","updated":"2015-01-29T21:15:17.781+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297695","id":"14297695","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-72105884\n  \n    Ok So this is for an existing topology that moved and then moved back.  I understand now about the race.  I am +1 for the change, once we avoid hitting ZK quite so frequently.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-29T21:17:58.028+0000","updated":"2015-01-29T21:17:58.028+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14297944","id":"14297944","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-72131353\n  \n    @revans2 thanks for pointer on using cached assignment. I also spoke to @Parth-Brahmbhatt  about download-storm-code, added the lock to make sure there won't be multiple threads downloading the same code . Please take a look.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-30T00:16:43.806+0000","updated":"2015-01-30T00:16:43.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14298884","id":"14298884","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-72235020\n  \n    +1 looks good to me.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-30T17:11:43.586+0000","updated":"2015-01-30T17:11:43.586+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14303893","id":"14303893","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-72725245\n  \n    +1. I'd also like to see this back-ported to the 0.9.3 branch, but that shouldn't block this from getting merged to master.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-03T20:14:15.942+0000","updated":"2015-02-03T20:14:15.942+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14303904","id":"14303904","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-72726626\n  \n    @ptgoetz  will send a new PR against 0.9.3 branch. Thanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-03T20:22:04.142+0000","updated":"2015-02-03T20:22:04.142+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14307673","id":"14307673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user harshach opened a pull request:\n\n    https://github.com/apache/storm/pull/418\n\n    STORM-130: Supervisor getting killed due to java.io.FileNotFoundException: File '../stormconf.ser' does not exist.\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/harshach/incubator-storm STORM-130-0.9.3\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/418.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #418\n    \n----\ncommit ccd28f8a356f468e66865fa9d9901b0a2628ec74\nAuthor: Sriharsha Chintalapani <mail@harsha.io>\nDate:   2015-02-05T18:08:05Z\n\n    STORM-130: Supervisor getting killed due to java.io.FileNotFoundException: File '../stormconf.ser' does not exist.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-05T18:09:07.112+0000","updated":"2015-02-05T18:09:07.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14307781","id":"14307781","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/401#issuecomment-73105790\n  \n    @revans2 @ptgoetz  opened a PR against 0.9.3-branch https://github.com/apache/storm/pull/418 . Also updated the current PR to handle another case.\n    This issue can happen if supervisors are down and user kills a topology , restart supervisors. These supervisors can crash with same issue as sync-process can start after cleaning up local deleted topology files . In general having try catch around launch-worker is good idea as there is no need to kill the supervisor itself if the launch-worker fails.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-05T19:05:10.797+0000","updated":"2015-02-05T19:05:10.797+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14318467","id":"14318467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-74099551\n  \n    +1\n    \n    I'll presume +1 approvals carry over from #401, but allow others time to comment.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-12T16:18:08.535+0000","updated":"2015-02-12T16:18:08.535+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14333466","id":"14333466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-75577186\n  \n    yes +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-23T16:31:20.938+0000","updated":"2015-02-23T16:31:20.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14333479","id":"14333479","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/401\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-23T16:39:24.426+0000","updated":"2015-02-23T16:39:24.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14333489","id":"14333489","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-75580704\n  \n    @ptgoetz  I merged the corresponding pull into master, but I'm not totally sure what version number you want for a 0.9.3 update,  will it be 0.9.4?  0.9.3.1?  If you just want to merge it in and update the JIRA with the new number that will be great, otherwise I'll just go with 0.9.4 and call it good. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-23T16:48:00.148+0000","updated":"2015-02-23T16:48:00.148+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14333494","id":"14333494","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Thanks [~sriharsha], I merged this into master.  I wasn't sure about the new version number for the 0.9.3 pull request so I'll leave it up to [~ptgoetz] for now to decide on a version number and pull it in.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2015-02-23T16:50:42.144+0000","updated":"2015-02-23T16:50:42.144+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14335417","id":"14335417","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-75842588\n  \n    merged to 0.9.3-branch. The next release of that branch will be 0.9.4, I'll update JIRA.\n    \n    @harshach Can you close this PR?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-24T20:49:06.860+0000","updated":"2015-02-24T20:49:06.860+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14335434","id":"14335434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-75844084\n  \n    Thanks @ptgoetz \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-24T20:56:45.552+0000","updated":"2015-02-24T20:56:45.552+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14335435","id":"14335435","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach closed the pull request at:\n\n    https://github.com/apache/storm/pull/418\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-24T20:56:45.966+0000","updated":"2015-02-24T20:56:45.966+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14337686","id":"14337686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sweetest commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-76107560\n  \n    hi guys, I want to know about when you will release 0.9.4 including this feature.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-26T01:48:18.049+0000","updated":"2015-02-26T01:48:18.049+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14361734","id":"14361734","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjaminhuang","name":"benjaminhuang","key":"benjaminhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin  Huang","active":true,"timeZone":"Asia/Hong_Kong"},"body":"I'm also facing this critical issue. It'll be appreciated that 0.9.4 can be released in the near future.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjaminhuang","name":"benjaminhuang","key":"benjaminhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin  Huang","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2015-03-14T11:47:20.068+0000","updated":"2015-03-14T11:47:20.068+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387584","id":"14387584","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"body":"I have had this issue occur with 0.9.4. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-30T23:23:39.816+0000","updated":"2015-03-30T23:23:39.816+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387594","id":"14387594","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~halorgium] Did it caused supervisor to crash. Are you upgrading from 0.9.3 or is this a new cluster and how big of a cluster is this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-30T23:28:18.574+0000","updated":"2015-03-30T23:28:18.574+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387599","id":"14387599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"body":"The supervisor did not crash, but the worker started up and could not find the stormconf.ser. \nLogs at https://gist.github.com/halorgium/6f558ad0e91d142e4560","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-30T23:31:16.694+0000","updated":"2015-03-30T23:31:16.694+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387601","id":"14387601","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"body":"The cluster is a single worker node. I had upgraded from 0.9.3 a week or so ago. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-30T23:31:56.372+0000","updated":"2015-03-30T23:31:56.372+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387655","id":"14387655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~halorgium]  It will be great if you can provide more details on when did you see this issue. After deploying topology ? and did it caused the supervisor to crash or did you notice the error in the logs. We are catching these exceptions now and it shouldn't crash supervisor and also when you upgraded is there any chance that there is an older storm-core*.jar present in the under STORM_HOME/lib. Are you able to reproduce this issue and if so can you provide any steps with 0.9.4.\n Any help with the details greatly appreciated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T00:06:57.045+0000","updated":"2015-03-31T00:06:57.045+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387705","id":"14387705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"body":"The issue occurs when we have a crash in our worker process. The supervisor (or nimbus) eventually notices that the topology is no longer running and restarts the topology worker process. \nI noticed this issue because I have been doing maintenance on our DB tier. \nThis exception is in the worker log not the supervisor log. The supervisor did not crash. \n\nThere are no old storm jars in the lib directory. \n\nThe steps to reproduce are: \n* Deploy a topology\n* Cause the topology to crash for an unexpected reason\n* Watch the supervisor start the worker\n* Watch the supervisor remove the code for the topology\n* The worker then cannot find the stormconf.ser file\n* The supervisor eventually downloads the topology to the filesystem","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T00:32:31.405+0000","updated":"2015-03-31T00:32:31.405+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387729","id":"14387729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~halorgium] Thanks for the details. Thats exactly the behavior we are looking for . Before this patch we may get into the same scenario as you noted where a worker might die causing supervisor to clear the state and restarting it would result in the topology files not found causing the supervisor to crash. If supervisor is not crashing and downloading the topology bit later that is fine. The reason supervisor might be removing code is if the worker is not sending any heartbeats the assignments for that supervisor might be taken away by nimbus \nand in that case supervisor will remove the topology jar code.\n After the last step are you seeing worker to start and topology to run?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T00:53:20.656+0000","updated":"2015-03-31T00:53:20.656+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387770","id":"14387770","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"body":"No, after the last step the supervisor/nimbus has to re-notice that the worker has crashed. \nVery often, the same issue occurs many times in a row. \n\nWe generally have to kill and deploy the topology to recover. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T01:19:24.963+0000","updated":"2015-03-31T01:19:24.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387851","id":"14387851","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~halorgium] it will definitely happen in a row as your topology keep exiting with an error no? . If the topology has unrecoverable error causing worker to crash these steps will happen repeatedly. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T02:38:10.164+0000","updated":"2015-03-31T02:38:10.164+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387860","id":"14387860","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"body":"The topology never restarts after the crash. The worker is unable to startup because of the missing file. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T02:44:39.067+0000","updated":"2015-03-31T02:44:39.067+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387862","id":"14387862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"body":"The error is recoverable, but has caused the worker process to crash. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T02:45:07.523+0000","updated":"2015-03-31T02:45:07.523+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387877","id":"14387877","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"If you can upload the topology to the JIRA I can retry reproducing this issue. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T02:55:09.127+0000","updated":"2015-03-31T02:55:09.127+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14387892","id":"14387892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~halorgium] I made changes to wordcount topology to do a System.exit(-1) if the word count reached to 100 and here is the supervisor.log\n\n ea96eb72-4b14-4342-a60e-d4c8d590814f still hasn't started\n2015-03-30T20:05:00.577-0700 b.s.d.supervisor [INFO] Worker Process f144d64e-6a60-465e-a838-9f9c2621e240 exited with code: 20\n2015-03-30T20:05:02.947-0700 b.s.d.supervisor [INFO] Worker Process f144d64e-6a60-465e-a838-9f9c2621e240 has died!\n2015-03-30T20:05:02.971-0700 b.s.d.supervisor [INFO] Shutting down and clearing state for id f144d64e-6a60-465e-a838-9f9c2621e240\n. Current supervisor time: 1427771102. State: :timed-out, Heartbeat: {:time-secs 1427771100, :storm-id \"wordcount-1-1427771089\", \n:executors #{[8 8] [2 2] [20 20] [23 23] [11 11] [-1 -1] [5 5] [26 26] [14 14] [17 17]}, :port 6702}\n2015-03-30T20:05:02.971-0700 b.s.d.supervisor [INFO] Shutting down 93d81c4b-c87c-491c-a808-b8e8d7f259a6:f144d64e-6a60-465e-a838-9\nf9c2621e240\n2015-03-30T20:05:02.972-0700 b.s.config [INFO] GET worker-user f144d64e-6a60-465e-a838-9f9c2621e240\n2015-03-30T20:05:02.996-0700 b.s.util [INFO] Error when trying to kill 56327. Process is probably already dead.\n2015-03-30T20:05:03.001-0700 b.s.util [INFO] Error when trying to kill 56332. Process is probably already dead.\n2015-03-30T20:05:03.020-0700 b.s.util [INFO] Error when trying to kill 56333. Process is probably already dead.\n2015-03-30T20:05:03.029-0700 b.s.util [INFO] Error when trying to kill 56334. Process is probably already dead.\n2015-03-30T20:05:03.029-0700 b.s.d.supervisor [INFO] Sleep 1 seconds for execution of cleanup threads on worker.\n2015-03-30T20:05:04.040-0700 b.s.util [INFO] Error when trying to kill 56327. Process is probably already dead.\n2015-03-30T20:05:04.046-0700 b.s.util [INFO] Error when trying to kill 56332. Process is probably already dead.\n2015-03-30T20:05:04.050-0700 b.s.util [INFO] Error when trying to kill 56333. Process is probably already dead.\n2015-03-30T20:05:04.055-0700 b.s.util [INFO] Error when trying to kill 56334. Process is probably already dead.\n2015-03-30T20:05:04.057-0700 b.s.config [INFO] REMOVE worker-user f144d64e-6a60-465e-a838-9f9c2621e240\n2015-03-30T20:05:04.057-0700 b.s.d.supervisor [INFO] Shut down 93d81c4b-c87c-491c-a808-b8e8d7f259a6:f144d64e-6a60-465e-a838-9f9c2\n621e240\n2015-03-30T20:05:04.063-0700 b.s.d.supervisor [INFO] Launching worker with assignment #backtype.storm.daemon.supervisor.LocalAssignment{:storm-id \"wordcount-1-1427771089\", :executors ([8 8] [2 2] [20 20] [23 23] [11 11] [5 5] [26 26] [14 14] [17 17])} for th\nis supervisor 93d81c4b-c87c-491c-a808-b8e8d7f259a6 on port 6702 with id 80cbcdc2-9c5a-49b5-b658-e4f478a382ef\n\n\nWhen the word count system.exit(-1) happens it kills the worker processes and supervisor notices this and restarts the worker with newly downloaded topology. \nI don't see this as an issue and this is an expected behavior. Storm worker processes is fail-fast(infact all of storm dameons) i.e if topology has a coding issue like not catching exceptions and doing system.exit(-1) workers will be killed and than restarted by the topology. Its up to the user to identify these issues in the topologies.\n\nIf incase you are noticing different pattern of an error and if its possible for you to upload your topology where you are seeing this issue that will be helpful.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T03:11:26.109+0000","updated":"2015-03-31T03:11:26.109+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14388790","id":"14388790","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"body":"My issue might be related to the fact that our topology is 30MB. \nAs you can see from my logs, the supervisor removes the code after starting the worker and then eventually downloads the code. \n\nIs there an ordering problem in the supervisor code where it gets confused about which topologies are assigned to the worker and it removes and redownloads the code instead of keeping it around?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=halorgium","name":"halorgium","key":"halorgium","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Carey-Smith","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T16:27:48.232+0000","updated":"2015-03-31T16:27:48.232+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14388823","id":"14388823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~halorgium] Filed STORM-739 to fix deletion of topology jar from supervisor incase if a worker dies.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-31T16:52:41.348+0000","updated":"2015-03-31T16:52:41.348+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14389880","id":"14389880","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~halorgium] went through supervisor code again to see if its re-downloading if the worker dies. Actually this is not happening it only clears the topology jars if the assignments are not there anymore. So the current code looks fine to me. If you can attach the supervisor log where you seeing the deletion happens that will be helpful. I can't reproduce this case with a modified wordcount topology.  In your cluster are you running single supervisor or multiple supervisors.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-01T02:09:33.084+0000","updated":"2015-04-01T02:09:33.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14389889","id":"14389889","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~halorgium] also can you try increasing nimbus.monitor.freq.secs to 120 or higher value. Its by default set to 10 which causes the topology rebalance to happen quickly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-01T02:15:42.088+0000","updated":"2015-04-01T02:15:42.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14492508","id":"14492508","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"body":"file not found, stormconf.ser, occurrences in 0.9.4\n\nNotes:\n* these logs are from a brand new storm and zookeeper cluster built from 0.9.4\n* logs are in debug mode\n* the worker logs are split into worker.id's\n* fields have been added to the logs\n\nObservations:\n* This behavior \"seems\" the same to me as what I was seeing in 0.9.3\n* Our app logs show it best - the workers are restarting about every 14 minutes.  Their heartbeats just \"stop\".  I don't know if / how this may be related to the tmp files being pulled out from underneath them ( stormconf.ser file not found ).  I figure it is related in that the stormconf.ser file not found error seems to be related to crashing workers.\n\nworker_logs.tar.gz\n------------------------worker logs not dealing with zookeeper/kafka\nworkers_with_stormconf.ser.gz\n------------------------a list of worker instances/logs where the stormconf.ser file not found error occurred\nworker_logs_of_zookeeper_traffic_*\n------------------------worker logs filtered by logger\nworker_logs_of_kafka_traffic.tar.gz\n------------------------worker logs filtered by logger\nsupervisor_logs.tar.gz\nnimbus.log.gz\n6703_all_storm_topologies.log\n------------------------application logging from our bolts","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maassql","name":"maassql","key":"maassql","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jeff maass","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-13T15:24:32.394+0000","updated":"2015-04-13T18:56:28.323+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14493814","id":"14493814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HQebupt commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-92704866\n  \n    It works. Thanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-14T08:57:00.467+0000","updated":"2015-04-14T08:57:00.467+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14496393","id":"14496393","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~maassql] Thanks for the details and logs. Did you try increasing the nimbus.monitor.freq.secs , did that help or you are still seeing the same issues.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-15T15:39:13.408+0000","updated":"2015-04-15T15:39:13.408+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14566665","id":"14566665","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ssudhaiyer commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-107232634\n  \n    I'm using 0.9.4 and seeing this issue. This seems to happen for me after an exception in my topology. I deactivate the topology and try deploying the topology again and I run into this issue.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-31T18:36:18.058+0000","updated":"2015-05-31T18:36:18.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14566831","id":"14566831","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-107257398\n  \n    @ssudhaiyer can you give us some steps on reproducing this.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-31T23:39:51.866+0000","updated":"2015-05-31T23:39:51.866+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14578846","id":"14578846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ssudhaiyer commented on the pull request:\n\n    https://github.com/apache/storm/pull/418#issuecomment-110348566\n  \n    I'm seeing this error again. I'm able to reproduce this when there in an exception in my spout ( in this case it was a gson parse failure), I attempted to deactivate and activate my topology. I see this issue. Though I find the .ser file is present in the directory.\n    \n    java.io.FileNotFoundException: File '/mnt/storm/supervisor/stormdist/my-topology-3-1433613276/stormconf.ser' does not exist\n    \tat org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:299) ~[commons-io-2.4.jar:2.4]\n    \tat org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1763) ~[commons-io-2.4.jar:2.4]\n    \tat backtype.storm.config$read_supervisor_storm_conf.invoke(config.clj:212) ~[storm-core-0.9.4.jar:0.9.4]\n    \tat backtype.storm.daemon.worker$worker_data.invoke(worker.clj:182) ~[storm-core-0.9.4.jar:0.9.4]\n    \tat backtype.storm.daemon.worker$fn__5033$exec_fn__1754__auto____5034.invoke(worker.clj:398) ~[storm-core-0.9.4.jar:0.9.4]\n    \tat clojure.lang.AFn.applyToHelper(AFn.java:185) [clojure-1.5.1.jar:na]\n    \tat clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n    \tat clojure.core$apply.invoke(core.clj:617) ~[clojure-1.5.1.jar:na]\n    \tat backtype.storm.daemon.worker$fn__5033$mk_worker__5089.doInvoke(worker.clj:389) [storm-core-0.9.4.jar:0.9.4]\n    \tat clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.5.1.jar:na]\n    \tat backtype.storm.daemon.worker$_main.invoke(worker.clj:500) [storm-core-0.9.4.jar:0.9.4]\n    \tat clojure.lang.AFn.applyToHelper(AFn.java:172) [clojure-1.5.1.jar:na]\n    \tat clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n    \tat backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.9.4.jar:0.9.4]\n    2015-06-09 12:48:58 b.s.util [ERROR] Halting process: (\"Error on initialization\")\n    java.lang.RuntimeException: (\"Error on initialization\")\n    \tat backtype.storm.util$exit_process_BANG_.doInvoke(util.clj:325) [storm-core-0.9.4.jar:0.9.4]\n    \tat clojure.lang.RestFn.invoke(RestFn.java:423) [clojure-1.5.1.jar:na]\n    \tat backtype.storm.daemon.worker$fn__5033$mk_worker__5089.doInvoke(worker.clj:389) [storm-core-0.9.4.jar:0.9.4]\n    \tat clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.5.1.jar:na]\n    \tat backtype.storm.daemon.worker$_main.invoke(worker.clj:500) [storm-core-0.9.4.jar:0.9.4]\n    \tat clojure.lang.AFn.applyToHelper(AFn.java:172) [clojure-1.5.1.jar:na]\n    \tat clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n    \tat backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.9.4.jar:0.9.4]\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T12:56:47.931+0000","updated":"2015-06-09T12:56:47.931+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14586624","id":"14586624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fmazoyer","name":"fmazoyer","key":"fmazoyer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Frantz Mazoyer","active":true,"timeZone":"Europe/Paris"},"body":"Hello,\n\nlooks like this issue was actually solved in 0.9.5?\nCould anybody confirm?\n\nIf so, could the jira be updated accordingly?\n\nThanks a lot for the help :-)\n\nKind regards,\nFrantz","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fmazoyer","name":"fmazoyer","key":"fmazoyer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Frantz Mazoyer","active":true,"timeZone":"Europe/Paris"},"created":"2015-06-15T20:22:20.293+0000","updated":"2015-06-15T20:22:20.293+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14586647","id":"14586647","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"body":"[~fmazoyer] Yes, this is fixed in 0.9.5. It was partially fixed in 0.9.4, but some commits were missed. It is also fixed in 0.10.0.\n\nI will update the JIRA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"created":"2015-06-15T20:31:11.460+0000","updated":"2015-06-15T20:31:11.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14707338","id":"14707338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rashshah","name":"rashshah","key":"rashshah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rashmikant","active":true,"timeZone":"Etc/UTC"},"body":"I am seeing same issue with 0.9.5.   Does anyone else see it?\n2015-08-21 02:02:50,677 - storm - ERROR: [main-clojure.tools.logging$eval1$fn__7] Error on initialization of server mk-worker\nE         java.io.FileNotFoundException: File 'var/storm/supervisor/stormdist/naas-default-1-1440147731/stormcode.ser' does not exist\nE         \tat org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:299) ~[commons-io-2.4.jar:2.4]\nE         \tat org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1763) ~[commons-io-2.4.jar:2.4]\nE         \tat backtype.storm.config$read_supervisor_topology.invoke(config.clj:219) ~[storm-core-0.9.5.jar:0.9.5]\nE         \tat backtype.storm.daemon.worker$worker_data.invoke(worker.clj:194) ~[storm-core-0.9.5.jar:0.9.5]\nE         \tat backtype.storm.daemon.worker$fn__7033$exec_fn__2594__auto____7034.invoke(worker.clj:400) ~[storm-core-0.9.5.jar:0.9.5]\nE         \tat clojure.lang.AFn.applyToHelper(AFn.java:185) [clojure-1.5.1.jar:na]\nE         \tat clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\nE         \tat clojure.core$apply.invoke(core.clj:617) ~[clojure-1.5.1.jar:na]\nE         \tat backtype.storm.daemon.worker$fn__7033$mk_worker__7089.doInvoke(worker.clj:391) [storm-core-0.9.5.jar:0.9.5]\nE         \tat clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.5.1.jar:na]\nE         \tat backtype.storm.daemon.worker$_main.invoke(worker.clj:502) [storm-core-0.9.5.jar:0.9.5]\nE         \tat clojure.lang.AFn.applyToHelper(AFn.java:172) [clojure-1.5.1.jar:na]\nE         \tat clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\nE         \tat backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.9.5.jar:0.9.5]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rashshah","name":"rashshah","key":"rashshah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rashmikant","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-21T19:42:44.496+0000","updated":"2015-08-21T19:42:44.496+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14707493","id":"14707493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=darsh221","name":"darsh221","key":"darsh221","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"darsh221","active":true,"timeZone":"Etc/UTC"},"body":"Yes, I also saw same exception with 0.9.5 \n\n2015-08-21T10:45:52.190-0700 b.s.d.worker [ERROR] Error on initialization of server mk-worker\njava.io.FileNotFoundException: File '/lm/storm_home/data/supervisor/stormdist/lm-hbme-topology-2-1440178401/stormconf.ser' does not exist\n        at org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:299) ~[commons-io-2.4.jar:2.4]\n        at org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1763) ~[commons-io-2.4.jar:2.4]\n        at backtype.storm.config$read_supervisor_storm_conf.invoke(config.clj:212) ~[storm-core-0.9.5.jar:0.9.5]\n        at backtype.storm.daemon.worker$worker_data.invoke(worker.clj:184) ~[storm-core-0.9.5.jar:0.9.5]\n        at backtype.storm.daemon.worker$fn__6959$exec_fn__1103__auto____6960.invoke(worker.clj:400) ~[storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.AFn.applyToHelper(AFn.java:185) [clojure-1.5.1.jar:na]\n        at clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n        at clojure.core$apply.invoke(core.clj:617) ~[clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker$fn__6959$mk_worker__7015.doInvoke(worker.clj:391) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker$_main.invoke(worker.clj:502) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.AFn.applyToHelper(AFn.java:172) [clojure-1.5.1.jar:na]\n        at clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.9.5.jar:0.9.5]\n2015-08-21T10:45:52.193-0700 b.s.util [ERROR] Halting process: (\"Error on initialization\")\njava.lang.RuntimeException: (\"Error on initialization\")\n        at backtype.storm.util$exit_process_BANG_.doInvoke(util.clj:325) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.RestFn.invoke(RestFn.java:423) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker$fn__6959$mk_worker__7015.doInvoke(worker.clj:391) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker$_main.invoke(worker.clj:502) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.AFn.applyToHelper(AFn.java:172) [clojure-1.5.1.jar:na]\n        at clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.9.5.jar:0.9.5]\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=darsh221","name":"darsh221","key":"darsh221","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"darsh221","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-21T21:28:01.388+0000","updated":"2015-08-21T22:51:21.980+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14708479","id":"14708479","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~rashshah] [~darsh221]  Are you noticing supervisors going down when this issue occurs? . Its common to see this in the log files after the fix as it can happen due to async nature of download and re-balancing being triggered. The fix here prevents supervisor crashing incase of such failures but it shouldn't be affecting the topology as the nimbus reassigns it to another supervisor or the supervisor tries to download the jar again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-23T18:56:27.826+0000","updated":"2015-08-23T18:56:27.826+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14717125","id":"14717125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"body":"We just upgraded to 0.9.5 (because we also ran into this issue often in prev version), and we also ran into this.\n\nthe supervisors did go down in our case. \n\n1 caution in our upgrade is we started a new nimbus, without any supervisors attached. Then we deployed topologies (from CICD). Next we build new supervisors and the supervisors will start on startup. However, in between the network service is restarted (due to hostname changed during the build <- chef). Just wanna throw this out in case this makes a difference. \n\nwe also see this: \n{code}\nSEVERE: RuntimeException while executing runnable org.apache.storm.guava.util.concurrent.Futures$4@445058b with executor org.apache.storm.guava.util.concurrent.MoreExecutors$SameThreadExecutorService@691bc565\njava.lang.RuntimeException: Failed to connect to Netty-Client-usw2b-grunt-drone32-prod.amz.relateiq.com/10.30.103.202:6700\nat backtype.storm.messaging.netty.Client.connect(Client.java:308)\nat backtype.storm.messaging.netty.Client.access$1100(Client.java:78)\nat backtype.storm.messaging.netty.Client$2.reconnectAgain(Client.java:297)\nat backtype.storm.messaging.netty.Client$2.onSuccess(Client.java:283)\nat backtype.storm.messaging.netty.Client$2.onSuccess(Client.java:275)\nat org.apache.storm.guava.util.concurrent.Futures$4.run(Futures.java:1181)\nat org.apache.storm.guava.util.concurrent.MoreExecutors$SameThreadExecutorService.execute(MoreExecutors.java:297)\nat org.apache.storm.guava.util.concurrent.ExecutionList.executeListener(ExecutionList.java:156)\nat org.apache.storm.guava.util.concurrent.ExecutionList.execute(ExecutionList.java:145)\nat org.apache.storm.guava.util.concurrent.ListenableFutureTask.done(ListenableFutureTask.java:91)\nat java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:384)\nat java.util.concurrent.FutureTask.set(FutureTask.java:233)\nat java.util.concurrent.FutureTask.run(FutureTask.java:274)\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\nat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.RuntimeException: Giving up to connect to Netty-Client-usw2b-grunt-drone32-prod.amz.relateiq.com/10.30.103.202:6700 after 102 failed attempts\nat backtype.storm.messaging.netty.Client.connect(Client.java:303)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-27T17:33:30.701+0000","updated":"2015-08-27T17:33:30.701+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14720416","id":"14720416","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=longtimer","name":"longtimer","key":"longtimer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Kania","active":true,"timeZone":"America/Toronto"},"body":"I too have encountered the problem in 0.9.5 release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=longtimer","name":"longtimer","key":"longtimer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Kania","active":true,"timeZone":"America/Toronto"},"created":"2015-08-28T19:07:37.317+0000","updated":"2015-08-28T19:07:37.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14720422","id":"14720422","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~longtimer] Did you see supervisors go down or just the error appear in log?. Can you reliably reproduce this issue. If so can you try increasing nimbus.monitor.freq.secs 120 secs or higher?.\n\n[~cywjackson] the error you pasted is not related to this JIRA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-28T19:12:25.752+0000","updated":"2015-08-28T19:12:25.752+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14723984","id":"14723984","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sriharsha] fair enough. Just wanna throw it out there in case its related. We did see the ../stormconf.ser , just didn't wanna repeat the same stacktrace. But just to confirm this still happens in 0.9.5:\n\n{code}2015-08-26 21:08:04,135 -0700 ERROR           backtype.storm.daemon.worker:0 - Error on initialization of server mk-worker\njava.io.FileNotFoundException: File '/mnt/apps/storm/data/supervisor/stormdist/EwsSubscription-14-1440646299/stormconf.ser' does not exist\n        at org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:299) ~[commons-io-2.4.jar:2.4]\n        at org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1763) ~[commons-io-2.4.jar:2.4]\n        at backtype.storm.config$read_supervisor_storm_conf.invoke(config.clj:212) ~[storm-core-0.9.5.jar:0.9.5]\n        at backtype.storm.daemon.worker$worker_data.invoke(worker.clj:184) ~[storm-core-0.9.5.jar:0.9.5]\n        at backtype.storm.daemon.worker$fn__6959$exec_fn__1103__auto____6960.invoke(worker.clj:400) ~[storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.AFn.applyToHelper(AFn.java:185) [clojure-1.5.1.jar:na]\n        at clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n        at clojure.core$apply.invoke(core.clj:617) ~[clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker$fn__6959$mk_worker__7015.doInvoke(worker.clj:391) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker$_main.invoke(worker.clj:502) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.AFn.applyToHelper(AFn.java:172) [clojure-1.5.1.jar:na]\n        at clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.9.5.jar:0.9.5]\n2015-08-26 21:08:04,144 -0700 ERROR                    backtype.storm.util:0 - Halting process: (\"Error on initialization\")\njava.lang.RuntimeException: (\"Error on initialization\")\n        at backtype.storm.util$exit_process_BANG_.doInvoke(util.clj:325) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.RestFn.invoke(RestFn.java:423) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker$fn__6959$mk_worker__7015.doInvoke(worker.clj:391) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker$_main.invoke(worker.clj:502) [storm-core-0.9.5.jar:0.9.5]\n        at clojure.lang.AFn.applyToHelper(AFn.java:172) [clojure-1.5.1.jar:na]\n        at clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.9.5.jar:0.9.5]\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-31T20:28:28.856+0000","updated":"2015-08-31T20:28:28.856+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14724017","id":"14724017","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~cywjackson] Thanks. Can you please file a jira if you seeing the other issue.  Can you confirm if the above error killed the supervisor?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-31T20:52:43.621+0000","updated":"2015-08-31T20:52:43.621+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14724034","id":"14724034","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sriharsha] , created https://issues.apache.org/jira/browse/STORM-1022 . \n\nour supervisor did go down. But I am not sure if it goes down because of this issue or the other issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-31T21:04:00.825+0000","updated":"2015-08-31T21:04:00.825+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14724060","id":"14724060","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~cywjackson] Thanks for the JIRA. If you have the full supervisor.log where this error occurred \"/mnt/apps/storm/data/supervisor/stormdist/EwsSubscription-14-1440646299/stormconf.ser' does not exist\"  I can verify.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-31T21:15:03.178+0000","updated":"2015-08-31T21:15:03.178+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14726236","id":"14726236","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sriharsha] here u go. you could see there is a halt/restart of supervisor at 2015-08-26 21:04:09 . It is after downloading the EwsSubscription-14-1440646299 at 2015-08-26 21:03:44,908 -0700.  What I don't know is if this shutdown of supervisor was due to network being restart. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cywjackson","name":"cywjackson","key":"cywjackson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jackson Chung","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-01T21:33:19.022+0000","updated":"2015-09-01T21:33:19.022+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/14730206","id":"14730206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~cywjackson] Thanks for the log  but this looks like some other issue not because of topology download issue though.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-04T02:24:32.356+0000","updated":"2015-09-04T02:24:32.356+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684756/comment/15059503","id":"15059503","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fogetti","name":"fogetti","key":"fogetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gergely Nagy","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi folks. I experience the same bug in 0.10.0. In my case the supervisor survives but the topology dies and it's getting rebalanced to another supervisor.\n\nThis is what I see in the supervisor log:\n{code}\n2015-12-16 12:56:27.746 b.s.u.Utils [INFO] Using defaults.yaml from resources\n2015-12-16 12:56:27.784 b.s.u.Utils [INFO] Using storm.yaml from resources\n2015-12-16 12:56:27.841 b.s.d.supervisor [INFO] Launching worker with command: 'java' '-cp' '/home/fogetti/downloads/apache-storm-0.10.0/lib/kryo-2.21.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/log4j-over-slf4j-1.6.6.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/log4j-slf4j-impl-2.1.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/minlog-1.2.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/asm-4.0.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/log4j-core-2.1.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/reflectasm-1.07-shaded.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/log4j-api-2.1.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/hadoop-auth-2.4.0.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/slf4j-api-1.7.7.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/clojure-1.6.0.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/servlet-api-2.5.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/disruptor-2.10.4.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/storm-core-0.10.0.jar:/home/fogetti/downloads/apache-storm-0.10.0/conf:/home/fogetti/downloads/apache-storm-0.10.0/storm-local/supervisor/stormdist/phish-storm-topology-2-1450237054/stormjar.jar' '-Dlogfile.name=phish-storm-topology-2-1450237054-worker-6700.log' '-Dstorm.home=/home/fogetti/downloads/apache-storm-0.10.0' '-Dstorm.id=phish-storm-topology-2-1450237054' '-Dworker.id=d3819964-7671-447d-8763-827ab5cd6140' '-Dworker.port=6700' '-Dstorm.log.dir=/home/fogetti/downloads/apache-storm-0.10.0/logs' '-Dlog4j.configurationFile=/home/fogetti/downloads/apache-storm-0.10.0/log4j2/worker.xml' 'backtype.storm.LogWriter' 'java' '-server' '-Xmx768m' '-Djava.library.path=/home/fogetti/downloads/apache-storm-0.10.0/storm-local/supervisor/stormdist/phish-storm-topology-2-1450237054/resources/Linux-amd64:/home/fogetti/downloads/apache-storm-0.10.0/storm-local/supervisor/stormdist/phish-storm-topology-2-1450237054/resources:/usr' '-Dlogfile.name=phish-storm-topology-2-1450237054-worker-6700.log' '-Dstorm.home=/home/fogetti/downloads/apache-storm-0.10.0' '-Dstorm.conf.file=' '-Dstorm.options=' '-Dstorm.log.dir=/home/fogetti/downloads/apache-storm-0.10.0/logs' '-Dlogging.sensitivity=S3' '-Dlog4j.configurationFile=/home/fogetti/downloads/apache-storm-0.10.0/log4j2/worker.xml' '-Dstorm.id=phish-storm-topology-2-1450237054' '-Dworker.id=d3819964-7671-447d-8763-827ab5cd6140' '-Dworker.port=6700' '-cp' '/home/fogetti/downloads/apache-storm-0.10.0/lib/kryo-2.21.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/log4j-over-slf4j-1.6.6.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/log4j-slf4j-impl-2.1.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/minlog-1.2.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/asm-4.0.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/log4j-core-2.1.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/reflectasm-1.07-shaded.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/log4j-api-2.1.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/hadoop-auth-2.4.0.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/slf4j-api-1.7.7.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/clojure-1.6.0.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/servlet-api-2.5.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/disruptor-2.10.4.jar:/home/fogetti/downloads/apache-storm-0.10.0/lib/storm-core-0.10.0.jar:/home/fogetti/downloads/apache-storm-0.10.0/conf:/home/fogetti/downloads/apache-storm-0.10.0/storm-local/supervisor/stormdist/phish-storm-topology-2-1450237054/stormjar.jar' 'backtype.storm.daemon.worker' 'phish-storm-topology-2-1450237054' '6c528751-1a10-4c33-bd54-a1ec9cb26d86' '6700' 'd3819964-7671-447d-8763-827ab5cd6140'\n2015-12-16 12:56:27.888 b.s.config [INFO] SET worker-user d3819964-7671-447d-8763-827ab5cd6140 \n2015-12-16 12:56:27.948 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:28.169 b.s.d.supervisor [INFO] Removing code for storm id phish-storm-topology-2-1450237054\n2015-12-16 12:56:28.454 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:28.956 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:29.457 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:29.957 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:30.458 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:30.960 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:31.463 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:31.964 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:32.465 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:32.966 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:33.467 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:33.968 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:34.469 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:34.970 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:35.471 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:35.972 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:36.473 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:36.974 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:37.076 b.s.d.supervisor [INFO] Worker Process d3819964-7671-447d-8763-827ab5cd6140 exited with code: 13\n2015-12-16 12:56:37.475 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:56:37.976 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n...\n2015-12-16 12:58:23.196 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:58:23.697 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:58:24.198 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:58:24.699 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:58:25.200 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:58:25.701 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:58:26.202 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:58:26.702 b.s.d.supervisor [INFO] d3819964-7671-447d-8763-827ab5cd6140 still hasn't started\n2015-12-16 12:58:27.203 b.s.d.supervisor [INFO] Worker d3819964-7671-447d-8763-827ab5cd6140 failed to start\n2015-12-16 12:58:27.206 b.s.d.supervisor [INFO] Shutting down and clearing state for id d3819964-7671-447d-8763-827ab5cd6140. Current supervisor time: 1450238307. State: :not-started, Heartbeat: nil\n2015-12-16 12:58:27.207 b.s.d.supervisor [INFO] Shutting down 6c528751-1a10-4c33-bd54-a1ec9cb26d86:d3819964-7671-447d-8763-827ab5cd6140\n2015-12-16 12:58:27.208 b.s.config [INFO] GET worker-user d3819964-7671-447d-8763-827ab5cd6140\n2015-12-16 12:58:27.259 b.s.util [INFO] Error when trying to kill 5076. Process is probably already dead.\n2015-12-16 12:58:27.260 b.s.d.supervisor [INFO] Sleep 1 seconds for execution of cleanup threads on worker.\n2015-12-16 12:58:28.266 b.s.util [INFO] Error when trying to kill 5076. Process is probably already dead.\n2015-12-16 12:58:28.275 b.s.config [INFO] REMOVE worker-user d3819964-7671-447d-8763-827ab5cd6140\n2015-12-16 12:58:28.276 b.s.d.supervisor [INFO] Shut down 6c528751-1a10-4c33-bd54-a1ec9cb26d86:d3819964-7671-447d-8763-827ab5cd6140\n{code}\n\nAnd this is what I see in the worker log:\n{code}\n2015-12-16 12:56:36.702 b.s.u.Utils [INFO] Using defaults.yaml from resources\n2015-12-16 12:56:36.769 b.s.u.Utils [INFO] Using storm.yaml from resources\n2015-12-16 12:56:36.921 b.s.d.worker [INFO] Launching worker for phish-storm-topology-2-1450237054 on 6c528751-1a10-4c33-bd54-a1ec9cb26d86:6700 with id d3819964-7671-447d-8763-827ab5cd6140 and conf {\"topology.builtin.metrics.bucket.size.secs\" 60, \"nimbus.childopts\" \"-Xmx1024m\", \"ui.filter.params\" nil, \"storm.cluster.mode\" \"distributed\", \"storm.messaging.netty.client_worker_threads\" 1, \"supervisor.run.worker.as.user\" false, \"topology.max.task.parallelism\" nil, \"zmq.threads\" 1, \"storm.group.mapping.service\" \"backtype.storm.security.auth.ShellBasedGroupsMapping\", \"transactional.zookeeper.root\" \"/transactional\", \"topology.sleep.spout.wait.strategy.time.ms\" 1, \"drpc.invocations.port\" 3773, \"topology.multilang.serializer\" \"backtype.storm.multilang.JsonSerializer\", \"storm.messaging.netty.server_worker_threads\" 1, \"topology.max.error.report.per.interval\" 5, \"storm.thrift.transport\" \"backtype.storm.security.auth.SimpleTransportPlugin\", \"zmq.hwm\" 0, \"storm.principal.tolocal\" \"backtype.storm.security.auth.DefaultPrincipalToLocal\", \"supervisor.worker.shutdown.sleep.secs\" 1, \"storm.zookeeper.retry.times\" 5, \"ui.actions.enabled\" true, \"zmq.linger.millis\" 5000, \"supervisor.enable\" true, \"topology.stats.sample.rate\" 0.05, \"storm.messaging.netty.min_wait_ms\" 100, \"storm.zookeeper.port\" 2181, \"supervisor.heartbeat.frequency.secs\" 5, \"topology.enable.message.timeouts\" true, \"drpc.worker.threads\" 64, \"drpc.queue.size\" 128, \"drpc.https.keystore.password\" \"\", \"logviewer.port\" 8000, \"nimbus.reassign\" true, \"topology.executor.send.buffer.size\" 1024, \"topology.spout.wait.strategy\" \"backtype.storm.spout.SleepSpoutWaitStrategy\", \"ui.host\" \"0.0.0.0\", \"storm.nimbus.retry.interval.millis\" 2000, \"nimbus.inbox.jar.expiration.secs\" 3600, \"dev.zookeeper.path\" \"/tmp/dev-storm-zookeeper\", \"topology.acker.executors\" nil, \"topology.fall.back.on.java.serialization\" true, \"storm.zookeeper.servers\" [\"dimebag\" \"petrucci\" \"hetfield\"], \"nimbus.thrift.threads\" 64, \"logviewer.cleanup.age.mins\" 10080, \"topology.worker.childopts\" nil, \"topology.classpath\" nil, \"supervisor.monitor.frequency.secs\" 3, \"nimbus.credential.renewers.freq.secs\" 600, \"topology.skip.missing.kryo.registrations\" false, \"drpc.authorizer.acl.filename\" \"drpc-auth-acl.yaml\", \"storm.group.mapping.service.cache.duration.secs\" 120, \"topology.testing.always.try.serialize\" false, \"nimbus.monitor.freq.secs\" 10, \"supervisor.supervisors\" [], \"topology.tasks\" nil, \"topology.bolts.outgoing.overflow.buffer.enable\" false, \"storm.messaging.netty.socket.backlog\" 500, \"topology.workers\" 1, \"storm.local.dir\" \"/home/fogetti/downloads/apache-storm-0.10.0/storm-local\", \"worker.childopts\" \"-Xmx768m\", \"storm.auth.simple-white-list.users\" [], \"topology.message.timeout.secs\" 30, \"topology.state.synchronization.timeout.secs\" 60, \"topology.tuple.serializer\" \"backtype.storm.serialization.types.ListDelegateSerializer\", \"supervisor.supervisors.commands\" [], \"logviewer.childopts\" \"-Xmx128m\", \"topology.environment\" nil, \"topology.debug\" false, \"storm.messaging.netty.max_retries\" 300, \"ui.childopts\" \"-Xmx768m\", \"storm.zookeeper.session.timeout\" 20000, \"drpc.childopts\" \"-Xmx768m\", \"drpc.http.creds.plugin\" \"backtype.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.connection.timeout\" 15000, \"storm.zookeeper.auth.user\" nil, \"storm.meta.serialization.delegate\" \"backtype.storm.serialization.GzipThriftSerializationDelegate\", \"topology.max.spout.pending\" nil, \"nimbus.supervisor.timeout.secs\" 60, \"nimbus.task.timeout.secs\" 30, \"drpc.port\" 3772, \"storm.zookeeper.retry.intervalceiling.millis\" 30000, \"nimbus.thrift.port\" 6627, \"storm.auth.simple-acl.admins\" [], \"storm.nimbus.retry.times\" 5, \"supervisor.worker.start.timeout.secs\" 120, \"storm.zookeeper.retry.interval\" 1000, \"logs.users\" nil, \"transactional.zookeeper.port\" nil, \"drpc.max_buffer_size\" 1048576, \"task.credentials.poll.secs\" 30, \"drpc.https.keystore.type\" \"JKS\", \"topology.worker.receiver.thread.count\" 1, \"supervisor.slots.ports\" [6700 6701], \"topology.transfer.buffer.size\" 1024, \"topology.worker.shared.thread.pool.size\" 4, \"drpc.authorizer.acl.strict\" false, \"nimbus.file.copy.expiration.secs\" 600, \"topology.executor.receive.buffer.size\" 1024, \"nimbus.task.launch.secs\" 120, \"storm.local.mode.zmq\" false, \"storm.messaging.netty.buffer_size\" 5242880, \"worker.heartbeat.frequency.secs\" 1, \"ui.http.creds.plugin\" \"backtype.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.root\" \"/storm\", \"topology.tick.tuple.freq.secs\" nil, \"drpc.https.port\" -1, \"task.refresh.poll.secs\" 10, \"task.heartbeat.frequency.secs\" 3, \"storm.messaging.netty.max_wait_ms\" 1000, \"nimbus.impersonation.authorizer\" \"backtype.storm.security.auth.authorizer.ImpersonationAuthorizer\", \"drpc.http.port\" 3774, \"topology.error.throttle.interval.secs\" 10, \"storm.messaging.transport\" \"backtype.storm.messaging.netty.Context\", \"storm.messaging.netty.authentication\" false, \"topology.kryo.factory\" \"backtype.storm.serialization.DefaultKryoFactory\", \"worker.gc.childopts\" \"\", \"nimbus.topology.validator\" \"backtype.storm.nimbus.DefaultTopologyValidator\", \"nimbus.cleanup.inbox.freq.secs\" 600, \"ui.users\" nil, \"transactional.zookeeper.servers\" nil, \"supervisor.worker.timeout.secs\" 30, \"storm.zookeeper.auth.password\" nil, \"supervisor.childopts\" \"-Xmx256m\", \"ui.filter\" nil, \"ui.header.buffer.bytes\" 4096, \"topology.disruptor.wait.timeout.millis\" 1000, \"storm.nimbus.retry.intervalceiling.millis\" 60000, \"topology.trident.batch.emit.interval.millis\" 500, \"topology.disruptor.wait.strategy\" \"com.lmax.disruptor.BlockingWaitStrategy\", \"storm.auth.simple-acl.users\" [], \"drpc.invocations.threads\" 64, \"java.library.path\" \"/usr\", \"ui.port\" 8080, \"storm.messaging.netty.transfer.batch.size\" 262144, \"logviewer.appender.name\" \"A1\", \"nimbus.thrift.max_buffer_size\" 1048576, \"nimbus.host\" \"dimebag\", \"storm.auth.simple-acl.users.commands\" [], \"drpc.request.timeout.secs\" 600}\n2015-12-16 12:56:36.947 b.s.util [DEBUG] Touching file at /home/fogetti/downloads/apache-storm-0.10.0/storm-local/workers/d3819964-7671-447d-8763-827ab5cd6140/pids/5076\n2015-12-16 12:56:36.962 b.s.d.worker [ERROR] Error on initialization of server mk-worker\njava.io.FileNotFoundException: File '/home/fogetti/downloads/apache-storm-0.10.0/storm-local/supervisor/stormdist/phish-storm-topology-2-1450237054/stormconf.ser' does not exist\n        at org.apache.storm.shade.org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:299) ~[storm-core-0.10.0.jar:0.10.0]\n        at org.apache.storm.shade.org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1763) ~[storm-core-0.10.0.jar:0.10.0]\n        at backtype.storm.config$read_supervisor_storm_conf.invoke(config.clj:222) ~[storm-core-0.10.0.jar:0.10.0]\n        at backtype.storm.daemon.worker$fn__7098$exec_fn__1236__auto____7099.invoke(worker.clj:418) ~[storm-core-0.10.0.jar:0.10.0]\n        at clojure.lang.AFn.applyToHelper(AFn.java:178) ~[clojure-1.6.0.jar:?]\n        at clojure.lang.AFn.applyTo(AFn.java:144) ~[clojure-1.6.0.jar:?]\n        at clojure.core$apply.invoke(core.clj:624) ~[clojure-1.6.0.jar:?]\n        at backtype.storm.daemon.worker$fn__7098$mk_worker__7175.doInvoke(worker.clj:409) [storm-core-0.10.0.jar:0.10.0]\n        at clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.6.0.jar:?]\n        at backtype.storm.daemon.worker$_main.invoke(worker.clj:542) [storm-core-0.10.0.jar:0.10.0]\n        at clojure.lang.AFn.applyToHelper(AFn.java:165) [clojure-1.6.0.jar:?]\n        at clojure.lang.AFn.applyTo(AFn.java:144) [clojure-1.6.0.jar:?]\n        at backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.10.0.jar:0.10.0]\n2015-12-16 12:56:36.984 b.s.util [ERROR] Halting process: (\"Error on initialization\")\njava.lang.RuntimeException: (\"Error on initialization\")\n        at backtype.storm.util$exit_process_BANG_.doInvoke(util.clj:336) [storm-core-0.10.0.jar:0.10.0]\n        at clojure.lang.RestFn.invoke(RestFn.java:423) [clojure-1.6.0.jar:?]\n        at backtype.storm.daemon.worker$fn__7098$mk_worker__7175.doInvoke(worker.clj:409) [storm-core-0.10.0.jar:0.10.0]\n        at clojure.lang.RestFn.invoke(RestFn.java:512) [clojure-1.6.0.jar:?]\n        at backtype.storm.daemon.worker$_main.invoke(worker.clj:542) [storm-core-0.10.0.jar:0.10.0]\n        at clojure.lang.AFn.applyToHelper(AFn.java:165) [clojure-1.6.0.jar:?]\n        at clojure.lang.AFn.applyTo(AFn.java:144) [clojure-1.6.0.jar:?]\n        at backtype.storm.daemon.worker.main(Unknown Source) [storm-core-0.10.0.jar:0.10.0]\n{code}\n\nAnd this is what I see in the nimbus log:\n{code}\n2015-12-16 12:52:26.929 b.s.d.nimbus [INFO] Delaying event :do-rebalance for 10 secs for phish-storm-topology-2-1450237054\n2015-12-16 12:52:27.257 b.s.d.nimbus [INFO] [req 29] Access from:  principal: op:getTopologyConf\n2015-12-16 12:52:27.290 b.s.d.nimbus [INFO] [req 28] Access from:  principal: op:getTopologyInfo\n2015-12-16 12:52:27.376 b.s.d.nimbus [INFO] [req 34] Access from:  principal: op:getTopology\n2015-12-16 12:52:27.378 b.s.d.nimbus [INFO] [req 30] Access from:  principal: op:getTopologyConf\n2015-12-16 12:52:28.505 b.s.d.nimbus [INFO] [req 32] Access from:  principal: op:getClusterInfo\n2015-12-16 12:52:28.510 b.s.d.nimbus [INFO] [req 31] Access from:  principal: op:getClusterInfo\n2015-12-16 12:52:28.524 b.s.d.nimbus [INFO] [req 38] Access from:  principal: op:getClusterInfo\n2015-12-16 12:52:28.529 b.s.d.nimbus [INFO] [req 33] Access from:  principal: op:getNimbusConf\n2015-12-16 12:52:37.055 b.s.s.EvenScheduler [INFO] Available slots: ([\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6701] [\"6c528751-1a10-4c33-bd54-a1ec9cb26d86\" 6700] [\"6c528751-1a10-4c33-bd54-a1\nec9cb26d86\" 6701])\n2015-12-16 12:52:37.057 b.s.d.nimbus [INFO] Setting new assignment for topology id phish-storm-topology-2-1450237054: #backtype.storm.daemon.common.Assignment{:master-code-dir \"/home/fogetti/downloads/apache-storm-0.10.0/storm-local/ni\nmbus/stormdist/phish-storm-topology-2-1450237054\", :node->host {\"6c528751-1a10-4c33-bd54-a1ec9cb26d86\" \"petrucci\", \"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" \"hetfield\"}, :executor->node+port {[8 8] [\"6c528751-1a10-4c33-bd54-a1ec9cb26d86\" \n6700], [7 7] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700], [5 6] [\"6c528751-1a10-4c33-bd54-a1ec9cb26d86\" 6700], [3 4] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700], [9 10] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700], [2 2] [\"6c528751-1a10-4c33-bd54-a1ec9cb26d86\" 6700], [1 1] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700]}, :executor->start-time-secs {[9 10] 1450237957, [7 7] 1450237957, [3 4] 1450237957, [1 1] 1450237957, [8 8] 1450237957, [5 6] 1450237957, [2 2] 1450237957}}\n...\n2015-12-16 12:54:41.453 b.s.d.nimbus [INFO] Executor phish-storm-topology-2-1450237054:[8 8] not alive\n2015-12-16 12:54:41.453 b.s.d.nimbus [INFO] Executor phish-storm-topology-2-1450237054:[2 2] not alive\n2015-12-16 12:54:41.453 b.s.d.nimbus [INFO] Executor phish-storm-topology-2-1450237054:[5 6] not alive\n2015-12-16 12:54:41.457 b.s.s.EvenScheduler [INFO] Available slots: ([\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6701] [\"6c528751-1a10-4c33-bd54-a1ec9cb26d86\" 6701])\n2015-12-16 12:54:41.457 b.s.d.nimbus [INFO] Reassigning phish-storm-topology-2-1450237054 to 2 slots\n2015-12-16 12:54:41.457 b.s.d.nimbus [INFO] Reassign executors: [[8 8] [5 6] [2 2]]\n2015-12-16 12:54:41.462 b.s.d.nimbus [INFO] Setting new assignment for topology id phish-storm-topology-2-1450237054: #backtype.storm.daemon.common.Assignment{:master-code-dir \"/home/fogetti/downloads/apache-storm-0.10.0/storm-local/nimbus/stormdist/phish-storm-topology-2-1450237054\", :node->host {\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" \"hetfield\"}, :executor->node+port {[8 8] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6701], [7 7] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700], [5 6] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6701], [3 4] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700], [9 10] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700], [2 2] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6701], [1 1] [\"2c80eadd-a7bd-4470-9ba5-d17be81c94ae\" 6700]}, :executor->start-time-secs {[7 7] 1450237957, [1 1] 1450237957, [8 8] 1450238081, [2 2] 1450238081, [9 10] 1450237957, [3 4] 1450237957, [5 6] 1450238081}}\n{code}\n\nHope it helps.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fogetti","name":"fogetti","key":"fogetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gergely Nagy","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-16T05:13:49.900+0000","updated":"2015-12-16T05:13:49.900+0000"}],"maxResults":69,"total":69,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-130/votes","votes":5,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1qpp3:"}}