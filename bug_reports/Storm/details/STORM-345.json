{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12720421","self":"https://issues.apache.org/jira/rest/api/2/issue/12720421","key":"STORM-345","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2014-06-10T20:08:08.825+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jul 09 16:23:18 UTC 2014","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2494950638_*|*_5_*:*_1_*:*_0","customfield_12310420":"398620","customfield_12312321":null,"resolutiondate":"2014-07-09T16:23:18.730+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-345/watchers","watchCount":4,"isWatching":false},"created":"2014-06-10T19:20:48.142+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["security"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=speaktoraghav","name":"speaktoraghav","key":"speaktoraghav","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=speaktoraghav&avatarId=20376","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=speaktoraghav&avatarId=20376","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=speaktoraghav&avatarId=20376","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=speaktoraghav&avatarId=20376"},"displayName":"Raghavendra Nandagopal","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-10-09T00:50:11.522+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"AutoTGT will call tgt.refresh(); to try and renew a token, but ever time we try to make this work the java code blows up with some very odd errors.\n\nEither we need to find some configurations and document them on how to make this work.\n\nRip out the renewal code and update the documentation to explain that the renewal is not supported.\n\nFind another way to renew the TGT (Some other library)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"398745","customfield_12312823":null,"summary":"(Security) AutoTGT renewal is not working","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720421/comment/14026923","id":"14026923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=speaktoraghav","name":"speaktoraghav","key":"speaktoraghav","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=speaktoraghav&avatarId=20376","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=speaktoraghav&avatarId=20376","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=speaktoraghav&avatarId=20376","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=speaktoraghav&avatarId=20376"},"displayName":"Raghavendra Nandagopal","active":true,"timeZone":"America/Los_Angeles"},"body":"This is Raghav.  Assign it to me, I will take look at it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=speaktoraghav","name":"speaktoraghav","key":"speaktoraghav","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=speaktoraghav&avatarId=20376","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=speaktoraghav&avatarId=20376","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=speaktoraghav&avatarId=20376","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=speaktoraghav&avatarId=20376"},"displayName":"Raghavendra Nandagopal","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-10T20:08:08.825+0000","updated":"2014-06-10T20:08:08.825+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720421/comment/14038075","id":"14038075","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=speaktoraghav","name":"speaktoraghav","key":"speaktoraghav","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=speaktoraghav&avatarId=20376","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=speaktoraghav&avatarId=20376","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=speaktoraghav&avatarId=20376","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=speaktoraghav&avatarId=20376"},"displayName":"Raghavendra Nandagopal","active":true,"timeZone":"America/Los_Angeles"},"body":"After going through most of the configuration parameters (JAAS) and running through AutoTGT, the client configuration requires \"useTicketCache=true\" to be set.  With this config parameter client has to initially call kinit and have the user obtain ticket.  Next, once AutoTGT is called then it is renewing the ticket obtained through the ticket cache.  In this situation, the tgt.refresh() method doesn't fail and correctly does the renewal.\n \nWithout setting the parameter useTicketCache=true it is not possible to renew the ticket because the ticket obtained directly doesn't set the renewable flag due to which tgt.refresh() method is failing.\n \nFor example, below is the sample configuration.\nClient {\n       com.sun.security.auth.module.Krb5LoginModule required\n       useKeyTab=true\n       keyTab=\"/home/user/client.keytab\n       useTicketCache=true\n       principal=\"user/domain\";\n};\n\nPlease let me know if this correct or we need to take different approach.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=speaktoraghav","name":"speaktoraghav","key":"speaktoraghav","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=speaktoraghav&avatarId=20376","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=speaktoraghav&avatarId=20376","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=speaktoraghav&avatarId=20376","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=speaktoraghav&avatarId=20376"},"displayName":"Raghavendra Nandagopal","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-19T23:10:06.742+0000","updated":"2014-06-20T07:48:16.211+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720421/comment/14050299","id":"14050299","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"I am getting an error when I try to actually renew the ticket.\n\nI modified AutoTGT in the following way.\n\n{code}\ndiff --git a/storm-core/src/jvm/backtype/storm/security/auth/kerberos/AutoTGT.java b/storm-core/src/jvm/backtype/storm/security/auth/kerberos/AutoTGT.java\nindex 52bf540..a474e5d 100644\n--- a/storm-core/src/jvm/backtype/storm/security/auth/kerberos/AutoTGT.java\n+++ b/storm-core/src/jvm/backtype/storm/security/auth/kerberos/AutoTGT.java\n@@ -241,7 +241,7 @@ public class AutoTGT implements IAutoCredentials, ICredentialsRenewer {\n         if (tgt != null) {\n             long refreshTime = getRefreshTime(tgt);\n             long now = System.currentTimeMillis();\n-            if (now >= refreshTime) {\n+            //if (now >= refreshTime) {\n                 try {\n                     LOG.info(\"Renewing TGT for \"+tgt.getClient());\n                     tgt.refresh();\n@@ -249,19 +249,21 @@ public class AutoTGT implements IAutoCredentials, ICredentialsRenewer {\n                 } catch (RefreshFailedException e) {\n                     LOG.warn(\"Failed to refresh TGT\", e);\n                 }\n-            }\n+            //}\n         }\n     }\n \n     public static void main(String[] args) throws Exception {\n+        \n         AutoTGT at = new AutoTGT();\n         Map conf = new java.util.HashMap();\n         conf.put(\"java.security.auth.login.config\", args[0]);\n         at.prepare(conf);\n         Map<String,String> creds = new java.util.HashMap<String,String>();\n         at.populateCredentials(creds);\n-        Subject s = new Subject();\n-        at.populateSubject(s, creds);\n-        LOG.info(\"Got a Subject \"+s);\n+        at.renew(creds);\n+        //Subject s = new Subject();\n+        //at.populateSubject(s, creds);\n+        //LOG.info(\"Got a Subject \"+s);\n     }\n }\n{code}\n\nI then called it.\n\n{code}\njava -cp ./storm-core-0.9.2-incubating-security.jar:./storm/lib/\\* backtype.storm.security.auth.kerberos.AutoTGT  jaas.conf\n{code}\n\nThe contents of jaas.conf are\n{code}\nStormClient {\n   com.sun.security.auth.module.Krb5LoginModule required\n   doNotPrompt=false\n   useTicketCache=true\n   serviceName=\"storm\";\n};\n{code}\n\nI end up with the following error as part of the output.\n{code}\n294  [main] INFO  backtype.storm.security.auth.kerberos.AutoTGT - Pushing TGT for me@TEST.COM to topology.\n313  [main] INFO  backtype.storm.security.auth.kerberos.AutoTGT - Renewing TGT for me@TEST.COM\n452  [main] WARN  backtype.storm.security.auth.kerberos.AutoTGT - Failed to refresh TGT\njavax.security.auth.RefreshFailedException: Failed to renew Kerberos Ticket for client me@TEST.COM and server krbtgt/TEST.COM@TEST.COM - Message stream modified (41)\n        at javax.security.auth.kerberos.KerberosTicket.refresh(KerberosTicket.java:575) ~[na:1.7.0_17]\n        at backtype.storm.security.auth.kerberos.AutoTGT.renew(AutoTGT.java:247) [storm-core-0.9.2-incubating-security.jar:0.9.2-incubating-security]\n        at backtype.storm.security.auth.kerberos.AutoTGT.main(AutoTGT.java:264) [storm-core-0.9.2-incubating-security.jar:0.9.2-incubating-security]\nCaused by: sun.security.krb5.internal.KrbApErrException: Message stream modified (41)\n        at sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:80) ~[na:1.7.0_17]\n        at sun.security.krb5.KrbTgsRep.<init>(KrbTgsRep.java:88) ~[na:1.7.0_17]\n        at sun.security.krb5.KrbTgsReq.getReply(KrbTgsReq.java:192) ~[na:1.7.0_17]\n        at sun.security.krb5.KrbTgsReq.sendAndGetCreds(KrbTgsReq.java:203) ~[na:1.7.0_17]\n        at sun.security.krb5.Credentials.renew(Credentials.java:259) ~[na:1.7.0_17]\n        at javax.security.auth.kerberos.KerberosTicket.refresh(KerberosTicket.java:567) ~[na:1.7.0_17]\n        ... 2 common frames omitted\n{code}\n\nTurning on debug with -Dsun.security.krb5.debug=true is not that much better\n{code}\n>>>KinitOptions cache name is /tmp/krb5cc_38795\n>>>DEBUG <CCacheInputStream>  client principal is me@TEST.COM\n>>>DEBUG <CCacheInputStream> server principal is krbtgt/TEST.COM@TEST.COM\n>>>DEBUG <CCacheInputStream> key type: 18\n>>>DEBUG <CCacheInputStream> auth time: Wed Jul 02 16:19:06 UTC 2014\n>>>DEBUG <CCacheInputStream> start time: Wed Jul 02 16:19:02 UTC 2014\n>>>DEBUG <CCacheInputStream> end time: Thu Jul 03 02:19:06 UTC 2014\n>>>DEBUG <CCacheInputStream> renew_till time: Wed Jul 09 16:19:02 UTC 2014\n>>> CCacheInputStream: readFlags()  FORWARDABLE; RENEWABLE; INITIAL; PRE_AUTH;\nConfig name: /etc/krb5.conf\n297  [main] INFO  backtype.storm.security.auth.kerberos.AutoTGT - Pushing TGT for me@TEST.COM to topology.\n316  [main] INFO  backtype.storm.security.auth.kerberos.AutoTGT - Renewing TGT for me@TEST.COM\ndefault etypes for default_tgs_enctypes: 23 16 17 18.\n>>> CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\n>>> EType: sun.security.krb5.internal.crypto.Aes256CtsHmacSha1EType\n>>> KdcAccessibility: reset\n>>> KrbKdcReq send: kdc=kdc1.test.com. TCP:88, timeout=30000, number of retries =3, #bytes=1798\n>>> KDCCommunication: kdc=kdc1.test.com. TCP:88, timeout=30000,Attempt =1, #bytes=1798\n>>>DEBUG: TCPClient reading 1804 bytes\n>>> KrbKdcReq send: #bytes read=1804\n>>> KdcAccessibility: remove kdc1.test.com.:88\n>>> EType: sun.security.krb5.internal.crypto.Aes256CtsHmacSha1EType\n453  [main] WARN  backtype.storm.security.auth.kerberos.AutoTGT - Failed to refresh TGT\njavax.security.auth.RefreshFailedException: Failed to renew Kerberos Ticket for client me@TEST.COM and server krbtgt/TEST.COM@TEST.COM - Message stream modified (41)\n        at javax.security.auth.kerberos.KerberosTicket.refresh(KerberosTicket.java:575) ~[na:1.7.0_17]\n        at backtype.storm.security.auth.kerberos.AutoTGT.renew(AutoTGT.java:247) [storm-core-0.9.2-incubating-security.jar:0.9.2-incubating-security]\n        at backtype.storm.security.auth.kerberos.AutoTGT.main(AutoTGT.java:264) [storm-core-0.9.2-incubating-security.jar:0.9.2-incubating-security]\nCaused by: sun.security.krb5.internal.KrbApErrException: Message stream modified (41)\n        at sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:80) ~[na:1.7.0_17]\n        at sun.security.krb5.KrbTgsRep.<init>(KrbTgsRep.java:88) ~[na:1.7.0_17]\n        at sun.security.krb5.KrbTgsReq.getReply(KrbTgsReq.java:192) ~[na:1.7.0_17]\n        at sun.security.krb5.KrbTgsReq.sendAndGetCreds(KrbTgsReq.java:203) ~[na:1.7.0_17]\n        at sun.security.krb5.Credentials.renew(Credentials.java:259) ~[na:1.7.0_17]\n        at javax.security.auth.kerberos.KerberosTicket.refresh(KerberosTicket.java:567) ~[na:1.7.0_17]\n        ... 2 common frames omitted\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2014-07-02T16:37:13.722+0000","updated":"2014-07-02T16:37:13.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720421/comment/14050362","id":"14050362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2] can you try adding renewTGT=true in jaas.conf","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-02T17:23:46.789+0000","updated":"2014-07-02T17:23:46.789+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720421/comment/14054110","id":"14054110","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"I get the same error as before.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2014-07-07T19:49:51.997+0000","updated":"2014-07-07T19:49:51.997+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720421/comment/14055674","id":"14055674","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2] I was able to test it by using the following conf in kerberos\n{code}\n   ccache_type = 4\n   forwardable = true\n   proxiable = true\n   udp_preference_limit = 1\n   ticket_lifetime = 5m\n   renew_lifetime = 10m\n{code}\nand changing AutoTGT main to\n{code}\n public static void main(String[] args) throws Exception {\n        AutoTGT at = new AutoTGT();\n        Map conf = new java.util.HashMap();\n        conf.put(\"java.security.auth.login.config\", args[0]);\n        at.prepare(conf);\n        Map<String,String> creds = new java.util.HashMap<String,String>();\n        at.populateCredentials(creds);\n        Subject s = new Subject();\n        at.populateSubject(s, creds);\n        System.out.println(\"Got a Subject \"+s);\n        Thread.sleep(360000);\n        at.renew(creds);\n        System.out.println(\"Got a Subject \"+s);\n    }\n{code}\nand my jaas.conf\n{code}\nStormClient {\n   com.sun.security.auth.module.Krb5LoginModule required\n   useKeyTab=true\n   keyTab=\"/vagrant/keytabs/harsha.keytab\"\n   useTicketCache=true\n   renewTicket=true\n   serviceName=\"nimbus\"\n   debug=true\n   principal=\"harsha/zookeeper.witzend.com@WITZEND.COM\";\n};\n{code}\nI did kinit -k -t /vagrant/keytabs/harsha.keytab harsha/zookeeper.witzend.com@WITZEND.COM\nbefore running AutoTGT . I am able to renew ticket before and after ticket_lifetime .","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-08T23:37:25.517+0000","updated":"2014-07-08T23:39:35.712+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720421/comment/14056419","id":"14056419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"I hate the java implementation of kerberos.  Turns out that our krb5.conf had a setting in it that was forwardable = yes, not forwardable = true.  This was fine for the rest of kerberos, but mad java think it was not supposed to ask for a forwardable ticket.  So when it got back the renewed ticket from the KDC something didn't match and it got very angry.\n\nThanks for all of your help resolving this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2014-07-09T16:23:18.768+0000","updated":"2014-07-09T16:23:18.768+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-345/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1wmlb:"}}