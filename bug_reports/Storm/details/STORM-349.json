{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12720428","self":"https://issues.apache.org/jira/rest/api/2/issue/12720428","key":"STORM-349","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327123","id":"12327123","description":"security feature branch","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-11-05"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-07-30T16:59:58.143+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 22 16:08:22 UTC 2016","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_5960619392_*|*_5_*:*_1_*:*_0","customfield_12310420":"398627","customfield_12312321":null,"resolutiondate":"2014-08-18T19:23:18.601+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-349/watchers","watchCount":3,"isWatching":false},"created":"2014-06-10T19:39:39.253+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["security"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-01-22T16:08:22.104+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"The UI provides APIs to kill, rebalance, ... a topology.  For security we originally took the route to optionally disable these, but ideally the UI server would load an IAuthorizer instance like nimbus, and check if the user is allowed to perform that operation before doing it on behalf of the user.\n\nThis should be fairly straight forward but may require some glue code like is being used in the drpc server for its web interface.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"398752","customfield_12312823":null,"summary":"(Security) ui actions should have nimbus like authroization","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14079522","id":"14079522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2] I am working on this JIRA. To clarify we need a UI filter class that can authenticate users against to kerberos and let them login and show only the topologies that users are authorized for. Please let me know if there are any other requirements that I need to consider. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-30T16:59:58.143+0000","updated":"2014-07-30T16:59:58.143+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14085685","id":"14085685","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user harshach opened a pull request:\n\n    https://github.com/apache/incubator-storm/pull/215\n\n    STORM-349. (Security) ui actions should have nimbus like authroization.\n\n    Upgraded ring to 1.3.0.  Added IAuthorizer instance to UI daemon. Added\n    hadoop-auth as a dependency which allow users to configure\n    AuthenticationFilter.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/harshach/incubator-storm STORM-349-V2\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/incubator-storm/pull/215.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #215\n    \n----\ncommit 3208a8e3f39140227fe6be9c686b795a19777e64\nAuthor: Sriharsha Chintalapani <mail@harsha.io>\nDate:   2014-08-05T02:18:26Z\n\n    STORM-349. (Security) ui actions should have nimbus like authroization.\n    Upgraded ring to 1.3.0.  Added IAuthorizer instance to UI daemon. Added\n    hadoop-auth as a dependency which allow users to configure\n    AuthenticationFilter.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-05T02:22:15.837+0000","updated":"2014-08-05T02:22:15.837+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14086648","id":"14086648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#discussion_r15836462\n  \n    --- Diff: storm-core/pom.xml ---\n    @@ -197,6 +201,21 @@\n                 <scope>test</scope>\n             </dependency>\n             <dependency>\n    +\t  <groupId>org.apache.hadoop</groupId>\n    +\t  <artifactId>hadoop-auth</artifactId>\n    --- End diff --\n    \n    I'm not sure we want to pull this in directly to storm itself.  Storm already has a lot of dependencies and adding more seems to me like it could pollute the user classpath.  Looking at https://github.com/apache/hadoop-common/blob/trunk/hadoop-common-project/hadoop-auth/pom.xml it looks like this is going to add in javax.servlet:servlet-api, commons-codec:commons-codec, org.apache.directory.server:apacheds-kerberos-codec and org.apache.hadoop:hadoop-annotations to the classpath.  Possibly along with some oddness with two versions of Jetty.  org.mortbay.jetty:jetty and the org.eclipse.jetty:jetty that you added in above too. I am OK with adding in new dependencies, but I would like to understand better what really needs to be here and what does not.\n    \n    Ideally it would also be nice to separate out dependencies that are needed for worker processes from everything else.  But that is probably a separate JIRA.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-05T19:43:56.671+0000","updated":"2014-08-05T19:43:56.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14086651","id":"14086651","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#discussion_r15836803\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/helpers.clj ---\n    @@ -23,7 +23,8 @@\n       (:use [backtype.storm.util :only [clojurify-structure uuid defnk url-encode]])\n       (:use [clj-time coerce format])\n       (:import [backtype.storm.generated ExecutorInfo ExecutorSummary])\n    -  (:import [org.mortbay.jetty.security SslSocketConnector])\n    +  (:import [org.eclipse.jetty.server.ssl SslSocketConnector]\n    --- End diff --\n    \n    So can I assume then, that this also switched the version of jetty that we are using to 7.X from the 6.x line?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-05T19:48:17.197+0000","updated":"2014-08-05T19:48:17.197+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14086652","id":"14086652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#discussion_r15836939\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/core.clj ---\n    @@ -47,33 +52,19 @@\n          [~nimbus-sym (*STORM-CONF* NIMBUS-HOST) (*STORM-CONF* NIMBUS-THRIFT-PORT)]\n          ~@body))\n     \n    -(defn authorized-ui-user?\n    -  [user conf topology-conf]\n    -  (let [ui-users (concat (conf UI-USERS)\n    -                         (conf NIMBUS-ADMINS)\n    -                         (topology-conf UI-USERS)\n    -                         (topology-conf TOPOLOGY-USERS))]\n    -    (or (blank? (conf UI-FILTER))\n    -        (and (not (blank? user))\n    -          (some #(= % user) ui-users)))))\n    -\n    -(defn assert-authorized-ui-user\n    -  [user conf topology-conf]\n    -  (if (not (authorized-ui-user? user conf topology-conf))\n    -    ;;TODO need a better exception here so the UI can appear better\n    -    (throw (RuntimeException. (str \"User \" user \" is not authorized.\")))))\n    -\n    -(defn- ui-actions-enabled?\n    -  []\n    -  (= \"true\" (lower-case (*STORM-CONF* UI-ACTIONS-ENABLED))))\n    --- End diff --\n    \n    We should remove Config.UI_ACTIONS_ENABLED, or at least deprecate it.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-05T19:50:56.221+0000","updated":"2014-08-05T19:50:56.221+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14086661","id":"14086661","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#issuecomment-51250810\n  \n    Overall it looks good.  I think in the future we probably want to explore allowing the UI to pretend to be a different user to nimbus.  This would make the code a lot simpler, and would open up a number of other possibilities in the future.\n    \n    We could try to do this by modifying the SASL negotiation that happens when authenticating the connection, but I think it would be simpler to update the different Thrift operations to optionally include a doAs argument.  Then Nimbus would validate that the real user is authorized to perform operations on behalf of other users and update things accordingly.  Perhaps you could file a JIRA for this.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-05T19:58:33.632+0000","updated":"2014-08-05T19:58:33.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14086667","id":"14086667","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on a diff in the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#discussion_r15837693\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/helpers.clj ---\n    @@ -23,7 +23,8 @@\n       (:use [backtype.storm.util :only [clojurify-structure uuid defnk url-encode]])\n       (:use [clj-time coerce format])\n       (:import [backtype.storm.generated ExecutorInfo ExecutorSummary])\n    -  (:import [org.mortbay.jetty.security SslSocketConnector])\n    +  (:import [org.eclipse.jetty.server.ssl SslSocketConnector]\n    --- End diff --\n    \n    @revans2 Yes upgraded the ring to 1.3.0 which uses jetty-7\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-05T20:02:28.772+0000","updated":"2014-08-05T20:02:28.772+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14086673","id":"14086673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on a diff in the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#discussion_r15837836\n  \n    --- Diff: storm-core/pom.xml ---\n    @@ -197,6 +201,21 @@\n                 <scope>test</scope>\n             </dependency>\n             <dependency>\n    +\t  <groupId>org.apache.hadoop</groupId>\n    +\t  <artifactId>hadoop-auth</artifactId>\n    --- End diff --\n    \n    @revans2 I understand having that as dependency is going to be issue. But wanted to have kerberos based filter to be shipped with storm it will give users an easy access instead of putting hadoop-auth in the classpath to enable the filter. What you think about copying required code from hadoop-auth into storm. Mostly duplicating as there wasn't anything to chnage apart from probably cookie name.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-05T20:05:06.648+0000","updated":"2014-08-05T20:05:06.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14086676","id":"14086676","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#issuecomment-51251797\n  \n    @revans2 Thanks for the feedback. I'll file a jira for doAs.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-05T20:05:59.566+0000","updated":"2014-08-05T20:05:59.566+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14087806","id":"14087806","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#discussion_r15882654\n  \n    --- Diff: storm-core/pom.xml ---\n    @@ -197,6 +201,21 @@\n                 <scope>test</scope>\n             </dependency>\n             <dependency>\n    +\t  <groupId>org.apache.hadoop</groupId>\n    +\t  <artifactId>hadoop-auth</artifactId>\n    --- End diff --\n    \n    Like I said I am OK with adding in new dependencies, I would just like to better understand in full detail exactly what is being pulled in, and if we can leave any of it out through exclusions.  STORM-129 tracks isolating user and system dependencies which is where an ultimate solution really needs to come from.  For the time being I just want to keep unnecessary changes to a minimum.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-06T15:47:05.788+0000","updated":"2014-08-06T15:47:05.788+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14094135","id":"14094135","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on a diff in the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#discussion_r16118504\n  \n    --- Diff: storm-core/pom.xml ---\n    @@ -197,6 +201,21 @@\n                 <scope>test</scope>\n             </dependency>\n             <dependency>\n    +\t  <groupId>org.apache.hadoop</groupId>\n    +\t  <artifactId>hadoop-auth</artifactId>\n    --- End diff --\n    \n    @revans2 I pulled out of all the dependencies from hadoop-auth as most of them are already in storm-core/pom.xml or not needed. I noticed a bug when user doesn't have UI-Filter configured it will throw an exception as servlet-request doesn't contain any user related info which causes authorizer to fail. I'll update the PR. Thanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-12T15:04:04.796+0000","updated":"2014-08-12T15:04:04.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14097623","id":"14097623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#issuecomment-52241834\n  \n    @revans2  I excluded almost all of the dependencies from hadoop-auth and  removed Config.UI_ACTIONS_ENABLED. Please check and let me know if it looks good. Thanks\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-14T20:46:01.990+0000","updated":"2014-08-14T20:46:01.990+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14100871","id":"14100871","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#issuecomment-52522747\n  \n    Just to add more info what we are using from hadoop-auth is AuthenticationFilter and KerberosAuthenticationHandler. Apart from these excluded all the dependencies from hadoop-auth package.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-18T17:06:53.228+0000","updated":"2014-08-18T17:06:53.228+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14101126","id":"14101126","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/incubator-storm/pull/215#issuecomment-52541263\n  \n    Looks good.  I did a diff of the dependencies with what is currently on master and I saw both Jetty and ring change and hadoop-auth added in.\n    \n    I saw java.classpath-0.2.2.jar and tools.namespace-0.2.4.jar come in too, they seem to be coming with the ring update, so I think it is OK.  I am +1.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-18T19:21:17.254+0000","updated":"2014-08-18T19:21:17.254+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14101130","id":"14101130","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Thanks Harsha,\n\nI merged this into the security branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2014-08-18T19:23:18.636+0000","updated":"2014-08-18T19:23:18.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/14101132","id":"14101132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/incubator-storm/pull/215\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-18T19:23:31.796+0000","updated":"2014-08-18T19:23:31.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/15111334","id":"15111334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user jkaria commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/215#discussion_r50468175\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/core.clj ---\n    @@ -47,33 +52,19 @@\n          [~nimbus-sym (*STORM-CONF* NIMBUS-HOST) (*STORM-CONF* NIMBUS-THRIFT-PORT)]\n          ~@body))\n     \n    -(defn authorized-ui-user?\n    -  [user conf topology-conf]\n    -  (let [ui-users (concat (conf UI-USERS)\n    -                         (conf NIMBUS-ADMINS)\n    -                         (topology-conf UI-USERS)\n    -                         (topology-conf TOPOLOGY-USERS))]\n    -    (or (blank? (conf UI-FILTER))\n    -        (and (not (blank? user))\n    -          (some #(= % user) ui-users)))))\n    -\n    -(defn assert-authorized-ui-user\n    -  [user conf topology-conf]\n    -  (if (not (authorized-ui-user? user conf topology-conf))\n    -    ;;TODO need a better exception here so the UI can appear better\n    -    (throw (RuntimeException. (str \"User \" user \" is not authorized.\")))))\n    -\n    -(defn- ui-actions-enabled?\n    -  []\n    -  (= \"true\" (lower-case (*STORM-CONF* UI-ACTIONS-ENABLED))))\n    --- End diff --\n    \n    with this change shouldn't the config line for this in defaults.yaml removed?\n    \n    ui.actions.enabled: true\n    https://github.com/apache/storm/blob/master/conf/defaults.yaml#L87\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-01-21T21:36:12.376+0000","updated":"2016-01-21T21:36:12.376+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/15112583","id":"15112583","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/215#discussion_r50553677\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/core.clj ---\n    @@ -47,33 +52,19 @@\n          [~nimbus-sym (*STORM-CONF* NIMBUS-HOST) (*STORM-CONF* NIMBUS-THRIFT-PORT)]\n          ~@body))\n     \n    -(defn authorized-ui-user?\n    -  [user conf topology-conf]\n    -  (let [ui-users (concat (conf UI-USERS)\n    -                         (conf NIMBUS-ADMINS)\n    -                         (topology-conf UI-USERS)\n    -                         (topology-conf TOPOLOGY-USERS))]\n    -    (or (blank? (conf UI-FILTER))\n    -        (and (not (blank? user))\n    -          (some #(= % user) ui-users)))))\n    -\n    -(defn assert-authorized-ui-user\n    -  [user conf topology-conf]\n    -  (if (not (authorized-ui-user? user conf topology-conf))\n    -    ;;TODO need a better exception here so the UI can appear better\n    -    (throw (RuntimeException. (str \"User \" user \" is not authorized.\")))))\n    -\n    -(defn- ui-actions-enabled?\n    -  []\n    -  (= \"true\" (lower-case (*STORM-CONF* UI-ACTIONS-ENABLED))))\n    --- End diff --\n    \n    yes that was missed.  If you want to clean it up feel free to file a JIRA and do it.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-01-22T16:01:37.477+0000","updated":"2016-01-22T16:01:37.477+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720428/comment/15112591","id":"15112591","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user d2r commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/215#discussion_r50554555\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/core.clj ---\n    @@ -47,33 +52,19 @@\n          [~nimbus-sym (*STORM-CONF* NIMBUS-HOST) (*STORM-CONF* NIMBUS-THRIFT-PORT)]\n          ~@body))\n     \n    -(defn authorized-ui-user?\n    -  [user conf topology-conf]\n    -  (let [ui-users (concat (conf UI-USERS)\n    -                         (conf NIMBUS-ADMINS)\n    -                         (topology-conf UI-USERS)\n    -                         (topology-conf TOPOLOGY-USERS))]\n    -    (or (blank? (conf UI-FILTER))\n    -        (and (not (blank? user))\n    -          (some #(= % user) ui-users)))))\n    -\n    -(defn assert-authorized-ui-user\n    -  [user conf topology-conf]\n    -  (if (not (authorized-ui-user? user conf topology-conf))\n    -    ;;TODO need a better exception here so the UI can appear better\n    -    (throw (RuntimeException. (str \"User \" user \" is not authorized.\")))))\n    -\n    -(defn- ui-actions-enabled?\n    -  []\n    -  (= \"true\" (lower-case (*STORM-CONF* UI-ACTIONS-ENABLED))))\n    --- End diff --\n    \n    Agreed, good find.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-01-22T16:08:22.104+0000","updated":"2016-01-22T16:08:22.104+0000"}],"maxResults":19,"total":19,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-349/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1wmmv:"}}