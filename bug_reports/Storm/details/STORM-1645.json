{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12952388","self":"https://issues.apache.org/jira/rest/api/2/issue/12952388","key":"STORM-1645","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334140","id":"12334140","name":"0.10.1","archived":false,"released":true,"releaseDate":"2016-05-05"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-03-22T11:28:30.717+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Apr 26 16:46:38 UTC 2016","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1664126706_*|*_3_*:*_1_*:*_1382265027_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2016-04-26T16:46:37.956+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1645/watchers","watchCount":6,"isWatching":false},"created":"2016-03-22T10:33:26.284+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327123","id":"12327123","description":"security feature branch","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-11-05"}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishek.agarwal","name":"abhishek.agarwal","key":"abhishek.agarwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Agarwal","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-08-24T05:56:10.359+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"When you supply the commandline parameter for a custom Nimbus thrift port, the number value is interpreted as a Long, but internally used as an Integer. This leads to a ClassCastException.\n\nThis is executed (redacted):\n/opt/storm/apache-storm-0.10.0/bin/storm kill -w 10 -c nimbus.thrift.port=6627 -c nimbus.host=vm0009 #{topology}\"\n\nThis is the output:\n ** [out :: vm0009] 2627 [main] INFO  b.s.u.Utils - Using defaults.yaml from resources\n ** [out :: vm0009] 2795 [main] INFO  b.s.u.Utils - Using storm.yaml from resources\n ** [out :: vm0009] 4262 [main] INFO  b.s.u.Utils - Using defaults.yaml from resources\n ** [out :: vm0009] 4287 [main] INFO  b.s.u.Utils - Using storm.yaml from resources\n ** [out :: vm0009] 4328 [main] INFO  b.s.thrift - Connecting to Nimbus at vm0009:6627 as user:\n ** [out :: vm0009] 4328 [main] INFO  b.s.u.Utils - Using defaults.yaml from resources\n ** [out :: vm0009] 4348 [main] INFO  b.s.u.Utils - Using storm.yaml from resources\n ** [out :: vm0009] Exception in thread \"main\"\n ** [out :: vm0009] java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.Integer\n ** [out :: vm0009] \n ** [out :: vm0009] at backtype.storm.thrift$nimbus_client_and_conn.invoke(thrift.clj:75)\n ** [out :: vm0009] \n ** [out :: vm0009] at backtype.storm.thrift$nimbus_client_and_conn.invoke(thrift.clj:72)\n ** [out :: vm0009] \n ** [out :: vm0009] \n ** [out :: vm0009] at backtype.storm.command.kill_topology$_main.doInvoke(kill_topology.clj:26)\n ** [out :: vm0009] \n ** [out :: vm0009] at clojure.lang.RestFn.applyTo(RestFn.java:137)\n ** [out :: vm0009] \n ** [out :: vm0009] at backtype.storm.command.kill_topology.main(Unknown Source)\n ** [out :: vm0009]\n\nI have seen other related issues: https://issues.apache.org/jira/browse/STORM-1578\nI believe this is the same issue (internally using an Integer, but converting the input to a Long) in a different area.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"nimbus.thrift.port command line argument leads to java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.Integer","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Waatze+Goldewijk","name":"Waatze Goldewijk","key":"waatze goldewijk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Waatze Goldewijk","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Waatze+Goldewijk","name":"Waatze Goldewijk","key":"waatze goldewijk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Waatze Goldewijk","active":true,"timeZone":"Etc/UTC"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12952388/comment/15206201","id":"15206201","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishek.agarwal","name":"abhishek.agarwal","key":"abhishek.agarwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Agarwal","active":true,"timeZone":"Asia/Kolkata"},"body":"This problem exists only for the 0.10.x branch and it is a minor bug. So I am not completely sure if this needs to be fixed. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishek.agarwal","name":"abhishek.agarwal","key":"abhishek.agarwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Agarwal","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-03-22T11:28:30.717+0000","updated":"2016-03-22T11:28:30.717+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12952388/comment/15206570","id":"15206570","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aswen","name":"aswen","key":"aswen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Swen","active":true,"timeZone":"Europe/Amsterdam"},"body":"For us, running multiple storm nimbus instances on one server this is quite an annoying problem as we have to set three ports for the nimbus instances to listen on. So, we would be very happy if this bug gets solved. Thanks in advance for reconsidering this.\n\nBest regards,\nAlex","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aswen","name":"aswen","key":"aswen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Swen","active":true,"timeZone":"Europe/Amsterdam"},"created":"2016-03-22T15:35:40.524+0000","updated":"2016-03-22T15:35:40.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12952388/comment/15206644","id":"15206644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"[~aswen],\n\nIt should be a very simple fix.\n\nChange\n\nhttps://github.com/apache/storm/blob/v0.10.0/storm-core/src/clj/backtype/storm/thrift.clj#L76\n\nto be\n\n{code}\n nimbusClient (NimbusClient. conf host (int port) nil as-user)\n{code}\n\nI don't really have time to test this myself, but if you want to test it and create a pull request that would be great.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-03-22T16:02:14.635+0000","updated":"2016-03-22T16:02:14.635+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12952388/comment/15222774","id":"15222774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user abhishekagarwal87 opened a pull request:\n\n    https://github.com/apache/storm/pull/1301\n\n    STORM-1645: convert nimbus.thrift.port to int to avoid ClassCastException\n\n    Verified that it works\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/abhishekagarwal87/storm 0.10.x-branch\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1301.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1301\n    \n----\ncommit 5d9fede5d240645b1bd17835ed2cf7a4c6fad93b\nAuthor: Abhishek Agarwal <abhishek.agarwal@inmobi.com>\nDate:   2016-04-02T07:56:57Z\n\n    STORM-1645: convert nimbus.thrift.port to int to avoid ClassCastException\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-04-02T07:59:42.229+0000","updated":"2016-04-02T07:59:42.229+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12952388/comment/15236867","id":"15236867","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/1301#issuecomment-208800261\n  \n    +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-04-12T08:55:59.382+0000","updated":"2016-04-12T08:55:59.382+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12952388/comment/15239037","id":"15239037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on the pull request:\n\n    https://github.com/apache/storm/pull/1301#issuecomment-209359442\n  \n    @HeartSaVioR - can you merge this?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-04-13T10:31:24.737+0000","updated":"2016-04-13T10:31:24.737+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12952388/comment/15258413","id":"15258413","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/1301\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-04-26T16:46:04.591+0000","updated":"2016-04-26T16:46:04.591+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12952388/comment/15258418","id":"15258418","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"body":"Merged to 0.10.x-branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"created":"2016-04-26T16:46:38.011+0000","updated":"2016-04-26T16:46:38.011+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1645/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2v0n3:"}}