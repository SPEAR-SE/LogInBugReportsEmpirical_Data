{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12917906","self":"https://issues.apache.org/jira/rest/api/2/issue/12917906","key":"STORM-1363","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":13800,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335748","id":"12335748","name":"1.1.0","archived":false,"released":true,"releaseDate":"2017-03-29"}],"aggregatetimespent":13800,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-02-22T07:41:49.275+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Feb 23 00:38:33 UTC 2017","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_38621340367_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2017-02-22T07:41:49.143+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1363/watchers","watchCount":3,"isWatching":false},"created":"2015-12-03T07:32:48.940+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":0,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334140","id":"12334140","name":"0.10.1","archived":false,"released":true,"releaseDate":"2016-05-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12338104","id":"12338104","name":"1.x","archived":false,"released":false}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sachin","name":"Sachin","key":"sachin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sachin Pasalkar","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-07-11T01:49:12.889+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12331080","id":"12331080","name":"storm-kafka-client"}],"timeoriginalestimate":null,"description":"If you look at the updateState API of storm.kafka.trident.TridentKafkaState. When producer is sending data its not handling if the null value is sent by mapper.getMessageFromTuple(tuple). Results into Kafka topic gets value as \"null\" string. There might be case in particular kind of exception user do not want to replay tuple and just report it and with that he needs to return null.\n\nAlso make the members as protected as I need to copy-paste the class to provide my implementation.\n\nMy updateState API looks like this\n\n{code}\npublic void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n      String topic = null;\n\t\tfor (TridentTuple tuple : tuples) {\n\t\t\tif(tuple==null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tObject keyFromTuple = null;\n\t\t\ttry {\n\t\t\t\tkeyFromTuple = mapper.getKeyFromTuple(tuple);\n\t\t\t\ttopic = topicSelector.getTopic(tuple);\n\t\t\t\tObject messageFromTuple = mapper.getMessageFromTuple(tuple);\n\t\t\t\tif (topic != null && messageFromTuple != null) {\n\t\t\t\t\tproducer.send(new KeyedMessage(topic, keyFromTuple, messageFromTuple));\n\t\t\t\t} else {\n\t\t\t\t\tLOG.warn(\"skipping key = \" + keyFromTuple + \", topic selector returned null.\");\n\t\t\t\t}\n\t\t\t} catch (Exception ex) {\n\t\t\t\tString errorMsg = \"Could not send message with key = \" + keyFromTuple + \" to topic = \" + topic;\n\t\t\t\tLOG.warn(errorMsg, ex);\n\t\t\t\tthrow new FailedException(errorMsg, ex);\n\t\t\t}\n\t\t}\n\t}\n{code}","customfield_10010":null,"timetracking":{"remainingEstimate":"0h","timeSpent":"3h 50m","remainingEstimateSeconds":0,"timeSpentSeconds":13800},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":0,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"TridentKafkaState should handle null values from TridentTupleToKafkaMapper.getMessageFromTuple()","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sachin","name":"Sachin","key":"sachin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sachin Pasalkar","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sachin","name":"Sachin","key":"sachin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sachin Pasalkar","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":13800,"total":13800,"percent":100},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":13800,"total":13800,"percent":100},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/comment/15877689","id":"15877689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Thanks [~Sachin], merged into master and 1.x branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2017-02-22T07:41:49.275+0000","updated":"2017-02-22T07:41:49.275+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/comment/15879586","id":"15879586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Change fix version since Storm 1.1.0 RC vote canceled.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2017-02-23T00:38:33.895+0000","updated":"2017-02-23T00:38:33.895+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1363/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":28,"worklogs":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37101","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user pasalkarsachin1 opened a pull request:\n\n    https://github.com/apache/storm/pull/1939\n\n    STORM-1363: TridentKafkaState should handle null values from TridentTupleToKafkaMapper.getMessageFromTuple()\n\n    In case null value comes from the mapper it will print warning messages.\n    Added log to print the time taken to emit number of messages.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/pasalkarsachin1/storm STORM-1363\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1939.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1939\n    \n----\ncommit f78760c7ed94b14312d0eae1c7b5688c7eb4e96d\nAuthor: Sachin Pasalkar <sachin_pasalkar@symantec.com>\nDate:   2017-02-14T10:24:23Z\n\n    STORM-1363: TridentKafkaState should handle null values from TridentTupleToKafkaMapper.getMessageFromTuple()\n    \n    Incase null value comes from the mapper it will print warning messages also added the time take to emit number od messages in logs\n\n----\n","created":"2017-02-14T10:28:02.934+0000","updated":"2017-02-14T10:28:02.934+0000","started":"2017-02-14T10:28:02.927+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37101","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37120","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/1939\n  \n    @pasalkarsachin1 Could you preserve the style? I'm sorry we don't have clear style guide but most of changeset is from spaces.\n","created":"2017-02-15T03:44:56.429+0000","updated":"2017-02-15T03:44:56.429+0000","started":"2017-02-15T03:44:56.429+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37120","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37121","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user pasalkarsachin1 commented on the issue:\n\n    https://github.com/apache/storm/pull/1939\n  \n    I haven't changed anything it was I guess previous one had style. You can ignore white space by appending ?w=1 to url. e.g. https://github.com/apache/storm/pull/1939/files?w=1 This shows only updated code\n","created":"2017-02-15T03:51:06.293+0000","updated":"2017-02-15T03:51:06.293+0000","started":"2017-02-15T03:51:06.292+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37121","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37196","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/1939\n  \n    @pasalkarsachin1 \n    We don't use 8 spaces for indentation from other java files. If the indentation spaces was 4, it should be 4 unless we set brand new style guide. Code style is important as much as code change.\n","created":"2017-02-16T14:31:23.394+0000","updated":"2017-02-16T14:31:23.394+0000","started":"2017-02-16T14:31:23.392+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37196","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37199","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user pasalkarsachin1 commented on the issue:\n\n    https://github.com/apache/storm/pull/1939\n  \n    @HeartSaVioR  Done\n","created":"2017-02-16T14:45:26.844+0000","updated":"2017-02-16T14:45:26.844+0000","started":"2017-02-16T14:45:26.844+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37199","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37201","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/1939\n  \n    @pasalkarsachin1 \n    Indentation is still off. Could you please check the diff on PR?\n    https://github.com/apache/storm/pull/1939/files\n","created":"2017-02-16T14:56:02.403+0000","updated":"2017-02-16T14:56:02.403+0000","started":"2017-02-16T14:56:02.403+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37201","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user pasalkarsachin1 commented on the issue:\n\n    https://github.com/apache/storm/pull/1939\n  \n    @HeartSaVioR  I did my best. Can you take a look at it now\n","created":"2017-02-16T15:28:18.654+0000","updated":"2017-02-16T15:28:18.654+0000","started":"2017-02-16T15:28:18.653+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37203","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user pasalkarsachin1 commented on the issue:\n\n    https://github.com/apache/storm/pull/1939\n  \n    Can someone take a look at this?\n","created":"2017-02-17T05:25:41.890+0000","updated":"2017-02-17T05:25:41.890+0000","started":"2017-02-17T05:25:41.888+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37213","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user pasalkarsachin1 commented on the issue:\n\n    https://github.com/apache/storm/pull/1939\n  \n    @HeartSaVioR  Can you take a look at it\n","created":"2017-02-20T05:30:48.102+0000","updated":"2017-02-20T05:30:48.102+0000","started":"2017-02-20T05:30:48.101+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37337","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user roshannaik commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101950396\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -98,14 +107,19 @@ public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n                 }\n     \n                 if(exceptions.size() > 0){\n    -                String errorMsg = \"Could not retrieve result for messages \" + tuples + \" from topic = \" + topic \n    -                        + \" because of the following exceptions: \\n\";\n    -                for (ExecutionException exception : exceptions) {\n    -                    errorMsg = errorMsg + exception.getMessage() + \"\\n\";\n    -                }\n    -                LOG.error(errorMsg);\n    -                throw new FailedException(errorMsg);\n    -            }\n    +\t\tStringBuilder errorMsg = new StringBuilder(\"Could not retrieve result for messages \").append(tuples)\n    --- End diff --\n    \n    Java auto converts string concats to StringBuilder. There is no need for this. See discussion here for when is useful to use StringBuilder\n    http://stackoverflow.com/questions/11942368/why-use-stringbuilder-explicitly-if-the-compiler-converts-string-concatenation-t\n","created":"2017-02-20T05:41:14.717+0000","updated":"2017-02-20T05:41:14.717+0000","started":"2017-02-20T05:41:14.716+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37338","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37340","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user pasalkarsachin1 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101951192\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -98,14 +107,19 @@ public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n                 }\n     \n                 if(exceptions.size() > 0){\n    -                String errorMsg = \"Could not retrieve result for messages \" + tuples + \" from topic = \" + topic \n    -                        + \" because of the following exceptions: \\n\";\n    -                for (ExecutionException exception : exceptions) {\n    -                    errorMsg = errorMsg + exception.getMessage() + \"\\n\";\n    -                }\n    -                LOG.error(errorMsg);\n    -                throw new FailedException(errorMsg);\n    -            }\n    +\t\tStringBuilder errorMsg = new StringBuilder(\"Could not retrieve result for messages \").append(tuples)\n    --- End diff --\n    \n    If you read statement in stack overflow\n    \"However StringBuilder is useful if you are concatenating a large number of strings in a loop. It requires O(n2) time to run and creates many temporary strings.\"\n     \n    We also have same case. \n    ```java\n    for (ExecutionException exception : exceptions) {\n     \terrorMsg = errorMsg.append(exception.getMessage()).append(System.lineSeparator()); ;\n     }\n    ```\n    So rather than having String above loop & then recreate StringBuilder object & created it initially.\n    StringBuilder object \n","created":"2017-02-20T05:51:32.402+0000","updated":"2017-02-20T05:51:32.402+0000","started":"2017-02-20T05:51:32.402+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37340","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user roshannaik commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101951981\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -98,14 +107,19 @@ public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n                 }\n     \n                 if(exceptions.size() > 0){\n    -                String errorMsg = \"Could not retrieve result for messages \" + tuples + \" from topic = \" + topic \n    -                        + \" because of the following exceptions: \\n\";\n    -                for (ExecutionException exception : exceptions) {\n    -                    errorMsg = errorMsg + exception.getMessage() + \"\\n\";\n    -                }\n    -                LOG.error(errorMsg);\n    -                throw new FailedException(errorMsg);\n    -            }\n    +\t\tStringBuilder errorMsg = new StringBuilder(\"Could not retrieve result for messages \").append(tuples)\n    --- End diff --\n    \n    makes sense.\n","created":"2017-02-20T06:01:36.526+0000","updated":"2017-02-20T06:01:36.526+0000","started":"2017-02-20T06:01:36.526+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37342","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37354","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101976272\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -98,14 +107,19 @@ public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n                 }\n     \n                 if(exceptions.size() > 0){\n    -                String errorMsg = \"Could not retrieve result for messages \" + tuples + \" from topic = \" + topic \n    -                        + \" because of the following exceptions: \\n\";\n    -                for (ExecutionException exception : exceptions) {\n    -                    errorMsg = errorMsg + exception.getMessage() + \"\\n\";\n    -                }\n    -                LOG.error(errorMsg);\n    -                throw new FailedException(errorMsg);\n    -            }\n    +\t\tStringBuilder errorMsg = new StringBuilder(\"Could not retrieve result for messages \").append(tuples)\n    --- End diff --\n    \n    Personally I'd rather using StringBuilder to only concat exception messages. For me current implementation is better for readability, and compiler is able to care of this. \n    (Please note that those lines are not - and should not be - hot spot, since code block will be executed only when there're some exceptions.)\n","created":"2017-02-20T09:45:30.114+0000","updated":"2017-02-20T09:45:30.114+0000","started":"2017-02-20T09:45:30.112+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37354","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37355","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101977581\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -75,20 +75,29 @@ public void prepare(Properties options) {\n         public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n             String topic = null;\n             try {\n    -            List<Future<RecordMetadata>> futures = new ArrayList<>(tuples.size());\n    +            long currentTime=System.currentTimeMillis();\n    --- End diff --\n    \n    1. `startTime` would be better to represent its intention well\n    2. space between `e` and `=` and `=` and `S`\n","created":"2017-02-20T09:45:30.116+0000","updated":"2017-02-20T09:45:30.116+0000","started":"2017-02-20T09:45:30.115+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37355","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101973797\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -98,14 +107,19 @@ public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n                 }\n     \n                 if(exceptions.size() > 0){\n    -                String errorMsg = \"Could not retrieve result for messages \" + tuples + \" from topic = \" + topic \n    -                        + \" because of the following exceptions: \\n\";\n    -                for (ExecutionException exception : exceptions) {\n    -                    errorMsg = errorMsg + exception.getMessage() + \"\\n\";\n    -                }\n    -                LOG.error(errorMsg);\n    -                throw new FailedException(errorMsg);\n    -            }\n    +\t\tStringBuilder errorMsg = new StringBuilder(\"Could not retrieve result for messages \").append(tuples)\n    +\t\t\t.append(\" from topic = \").append(topic).append(\" because of the following exceptions: \").append(System.lineSeparator());\n    +\t\t\t\t\n    +\t\tfor (ExecutionException exception : exceptions) {\n    +\t\t\terrorMsg = errorMsg.append(exception.getMessage()).append(System.lineSeparator()); ;\n    +\t\t}\n    +\t\tString message = errorMsg.toString();\n    +\t\tLOG.error(message);\n    +\t\tthrow new FailedException(message);\n    +\t    }\n    +\t    long latestTime=System.currentTimeMillis();\n    --- End diff --\n    \n    Code style is not consistent even your changes. spaces before and after '='.\n","created":"2017-02-20T09:45:30.119+0000","updated":"2017-02-20T09:45:30.119+0000","started":"2017-02-20T09:45:30.119+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37356","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37357","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101974017\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -98,14 +107,19 @@ public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n                 }\n     \n                 if(exceptions.size() > 0){\n    -                String errorMsg = \"Could not retrieve result for messages \" + tuples + \" from topic = \" + topic \n    -                        + \" because of the following exceptions: \\n\";\n    -                for (ExecutionException exception : exceptions) {\n    -                    errorMsg = errorMsg + exception.getMessage() + \"\\n\";\n    -                }\n    -                LOG.error(errorMsg);\n    -                throw new FailedException(errorMsg);\n    -            }\n    +\t\tStringBuilder errorMsg = new StringBuilder(\"Could not retrieve result for messages \").append(tuples)\n    +\t\t\t.append(\" from topic = \").append(topic).append(\" because of the following exceptions: \").append(System.lineSeparator());\n    +\t\t\t\t\n    +\t\tfor (ExecutionException exception : exceptions) {\n    +\t\t\terrorMsg = errorMsg.append(exception.getMessage()).append(System.lineSeparator()); ;\n    +\t\t}\n    +\t\tString message = errorMsg.toString();\n    +\t\tLOG.error(message);\n    +\t\tthrow new FailedException(message);\n    +\t    }\n    +\t    long latestTime=System.currentTimeMillis();\n    +\t    LOG.info(\"Emitted record {} sucessfully in {} ms to topic {} \", new Object[]{emittedRecords,latestTime-currentTime,topic});\n    --- End diff --\n    \n    I think it receives varargs, so no necessary to group into `Object []` explicitly.\n","created":"2017-02-20T09:45:30.148+0000","updated":"2017-02-20T09:45:30.148+0000","started":"2017-02-20T09:45:30.148+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37357","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37358","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101976534\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -75,20 +75,29 @@ public void prepare(Properties options) {\n         public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n             String topic = null;\n             try {\n    -            List<Future<RecordMetadata>> futures = new ArrayList<>(tuples.size());\n    +            long currentTime=System.currentTimeMillis();\n    +\t     int numberOfRecords = tuples.size();\n    +\t     List<Future<RecordMetadata>> futures = new ArrayList<>(numberOfRecords);\n                 for (TridentTuple tuple : tuples) {\n                     topic = topicSelector.getTopic(tuple);\n    -\n    +                Object messageFromTuple = mapper.getMessageFromTuple(tuple);\n    +\t\t Object keyFromTuple = mapper.getKeyFromTuple(tuple);\n    +\t\t\t\t\n                     if(topic != null) {\n    -                    Future<RecordMetadata> result = producer.send(new ProducerRecord(topic,\n    -                            mapper.getKeyFromTuple(tuple), mapper.getMessageFromTuple(tuple)));\n    -                    futures.add(result);\n    +                   if(messageFromTuple!=null){\n    --- End diff --\n    \n    space between ')' and '{', and left side of '!=' and right side of '!='. may be better to add space between 'f' and '('.\n","created":"2017-02-20T09:45:30.151+0000","updated":"2017-02-20T09:45:30.151+0000","started":"2017-02-20T09:45:30.151+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37358","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37359","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101978059\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -98,14 +107,19 @@ public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n                 }\n     \n                 if(exceptions.size() > 0){\n    -                String errorMsg = \"Could not retrieve result for messages \" + tuples + \" from topic = \" + topic \n    -                        + \" because of the following exceptions: \\n\";\n    -                for (ExecutionException exception : exceptions) {\n    -                    errorMsg = errorMsg + exception.getMessage() + \"\\n\";\n    -                }\n    -                LOG.error(errorMsg);\n    -                throw new FailedException(errorMsg);\n    -            }\n    +\t\tStringBuilder errorMsg = new StringBuilder(\"Could not retrieve result for messages \").append(tuples)\n    +\t\t\t.append(\" from topic = \").append(topic).append(\" because of the following exceptions: \").append(System.lineSeparator());\n    +\t\t\t\t\n    +\t\tfor (ExecutionException exception : exceptions) {\n    +\t\t\terrorMsg = errorMsg.append(exception.getMessage()).append(System.lineSeparator()); ;\n    +\t\t}\n    +\t\tString message = errorMsg.toString();\n    +\t\tLOG.error(message);\n    +\t\tthrow new FailedException(message);\n    +\t    }\n    +\t    long latestTime=System.currentTimeMillis();\n    +\t    LOG.info(\"Emitted record {} sucessfully in {} ms to topic {} \", new Object[]{emittedRecords,latestTime-currentTime,topic});\n    --- End diff --\n    \n    Please keep log simple for INFO, since it will be called for every updates. Just leaving record count is enough.\n    If you really want to leave these records, this should be DEBUG.\n","created":"2017-02-20T09:45:30.158+0000","updated":"2017-02-20T09:45:30.158+0000","started":"2017-02-20T09:45:30.157+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37359","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37360","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101977245\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -75,20 +75,29 @@ public void prepare(Properties options) {\n         public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n             String topic = null;\n             try {\n    -            List<Future<RecordMetadata>> futures = new ArrayList<>(tuples.size());\n    +            long currentTime=System.currentTimeMillis();\n    +\t     int numberOfRecords = tuples.size();\n    +\t     List<Future<RecordMetadata>> futures = new ArrayList<>(numberOfRecords);\n                 for (TridentTuple tuple : tuples) {\n                     topic = topicSelector.getTopic(tuple);\n    -\n    +                Object messageFromTuple = mapper.getMessageFromTuple(tuple);\n    +\t\t Object keyFromTuple = mapper.getKeyFromTuple(tuple);\n    +\t\t\t\t\n                     if(topic != null) {\n    -                    Future<RecordMetadata> result = producer.send(new ProducerRecord(topic,\n    -                            mapper.getKeyFromTuple(tuple), mapper.getMessageFromTuple(tuple)));\n    -                    futures.add(result);\n    +                   if(messageFromTuple!=null){\n    +\t\t      Future<RecordMetadata> result = producer.send(new ProducerRecord(topic,keyFromTuple, messageFromTuple));\n    +\t\t      futures.add(result);\n    +\t\t   } else {\n    +\t\t      LOG.warn(\"skipping Message with Key \"+keyFromTuple+\" as message was null\");\n    --- End diff --\n    \n    spaces between `\"` and `+` / and `+` and `\"`\n","created":"2017-02-20T09:45:30.160+0000","updated":"2017-02-20T09:45:30.160+0000","started":"2017-02-20T09:45:30.160+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37360","issueId":"12917906"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917906/worklog/37361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user pasalkarsachin1 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1939#discussion_r101993619\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/trident/TridentKafkaState.java ---\n    @@ -98,14 +107,19 @@ public void updateState(List<TridentTuple> tuples, TridentCollector collector) {\n                 }\n     \n                 if(exceptions.size() > 0){\n    -                String errorMsg = \"Could not retrieve result for messages \" + tuples + \" from topic = \" + topic \n    -                        + \" because of the following exceptions: \\n\";\n    -                for (ExecutionException exception : exceptions) {\n    -                    errorMsg = errorMsg + exception.getMessage() + \"\\n\";\n    -                }\n    -                LOG.error(errorMsg);\n    -                throw new FailedException(errorMsg);\n    -            }\n    +\t\tStringBuilder errorMsg = new StringBuilder(\"Could not retrieve result for messages \").append(tuples)\n    +\t\t\t.append(\" from topic = \").append(topic).append(\" because of the following exceptions: \").append(System.lineSeparator());\n    +\t\t\t\t\n    +\t\tfor (ExecutionException exception : exceptions) {\n    +\t\t\terrorMsg = errorMsg.append(exception.getMessage()).append(System.lineSeparator()); ;\n    +\t\t}\n    +\t\tString message = errorMsg.toString();\n    +\t\tLOG.error(message);\n    +\t\tthrow new FailedException(message);\n    +\t    }\n    +\t    long latestTime=System.currentTimeMillis();\n    +\t    LOG.info(\"Emitted record {} sucessfully in {} ms to topic {} \", new Object[]{emittedRecords,latestTime-currentTime,topic});\n    --- End diff --\n    \n    In our production currently there is no way you get information of how many records are getting pushed from logs. This log has turned out to provide at least so information on records pushed to Kafka in what time. This also helps who took time whether Kafka was slow in responding or we have large chunk of messages sent to Kafka\n","created":"2017-02-20T11:06:08.083+0000","updated":"2017-02-20T11:06:08.083+0000","started":"2017-02-20T11:06:08.081+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"37361","issueId":"12917906"}]},"customfield_12311820":"0|i2p88n:"}}