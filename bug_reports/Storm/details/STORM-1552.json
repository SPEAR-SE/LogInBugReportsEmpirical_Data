{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12939295","self":"https://issues.apache.org/jira/rest/api/2/issue/12939295","key":"STORM-1552","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329843","id":"12329843","name":"1.0.0","archived":false,"released":true,"releaseDate":"2016-04-12"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-02-15T15:17:13.136+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Mar 02 17:27:55 UTC 2016","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_901685899_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2016-02-26T01:36:22.771+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1552/watchers","watchCount":3,"isWatching":false},"created":"2016-02-15T15:08:16.928+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329843","id":"12329843","name":"1.0.0","archived":false,"released":true,"releaseDate":"2016-04-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arunmahadevan","name":"arunmahadevan","key":"arunmahadevan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Mahadevan","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-03-02T17:27:55.584+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Run a topology and enable event inspection by clicking \"Debug\" from UI. The events are logged under \"storm-local/workers-artifacts/{storm-id}/port/events.log\". In the spout/bolt details page, the \"events\" link does not display the log file.\n\nThe events.log should be kept under logs/workers-artifacts/{storm-id}/{port}/events.log so that its viewable via logviewer.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Fix topology event sampling log directory ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arunmahadevan","name":"arunmahadevan","key":"arunmahadevan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Mahadevan","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arunmahadevan","name":"arunmahadevan","key":"arunmahadevan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Mahadevan","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15147459","id":"15147459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user arunmahadevan opened a pull request:\n\n    https://github.com/apache/storm/pull/1109\n\n    [STORM-1552] Fix topology event sampling log dir\n\n    Currently the events are logged under \"storm-local/workers-artifacts/{storm-id}/{port}/events.log\".\n    and the \"events\" link in UI does not display the log file.\n    \n    The events.log should be kept under \"logs/workers-artifacts/{storm-id}/{port}/events.log\"\n    so that its viewable via logviewer.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/arunmahadevan/storm STORM-1552\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1109.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1109\n    \n----\ncommit 8fe36ae26243c89b62e95f950bfc5b901384cb50\nAuthor: Arun Mahadevan <aiyer@hortonworks.com>\nDate:   2016-02-15T15:11:03Z\n\n    [STORM-1552] Fix topology event sampling log dir\n    \n    Currently the events are logged under \"storm-local/workers-artifacts/{storm-id}/{port}/events.log\".\n    and the \"events\" link in UI does not display the log file.\n    \n    The events.log should be kept under \"logs/workers-artifacts/{storm-id}/{port}/events.log\"\n    so that its viewable via logviewer.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-15T15:17:13.136+0000","updated":"2016-02-15T15:17:13.136+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15147686","id":"15147686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1109#discussion_r52931701\n  \n    --- Diff: storm-core/src/jvm/org/apache/storm/metric/FileBasedEventLogger.java ---\n    @@ -76,33 +77,35 @@ public void run() {\n             scheduler.scheduleAtFixedRate(task, FLUSH_INTERVAL_MILLIS, FLUSH_INTERVAL_MILLIS, TimeUnit.MILLISECONDS);\n         }\n     \n    +    private String getLogDir(Map stormConf) {\n    +        String logDir;\n    +        if ((logDir = System.getProperty(\"storm.log.dir\")) == null\n    +                && (logDir = (String) stormConf.get(\"storm.log.dir\")) == null) {\n    +            logDir = Paths.get(System.getProperty(\"storm.home\"), \"logs\").toString();\n    +        }\n    +        return logDir;\n    +    }\n     \n         @Override\n         public void prepare(Map stormConf, TopologyContext context) {\n    -        String logDir; // storm local directory\n    +        String workersArtifactDir; // workers artifact directory\n             String stormId = context.getStormId();\n             int port = context.getThisWorkerPort();\n    -        if ((logDir = System.getProperty(\"storm.local.dir\")) == null &&\n    -                (logDir = (String)stormConf.get(\"storm.local.dir\")) == null) {\n    -            String msg = \"Could not determine the directory to log events.\";\n    -            LOG.error(msg);\n    -            throw new RuntimeException(msg);\n    -        } else {\n    -            LOG.info(\"FileBasedEventLogger log directory {}.\", logDir);\n    +        if ((workersArtifactDir = (String) stormConf.get(Config.STORM_WORKERS_ARTIFACTS_DIR)) == null) {\n    +            workersArtifactDir = \"workers-artifacts\";\n             }\n    -\n             /*\n              * Include the topology name & worker port in the file name so that\n              * multiple event loggers can log independently.\n              */\n    -        Path path = Paths.get(logDir, \"workers-artifacts\", stormId, Integer.toString(port), \"events.log\");\n    +        Path path = Paths.get(workersArtifactDir, stormId, Integer.toString(port), \"events.log\");\n             if (!path.isAbsolute()) {\n    -            path = Paths.get(System.getProperty(\"storm.home\"), logDir, \"workers-artifacts\",\n    -                    stormId, Integer.toString(port), \"events.log\");\n    +            path = Paths.get(getLogDir(stormConf), workersArtifactDir,\n    --- End diff --\n    \n    This is very similar to https://github.com/apache/storm/blob/master/storm-core/src/jvm/org/apache/storm/utils/ConfigUtils.java#L407\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-15T18:39:56.376+0000","updated":"2016-02-15T18:39:56.376+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15147689","id":"15147689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1109#discussion_r52931753\n  \n    --- Diff: storm-core/src/jvm/org/apache/storm/metric/FileBasedEventLogger.java ---\n    @@ -76,33 +77,35 @@ public void run() {\n             scheduler.scheduleAtFixedRate(task, FLUSH_INTERVAL_MILLIS, FLUSH_INTERVAL_MILLIS, TimeUnit.MILLISECONDS);\n         }\n     \n    +    private String getLogDir(Map stormConf) {\n    --- End diff --\n    \n    This function is already present in ConfigUtils.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-15T18:40:27.502+0000","updated":"2016-02-15T18:40:27.502+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15147698","id":"15147698","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arunmahadevan commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1109#discussion_r52932760\n  \n    --- Diff: storm-core/src/jvm/org/apache/storm/metric/FileBasedEventLogger.java ---\n    @@ -76,33 +77,35 @@ public void run() {\n             scheduler.scheduleAtFixedRate(task, FLUSH_INTERVAL_MILLIS, FLUSH_INTERVAL_MILLIS, TimeUnit.MILLISECONDS);\n         }\n     \n    +    private String getLogDir(Map stormConf) {\n    +        String logDir;\n    +        if ((logDir = System.getProperty(\"storm.log.dir\")) == null\n    +                && (logDir = (String) stormConf.get(\"storm.log.dir\")) == null) {\n    +            logDir = Paths.get(System.getProperty(\"storm.home\"), \"logs\").toString();\n    +        }\n    +        return logDir;\n    +    }\n     \n         @Override\n         public void prepare(Map stormConf, TopologyContext context) {\n    -        String logDir; // storm local directory\n    +        String workersArtifactDir; // workers artifact directory\n             String stormId = context.getStormId();\n             int port = context.getThisWorkerPort();\n    -        if ((logDir = System.getProperty(\"storm.local.dir\")) == null &&\n    -                (logDir = (String)stormConf.get(\"storm.local.dir\")) == null) {\n    -            String msg = \"Could not determine the directory to log events.\";\n    -            LOG.error(msg);\n    -            throw new RuntimeException(msg);\n    -        } else {\n    -            LOG.info(\"FileBasedEventLogger log directory {}.\", logDir);\n    +        if ((workersArtifactDir = (String) stormConf.get(Config.STORM_WORKERS_ARTIFACTS_DIR)) == null) {\n    +            workersArtifactDir = \"workers-artifacts\";\n             }\n    -\n             /*\n              * Include the topology name & worker port in the file name so that\n              * multiple event loggers can log independently.\n              */\n    -        Path path = Paths.get(logDir, \"workers-artifacts\", stormId, Integer.toString(port), \"events.log\");\n    +        Path path = Paths.get(workersArtifactDir, stormId, Integer.toString(port), \"events.log\");\n             if (!path.isAbsolute()) {\n    -            path = Paths.get(System.getProperty(\"storm.home\"), logDir, \"workers-artifacts\",\n    -                    stormId, Integer.toString(port), \"events.log\");\n    +            path = Paths.get(getLogDir(stormConf), workersArtifactDir,\n    --- End diff --\n    \n    ConfigUtils.java is not available in 1.x-branch. I wanted the fix to be applied to both 1.x and master so took 1.x as the base and submitted the PR. Someone can let me know in such cases one need to raise two separate PRs with different code to fix the same issue.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-15T18:53:45.733+0000","updated":"2016-02-15T18:53:45.733+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15149946","id":"15149946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arunmahadevan commented on the pull request:\n\n    https://github.com/apache/storm/pull/1109#issuecomment-185040071\n  \n    @ptgoetz can you take a look at this?. Figured out that the event log link is broken while testing STORM-1540. This also needs to go into 1.x branch.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-17T05:52:40.356+0000","updated":"2016-02-17T05:52:40.356+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15150056","id":"15150056","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1109#discussion_r53129789\n  \n    --- Diff: storm-core/src/jvm/org/apache/storm/metric/FileBasedEventLogger.java ---\n    @@ -76,33 +77,35 @@ public void run() {\n             scheduler.scheduleAtFixedRate(task, FLUSH_INTERVAL_MILLIS, FLUSH_INTERVAL_MILLIS, TimeUnit.MILLISECONDS);\n         }\n     \n    +    private String getLogDir(Map stormConf) {\n    +        String logDir;\n    +        if ((logDir = System.getProperty(\"storm.log.dir\")) == null\n    +                && (logDir = (String) stormConf.get(\"storm.log.dir\")) == null) {\n    +            logDir = Paths.get(System.getProperty(\"storm.home\"), \"logs\").toString();\n    +        }\n    +        return logDir;\n    +    }\n     \n         @Override\n         public void prepare(Map stormConf, TopologyContext context) {\n    -        String logDir; // storm local directory\n    +        String workersArtifactDir; // workers artifact directory\n             String stormId = context.getStormId();\n             int port = context.getThisWorkerPort();\n    -        if ((logDir = System.getProperty(\"storm.local.dir\")) == null &&\n    -                (logDir = (String)stormConf.get(\"storm.local.dir\")) == null) {\n    -            String msg = \"Could not determine the directory to log events.\";\n    -            LOG.error(msg);\n    -            throw new RuntimeException(msg);\n    -        } else {\n    -            LOG.info(\"FileBasedEventLogger log directory {}.\", logDir);\n    +        if ((workersArtifactDir = (String) stormConf.get(Config.STORM_WORKERS_ARTIFACTS_DIR)) == null) {\n    +            workersArtifactDir = \"workers-artifacts\";\n             }\n    -\n             /*\n              * Include the topology name & worker port in the file name so that\n              * multiple event loggers can log independently.\n              */\n    -        Path path = Paths.get(logDir, \"workers-artifacts\", stormId, Integer.toString(port), \"events.log\");\n    +        Path path = Paths.get(workersArtifactDir, stormId, Integer.toString(port), \"events.log\");\n             if (!path.isAbsolute()) {\n    -            path = Paths.get(System.getProperty(\"storm.home\"), logDir, \"workers-artifacts\",\n    -                    stormId, Integer.toString(port), \"events.log\");\n    +            path = Paths.get(getLogDir(stormConf), workersArtifactDir,\n    --- End diff --\n    \n    I would be fine with different code. But if it is decided to keep the code same, please add a to-do here. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-17T07:46:51.552+0000","updated":"2016-02-17T07:46:51.552+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15153814","id":"15153814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arunmahadevan commented on the pull request:\n\n    https://github.com/apache/storm/pull/1109#issuecomment-186091223\n  \n    https://github.com/apache/storm/pull/1123 addresses the issue for master branch and make use of Configutils. I will close this and raise it against 1.x-branch.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-19T06:59:30.829+0000","updated":"2016-02-19T06:59:30.829+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15153815","id":"15153815","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arunmahadevan closed the pull request at:\n\n    https://github.com/apache/storm/pull/1109\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-19T06:59:31.171+0000","updated":"2016-02-19T06:59:31.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15153829","id":"15153829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user arunmahadevan opened a pull request:\n\n    https://github.com/apache/storm/pull/1127\n\n    [STORM-1552] Fix topology event sampling log dir\n\n    Currently the events are logged under \"storm-local/workers-artifacts/{storm-id}/{port}/events.log\".\n    and the \"events\" link in UI does not display the log file.\n    \n    The events.log should be kept under \"logs/workers-artifacts/{storm-id}/{port}/events.log\"\n    so that its viewable via logviewer.\n    \n    This fix is for 1.x-branch. For master this would be addressed by https://github.com/apache/storm/pull/1123\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/arunmahadevan/storm STORM-1552-1.x\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1127.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1127\n    \n----\ncommit 0f949682968fc98ec70b610a5652aed85e7080c7\nAuthor: Arun Mahadevan <aiyer@hortonworks.com>\nDate:   2016-02-15T15:11:03Z\n\n    [STORM-1552] Fix topology event sampling log dir\n    \n    Currently the events are logged under \"storm-local/workers-artifacts/{storm-id}/{port}/events.log\".\n    and the \"events\" link in UI does not display the log file.\n    \n    The events.log should be kept under \"logs/workers-artifacts/{storm-id}/{port}/events.log\"\n    so that its viewable via logviewer.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-19T07:06:57.157+0000","updated":"2016-02-19T07:06:57.157+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15153830","id":"15153830","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arunmahadevan commented on the pull request:\n\n    https://github.com/apache/storm/pull/1127#issuecomment-186096220\n  \n    @ptgoetz can you take a look ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-19T07:07:39.468+0000","updated":"2016-02-19T07:07:39.468+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15154720","id":"15154720","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1127#discussion_r53505936\n  \n    --- Diff: storm-core/src/jvm/org/apache/storm/metric/FileBasedEventLogger.java ---\n    @@ -45,7 +46,7 @@\n     \n         private void initLogWriter(Path logFilePath) {\n             try {\n    -            LOG.info(\"logFilePath {}\", logFilePath);\n    +            LOG.info(\"FileBasedEventLogger log path {}\", logFilePath);\n    --- End diff --\n    \n    Minor nit: we probably don't need the classname repeated here, since it is part of the Logger configuration.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-19T19:29:12.445+0000","updated":"2016-02-19T19:29:12.445+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15154722","id":"15154722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on the pull request:\n\n    https://github.com/apache/storm/pull/1127#issuecomment-186369719\n  \n    +1 one very minor comment\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-19T19:30:28.215+0000","updated":"2016-02-19T19:30:28.215+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15154985","id":"15154985","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ppoulosk commented on the pull request:\n\n    https://github.com/apache/storm/pull/1127#issuecomment-186431996\n  \n    +1, NB\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-19T22:17:04.979+0000","updated":"2016-02-19T22:17:04.979+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15155422","id":"15155422","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arunmahadevan commented on the pull request:\n\n    https://github.com/apache/storm/pull/1127#issuecomment-186520455\n  \n    @ptgoetz updated log message.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-20T06:32:00.305+0000","updated":"2016-02-20T06:32:00.305+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15155863","id":"15155863","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/1127#issuecomment-186726874\n  \n    @arunmahadevan when I run unit tests with the patch its leaving storm-core/null dir with worker logs. Can you check that\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-21T02:50:50.573+0000","updated":"2016-02-21T02:50:50.573+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15156155","id":"15156155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arunmahadevan commented on the pull request:\n\n    https://github.com/apache/storm/pull/1127#issuecomment-186883739\n  \n    @harshach `storm.home` is not set during unit tests so the logs were created under wrong directory. Commit https://github.com/apache/storm/commit/f3baed0d4bb9c415657dfa97f33519994e991e17 fixes it. Please take a look.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-21T18:44:21.383+0000","updated":"2016-02-21T18:44:21.383+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15159630","id":"15159630","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/1127#issuecomment-187899371\n  \n    +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-23T20:53:58.276+0000","updated":"2016-02-23T20:53:58.276+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15159631","id":"15159631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/1127\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-23T20:54:12.440+0000","updated":"2016-02-23T20:54:12.440+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15168252","id":"15168252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"It's also resolved by STORM-1545 for master branch.\nThanks [~arunmahadevan].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2016-02-26T01:36:22.807+0000","updated":"2016-02-26T01:36:22.807+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15168862","id":"15168862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user unsleepy22 opened a pull request:\n\n    https://github.com/apache/storm/pull/1155\n\n    [Storm-1579] Fix NoSuchFileException when running tests in storm-core\n\n    The old code takes \"storm.local.dir\" property as logDir while changes in STORM-1552 used `ConfigUtils.getLogDir`, which doesn't take this property, causing the ultimate event log directory to be \"/logs/xxxx\" and resulting in NoSuchFileException.\n    \n    Note that the only effective change is in `getLogDir` method, I just formatted the whole class.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/unsleepy22/storm STORM-1579\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1155.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1155\n    \n----\ncommit afd2d525be396c6f430e6a4a13cd1f237496a473\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-24T13:06:25Z\n\n    port backtype.storm.stats to java\n\ncommit 52d3b587f07db7dcf66b774531e2face7247c7b6\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-24T13:12:53Z\n\n    add translated java files\n\ncommit f61ea0c0196da4f31126f3f96ffb2bf5551a01d2\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-25T02:59:42Z\n\n    move update tuple stat/renderStats methods to corresponding ExecutorStat classes\n\ncommit 67a5878e5f37ccd317c10ef8dcbd56b9de233997\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-25T05:10:07Z\n\n    Merge https://github.com/apache/storm\n    \n    Conflicts:\n    \tstorm-core/src/clj/org/apache/storm/converter.clj\n    \tstorm-core/src/clj/org/apache/storm/daemon/executor.clj\n    \tstorm-core/src/clj/org/apache/storm/daemon/nimbus.clj\n    \tstorm-core/src/clj/org/apache/storm/stats.clj\n    \tstorm-core/src/clj/org/apache/storm/ui/core.clj\n    \tstorm-core/test/clj/org/apache/storm/nimbus_test.clj\n\ncommit 880134881566427e886b01d44890d22db483f6bd\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-25T05:11:50Z\n\n    merge conflicts from master\n\ncommit e5564c0f888e40af2726a645d24cfad0aaeed26a\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-25T07:06:59Z\n\n    added last-error to stats\n\ncommit 3fc80c4b0bfc83d2534fab160c72894af044dbc3\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-25T07:25:58Z\n\n    fixed a potential NPE\n\ncommit f819b4999eac052840ff69552198b184afa0c1e0\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-26T06:02:45Z\n\n    merge from master\n\ncommit e0e9de7d01bb09e6593093cc9324b09f03abb55c\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-26T06:03:35Z\n\n    merge from master\n\ncommit db7fe5730953f5d2dc3bb376303d247c1cd1393b\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-26T06:06:48Z\n\n    fix the bug that ClassCastException were thrown when running storm-core tests\n\ncommit b44233509ef33837a8f4f83882a5b55988336a49\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-26T11:17:23Z\n\n    restore storm-master branch\n\ncommit d36cf75b71db5da5fd8f1ad8357075ceafaf33aa\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-26T11:24:29Z\n\n    Merge https://github.com/apache/storm into storm-master\n\ncommit 704e5c0179dd12ce29b97998cfd36951fa6bc70e\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-26T11:32:02Z\n\n    add stats.clj\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-26T11:45:52.478+0000","updated":"2016-02-26T11:45:52.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15171056","id":"15171056","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user unsleepy22 closed the pull request at:\n\n    https://github.com/apache/storm/pull/1155\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-28T14:33:55.554+0000","updated":"2016-02-28T14:33:55.554+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15171059","id":"15171059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user unsleepy22 opened a pull request:\n\n    https://github.com/apache/storm/pull/1161\n\n    [Storm-1579] Fix NoSuchFileException when running tests in storm-core\n\n    The old code takes \"storm.local.dir\" property as logDir while changes in STORM-1552 used ConfigUtils.getLogDir, which doesn't take this property, causing the ultimate event log directory to be \"/logs/xxxx\" and resulting in NoSuchFileException because permission is denied to create /logs directory.\n    \n    The change of code causes 3 test cases to fail in supervisor_test, so I changed them accordingly to make all tests pass.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/unsleepy22/storm STORM-1579\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1161.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1161\n    \n----\ncommit 034f0cf107403100650d6eb65e7168f62133864a\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-28T14:33:21Z\n\n    fix STORM-1579, checks storm.local.dir property/conf when getting storm log dir\n\ncommit 504c11b8ead80e186ff0de83dbdece2337cd1162\nAuthor: 卫乐 <weiyue.wy@taobao.com>\nDate:   2016-02-28T14:42:56Z\n\n    append \"/logs\" to \"storm.local.dir\" property when non-null\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-28T14:43:49.517+0000","updated":"2016-02-28T14:43:49.517+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15171525","id":"15171525","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on the pull request:\n\n    https://github.com/apache/storm/pull/1161#issuecomment-190074820\n  \n    I suspected that the logs directory is being created inside the project itself and failing rat check. I pulled in your changes to check the same. \n    ```find storm-core/storm-local/logs -type f | wc -l\n    26\n    ``` \n    This directory is not excluded from the RAT check and thus build is failing. can you try excluding this directory from RAT check and run the build on your local end (mvn clean install) to see if the build succeeds?\n    Sorry to tell this late but I see a problem with these changes I didn't think of before. Earlier the default log location was under logs directory. With these changes, logs will start going in storm-local directory which is meant for internal use. logs directory becomes redundant since storm.loca.dir always has a default value. In fact this PR will break STORM-1552 which @arunmahadevan should confirm.\n    \n    The exceptions in test classes may be fixed without changing the getLogDir implementation (by passing the `storm.local.dir/logs` as storm.log.dir property value instead of hardcoded logs directory)\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-29T07:28:58.428+0000","updated":"2016-02-29T07:28:58.428+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939295/comment/15176034","id":"15176034","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/1161\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-02T17:27:55.584+0000","updated":"2016-03-02T17:27:55.584+0000"}],"maxResults":24,"total":24,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1552/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2suuv:"}}