{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13055804","self":"https://issues.apache.org/jira/rest/api/2/issue/13055804","key":"STORM-2409","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":12600,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335748","id":"12335748","name":"1.1.0","archived":false,"released":true,"releaseDate":"2017-03-29"}],"aggregatetimespent":12600,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"2017-03-14 02:26:48.981","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_9381109_*|*_3_*:*_1_*:*_685453682_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2017-03-22T03:27:23.740+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2409/watchers","watchCount":1,"isWatching":false},"created":"2017-03-14T02:26:48.981+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":0,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12338104","id":"12338104","name":"1.x","archived":false,"released":false}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hmclouro","name":"hmclouro","key":"hmclouro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hugo Louro","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-03-22T08:10:59.900+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12331080","id":"12331080","name":"storm-kafka-client"}],"timeoriginalestimate":null,"description":null,"customfield_10010":null,"timetracking":{"remainingEstimate":"0h","timeSpent":"3.5h","remainingEstimateSeconds":0,"timeSpentSeconds":12600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":0,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Storm-Kafka-Client KafkaSpout Support for Failed and Null Tuples","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hmclouro","name":"hmclouro","key":"hmclouro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hugo Louro","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hmclouro","name":"hmclouro","key":"hmclouro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hugo Louro","active":true,"timeZone":"Etc/UTC"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":12600,"total":12600,"percent":100},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":12600,"total":12600,"percent":100},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2409/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":21,"worklogs":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user hmcl opened a pull request:\n\n    https://github.com/apache/storm/pull/1999\n\n    STORM-2409: Storm-Kafka-Client KafkaSpout Support for Failed and NullTuples\n\n      - Created config property to make emit null tuples configurable\n      - Ack directly null tuples that are not emitted\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/hmcl/storm-apache 1.x-branch_STORM-2409_KSBTSupport\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1999.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1999\n    \n----\ncommit 04b4819518842b6901d568c1c2c6309eb5e2556c\nAuthor: Hugo Louro <hmclouro@gmail.com>\nDate:   2017-03-14T02:29:12Z\n\n    STORM-2409: Storm-Kafka-Client KafkaSpout Support for Failed and Null Tuples\n      - Created config property to make emit null tuples configurable\n      - Ack directly null tuples that are not emitted\n\n----\n","created":"2017-03-14T05:02:51.868+0000","updated":"2017-03-14T05:02:51.868+0000","started":"2017-03-14T05:02:51.864+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39059","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39283","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user harshach commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    @srdo its better to have this on kafka spout itself, for one it reduces unnecessary hope or another bolt that user need to add to filter out unnecessary tuples.\n","created":"2017-03-15T19:00:03.570+0000","updated":"2017-03-15T19:00:03.570+0000","started":"2017-03-15T19:00:03.568+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39283","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39285","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    @harshach Okay. I don't think filtering null tuples should be the default though. We might be hiding errors in user code. I'd like them to have to actively enable null filtering.\n","created":"2017-03-15T19:33:32.685+0000","updated":"2017-03-15T19:33:32.685+0000","started":"2017-03-15T19:33:32.685+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39285","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39286","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1999#discussion_r106263320\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/spout/KafkaSpout.java ---\n    @@ -383,23 +403,24 @@ private void commitOffsetsForAckedTuples() {\n         @Override\n         public void ack(Object messageId) {\n             final KafkaSpoutMessageId msgId = (KafkaSpoutMessageId) messageId;\n    -        if(!emitted.contains(msgId)) {\n    -            LOG.debug(\"Received ack for tuple this spout is no longer tracking. Partitions may have been reassigned. Ignoring message [{}]\", msgId);\n    -            return;\n    -        }\n    -        \n    -        if (!consumerAutoCommitMode) {  // Only need to keep track of acked tuples if commits are not done automatically\n    -            acked.get(msgId.getTopicPartition()).add(msgId);\n    +        if (!emitted.contains(msgId)) {\n    +            LOG.debug(\"Received ack for message [{}], which is associated with either a null tuple that was never emitted, \" +\n    --- End diff --\n    \n    This message is ambiguous now. Could you add the msgId to emitted before acking (i.e. basically fake a \"real\" ack) instead? If people want to log that they're dropping an invalid tuple they can do it from the RecordTranslator without ambiguity.\n","created":"2017-03-15T19:36:23.599+0000","updated":"2017-03-15T19:36:23.599+0000","started":"2017-03-15T19:36:23.598+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39286","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39287","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user hmcl commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1999#discussion_r106280062\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/spout/KafkaSpout.java ---\n    @@ -383,23 +403,24 @@ private void commitOffsetsForAckedTuples() {\n         @Override\n         public void ack(Object messageId) {\n             final KafkaSpoutMessageId msgId = (KafkaSpoutMessageId) messageId;\n    -        if(!emitted.contains(msgId)) {\n    -            LOG.debug(\"Received ack for tuple this spout is no longer tracking. Partitions may have been reassigned. Ignoring message [{}]\", msgId);\n    -            return;\n    -        }\n    -        \n    -        if (!consumerAutoCommitMode) {  // Only need to keep track of acked tuples if commits are not done automatically\n    -            acked.get(msgId.getTopicPartition()).add(msgId);\n    +        if (!emitted.contains(msgId)) {\n    +            LOG.debug(\"Received ack for message [{}], which is associated with either a null tuple that was never emitted, \" +\n    --- End diff --\n    \n    I don't understand what you mean with this comment.\n","created":"2017-03-15T20:52:49.982+0000","updated":"2017-03-15T20:52:49.982+0000","started":"2017-03-15T20:52:49.980+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39287","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39288","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user hmcl commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    @srdo the changes proposed in this PR handle null tuples in identical fashion that what is done in the old Kafka Spout as can be seen in the following links.\n    \n    https://github.com/apache/storm/blob/master/external/storm-kafka/src/jvm/org/apache/storm/kafka/PartitionManager.java#L197\n    \n    https://github.com/apache/storm/blob/master/external/storm-kafka/src/jvm/org/apache/storm/kafka/PartitionManager.java#L208-L210\n","created":"2017-03-15T20:56:51.086+0000","updated":"2017-03-15T20:56:51.086+0000","started":"2017-03-15T20:56:51.085+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39288","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39289","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1999#discussion_r106283741\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/spout/KafkaSpout.java ---\n    @@ -383,23 +403,24 @@ private void commitOffsetsForAckedTuples() {\n         @Override\n         public void ack(Object messageId) {\n             final KafkaSpoutMessageId msgId = (KafkaSpoutMessageId) messageId;\n    -        if(!emitted.contains(msgId)) {\n    -            LOG.debug(\"Received ack for tuple this spout is no longer tracking. Partitions may have been reassigned. Ignoring message [{}]\", msgId);\n    -            return;\n    -        }\n    -        \n    -        if (!consumerAutoCommitMode) {  // Only need to keep track of acked tuples if commits are not done automatically\n    -            acked.get(msgId.getTopicPartition()).add(msgId);\n    +        if (!emitted.contains(msgId)) {\n    +            LOG.debug(\"Received ack for message [{}], which is associated with either a null tuple that was never emitted, \" +\n    --- End diff --\n    \n    I mean that the debug log here is now getting written both when the spout receives an ack for a tuple from a partition that has been reassigned since it was emitted, and when the RecordTranslator emits a null tuple. If you add msgId to emitted in L357 before calling ack(), we don't have to change the log here to also mention null tuples.\n    \n    I think logging something when null tuples are being dropped might fit better in RecordTranslator.apply (or in L357) than here, because then the log can be clear about what is happening. \n","created":"2017-03-15T21:09:14.673+0000","updated":"2017-03-15T21:09:14.673+0000","started":"2017-03-15T21:09:14.665+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39289","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39290","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    @hmcl Googled it, it appears that null messages can be sent to delete messages in Kafka (see https://kafka.apache.org/documentation/#design_compactionbasics). It makes sense to drop messages quietly if their values are null. \n    \n    It's good to be able to automatically drop them if the RecordTranslator returns null as well, I'm mostly worried that bugs in RecordTranslator implementations could be hidden by the null drop being enabled by default. It's more of a nitpick though.\n","created":"2017-03-15T21:29:58.084+0000","updated":"2017-03-15T21:29:58.084+0000","started":"2017-03-15T21:29:58.083+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39290","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39291","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user hmcl commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1999#discussion_r106291741\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/spout/KafkaSpout.java ---\n    @@ -383,23 +403,24 @@ private void commitOffsetsForAckedTuples() {\n         @Override\n         public void ack(Object messageId) {\n             final KafkaSpoutMessageId msgId = (KafkaSpoutMessageId) messageId;\n    -        if(!emitted.contains(msgId)) {\n    -            LOG.debug(\"Received ack for tuple this spout is no longer tracking. Partitions may have been reassigned. Ignoring message [{}]\", msgId);\n    -            return;\n    -        }\n    -        \n    -        if (!consumerAutoCommitMode) {  // Only need to keep track of acked tuples if commits are not done automatically\n    -            acked.get(msgId.getTopicPartition()).add(msgId);\n    +        if (!emitted.contains(msgId)) {\n    +            LOG.debug(\"Received ack for message [{}], which is associated with either a null tuple that was never emitted, \" +\n    --- End diff --\n    \n    @srdo The reason I decided not to add msgId to emitted was because that is a big hack. We will be setting the internal state of the spout like a message was emitted, where it really wasn't. \n    \n    We can probably fix this by creating and setting a boolean field `emitted` in msgId, which by default is true, but in this particular scenario that we ack directly, we set it to false.\n    \n    We cannot log null tuples message in RecordTranslator because that interface is implemented by the user. This message is internal to the spout, and should not depend on third party (user) implementations.\n","created":"2017-03-15T21:50:18.444+0000","updated":"2017-03-15T21:50:18.444+0000","started":"2017-03-15T21:50:18.444+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39291","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39292","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user hmcl commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    @srdo we can make de default emit null. That's a trivial change. As I said, I decided not to emit null because that is the default behavior in the old spout, and users are either happy, or used to it. I am not in favor or one way or another. It's just that emitting null tuples, unforeseen problems can potentially happen downstream.\n","created":"2017-03-15T21:52:44.441+0000","updated":"2017-03-15T21:52:44.441+0000","started":"2017-03-15T21:52:44.441+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39292","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39294","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1999#discussion_r106299441\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/spout/KafkaSpout.java ---\n    @@ -383,23 +403,24 @@ private void commitOffsetsForAckedTuples() {\n         @Override\n         public void ack(Object messageId) {\n             final KafkaSpoutMessageId msgId = (KafkaSpoutMessageId) messageId;\n    -        if(!emitted.contains(msgId)) {\n    -            LOG.debug(\"Received ack for tuple this spout is no longer tracking. Partitions may have been reassigned. Ignoring message [{}]\", msgId);\n    -            return;\n    -        }\n    -        \n    -        if (!consumerAutoCommitMode) {  // Only need to keep track of acked tuples if commits are not done automatically\n    -            acked.get(msgId.getTopicPartition()).add(msgId);\n    +        if (!emitted.contains(msgId)) {\n    +            LOG.debug(\"Received ack for message [{}], which is associated with either a null tuple that was never emitted, \" +\n    --- End diff --\n    \n    Adding the `emitted` field to msgId would be a good solution. The log can be done in L357 instead then.\n","created":"2017-03-15T22:31:57.684+0000","updated":"2017-03-15T22:31:57.684+0000","started":"2017-03-15T22:31:57.684+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39294","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39295","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user hmcl commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1999#discussion_r106299675\n  \n    --- Diff: external/storm-kafka-client/src/main/java/org/apache/storm/kafka/spout/KafkaSpout.java ---\n    @@ -383,23 +403,24 @@ private void commitOffsetsForAckedTuples() {\n         @Override\n         public void ack(Object messageId) {\n             final KafkaSpoutMessageId msgId = (KafkaSpoutMessageId) messageId;\n    -        if(!emitted.contains(msgId)) {\n    -            LOG.debug(\"Received ack for tuple this spout is no longer tracking. Partitions may have been reassigned. Ignoring message [{}]\", msgId);\n    -            return;\n    -        }\n    -        \n    -        if (!consumerAutoCommitMode) {  // Only need to keep track of acked tuples if commits are not done automatically\n    -            acked.get(msgId.getTopicPartition()).add(msgId);\n    +        if (!emitted.contains(msgId)) {\n    +            LOG.debug(\"Received ack for message [{}], which is associated with either a null tuple that was never emitted, \" +\n    --- End diff --\n    \n    OK, will do.\n","created":"2017-03-15T22:33:21.433+0000","updated":"2017-03-15T22:33:21.433+0000","started":"2017-03-15T22:33:21.433+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39295","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user hmcl commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    @srdo so what will we decide to do as far as null? send or not send by default ?\n","created":"2017-03-15T22:34:13.231+0000","updated":"2017-03-15T22:34:13.231+0000","started":"2017-03-15T22:34:13.230+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39296","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39297","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    @hmcl Either one is fine by me. Keeping it consistent with the old spout is probably the best solution. The only case where defaulting to emitting nulls makes sense is if the user supplies a RecordTranslator that sometimes returns null erroneously, because they'll then see the bug when they get unexpected nulls, but I don't think it's a big problem. \n","created":"2017-03-15T22:38:45.498+0000","updated":"2017-03-15T22:38:45.498+0000","started":"2017-03-15T22:38:45.498+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39297","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39298","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user harshach commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    @srdo Log compaction is only used very specific case like consumer_offsets or streams topics. It only useful if you want to keep the latest data. So we are not addressing those here. \n    @hmcl  lets add a debug statement that will log this when we drop the null value\n","created":"2017-03-15T23:32:49.747+0000","updated":"2017-03-15T23:32:49.747+0000","started":"2017-03-15T23:32:49.740+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39298","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39300","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user hmcl opened a pull request:\n\n    https://github.com/apache/storm/pull/2008\n\n    STORM-2409: Storm-Kafka-Client KafkaSpout Support for Failed and NullTuples\n\n      - Created config property to make emit null tuples configurable\n      - Ack directly null tuples that are not emitted\n      - Added emit field to KafkaSpoutMessageId\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/hmcl/storm-apache Apache_master_STORM-2409_KSBTSupport\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/2008.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #2008\n    \n----\ncommit dd6a7d1613d2084b5005fe7009eaa43220dcd468\nAuthor: Hugo Louro <hmclouro@gmail.com>\nDate:   2017-03-14T02:29:12Z\n\n    STORM-2409: Storm-Kafka-Client KafkaSpout Support for Failed and Null Tuples\n      - Created config property to make emit null tuples configurable\n      - Ack directly null tuples that are not emitted\n      - Added emit field to KafkaSpoutMessageId\n\n----\n","created":"2017-03-16T00:56:05.395+0000","updated":"2017-03-16T00:56:05.395+0000","started":"2017-03-16T00:56:05.393+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39300","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39326","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    +1\n    \n    @harshach I don't know about that. Can the Kafka consumer randomly return null? Users should know if their Kafka producers are sending nulls, or if their RecordTranslator is returning nulls. If we don't know why nulls are getting returned and the user didn't manually enable filtering, we might end up making it harder for users to debug missing messages.\n","created":"2017-03-16T06:55:27.335+0000","updated":"2017-03-16T06:55:27.335+0000","started":"2017-03-16T06:55:27.334+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39326","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39612","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user harshach commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    +1\n","created":"2017-03-20T17:59:39.597+0000","updated":"2017-03-20T17:59:39.597+0000","started":"2017-03-20T17:59:39.596+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39612","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user satishd commented on the issue:\n\n    https://github.com/apache/storm/pull/1999\n  \n    +1\n","created":"2017-03-21T05:18:56.981+0000","updated":"2017-03-21T05:18:56.981+0000","started":"2017-03-21T05:18:56.979+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39625","issueId":"13055804"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13055804/worklog/39634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/1999\n","created":"2017-03-21T06:48:11.644+0000","updated":"2017-03-21T06:48:11.644+0000","started":"2017-03-21T06:48:11.643+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"39634","issueId":"13055804"}]},"customfield_12311820":"0|i3c7xz:"}}