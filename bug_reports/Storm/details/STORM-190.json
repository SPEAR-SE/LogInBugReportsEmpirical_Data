{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12687396","self":"https://issues.apache.org/jira/rest/api/2/issue/12687396","key":"STORM-190","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2014-01-08T01:09:12.671+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jan 08 05:45:50 UTC 2014","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_160569194_*|*_4_*:*_1_*:*_15854_*|*_5_*:*_1_*:*_10305315_*|*_6_*:*_2_*:*_55194616383","customfield_12310420":"366397","customfield_12312321":null,"resolutiondate":"2015-10-09T01:36:22.917+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-190/watchers","watchCount":2,"isWatching":false},"created":"2014-01-06T06:17:56.195+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["executors","tasks","workers"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":129600,"aggregatetimeoriginalestimate":129600,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"customfield_12312339":null,"issuelinks":[],"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-10-09T01:36:22.938+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":129600,"description":"we are now testing storm-0.9.0.1 cluster for migrating. When running the topologies in storm-starter,  such as WordCountTopology, ReachTopology, we found the number of workers, executors, and tasks is unexplainable (according to https://github.com/nathanmarz/storm/wiki/Understanding-the-parallelism-of-a-Storm-topology ):\n\n1) WordCountTopology:\n      Name              Id            Status   Uptime   Num workers Num executors Num tasks\n   wc-test3   wc-test3-3-1388986658   ACTIVE 29m 5s     25          50            50\n   wc-test2   wc-test2-2-1388986111   ACTIVE 38m 12s    4           29            29\n   wc-test    wc-test-1-1388981297    ACTIVE 1h 58m 26s 3           28            28\n\nThis topology's configuration is as follows:\n    TopologyBuilder builder = new TopologyBuilder();\n    builder.setSpout(\"spout\", new RandomSentenceSpout(), 5);\n    builder.setBolt(\"split\", new SplitSentence(), 8).shuffleGrouping(\"spout\");\n    builder.setBolt(\"count\", new WordCount(), 12).fieldsGrouping(\"split\", new Fields(\"word\"));\n    ......\n    conf.setNumWorkers(3); #4, 25\n\n2) ReachTopology (which is a drpc topology):\n      Name              Id            Status  Uptime   Num workers Num executors Num tasks\n   reach-test reach-test-4-1388986889 ACTIVE 32m 20s   6           35            35\n\nThis topology's configuration is as follows:\n    LinearDRPCTopologyBuilder builder = new LinearDRPCTopologyBuilder(\"reach\");\n    builder.addBolt(new GetTweeters(), 4);\n    builder.addBolt(new GetFollowers(), 12).shuffleGrouping();\n    builder.addBolt(new PartialUniquer(), 6).fieldsGrouping(new Fields(\"id\", \"follower\"));\n    builder.addBolt(new CountAggregator(), 3).fieldsGrouping(new Fields(\"id\"));\n    ......\n    conf.setNumWorkers(6);\n","customfield_10010":null,"timetracking":{"originalEstimate":"36h","remainingEstimate":"36h","originalEstimateSeconds":129600,"remainingEstimateSeconds":129600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12621904","id":"12621904","filename":"{0DC717C3-D023-4BE7-AB53-588650EB9774}.jpg","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"created":"2014-01-08T01:47:27.403+0000","size":45834,"mimeType":"image/jpeg","content":"https://issues.apache.org/jira/secure/attachment/12621904/%7B0DC717C3-D023-4BE7-AB53-588650EB9774%7D.jpg"}],"customfield_12312340":null,"aggregatetimeestimate":129600,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"366708","customfield_12312823":null,"summary":"the allocation of workers, executors and tasks is amazing in our storm-0.9.0.1 cluster","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":129600,"percent":0},"environment":"storm-0.9.0.1","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":129600,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687396/comment/13862789","id":"13862789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"body":"who can explain this phenomenon to me? And in different storm release, I got different results.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"created":"2014-01-06T06:20:16.098+0000","updated":"2014-01-06T06:20:16.098+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687396/comment/13864953","id":"13864953","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"body":"We need more information to make sense of this:\n\nHow many supervisors in your cluster?\n\nHow many ports per supervisor?\n\nDo you have both topologies deployed at the same time?\n\nScreenshot of Storm UI would probably suffice.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"created":"2014-01-08T01:09:12.671+0000","updated":"2014-01-08T01:09:12.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687396/comment/13864974","id":"13864974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"body":"ok, I will give it.\n\nHow many supervisors in your cluster?\n3 supervisors.\n\nHow many ports per supervisor?\n15 slots(ports) per supervisor. And supervisor's config as follows:\n supervisor.slots.ports:\n    - 6700\n    - 6701\n    - 6702\n    - 6703\n    - 6704\n    - 6705\n    - 6706\n    - 6707\n    - 6708\n    - 6709\n    - 6710\n    - 6711\n    - 6712\n    - 6713\n    - 6714\n supervisor.childopts: \"-Xmx1024m \"\n\nDo you have both topologies deployed at the same time?\nI have run 3 WordCountTopology named \"wc-test\", \"wc-test2\", \"wc-test3\", which have been shown already.\n\nScreenshot of Storm UI would probably suffice.\nplease see the attach file. this is a new screenshot, do not have duplicated WordCountTopology.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"created":"2014-01-08T01:48:17.732+0000","updated":"2014-01-08T01:48:17.732+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687396/comment/13865004","id":"13865004","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"body":"The numbers are correct. The difference is that in 0.9.0 Storm defaults the number of ackers to be equal to the number of workers (each acker uses an executor).\n\nSo for your word count topology, adding up the parallelism you get:\n\n5 + 8 + 12 = 25\n\nThen add 3 for the number of workers/ackers:\n\n25 + 3 = 28\n\nSo the numbers are correct.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"created":"2014-01-08T02:53:52.393+0000","updated":"2014-01-08T02:57:42.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687396/comment/13865009","id":"13865009","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"body":"edited last comment (my math isn't _that_ bad)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ptgoetz","name":"ptgoetz","key":"ptgoetz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"P. Taylor Goetz","active":true,"timeZone":"America/Havana"},"created":"2014-01-08T02:58:30.329+0000","updated":"2014-01-08T02:58:30.329+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687396/comment/13865097","id":"13865097","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"body":"thanks, got it. by the way, is there some place to describe this difference?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"created":"2014-01-08T05:38:50.474+0000","updated":"2014-01-08T05:38:50.474+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687396/comment/13865108","id":"13865108","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"body":"Not A Problem","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=panfeng412","name":"panfeng412","key":"panfeng412","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Panfeng Yuan","active":true,"timeZone":"Asia/Shanghai"},"created":"2014-01-08T05:45:50.696+0000","updated":"2014-01-08T05:45:50.696+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-190/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1r5nz:"}}