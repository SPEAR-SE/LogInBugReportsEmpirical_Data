{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12911683","self":"https://issues.apache.org/jira/rest/api/2/issue/12911683","key":"STORM-1193","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-07-14T13:46:00.824+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jul 14 14:51:28 UTC 2016","customfield_12312320":null,"customfield_12310222":null,"customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1193/watchers","watchCount":3,"isWatching":false},"created":"2015-11-09T22:06:53.138+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"customfield_12312339":null,"issuelinks":[],"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-07-14T14:51:28.334+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"The test-worker-launch-command-run-as-user testcase errors rather than fails, due to what seems to be a privilege issue with creating a symlink.\n\n{quote}\n5701 \\[main] INFO  b.s.d.supervisor - Creating symlinks for worker-id: fake-worker-id storm-id: fake-storm-id to its port artifacts directory\n\nUncaught exception, not in assertion.\n\nexpected: nil\nactual: java.nio.file.FileSystemException: C:\\path\\to\\Temp\\storm-local8914443830909286033\\workers\\fake-worker-id\\artifacts: A required privilege is not held by the client.\n\n at sun.nio.fs.WindowsException.translateToIOException (WindowsException.java:86)\n    sun.nio.fs.WindowsException.rethrowAsIOException (WindowsException.java:97)\n    sun.nio.fs.WindowsException.rethrowAsIOException (WindowsException.java:102)\n    sun.nio.fs.WindowsFileSystemProvider.createSymbolicLink (WindowsFileSystemProvider.java:577)\n    java.nio.file.Files.createSymbolicLink (Files.java:994)\n    backtype.storm.util$create_symlink_BANG_.invoke (util.clj:604)\n    backtype.storm.daemon.supervisor$create_artifacts_link.invoke (supervisor.clj:811)\n    backtype.storm.daemon.supervisor/fn (supervisor.clj:898)\n    clojure.lang.MultiFn.invoke (MultiFn.java:251)\n    backtype.storm.supervisor_test$fn__498$fn__501$fn__502$fn__503.invoke (supervisor_test.clj:472)\n    clojure.core$with_redefs_fn.invoke (core.clj:7209)\n    backtype.storm.supervisor_test$fn__498$fn__501$fn__502.invoke (supervisor_test.clj:462)\n    backtype.storm.supervisor_test$fn__498$fn__501.invoke (supervisor_test.clj:462)\n    backtype.storm.supervisor_test/fn (supervisor_test.clj:451)\n{quote}\n\nI don't know if the testcase itself should be catching the error and presenting it as a failed test, or if the original code should be catching it and reacting.\n\nWhat's odd here is that if this is using my own user account and privileges, then it should work, because my account _does_ have permission to create symlinks.\n\nTested against master branch (c12e28c829)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"supervisor-test error creating symlinks on windows","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashnazg","name":"ashnazg","key":"ashnazg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashnazg&avatarId=25255","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashnazg&avatarId=25255","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashnazg&avatarId=25255","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashnazg&avatarId=25255"},"displayName":"Chuck Burgess","active":true,"timeZone":"America/Chicago"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashnazg","name":"ashnazg","key":"ashnazg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashnazg&avatarId=25255","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashnazg&avatarId=25255","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashnazg&avatarId=25255","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashnazg&avatarId=25255"},"displayName":"Chuck Burgess","active":true,"timeZone":"America/Chicago"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Windows7\nJava7","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12911683/comment/15045857","id":"15045857","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashnazg","name":"ashnazg","key":"ashnazg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashnazg&avatarId=25255","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashnazg&avatarId=25255","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashnazg&avatarId=25255","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashnazg&avatarId=25255"},"displayName":"Chuck Burgess","active":true,"timeZone":"America/Chicago"},"body":"This probably has something to do with this -- http://superuser.com/questions/104845/permission-to-make-symbolic-links-in-windows-7\n\nIf the running user is in the Administrators group, then that seems to trump the user account itself being granted the Create Symbolic Links permission.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashnazg","name":"ashnazg","key":"ashnazg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashnazg&avatarId=25255","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashnazg&avatarId=25255","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashnazg&avatarId=25255","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashnazg&avatarId=25255"},"displayName":"Chuck Burgess","active":true,"timeZone":"America/Chicago"},"created":"2015-12-07T22:10:25.311+0000","updated":"2015-12-07T22:10:25.311+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12911683/comment/15376930","id":"15376930","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pmilliken","name":"pmilliken","key":"pmilliken","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Milliken","active":true,"timeZone":"Europe/London"},"body":"I've just encountered an error which looks very much like this in the supervisor itself when trying to deploy when upgrading from Storm 0.10.0 to 1.0.1.\n\nIn our environment, it is not possible for all people who need it to be granted the relevant permissions (due to corporate security policies etc.).\n\nI've verified that running Storm as an administrator made it work, but that shouldn't be necessary.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pmilliken","name":"pmilliken","key":"pmilliken","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Milliken","active":true,"timeZone":"Europe/London"},"created":"2016-07-14T13:46:00.824+0000","updated":"2016-07-14T13:46:00.824+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12911683/comment/15376963","id":"15376963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Blobstore feature which is introduced at 1.0.0 heavily uses symbolic link, which works well with well-known Linux distro and OSX, but bothers Windows users.\n\nWe prepared windows user guide because of that (there's deadlink on website which should be fixed soon), so you can refer https://github.com/apache/storm/blob/master/docs/windows-users-guide.md on this. I guess you're already aware of.\nI believe that the account which runs supervisor doesn't need to be administrator. If not it's bad of MS (sorry!)\n\nPersonally I don't think we have to get rid of usage of symbolic link. It should be not easy and need lots of effort.\n\nBtw, supervisor is a daemon which should be launched only one for each node. Do multiple users launch supervisors?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2016-07-14T14:00:55.046+0000","updated":"2016-07-14T14:00:55.046+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12911683/comment/15377063","id":"15377063","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pmilliken","name":"pmilliken","key":"pmilliken","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Milliken","active":true,"timeZone":"Europe/London"},"body":"This is occurring in our development environment. We have many developers each starting and stopping their own isolated storm clusters.\n\nUnfortunately, the nature of the work being done means that they can't really share instances. It's also very unlikely (I'd go as far as to say impossible) that we'll be able to get the relevant security policies set up on all the environments that we would need to.\n\nWe were hoping to upgrade to 1.0.1 in order to take advantage of the performance improvements that have been put in. Unfortunately, this is likely to prevent us from doing that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pmilliken","name":"pmilliken","key":"pmilliken","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Milliken","active":true,"timeZone":"Europe/London"},"created":"2016-07-14T14:51:28.334+0000","updated":"2016-07-14T14:51:28.334+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1193/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2o5xj:"}}