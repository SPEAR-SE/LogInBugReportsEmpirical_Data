{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13151940","self":"https://issues.apache.org/jira/rest/api/2/issue/13151940","key":"STORM-3028","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":4800,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343340","id":"12343340","name":"1.2.3","archived":false,"released":false}],"aggregatetimespent":4800,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-07-09T21:32:59.080+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 09 21:32:59 UTC 2018","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7639042479_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2018-07-09T21:32:59.046+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-3028/watchers","watchCount":1,"isWatching":false},"created":"2018-04-12T11:35:36.614+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["pull-request-available"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":0,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12342766","id":"12342766","name":"1.2.1","archived":false,"released":true,"releaseDate":"2018-02-15"}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghajos","name":"ghajos","key":"ghajos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghajos&avatarId=34682","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghajos&avatarId=34682","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghajos&avatarId=34682","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghajos&avatarId=34682"},"displayName":"Gergely Hajós","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-07-09T21:32:59.082+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12324395","id":"12324395","name":"storm-hdfs","description":"Storm HDFS Integration"}],"timeoriginalestimate":null,"description":"When ackers are present and an empty file is read, HdfsSpout waits for acknowledgement to close the file. As nothing was emitted no ack arrives so HdfsSpout stays in \"fileReadCompletely\" state forever.","customfield_10010":null,"timetracking":{"remainingEstimate":"0h","timeSpent":"1h 20m","remainingEstimateSeconds":0,"timeSpentSeconds":4800},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":0,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"HdfsSpout does not handle empty files in case of ack enabled","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghajos","name":"ghajos","key":"ghajos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghajos&avatarId=34682","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghajos&avatarId=34682","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghajos&avatarId=34682","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghajos&avatarId=34682"},"displayName":"Gergely Hajós","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghajos","name":"ghajos","key":"ghajos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghajos&avatarId=34682","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghajos&avatarId=34682","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghajos&avatarId=34682","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghajos&avatarId=34682"},"displayName":"Gergely Hajós","active":true,"timeZone":"Etc/UTC"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":4800,"total":4800,"percent":100},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":4800,"total":4800,"percent":100},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/comment/16537633","id":"16537633","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Thanks [~ghajos], I merged into master and 1.x-branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2018-07-09T21:32:59.080+0000","updated":"2018-07-09T21:32:59.080+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-3028/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":10,"worklogs":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/90401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user ghajos opened a pull request:\n\n    https://github.com/apache/storm/pull/2633\n\n    STORM-3028 HdfsSpout: handle empty file in case of ackers\n\n    There is a problem with all the storm-hdfs junit tests. The test results may not be valid.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/ghajos/storm STORM-3028\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/2633.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #2633\n    \n----\ncommit 285e287c063c6a12c79553c7a96c9878b0ba3884\nAuthor: Gergely Hajos <rogozsin@...>\nDate:   2018-04-12T11:58:13Z\n\n    STORM-3028 HdfsSpout: handle empty file in case of ackers\n\n----\n","created":"2018-04-12T12:48:09.388+0000","updated":"2018-04-12T12:48:09.388+0000","started":"2018-04-12T12:48:09.387+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"90401","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/96081","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user ghajos commented on the issue:\n\n    https://github.com/apache/storm/pull/2633\n  \n    @srdo Can you please take a look at?\n","created":"2018-04-27T13:47:34.525+0000","updated":"2018-04-27T13:47:34.525+0000","started":"2018-04-27T13:47:34.524+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"96081","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/96115","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2633#discussion_r184711553\n  \n    --- Diff: external/storm-hdfs/src/test/java/org/apache/storm/hdfs/spout/TestHdfsSpout.java ---\n    @@ -153,6 +153,35 @@ public void testSimpleText_ACK() throws Exception {\n             }\n         }\n     \n    +    @Test\n    +    public void testEmptySimpleText_ACK() throws Exception {\n    +        Path file1 = new Path(source.toString() + \"/file_empty.txt\");\n    +        createTextFile(file1, 0);\n    +\n    +        Path file2 = new Path(source.toString() + \"/file.txt\");\n    +        createTextFile(file2, 5);\n    +\n    +        try (AutoCloseableHdfsSpout closeableSpout = makeSpout(Configs.TEXT, TextFileReader.defaultFields)) {\n    +            HdfsSpout spout = closeableSpout.spout;\n    +            spout.setCommitFrequencyCount(1);\n    +            spout.setCommitFrequencySec(1);\n    +\n    +            Map<String, Object> conf = getCommonConfigs();\n    +            conf.put(Config.TOPOLOGY_ACKER_EXECUTORS, \"1\"); // enable ACKing\n    +            openSpout(spout, 0, conf);\n    +\n    +            // consume empty file\n    +            runSpout(spout, \"r6\");\n    --- End diff --\n    \n    Nit: Isn't it enough to call nextTuple once rather than 6 times here?\n","created":"2018-04-27T15:07:06.954+0000","updated":"2018-04-27T15:07:06.954+0000","started":"2018-04-27T15:07:06.953+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"96115","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/96117","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2633#discussion_r184707886\n  \n    --- Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/spout/HdfsSpout.java ---\n    @@ -101,6 +101,7 @@\n         private final AtomicBoolean commitTimeElapsed = new AtomicBoolean(false);\n         private Timer commitTimer;\n         private boolean fileReadCompletely = true;\n    +    private boolean newReader = false;\n    --- End diff --\n    \n    Does this need to be a field? It looks to me like it would work fine as a local too?\n","created":"2018-04-27T15:07:06.956+0000","updated":"2018-04-27T15:07:06.956+0000","started":"2018-04-27T15:07:06.956+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"96117","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/96116","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2633#discussion_r184710659\n  \n    --- Diff: external/storm-hdfs/src/test/java/org/apache/storm/hdfs/spout/TestHdfsSpout.java ---\n    @@ -153,6 +153,35 @@ public void testSimpleText_ACK() throws Exception {\n             }\n         }\n     \n    +    @Test\n    +    public void testEmptySimpleText_ACK() throws Exception {\n    +        Path file1 = new Path(source.toString() + \"/file_empty.txt\");\n    +        createTextFile(file1, 0);\n    +\n    +        Path file2 = new Path(source.toString() + \"/file.txt\");\n    +        createTextFile(file2, 5);\n    +\n    +        try (AutoCloseableHdfsSpout closeableSpout = makeSpout(Configs.TEXT, TextFileReader.defaultFields)) {\n    +            HdfsSpout spout = closeableSpout.spout;\n    +            spout.setCommitFrequencyCount(1);\n    --- End diff --\n    \n    Is there any reason to set both commit frequency count and commit frequency sec? \n","created":"2018-04-27T15:07:06.956+0000","updated":"2018-04-27T15:07:06.956+0000","started":"2018-04-27T15:07:06.955+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"96116","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/101832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/storm/pull/2633\n  \n    @ghajos any plans to address the question from @srdo \n","created":"2018-05-14T18:45:17.590+0000","updated":"2018-05-14T18:45:17.590+0000","started":"2018-05-14T18:45:17.590+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"101832","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/102449","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user ghajos commented on the issue:\n\n    https://github.com/apache/storm/pull/2633\n  \n    @revans2 @srdo I'm sorry! There is no reason to set both commit frequency count and commit frequency sec. I hope that this is already addressed in the last commit.\n","created":"2018-05-16T11:43:02.597+0000","updated":"2018-05-16T11:43:02.597+0000","started":"2018-05-16T11:43:02.597+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"102449","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/102452","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2633#discussion_r188594538\n  \n    --- Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/spout/HdfsSpout.java ---\n    @@ -221,14 +221,18 @@ public void nextTuple() {\n             while (true) {\n                 try {\n                     // 3) Select a new file if one is not open already\n    +                boolean newReader = false;\n                     if (reader == null) {\n                         reader = pickNextFile();\n                         if (reader == null) {\n                             LOG.debug(\"Currently no new files to process under : \" + sourceDirPath);\n                             return;\n                         } else {\n                             fileReadCompletely = false;\n    +                        newReader = true;\n                         }\n    +                } else {\n    +                    newReader = false;\n    --- End diff --\n    \n    Nit: This branch is a no op, newReader is already false\n","created":"2018-05-16T11:50:47.397+0000","updated":"2018-05-16T11:50:47.397+0000","started":"2018-05-16T11:50:47.397+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"102452","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/102463","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user ghajos commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/2633#discussion_r188606821\n  \n    --- Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/spout/HdfsSpout.java ---\n    @@ -221,14 +221,18 @@ public void nextTuple() {\n             while (true) {\n                 try {\n                     // 3) Select a new file if one is not open already\n    +                boolean newReader = false;\n                     if (reader == null) {\n                         reader = pickNextFile();\n                         if (reader == null) {\n                             LOG.debug(\"Currently no new files to process under : \" + sourceDirPath);\n                             return;\n                         } else {\n                             fileReadCompletely = false;\n    +                        newReader = true;\n                         }\n    +                } else {\n    +                    newReader = false;\n    --- End diff --\n    \n    Thank you for pointing this out!\n","created":"2018-05-16T12:33:49.473+0000","updated":"2018-05-16T12:33:49.473+0000","started":"2018-05-16T12:33:49.472+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"102463","issueId":"13151940"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13151940/worklog/121035","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/2633\n","created":"2018-07-09T21:31:52.628+0000","updated":"2018-07-09T21:31:52.628+0000","started":"2018-07-09T21:31:52.628+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"121035","issueId":"13151940"}]},"customfield_12311820":"0|i3sgsn:"}}