{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12764947","self":"https://issues.apache.org/jira/rest/api/2/issue/12764947","key":"STORM-615","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-03-12T20:59:14.634+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Mar 25 08:48:24 UTC 2016","customfield_12312320":null,"customfield_12310222":null,"customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-615/watchers","watchCount":7,"isWatching":false},"created":"2015-01-05T17:36:35.912+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"customfield_12312339":null,"issuelinks":[{"id":"12430251","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12430251","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12718546","key":"STORM-340","self":"https://issues.apache.org/jira/rest/api/2/issue/12718546","fields":{"summary":"Add topology submission REST API and UI button","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Johnbaba","name":"Johnbaba","key":"johnbaba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=johnbaba&avatarId=25536","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=johnbaba&avatarId=25536","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=johnbaba&avatarId=25536","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=johnbaba&avatarId=25536"},"displayName":"John Fang","active":true,"timeZone":"Asia/Shanghai"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-03-25T08:48:24.502+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/4","description":"This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/reopened.png","name":"Reopened","id":"4","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"Add REST api /api/v1/submitTopology to upload topology jars and config using REST api.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Add REST API to upload topology","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14359397","id":"14359397","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user harshach opened a pull request:\n\n    https://github.com/apache/storm/pull/464\n\n    STORM-615. Add REST API to upload topology.\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/harshach/incubator-storm STORM-615-V2\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/464.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #464\n    \n----\ncommit d18508e6def0000a4d790002d2512c2905aa6a76\nAuthor: Sriharsha Chintalapani <mail@harsha.io>\nDate:   2015-03-12T20:58:31Z\n\n    STORM-615. Add REST API to upload topology.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-12T20:59:14.634+0000","updated":"2015-03-12T20:59:14.634+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14378467","id":"14378467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user Parth-Brahmbhatt commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/464#discussion_r27066660\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/core.clj ---\n    @@ -982,7 +1019,23 @@\n             (.killTopologyWithOpts nimbus name options)\n             (log-message \"Killing topology '\" name \"' with wait time: \" wait-time \" secs\")))\n         (json-response (topology-op-response id \"kill\") (m \"callback\")))\n    -\n    +  (POST \"/api/v1/uploadTopology\" [:as {:keys [cookies servlet-request]} id & params]\n    +        (let [valid-tplg (validate-tplg-submit-params params)\n    +              valid (valid-tplg :valid)]\n    +          (log-message \"valid topology \" valid-tplg)\n    +          (if (= valid true)\n    +            (let [tplg-file-data (params :topologyJar)\n    +                  tplg-temp-file (tplg-file-data :tempfile)\n    --- End diff --\n    \n    I am guessing these things get set as part of multipart wrapper magic?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-24T19:58:03.091+0000","updated":"2015-03-24T19:58:03.091+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14378475","id":"14378475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/464#discussion_r27067015\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/core.clj ---\n    @@ -982,7 +1019,23 @@\n             (.killTopologyWithOpts nimbus name options)\n             (log-message \"Killing topology '\" name \"' with wait time: \" wait-time \" secs\")))\n         (json-response (topology-op-response id \"kill\") (m \"callback\")))\n    -\n    +  (POST \"/api/v1/uploadTopology\" [:as {:keys [cookies servlet-request]} id & params]\n    +        (let [valid-tplg (validate-tplg-submit-params params)\n    +              valid (valid-tplg :valid)]\n    +          (log-message \"valid topology \" valid-tplg)\n    +          (if (= valid true)\n    +            (let [tplg-file-data (params :topologyJar)\n    +                  tplg-temp-file (tplg-file-data :tempfile)\n    --- End diff --\n    \n    @Parth-Brahmbhatt yep its being handled by multi-part\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-24T20:01:40.571+0000","updated":"2015-03-24T20:01:40.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14378478","id":"14378478","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user Parth-Brahmbhatt commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-85670825\n  \n    I am +1, I think in order to make it work in secure mode we will need to use the doAs feature .We can ask the users to use the StormSubmitter's submitTopology method that accepts a doAs Param and ensure that they pass their userName. \n    \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-24T20:02:27.233+0000","updated":"2015-03-24T20:02:27.233+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14383549","id":"14383549","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-86873291\n  \n    When we're trying to upload first Topology with this API, I'm afraid we can't get antiForgery since no topology is submitted.\n    (Actually I'm confused about antiForgery. Does Storm allow getting antiForgery from Topology A and use it with Topology B?)\n    Please correct me if I'm wrong.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-27T09:01:01.524+0000","updated":"2015-03-27T09:01:01.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14383970","id":"14383970","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-86966516\n  \n    @HeartSaVioR  thanks for trying it out. Did you try the curl command in the docs to upload the topology? antiForgery there for to deter malicious api calls from cross site scripting. All you need is to ask the api for a token using /api/v1/token and store it in a cookie and for any subsequent calls you need to pass this token in x-csrf-header in http headers.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-27T15:06:39.494+0000","updated":"2015-03-27T15:06:39.494+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14384073","id":"14384073","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-86993357\n  \n    @HeartSaVioR @Parth-Brahmbhatt  it looks like anti-forgery requires users to store the ring-session id and along with passing x-csrf-token in headers. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-27T16:18:52.581+0000","updated":"2015-03-27T16:18:52.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14384729","id":"14384729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87098232\n  \n    @harshach Oh, I'm sorry I missed token api. \n    Maybe it's better to modify documentation about ```Cross site request forgery (CSRF) prevention in POST requests``` to call token api to get antiForgery.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-27T21:37:00.118+0000","updated":"2015-03-27T21:37:00.118+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14386508","id":"14386508","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87623121\n  \n    I just build dist from your branch, and modifies wurstmeister docker to apply your branch during build.\n    \n    Binary dist : https://www.dropbox.com/s/ldm9t76cm43zqdf/apache-storm-0.10.0-SNAPSHOT.tar.gz?dl=0\n    \n    I gave a try with using a token and ring-session (cookie) but failed.\n    \n    ```\n    HTTP/1.1 100 Continue\n    \n    HTTP/1.1 200 OK\n    Date: Mon, 30 Mar 2015 10:10:31 GMT\n    Cache-Control: no-cache, no-store\n    Content-Type: application/json;charset=utf-8\n    Content-Length: 55\n    Server: Jetty(7.6.13.v20130916)\n    \n    {\"error\":\"Failed to deploy topology\",\"status\":\"failed\"}\n    ```\n    \n    Here's UI log.\n    ```\n    2015-03-30 10:10:42 b.s.u.core [INFO] topology cmd {:exit 1, :out \"434  [main] INFO  backtype.storm.StormSubmitter - Generated ZooKeeper secret payload for MD5-digest: -5707587195506149327:-9132844115790108814\\n439  [main] INFO  backtype.storm.security.auth.AuthUtils - Got AutoCreds []\\n450  [main] INFO  backtype.storm.utils.StormBoundedExponentialBackoffRetry - The baseSleepTimeMs [2000] the maxSleepTimeMs [60000] the maxRetries [5]\\n\", :err \"Exception in thread \\\"main\\\" java.lang.RuntimeException: org.apache.thrift7.transport.TTransportException: java.net.ConnectException: Connection refused\\n\\tat backtype.storm.security.auth.TBackoffConnect.retryNext(TBackoffConnect.java:59)\\n\\tat backtype.storm.security.auth.TBackoffConnect.doConnectWithRetry(TBackoffConnect.java:51)\\n\\tat backtype.storm.security.auth.ThriftClient.reconnect(ThriftClient.java:103)\\n\\tat backtype.storm.security.auth.ThriftClient.<init>(ThriftClient.java:72)\\n\\tat backtype.storm.utils.NimbusClient.<init>(NimbusClient.java:62)\\n\\tat backtype.storm.utils.NimbusClient.getConfiguredClientAs(NimbusClient.java:46)\\n\\tat backtype.storm.StormSubmitter.submitTopologyAs(StormSubmitter.java:225)\\n\\tat backtype.storm.StormSubmitter.submitTopology(StormSubmitter.java:271)\\n\\tat backtype.storm.StormSubmitter.submitTopologyWithProgressBar(StormSubmitter.java:307)\\n\\tat backtype.storm.StormSubmitter.submitTopologyWithProgressBar(StormSubmitter.java:288)\\n\\tat storm.starter.WordCountTopology.main(WordCountTopology.java:94)\\nCaused by: org.apache.thrift7.transport.TTransportException: java.net.ConnectException: Connection refused\\n\\tat org.apache.thrift7.transport.TSocket.open(TSocket.java:187)\\n\\tat org.apache.thrift7.transport.TFramedTransport.open(TFramedTransport.java:81)\\n\\tat backtype.storm.security.auth.SimpleTransportPlugin.connect(SimpleTransportPlugin.java:102)\\n\\tat backtype.storm.security.auth.TBackoffConnect.doConnectWithRetry(TBackoffConnect.java:48)\\n\\t... 9 more\\nCaused by: java.net.ConnectException: Connection refused\\n\\tat java.net.PlainSocketImpl.socketConnect(Native Method)\\n\\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\\n\\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\\n\\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\\n\\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\\n\\tat java.net.Socket.connect(Socket.java:579)\\n\\tat org.apache.thrift7.transport.TSocket.open(TSocket.java:182)\\n\\t... 12 more\\n\"}\n    2015-03-30 10:11:14 b.s.thrift [INFO] Connecting to Nimbus at 172.17.0.62:6627 as user:\n    ...\n    2015-03-30 10:11:14 b.s.u.StormBoundedExponentialBackoffRetry [INFO] The baseSleepTimeMs [2000] the maxSleepTimeMs [60000] the maxRetries [5]\n    ...\n    ```\n    \n    Seems like UI server can reach Nimbus Thrift port, I've confirmed with telnet.\n    Does 0.10.x run into security mode as default? I didn't modify configuration file from 0.9.3.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-30T10:17:02.379+0000","updated":"2015-03-30T10:17:02.379+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387581","id":"14387581","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87874852\n  \n    @HeartSaVioR Thanks for testing it out. I ran few tests with your dropbox link. For starters your apache-storm-0.10-SNAPSHOT contains two different versions of clojure libs under lib folder. Delete clojure-1.5.1.jar and started a single node cluster. \n    \n    curl -i --negotiate -u : -b ~/cookiejar.txt -c ~/cookiejar.txt  http://localhost:8080/api/v1/token \n    The above call stores the ring-session id in the cookiejar.txt\n    \n    curl  -i --negotiate -u : -b ~/cookiejar.txt -c ~/cookiejar.txt -X POST  -H 'x-csrf-token: jz8utSXi0PM1timC5phUelnMaYxcRGba8PEHWL1yU2WEQL59zwijyP4GjWv/uhDWUJAD7tS50vyF8R4E'  -F  topologyConfig='{\"topologyMainClass\": \"storm.starter.WordCountTopology\", \"topologyMainClassArgs\": [\"wordcount1\"]}' -F topologyJar=@examples/storm-starter/storm-starter-topologies-0.10.0-SNAPSHOT.jar http://localhost:8080/api/v1/uploadTopology\n    HTTP/1.1 100 Continue\n    \n    HTTP/1.1 200 OK\n    Date: Mon, 30 Mar 2015 23:18:45 GMT\n    Cache-Control: no-cache, no-store\n    Content-Type: application/json;charset=utf-8\n    Content-Length: 20\n    Server: Jetty(7.6.13.v20130916)\n    \n    {\"status\":\"success\"}\n    \n    ![stormui-uploadtopology](https://cloud.githubusercontent.com/assets/38649/6909250/f7032426-d6f8-11e4-98f7-9ce44651110d.png)\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-30T23:22:35.735+0000","updated":"2015-03-30T23:22:35.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387582","id":"14387582","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach closed the pull request at:\n\n    https://github.com/apache/storm/pull/464\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-30T23:22:36.160+0000","updated":"2015-03-30T23:22:36.160+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387583","id":"14387583","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user harshach reopened a pull request:\n\n    https://github.com/apache/storm/pull/464\n\n    STORM-615. Add REST API to upload topology.\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/harshach/incubator-storm STORM-615-V2\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/464.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #464\n    \n----\ncommit d18508e6def0000a4d790002d2512c2905aa6a76\nAuthor: Sriharsha Chintalapani <mail@harsha.io>\nDate:   2015-03-12T20:58:31Z\n\n    STORM-615. Add REST API to upload topology.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-30T23:22:39.884+0000","updated":"2015-03-30T23:22:39.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387731","id":"14387731","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87889571\n  \n    @harshach Harsha, I re-download my link and extract it, and can't find two clojure files from lib directory.\n    ```\n    $ find . -name \"clojure*\"\n    ./lib/clojure-1.6.0.jar\n    ```\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T00:53:46.560+0000","updated":"2015-03-31T00:53:46.560+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387750","id":"14387750","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87891309\n  \n    @HeartSaVioR  not sure I might be looking at some other file.  I downloaded the file linked and ran a single node cluster don't see any issue with uploadTopology. Can you give it try again.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T01:06:44.143+0000","updated":"2015-03-31T01:06:44.143+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387765","id":"14387765","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87892365\n  \n    @harshach OK. I'll try again.\n    Btw, could you try uploading with multi-nodes cluster? Maybe wurstmeister docker seems fine.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T01:16:45.564+0000","updated":"2015-03-31T01:16:45.564+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387839","id":"14387839","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87903618\n  \n    @HeartSaVioR I didn't tried with the docker. But looking at your error from your earlier request it doesn't look storm UI is not able to reach the nimbus. Did you try logging into storm UI docker instance and tried to deploy a topology?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T02:24:48.453+0000","updated":"2015-03-31T02:24:48.453+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387872","id":"14387872","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87910582\n  \n    @HeartSaVioR  I did tested multi-node cluster before opening a PR. Ran another test with your apache-storm.tar.gz using the vagrant setup.\n    \n    https://github.com/harshach/storm-vagrant\n    you can drop in the apache-storm.tar.gz . Make sure bin/storm has execute permissions the link you've doesn't and convert it into zip file.\n    vagrant up will create multinode storm cluster(1 zk, 1 nimbus, 2 supervisors)\n    \n    curl -i --negotiate -u : -b ~/cookiejar.txt -c ~/cookiejar.txt  http://nimbus.witzend.com:8080/api/v1/token       ◉ ◼◼◼◼◼◼◼◼◻◻\n    HTTP/1.1 200 OK\n    Date: Tue, 31 Mar 2015 02:46:05 GMT\n    Set-Cookie: ring-session=64ce2e4d-d62b-4e45-8cd0-4c778948d7b5;Path=/\n    Cache-Control: no-cache, no-store\n    Content-Type: application/json;charset=utf-8\n    Content-Length: 104\n    Server: Jetty(7.6.13.v20130916)\n    \n    {\"antiForgeryToken\": \"wMYtcaNy8yA90jacPXw+BK4vE0w6c748shhtvr6HYeR1lhpFsO+1k2CSIMq+GUqpTnuwwn8/tDUbPyEK\"}\n    \n    \n    Here is the output of uploadTopology\n    \n     curl  -i --negotiate -u : -b ~/cookiejar.txt -c ~/cookiejar.txt -X POST  -H 'x-csrf-token: wMYtcaNy8yA90jacPXw+BK4vE0w6c748shhtvr6HYeR1lhpFsO+1k2CSIMq+GUqpTnuwwn8/tDUbPyEK'  -F  topologyConfig='{\"topologyMainClass\": \"storm.starter.WordCountTopology\", \"topologyMainClassArgs\": [\"wordcount1\"]}' -F topologyJar=@examples/storm-starter/storm-starter-topologies-0.10.0-SNAPSHOT.jar http://nimbus.witzend.com:8080/api/v1/uploadTopology\n    HTTP/1.1 100 Continue\n    \n    HTTP/1.1 200 OK\n    Date: Tue, 31 Mar 2015 02:48:38 GMT\n    Cache-Control: no-cache, no-store\n    Content-Type: application/json;charset=utf-8\n    Content-Length: 20\n    Server: Jetty(7.6.13.v20130916)\n    \n    {\"status\":\"success\"}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T02:52:46.124+0000","updated":"2015-03-31T02:52:46.124+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14387874","id":"14387874","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-87911469\n  \n    @harshach Maybe there could be broken configuration. I'll fix it and retry. Thanks!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T02:54:03.723+0000","updated":"2015-03-31T02:54:03.723+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388356","id":"14388356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88039031\n  \n    @harshach \n    I'm seeing failed message again. I ran a ```storm jar``` from UI container's shell and it works well.\n    UI shows topology information nicely, which may tell connection between UI and Nimbus Thrift is valid.\n    Killing topology with API also works well.\n    \n    Below is error logs from UI container.\n    ```\n    2015-03-31 09:54:29 b.s.u.core [INFO] topology cmd {:exit 1, :out \"428  [main] INFO  backtype.storm.StormSubmitter - Generated ZooKeeper secret payload for MD5-digest: -5597653866246168988:-6838346593417745091\\n432  [main] INFO  backtype.storm.security.auth.AuthUtils - Got AutoCreds []\\n442  [main] INFO  backtype.storm.utils.StormBoundedExponentialBackoffRetry - The baseSleepTimeMs [2000] the maxSleepTimeMs [60000] the maxRetries [5]\\n\", :err \"Exception in thread \\\"main\\\" java.lang.RuntimeException: org.apache.thrift7.transport.TTransportException: java.net.ConnectException: Connection refused\\n\\tat backtype.storm.security.auth.TBackoffConnect.retryNext(TBackoffConnect.java:59)\\n\\tat backtype.storm.security.auth.TBackoffConnect.doConnectWithRetry(TBackoffConnect.java:51)\\n\\tat backtype.storm.security.auth.ThriftClient.reconnect(ThriftClient.java:103)\\n\\tat backtype.storm.security.auth.ThriftClient.<init>(ThriftClient.java:72)\\n\\tat backtype.storm.utils.NimbusClient.<init>(NimbusClient.java:62)\\n\\tat backtype.storm.utils.NimbusClient.getConfiguredClientAs(NimbusClient.java:46)\\n\\tat backtype.storm.StormSubmitter.submitTopologyAs(StormSubmitter.java:225)\\n\\tat backtype.storm.StormSubmitter.submitTopology(StormSubmitter.java:271)\\n\\tat backtype.storm.StormSubmitter.submitTopologyWithProgressBar(StormSubmitter.java:307)\\n\\tat backtype.storm.StormSubmitter.submitTopologyWithProgressBar(StormSubmitter.java:288)\\n\\tat storm.starter.WordCountTopology.main(WordCountTopology.java:94)\\nCaused by: org.apache.thrift7.transport.TTransportException: java.net.ConnectException: Connection refused\\n\\tat org.apache.thrift7.transport.TSocket.open(TSocket.java:187)\\n\\tat org.apache.thrift7.transport.TFramedTransport.open(TFramedTransport.java:81)\\n\\tat backtype.storm.security.auth.SimpleTransportPlugin.connect(SimpleTransportPlugin.java:102)\\n\\tat backtype.storm.security.auth.TBackoffConnect.doConnectWithRetry(TBackoffConnect.java:48)\\n\\t... 9 more\\nCaused by: java.net.ConnectException: Connection refused\\n\\tat java.net.PlainSocketImpl.socketConnect(Native Method)\\n\\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\\n\\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\\n\\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\\n\\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\\n\\tat java.net.Socket.connect(Socket.java:579)\\n\\tat org.apache.thrift7.transport.TSocket.open(TSocket.java:182)\\n\\t... 12 more\\n\"}\n    ```\n    \n    I tried it into UI container shell and failed again.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T10:47:49.257+0000","updated":"2015-03-31T10:47:49.257+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388373","id":"14388373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88043963\n  \n    @harshach \n    Maybe we can check this.\n    \n    I'm running Storm with STORM_HOME/conf/storm.yaml, and I don't make ~/.storm directory.\n    \n    ```\n    root        14  2.5  7.2 3264920 149328 ?      Sl   09:53   1:33 java -server -Dstorm.options= -Dstorm.home=/opt/apache-storm-0.10.0-SNAPSHOT -Dstorm.log.dir=/opt/apache-storm-0.10.0-SNAPSHOT/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /opt/apache-storm-0.10.0-SNAPSHOT/lib/cheshire-5.3.1.jar:...\n    ```\n    \n    When we submit Topology by API, classpath is ```storm-libs (str storm-home file-path-separator \"lib\" file-path-separator \"*\")```, which is only STORM_HOME/lib/*, and jar file itself.\n    \n    But storm.py finds effective configuration directory and add it to classpath, which is different from current implementation.\n    ```\n    if STORM_CONF_DIR == None:\n        CLUSTER_CONF_DIR = os.path.join(STORM_DIR, \"conf\")\n    else:\n        CLUSTER_CONF_DIR = STORM_CONF_DIR\n    \n    if (not os.path.isfile(os.path.join(USER_CONF_DIR, \"storm.yaml\"))):\n        USER_CONF_DIR = CLUSTER_CONF_DIR\n    ```\n    \n    If we need to use cluster-wide effective configuration while submitting topology, we should include effective configuration directory.\n    \n    Btw, other APIs (which use  ```with-nimbus``` macro) seems to run fine. I'm curious it could be represented to ```with-nimbus```.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T11:05:03.609+0000","updated":"2015-03-31T11:05:03.609+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388398","id":"14388398","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88056652\n  \n    @harshach Oh, it would be very hard to submit topology directly (from jetty), so your approach is enough reasonable. Maybe loading cluster-wide configuration directory would be enough.  Same location as UI uses)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T11:48:22.576+0000","updated":"2015-03-31T11:48:22.576+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388514","id":"14388514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88083643\n  \n    @HeartSaVioR I am not sure I follow. The examples I gave and the tests I ran I never created ~/.storm/storm.yaml.  I am not sure if you are testing it right. Once the jar is uploaded storm ui does a shell command for storm jar and it effectively finds the STORM_HOME/conf/storm.yaml as the cluster config .\n    If storm.conf.file is not passed it will look under STORM_HOME/conf/storm.yaml\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T13:26:08.500+0000","updated":"2015-03-31T13:26:08.500+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388516","id":"14388516","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88083784\n  \n    @HeartSaVioR can you atleast try with a single node cluster before going and testing with docker\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T13:27:03.188+0000","updated":"2015-03-31T13:27:03.188+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388641","id":"14388641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88117340\n  \n    @HeartSaVioR do give details on you docker setup. I'll try to reproduce the issue. I can't reproduce in the vagrant setup or single node.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T14:49:31.665+0000","updated":"2015-03-31T14:49:31.665+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388648","id":"14388648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/464#discussion_r27486303\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/core.clj ---\n    @@ -503,6 +505,41 @@\n                   (hashmap-to-persistent bolts))\n            spout-comp-summs bolt-comp-summs window id))))\n     \n    +(defn validate-tplg-submit-params [params]\n    +  (let [tplg-jar-file (params :topologyJar)\n    +        tplg-config (if (not-nil? (params :topologyConfig)) (from-json (params :topologyConfig)))]\n    +    (cond\n    +     (nil? tplg-jar-file) {:valid false :error \"missing topology jar file\"}\n    +     (nil? tplg-config) {:valid false :error \"missing topology config\"}\n    +     (nil? (tplg-config \"topologyMainClass\")) {:valid false :error \"topologyMainClass missing in topologyConfig\"}\n    +     :else {:valid true})))\n    +\n    +(defn run-tplg-submit-cmd [tplg-jar-file tplg-config]\n    +  (let [tplg-main-class (if (not-nil? tplg-config) (trim (tplg-config \"topologyMainClass\")))\n    +        tplg-main-class-args (if (not-nil? tplg-config) (clojure.string/join \" \" (tplg-config \"topologyMainClassArgs\")))\n    +        tplg-jvm-opts (if (not-nil? tplg-config) (clojure.string/join \" \" (tplg-config \"topologyJvmOpts\")))\n    +        storm-home (System/getProperty \"storm.home\")\n    +        storm-log-dir (if (not-nil? (*STORM-CONF* \"storm.log.dir\")) (*STORM-CONF* \"storm.log.dir\")\n    +                          (str storm-home file-path-separator \"logs\"))\n    +        storm-libs (str storm-home file-path-separator \"lib\" file-path-separator \"*\")\n    --- End diff --\n    \n    @harshach \n    Replacing this line with ```storm-libs (clojure.string/join \":\" [(str storm-home file-path-separator \"lib\" file-path-separator \"*\") (str storm-home file-path-separator \"conf\")])``` make it works.\n    \n    But it's just a workaround cause users may set STORM_CONF_DIR.\n    \n    ```\n    if STORM_CONF_DIR == None:\n        CLUSTER_CONF_DIR = os.path.join(STORM_DIR, \"conf\")\n    else:\n        CLUSTER_CONF_DIR = STORM_CONF_DIR\n    \n    if (not os.path.isfile(os.path.join(USER_CONF_DIR, \"storm.yaml\"))):\n        USER_CONF_DIR = CLUSTER_CONF_DIR\n    ```\n    \n    USER_CONF_DIR will become one of classpath. storm-libs should follow this rule, except applying ~/.storm directory cause this is cluster-side operation.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T14:54:24.872+0000","updated":"2015-03-31T14:54:24.872+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388652","id":"14388652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88119894\n  \n    @harshach I make it works with some fix, but it's just a workaround so some more works should be taken place. Or if we ensure that UI node has python, it's better to call storm.py instead of JVM.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T14:56:15.747+0000","updated":"2015-03-31T14:56:15.747+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388656","id":"14388656","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88120666\n  \n    @harshach Maybe you can reproduce this issue by doing some modification to STORM_DIR/conf/storm.yaml and do uploadTopology, and see topology's configuration.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T14:58:09.983+0000","updated":"2015-03-31T14:58:09.983+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388666","id":"14388666","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88122113\n  \n    @HeartSaVioR  \"UI node has python, it's better to call storm.py instead of JVM.\" . Can you elaborate on this without python installed on the UI node you won't be able to start storm UI daemon itself. \n    What you need to do to make it work can you add those details\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:01:09.022+0000","updated":"2015-03-31T15:01:09.022+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388674","id":"14388674","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88123831\n  \n    @harshach Oh, sorry I was mistaken. Then how about calling ```storm.py jar ~~~``` instead of java? \n    storm.py takes care of bootstrapping phase, and add proper classpaths if it needs.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:04:12.729+0000","updated":"2015-03-31T15:04:12.729+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388676","id":"14388676","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88126334\n  \n    @HeartSaVioR  Are you saying java command is not in path. I would like to know whats the error you are  facing. Its not able to find the storm.conf.file and unable to connect to nimbus.host? . Let me try changing it to storm.py and see if that fixes the issue and also you are using https://github.com/wurstmeister/storm-docker . Can it reproduce the issue if I use the dropbox link you provided?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:09:55.166+0000","updated":"2015-03-31T15:09:55.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388693","id":"14388693","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88129861\n  \n    @harshach \n    Let me elaborate current issue.\n    \n    1. UI process is fine. UI can communicate with Nimbus.\n    2. Please see full stack trace. Exception occurred from storm.starter.WordCountTopology.main, which implies root cause is ```TopologySubmitter cannot connect Nimbus thrift port```. We already know UI can communicate with Nimbus.\n    \n    2015-03-30 10:10:42 b.s.u.core [INFO] topology cmd {:exit 1, :out \"434  [main] INFO  backtype.storm.StormSubmitter - Generated ZooKeeper secret payload for MD5-digest: -5707587195506149327:-9132844115790108814\\n439  [main] INFO  backtype.storm.security.auth.AuthUtils - Got AutoCreds []\\n450  [main] INFO  backtype.storm.utils.StormBoundedExponentialBackoffRetry - The baseSleepTimeMs [2000] the maxSleepTimeMs [60000] the maxRetries [5]\\n\", :err \"Exception in thread \\\"main\\\" java.lang.RuntimeException: org.apache.thrift7.transport.TTransportException: java.net.ConnectException: Connection refused\\n\\tat backtype.storm.security.auth.TBackoffConnect.retryNext(TBackoffConnect.java:59)\\n\\tat backtype.storm.security.auth.TBackoffConnect.doConnectWithRetry(TBackoffConnect.java:51)\\n\\tat backtype.storm.security.auth.ThriftClient.reconnect(ThriftClient.java:103)\\n\\tat backtype.storm.security.auth.ThriftClient.<init>(ThriftClient.java:72)\\n\\tat backtype.storm.utils.NimbusClient.<init>(NimbusClient.java:62)\\n\\tat backtype.storm.utils.NimbusClient.getConfiguredClientAs(NimbusClient.java:46)\\n\\tat backtype.storm.StormSubmitter.submitTopologyAs(StormSubmitter.java:225)\\n\\tat backtype.storm.StormSubmitter.submitTopology(StormSubmitter.java:271)\\n\\tat backtype.storm.StormSubmitter.submitTopologyWithProgressBar(StormSubmitter.java:307)\\n\\tat backtype.storm.StormSubmitter.submitTopologyWithProgressBar(StormSubmitter.java:288)\\n\\tat storm.starter.WordCountTopology.main(WordCountTopology.java:94)\\nCaused by: org.apache.thrift7.transport.TTransportException: java.net.ConnectException: Connection refused\\n\\tat org.apache.thrift7.transport.TSocket.open(TSocket.java:187)\\n\\tat org.apache.thrift7.transport.TFramedTransport.open(TFramedTransport.java:81)\\n\\tat backtype.storm.security.auth.SimpleTransportPlugin.connect(SimpleTransportPlugin.java:102)\\n\\tat backtype.storm.security.auth.TBackoffConnect.doConnectWithRetry(TBackoffConnect.java:48)\\n\\t... 9 more\\nCaused by: java.net.ConnectException: Connection refused\\n\\tat java.net.PlainSocketImpl.socketConnect(Native Method)\\n\\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\\n\\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\\n\\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\\n\\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\\n\\tat java.net.Socket.connect(Socket.java:579)\\n\\tat org.apache.thrift7.transport.TSocket.open(TSocket.java:182)\\n\\t... 12 more\\n\"}\n    \n    3. Adding ```(log-message (str storm-libs \":\" tplg-jar-file))``` before ```(log-message \"topology cmd \" tplg-cmd-response)``` helps debugging what classpath is applied with TopologySubmitter. Without my patch it just prints out ```/opt/apache-storm-0.10.0-SNAPSHOT/lib/*:/tmp/storm-starter-topologies-0.10.0-SNAPSHOT.jar```, which is not same as ```storm jar```.\n    \n    4. Seems like TopologySubmitter cannot see storm.conf during uploadTopology. It's another way to reproduce.\n    \n    I'll try to make docker image, but I'm having hard time to reflect new binary dist to docker image, so I manually connect UI container by ssh and replace storm-core jar file to continue. \n    \n    My patched storm-core is https://www.dropbox.com/s/r7jb0w5uai5azjr/storm-core-0.10.0-SNAPSHOT.jar?dl=0\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:20:33.566+0000","updated":"2015-03-31T15:20:33.566+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388701","id":"14388701","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88130360\n  \n    @harshach Btw, I'm sorry to being confused due to my short English.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:22:40.072+0000","updated":"2015-03-31T15:22:40.072+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388722","id":"14388722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88137143\n  \n    @HeartSaVioR As I said earlier if you can test it in single node installation and see the same issue. I can look at it. It looks like you are hacking around docker setup and I am not sure how much of that it contributing to the issue you are seeing. If you want to test it in multi node env I provided Vagrant instructions above. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:39:10.052+0000","updated":"2015-03-31T15:39:10.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388726","id":"14388726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88138160\n  \n    @harshach OK, I'd like to reproduce current issue with Vagrant setup. Could you explain instruction? \n    \n    Btw, I've uploaded my docker setup to https://github.com/HeartSaVioR/storm-docker/tree/WIP-STORM-615-V2\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:43:53.750+0000","updated":"2015-03-31T15:43:53.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388728","id":"14388728","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user Parth-Brahmbhatt commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88138647\n  \n    @harshach @HeartSaVioR FYI, I tested this with upmerge to master and it works fine on my mac. No configs needed to be added, no storm.yaml created. Worked fine out of the box on a single host setup. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:45:56.896+0000","updated":"2015-03-31T15:45:56.896+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388737","id":"14388737","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88140228\n  \n    Important point is that in docker setup it writes Nimbus IP and PORT to storm.yaml.\n    ```\n    root@433d02f34915:/opt/apache-storm-0.10.0-SNAPSHOT/conf# cat storm.yaml\n    storm.zookeeper.servers:\n        - \"172.17.0.18\"\n    nimbus.host: \"172.17.0.19\"\n    nimbus.thrift.port: 6627\n    drpc.servers:\n      - \"172.17.0.19\"\n    drpc.port: 3772\n    drpc.invocations.port: 3773\n    storm.local.hostname: 172.17.0.21\n    ```\n    \n    I'm thinking it may raise an issue if storm.yaml is differ from defaults.yaml. \n    TopologySubmitter could use default values so if cluster is set up to be no problem with default config, we can't reproduce this issue.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T15:50:48.055+0000","updated":"2015-03-31T15:50:48.055+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14388770","id":"14388770","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88151079\n  \n    @HeartSaVioR Thanks for the details. You did find a valid bug if the storm ui is not running on the same host as nimbus the same issue you are seeing happening as it finds the default.yaml nimbus.host and port not the one in storm.home/conf/storm.yaml. Let me send the updated pr.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T16:16:58.866+0000","updated":"2015-03-31T16:16:58.866+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14389435","id":"14389435","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88254339\n  \n    @harshach Thanks for understanding. :) \n    Just calling ```storm.py jar``` may work well, but still need to test more.\n    I hope I can see this feature ASAP in a released version as I wanna use control features of topology.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-31T21:20:36.083+0000","updated":"2015-03-31T21:20:36.083+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14389741","id":"14389741","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88292492\n  \n    @HeartSaVioR  can you try with the latest PR.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-01T00:24:15.035+0000","updated":"2015-04-01T00:24:15.035+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14389828","id":"14389828","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88302906\n  \n    @harshach It works! Great! +1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-01T01:20:42.934+0000","updated":"2015-04-01T01:20:42.934+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14389837","id":"14389837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-88304330\n  \n    Btw, I've uploaded new image \"heartsavior/storm:WIP-STORM-615-V2\" and also push https://github.com/heartsavior/storm-docker/tree/WIP-STORM-615-V2 to apply new image.\n    You can play it with my docker & fig.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-01T01:29:00.082+0000","updated":"2015-04-01T01:29:00.082+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14389940","id":"14389940","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/464\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-01T03:43:27.828+0000","updated":"2015-04-01T03:43:27.828+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14625864","id":"14625864","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arunmahadevan","name":"arunmahadevan","key":"arunmahadevan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Mahadevan","active":true,"timeZone":"Asia/Kolkata"},"body":"Since the earlier approach of invoking external shell command from ui server had security concerns, the code was reverted.\n\nAs an alternative, instead of REST api invoking external shell command, have the api load the uploaded topology jar via a URLClassloader and invoke the main method containing the topology build/submit code using reflection. \n\nFor addressing the security issues of executing user submitted code (as ui server process user), \n(1) we could limit the permissions using java security policy files (https://docs.oracle.com/javase/7/docs/technotes/guides/security/PolicyFiles.html)\n similar to what is done by web-containers for restricting what can be done by servlets. \n\n(2) recommend that the ui/server be started by a user not having superuser privileges.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arunmahadevan","name":"arunmahadevan","key":"arunmahadevan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Mahadevan","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-07-14T05:54:49.818+0000","updated":"2015-07-14T05:54:49.818+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14626548","id":"14626548","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~revans2] do you have any suggestions on above approach.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-14T15:58:23.708+0000","updated":"2015-07-14T15:58:23.708+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/14626595","id":"14626595","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Using policy files would work to prevent the code from doing bad things in the OS as a privileged user.  But I don't think it solves the issue if authentication with nimbus still.  No matter how we run the user code it still needs to authenticate with nimbus.  We need to give the that code credentials to do so.  We cannot use the UI user's credentials to do it because the end user could steal them, unless we do something where we hand the code a nimbus connection that is already authenticated and locked down in such a way that nimbus will enforce it being the user that we want.  But that code does not currently exist, either on the client side or not the nimbus side.\n\nIf we are going to make big changes like that I would much rather have us look at flux, and see if we can submit a topology with a jar, and a config file.  Possibly having both of them in a single jar file.  Instead of having the bolts and spouts deserialized in the worker, we could call a constructor and instantiate them directly in the worker, like what flux does.  There is already a thrift definition for some of this, but I am not sure how advanced/tested it is, or what changes we would need to make to flux to support it.  With this we no longer need to run any user code outside of the worker at all, or load an untrusted jar file.  We just read the config file and submit the topology using the proxy settings.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2015-07-14T16:29:48.679+0000","updated":"2015-07-14T16:29:48.679+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12764947/comment/15211604","id":"15211604","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user salimane commented on the pull request:\n\n    https://github.com/apache/storm/pull/464#issuecomment-201204396\n  \n    @harshach  i can't seem to find the upload rest api in the rest api docs anymore. Has anything changed ?\n    Thanks\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-25T08:48:24.502+0000","updated":"2016-03-25T08:48:24.502+0000"}],"maxResults":46,"total":46,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-615/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i23ylz:"}}