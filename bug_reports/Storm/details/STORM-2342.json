{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13040224","self":"https://issues.apache.org/jira/rest/api/2/issue/13040224","key":"STORM-2342","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/10003","id":"10003","description":"Resolved","name":"Resolved"},"customfield_12312322":null,"customfield_12310220":"2017-07-20T00:05:24.954+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Nov 24 04:09:14 UTC 2017","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_24487297668_*|*_6_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2017-11-14T06:09:57.217+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2342/watchers","watchCount":9,"isWatching":false},"created":"2017-02-03T20:08:19.625+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335747","id":"12335747","name":"1.0.2","archived":false,"released":true,"releaseDate":"2016-08-10"}],"customfield_12312339":null,"issuelinks":[],"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-11-24T04:09:14.707+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12331080","id":"12331080","name":"storm-kafka-client"}],"timeoriginalestimate":null,"description":"I've created a topology that will read from kafka using storm-kafka-client but when it reaches the last message on kafka log it stops consuming and get stuck, new messages are never consumed, here are the kafka logs:\n{quote}\n[2017-02-03 19:15:26,865] INFO [GroupCoordinator 1002]: Preparing to restabilize group kafka-spout with old generation 29 (kafka.coordinator.GroupCoordinator)\n[2017-02-03 19:15:26,865] INFO [GroupCoordinator 1002]: Stabilized group kafka-spout generation 30 (kafka.coordinator.GroupCoordinator)\n[2017-02-03 19:15:26,868] INFO [GroupCoordinator 1002]: Assignment received from leader for group kafka-spout for generation 30 (kafka.coordinator.GroupCoordinator)\n{quote}\n========= here storm starts consuming messages, then, when it hits the last message, I can see this log in kafka == >\n{quote}\n[2017-02-03 19:16:01,266] INFO [GroupCoordinator 1002]: Preparing to restabilize group kafka-spout with old generation 30 (kafka.coordinator.GroupCoordinator)\n[2017-02-03 19:16:01,266] INFO [GroupCoordinator 1002]: Group kafka-spout with generation 31 is now empty (kafka.coordinator.GroupCoordinator)\n{quote}\n=====\nand then storm consumer group is stuck, no new messages are read from kafka. my topology/ spout are configured that way:\n\n*Topology:*\n\n      c.put(SConfig.TOPOLOGY_MAX_SPOUT_PENDING, 1000)\n      c.put(SConfig.NIMBUS_SEEDS, \"my nimbus seeds\")\n      c.put(SConfig.NIMBUS_THRIFT_PORT, 6627)\n      c.put(SConfig.TOPOLOGY_WORKERS, 2)      c.put(SConfig.TOPOLOGY_SLEEP_SPOUT_WAIT_STRATEGY_TIME_MS, 100)\n\n*Spout:*\n\n    props.put(KafkaSpoutConfig.Consumer.ENABLE_AUTO_COMMIT, true)\n    props.put(KafkaSpoutConfig.Consumer.BOOTSTRAP_SERVERS, ...)\n    props.put(KafkaSpoutConfig.Consumer.GROUP_ID, \"kafka-spout\")\n    props.put(KafkaSpoutConfig.Consumer.KEY_DESERIALIZER, keyDeserializer)\n    props.put(KafkaSpoutConfig.Consumer.VALUE_DESERIALIZER, valueDeserializer)\n \nAlso the offsets are not seeming to be committed, despite I've set *enable.auto.commit* and *auto.commit.interval.ms* properties, because if I kill the topology and send it again, the same messages are being reprocessed...\n\n any hints?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"storm-kafka-client consumer group getting stuck consuming from kafka 0.10.1.1","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=felipejfc","name":"felipejfc","key":"felipejfc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Felipe Cavalcanti","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=felipejfc","name":"felipejfc","key":"felipejfc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Felipe Cavalcanti","active":true,"timeZone":"Etc/UTC"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040224/comment/16093987","id":"16093987","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hmclouro","name":"hmclouro","key":"hmclouro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hugo Louro","active":true,"timeZone":"Etc/UTC"},"body":"[~felipejfc] Do you still see this problem? Can you please paste the output of {code:java}\nSTORM_HOME/bin/storm version\n{code}\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hmclouro","name":"hmclouro","key":"hmclouro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hugo Louro","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-20T00:05:24.954+0000","updated":"2017-07-20T00:05:37.299+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040224/comment/16109904","id":"16109904","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Preet","name":"Preet","key":"preet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Preet Puri","active":true,"timeZone":"Etc/UTC"},"body":"Any update on this. Having similar issue. if I kill the topology and start it again, the same messages are being reprocessed. Don't see offset updated in Kafka/Zookeeper?\n\nstorm core version - 1.1.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Preet","name":"Preet","key":"preet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Preet Puri","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-01T22:31:20.905+0000","updated":"2017-08-01T22:31:20.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040224/comment/16109916","id":"16109916","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=felipejfc","name":"felipejfc","key":"felipejfc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Felipe Cavalcanti","active":true,"timeZone":"Etc/UTC"},"body":"its working ok now after updating storm to a newer version","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=felipejfc","name":"felipejfc","key":"felipejfc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Felipe Cavalcanti","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-01T22:36:14.275+0000","updated":"2017-08-01T22:36:14.275+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040224/comment/16110185","id":"16110185","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Preet","name":"Preet","key":"preet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Preet Puri","active":true,"timeZone":"Etc/UTC"},"body":"I am using KafkaTridentSpoutOpaque and using latest storm? I don't see Kafka consumer offset topic updated with Consumer Group Id (assigned to Spout). Did you have the similar issue? Also, can someone point me to the code where we are updating the offset in kafka or zookeeper after processing the batch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Preet","name":"Preet","key":"preet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Preet Puri","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-02T02:59:24.445+0000","updated":"2017-08-02T02:59:24.445+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040224/comment/16250932","id":"16250932","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Closing as reporter commented that upgrading Storm version resolved the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2017-11-14T06:09:57.278+0000","updated":"2017-11-14T06:09:57.278+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040224/comment/16254088","id":"16254088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ivarnasi","name":"ivarnasi","key":"ivarnasi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ishwara Varnasi","active":true,"timeZone":"America/Chicago"},"body":"Hello Felipe Cavalcanti, which version did you upgrade to?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ivarnasi","name":"ivarnasi","key":"ivarnasi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ishwara Varnasi","active":true,"timeZone":"America/Chicago"},"created":"2017-11-15T20:09:47.439+0000","updated":"2017-11-15T20:09:47.439+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040224/comment/16254106","id":"16254106","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ivarnasi","name":"ivarnasi","key":"ivarnasi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ishwara Varnasi","active":true,"timeZone":"America/Chicago"},"body":"Hello Felipe, which version did you upgrade to?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ivarnasi","name":"ivarnasi","key":"ivarnasi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ishwara Varnasi","active":true,"timeZone":"America/Chicago"},"created":"2017-11-15T20:25:24.974+0000","updated":"2017-11-15T20:25:24.974+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040224/comment/16264913","id":"16264913","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rburch05","name":"rburch05","key":"rburch05","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Burcham","active":true,"timeZone":"Etc/UTC"},"body":"[~felipejfc] please can you tell us what version of storm you upgraded to?  A few of us are experiencing the the same issue.\r\n\r\nDo you think the upgrade resolved the problem, or is it possible something else that may have happened during the upgrade might have solved the problem?  For instance is it possible offsets in znode got reset, or data deleted?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rburch05","name":"rburch05","key":"rburch05","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Burcham","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-24T04:09:14.707+0000","updated":"2017-11-24T04:09:14.707+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2342/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i39lg7:"}}