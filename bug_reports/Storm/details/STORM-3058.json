{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13157103","self":"https://issues.apache.org/jira/rest/api/2/issue/13157103","key":"STORM-3058","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2018-05-04T10:31:41.773+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 07 06:42:37 UTC 2018","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_246591025_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2018-05-07T06:42:37.921+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-3058/watchers","watchCount":2,"isWatching":false},"created":"2018-05-04T10:12:46.930+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335675","id":"12335675","name":"0.10.2","archived":false,"released":true,"releaseDate":"2016-09-14"}],"customfield_12312339":null,"issuelinks":[],"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-05-07T06:42:37.952+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12324393","id":"12324393","name":"storm-kafka","description":"Storm Kafka Integration"}],"timeoriginalestimate":null,"description":"Spout in the nextTuple may pull more than one kafka message, will remain in the _waitingToEmit, and then launch one by one, even if the TOPOLOGY_MAX_SPOUT_PENDING set to 1, when the first tuple is defeated, the bolt will still receive follow-up Message until _waitingToEmit is completely transmitted.\r\n\r\nThis and I think TOPOLOGY_MAX_SPOUT_PENDING is not the same meaning, I hope that the message can be strictly processed one by one, my topology worker number, spout and bolt parallelism are set to 1","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"set TOPOLOGY_MAX_SPOUT_PENDING to one，but can get more than one tuple in bolt","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wu.yong%40neusoft.com","name":"wu.yong@neusoft.com","key":"wu.yong@neusoft.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34058","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"},"displayName":"wu.yong@neusoft.com","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wu.yong%40neusoft.com","name":"wu.yong@neusoft.com","key":"wu.yong@neusoft.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34058","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"},"displayName":"wu.yong@neusoft.com","active":true,"timeZone":"Etc/UTC"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13157103/comment/16463675","id":"16463675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"body":"Hi.\r\n\r\nPlease use English when raising issues.\r\n\r\nHere's a quick Google translate:\r\n\r\n{quote}\r\nSpout in the nextTuple may pull more than one kafka message, will remain in the _waitingToEmit, and then launch one by one, even if the TOPOLOGY_MAX_SPOUT_PENDING set to 1, when the first tuple is defeated, the bolt will still receive follow-up Message until _waitingToEmit is completely transmitted.\r\n\r\nThis and I think TOPOLOGY_MAX_SPOUT_PENDING is not the same meaning, I hope that the message can be strictly processed one by one, my topology worker number, spout and bolt parallelism are set to 1\r\n{quote}\r\n\r\nTOPOLOGY_MAX_SPOUT_PENDING is only supposed to control how many tuples are being processed in the topology at one time. The spout is free to fetch a number of messages, as long as it doesn't emit more than one at a time.\r\n\r\nIt sounds like you're looking for a way to prevent the spout from fetching more than one record at a time. I'm not sure you can do this with the storm-kafka spout, but if you upgrade to storm-kafka-client, you can set the max.poll.records property to 1, which will prevent the consumer from fetching more than one record at a time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"created":"2018-05-04T10:31:41.773+0000","updated":"2018-05-04T10:31:41.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13157103/comment/16465340","id":"16465340","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wu.yong%40neusoft.com","name":"wu.yong@neusoft.com","key":"wu.yong@neusoft.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34058","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"},"displayName":"wu.yong@neusoft.com","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~Srdo].\r\n\r\nYour answer is very helpful to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wu.yong%40neusoft.com","name":"wu.yong@neusoft.com","key":"wu.yong@neusoft.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34058","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34058","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34058","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34058"},"displayName":"wu.yong@neusoft.com","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-07T01:31:13.188+0000","updated":"2018-05-07T01:31:13.188+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13157103/comment/16465491","id":"16465491","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"body":"[~wu.yong@neusoft.com] Happy to help. Going to close this issue, since it sounds like your question was answered. Please feel free to reopen if you think there's still something we should change or talk about here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"created":"2018-05-07T06:42:37.948+0000","updated":"2018-05-07T06:42:37.948+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-3058/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3tcdj:"}}