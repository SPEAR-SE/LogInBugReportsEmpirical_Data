{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12759172","self":"https://issues.apache.org/jira/rest/api/2/issue/12759172","key":"STORM-582","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-12-03T14:45:43.864+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Mar 25 15:59:04 UTC 2015","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_17335035904_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2015-06-22T04:58:57.947+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-582/watchers","watchCount":5,"isWatching":false},"created":"2014-12-03T13:41:42.138+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326452","id":"12326452","name":"0.9.2-incubating","archived":false,"released":true,"releaseDate":"2014-06-25"}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-10-05T01:50:30.456+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":" To notice, it is different from STORM-130. It is nimbus to halt. We ran into this problem several times, every time it happens is after several days of stable running. Here is the stacktrace\n======================================================\n2014-11-03 14:30:56 b.s.d.nimbus [INFO] Cleaning inbox ... deleted: stormjar-c1c856f0-cf8b-4299-9c20-712f169802b7.jar\n2014-11-12 19:32:33 b.s.d.nimbus [ERROR] Error when processing event\njava.io.FileNotFoundException: File '/tmp/storm-0.9.3/nimbus/stormdist/DNSAnalyse-7-1414992073/stormconf.ser' does not exist\n        at org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:299) ~[commons-io-2.4.jar:2.4]\n        at org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1763) ~[commons-io-2.4.jar:2.4]\n        at backtype.storm.daemon.nimbus$read_storm_conf.invoke(nimbus.clj:89) ~[storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT]\n        at backtype.storm.daemon.nimbus$read_topology_details.invoke(nimbus.clj:324) ~[storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT]\n        at backtype.storm.daemon.nimbus$mk_assignments$iter__3100__3104$fn__3105.invoke(nimbus.clj:649) ~[storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT]\n        at clojure.lang.LazySeq.sval(LazySeq.java:42) ~[clojure-1.5.1.jar:na]\n        at clojure.lang.LazySeq.seq(LazySeq.java:60) ~[clojure-1.5.1.jar:na]\n        at clojure.lang.RT.seq(RT.java:484) ~[clojure-1.5.1.jar:na]\n        at clojure.core$seq.invoke(core.clj:133) ~[clojure-1.5.1.jar:na]\n        at clojure.core.protocols$seq_reduce.invoke(protocols.clj:30) ~[clojure-1.5.1.jar:na]\n        at clojure.core.protocols$fn__6026.invoke(protocols.clj:54) ~[clojure-1.5.1.jar:na]\n        at clojure.core.protocols$fn__5979$G__5974__5992.invoke(protocols.clj:13) ~[clojure-1.5.1.jar:na]\n        at clojure.core$reduce.invoke(core.clj:6177) ~[clojure-1.5.1.jar:na]\n        at clojure.core$into.invoke(core.clj:6229) ~[clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.nimbus$mk_assignments.doInvoke(nimbus.clj:648) ~[storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT]\n        at clojure.lang.RestFn.invoke(RestFn.java:410) ~[clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.nimbus$fn__3281$exec_fn__1205__auto____3282$fn__3287$fn__3288.invoke(nimbus.clj:907) ~[storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT]\n        at backtype.storm.daemon.nimbus$fn__3281$exec_fn__1205__auto____3282$fn__3287.invoke(nimbus.clj:906) ~[storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT]\n        at backtype.storm.timer$schedule_recurring$this__2169.invoke(timer.clj:99) ~[storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT]\n        at backtype.storm.timer$mk_timer$fn__2152$fn__2153.invoke(timer.clj:50) ~[storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT] \n        at backtype.storm.timer$mk_timer$fn__2152.invoke(timer.clj:42) [storm-core-0.9.3-incubating-SNAPSHOT.jar:0.9.3-incubating-SNAPSHOT]\n        at clojure.lang.AFn.run(AFn.java:24) [clojure-1.5.1.jar:na]\n        at java.lang.Thread.run(Thread.java:679) [na:1.6.0_22]\n2014-11-12 19:32:33 b.s.util [INFO] Halting process: (\"Error when processing an event\")\n2014-11-12 19:32:33 b.s.d.nimbus [INFO] Shutting down master\n=====================================================\nTo notice, after stable running for 9 days, without printing \"Clean up {storm-id}\" logs, nimbus halt.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Nimbus Halt with FileNotFoundException: '../nimbus/../stormconf.ser' dose not exists","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gvain","name":"Gvain","key":"gvain","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jiahong Li","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gvain","name":"Gvain","key":"gvain","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jiahong Li","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14233065","id":"14233065","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~Gvain] any reason for you to use /tmp for storm-local dir? . Also check if TMPTIME is set whcih can cause tmp directory to be cleaned up by the OS  automatically. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-03T14:45:43.864+0000","updated":"2014-12-03T14:48:52.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14235026","id":"14235026","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gvain","name":"Gvain","key":"gvain","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jiahong Li","active":true,"timeZone":"Asia/Shanghai"},"body":"[~sriharsha] The /etc/cron.daily/tmpwatch shows the tmptime is 30 days after which files not changed will be cleaned up. But as the above log shows, the delay is only 9 days. How come tmp files were cleaned up by the OS as there were 21 days left.\nAnyway, I changed the /tmp dir to my home dir for storm-local-dir, and waiting to see if this problem will happen again. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gvain","name":"Gvain","key":"gvain","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jiahong Li","active":true,"timeZone":"Asia/Shanghai"},"created":"2014-12-05T03:58:44.291+0000","updated":"2014-12-05T03:58:44.291+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14248377","id":"14248377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scooler","name":"scooler","key":"scooler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"scooler","active":true,"timeZone":"Etc/UTC"},"body":"it's also happen in storm-0.9.3\n=============================================================\n2014-12-16T20:23:33.956+0800 b.s.d.supervisor [INFO] Downloading code for storm id tv-five-minute-51-1418663725 from /opt/data/goldmine/storm/local-dir/nimbus/stormdist/tv-five-minute-51-1418663725\n2014-12-16T20:23:38.914+0800 b.s.d.supervisor [INFO] Finished downloading code for storm id tv-five-minute-51-1418663725 from /opt/data/goldmine/storm/local-dir/nimbus/stormdist/tv-five-minute-51-1418663725\n2014-12-16T20:23:38.961+0800 b.s.d.supervisor [INFO] Launching worker with command: '/usr/local/java/jdk/default/bin/java' '-server' '-Xms1536m' '-Xmx1536m' '-XX:NewSize=256m' '-XX:MaxNewSize=256m' '-XX:PermSize=128M' '-XX:+UseConcMarkSweepGC' '-XX:CMSInitiatingOccupancyFraction=70' '-XX:+PrintGCDetails' '-XX:+PrintGCDateStamps' '-XX:+PrintTenuringDistribution' '-Xloggc:/opt/data/goldmine/storm/logs/gc.log' '-Djava.awt.headless=true' '-XX:+HeapDumpOnOutOfMemoryError' '-XX:HeapDumpPath=/opt/data/goldmine/storm/logs/gc_dump' '-Djava.library.path=/opt/data/goldmine/storm/local-dir/supervisor/stormdist/tv-five-minute-51-1418663725/resources/Linux-amd64:/opt/data/goldmine/storm/local-dir/supervisor/stormdist/tv-five-minute-51-1418663725/resources:/usr/local/lib:/usr/lib' '-Dlogfile.name=worker-6702.log' '-Dstorm.home=/usr/local/goldmine/storm/apache-storm-0.9.3' '-Dstorm.conf.file=' '-Dstorm.options=' '-Dstorm.log.dir=/opt/data/goldmine/storm/logs' '-Dlogback.configurationFile=/usr/local/goldmine/storm/apache-storm-0.9.3/logback/cluster.xml' '-Dstorm.id=tv-five-minute-51-1418663725' '-Dworker.id=8cb0ef9e-a02a-4a71-8766-f5fd9b62931f' '-Dworker.port=6702' '-cp' '/usr/local/goldmine/storm/apache-storm-0.9.3/lib/clj-stacktrace-0.2.2.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/commons-logging-1.1.3.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/clojure-1.5.1.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/ring-servlet-0.3.11.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/kryo-2.21.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/ring-core-1.1.5.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/reflectasm-1.07-shaded.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/commons-codec-1.6.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/math.numeric-tower-0.0.1.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/joda-time-2.0.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/carbonite-1.4.0.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/slf4j-api-1.7.5.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/jetty-util-6.1.26.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/json-simple-1.1.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/core.incubator-0.1.0.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/jetty-6.1.26.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/storm-core-0.9.3.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/ring-jetty-adapter-0.3.11.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/commons-fileupload-1.2.1.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/tools.macro-0.1.0.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/logback-classic-1.0.13.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/hiccup-0.3.6.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/logback-core-1.0.13.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/tools.cli-0.2.4.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/ring-devel-0.3.11.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/snakeyaml-1.11.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/chill-java-0.3.5.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/asm-4.0.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/servlet-api-2.5.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/minlog-1.2.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/log4j-over-slf4j-1.6.6.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/jline-2.11.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/tools.logging-0.2.3.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/clj-time-0.4.1.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/jgrapht-core-0.9.0.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/disruptor-2.10.1.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/commons-exec-1.1.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/objenesis-1.2.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/commons-lang-2.5.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/commons-io-2.4.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/clout-1.0.1.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/lib/compojure-1.1.3.jar:/usr/local/goldmine/storm/apache-storm-0.9.3/conf:/opt/data/goldmine/storm/local-dir/supervisor/stormdist/tv-five-minute-51-1418663725/stormjar.jar' 'backtype.storm.daemon.worker' 'tv-five-minute-51-1418663725' '7d010127-4adb-4f72-8928-136e30d1a7ec' '6702' '8cb0ef9e-a02a-4a71-8766-f5fd9b62931f'\n2014-12-16T20:23:40.466+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:40.966+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:41.467+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:41.967+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:42.468+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:42.969+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:43.469+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:43.970+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:44.471+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:23:44.972+0800 b.s.d.supervisor [INFO] 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f still hasn't started\n2014-12-16T20:39:53.668+0800 b.s.d.supervisor [INFO] Shutting down and clearing state for id 8cb0ef9e-a02a-4a71-8766-f5fd9b62931f. Current supervisor time: 1418733593. State: :timed-out, Heartbeat: #backtype.storm.daemon.common.WorkerHeartbeat{:time-secs 1418733561, :storm-id \"tv-five-minute-51-1418663725\", :executors #{[395 395] [-1 -1] [113 127]}, :port 6702}\n2014-12-16T20:39:53.669+0800 b.s.d.supervisor [INFO] Shutting down 7d010127-4adb-4f72-8928-136e30d1a7ec:8cb0ef9e-a02a-4a71-8766-f5fd9b62931f\n2014-12-16T20:39:53.672+0800 b.s.util [INFO] Error when trying to kill 2465. Process is probably already dead.\n2014-12-16T20:39:53.995+0800 b.s.d.supervisor [INFO] Removing code for storm id tv-five-minute-51-1418663725\n2014-12-16T20:39:54.675+0800 b.s.util [INFO] Error when trying to kill 2465. Process is probably already dead.\n2014-12-16T20:39:54.685+0800 b.s.d.supervisor [INFO] Shut down 7d010127-4adb-4f72-8928-136e30d1a7ec:8cb0ef9e-a02a-4a71-8766-f5fd9b62931f\n2014-12-16T20:39:54.689+0800 b.s.d.supervisor [INFO] Launching worker with assignment #backtype.storm.daemon.supervisor.LocalAssignment{:storm-id \"tv-five-minute-51-1418663725\", :executors ([395 395] [113 127])} for this supervisor 7d010127-4adb-4f72-8928-136e30d1a7ec on port 6702 with id e88d43de-e80b-4c2f-ad5f-a9ae5b4d5e45\n2014-12-16T20:39:54.699+0800 b.s.event [ERROR] Error when processing event\njava.io.FileNotFoundException: File '/opt/data/goldmine/storm/local-dir/supervisor/stormdist/tv-five-minute-51-1418663725/stormconf.ser' does not exist\n        at org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:299) ~[commons-io-2.4.jar:2.4]\n        at org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:1763) ~[commons-io-2.4.jar:2.4]\n        at backtype.storm.config$read_supervisor_storm_conf.invoke(config.clj:212) ~[storm-core-0.9.3.jar:0.9.3]\n        at backtype.storm.daemon.supervisor$fn__4256.invoke(supervisor.clj:509) ~[storm-core-0.9.3.jar:0.9.3]\n        at clojure.lang.MultiFn.invoke(MultiFn.java:241) ~[clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.supervisor$sync_processes$iter__4116__4120$fn__4121.invoke(supervisor.clj:285) ~[storm-core-0.9.3.jar:0.9.3]\n        at clojure.lang.LazySeq.sval(LazySeq.java:42) ~[clojure-1.5.1.jar:na]\n        at clojure.lang.LazySeq.seq(LazySeq.java:60) ~[clojure-1.5.1.jar:na]\n        at clojure.lang.RT.seq(RT.java:484) ~[clojure-1.5.1.jar:na]\n        at clojure.core$seq.invoke(core.clj:133) ~[clojure-1.5.1.jar:na]\n        at clojure.core$dorun.invoke(core.clj:2780) ~[clojure-1.5.1.jar:na]\n        at clojure.core$doall.invoke(core.clj:2796) ~[clojure-1.5.1.jar:na]\n        at backtype.storm.daemon.supervisor$sync_processes.invoke(supervisor.clj:273) ~[storm-core-0.9.3.jar:0.9.3]\n        at clojure.lang.AFn.applyToHelper(AFn.java:161) [clojure-1.5.1.jar:na]\n        at clojure.lang.AFn.applyTo(AFn.java:151) [clojure-1.5.1.jar:na]\n        at clojure.core$apply.invoke(core.clj:619) ~[clojure-1.5.1.jar:na]\n        at clojure.core$partial$fn__4190.doInvoke(core.clj:2396) ~[clojure-1.5.1.jar:na]\n        at clojure.lang.RestFn.invoke(RestFn.java:397) ~[clojure-1.5.1.jar:na]\n        at backtype.storm.event$event_manager$fn__2467.invoke(event.clj:40) ~[storm-core-0.9.3.jar:0.9.3]\n\n===================================================================================\nafter removing code for storm id tv-five-minute-51-1418663725\nsupervisor logs \"Launching worker with assignment......\",then throw exception \"FileNotFoundException\" and supervisor dead","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scooler","name":"scooler","key":"scooler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"scooler","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-16T15:36:22.545+0000","updated":"2014-12-16T15:36:22.545+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14378984","id":"14378984","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patelmanishkumar","name":"patelmanishkumar","key":"patelmanishkumar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manishkumar","active":true,"timeZone":"Etc/UTC"},"body":"we are facing same issue on our cluster environment and need immediate assistance on how to solve this? \n1) Is there way to clean all temp data or logs and restart the storm cluster?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patelmanishkumar","name":"patelmanishkumar","key":"patelmanishkumar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manishkumar","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-25T00:11:52.090+0000","updated":"2015-03-25T00:11:52.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14379111","id":"14379111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~patelmanishkumar] this is fixed in 0.9.4 . Meanwhile you can configure supervisord to restart in case your supervisors crashes. Once the supervisor restarted it will properly download topology jar and launch workers without any issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-25T01:29:09.438+0000","updated":"2015-03-25T01:29:09.438+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14379144","id":"14379144","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patelmanishkumar","name":"patelmanishkumar","key":"patelmanishkumar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manishkumar","active":true,"timeZone":"Etc/UTC"},"body":"How can I configure to restart the supervisors after crash. Usually, I restart using storm commands.\n\nCurrently I tried restarting whole cluster and I am still getting same errors. I tried several time without any luck. This is production environment and I really need to get it up and running.\non Nimbus, I get below error:\nnimbus.log:java.io.FileNotFoundException: File '/home/nyicstp/batch/storm/temp/nimbus/s1427051518/stormconf.ser\n\nand on Supervisors, I get below errors: \n../storm-0.9.0-rc3/logs/supervisor.log:java.lang.RuntimeException: org.apache.thrift7.transport.TTransportException: java.net.ConnectException: Connection refused\n../storm-0.9.0-rc3/logs/supervisor.log:Caused by: org.apache.thrift7.transport.TTransportException: java.net.ConnectException: Connection refused\n../storm-0.9.0-rc3/logs/supervisor.log:Caused by: java.net.ConnectException: Connection refused\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patelmanishkumar","name":"patelmanishkumar","key":"patelmanishkumar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manishkumar","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-25T02:14:02.455+0000","updated":"2015-03-25T02:14:02.455+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14379152","id":"14379152","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~patelmanishkumar] try following these instructions http://docs.hortonworks.com/HDPDocuments/Ambari-1.6.1.0/bk_ambari_reference/content/ch_config_storm_supervision.xml.html . They might not apply exactly to your env. More about supervisord http://supervisord.org/ . Ask in mailing list will be helpful than in jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriharsha","name":"sriharsha","key":"sriharsha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sriharsha Chintalapani","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-25T02:17:49.784+0000","updated":"2015-03-25T02:17:49.784+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14379160","id":"14379160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patelmanishkumar","name":"patelmanishkumar","key":"patelmanishkumar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manishkumar","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for your help. is there way to get rid of the error without updating the configuration you mentioned above. Above URL will help me preventing in the future. How can I get my storm up and running for the issues I am facing now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patelmanishkumar","name":"patelmanishkumar","key":"patelmanishkumar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manishkumar","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-25T02:24:43.062+0000","updated":"2015-03-25T02:24:43.062+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12759172/comment/14380113","id":"14380113","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patelmanishkumar","name":"patelmanishkumar","key":"patelmanishkumar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manishkumar","active":true,"timeZone":"Etc/UTC"},"body":"I was able to resolve this issue by deleting storm temp folder on nimbus and all supervisor and also deleting everything (except myid) under zookeeper data folder.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patelmanishkumar","name":"patelmanishkumar","key":"patelmanishkumar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manishkumar","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-25T15:59:04.096+0000","updated":"2015-03-25T15:59:34.808+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-582/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i230hj:"}}