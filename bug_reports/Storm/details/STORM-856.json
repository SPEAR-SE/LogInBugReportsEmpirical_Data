{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12836289","self":"https://issues.apache.org/jira/rest/api/2/issue/12836289","key":"STORM-856","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327123","id":"12327123","description":"security feature branch","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-11-05"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-06-08T21:43:54.435+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jun 10 01:21:30 UTC 2015","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_100242837_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2015-06-10T01:22:03.661+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-856/watchers","watchCount":4,"isWatching":false},"created":"2015-06-08T21:31:20.864+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327123","id":"12327123","description":"security feature branch","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-11-05"}],"customfield_12312339":null,"issuelinks":[{"id":"12427508","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12427508","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12836727","key":"STORM-859","self":"https://issues.apache.org/jira/rest/api/2/issue/12836727","fields":{"summary":"Add unit test to prevent regression of STORM-856","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-10-05T01:29:17.313+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"\n\n1. Describe observed behavior.\nnimbus is in a crash loop\n\n2. What is the expected behavior?\nnimbus stays up\n\n3. Outline the steps to reproduce the problem.\nlaunch a topo\nkill topo with `storm kill $topo` (no wait argument, so it defaults to 30s)\nImmediately restart nimbus\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"If nimbus goes down with a delayed kill topo cmd, it never comes up","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14577895","id":"14577895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"We would be better to have more informations to address this.\n\n- Is it always reproducible? Or occasionally?\n- What messages are printed out when nimbus is crashed? Are stack traces made on each crash pointing to same code line?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2015-06-08T21:43:54.435+0000","updated":"2015-06-08T21:43:54.435+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14577902","id":"14577902","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knusbaum","name":"knusbaum","key":"knusbaum","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=knusbaum&avatarId=22452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=knusbaum&avatarId=22452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=knusbaum&avatarId=22452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=knusbaum&avatarId=22452"},"displayName":"Kyle Nusbaum","active":true,"timeZone":"America/Chicago"},"body":"Reproducable always on 0.10 branch (master). 0.9.x-branch is OK.\n\n{code}\n2015-06-08T16:55:17.162-0500 b.s.d.nimbus [INFO] Delaying event :remove for  secs for test-1-1433800457\n2015-06-08T16:55:17.166-0500 b.s.d.nimbus [ERROR] Error on initialization of server service-handler\njava.lang.NullPointerException: null\n\tat clojure.lang.Numbers.ops(Numbers.java:961) ~[clojure-1.6.0.jar:na]\n\tat clojure.lang.Numbers.multiply(Numbers.java:146) ~[clojure-1.6.0.jar:na]\n\tat clojure.lang.Numbers.multiply(Numbers.java:3659) ~[clojure-1.6.0.jar:na]\n\tat backtype.storm.util$secs_to_millis_long.invoke(util.clj:243) ~[storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat backtype.storm.timer$schedule.doInvoke(timer.clj:92) ~[storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat clojure.lang.RestFn.invoke(RestFn.java:445) [clojure-1.6.0.jar:na]\n\tat backtype.storm.daemon.nimbus$delay_event.invoke(nimbus.clj:242) ~[storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat backtype.storm.daemon.nimbus$state_transitions$fn__8535.invoke(nimbus.clj:173) ~[storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat clojure.lang.AFn.applyToHelper(AFn.java:152) [clojure-1.6.0.jar:na]\n\tat clojure.lang.AFn.applyTo(AFn.java:144) [clojure-1.6.0.jar:na]\n\tat clojure.core$apply.invoke(core.clj:624) ~[clojure-1.6.0.jar:na]\n\tat backtype.storm.daemon.nimbus$transition_BANG_.invoke(nimbus.clj:225) ~[storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat backtype.storm.daemon.nimbus$transition_BANG_.invoke(nimbus.clj:196) ~[storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat backtype.storm.daemon.nimbus$fn__9152$exec_fn__1666__auto____9153.invoke(nimbus.clj:1014) ~[storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat clojure.lang.AFn.applyToHelper(AFn.java:156) [clojure-1.6.0.jar:na]\n\tat clojure.lang.AFn.applyTo(AFn.java:144) [clojure-1.6.0.jar:na]\n\tat clojure.core$apply.invoke(core.clj:624) ~[clojure-1.6.0.jar:na]\n\tat backtype.storm.daemon.nimbus$fn__9152$service_handler__9270.doInvoke(nimbus.clj:1006) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat clojure.lang.RestFn.invoke(RestFn.java:421) [clojure-1.6.0.jar:na]\n\tat backtype.storm.daemon.nimbus$launch_server_BANG_.invoke(nimbus.clj:1358) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat backtype.storm.daemon.nimbus$_launch.invoke(nimbus.clj:1389) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat backtype.storm.daemon.nimbus$_main.invoke(nimbus.clj:1411) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat clojure.lang.AFn.applyToHelper(AFn.java:152) [clojure-1.6.0.jar:na]\n\tat clojure.lang.AFn.applyTo(AFn.java:144) [clojure-1.6.0.jar:na]\n\tat backtype.storm.daemon.nimbus.main(Unknown Source) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n2015-06-08T16:55:17.170-0500 b.s.util [ERROR] Halting process: (\"Error on initialization\")\njava.lang.RuntimeException: (\"Error on initialization\")\n\tat backtype.storm.util$exit_process_BANG_.doInvoke(util.clj:332) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat clojure.lang.RestFn.invoke(RestFn.java:423) [clojure-1.6.0.jar:na]\n\tat backtype.storm.daemon.nimbus$fn__9152$service_handler__9270.doInvoke(nimbus.clj:1006) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat clojure.lang.RestFn.invoke(RestFn.java:421) [clojure-1.6.0.jar:na]\n\tat backtype.storm.daemon.nimbus$launch_server_BANG_.invoke(nimbus.clj:1358) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat backtype.storm.daemon.nimbus$_launch.invoke(nimbus.clj:1389) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat backtype.storm.daemon.nimbus$_main.invoke(nimbus.clj:1411) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n\tat clojure.lang.AFn.applyToHelper(AFn.java:152) [clojure-1.6.0.jar:na]\n\tat clojure.lang.AFn.applyTo(AFn.java:144) [clojure-1.6.0.jar:na]\n\tat backtype.storm.daemon.nimbus.main(Unknown Source) [storm-core-0.11.0-SNAPSHOT.jar:0.11.0-SNAPSHOT]\n[1]  + 21116 exit 13    bin/storm nimbus\n{code}\n\nThis is in the logs whenever nimbus comes back up if it dies in between the time that someone issues a 'kill' and nimbus acually tries to kill it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knusbaum","name":"knusbaum","key":"knusbaum","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=knusbaum&avatarId=22452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=knusbaum&avatarId=22452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=knusbaum&avatarId=22452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=knusbaum&avatarId=22452"},"displayName":"Kyle Nusbaum","active":true,"timeZone":"America/Chicago"},"created":"2015-06-08T21:46:31.631+0000","updated":"2015-06-08T21:58:38.941+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14577935","id":"14577935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"body":"Suspect we may not be serializing `:delay-secs` [here|https://github.com/apache/storm/blob/v0.10.0/storm-core/src/clj/backtype/storm/converter.clj#L142-L151]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"created":"2015-06-08T22:04:08.757+0000","updated":"2015-06-08T22:04:08.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14577958","id":"14577958","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Yes, I see your point.\nNeither thrift and clojure StormBase don't have :delay-secs, so update-storm! and storm-base  doesn't work on :delay-secs.\nSo it's just added to map on demand in runtime, and when nimbus is restarted, nimbus doesn't recognize this value.\n\n{code}\n      (update-storm!\n        [this storm-id new-elems]\n        (let [base (storm-base this storm-id nil)\n              executors (:component->executors base)\n              new-elems (update new-elems :component->executors (partial merge executors))]\n          (set-data cluster-state (storm-path storm-id)\n                    (-> base\n                        (merge new-elems)\n                        thriftify-storm-base\n                        Utils/serialize)\n                    acls)))\n\n      (storm-base\n        [this storm-id callback]\n        (when callback\n          (swap! storm-base-callback assoc storm-id callback))\n        (clojurify-storm-base (maybe-deserialize (get-data cluster-state (storm-path storm-id) (not-nil? callback)) StormBase)))\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2015-06-08T22:22:02.803+0000","updated":"2015-06-08T22:42:54.168+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14577984","id":"14577984","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Sorry, assigning is by accident, my cat just walks on Macbook.\n\nBtw, once it is triggered users cannot restore from this situation unless they remove state from zk by hand.\n(But I don't expect users to remove it manually.)\n\nI think it should be marked as critical or even higher.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2015-06-08T22:36:15.768+0000","updated":"2015-06-08T22:36:15.768+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14578101","id":"14578101","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"body":"Actually, I think it is serialized, but it is nested down one more level than before the thrift serialization change.\n\n[~kabhwan], I think it is a [simple fix|https://github.com/apache/storm/compare/master...d2r:storm-856-use-ser-delay-secs]; if you (or the cat) want to make a pull request, it would be OK :)  Otherwise I will put up a pull request shortly when I can confirm it works.\n\nI agree, if this condition happens in the cluster, then it takes some effort to restore nimbus to a working state while keeping running topologies.  Unfortunately, I will mark it as a blocker.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"created":"2015-06-09T00:03:48.096+0000","updated":"2015-06-09T00:03:48.096+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14578165","id":"14578165","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user d2r opened a pull request:\n\n    https://github.com/apache/storm/pull/585\n\n    [STORM-856] use serialized value of delay secs for topo actions\n\n    * Use serialized values for delay in rebalance and kill topology actions, in case nimbus has initialized sometime after the action was given\n    * Fix logic in deserialization of topology action options\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/d2r/storm storm-856-use-ser-delay-secs\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/585.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #585\n    \n----\ncommit 128ee14ff6f8571c973161805bceadf8cc2cfce8\nAuthor: Derek Dagit <derekd@yahoo-inc.com>\nDate:   2015-06-09T01:20:42Z\n\n    use serialized value of delay secs for topo actions\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T01:31:21.314+0000","updated":"2015-06-09T01:31:21.314+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14578166","id":"14578166","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user d2r commented on the pull request:\n\n    https://github.com/apache/storm/pull/585#issuecomment-110191747\n  \n    This should also be merged to 0.10.x-branch.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T01:31:58.729+0000","updated":"2015-06-09T01:31:58.729+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14578450","id":"14578450","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/585#issuecomment-110255155\n  \n    LGTM. Seems like it was a small mistake.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T07:08:59.071+0000","updated":"2015-06-09T07:08:59.071+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14579112","id":"14579112","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"body":"Lowering \"Priority\" to Critical. Serialization is still OK, so the fix would be to deploy a storm version with this patch and restart nimbus.  There should not be a need to clear or modify ZK state because of this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagit","name":"dagit","key":"dagit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagit&avatarId=25742","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagit&avatarId=25742","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagit&avatarId=25742","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagit&avatarId=25742"},"displayName":"Derek Dagit","active":true,"timeZone":"America/Chicago"},"created":"2015-06-09T15:43:34.679+0000","updated":"2015-06-09T15:43:34.679+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14579231","id":"14579231","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on the pull request:\n\n    https://github.com/apache/storm/pull/585#issuecomment-110435396\n  \n    +1 Thanks for the quick turnaround on this @d2r.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T17:06:21.958+0000","updated":"2015-06-09T17:06:21.958+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14579323","id":"14579323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user knusbaum commented on the pull request:\n\n    https://github.com/apache/storm/pull/585#issuecomment-110447694\n  \n    +1 Works for me.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T18:00:40.932+0000","updated":"2015-06-09T18:00:40.932+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14579333","id":"14579333","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user Parth-Brahmbhatt commented on the pull request:\n\n    https://github.com/apache/storm/pull/585#issuecomment-110450393\n  \n    +1, this bug was introduced by me when I worked on rolling upgrade support, sorry for not catching this during my testing.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T18:08:45.823+0000","updated":"2015-06-09T18:08:45.823+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14579531","id":"14579531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ptgoetz commented on the pull request:\n\n    https://github.com/apache/storm/pull/585#issuecomment-110497517\n  \n    @d2r I plan to merge this once the 24-hour review period has completed.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T20:37:24.531+0000","updated":"2015-06-09T20:37:24.531+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14579686","id":"14579686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user d2r commented on the pull request:\n\n    https://github.com/apache/storm/pull/585#issuecomment-110523564\n  \n    > +1, this bug was introduced by me when I worked on rolling upgrade support, sorry for not catching this during my testing.\n    \n    It is fine. Rolling upgrades is a big win, and I am happy to have it.\n    \n    \n    \n    > @d2r I plan to merge this once the 24-hour review period has completed.\n    \n    OK, Thanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-09T22:33:15.322+0000","updated":"2015-06-09T22:33:15.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14579780","id":"14579780","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user HeartSaVioR commented on the pull request:\n\n    https://github.com/apache/storm/pull/585#issuecomment-110540302\n  \n    Only thing we missed is checklist of test, not Parth's mistake. It would be better while we concern about it.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-10T00:13:00.478+0000","updated":"2015-06-10T00:13:00.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836289/comment/14579829","id":"14579829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/585\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-10T01:21:30.337+0000","updated":"2015-06-10T01:21:30.337+0000"}],"maxResults":17,"total":17,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-856/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2fsdb:"}}