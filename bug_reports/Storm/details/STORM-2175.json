{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13015820","self":"https://issues.apache.org/jira/rest/api/2/issue/13015820","key":"STORM-2175","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":6600,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335748","id":"12335748","name":"1.1.0","archived":false,"released":true,"releaseDate":"2017-03-29"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12337341","id":"12337341","name":"1.0.3","archived":false,"released":true,"releaseDate":"2017-02-14"}],"aggregatetimespent":6600,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-10-27T20:22:25.934+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Nov 03 00:22:36 UTC 2016","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_555117081_*|*_5_*:*_1_*:*_0","customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":"2016-11-03T00:22:34.376+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2175/watchers","watchCount":3,"isWatching":false},"created":"2016-10-27T14:10:39.168+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":0,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334657","id":"12334657","name":"2.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335748","id":"12335748","name":"1.1.0","archived":false,"released":true,"releaseDate":"2017-03-29"}],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-11-03T00:22:36.175+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"See https://github.com/apache/storm/pull/1697#issuecomment-256456889\n\n{code}\njava.lang.NullPointerException\n    at org.apache.storm.utils.DisruptorQueue$FlusherPool.stop(DisruptorQueue.java:110)\n    at org.apache.storm.utils.DisruptorQueue$Flusher.close(DisruptorQueue.java:293)\n    at org.apache.storm.utils.DisruptorQueue.haltWithInterrupt(DisruptorQueue.java:410)\n    at org.apache.storm.disruptor$halt_with_interrupt_BANG_.invoke(disruptor.clj:77)\n    at org.apache.storm.daemon.executor$mk_executor$reify__4923.shutdown(executor.clj:412)\n    at sun.reflect.GeneratedMethodAccessor303.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:93)\n    at clojure.lang.Reflector.invokeNoArgInstanceMember(Reflector.java:313)\n    at org.apache.storm.daemon.worker$fn__5550$exec_fn__1372__auto__$reify__5552$shutdown_STAR___5572.invoke(worker.clj:668)\n    at org.apache.storm.daemon.worker$fn__5550$exec_fn__1372__auto__$reify$reify__5598.shutdown(worker.clj:706)\n    at org.apache.storm.ProcessSimulator.killProcess(ProcessSimulator.java:66)\n    at org.apache.storm.ProcessSimulator.killAllProcesses(ProcessSimulator.java:79)\n    at org.apache.storm.testing$kill_local_storm_cluster.invoke(testing.clj:207)\n    at org.apache.storm.testing4j$_withLocalCluster.invoke(testing4j.clj:93)\n    at org.apache.storm.Testing.withLocalCluster(Unknown Source)\n{code}\n\nand\n\n{code}\njava.lang.IllegalStateException: Timer is not active\n    at org.apache.storm.timer$check_active_BANG_.invoke(timer.clj:87)\n    at org.apache.storm.timer$cancel_timer.invoke(timer.clj:120)\n    at org.apache.storm.daemon.worker$fn__5550$exec_fn__1372__auto__$reify__5552$shutdown_STAR___5572.invoke(worker.clj:682)\n    at org.apache.storm.daemon.worker$fn__5550$exec_fn__1372__auto__$reify$reify__5598.shutdown(worker.clj:706)\n    at org.apache.storm.ProcessSimulator.killProcess(ProcessSimulator.java:66)\n    at org.apache.storm.ProcessSimulator.killAllProcesses(ProcessSimulator.java:79)\n    at org.apache.storm.testing$kill_local_storm_cluster.invoke(testing.clj:207)\n    at org.apache.storm.testing4j$_withLocalCluster.invoke(testing4j.clj:93)\n    at org.apache.storm.Testing.withLocalCluster(Unknown Source)\n{code}\n\n[~Srdo] is still working on getting a reproducible use case for us. But I will try to reproduce/fix it myself in the mean time.","customfield_10010":null,"timetracking":{"remainingEstimate":"0h","timeSpent":"1h 50m","remainingEstimateSeconds":0,"timeSpentSeconds":6600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":0,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Supervisor V2 can possibly shut down workers twice in local mode","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":6600,"total":6600,"percent":100},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":6600,"total":6600,"percent":100},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15613097","id":"15613097","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"body":"[~revans2] This seems to provoke the errors reasonably often https://github.com/srdo/storm/blob/STORM-2175-reproduction/examples/storm-starter/test/jvm/org/apache/storm/starter/tools/STORM2175.java","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"created":"2016-10-27T20:22:25.934+0000","updated":"2016-10-27T20:22:25.934+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15615789","id":"15615789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"[~Srdo],\n\nThanks I was able to reproduce the issue with this.  I could not make it happen on master though, so I am really interested to see what is going on.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-10-28T15:59:07.964+0000","updated":"2016-10-28T15:59:07.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15616279","id":"15616279","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"OK I was looking through the logs and found what happened (and honestly I think it is actually a good thing).\n\nWhen shutting down a local mode cluster inside testing.clj we have.\n\n{code}\n  (doseq [s @(:supervisors cluster-map)]\n    (.shutdownAllWorkers s)\n    ;; race condition here? will it launch the workers again?\n    (.close s))\n  (ProcessSimulator/killAllProcesses)\n{code}\n\nNOTE: the comment above is not what is causing this issue.\n\nSo all of the supervisors are shut down, first by killing all of the worker processes and then by closing the supervisor.\nAfter all of the supervisors are shut down, just to be sure, we then kill all of the processes still registered with the process simulator.\n\nThe code for killing all of the workers in a supervisor is the following...\n\n{code}\n    public synchronized void shutdownAllWorkers() {\n        for (Slot slot: slots.values()) {\n            slot.setNewAssignment(null);\n        }\n\n        for (Slot slot: slots.values()) {\n            try {\n                int count = 0;\n                while (slot.getMachineState() != MachineState.EMPTY) {\n                    if (count > 10) {\n                        LOG.warn(\"DONE waiting for {} to finish {}\", slot, slot.getMachineState());\n                        break;\n                    }\n                    if (Time.isSimulating()) {\n                        Time.advanceTime(1000);\n                        Thread.sleep(100);\n                    } else {\n                        Time.sleep(100);\n                    }\n                    count++;\n                }\n            } catch (Exception e) {\n                LOG.error(\"Error trying to shutdown workers in {}\", slot, e);\n            }\n        }\n    }\n{code}\n\nIt tells the Slot that it is not assigned anything any more and waits for it to kill the worker under it.  I saw in the logs that for the one worker in question it timed out (\"DONE waiting for...\") and went on to kill/shut down other things. \n\nThe ProcessSimulator code to kill local mode worker is.\n\n{code}\n    /**\n     * Kill a process\n     *\n     * @param pid\n     */\n    public static void killProcess(String pid) {\n        synchronized (lock) {\n            LOG.info(\"Begin killing process \" + pid);\n            Shutdownable shutdownHandle = processMap.get(pid);\n            if (shutdownHandle != null) {\n                shutdownHandle.shutdown();\n            }\n            processMap.remove(pid);\n            LOG.info(\"Successfully killed process \" + pid);\n        }\n    }\n\n    /**\n     * Kill all processes\n     */\n    public static void killAllProcesses() {\n        Set<String> pids = processMap.keySet();\n        for (String pid : pids) {\n            killProcess(pid);\n        }\n    }\n{code}\n\nInside the logs I don't see a corresponding \"Successfully killed process \" for the \"Begin killing process \".  This means that an exception was thrown during the shutdown process.  Looking at the code the only exception that could have caused this is an InterruptedException or something caused by it (or else the entire processes would have exited).\n\nThis means that the ProcessSimulator partially shut down the worker, then the worker threw the exception, and ProcessSimulator failed to remove the worker from the map.  That way when the follow on code to kill anything registered with the process simulator that might have leaked is called it ends up trying to shoot the process yet again, which the code we found does not like.\n\nEverything seems perfectly reasonable, except for the part where some of our data structures don't like to be shut down multiple times.  This seems against what most other software does.  Exactly once is hard so lets make sure at least once works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-10-28T19:18:34.862+0000","updated":"2016-10-28T19:18:34.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15616383","id":"15616383","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"body":"Thanks for the explanation. You're right, it's much easier if the structures can handle being closed repeatedly. So this issue should probably become about changing timer, executor, worker and DisruptorQueue (or really anything Shutdownable) so they can handle multiple calls to shutdown.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"created":"2016-10-28T20:01:15.824+0000","updated":"2016-10-28T20:01:15.824+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15616424","id":"15616424","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Yes, that is just what I am doing, and also making ProcessSimulator eat InterruptedExceptions (because a test shouldn't fail for an exception that we expect to happen and ignore in other parts of the code).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-10-28T20:10:27.400+0000","updated":"2016-10-28T20:10:27.400+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15616570","id":"15616570","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"I put up two pull requests, one for master and another for 1.x.  I manually forced Interrupted exceptions for the test [~Srdo] posted and verified that this works.\n\nI also found a number of leaked threads from nimbus and a few other possible places. I'll file a follow on JIRA for them, because they are not causing issues right now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-10-28T21:03:02.643+0000","updated":"2016-10-28T21:03:02.643+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15616811","id":"15616811","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"body":"I ran the 1.x version of the PR against our test set. It seems to solve this issue, but introduces a new one. One of our tests uses the storm-kafka-clients spout, which can't handle being closed multiple times, because the underlying KafkaConsumer can only be closed once, and the spout doesn't check if it's already been closed. We might want to add a note to ISpout and IBolt that close may be called repeatedly, and we should probably also make sure that the spouts/bolts shipping with Storm can handle repeated closes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"created":"2016-10-28T22:33:00.496+0000","updated":"2016-10-28T22:33:00.496+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15619841","id":"15619841","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"body":"Actually I'm wondering if that's the right way to go about this. Bolt/spout closes would have to support both being closed multiple times, and being partially closed by the Slot, interrupted and closed again by ProcessSimulator. Maybe it would be better if local mode just gave the Slot significantly longer to close the components it's responsible for? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"created":"2016-10-30T12:01:42.648+0000","updated":"2016-10-30T12:01:42.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15622401","id":"15622401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"I am fine with giving them more time to shut down.  I am even OK with throwing an exception if it does not shut down within the desired amount of time.  We already limit the amount of time a worker has before it kills itself to 1 second, so I can see why something that normally is at most once needs to be at least once for local mode can be confusing.\n\nI'll close the pull requests and update them accordingly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-10-31T15:02:49.460+0000","updated":"2016-10-31T15:02:49.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15622806","id":"15622806","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"[~Srdo],\n\nI updated the code with your suggestions.  If you could try again that would be great.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2016-10-31T17:29:42.270+0000","updated":"2016-10-31T17:29:42.270+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15623845","id":"15623845","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"body":"[~revans2] \nThanks, this is a good change, and most of our tests now pass (though not entirely reliably). I'm running into the timeout for the test using the Kafka spout fairly consistently though. I've posted a small PR against the 1.x version of the branch to disable the timeout in local mode. Tests may fail spuriously due to a slow machine, or bolts/spouts being slow to close.\n \nRaising the timeout in shutdownAllWorkers isn't guaranteed to work for everyone, and making it configurable is fiddly in tests and irrelevant for distributed mode, due to the 1 second limit on worker suicide. Giving up on shutting down the worker properly leads to leaking resources in local mode, since we can't just kill the JVM. I think removing the timeout for shutdownAllWorkers in local mode is a decent fix. It's still very visible if a Slot is hanging for some reason, since the warning about a slow Slot shutdown is still printed, and we avoid dealing with issues like Slots being slow to shutdown due to tests with a high fork count, or tests on slow machines, or optimistic bolt/spout close functions that don't time limit themselves.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Srdo","name":"Srdo","key":"srdo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stig Rohde Døssing","active":true,"timeZone":"Europe/Copenhagen"},"created":"2016-10-31T23:59:50.205+0000","updated":"2016-10-31T23:59:50.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/comment/15631010","id":"15631010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"body":"Thanks [~revans2], I merged into master, 1.x, 1.0.x branches respectively.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kabhwan","name":"kabhwan","key":"kabhwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jungtaek Lim","active":true,"timeZone":"Asia/Seoul"},"created":"2016-11-03T00:22:36.057+0000","updated":"2016-11-03T00:22:36.057+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-2175/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":14,"worklogs":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31308","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user revans2 opened a pull request:\n\n    https://github.com/apache/storm/pull/1749\n\n    STORM-2175: Support at least once shutdown in workers\n\n    Will put up a pull request for 1.x shortly.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/revans2/incubator-storm STORM-2175\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1749.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1749\n    \n----\ncommit 94d61c7f3dbc4e1b6dd61cfcbb569027f35bf570\nAuthor: Robert (Bobby) Evans <evans@yahoo-inc.com>\nDate:   2016-10-28T20:47:38Z\n\n    STORM-2175: Support at least once shutdown in workers\n\n----\n","created":"2016-10-28T20:49:13.511+0000","updated":"2016-10-28T20:49:13.511+0000","started":"2016-10-28T20:49:13.510+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31308","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31309","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user revans2 opened a pull request:\n\n    https://github.com/apache/storm/pull/1750\n\n    STORM-2175: support at least once shutdown in worker\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/revans2/incubator-storm STORM-2175-1.x\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1750.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1750\n    \n----\ncommit ec871d1b9f6ac9f113edbe06eaa32682bd95d5dd\nAuthor: Robert (Bobby) Evans <evans@yahoo-inc.com>\nDate:   2016-10-28T20:56:19Z\n\n    STORM-2175: support at least once shutdown in worker\n\n----\n","created":"2016-10-28T20:59:02.305+0000","updated":"2016-10-28T20:59:02.305+0000","started":"2016-10-28T20:59:02.304+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31309","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31341","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/storm/pull/1749\n  \n    Will reopen once I have a better fix that gives more time and throws on a timeout.\n","created":"2016-10-31T15:03:34.184+0000","updated":"2016-10-31T15:03:34.184+0000","started":"2016-10-31T15:03:34.183+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31341","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 closed the pull request at:\n\n    https://github.com/apache/storm/pull/1749\n","created":"2016-10-31T15:03:34.371+0000","updated":"2016-10-31T15:03:34.371+0000","started":"2016-10-31T15:03:34.370+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31342","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31343","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/storm/pull/1750\n  \n    Will reopen once I have a better fix that gives more time and throws on a timeout.\n","created":"2016-10-31T15:03:44.875+0000","updated":"2016-10-31T15:03:44.875+0000","started":"2016-10-31T15:03:44.875+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31343","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31344","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 closed the pull request at:\n\n    https://github.com/apache/storm/pull/1750\n","created":"2016-10-31T15:03:44.877+0000","updated":"2016-10-31T15:03:44.877+0000","started":"2016-10-31T15:03:44.877+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31344","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user revans2 reopened a pull request:\n\n    https://github.com/apache/storm/pull/1749\n\n    STORM-2175: Support at least once shutdown in workers\n\n    Will put up a pull request for 1.x shortly.\n\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/revans2/incubator-storm STORM-2175\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1749.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1749\n    \n----\ncommit 94d61c7f3dbc4e1b6dd61cfcbb569027f35bf570\nAuthor: Robert (Bobby) Evans <evans@yahoo-inc.com>\nDate:   2016-10-28T20:47:38Z\n\n    STORM-2175: Support at least once shutdown in workers\n\ncommit 9747e5f2f8072ba82b27c9fb96993270c114e034\nAuthor: Robert (Bobby) Evans <evans@yahoo-inc.com>\nDate:   2016-10-31T16:13:25Z\n\n    STORM-2175: Retry shutdown longer and timeout if too long.\n\n----\n","created":"2016-10-31T17:28:12.540+0000","updated":"2016-10-31T17:28:12.540+0000","started":"2016-10-31T17:28:12.538+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31347","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31348","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"GitHub user revans2 reopened a pull request:\n\n    https://github.com/apache/storm/pull/1750\n\n    STORM-2175: support at least once shutdown in worker\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/revans2/incubator-storm STORM-2175-1.x\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1750.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1750\n    \n----\ncommit ec871d1b9f6ac9f113edbe06eaa32682bd95d5dd\nAuthor: Robert (Bobby) Evans <evans@yahoo-inc.com>\nDate:   2016-10-28T20:56:19Z\n\n    STORM-2175: support at least once shutdown in worker\n\ncommit 9c5d4e41a9d7ec9a02f115abf424374958e245e2\nAuthor: Robert (Bobby) Evans <evans@yahoo-inc.com>\nDate:   2016-10-31T16:13:25Z\n\n    STORM-2175: Retry shutdown longer and timeout if too long.\n\n----\n","created":"2016-10-31T17:28:18.725+0000","updated":"2016-10-31T17:28:18.725+0000","started":"2016-10-31T17:28:18.724+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31348","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31408","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user srdo commented on the issue:\n\n    https://github.com/apache/storm/pull/1750\n  \n    Tested this with our test set, the issues we were seeing seem fixed. Thank you for looking into this. +1\n","created":"2016-11-01T20:52:40.770+0000","updated":"2016-11-01T20:52:40.770+0000","started":"2016-11-01T20:52:40.769+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31408","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/storm/pull/1750\n  \n    @HeartSaVioR could you take a look at this and #1749 so I can merge this in?\n","created":"2016-11-02T14:24:53.061+0000","updated":"2016-11-02T14:24:53.061+0000","started":"2016-11-02T14:24:53.061+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31419","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/1750\n  \n    @revans2 +1 and I'll take a look at #1749 very soon. Thanks for the great work.\n","created":"2016-11-02T14:57:52.243+0000","updated":"2016-11-02T14:57:52.243+0000","started":"2016-11-02T14:57:52.241+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31420","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31421","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user HeartSaVioR commented on the issue:\n\n    https://github.com/apache/storm/pull/1749\n  \n    @revans2 also +1 on this.\n","created":"2016-11-02T14:59:40.101+0000","updated":"2016-11-02T14:59:40.101+0000","started":"2016-11-02T14:59:40.101+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31421","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/1750\n","created":"2016-11-03T00:21:25.816+0000","updated":"2016-11-03T00:21:25.816+0000","started":"2016-11-03T00:21:25.815+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31499","issueId":"13015820"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13015820/worklog/31500","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"comment":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/storm/pull/1749\n","created":"2016-11-03T00:21:25.816+0000","updated":"2016-11-03T00:21:25.816+0000","started":"2016-11-03T00:21:25.815+0000","timeSpent":"10m","timeSpentSeconds":600,"id":"31500","issueId":"13015820"}]},"customfield_12311820":"0|i35hl3:"}}