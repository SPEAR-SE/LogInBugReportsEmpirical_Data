{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12907793","self":"https://issues.apache.org/jira/rest/api/2/issue/12907793","key":"STORM-1129","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12314820","id":"12314820","key":"STORM","name":"Apache Storm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12314820&avatarId=21667","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12314820&avatarId=21667","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12314820&avatarId=21667","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12314820&avatarId=21667"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13260","id":"13260","description":"Apache Storm Related","name":"Storm"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-11-04T00:30:32.681+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Jul 10 21:40:06 UTC 2016","customfield_12312320":null,"customfield_12310222":null,"customfield_12310420":"9223372036854775807","customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1129/watchers","watchCount":2,"isWatching":false},"created":"2015-10-26T00:26:26.550+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"customfield_12312339":null,"issuelinks":[],"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pshah","name":"pshah","key":"pshah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Priyank Shah","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-07-10T21:40:06.631+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327950","id":"12327950","name":"storm-core","description":"Core storm daemons and APIs including trident"}],"timeoriginalestimate":null,"description":"Currently, in storm UI details about a topology can be viewed at a URL which has a topology id as a query parameter. When a topology is updated and  redeployed a new id is assigned by storm and existing URL(and any bookmarks relying on it) for the topology do not work since the id has changed. We should change it so that topology name is used instead of id.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Storm should use topology name instead of ids for url in storm UI.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pshah","name":"pshah","key":"pshah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Priyank Shah","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pshah","name":"pshah","key":"pshah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Priyank Shah","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14988592","id":"14988592","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user priyank5485 opened a pull request:\n\n    https://github.com/apache/storm/pull/854\n\n    STORM-1129: Use topology name instead of id in UI calls.\n\n    Note that all-topologies-summary has been used to get topology id from a topology name. That involves a few calls to zookeeper which is not ideal. However, UI does not seem to take any significant performance hit. If needed we can handle it possibly using one of the options below. Since its a separate performance issue we can handle it in a separate JIRA.\n    \n    1. Have nimbus thrift server cache summary for topologies so it does not hit zookeeper every time we try to get topology id from name.\n    2. Update nimbus thrift api with a method that takes options and use that to do only the minimal necessary interaction with zookeeper for a given option.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/priyank5485/storm STORM-1129\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/854.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #854\n    \n----\ncommit 77b73af52bdc2d691ae172a1a2905a94395c3c70\nAuthor: Priyank <pshah@hortonworks.com>\nDate:   2015-11-04T00:20:50Z\n\n    STORM-1129: Use topology name instead of id in UI calls.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T00:30:32.681+0000","updated":"2015-11-04T00:30:32.681+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990074","id":"14990074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user jerrypeng commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153816194\n  \n    Topology names are not unique.  Users can submit topologies with the same name, but the their auto generated topology ids will be unique.  I am not sure this is the right way to go about this\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T18:17:23.344+0000","updated":"2015-11-04T18:17:23.344+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990081","id":"14990081","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153818643\n  \n    @jerrypeng they can submit topologies with the same name, but not at the same time.  You can only have one \"foo\" topology running at any point in time.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T18:22:47.276+0000","updated":"2015-11-04T18:22:47.276+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990084","id":"14990084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user priyank5485 commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153819160\n  \n    @jerrypeng We have a check and it throws the following exception.\n    \n    Exception in thread \"main\" java.lang.RuntimeException: Topology with name `wordcount` already exists on cluster\n    \tat backtype.storm.StormSubmitter.submitTopologyAs(StormSubmitter.java:231)\n    \tat backtype.storm.StormSubmitter.submitTopology(StormSubmitter.java:275)\n    \tat backtype.storm.StormSubmitter.submitTopologyWithProgressBar(StormSubmitter.java:311)\n    \tat backtype.storm.StormSubmitter.submitTopologyWithProgressBar(StormSubmitter.java:292)\n    \tat storm.starter.WordCountTopology.main(WordCountTopology.java:94)\n    \n    @revans2 Thanks for chiming in.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T18:23:55.296+0000","updated":"2015-11-04T18:23:55.296+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990094","id":"14990094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153819804\n  \n    @jerrypeng topology names are unique\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T18:25:10.067+0000","updated":"2015-11-04T18:25:10.067+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990219","id":"14990219","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user Parth-Brahmbhatt commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153836316\n  \n    +1.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T19:20:48.506+0000","updated":"2015-11-04T19:20:48.506+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990232","id":"14990232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user jerrypeng commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153838740\n  \n    thanks for the explanation and clarification everybody\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T19:29:13.649+0000","updated":"2015-11-04T19:29:13.649+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990353","id":"14990353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153854331\n  \n    This is a non-backwards compatible change to the REST API and I really would prefer to maintain compatibility if at all possible.  It seems fairly simple to make the REST API work with the name or the id.  We call get-id-from-name all over the place, it seems fairly simple to check to see if there is a topology with that as the ID, if not check to see if there is a topology with it as the name. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T20:33:47.368+0000","updated":"2015-11-04T20:33:47.368+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990361","id":"14990361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/854#discussion_r43935706\n  \n    --- Diff: storm-core/src/clj/backtype/storm/ui/core.clj ---\n    @@ -851,141 +859,151 @@\n         (populate-context! servlet-request)\n         (assert-authorized-user \"getClusterInfo\")\n         (json-response (all-topologies-summary) (:callback m)))\n    -  (GET \"/api/v1/topology/:id\" [:as {:keys [cookies servlet-request scheme]} id & m]\n    -    (populate-context! servlet-request)\n    -    (assert-authorized-user \"getTopology\" (topology-config id))\n    -    (let [user (get-user-name servlet-request)]\n    -      (json-response (topology-page id (:window m) (check-include-sys? (:sys m)) user (= scheme :https)) (:callback m))))\n    -  (GET \"/api/v1/topology/:id/visualization-init\" [:as {:keys [cookies servlet-request]} id & m]\n    -    (populate-context! servlet-request)\n    -    (assert-authorized-user \"getTopology\" (topology-config id))\n    -    (json-response (build-visualization id (:window m) (check-include-sys? (:sys m))) (:callback m)))\n    -  (GET \"/api/v1/topology/:id/visualization\" [:as {:keys [cookies servlet-request]} id & m]\n    -    (populate-context! servlet-request)\n    -    (assert-authorized-user \"getTopology\" (topology-config id))\n    -    (json-response (mk-visualization-data id (:window m) (check-include-sys? (:sys m))) (:callback m)))\n    -  (GET \"/api/v1/topology/:id/component/:component\" [:as {:keys [cookies servlet-request scheme]} id component & m]\n    -    (populate-context! servlet-request)\n    -    (assert-authorized-user \"getTopology\" (topology-config id))\n    -    (let [user (get-user-name servlet-request)]\n    -      (json-response\n    -          (component-page id component (:window m) (check-include-sys? (:sys m)) user (= scheme :https))\n    -          (:callback m))))\n    -  (GET \"/api/v1/topology/:id/logconfig\" [:as {:keys [cookies servlet-request]} id & m]\n    -    (populate-context! servlet-request)\n    -    (assert-authorized-user \"getTopology\" (topology-config id))\n    -       (json-response (log-config id) (:callback m)))\n    -  (POST \"/api/v1/topology/:id/activate\" [:as {:keys [cookies servlet-request]} id & m]\n    -    (populate-context! servlet-request)\n    -    (assert-authorized-user \"activate\" (topology-config id))\n    -    (thrift/with-configured-nimbus-connection nimbus\n    -       (let [tplg (->> (doto\n    -                        (GetInfoOptions.)\n    -                        (.set_num_err_choice NumErrorsChoice/NONE))\n    -                      (.getTopologyInfoWithOpts ^Nimbus$Client nimbus id))\n    -            name (.get_name tplg)]\n    -        (.activate nimbus name)\n    -        (log-message \"Activating topology '\" name \"'\")))\n    -    (json-response (topology-op-response id \"activate\") (m \"callback\")))\n    -  (POST \"/api/v1/topology/:id/deactivate\" [:as {:keys [cookies servlet-request]} id & m]\n    -    (populate-context! servlet-request)\n    -    (assert-authorized-user \"deactivate\" (topology-config id))\n    -    (thrift/with-configured-nimbus-connection nimbus\n    +  (GET \"/api/v1/topology/:name\" [:as {:keys [cookies servlet-request scheme]} name & m]\n    +    (let [id (get-id-from-name name)]\n    +      (populate-context! servlet-request)\n    --- End diff --\n    \n    We have to populate the context before ever talking to nimbus.  `get-id-from-name` talks to nimbus and could potentially authenticate with the wrong user to nimbus.  This needs to be fixed everywhere.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T20:35:45.021+0000","updated":"2015-11-04T20:35:45.021+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990364","id":"14990364","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/854#discussion_r43935881\n  \n    --- Diff: storm-core/src/ui/public/component.html ---\n    @@ -116,7 +116,7 @@\n     \n             var componentSummary = $(\"#component-summary\");\n             var componentActions = $(\"#component-actions\");\n    -        var buttonJsonData = componentActionJson(response[\"encodedTopologyId\"], response[\"encodedId\"], response[\"id\"],\n    +        var buttonJsonData = componentActionJson(response[\"name\"], response[\"encodedId\"], response[\"id\"],\n    --- End diff --\n    \n    We need to encode the name just like we conded the topologyId, or we have the possibility of an incorrect URL for odd characters in a topology name.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T20:37:13.623+0000","updated":"2015-11-04T20:37:13.623+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990370","id":"14990370","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153855653\n  \n    @priyank5485 for the most part this change looks good to me, but there are a few serious bugs/incompatibilities that need to be fixed before this can go in.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T20:39:35.445+0000","updated":"2015-11-04T20:39:35.445+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14990412","id":"14990412","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user Parth-Brahmbhatt commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-153864538\n  \n    I agree with @revans2 , lets maintain backward compatibility.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T21:03:27.253+0000","updated":"2015-11-04T21:03:27.253+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14992096","id":"14992096","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user priyank5485 commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-154136188\n  \n    @revans2 @Parth-Brahmbhatt @jerrypeng @harshach  Thanks all for the feedback.  Other than the changes here there are some commits to apache/master after creation of this PR which added some more apis in UI using topology id making this PR unmergeable. I will  sort all of that out and update the PR.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-05T17:50:29.443+0000","updated":"2015-11-05T17:50:29.443+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14992241","id":"14992241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-154151451\n  \n    @priyank5485 thanks for doing this.  I think it is going to make the UI much more usable.  Essentially giving us perma-links to a topology. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-05T18:53:08.339+0000","updated":"2015-11-05T18:53:08.339+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/14993622","id":"14993622","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user wuchong commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-154403920\n  \n    +1 \n    \n    In Alibaba, we implement our monitor system using topology name instead of id. And it is very useful , as users often resubmit topology several times , and they do not need to find the new topology page link.\n    \n    But we should  maintain backward compatibility. maybe we can deal with  topology-id arg in function  `get-id-from-name`\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-06T13:01:24.300+0000","updated":"2015-11-06T13:01:24.300+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15192143","id":"15192143","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-195881422\n  \n    @priyank5485 sorry for the delay. can you please upmerge this patch and open up another PR for 1.x-branch as well.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-13T05:30:16.719+0000","updated":"2016-03-13T05:30:16.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15217371","id":"15217371","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user priyank5485 opened a pull request:\n\n    https://github.com/apache/storm/pull/1277\n\n    STORM-1129: Update ui to use topology name\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/priyank5485/storm STORM-1129-1.x\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/storm/pull/1277.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #1277\n    \n----\ncommit 2648d74cad7d1e46ec9bcceb9b3b388cb98cfc8d\nAuthor: Priyank <pshah@hortonworks.com>\nDate:   2016-03-29T05:31:08Z\n\n    STORM-1129: Update ui to use topology name\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-30T04:43:19.054+0000","updated":"2016-03-30T04:43:19.054+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15217372","id":"15217372","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user priyank5485 commented on the pull request:\n\n    https://github.com/apache/storm/pull/854#issuecomment-203246876\n  \n    @harshach @revans2 I have addressed the comments  and raised a PR https://github.com/apache/storm/pull/1277 against the 1.x branch as I could not test my branch off of master due to another issue. Can you please review the PR against 1.x branch? I will port the same to master by updating this PR.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-30T04:45:48.484+0000","updated":"2016-03-30T04:45:48.484+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15217523","id":"15217523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on the pull request:\n\n    https://github.com/apache/storm/pull/1277#issuecomment-203279789\n  \n    @priyank5485 I see that you have the changed the logviewer urls in the topology page to use topology name but there are no changes in logviewer.clj. I think logviewer links should just point to topology id since log links are anyway tied to a specific instance of topology run. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-30T06:56:35.823+0000","updated":"2016-03-30T06:56:35.823+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15217525","id":"15217525","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1277#discussion_r57843883\n  \n    --- Diff: storm-core/src/ui/public/component.html ---\n    @@ -176,7 +176,7 @@\n               var loc = $(row[3])[0]; // logviewer URL\n               return '<input type=\"checkbox\" class=\"workerActionCheckbox\"'+\n                   'id=\"'+checkboxId+'\" value=\"'+host_port+'\"'+checkedString+'/> '+\n    -              '<a href=\"'+loc.protocol+'//'+loc.host+'/dumps/'+topologyId+'/'+\n    +              '<a href=\"'+loc.protocol+'//'+loc.host+'/dumps/'+topologyName+'/'+\n    --- End diff --\n    \n    should be left as it is. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-30T06:57:26.308+0000","updated":"2016-03-30T06:57:26.308+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15218474","id":"15218474","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user priyank5485 commented on the pull request:\n\n    https://github.com/apache/storm/pull/1277#issuecomment-203557013\n  \n    @abhishekagarwal87 Thanks for the catch. I have updated the PR. Can you please review?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-30T18:04:43.440+0000","updated":"2016-03-30T18:04:43.440+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15218655","id":"15218655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user knusbaum commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1277#discussion_r57948138\n  \n    --- Diff: storm-core/src/clj/org/apache/storm/ui/core.clj ---\n    @@ -466,6 +466,21 @@\n            \"assignedCpu\" (.get_assigned_cpu t)})\n         \"schedulerDisplayResource\" (*STORM-CONF* Config/SCHEDULER_DISPLAY_RESOURCE)}))\n     \n    +(defn get-topology-id [topology-name-or-id]\n    +  (let [summary ((all-topologies-summary) \"topologies\")\n    +        filter-fun-name (fn[topo-summary] (= (topo-summary \"name\") topology-name-or-id))\n    +        filter-fun-id (fn[topo-summary] (= (topo-summary \"id\") topology-name-or-id))\n    +        matching-topologies-by-name (filter filter-fun-name summary)\n    +        matching-topologies-by-id (filter filter-fun-id summary)\n    +        matching-topologies\n    +        (cond\n    +          (not-empty matching-topologies-by-name) matching-topologies-by-name\n    +          (not-empty matching-topologies-by-id) matching-topologies-by-id\n    +          :else nil)\n    +        _ (when (empty? matching-topologies) (throw (NotAliveException. (str topology-name-or-id \" is not alive\"))))\n    +        id ((first matching-topologies) \"id\")]\n    +    id))\n    --- End diff --\n    \n    We should probably prioritize matching ids here instead of matching names. As it is now, If I give my topology a name that matches another topology's id, the topology whose id I stole will become inaccessible. Since we're prioritizing names, it will match that topology's id to my topology's name, and display my topology instead.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-30T19:26:08.545+0000","updated":"2016-03-30T19:26:08.545+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15218677","id":"15218677","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user priyank5485 commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1277#discussion_r57950485\n  \n    --- Diff: storm-core/src/clj/org/apache/storm/ui/core.clj ---\n    @@ -466,6 +466,21 @@\n            \"assignedCpu\" (.get_assigned_cpu t)})\n         \"schedulerDisplayResource\" (*STORM-CONF* Config/SCHEDULER_DISPLAY_RESOURCE)}))\n     \n    +(defn get-topology-id [topology-name-or-id]\n    +  (let [summary ((all-topologies-summary) \"topologies\")\n    +        filter-fun-name (fn[topo-summary] (= (topo-summary \"name\") topology-name-or-id))\n    +        filter-fun-id (fn[topo-summary] (= (topo-summary \"id\") topology-name-or-id))\n    +        matching-topologies-by-name (filter filter-fun-name summary)\n    +        matching-topologies-by-id (filter filter-fun-id summary)\n    +        matching-topologies\n    +        (cond\n    +          (not-empty matching-topologies-by-name) matching-topologies-by-name\n    +          (not-empty matching-topologies-by-id) matching-topologies-by-id\n    +          :else nil)\n    +        _ (when (empty? matching-topologies) (throw (NotAliveException. (str topology-name-or-id \" is not alive\"))))\n    +        id ((first matching-topologies) \"id\")]\n    +    id))\n    --- End diff --\n    \n    @knusbaum Thats true. But if we prioritize ids would not your topology become inaccessible? I think going forward we should use topology names in ui and elsewhere so that we can have permanent links and since thats the identifier given by the user. Support for lookup with ids was added for backwards compatibility as suggested by @revans2 and others.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-30T19:41:26.553+0000","updated":"2016-03-30T19:41:26.553+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15218700","id":"15218700","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user knusbaum commented on a diff in the pull request:\n\n    https://github.com/apache/storm/pull/1277#discussion_r57951884\n  \n    --- Diff: storm-core/src/clj/org/apache/storm/ui/core.clj ---\n    @@ -466,6 +466,21 @@\n            \"assignedCpu\" (.get_assigned_cpu t)})\n         \"schedulerDisplayResource\" (*STORM-CONF* Config/SCHEDULER_DISPLAY_RESOURCE)}))\n     \n    +(defn get-topology-id [topology-name-or-id]\n    +  (let [summary ((all-topologies-summary) \"topologies\")\n    +        filter-fun-name (fn[topo-summary] (= (topo-summary \"name\") topology-name-or-id))\n    +        filter-fun-id (fn[topo-summary] (= (topo-summary \"id\") topology-name-or-id))\n    +        matching-topologies-by-name (filter filter-fun-name summary)\n    +        matching-topologies-by-id (filter filter-fun-id summary)\n    +        matching-topologies\n    +        (cond\n    +          (not-empty matching-topologies-by-name) matching-topologies-by-name\n    +          (not-empty matching-topologies-by-id) matching-topologies-by-id\n    +          :else nil)\n    +        _ (when (empty? matching-topologies) (throw (NotAliveException. (str topology-name-or-id \" is not alive\"))))\n    +        id ((first matching-topologies) \"id\")]\n    +    id))\n    --- End diff --\n    \n    That's fine with me. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-30T19:50:27.731+0000","updated":"2016-03-30T19:50:27.731+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15219293","id":"15219293","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on the pull request:\n\n    https://github.com/apache/storm/pull/1277#issuecomment-203743167\n  \n    Thanks @priyank5485 - Though I am still not sure how logviewer links will work. topologyId variable is not assigned any value. Original code -\n    https://github.com/apache/storm/blob/master/storm-core/src/ui/public/component.html#L136\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-31T04:04:59.735+0000","updated":"2016-03-31T04:04:59.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15219347","id":"15219347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user priyank5485 commented on the pull request:\n\n    https://github.com/apache/storm/pull/1277#issuecomment-203751947\n  \n    @abhishekagarwal87 Please look at the $.getJson method. Line 190 in component.html. Now, instead of topologyId being assigned on onReady i do it in $.getJson. Its a side effect of squashing commits that makes it hard to look at the commits that addressed review comments. Sorry about that. Do you guys usually keep separate commits and squash in the end? I will do that next time.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-31T04:55:44.439+0000","updated":"2016-03-31T04:55:44.439+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15219368","id":"15219368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user abhishekagarwal87 commented on the pull request:\n\n    https://github.com/apache/storm/pull/1277#issuecomment-203756449\n  \n    I think either way is fine. My only concern was logviewer links which I think you have addressed. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-31T05:23:31.934+0000","updated":"2016-03-31T05:23:31.934+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907793/comment/15369970","id":"15369970","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user harshach commented on the issue:\n\n    https://github.com/apache/storm/pull/1277\n  \n    @priyank5485 sorry for the delay on this. Can you up merge this patch.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-07-10T21:40:06.631+0000","updated":"2016-07-10T21:40:06.631+0000"}],"maxResults":28,"total":28,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/STORM-1129/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ni2v:"}}