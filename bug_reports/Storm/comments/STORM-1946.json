[A patch to fix the issue., GitHub user slava92 opened a pull request:

    https://github.com/apache/storm/pull/1542

    STORM-1946: initialize lastHeartbeatTimestamp before starting heartbeat task

    When storm stars a large number of ShellBolt-s that consume a lot of CPU time to initialize, it creates a lot of contention between processes for CPU resource. That leads to BoltHeartbeatTimerTask being fired up after 1 second delay before setHeartbeat() assigns initial value to lastHeartbeatTimestamp variable.
    As a result when BoltHeartbeatTimeTask fires up for the first time, getLastHeartbeat() returns value of 0. This in turn leads bolt to die with "subprocess heartbeat timeout" message.
    The fix is to place setHeartBeat() before BoltHeartbeatTimerTask is created. The patch for this is attached.


You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/slava92/storm master

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/storm/pull/1542.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #1542
    
----
commit d38c40026ab5dac266986896424e6c25a440e512
Author: Slava Andreyev <sandreyev@ets.org>
Date:   2016-07-06T17:14:09Z

    initialize lastHeartbeatTimestamp before starting heartbeat task

----
, Github user HeartSaVioR commented on the issue:

    https://github.com/apache/storm/pull/1542
  
    +1 Great finding.
, Github user asfgit closed the pull request at:

    https://github.com/apache/storm/pull/1542
, Thanks [~slava92], I merged into master, 1.x, 1.0.x branches respectively., Great. Thanks for taking care of it so fast.]