[Sorry I misread the code, it is not a cascading failure.  The close message is only sent within the client itself and never goes across the wire.  It looks like it is a race within the client trying to shutdown cleanly.]