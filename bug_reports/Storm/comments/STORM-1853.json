[GitHub user abhishekagarwal87 opened a pull request:

    https://github.com/apache/storm/pull/1440

    STORM-1853: Replace ClassLoaderObjectInputStream with ObjectInputStream

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/abhishekagarwal87/storm STORM-1853

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/storm/pull/1440.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #1440
    
----
commit fafbaeb93aaa3c2e290efdcc3bb2953283e151d5
Author: Abhishek Agarwal <abhishek.agarwal@inmobi.com>
Date:   2016-05-20T19:14:14Z

    STORM-1853: Replace ClassLoaderObjectInputStream with ObjectInputStream

----
, Github user redsanket commented on the pull request:

    https://github.com/apache/storm/pull/1440#issuecomment-220812909
  
    @abhishekagarwal87 There seems to be a KafkaBoltTest failure, can you take a look at it
, Github user abhishekagarwal87 closed the pull request at:

    https://github.com/apache/storm/pull/1440
, GitHub user abhishekagarwal87 reopened a pull request:

    https://github.com/apache/storm/pull/1440

    STORM-1853: Replace ClassLoaderObjectInputStream with ObjectInputStream

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/abhishekagarwal87/storm STORM-1853

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/storm/pull/1440.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #1440
    
----
commit fafbaeb93aaa3c2e290efdcc3bb2953283e151d5
Author: Abhishek Agarwal <abhishek.agarwal@inmobi.com>
Date:   2016-05-20T19:14:14Z

    STORM-1853: Replace ClassLoaderObjectInputStream with ObjectInputStream

----
, Github user abhishekagarwal87 commented on the pull request:

    https://github.com/apache/storm/pull/1440#issuecomment-220818443
  
    @redsanket Test failure is unrelated. Also storm-kafka tests pass on my local box. 
, Github user HeartSaVioR commented on the pull request:

    https://github.com/apache/storm/pull/1440#issuecomment-220883591
  
    +1
    
    I just compared ClassLoaderObjectInputStream and ObjectInputStream, and found ObjectInputStream uses latestUserDefinedLoader() which calls sun.misc.VM.latestUserDefinedLoader(). While I'm not expert on this, but it's not same as ClassLoader.getSystemClassLoader().
    
    If anyone is an expert or having knowledge on classloader please explain this to avoid same issue. Thanks in advance.
, Github user rama-nallamilli commented on the pull request:

    https://github.com/apache/storm/pull/1440#issuecomment-220934324
  
    Not sure what the difference is but the impact of using the System Class Loader rather than userDefined means that any locally built sources that are added to the classpath by a build tool cannot be picked up (causing class not found defs).  Currently attempting to build with this patch locally and will see if it resolves the issue, will update.
, Github user rama-nallamilli commented on the pull request:

    https://github.com/apache/storm/pull/1440#issuecomment-220961510
  
    Confirmed this patch fixed the issue for us, class loading now behaves correctly for locally built sources.  Out of curiosity - this PR is for master, does that mean the fix will be part of storm 2.0.0 or is it also being reapplied to the storm 1.0.x branch?  Also does anybody have any ideas when the next release cycle is for storm.
, Github user abhishekagarwal87 commented on the pull request:

    https://github.com/apache/storm/pull/1440#issuecomment-220963542
  
    This will go in 1.0.2 which is planned for a release soon. 
    cc @ptgoetz 
, Github user asfgit closed the pull request at:

    https://github.com/apache/storm/pull/1440
, Thanks [~abhishek.agarwal],
I merged into master, 1.x, 1.0.x branches.]