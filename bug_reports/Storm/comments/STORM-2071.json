[1 second hardcoded timeout isn't enough time to do rebalance.

https://github.com/apache/storm/blob/master/storm-core/test/clj/org/apache/storm/nimbus_test.clj#L1221, Does this occur from 1.0.1, or 1.0.x-branch (I mean 1.0.2)? If it only occurs from 1.0.1 this is not a problem.

And could you retry build with stopping ZK if you run Zookeeper from your dev. machine?, Just found that building master branch (2.0.0) also fails with this. Seems like this is an intermittent failure., I found and fixed this in my supervisor v2 patch.  I fixed a few bugs because I was not sure if they were caused by the supervisor changes or not.

https://github.com/apache/storm/pull/1642, I replaced the sleep with

{code}
(defn wait-for-status [nimbus name status]
  (while-timeout 5000
    (let [topo-summary (first (filter (fn [topo] (= name (.get_name topo))) (.get_topologies (.getClusterInfo nimbus))))
          topo-status (if topo-summary (.get_status topo-summary) "NOT-RUNNING")]
      (log-message "WAITING FOR "name" TO BE " status " CURRENT " topo-status)
      (not= topo-status status))
    (Thread/sleep 100)))
...
(wait-for-status nimbus "t1" "ACTIVE") 
{code}

If someone wants to put this in a separate pull request or have me break it off I am happy to do it., Covered by STORM-2018.]