[Thanks [~arunmahadevan], merged into master.


There're some conflict on 1.x-branch so I don't port it back.Â If you think it makes sense to port back to 1.x version line, could you please raise a patch against 1.x-branch resolving conflicts as well as deprecating `setRecoveryPeriodMs`?]