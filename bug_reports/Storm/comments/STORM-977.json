[GitHub user gliptak opened a pull request:

    https://github.com/apache/storm/pull/672

    STORM-977 Correct log prefix (-15) when sending -9 signal to worker

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/gliptak/storm STORM-977

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/storm/pull/672.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #672
    
----
commit dfecdddea8b44d692042165344e6b8d741b2ce69
Author: Gábor Lipták <gliptak@gmail.com>
Date:   2015-08-11T00:44:36Z

    STORM-977 Correct log prefix (-15) when sending -9 signal to worker

----
, Github user caofangkun commented on a diff in the pull request:

    https://github.com/apache/storm/pull/672#discussion_r36708996
  
    --- Diff: storm-core/src/clj/backtype/storm/daemon/supervisor.clj ---
    @@ -262,7 +262,7 @@
           (psim/kill-process thread-pid))
         (doseq [pid pids]
           (if as-user
    -        (worker-launcher-and-wait conf user ["signal" pid "9"] :log-prefix (str "kill -15 " pid))
    +        (worker-launcher-and-wait conf user ["signal" pid "9"] :log-prefix (str "kill -9 " pid))
    --- End diff --
    
    I think should change the signal value but not the ```log-prefix```
    should be 
     ```(worker-launcher-and-wait conf user ["signal" pid "15"] :log-prefix (str "kill -15 " pid))```
, Github user caofangkun commented on the pull request:

    https://github.com/apache/storm/pull/672#issuecomment-129691333
  
    The travis ci build failed does not make sense ,
    Does ``` export STORM_TEST_TIMEOUT_MS=100000``` not long enough ?

, Github user d2r commented on a diff in the pull request:

    https://github.com/apache/storm/pull/672#discussion_r36751725
  
    --- Diff: storm-core/src/clj/backtype/storm/daemon/supervisor.clj ---
    @@ -262,7 +262,7 @@
           (psim/kill-process thread-pid))
         (doseq [pid pids]
           (if as-user
    -        (worker-launcher-and-wait conf user ["signal" pid "9"] :log-prefix (str "kill -15 " pid))
    +        (worker-launcher-and-wait conf user ["signal" pid "9"] :log-prefix (str "kill -9 " pid))
    --- End diff --
    
    @caofangkun You are correct.  The JIRA title is wrong.
    
    We want to send the SIGTERM, then wait, then send SIGKILL.
, Updated the JIRA title.  Sorry for confusion.  The log prefix is correct, and the signal is incorrect.  It should be SIGTERM., Github user HeartSaVioR commented on the pull request:

    https://github.com/apache/storm/pull/672#issuecomment-130100543
  
    @caofangkun Build issue is resolved now, but old PRs still need to be upmerged to take effect.
, https://en.wikipedia.org/wiki/Unix_signal, Github user d2r commented on the pull request:

    https://github.com/apache/storm/pull/672#issuecomment-130751533
  
    +1
, Github user asfgit closed the pull request at:

    https://github.com/apache/storm/pull/672
, Thanks [~gliptak], I merged this to master., This has also been cherry-picked to 0.10.x-branch.

[~ptgoetz], I tried to update the Fixed Version/s field with 0.10.0, but I was denied permission to edit the Issue., Trying to fix the Fixed Versions field..., Added to 0.10.0]