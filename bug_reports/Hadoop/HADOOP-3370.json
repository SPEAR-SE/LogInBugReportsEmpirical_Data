{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358"
            },
            "displayName": "Zheng Shao",
            "key": "zshao",
            "name": "zshao",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=zshao",
            "timeZone": "America/Los_Angeles"
        },
        "components": [],
        "created": "2008-05-09T10:38:47.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358"
            },
            "displayName": "Zheng Shao",
            "key": "zshao",
            "name": "zshao",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=zshao",
            "timeZone": "America/Los_Angeles"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2008-05-10T02:49:50.055+0000",
        "customfield_12310222": "3_*:*_2_*:*_52050_*|*_10002_*:*_4_*:*_812577996_*|*_1_*:*_2_*:*_96446700_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_7862992414",
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "5.0",
        "customfield_12310320": null,
        "customfield_12310420": "81771",
        "customfield_12310920": "105074",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0ic7z:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Aug 22 12:34:10 UTC 2008",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "The net effect of this is that, with a long-running TaskTracker, it takes long long time for ReduceTasks on that TaskTracker to fetch map outputs - TaskTracker does that for all reduce tasks in TaskTracker .runningJobs, including those stale ReduceTasks. There is a 5-second delay between 2 requests, which makes it a long time for a running reducetask to get the map output locations, when there are tens of stale ReduceTasks. Of course this also blows up the memory but that is not a too big problem at its rate.\n\nI've verified the bug by adding an html table for TaskTracker.runningJobs on TaskTracker http interface, on a 2-node machine, with a single mapper single reducer job, in which mapper succeeds and reducer fails. I can still see the ReduceTask in TaskTracker.runningJobs, while it's not in the first 2 tables (TaskTracker.tasks and TaskTracker.runningTasks).\n\n\nDetails:\n\nTaskRunner.run() will call TaskTracker.reportTaskFinished() when the task fails,\nwhich calls TaskTracker.TaskInProgress.taskFinished,\nwhich calls TaskTracker.TaskInProgress.cleanup(),\nwhich calls TaskTracker.tasks.remove(taskId).\n\nIn short, it remove a failed task from TaskTracker.tasks, but not TaskTracker.runningJobs.\n\nThen the failure is reported to JobTracker.\n\nJobTracker.heartbeat will call processHeartbeat, \nwhich calls updateTaskStatuses, \nwhich calls tip.getJob().updateTaskStatus, \nwhich calls JobInProgress.failedTask,\nwhich calls JobTracker.markCompletedTaskAttempt, \nwhich puts the task to trackerToMarkedTasksMap, \n\nand then JobTracker.heartbeat will call removeMarkedTasks,\nwhich call removeTaskEntry, \nwhich removes it from trackerToTaskMap.\n\nJobTracker.heartbeat will also call JobTracker.getTasksToKill,\nwhich reads from trackerToTaskMap for <tracker, task> pairs,\nand ask tracker to KILL the task or job of the task.\n\nIn the case there is only one task for a specific job on a specific tracker \nand that task failed (NOTE: and that task is not the last failed try of the\njob - otherwise JobTracker.getTasksToKill will pick it up before \nremoveMarkedTasks comes in and remove it from trackerToTaskMap), the task \ntracker will not receive the KILL task or KILL job message from the JobTracker.\nAs a result, the task will remain in TaskTracker.runningJobs forever.\n\n\nSolution:\nRemove the task from TaskTracker.runningJobs at the same time when we remove it from TaskTracker.tasks.\n",
        "duedate": null,
        "environment": null,
        "fixVersions": [{
            "archived": false,
            "description": "",
            "id": "12313296",
            "name": "0.17.2",
            "releaseDate": "2008-08-11",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12313296"
        }],
        "issuelinks": [
            {
                "id": "12320887",
                "outwardIssue": {
                    "fields": {
                        "issuetype": {
                            "avatarId": 21133,
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "id": "1",
                            "name": "Bug",
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "subtask": false
                        },
                        "priority": {
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
                            "id": "1",
                            "name": "Blocker",
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/1"
                        },
                        "status": {
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "id": "6",
                            "name": "Closed",
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "statusCategory": {
                                "colorName": "green",
                                "id": 3,
                                "key": "done",
                                "name": "Done",
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                            }
                        },
                        "summary": "broken symlinks in jobcache when local tasks are done but job is in progress"
                    },
                    "id": "12399817",
                    "key": "HADOOP-3713",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/12399817"
                },
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12320887",
                "type": {
                    "id": "12310010",
                    "inward": "is part of",
                    "name": "Incorporates",
                    "outward": "incorporates",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"
                }
            },
            {
                "id": "12320272",
                "outwardIssue": {
                    "fields": {
                        "issuetype": {
                            "avatarId": 21133,
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "id": "1",
                            "name": "Bug",
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "subtask": false
                        },
                        "priority": {
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "id": "3",
                            "name": "Major",
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                        },
                        "status": {
                            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                            "id": "5",
                            "name": "Resolved",
                            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                            "statusCategory": {
                                "colorName": "green",
                                "id": 3,
                                "key": "done",
                                "name": "Done",
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                            }
                        },
                        "summary": "the job directory of a failed task may stay forever on a tasktracker node"
                    },
                    "id": "12395996",
                    "key": "HADOOP-3386",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/12395996"
                },
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12320272",
                "type": {
                    "id": "10030",
                    "inward": "is related to",
                    "name": "Reference",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                }
            }
        ],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
            "id": "2",
            "name": "Critical",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/2"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095"
            },
            "id": "12310240",
            "key": "HADOOP",
            "name": "Hadoop Common",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310240"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358"
            },
            "displayName": "Zheng Shao",
            "key": "zshao",
            "name": "zshao",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=zshao",
            "timeZone": "America/Los_Angeles"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2008-05-19T23:10:04.000+0000",
        "status": {
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "id": "6",
            "name": "Closed",
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "failed tasks may stay forever in TaskTracker.runningJobs",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2009-07-08T16:52:46.000+0000",
        "versions": [{
            "archived": false,
            "description": "",
            "id": "12312913",
            "name": "0.17.0",
            "releaseDate": "2008-05-20",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12312913"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3370/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3370/watchers",
            "watchCount": 4
        },
        "workratio": -1
    },
    "id": "12395697",
    "key": "HADOOP-3370",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12395697"
}