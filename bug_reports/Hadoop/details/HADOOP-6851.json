{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12468673","self":"https://issues.apache.org/jira/rest/api/2/issue/12468673","key":"HADOOP-6851","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2010-08-29T18:23:33.394+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jul 30 22:17:07 UTC 2014","customfield_12310420":"77625","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_128305639284_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-30T22:17:07.069+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-6851/watchers","watchCount":5,"isWatching":false},"created":"2010-07-06T21:49:47.840+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12332861","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332861","type":{"id":"10020","name":"Cloners","inward":"is cloned by","outward":"is a clone of","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10020"},"outwardIssue":{"id":"12468672","key":"HDFS-1281","self":"https://issues.apache.org/jira/rest/api/2/issue/12468672","fields":{"summary":"Fix '$bin' path duplication in setup scripts","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12392957","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12392957","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12665400","key":"HADOOP-9902","self":"https://issues.apache.org/jira/rest/api/2/issue/12665400","fields":{"summary":"Shell script rewrite","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-07-30T22:17:07.099+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311393","id":"12311393","name":"scripts"}],"timeoriginalestimate":null,"description":"I have my bash environment setup to echo absolute pathnames when a relative one is specified in 'cd'. This caused problems with all the Hadoop bash scripts because the script accidentally sets the $bin variable twice in this setup. (e.g. would set $bin=\"/path/bin/hadoop\\n/path/bin/hadoop\").\n\nThis jira is for common scripts.  I filed a separate jira for HDFS scripts, which share the same pattern.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12448826","id":"12448826","filename":"HADOOP-6851-0.22.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nspiegelberg","name":"nspiegelberg","key":"nspiegelberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicolas Spiegelberg","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-07-06T21:51:24.788+0000","size":2223,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12448826/HADOOP-6851-0.22.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"102931","customfield_12312823":null,"summary":"Fix '$bin' path duplication in setup scripts","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nspiegelberg","name":"nspiegelberg","key":"nspiegelberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicolas Spiegelberg","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nspiegelberg","name":"nspiegelberg","key":"nspiegelberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nicolas Spiegelberg","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468673/comment/12904007","id":"12904007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"Isn't this a dupe of HADOOP-6101? I don't see how the bin scripts hit this since they don't appear to use relative paths.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-08-29T18:23:33.394+0000","updated":"2010-08-29T18:23:33.394+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468673/comment/13413991","id":"13413991","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dowobeha","name":"dowobeha","key":"dowobeha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lane Schwartz","active":true,"timeZone":"America/New_York"},"body":"This problem occurs when CDPATH is set and includes \".\" (the present working directory). It is unsafe to assume that cd will not print to standard output.\n\nThe bash documentation states:\n\n{quote}\nIf a non-empty directory name from CDPATH is used, or if ‘-’ is the first argument, and the directory change is successful, the absolute pathname of the new working directory is written to the standard output. \n{quote}\n\nSteps to recreate:\n\n1. export CDPATH=.\n2. Run any hadoop script that contains the offending bin=`cd \"$bin\"; pwd` line\n\nIn this case, because CDPATH includes \".\" and the current value of $bin is \".\" an invocation of \"cd\" will cause the current absolute path to be printed to standard output. I have verified this problem occurs under these circumstances using bash 4.1.2(1) on Scientific Linux 6.2.\n\nThe safest fix is to find all instances of the following:\n\n{code}\nbin=`cd \"$bin\"; pwd`\n{code}\n\nand replace the above with the following:\n\n{code}\nbin=`cd \"$bin\" &> /dev/null; pwd`\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dowobeha","name":"dowobeha","key":"dowobeha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lane Schwartz","active":true,"timeZone":"America/New_York"},"created":"2012-07-13T19:35:55.406+0000","updated":"2012-07-13T19:35:55.406+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468673/comment/13442960","id":"13442960","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianbwei","name":"jianbwei","key":"jianbwei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianbin Wei","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Lane, you may want to reattach a new patch and click the \"submit patch\" to kick off the automatic hadoop QA process.  In my machine, I got patch apply failure.\n\n\n⚡ dev-support/test-patch.sh ~/Downloads/HADOOP-6851-0.22.patch \nRunning in developer mode\n\n\n======================================================================\n======================================================================\n    Testing patch for HADOOP-6851-0.22.patch.\n======================================================================\n======================================================================\n\n\n\nPatch file /Users/jianbwei/Downloads/HADOOP-6851-0.22.patch copied to /tmp\nThe patch does not appear to apply with p0 to p2\nPATCH APPLICATION FAILED\n\n\n\n\n-1 overall.  \n\n    -1 patch.  The patch command could not apply the patch.\n\n\n\n\n======================================================================\n======================================================================\n    Finished build.\n======================================================================\n======================================================================\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianbwei","name":"jianbwei","key":"jianbwei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianbin Wei","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-28T05:05:58.927+0000","updated":"2012-08-28T05:05:58.927+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468673/comment/13443243","id":"13443243","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dowobeha","name":"dowobeha","key":"dowobeha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lane Schwartz","active":true,"timeZone":"America/New_York"},"body":"What should I build my patch against? The latest svn, or a particular release?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dowobeha","name":"dowobeha","key":"dowobeha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lane Schwartz","active":true,"timeZone":"America/New_York"},"created":"2012-08-28T16:24:43.834+0000","updated":"2012-08-28T16:24:43.834+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468673/comment/13443248","id":"13443248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianbwei","name":"jianbwei","key":"jianbwei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianbin Wei","active":true,"timeZone":"America/Los_Angeles"},"body":"I am not sure.  But I guess you can specify the version you patch against when submitting the patch.  I found it is not compatible with trunk and just notice that your patch is for 0.22.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianbwei","name":"jianbwei","key":"jianbwei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianbin Wei","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-28T16:29:44.491+0000","updated":"2012-08-28T16:29:44.491+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468673/comment/14080070","id":"14080070","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"next patch version of HADOOP-9902 will include this fix. Closing as a dupe.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2014-07-30T22:17:07.096+0000","updated":"2014-07-30T22:17:07.096+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-6851/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0hyzr:"}}