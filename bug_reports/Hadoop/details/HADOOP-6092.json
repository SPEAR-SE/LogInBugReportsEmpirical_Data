{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12428325","self":"https://issues.apache.org/jira/rest/api/2/issue/12428325","key":"HADOOP-6092","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2009-06-19T17:54:53.462+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Aug 11 18:02:05 UTC 2011","customfield_12310420":"65424","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_37280062_*|*_5_*:*_2_*:*_196892720_*|*_4_*:*_1_*:*_67454739189","customfield_12312321":null,"resolutiondate":"2011-08-11T18:02:05.332+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-6092/watchers","watchCount":5,"isWatching":false},"created":"2009-06-19T07:33:33.403+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313211","id":"12313211","description":"","name":"0.19.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-08-11T18:02:05.370+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310687","id":"12310687","name":"io","description":""}],"timeoriginalestimate":null,"description":"Exception in thread \"main\" org.apache.hadoop.fs.FSError: java.io.IOException: No space left on device\n        at org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileOutputStream.write(RawLocalFileSystem.java:199)\n        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\n        at java.io.FilterOutputStream.close(FilterOutputStream.java:140)\n        at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:61)\n        at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:86)\n        at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSOutputSummer.close(ChecksumFileSystem.java:339)\n        at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:61)\n        at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:86)\n        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:825)\n        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1142)\n        at org.apache.nutch.indexer.Indexer.index(Indexer.java:72)\n        at org.apache.nutch.indexer.Indexer.run(Indexer.java:92)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n        at org.apache.nutch.indexer.Indexer.main(Indexer.java:101)\nCaused by: java.io.IOException: No space left on device\n        at java.io.FileOutputStream.writeBytes(Native Method)\n        at java.io.FileOutputStream.write(FileOutputStream.java:260)\n        at org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileOutputStream.write(RawLocalFileSystem.java:197)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"102510","customfield_12312823":null,"summary":"No space left on device","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mwq1984","name":"mwq1984","key":"mwq1984","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mawanqiang","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mwq1984","name":"mwq1984","key":"mwq1984","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mawanqiang","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"ubuntu0.8.4","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12721904","id":"12721904","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"If your disk is out of space, of course you will see this exception. If you believe this to be an error in Hadoop, please reopen with an explanation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2009-06-19T17:54:53.462+0000","updated":"2009-06-19T17:54:53.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12722442","id":"12722442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mwq1984","name":"mwq1984","key":"mwq1984","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mawanqiang","active":true,"timeZone":"Etc/UTC"},"body":"but there are a lot of hard disk space","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mwq1984","name":"mwq1984","key":"mwq1984","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mawanqiang","active":true,"timeZone":"Etc/UTC"},"created":"2009-06-22T00:36:26.170+0000","updated":"2009-06-22T00:36:26.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12876139","id":"12876139","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"body":"mawanqiang, is this still an issue, RawLocalFileSystem.java is more of a wrapper on Java File I/O, Please let us know if you are still facing this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-07T06:53:34.018+0000","updated":"2010-06-07T06:53:34.018+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12893521","id":"12893521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmao","name":"mmao","key":"mmao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Meng Mao","active":true,"timeZone":"Etc/UTC"},"body":"We've been seeing what we think is the same thing in Hadoop 0.20.1.\n\nHere's what the dfs health page says:\nConfigured Capacity\t :\t 77.22 TB\n DFS Used\t :\t 58.18 TB\n Non DFS Used\t :\t 5.69 TB\n DFS Remaining\t :\t 13.34 TB\n DFS Used%\t :\t 75.35 %\n DFS Remaining%\t :\t 17.27 %\n Live Nodes \t :\t 45\n Dead Nodes \t :\t 0\n\nEven the most occupied node has just under 80% used space.\n\nFor both Java and Streaming jobs, we've seen exceptions like the below, which is from a streaming run:\nFailed to merge on the local FSorg.apache.hadoop.fs.FSError: java.io.IOException: No space left on device\n\tat org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileOutputStream.write(RawLocalFileSystem.java:192)\n\tat java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n\tat java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)\n\tat org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:49)\n\tat java.io.DataOutputStream.write(DataOutputStream.java:90)\n\tat org.apache.hadoop.mapred.IFileOutputStream.write(IFileOutputStream.java:84)\n\tat org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:49)\n\tat java.io.DataOutputStream.write(DataOutputStream.java:90)\n\tat org.apache.hadoop.mapred.IFile$Writer.append(IFile.java:218)\n\tat org.apache.hadoop.mapred.Merger.writeFile(Merger.java:157)\n\tat org.apache.hadoop.mapred.ReduceTask$ReduceCopier$LocalFSMerger.run(ReduceTask.java:2533)\nCaused by: java.io.IOException: No space left on device\n\tat java.io.FileOutputStream.writeBytes(Native Method)\n\tat java.io.FileOutputStream.write(FileOutputStream.java:260)\n\tat org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileOutputStream.write(RawLocalFileSystem.java:190)\n\t... 10 more\n\nThis job had about 100GB of input, and I'm guessing around that level of data being passed into the reducers. During the job execution, watching dfsnodelist.jsp?whatNodes=LIVE doesn't indicate much growth, certainly not to the point where a node hits 100%. Not that I know that kind of tracking of disk use is actually supported.\n\nAFAIK, we have the physical disk space to match what the dfs pages indicate. \n\nWhat can we do to investigate how we're running out of space?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmao","name":"mmao","key":"mmao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Meng Mao","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-29T06:04:05.877+0000","updated":"2010-07-29T06:04:05.877+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12893523","id":"12893523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmao","name":"mmao","key":"mmao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Meng Mao","active":true,"timeZone":"Etc/UTC"},"body":"one more comment --\nwe have a nightly process composed of Java jobs, that runs over roughly the same data set size each time. One of the big upfront filtering jobs seems to currently the most at-risk for triggering a No space left error.\nAs noted above, we have about 13TB free. As this number shrinks past 10TB, the incidence of No space left errors rises. This is only empirical, but we try to keep more than 10TB free just to avoid it.\n\nWithout any knowledge of what's going on internally, it seems that there's certainly correlation between HDFS space left and likelihood of a job on roughly the same input size failing with No space left. What's puzzling us is why it's when there's still as much as 10TB free, for a job that's on the order of 100GB of input.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmao","name":"mmao","key":"mmao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Meng Mao","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-29T06:08:32.926+0000","updated":"2010-07-29T06:08:32.926+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12893951","id":"12893951","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmao","name":"mmao","key":"mmao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Meng Mao","active":true,"timeZone":"Etc/UTC"},"body":"Well tonight we had a failure with more than 12TB free. So the problem gets worse for us. Here is a sample of the errors we got:\n\njava.io.IOException: Task: attempt_201005271420_14408_r_000000_0 - The reduce copier failed\n\tat org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:380)\n\tat org.apache.hadoop.mapred.Child.main(Child.java:170)\nCaused by: org.apache.hadoop.util.DiskChecker$DiskErrorException: Could not find any valid local directory for file:/hadoop/hadoop-metadata/cache/mapred/local/taskTracker/jobcache/job_201005271420_14408/attempt_201005271420_14408_r_000000_0/output/map_1043.out\n\tat org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathForWrite(LocalDirAllocator.java:343)\n\tat org.apache.hadoop.fs.LocalDirAllocator.getLocalPathForWrite(LocalDirAllocator.java:124)\n\tat org.apache.hadoop.mapred.ReduceTask$ReduceCopier$LocalFSMerger.run(ReduceTask.java:2513)\n\n\nError: java.io.IOException: No space left on device\n\tat java.io.FileOutputStream.writeBytes(Native Method)\n\tat java.io.FileOutputStream.write(FileOutputStream.java:260)\n\tat org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileOutputStream.write(RawLocalFileSystem.java:190)\n\tat java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n\tat java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)\n\tat org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:49)\n\tat java.io.DataOutputStream.write(DataOutputStream.java:90)\n\tat org.apache.hadoop.mapred.IFileOutputStream.write(IFileOutputStream.java:84)\n\tat org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:49)\n\tat java.io.DataOutputStream.write(DataOutputStream.java:90)\n\tat org.apache.hadoop.mapred.IFile$Writer.append(IFile.java:217)\n\tat org.apache.hadoop.mapred.Merger.writeFile(Merger.java:157)\n\tat org.apache.hadoop.mapred.ReduceTask$ReduceCopier$LocalFSMerger.run(ReduceTask.java:2533)\n\n\nError: java.io.IOException: No space left on device\n\tat java.io.FileOutputStream.writeBytes(Native Method)\n\tat java.io.FileOutputStream.write(FileOutputStream.java:260)\n\tat org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileOutputStream.write(RawLocalFileSystem.java:190)\n\tat java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n\tat java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)\n\tat org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:49)\n\tat java.io.DataOutputStream.write(DataOutputStream.java:90)\n\tat org.apache.hadoop.mapred.IFileOutputStream.write(IFileOutputStream.java:84)\n\tat org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:49)\n\tat java.io.DataOutputStream.write(DataOutputStream.java:90)\n\tat org.apache.hadoop.mapred.IFile$Writer.append(IFile.java:189)\n\tat org.apache.hadoop.mapred.Task$CombineOutputCollector.collect(Task.java:880)\n\tat org.apache.hadoop.mapred.lib.aggregate.ValueAggregatorCombiner.reduce(ValueAggregatorCombiner.java:68)\n\tat com.visiblemeasures.overdrive.hadoop.metrics.OverdriveAggregator$OverdriveAggregatorCombiner.reduce(OverdriveAggregator.java:315)\n\tat com.visiblemeasures.overdrive.hadoop.metrics.OverdriveAggregator$OverdriveAggregatorCombiner.reduce(OverdriveAggregator.java:286)\n\tat org.apache.hadoop.mapred.Task$OldCombinerRunner.combine(Task.java:1148)\n\tat org.apache.hadoop.mapred.ReduceTask$ReduceCopier$InMemFSMergeThread.doInMemMerge(ReduceTask.java:2642)\n\tat org.apache.hadoop.mapred.ReduceTask$ReduceCopier$InMemFSMergeThread.run(ReduceTask.java:2580)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmao","name":"mmao","key":"mmao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Meng Mao","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-30T06:58:48.740+0000","updated":"2010-07-30T06:58:48.740+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12898371","id":"12898371","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"body":"Meng, from what I can guess looking at your cluster configuration and job that you are executing, Is that One of the nodes in your cluster is running out of space, and when map/reduce task tries to write out intermediate result data to its local disks (non HDFS disk space) it is running out of space causing job failures, Though your HDFS cluster had more than 12TB of free space, the temp space on the failed node should have fallen well below limits. just check the free space on the disks holding the temp paths configured for map/reduce.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-13T19:05:08.333+0000","updated":"2010-08-13T19:05:08.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12898387","id":"12898387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmao","name":"mmao","key":"mmao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Meng Mao","active":true,"timeZone":"Etc/UTC"},"body":"I see. Yes, our physical disks are definitely full to bursting. Looking on one of the nodes that recently reported several no disk space errors, our configured temp dir (/disk1/hadoop/hadoop-metadata/cache/mapred/local) has 62 GB of stuff in it. \nAnd only 16GB used by the current job.\n\nThere's about 1500 uncleaned attempt_ directories lying around in local/. The earliest have been around since the last restart of our grid. Is it safe to delete these? How do they accumulate?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmao","name":"mmao","key":"mmao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Meng Mao","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-13T19:37:35.420+0000","updated":"2010-08-13T19:37:35.420+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/12898515","id":"12898515","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"body":"I guess this is a known issue with Map/Reduce, even our clusters ran out of space after a few months due to these attempt files and cache files created by map/reduce. Ideally clean up of these files happen after successful job completion but in this case due to failures these are not getting cleaned up. I think its OK to purge these files when there are no Job's running, \n\nThere are a few open bugs on Mapreduce relating to this issue, you might want to refer to a few of these fixes. \n\nhttps://issues.apache.org/jira/browse/MAPREDUCE-1693\n\nIf this is the case then you might want to close this against MAPREDUCE-1693.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-14T06:01:05.771+0000","updated":"2010-08-14T06:01:05.771+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428325/comment/13083296","id":"13083296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"Already have jiras tracking this, see last comment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-08-11T18:02:05.368+0000","updated":"2011-08-11T18:02:05.368+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-6092/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0hwe7:"}}