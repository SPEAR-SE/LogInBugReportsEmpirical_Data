{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12396119","self":"https://issues.apache.org/jira/rest/api/2/issue/12396119","key":"HADOOP-3395","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2010-11-30T11:15:55.363+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Nov 18 09:39:58 UTC 2011","customfield_12310420":"81767","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_110739718480_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-11-18T09:39:57.986+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3395/watchers","watchCount":3,"isWatching":false},"created":"2008-05-15T16:37:59.709+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312913","id":"12312913","description":"","name":"0.17.0","archived":false,"released":true,"releaseDate":"2008-05-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-11-18T09:39:58.184+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310689","id":"12310689","name":"fs","description":"Generic FileSystem code"}],"timeoriginalestimate":null,"description":"When starting the namenode, I would get the following exception:\n\nCaused by: java.io.IOException: Incomplete HDFS URI, no host/port: hdfs://0:0:0:0:0:0:0:0:50051\n\tat org.apache.hadoop.dfs.DistributedFileSystem.initialize(DistributedFileSystem.java:66)\n\tat org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1275)\n\tat org.apache.hadoop.fs.FileSystem.access$300(FileSystem.java:56)\n\tat org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1286)\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:208)\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:108)\n\tat org.apache.hadoop.fs.Trash.<init>(Trash.java:62)\n\tat org.apache.hadoop.dfs.NameNode.initialize(NameNode.java:138)\n\tat org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:180)\n\tat org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:166)\n\n\nI tracked this down to NameNode.java line 127 and 128. The socetAddress returned by this.server.getListenerAddress() is an ipv6 style address with colons. Then this is set as the default filesystem which causes problems on the next call to FileSystem.get.\n\nI replacedthe line:\nthis.nameNodeAddress = this.server.getListenerAddress();\nwith\nthis.nameNodeAddress = socAddr;\n\nAnd this made it work for me. However, I gather this would break support  for ephemeral ports? Is there a better way for me to fix this, maybe disabling ipv6 elsewhere?\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"105055","customfield_12312823":null,"summary":"Namenode.initialize() sets the default filesystem uri to an ip6 address (0:0:0:0:0:0:0:0)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=clint.morgan","name":"clint.morgan","key":"clint.morgan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Clint Morgan","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=clint.morgan","name":"clint.morgan","key":"clint.morgan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Clint Morgan","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12396119/comment/12965200","id":"12965200","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hypobyte","name":"hypobyte","key":"hypobyte","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Trygve Sanne Hardersen","active":true,"timeZone":"Etc/UTC"},"body":"I hit this today with 0.20-append on Debian when using 0.0.0.0 as the NameNode IP. Setting java.net.preferIPv4Stack for the Java process seems to solve the problem, as it makes the socket actually use 0.0.0.0 and not the ipv6 version.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hypobyte","name":"hypobyte","key":"hypobyte","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Trygve Sanne Hardersen","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-30T11:15:55.363+0000","updated":"2010-11-30T11:15:55.363+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12396119/comment/13152744","id":"13152744","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"While you're supposed to use hostnames for HDFS URIs, HADOOP-6056 fixes this issue by shipping with the IPv4 preferrer opt. Resolving as dupe.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-11-18T09:39:58.134+0000","updated":"2011-11-18T09:39:58.134+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3395/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ic3r:"}}