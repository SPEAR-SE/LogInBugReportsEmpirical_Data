{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12735364","self":"https://issues.apache.org/jira/rest/api/2/issue/12735364","key":"HADOOP-10986","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2014-08-21T13:31:04.180+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Aug 21 23:01:04 UTC 2014","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_133020870_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-08-21T23:01:36.135+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-10986/watchers","watchCount":6,"isWatching":false},"created":"2014-08-20T10:04:35.310+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326263","id":"12326263","description":"2.5.0 release","name":"2.5.0","archived":false,"released":true,"releaseDate":"2014-08-11"}],"issuelinks":[{"id":"12394844","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12394844","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"12733368","key":"HADOOP-10956","self":"https://issues.apache.org/jira/rest/api/2/issue/12733368","fields":{"summary":"Fix create-release script to include docs and necessary txt files","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kasha","name":"kasha","key":"kasha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-11-03T18:05:38.051+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"I noticed that the binary tarball for 2.5.0 is almost 300MB, while 2.4.1 is only 132MB. Unpacking the latest tarball gives me 1.8 GB of stuff, with the majority in the \"share\" directory.\n \n{code}\n$ cd hadoop-2.4.1\n$ du -sh *\n364K    bin\n356K    etc\n100K    include\n2,3M    lib\n128K    libexec\n24K     LICENSE.txt\n12K     NOTICE.txt\n12K     README.txt\n336K    sbin\n280M    share\n{code}\n\n{code}\n $ cd hadoop-2.5.0 \n $ du -sh *\n512K    bin\n332K    etc\n100K    include\n4,6M    lib\n128K    libexec\n336K    sbin\n1,8G    share\n{code}\n\nI also saw some warnings from tar while unpacking:\n\n{code}\n$ tar xf hadoop-2.5.0.tar.gz \ntar: Ignoring unknown extended header keyword `SCHILY.dev'\ntar: Ignoring unknown extended header keyword `SCHILY.ino'\ntar: Ignoring unknown extended header keyword `SCHILY.nlink'\ntar: Ignoring unknown extended header keyword `SCHILY.dev'\ntar: Ignoring unknown extended header keyword `SCHILY.ino'\ntar: Ignoring unknown extended header keyword `SCHILY.nlink'\ntar: Ignoring unknown extended header keyword `SCHILY.dev'\ntar: Ignoring unknown extended header keyword `SCHILY.ino'\ntar: Ignoring unknown extended header keyword `SCHILY.nlink'\ntar: Ignoring unknown extended header keyword `SCHILY.dev'\ntar: Ignoring unknown extended header keyword `SCHILY.ino'\ntar: Ignoring unknown extended header keyword `SCHILY.nlink'\ntar: Ignoring unknown extended header keyword `SCHILY.dev'\ntar: Ignoring unknown extended header keyword `SCHILY.ino'\ntar: Ignoring unknown extended header keyword `SCHILY.nlink'\ntar: Ignoring unknown extended header keyword `SCHILY.dev'\ntar: Ignoring unknown extended header keyword `SCHILY.ino'\ntar: Ignoring unknown extended header keyword `SCHILY.nlink'\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327745","id":"12327745","description":"2.5.1 release","name":"2.5.1","archived":false,"released":true,"releaseDate":"2014-09-05"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"hadoop tarball is twice as big as prev. version and 6 times as big unpacked","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fs111","name":"fs111","key":"fs111","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fs111&avatarId=17244","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fs111&avatarId=17244","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fs111&avatarId=17244","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fs111&avatarId=17244"},"displayName":"André Kelpe","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fs111","name":"fs111","key":"fs111","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fs111&avatarId=17244","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fs111&avatarId=17244","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fs111&avatarId=17244","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fs111&avatarId=17244"},"displayName":"André Kelpe","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12735364/comment/14105364","id":"14105364","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"It seems the culprit for the significant size increase is in the documentation, specifically protobuf javadocs:\n\n{code}\n$ cd hadoop-2.5.0/share/doc/hadoop\n$ du -m -s *\n55\tapi\n119\tcommon\n1\tcss\n1\tdependency-analysis.html\n1\thadoop-annotations\n1\thadoop-archives\n1\thadoop-assemblies\n2\thadoop-auth\n1\thadoop-auth-examples\n1\thadoop-common-project\n1\thadoop-datajoin\n1\thadoop-dist\n1\thadoop-distcp\n1\thadoop-extras\n1\thadoop-gridmix\n1\thadoop-hdfs-bkjournal\n11\thadoop-hdfs-httpfs\n1\thadoop-hdfs-nfs\n1\thadoop-hdfs-project\n1\thadoop-mapreduce\n3\thadoop-mapreduce-client\n1\thadoop-mapreduce-examples\n1\thadoop-maven-plugins\n1\thadoop-minicluster\n1\thadoop-minikdc\n1\thadoop-nfs\n1\thadoop-openstack\n1\thadoop-pipes\n725\thadoop-project-dist\n1\thadoop-rumen\n1\thadoop-sls\n1\thadoop-streaming\n1\thadoop-tools\n5\thadoop-yarn\n1\thadoop-yarn-project\n618\thdfs\n1\thttpfs\n1\timages\n1\tindex.html\n1\tmapreduce\n1\tproject-reports.html\n1\tyarn\n{code}\n\n{code}\n$ cd hadoop-2.5.0/share/doc/hadoop/\n$ du -m -s hdfs/api/src-html/org/apache/hadoop/hdfs/server/namenode/\n222\thdfs/api/src-html/org/apache/hadoop/hdfs/server/namenode/\n{code}\n\nAlso it seems we have duplicate javadocs dirs:\n\n{code}\n$ cd hadoop-2.5.0/share/doc/hadoop/\n$ find . -name api -type d\n./api\n./api/org/apache/hadoop/mapreduce/v2/api\n./api/org/apache/hadoop/yarn/api\n./api/org/apache/hadoop/yarn/client/api\n./api/src-html/org/apache/hadoop/yarn/api\n./api/src-html/org/apache/hadoop/yarn/client/api\n./common/api\n./hadoop-project-dist/hadoop-common/api\n./hadoop-project-dist/hadoop-hdfs/api\n./hdfs/api\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2014-08-21T13:31:04.180+0000","updated":"2014-08-21T13:31:04.180+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12735364/comment/14106105","id":"14106105","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"Thanks for the investigation, Alejandro. I see why this happened - the script (create-release.sh) was doing mvn install with -Pdocs option, on top of which I copied the mvn site output as well. We can fix the script to not create javadocs during install, and use what we get from site. I tried this locally and the binary tarball is much smaller. \n\nI propose we handle this also under HADOOP-10956, and close this as a duplicate. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-08-21T23:01:04.345+0000","updated":"2014-08-21T23:01:04.345+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-10986/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1z4gf:"}}