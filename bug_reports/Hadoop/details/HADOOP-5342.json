{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12415712","self":"https://issues.apache.org/jira/rest/api/2/issue/12415712","key":"HADOOP-5342","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2010-08-09T04:37:37.920+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Apr 10 11:38:43 UTC 2018","customfield_12310420":"78015","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_287672132868_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2018-04-10T11:38:43.254+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-5342/watchers","watchCount":12,"isWatching":false},"created":"2009-02-26T22:43:10.432+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313424","id":"12313424","description":"","name":"0.18.2","archived":false,"released":true,"releaseDate":"2008-11-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-04-10T11:38:43.298+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"After restarting a cluster (including rebooting) the dfs got corrupted because many DataNodes did not start up, running into the following exception:\n\n2009-02-26 22:33:53,774 ERROR org.apache.hadoop.dfs.DataNode: org.apache.hadoop.dfs.InconsistentFSStateException: Directory xxx  is in an inconsistent state: version file in current directory is missing.\n\tat org.apache.hadoop.dfs.Storage$StorageDirectory.analyzeStorage(Storage.java:326)\n\tat org.apache.hadoop.dfs.DataStorage.recoverTransitionRead(DataStorage.java:105)\n\tat org.apache.hadoop.dfs.DataNode.startDataNode(DataNode.java:306)\n\tat org.apache.hadoop.dfs.DataNode.<init>(DataNode.java:223)\n\tat org.apache.hadoop.dfs.DataNode.makeInstance(DataNode.java:3030)\n\tat org.apache.hadoop.dfs.DataNode.instantiateDataNode(DataNode.java:2985)\n\tat org.apache.hadoop.dfs.DataNode.createDataNode(DataNode.java:2993)\n\tat org.apache.hadoop.dfs.DataNode.main(DataNode.java:3115)\n\n\nThis happens when using multiple disks with at least one previously marked as read-only, such that the storage version became out-dated, but after reboot it was mounted read-write, resulting in the DataNode not starting because of out-dated version.\n\nThis is a big headache. If a DataNode has multiple disks of which at least one has the correct storage version then out-dated versions should not bring down the DataNode.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"103761","customfield_12312823":null,"summary":"DataNodes do not start up because InconsistentFSStateException on just part of the disks in use","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ckunz","name":"ckunz","key":"ckunz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christian Kunz","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ckunz","name":"ckunz","key":"ckunz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christian Kunz","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415712/comment/12896450","id":"12896450","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=glaksmono","name":"glaksmono","key":"glaksmono","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grady Laksmono","active":true,"timeZone":"Etc/UTC"},"body":"I'm also experiencing this issue, is there a quick solution for now? This happened to me once before, then I reformat the HDFS and it works fine, but this happened again, but this time I have files on my HDFS..\n\n\n10/08/08 21:33:01 INFO common.Storage: Storage directory /tmp/hadoop-grady/dfs/name does not exist.\n10/08/08 21:33:01 ERROR namenode.FSNamesystem: FSNamesystem initialization failed.\norg.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /tmp/hadoop-grady/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible.\n\tat org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:290)\n\tat org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:87)\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:311)\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:292)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:201)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:279)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:956)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:965)\n10/08/08 21:33:01 INFO ipc.Server: Stopping server on 9000\n10/08/08 21:33:01 ERROR namenode.NameNode: org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /tmp/hadoop-grady/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible.\n\tat org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:290)\n\tat org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:87)\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:311)\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:292)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:201)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:279)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:956)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:965)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=glaksmono","name":"glaksmono","key":"glaksmono","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grady Laksmono","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-09T04:37:37.920+0000","updated":"2010-08-09T04:37:37.920+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415712/comment/13035405","id":"13035405","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ram_krish","name":"ram_krish","key":"ram_krish","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ramkrishna.s.vasudevan","active":true,"timeZone":"Asia/Kolkata"},"body":"I would like to suggest \nPls correct me if am wrong\n\nnamespace id is getting updated immediately after one of the disks of the dfs.data.dir got updated. \ninstead update the namespace id after parsing all the dfs.data.dir storage directories ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ram_krish","name":"ram_krish","key":"ram_krish","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ramkrishna.s.vasudevan","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-05-18T14:31:44.587+0000","updated":"2011-05-18T14:31:44.587+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415712/comment/14069296","id":"14069296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Ping!\n\nThis is something that should probably get some attention.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2014-07-21T21:12:41.462+0000","updated":"2014-07-21T21:12:41.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415712/comment/16432109","id":"16432109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boky01","name":"boky01","key":"boky01","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=boky01&avatarId=29244","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=boky01&avatarId=29244","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=boky01&avatarId=29244","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=boky01&avatarId=29244"},"displayName":"Andras Bokor","active":true,"timeZone":"Europe/Budapest"},"body":"Last reported occurrence was in 2010 so closing as Cannot Reproduce. Please reopen if you still experience this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boky01","name":"boky01","key":"boky01","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=boky01&avatarId=29244","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=boky01&avatarId=29244","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=boky01&avatarId=29244","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=boky01&avatarId=29244"},"displayName":"Andras Bokor","active":true,"timeZone":"Europe/Budapest"},"created":"2018-04-10T11:38:43.282+0000","updated":"2018-04-10T11:38:43.282+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-5342/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0i447:"}}