{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12362657","self":"https://issues.apache.org/jira/rest/api/2/issue/12362657","key":"HADOOP-1013","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312308","id":"12312308","description":"","name":"0.11.2","archived":false,"released":true,"releaseDate":"2007-02-16"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-02-13T17:37:50.233+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 01 02:04:31 UTC 2007","customfield_12310420":"80783","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1373005648_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2007-03-01T02:04:31.987+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-1013/watchers","watchCount":2,"isWatching":false},"created":"2007-02-13T04:41:06.339+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312257","id":"12312257","description":"","name":"0.11.0","archived":false,"released":true,"releaseDate":"2007-02-02"}],"issuelinks":[{"id":"12315199","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12315199","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"12361966","key":"HADOOP-972","self":"https://issues.apache.org/jira/rest/api/2/issue/12361966","fields":{"summary":"Improve the rack-aware replica placement performance","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T16:42:17.714+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"It seems that if something is wrong in the configuration that results in the number of racks being zero, the symptom is a divide-by-zero exception.\n\n[root@domU-12-31-34-00-03-2F ~]# cd /usr/local/hadoop-0.11.0/\n[root@domU-12-31-34-00-03-2F hadoop-0.11.0]# bin/hadoop jar hadoop-0.11.0-examples.jar pi 10 10000000\nNumber of Maps = 10 Samples per Map = 10000000\norg.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.ArithmeticException: / by zero\n        at org.apache.hadoop.dfs.FSNamesystem$Replicator.chooseTarget(FSNamesystem.java:2593)\n        at org.apache.hadoop.dfs.FSNamesystem$Replicator.chooseTarget(FSNamesystem.java:2555)\n        at org.apache.hadoop.dfs.FSNamesystem.startFile(FSNamesystem.java:684)\n        at org.apache.hadoop.dfs.NameNode.create(NameNode.java:248)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:337)\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:538)\n\n        at org.apache.hadoop.ipc.Client.call(Client.java:467)\n        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:164)\n        at org.apache.hadoop.dfs.$Proxy0.create(Unknown Source)\n        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.locateNewBlock(DFSClient.java:1091)\n        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:1031)\n        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.endBlock(DFSClient.java:1255)\n        at org.apache.hadoop.dfs.DFSClient$DFSOutputStream.close(DFSClient.java:1345)\n        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)\n        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)\n        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)\n        at org.apache.hadoop.fs.FSDataOutputStream$Summer.close(FSDataOutputStream.java:98)\n        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)\n        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)\n        at java.io.FilterOutputStream.close(FilterOutputStream.java:143)\n        at org.apache.hadoop.io.SequenceFile$Writer.close(SequenceFile.java:724)\n        at org.apache.hadoop.examples.PiEstimator.launch(PiEstimator.java:185)\n        at org.apache.hadoop.examples.PiEstimator.main(PiEstimator.java:226)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:71)\n        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:143)\n        at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:40)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:155)\n[root@domU-12-31-34-00-03-2F hadoop-0.11.0]# ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"106591","customfield_12312823":null,"summary":"ArithmeticException when number of racks is zero","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jimwhite","name":"jimwhite","key":"jimwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James P. White","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jimwhite","name":"jimwhite","key":"jimwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James P. White","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"EC2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362657/comment/12472518","id":"12472518","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jimwhite","name":"jimwhite","key":"jimwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James P. White","active":true,"timeZone":"America/Los_Angeles"},"body":"The first thing in the log indicates trouble ahead:\n\n[root@domU-12-31-34-00-00-D9 hadoop-0.11.0]# more /mnt/hadoop/logs/hadoop-root-namenode-domU-12-31-34-00-00-D9.log \n2007-02-12 23:22:53,292 INFO org.apache.hadoop.dfs.StateChange: STATE* Network topology has 0 racks and 0 datanodes\n2007-02-12 23:22:53,550 INFO org.mortbay.util.Credential: Checking Resource aliases\n2007-02-12 23:22:53,659 INFO org.mortbay.http.HttpServer: Version Jetty/5.1.4\n2007-02-12 23:22:54,475 INFO org.mortbay.util.Container: Started org.mortbay.jetty.servlet.WebApplicationHandler@17ee8b8\n2007-02-12 23:22:54,573 INFO org.mortbay.util.Container: Started WebApplicationContext[/,/]\n2007-02-12 23:22:54,573 INFO org.mortbay.util.Container: Started HttpContext[/logs,/logs]\n2007-02-12 23:22:54,573 INFO org.mortbay.util.Container: Started HttpContext[/static,/static]\n2007-02-12 23:22:54,576 INFO org.mortbay.http.SocketListener: Started SocketListener on 0.0.0.0:50070\n2007-02-12 23:22:54,576 INFO org.mortbay.util.Container: Started org.mortbay.jetty.Server@10385c1\n2007-02-12 23:22:54,617 INFO org.apache.hadoop.ipc.Server: IPC Server listener on 50001: starting\n2007-02-12 23:22:54,618 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 50001: starting\n2007-02-12 23:22:54,618 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 50001: starting\n2007-02-12 23:22:54,618 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 50001: starting\n2007-02-12 23:22:54,618 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 50001: starting\n2007-02-12 23:22:54,619 INFO org.apache.hadoop.ipc.Server: IPC Server handler 4 on 50001: starting\n2007-02-12 23:22:54,619 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 50001: starting\n2007-02-12 23:22:54,619 INFO org.apache.hadoop.ipc.Server: IPC Server handler 6 on 50001: starting\n2007-02-12 23:22:54,619 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on 50001: starting\n2007-02-12 23:22:54,619 INFO org.apache.hadoop.ipc.Server: IPC Server handler 8 on 50001: starting\n2007-02-12 23:22:54,619 INFO org.apache.hadoop.ipc.Server: IPC Server handler 9 on 50001: starting\n2007-02-12 23:22:57,441 WARN org.apache.hadoop.dfs.StateChange: DIR* FSDirectory.unprotectedDelete: failed to remove /mnt/hadoop/mapred/.system.crc\n because it does not exist\n2007-02-12 23:22:57,453 WARN org.apache.hadoop.dfs.StateChange: DIR* FSDirectory.unprotectedDelete: failed to remove /mnt/hadoop/mapred/system beca\nuse it does not exist\n2007-02-12 23:25:02,841 WARN org.apache.hadoop.dfs.StateChange: DIR* FSDirectory.unprotectedDelete: failed to remove /user/root/.test-mini-mr.crc b\necause it does not exist\n2007-02-12 23:25:02,842 WARN org.apache.hadoop.dfs.StateChange: DIR* FSDirectory.unprotectedDelete: failed to remove /user/root/test-mini-mr becaus\ne it does not exist\n2007-02-12 23:25:03,056 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 50001 call error: java.io.IOException: java.lang.ArithmeticExcep\ntion: / by zero\njava.io.IOException: java.lang.ArithmeticException: / by zero\n...\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jimwhite","name":"jimwhite","key":"jimwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James P. White","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-13T04:42:37.317+0000","updated":"2007-02-13T04:42:37.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362657/comment/12472785","id":"12472785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"body":"In the chooseTarget method, we have a statement :\n\n        int maxNodesPerRack =\n          (totalNumOfReplicas-1)/clusterMap.getNumOfRacks()+2;\n\nif the network topology has 0 racks, then clusterMap.getNumOfRacks() will return 0. This may generate the divide-by-zero exception.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"created":"2007-02-13T17:37:50.233+0000","updated":"2007-02-13T17:37:50.233+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362657/comment/12472811","id":"12472811","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"body":"Hi James, did your file system have no data node when the exception was thrown? I just want to figure out why the number of racks ended up with zero.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-13T18:13:04.627+0000","updated":"2007-02-13T18:13:04.627+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362657/comment/12472830","id":"12472830","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jimwhite","name":"jimwhite","key":"jimwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James P. White","active":true,"timeZone":"America/Los_Angeles"},"body":"I found that same code in trying to find out what was wrong (I originally noted this failure in HADOOP-692).\n\nI was trying out the EC2 AMI that Tom is working on (HADOOP-952), but don't know enough about Hadoop to debug very effectively (which is why it would be good to report this error early on with a helpful diagnostic).\n\nIf there are specific commands you would like me to run or files to inspect, then I can do that.  Otherwise I'm putting aside trying to run Hadoop on EC2 until I've got more experience with it running locally.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jimwhite","name":"jimwhite","key":"jimwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James P. White","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-13T19:03:21.019+0000","updated":"2007-02-13T19:03:21.019+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362657/comment/12472858","id":"12472858","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"body":"I've just run the EC2 AMI again and I get different output and *no* ArithmeticException (it's actually an updated one using Hadoop 0.11.1, but I don't believe this accounts for the difference since I didn't get the exception when using 0.11.0):\n\n2007-02-13 15:11:08,026 INFO org.apache.hadoop.dfs.StateChange: STATE* Network topology has 0 racks and 0 datanodes\n2007-02-13 15:11:08,301 INFO org.mortbay.util.Credential: Checking Resource aliases\n2007-02-13 15:11:08,420 INFO org.mortbay.http.HttpServer: Version Jetty/5.1.4\n2007-02-13 15:11:09,305 INFO org.mortbay.util.Container: Started org.mortbay.jetty.servlet.WebApplicationHandler@17ee\n8b8\n2007-02-13 15:11:09,407 INFO org.mortbay.util.Container: Started WebApplicationContext[/,/]\n2007-02-13 15:11:09,418 INFO org.mortbay.util.Container: Started HttpContext[/logs,/logs]\n2007-02-13 15:11:09,418 INFO org.mortbay.util.Container: Started HttpContext[/static,/static]\n2007-02-13 15:11:09,422 INFO org.mortbay.http.SocketListener: Started SocketListener on 0.0.0.0:50070\n2007-02-13 15:11:09,422 INFO org.mortbay.util.Container: Started org.mortbay.jetty.Server@10385c1\n2007-02-13 15:11:09,446 INFO org.apache.hadoop.ipc.Server: IPC Server listener on 50001: starting\n2007-02-13 15:11:09,448 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 50001: starting\n2007-02-13 15:11:09,448 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 50001: starting\n2007-02-13 15:11:09,461 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 50001: starting\n2007-02-13 15:11:09,461 INFO org.apache.hadoop.ipc.Server: IPC Server handler 4 on 50001: starting\n2007-02-13 15:11:09,461 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 50001: starting\n2007-02-13 15:11:09,462 INFO org.apache.hadoop.ipc.Server: IPC Server handler 6 on 50001: starting\n2007-02-13 15:11:09,462 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 50001: starting\n2007-02-13 15:11:09,462 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on 50001: starting\n2007-02-13 15:11:09,462 INFO org.apache.hadoop.ipc.Server: IPC Server handler 8 on 50001: starting\n2007-02-13 15:11:09,462 INFO org.apache.hadoop.ipc.Server: IPC Server handler 9 on 50001: starting\n2007-02-13 15:11:15,251 INFO org.apache.hadoop.dfs.StateChange: BLOCK* NameSystem.registerDatanode: node registration\n from domU-12-31-34-00-02-20.usma2.compute.amazonaws.com:50010 storage \n2007-02-13 15:11:15,253 INFO org.apache.hadoop.net.NetworkTopology: Adding a new node: /default-rack/domU-12-31-34-00\n-02-20.usma2.compute.amazonaws.com:50010\n2007-02-13 15:11:18,491 WARN org.apache.hadoop.dfs.StateChange: DIR* FSDirectory.unprotectedDelete: failed to remove \n/mnt/hadoop/mapred/.system.crc because it does not exist\n2007-02-13 15:11:18,492 WARN org.apache.hadoop.dfs.StateChange: DIR* FSDirectory.unprotectedDelete: failed to remove \n/mnt/hadoop/mapred/system because it does not exist\n2007-02-13 15:16:16,841 INFO org.apache.hadoop.fs.FSNamesystem: Roll Edit Log\n2007-02-13 15:16:17,501 INFO org.apache.hadoop.fs.FSNamesystem: Roll FSImage\n\nNotice that a datanode registers (at 15:11:15,251), unlike on Jim's setup. I think there is a bug here (the namenode shouldn't throw an exception if there are no registered datanodes), which is being exposed by a problem in the EC2 scripts (why isn't the datanode registering for Jim). We should take the latter bug back to HADOOP-952 (Jim - are you able to dig out the logs on the datanode to see why it didn't connect?).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"created":"2007-02-13T20:45:01.217+0000","updated":"2007-02-13T20:45:01.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362657/comment/12472867","id":"12472867","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"body":"Tom, Thanks for clarification. I agree that replica placement should not throw an exception when there are no registered datanodes. But if zero rack is caused by zero registered datanode, it will be a simple fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-13T21:06:14.724+0000","updated":"2007-02-13T21:06:14.724+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362657/comment/12476814","id":"12476814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"body":"fixed as part of HADOOP-972","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"created":"2007-03-01T02:04:31.971+0000","updated":"2007-03-01T02:04:31.971+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-1013/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ill3:"}}