{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12345521","self":"https://issues.apache.org/jira/rest/api/2/issue/12345521","key":"HADOOP-350","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311939","id":"12311939","description":"","name":"0.5.0","archived":false,"released":true,"releaseDate":"2006-08-04"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-07-07T14:48:59.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jul 18 09:18:08 UTC 2006","customfield_12310420":"80651","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_970534000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_1515870000","customfield_12312321":null,"resolutiondate":"2006-07-18T09:18:08.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-350/watchers","watchCount":1,"isWatching":false},"created":"2006-07-07T03:42:34.000+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311939","id":"12311939","description":"","name":"0.5.0","archived":false,"released":true,"releaseDate":"2006-08-04"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-08-04T22:22:38.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Standalone works fine in 0.4.0 but if I use TRUNK, 'Last Changed Date: 2006-06-28 14:27:33 -0700 (Wed, 28 Jun 2006)', and pass it my fat job jar, I get following exception.\n\n06/07/06 13:18:02 INFO conf.Configuration: parsing file:/tmp/hadoop-unjar29923/nutch-site.xml\n06/07/06 13:18:02 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-site.xml\nException in thread \"main\" java.lang.Error: Unresolved compilation problems:   \n        The import org.apache.commons.cli cannot be resolved\n        The import org.apache.commons.cli cannot be resolved\n        The import org.apache.commons.cli cannot be resolved\n        The import org.apache.commons.cli cannot be resolved       \n        The import org.apache.commons.cli cannot be resolved\n        The import org.apache.commons.cli cannot be resolved\n        The import org.apache.commons.cli cannot be resolved\n        The import org.apache.commons.cli cannot be resolved\n        The import org.apache.commons.cli cannot be resolved\n        Options cannot be resolved to a type\n        Option cannot be resolved to a type\n        OptionBuilder cannot be resolved\n        Option cannot be resolved to a type\n        OptionBuilder cannot be resolved\n        Option cannot be resolved to a type\n        OptionBuilder cannot be resolved\n        Option cannot be resolved to a type\n        OptionBuilder cannot be resolved\n        Options cannot be resolved to a type\n        Options cannot be resolved to a type\n        CommandLine cannot be resolved to a type\n        Options cannot be resolved to a type\n        The method buildGeneralOptions() is undefined for the type ToolBase\n        CommandLineParser cannot be resolved to a type\n        GnuParser cannot be resolved to a type\n        CommandLine cannot be resolved to a type\n        ParseException cannot be resolved to a type\n        e cannot be resolved\n        HelpFormatter cannot be resolved to a type\n        HelpFormatter cannot be resolved to a type\n\n        at org.apache.hadoop.util.ToolBase.<init>(ToolBase.java:21)\n        at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:178)\n        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:320)\n        at org.archive.access.nutch.ImportArcs.importArcs(ImportArcs.java:576)\n        at org.archive.access.nutch.Nutchwax.doImport(Nutchwax.java:159)\n        at org.archive.access.nutch.Nutchwax.doAll(Nutchwax.java:144)\n        at org.archive.access.nutch.Nutchwax.doJob(Nutchwax.java:368)\n        at org.archive.access.nutch.Nutchwax.main(Nutchwax.java:621)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:128)\n\nI took a bit of a look.  Odd is that command-cli.jar is in hadoop/lib dir so should be found no problem (and we seem to be loading other stuff out of the uncompressed job jar fine -- see mention of nutch-site.xml above).   I tried adding the command-cli to my job jar.  I printed out all that RunJar -- see below -- was adding to its CLASSPATH and saw mention of command-cli but still no workee.\n\nfile:/tmp/hadoop-unjar29923/lib/archive-commons-1.8.0.jar\nfile:/tmp/hadoop-unjar29923/lib/commons-codec-1.3.jar\nfile:/tmp/hadoop-unjar29923/lib/commons-httpclient-3.0-rc3.jar\nfile:/tmp/hadoop-unjar29923/lib/commons-logging-1.0.4.jar\nfile:/tmp/hadoop-unjar29923/lib/dsi.unimi.it-1.2.0.jar\nfile:/tmp/hadoop-unjar29923/lib/commons-lang-2.1.jar\nfile:/tmp/hadoop-unjar29923/lib/commons-cli-2.0-SNAPSHOT.jar\nfile:/tmp/hadoop-unjar29923/lib/lucene-core-1.9.1.jar\nfile:/tmp/hadoop-unjar29923/lib/lucene-misc-1.9.1.jar\nfile:/tmp/hadoop-unjar29923/lib/jakarta-oro-2.0.7.jar\nfile:/tmp/hadoop-unjar29923/lib/xerces-2_6_2-apis.jar\nfile:/tmp/hadoop-unjar29923/lib/xerces-2_6_2.jar\nfile:/tmp/hadoop-unjar29923/lib/concurrent-1.3.4.jar\n06/07/06 13:18:01 INFO conf.Configuration: parsing file:/home/stack/workspace/hadoop-local-conf/hadoop-default.xml \n\nAny ideas?\n\nThanks.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12336918","id":"12336918","filename":"commons-cli-2.0-SNAPSHOT.jar","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"created":"2006-07-14T22:43:53.000+0000","size":258337,"mimeType":"application/x-zip-compressed","content":"https://issues.apache.org/jira/secure/attachment/12336918/commons-cli-2.0-SNAPSHOT.jar"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12336901","id":"12336901","filename":"commons-cli-2.0-SNAPSHOT.jar","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=renaudrichardet","name":"renaudrichardet","key":"renaudrichardet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Renaud Richardet","active":true,"timeZone":"Europe/Zurich"},"created":"2006-07-14T18:02:37.000+0000","size":125955,"mimeType":"application/x-jar","content":"https://issues.apache.org/jira/secure/attachment/12336901/commons-cli-2.0-SNAPSHOT.jar"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"107144","customfield_12312823":null,"summary":"In standalone mode, 'org.apache.commons.cli cannot be resolved'","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stack","name":"stack","key":"stack","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"stack","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stack","name":"stack","key":"stack","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"stack","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12345521/comment/12419648","id":"12419648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":"What JVM are you using locally?  1.4?  The cli jar (unfortunately) seems to be a version that requires 1.5.  Could that be the issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-07-07T14:48:59.000+0000","updated":"2006-07-07T14:48:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12345521/comment/12421179","id":"12421179","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=renaudrichardet","name":"renaudrichardet","key":"renaudrichardet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Renaud Richardet","active":true,"timeZone":"Europe/Zurich"},"body":"Thanks for the tip Doug. JVM 1.4 is the issue. \n\nAlas, I need to stay on Java 1.4 for my hadoop install, so I tried to recomplile the commons-cli jar. Not sure if I am using the right source code (/branches/commons-configuration-integration/), and I had to patch some classes because of the .withArgPattern in /nutch/trunk/hadoop/src/java/org/apache/hadoop/util/ToolBase.java (see http://issues.apache.org/jira/browse/CLI-12).\n\nMaybe Hairong can provide more details...\n\nBest,\nRenaud","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=renaudrichardet","name":"renaudrichardet","key":"renaudrichardet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Renaud Richardet","active":true,"timeZone":"Europe/Zurich"},"created":"2006-07-14T17:59:41.000+0000","updated":"2006-07-14T17:59:41.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12345521/comment/12421180","id":"12421180","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=renaudrichardet","name":"renaudrichardet","key":"renaudrichardet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Renaud Richardet","active":true,"timeZone":"Europe/Zurich"},"body":"commons cli jar using http://svn.apache.org/repos/asf/jakarta/commons/proper/cli/branches/commons-configuration-integration, patched with CLI-12, compiled with Java 1.4","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=renaudrichardet","name":"renaudrichardet","key":"renaudrichardet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Renaud Richardet","active":true,"timeZone":"Europe/Zurich"},"created":"2006-07-14T18:02:37.000+0000","updated":"2006-07-14T18:02:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12345521/comment/12421244","id":"12421244","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"body":"Hi Renaud,\n\nI recompiled commons-cli using java 1.4. Here is the new jar.  Also I included the source. I did not check if it is the same as yours. But Millind helped me test it and it works. Thanks for your effort on solving this problem. \n\nHairong","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"created":"2006-07-14T22:43:53.000+0000","updated":"2006-07-14T22:43:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12345521/comment/12421689","id":"12421689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=renaudrichardet","name":"renaudrichardet","key":"renaudrichardet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Renaud Richardet","active":true,"timeZone":"Europe/Zurich"},"body":"Thank you Hairong for the fast answer!\n\nI think it would be useful if this jar would be commited to nutch-trunk and hadoop-trunk, WDOT?\n\nBest, Renaud","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=renaudrichardet","name":"renaudrichardet","key":"renaudrichardet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Renaud Richardet","active":true,"timeZone":"Europe/Zurich"},"created":"2006-07-17T18:37:29.000+0000","updated":"2006-07-17T18:37:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12345521/comment/12421815","id":"12421815","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":"I just committed this.  Thanks all!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-07-18T09:18:08.000+0000","updated":"2006-07-18T09:18:08.000+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-350/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0iozz:"}}