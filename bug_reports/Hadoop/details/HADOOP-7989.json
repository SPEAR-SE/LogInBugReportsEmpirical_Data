{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12539302","self":"https://issues.apache.org/jira/rest/api/2/issue/12539302","key":"HADOOP-7989","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2012-01-23T18:25:41.032+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jan 25 06:45:10 UTC 2012","customfield_12310420":"224804","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_303755510_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-01-25T06:45:09.501+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7989/watchers","watchCount":1,"isWatching":false},"created":"2012-01-21T18:22:34.711+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":"hadoop ","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316390","id":"12316390","description":"Merge append/sync support with security","name":"0.20.205.0","archived":false,"released":true,"releaseDate":"2011-10-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-01-25T06:45:10.209+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"On Amazon EC2, If I set mapred.child.java.opts to \"-Xmx512m\". Job execution fails saying that \"Could Not create the java virtual machine\"\nIf unset mapred.child.java.opts everything runs fine. I've even tried the same thing on c1.xlarge instances but with the same result. \nI'll add full logs. I need to set mapred.child.java.opts becuase my reduce program are memory hungry.\n\nI've been trying to setup a map-reduce cluster on ec2 for last two days via whirr, but this error was recurring. At first I thought It might be whirr\nspecific, but manual ec2 cluster also resulted in same. \n\n<snippet>\nubuntu@ip-10-84-237-173:~/workspace$ hadoop jar $HADOOP_HOME/*examples*.jar  wordcount in out\n12/01/21 18:08:28 INFO input.FileInputFormat: Total input paths to process : 16\n12/01/21 18:08:28 INFO mapred.JobClient: Running job: job_201201211751_0007\n12/01/21 18:08:29 INFO mapred.JobClient:  map 0% reduce 0% \n12/01/21 18:08:35 INFO mapred.JobClient: Task Id : attempt_201201211751_0007_m_000017_0, Status : FAILED\njava.lang.Throwable: Child Error\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)\nCaused by: java.io.IOException: Task process exit with nonzero status of 1.\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)\n\n12/01/21 18:08:35 WARN mapred.JobClient: Error reading task outputhttp://ip-10-12-15-189.ec2.internal:50060/tasklog?plaintext=true&attemptid=attempt_201201211751_0007_m_000017_0&filter=stdout\n12/01/21 18:08:35 WARN mapred.JobClient: Error reading task outputhttp://ip-10-12-15-189.ec2.internal:50060/tasklog?plaintext=true&attemptid=attempt_201201211751_0007_m_000017_0&filter=stderr\n12/01/21 18:08:41 INFO mapred.JobClient: Task Id : attempt_201201211751_0007_r_000002_0, Status : FAILED\njava.lang.Throwable: Child Error\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)\nCaused by: java.io.IOException: Task process exit with nonzero status of 1.\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)\n\n12/01/21 18:08:41 WARN mapred.JobClient: Error reading task outputhttp://ip-10-12-15-189.ec2.internal:50060/tasklog?plaintext=true&attemptid=attempt_201201211751_0007_r_000002_0&filter=stdout\n12/01/21 18:08:41 WARN mapred.JobClient: Error reading task outputhttp://ip-10-12-15-189.ec2.internal:50060/tasklog?plaintext=true&attemptid=attempt_201201211751_0007_r_000002_0&filter=stderr\n12/01/21 18:08:47 INFO mapred.JobClient: Task Id : attempt_201201211751_0007_m_000017_1, Status : FAILED\njava.lang.Throwable: Child Error\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)\nCaused by: java.io.IOException: Task process exit with nonzero status of 1.\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)\n\n12/01/21 18:08:47 WARN mapred.JobClient: Error reading task outputhttp://ip-10-32-50-20.ec2.internal:50060/tasklog?plaintext=true&attemptid=attempt_201201211751_0007_m_000017_1&filter=stdout\n12/01/21 18:08:47 WARN mapred.JobClient: Error reading task outputhttp://ip-10-32-50-20.ec2.internal:50060/tasklog?plaintext=true&attemptid=attempt_201201211751_0007_m_000017_1&filter=stderr\n12/01/21 18:08:53 INFO mapred.JobClient: Task Id : attempt_201201211751_0007_r_000002_1, Status : FAILED\njava.lang.Throwable: Child Error\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)\nCaused by: java.io.IOException: Task process exit with nonzero status of 1.\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)\n\n12/01/21 18:08:53 WARN mapred.JobClient: Error reading task outputhttp://ip-10-32-50-20.ec2.internal:50060/tasklog?plaintext=true&attemptid=attempt_201201211751_0007_r_000002_1&filter=stdout\n12/01/21 18:08:53 WARN mapred.JobClient: Error reading task outputhttp://ip-10-32-50-20.ec2.internal:50060/tasklog?plaintext=true&attemptid=attempt_201201211751_0007_r_000002_1&filter=stderr\n12/01/21 18:09:01 INFO mapred.JobClient: Task Id : attempt_201201211751_0007_m_000017_2, Status : FAILED\njava.lang.Throwable: Child Error\n        at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)\n</snippet>\n\n<snippet>\nubuntu@ip-10-12-15-189:~/workspace$ cat ~/hadoop/logs/userlogs/job_201201211751_0007/attempt_201201211751_0007_m_000016_1/std*\nCould not create the Java virtual machine.\nError occurred during initialization of VM\nCould not reserve enough space for object heap\nubuntu@ip-10-12-15-189:~/workspace$ \n</snippet>","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"43916","customfield_12312823":null,"summary":"[ec2] hadoop Could not create the Java virtual machine","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=flukebox","name":"flukebox","key":"flukebox","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=flukebox&avatarId=17045","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=flukebox&avatarId=17045","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=flukebox&avatarId=17045","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=flukebox&avatarId=17045"},"displayName":"Jai Kumar Singh","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=flukebox","name":"flukebox","key":"flukebox","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=flukebox&avatarId=17045","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=flukebox&avatarId=17045","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=flukebox&avatarId=17045","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=flukebox&avatarId=17045"},"displayName":"Jai Kumar Singh","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Amazon EC2 m1.large instance (AMI-ID ami-fd589594)\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539302/comment/13191109","id":"13191109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=flukebox","name":"flukebox","key":"flukebox","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=flukebox&avatarId=17045","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=flukebox&avatarId=17045","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=flukebox&avatarId=17045","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=flukebox&avatarId=17045"},"displayName":"Jai Kumar Singh","active":true,"timeZone":"Asia/Kolkata"},"body":"same issue on m2.4xlarge ... so certainly it is not related to instance type \nany clue/pointers would be appreciated. \nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=flukebox","name":"flukebox","key":"flukebox","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=flukebox&avatarId=17045","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=flukebox&avatarId=17045","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=flukebox&avatarId=17045","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=flukebox&avatarId=17045"},"displayName":"Jai Kumar Singh","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-01-23T11:00:31.831+0000","updated":"2012-01-23T11:00:31.831+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539302/comment/13191319","id":"13191319","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kaykay.unique","name":"kaykay.unique","key":"kaykay.unique","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik K","active":true,"timeZone":"Asia/Kolkata"},"body":"What is the (max) number of M-R child processes running on the machine ? \n\nWhat does 'jps' say , in terms of other java processes running on the machine ? \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kaykay.unique","name":"kaykay.unique","key":"kaykay.unique","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik K","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-01-23T18:25:41.032+0000","updated":"2012-01-23T18:25:41.032+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539302/comment/13192169","id":"13192169","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=flukebox","name":"flukebox","key":"flukebox","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=flukebox&avatarId=17045","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=flukebox&avatarId=17045","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=flukebox&avatarId=17045","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=flukebox&avatarId=17045"},"displayName":"Jai Kumar Singh","active":true,"timeZone":"Asia/Kolkata"},"body":"Okay, It turns out that ulimit was the problem.\nSetting mapred.child.ulimit=unlimited (mapred-site.xml) solves the problem for me.\nIn whirr.properties, you can set it as following.\nhadoop-mapreduce.mapred.child.ulimit=unlimited","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=flukebox","name":"flukebox","key":"flukebox","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=flukebox&avatarId=17045","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=flukebox&avatarId=17045","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=flukebox&avatarId=17045","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=flukebox&avatarId=17045"},"displayName":"Jai Kumar Singh","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-01-24T14:12:58.853+0000","updated":"2012-01-24T14:12:58.853+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539302/comment/13192894","id":"13192894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=flukebox","name":"flukebox","key":"flukebox","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=flukebox&avatarId=17045","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=flukebox&avatarId=17045","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=flukebox&avatarId=17045","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=flukebox&avatarId=17045"},"displayName":"Jai Kumar Singh","active":true,"timeZone":"Asia/Kolkata"},"body":"It was a setting problem. (by whirr) ulimit was not set to unlimited which was causing jvm to fail.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=flukebox","name":"flukebox","key":"flukebox","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=flukebox&avatarId=17045","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=flukebox&avatarId=17045","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=flukebox&avatarId=17045","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=flukebox&avatarId=17045"},"displayName":"Jai Kumar Singh","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-01-25T06:45:10.119+0000","updated":"2012-01-25T06:45:10.119+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7989/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07vs7:"}}