{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12398250","self":"https://issues.apache.org/jira/rest/api/2/issue/12398250","key":"HADOOP-3558","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2011-08-11T18:39:51.325+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Aug 11 18:39:51 UTC 2011","customfield_12310420":"65373","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_99711774067_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-08-11T18:39:51.301+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3558/watchers","watchCount":1,"isWatching":false},"created":"2008-06-13T16:56:57.294+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":"surelogic","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":3600,"aggregatetimeoriginalestimate":3600,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312913","id":"12312913","description":"","name":"0.17.0","archived":false,"released":true,"releaseDate":"2008-05-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-08-11T18:39:51.356+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":3600,"description":"Class Job needs additional synchronization to be truly thread-safe.  At a minimum, the following changes should be made:\n* Making the field jc final.\n* Adding the synchronized modifier to the methods toString(), getJobName(), setJobName(), getJobID(), setJobID(), getMapredJobID(), setMapredJobID(), getJobConf(), setJobConf(), getMessage(), setMessage(), getDependingJobs(), isCompleted(), and isReady(). \n* Fix the method getDependingJobs() to return a *copy* of the list:\n\n  public synchronized ArrayList<Job> getDependingJobs() {\n     return new ArrayList<Job>(this.dependingJobs);\n   }\n\nThe class can be further improved, however:\n* The methods setJobID() and setState() should be made package private (i.e., default visibility) so that they can only be called from the JobControl class.\n* Reconsider the necessity of the all the getter and setter methods. In particular, I question the need for getJobConf() and setJobConf(), getDependingJobs(), setJobName(), setMapredJobId(), and setMesage(). If these methods were eliminated, then the fields theJobConf and jobName could be made final.\n* The field dependingJobs could also be made final if the constructor Job(JobConf) were changed to\n\n  public Job(JobConf jobConf) throws IOException {\n     this(jobConf, new ArrayList());\n   }\n\nThen addDependingJob() could be simplified to\n\n  public synchronized boolean addDependingJob(Job dependingJob) {\n     if (this.state == Job.WAITING) { //only allowed to add jobs when waiting\n       return this.dependingJobs.add(dependingJob);\n     } else {\n       return false;\n     }\n   }\n\nThis class has the additional weakness that the list object referenced by field dependingJobs is provided by the outside environment to the constructor.  This can be eliminated by copying the list when the object is constructed:\n\n  public Job(JobConf jobConf, ArrayList<Job> dependingJobs) throws IOException {\n    ...\n    this.dependingJobs = new ArrayList<Job>(dependingJobs);\n    ...\n  }\n","customfield_10010":null,"timetracking":{"originalEstimate":"1h","remainingEstimate":"1h","originalEstimateSeconds":3600,"remainingEstimateSeconds":3600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384075","id":"12384075","filename":"HADOOP-3558.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-16T16:36:27.780+0000","size":6849,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12384075/HADOOP-3558.patch"}],"aggregatetimeestimate":3600,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"104922","customfield_12312823":null,"summary":"Class Job needs more synchronization","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":3600,"percent":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":3600,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398250/comment/12604928","id":"12604928","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"body":"Patch file for applying the above changes to the class.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-13T16:58:00.905+0000","updated":"2008-06-13T16:58:00.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398250/comment/12605341","id":"12605341","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"body":"Per Nigel Daley's request, I should point out that this bug was discovered using Sierra from SureLogic to view FindBug results. The bug was corrected with the assistance of JSure from SureLogic.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-16T16:35:32.548+0000","updated":"2008-06-16T16:35:32.548+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398250/comment/12605342","id":"12605342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"body":"New patch file generated by SVN against the trunk.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-16T16:36:27.828+0000","updated":"2008-06-16T16:36:27.828+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398250/comment/13083353","id":"13083353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"Out of date","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-08-11T18:39:51.325+0000","updated":"2011-08-11T18:39:51.325+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3558/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0iba7:"}}