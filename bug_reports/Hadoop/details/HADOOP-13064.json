{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12962745","self":"https://issues.apache.org/jira/rest/api/2/issue/12962745","key":"HADOOP-13064","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2016-04-29T05:20:49.102+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu May 05 18:54:37 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_769307699_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-05-05T18:54:57.050+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-13064/watchers","watchCount":8,"isWatching":false},"created":"2016-04-26T21:13:09.384+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331977","id":"12331977","description":"2.7.1 release","name":"2.7.1","archived":false,"released":true,"releaseDate":"2015-07-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-05T18:54:57.079+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"The specific issue we were seeing with LineReader is that when we pass in '\\r\\n' as the line delimiter the number of bytes that it claims to have read is less than what it actually read. We narrowed this down to only happening when the delimiter is split across the internal buffer boundary, so if fillbuffer fills with \"row\\r\" and the next call fills with \"\\n\" then the number of bytes reported would be 4 rather than 5.\n\nThis results in correctness issues in LineRecordReader because if this off by one issue is seen enough times when reading a split then it will continue to read records past its split boundary, resulting in records appearing to come from multiple splits.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12800880","id":"12800880","filename":"LineReaderTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jellis","name":"jellis","key":"jellis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Ellis","active":true,"timeZone":"Etc/UTC"},"created":"2016-04-26T21:16:35.105+0000","size":1848,"mimeType":"text/x-java-source","content":"https://issues.apache.org/jira/secure/attachment/12800880/LineReaderTest.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"LineReader reports incorrect number of bytes read resulting in correctness issues using LineRecordReader","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jellis","name":"jellis","key":"jellis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Ellis","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jellis","name":"jellis","key":"jellis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Ellis","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12962745/comment/15258939","id":"15258939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jellis","name":"jellis","key":"jellis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Ellis","active":true,"timeZone":"Etc/UTC"},"body":"Here's an example that fails.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jellis","name":"jellis","key":"jellis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Ellis","active":true,"timeZone":"Etc/UTC"},"created":"2016-04-26T21:16:35.108+0000","updated":"2016-04-26T21:16:35.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12962745/comment/15263563","id":"15263563","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wilfreds","name":"wilfreds","key":"wilfreds","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Wilfred Spiegelenburg","active":true,"timeZone":"Australia/Sydney"},"body":"Is this not a duplicate of MAPREDUCE-6481 in combination with MAPREDUCE-5948?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wilfreds","name":"wilfreds","key":"wilfreds","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Wilfred Spiegelenburg","active":true,"timeZone":"Australia/Sydney"},"created":"2016-04-29T05:20:49.102+0000","updated":"2016-04-29T05:20:49.102+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12962745/comment/15264777","id":"15264777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aash","name":"aash","key":"aash","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aash&avatarId=19890","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aash&avatarId=19890","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aash&avatarId=19890","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aash&avatarId=19890"},"displayName":"Andrew Ash","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jellis] those two do look pretty related -- were you testing with version 2.7.1 by chance?  Can you check if your test passes in 2.7.2 which contains fixes for both those tickets?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aash","name":"aash","key":"aash","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aash&avatarId=19890","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aash&avatarId=19890","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aash&avatarId=19890","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aash&avatarId=19890"},"displayName":"Andrew Ash","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-04-29T21:27:04.922+0000","updated":"2016-04-29T21:27:04.922+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12962745/comment/15272842","id":"15272842","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jellis","name":"jellis","key":"jellis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Ellis","active":true,"timeZone":"Etc/UTC"},"body":"Yeah just bumped to 2.7.2 and my broken test passed. We can close this out.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jellis","name":"jellis","key":"jellis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Ellis","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-05T18:54:37.429+0000","updated":"2016-05-05T18:54:37.429+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-13064/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2wryn:"}}