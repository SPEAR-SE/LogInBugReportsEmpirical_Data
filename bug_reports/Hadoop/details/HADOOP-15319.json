{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13145703","self":"https://issues.apache.org/jira/rest/api/2/issue/13145703","key":"HADOOP-15319","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-03-16T13:45:32.423+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Mar 19 13:06:54 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15319/watchers","watchCount":3,"isWatching":false},"created":"2018-03-16T13:10:03.400+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340354","id":"12340354","name":"2.8.2","archived":false,"released":true,"releaseDate":"2017-10-24"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-03-19T13:10:41.281+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319326","id":"12319326","name":"bin","description":"shell scripts and the like"}],"timeoriginalestimate":null,"description":"This issue is regarding hadoop fs -rm command. \r\n\r\nIn hadoop version 2.4.0 when we execute \"hadoop fs -rm /a/b/c/*\",\r\n\r\nIt removes the files inside the c directory only.\r\n\r\nBut in case of versions higher to 2.8.2,\r\n\r\nWhen we execute \"hadoop fs -rm /a/b/c/**\" or \"hdfs dfs -rm /a/b/c/**\"\r\n\r\nIt removes the inside files and directory as well.\r\n\r\nPlease look into the issue.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"hadoop fs -rm command misbehaves on recent hadoop version 2.8.2","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saurabhpadhy","name":"saurabhpadhy","key":"saurabhpadhy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34055","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"},"displayName":"Saurabh Padhy","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saurabhpadhy","name":"saurabhpadhy","key":"saurabhpadhy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34055","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"},"displayName":"Saurabh Padhy","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13145703/comment/16401920","id":"16401920","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"body":"First of all 2.5 _is not_ a recent hadoop version.\r\nIt was released approximately 4 years ago.\r\n\r\nBelow results are from cluster running almost recent 2.8 release.\r\nbq. When we execute \"hadoop fs -rm /a/b/c/*\" or \"hdfs dfs -rm /a/b/c/*\"\r\nIt deleted only the files directly under {{c directory}} and didn't delete any directories underneath {{c directory}}.\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"created":"2018-03-16T13:45:32.423+0000","updated":"2018-03-16T13:45:32.423+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13145703/comment/16402000","id":"16402000","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saurabhpadhy","name":"saurabhpadhy","key":"saurabhpadhy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34055","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"},"displayName":"Saurabh Padhy","active":true,"timeZone":"Etc/UTC"},"body":"[~shahrs87]\r\n\r\nSorry, My bad - It is related to 2.8.2 version.\r\n\r\nWhen we are using {color:#14892c}*\"hadoop fs -rm /a/b/c/\" or \"hdfs dfs -rm /a/b/c/*{color}{color:#14892c}*\"*{color} it gives error - ''{color:#d04437}c is a directory{color}\"\r\n\r\nBut when we tried to execute\r\n\r\n*\"hadoop fs -rm /a/b/c/*\" or \"hdfs dfs -rm /a/b/c/*\"* the 'c' directory also gets deleted\r\n\r\nWhereas in 2.4.x version it was not deleting 'c' instead of it was only deleting the files inside c.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saurabhpadhy","name":"saurabhpadhy","key":"saurabhpadhy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34055","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"},"displayName":"Saurabh Padhy","active":true,"timeZone":"Etc/UTC"},"created":"2018-03-16T14:55:56.397+0000","updated":"2018-03-16T14:55:56.397+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13145703/comment/16402138","id":"16402138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"body":"We have seen several cases where our customer don't quote the path and uses glob in the path.\r\nWe always ask our customer to put quote around the path.\r\nCan you please see what happens if you run the following command.\r\n{noformat}\r\nhadoop fs -rm \"/a/b/c/*\"\r\n{noformat}\r\nPlease note that the above line is in noformat tag. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"created":"2018-03-16T16:27:47.453+0000","updated":"2018-03-16T16:27:47.453+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13145703/comment/16402174","id":"16402174","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saurabhpadhy","name":"saurabhpadhy","key":"saurabhpadhy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34055","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"},"displayName":"Saurabh Padhy","active":true,"timeZone":"Etc/UTC"},"body":"[~shahrs87]\r\n\r\nWe execute the command \r\n\r\n \r\n{noformat}\r\nhadoop fs -rm \"/a/b/c/*\"\r\n{noformat}\r\nStill facing the similar issues in the 2.8.2 version. But in case of \"/a/b/c/\" It is unable to remove the files. That's the reason we use \"/*\" which removes everything inside the directory.\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saurabhpadhy","name":"saurabhpadhy","key":"saurabhpadhy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34055","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"},"displayName":"Saurabh Padhy","active":true,"timeZone":"Etc/UTC"},"created":"2018-03-16T16:50:36.425+0000","updated":"2018-03-16T16:50:36.425+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13145703/comment/16404188","id":"16404188","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ajisakaa","name":"ajisakaa","key":"ajisakaa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ajisakaa&avatarId=17238","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ajisakaa&avatarId=17238","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ajisakaa&avatarId=17238","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ajisakaa&avatarId=17238"},"displayName":"Akira Ajisaka","active":true,"timeZone":"Asia/Tokyo"},"body":"{noformat}hadoop fs -rm -r /a/b/c/{noformat} can remove the directory.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ajisakaa","name":"ajisakaa","key":"ajisakaa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ajisakaa&avatarId=17238","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ajisakaa&avatarId=17238","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ajisakaa&avatarId=17238","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ajisakaa&avatarId=17238"},"displayName":"Akira Ajisaka","active":true,"timeZone":"Asia/Tokyo"},"created":"2018-03-18T21:20:29.460+0000","updated":"2018-03-18T21:20:29.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13145703/comment/16404781","id":"16404781","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"body":"[~saurabhpadhy]: Can you create some sample files and directories and post the result of {{hadoop fs -ls}} before and after the rm command.\r\n Also post the {{out stream}} after you run the {{rm}} command.\r\n\r\nI am not able to reproduce the error that you are seeing.\r\nThat way I will replicate the same directory structure on my side and will run the exact same commands that you will run.\r\nPlease don't forget to quote the path on {{ls}} and {{rm}} commands.\r\n  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"created":"2018-03-19T13:06:54.802+0000","updated":"2018-03-19T13:10:16.912+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15319/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3regf:"}}