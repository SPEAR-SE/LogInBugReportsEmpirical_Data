{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13125390","self":"https://issues.apache.org/jira/rest/api/2/issue/13125390","key":"HADOOP-15123","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341432","id":"12341432","description":"3.1.0 release","name":"3.1.0","archived":false,"released":true,"releaseDate":"2018-04-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12341706","id":"12341706","description":"2.10.0 Release","name":"2.10.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342131","id":"12342131","name":"3.0.1","archived":false,"released":true,"releaseDate":"2018-03-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-12-16T06:31:50.125+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jan 18 12:55:16 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_469865_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_222839270","customfield_12312321":null,"resolutiondate":"2017-12-18T18:51:10.040+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15123/watchers","watchCount":4,"isWatching":false},"created":"2017-12-16T04:49:20.985+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329058","id":"12329058","description":"2.8.0 release","name":"2.8.0","archived":false,"released":true,"releaseDate":"2017-03-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12334219","id":"12334219","description":"2.9.0 release","name":"2.9.0","archived":false,"released":true,"releaseDate":"2017-11-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12341431","id":"12341431","description":"3.0.0 GA release","name":"3.0.0","archived":false,"released":true,"releaseDate":"2017-12-13"}],"issuelinks":[{"id":"12522506","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12522506","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12895092","key":"HADOOP-12426","self":"https://issues.apache.org/jira/rest/api/2/issue/12895092","fields":{"summary":"Add Entry point for Kerberos health check","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-01-18T12:55:16.218+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312526","id":"12312526","name":"security"}],"timeoriginalestimate":null,"description":"If Kerberos credential cache file location is overridden in environment, then KDiag tries to read its value for Kerberos configuration. For example,\r\n\r\n{code:java}\r\n# export KRB5CCNAME=/tmp/krb5cc_1001\r\n# hadoop org.apache.hadoop.security.KDiag\r\n...\r\n...\r\n== Locating Kerberos configuration file ==\r\n\r\nSetting kerberos path from environment variable KRB5CCNAME: \"/tmp/krb5cc_1001\"\r\nKerberos configuration file = /tmp/krb5cc_1001\r\n17/12/16 04:06:19 ERROR security.KDiag: java.util.UnknownFormatConversionException: Conversion = '�'\r\njava.util.UnknownFormatConversionException: Conversion = '�'\r\n{code}\r\n\r\nExpected Behavior:\r\n1. Kerberos configuration file location should be read from KRB5_CONFIG env. variable instead of KRB5CCNAME. Source: [MIT KRB5 doc|https://web.mit.edu/kerberos/krb5-1.12/doc/admin/conf_files/krb5_conf.html]","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12902484","id":"12902484","filename":"HADOOP-15123.0001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-12-16T04:53:05.106+0000","size":2123,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12902484/HADOOP-15123.0001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12902533","id":"12902533","filename":"HADOOP-15123.0002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-12-17T04:57:51.630+0000","size":2515,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12902533/HADOOP-15123.0002.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"KDiag tries to load krb5.conf from KRB5CCNAME instead of KRB5_CONFIG","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16293655","id":"16293655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"body":"Submitted a patch which fixes one more issue where KDiag is not able to print any krb5.conf line starting with hash (#).\r\nUnit tests passing:\r\n{code:java}\r\nRunning org.apache.hadoop.security.TestKDiag\r\nTests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.91 sec - in org.apache.hadoop.security.TestKDiag\r\nRunning org.apache.hadoop.security.TestKDiagNoKDC\r\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.465 sec - in org.apache.hadoop.security.TestKDiagNoKDC\r\n{code}\r\n\r\nPerformed manual testing to test the changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-12-16T04:57:10.837+0000","updated":"2017-12-16T05:00:17.968+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16293656","id":"16293656","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"body":"Hello [~stevel@apache.org],\r\nI feel this could be part of HADOOP-12649. Any review comment will be appreciated. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-12-16T04:58:39.829+0000","updated":"2017-12-16T04:58:39.829+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16293668","id":"16293668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"body":"Some more related search shows that SLIDER-1059 talks about dumping Credential cache too. I can pick this up if [~drankye] and [~stevel@apache.org] are okay with that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-12-16T05:45:54.119+0000","updated":"2017-12-16T05:45:54.119+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16293678","id":"16293678","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m  9s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:red}-1{color} | {color:red} test4tests {color} | {color:red}  0m  0s{color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 17m 17s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 15m 47s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 44s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 21s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 51s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 41s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m  3s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 58s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 14m 52s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 14m 52s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 40s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 3 new + 55 unchanged - 2 fixed = 58 total (was 57) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 11s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 10m 38s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 53s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 57s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}  8m 45s{color} | {color:red} hadoop-common in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 43s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 90m 56s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.fs.viewfs.TestViewFileSystemWithAuthorityLocalFileSystem |\r\n|   | hadoop.fs.viewfs.TestViewFileSystemLocalFileSystem |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | HADOOP-15123 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12902484/HADOOP-15123.0001.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux ac4ab0a1a476 3.13.0-129-generic #178-Ubuntu SMP Fri Aug 11 12:48:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / fc7ec80 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_151 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13848/artifact/out/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/13848/artifact/out/patch-unit-hadoop-common-project_hadoop-common.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13848/testReport/ |\r\n| Max. process+thread count | 1479 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13848/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-16T06:31:50.125+0000","updated":"2017-12-16T06:31:50.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16293798","id":"16293798","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"If it's there, it's probably because at the time I thought it was being used. \r\n\r\nLooking at https://web.mit.edu/kerberos/krb5-latest/doc/admin/env_variables.html , does seem that it was the wrong varable for the keytab\r\n\r\nbut it is the location for the cached tickets, according to http://web.mit.edu/kerberos/krb5-1.4/krb5-1.4/doc/klist.html \r\n\r\nso: I'd like the static field retained, the value printed, even with this patch, which does seem to be doing the right thing.\r\n\r\n* This is one of those \"needs testing in kerberos envs\" features...can you attach before/after logs too. \r\n* checkstyles are about indentation;","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-12-16T13:07:53.174+0000","updated":"2017-12-16T13:07:53.174+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16294007","id":"16294007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~stevel@apache.org] for the review comments. Updated patch with improved indentation.\r\nRegarding credential cache location, currently KDiag does print KRB5CCNAME along with other important env. variables. We can take it to next level by validating and dumping the content in another patch.\r\n\r\n*Manual Testing results:*\r\n*Before fix:*\r\n1. Error in printing content of krb5.conf with curly braces \"\\{\" symbol: (problem was not with hash as I mentioned in first comment)\r\n{code:java}\r\n# ./bin/hadoop org.apache.hadoop.security.KDiag\r\n...\r\n...\r\n== Locating Kerberos configuration file ==\r\n\r\nKerberos configuration file = /etc/krb5.conf\r\n\r\n[libdefaults]\r\n renew_lifetime = 7d\r\n forwardable = true\r\n default_realm = MYREALM\r\n ticket_lifetime = 24h\r\n dns_lookup_realm = false\r\n dns_lookup_kdc = false\r\n2017-12-17 04:43:28,767 ERROR security.KDiag: java.util.UnknownFormatConversionException: Conversion = '{'\r\njava.util.UnknownFormatConversionException: Conversion = '{'\r\n\tat java.util.Formatter.checkText(Formatter.java:2579)\r\n\tat java.util.Formatter.parse(Formatter.java:2565)\r\n\tat java.util.Formatter.format(Formatter.java:2501)\r\n\tat java.util.Formatter.format(Formatter.java:2455)\r\n\tat java.lang.String.format(String.java:2940)\r\n\tat org.apache.hadoop.security.KDiag.println(KDiag.java:849)\r\n\tat org.apache.hadoop.security.KDiag.dump(KDiag.java:922)\r\n\tat org.apache.hadoop.security.KDiag.validateKrb5File(KDiag.java:578)\r\n\tat org.apache.hadoop.security.KDiag.execute(KDiag.java:378)\r\n\tat org.apache.hadoop.security.KDiag.run(KDiag.java:236)\r\n\tat org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:76)\r\n\tat org.apache.hadoop.security.KDiag.exec(KDiag.java:1047)\r\n\tat org.apache.hadoop.security.KDiag.main(KDiag.java:1057)\r\n2017-12-17 04:43:28,773 INFO util.ExitUtil: Halt with status -1: java.util.UnknownFormatConversionException: Conversion = '{'\r\n{code}\r\n\r\n2. KDiag picks up credential cache location instead of krb.conf location from environment & doesn't print KRB5_CONFIG env. variable.\r\n{code:java}\r\n# export KRB5CCNAME=/tmp/krb5cc_1001\r\n# export KRB5_CONFIG=/etc/krb5.conf.copy\r\n# ./bin/hadoop org.apache.hadoop.security.KDiag\r\n\r\n== Environment Variables ==\r\n\r\nHADOOP_JAAS_DEBUG = \"(unset)\"\r\nKRB5CCNAME = \"/tmp/krb5cc_1001\"\r\nHADOOP_USER_NAME = \"(unset)\"\r\n...\r\n...\r\n== Locating Kerberos configuration file ==\r\n\r\nSetting kerberos path from environment variable KRB5CCNAME: \"/tmp/krb5cc_1001\"\r\nKerberos configuration file = /tmp/krb5cc_1001\r\n...\r\n...\r\n{code}\r\n\r\n*After Fix:*\r\n1. krb5.conf lines with \"\\{\" can now be processed by KDiag.\r\n2. KDiag prints KRB5_CONFIG and use that instead of KRB5CCNAME to locate krb5.conf.\r\n{code:java}\r\n# export KRB5CCNAME=/tmp/krb5cc_1001\r\n# export KRB5_CONFIG=/etc/krb5.conf.copy\r\n# ./bin/hadoop org.apache.hadoop.security.KDiag\r\n...\r\n...\r\n== Environment Variables ==\r\n\r\nHADOOP_JAAS_DEBUG = \"(unset)\"\r\nKRB5CCNAME = \"/tmp/krb5cc_1001\"\r\nKRB5_CONFIG = \"/etc/krb5.conf.copy\"\r\n...\r\n...\r\n== Locating Kerberos configuration file ==\r\n\r\nSetting kerberos path from environment variable KRB5_CONFIG: \"/etc/krb5.conf.copy\"\r\nKerberos configuration file = /etc/krb5.conf.copy\r\n\r\n[libdefaults]\r\n renew_lifetime = 7d\r\n forwardable = true\r\n default_realm = MYREALM\r\n ticket_lifetime = 24h\r\n dns_lookup_realm = false\r\n dns_lookup_kdc = false\r\n default_ccache_name = /tmp/krb5cc_%{uid}\r\n #default_tgs_enctypes = aes des3-cbc-sha1 rc4 des-cbc-md5\r\n ...\r\n ...\r\n{code}\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vrathor-hw","name":"vrathor-hw","key":"vrathor-hw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vrathor-hw&avatarId=29150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrathor-hw&avatarId=29150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrathor-hw&avatarId=29150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrathor-hw&avatarId=29150"},"displayName":"Vipin Rathor","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-12-17T05:10:40.646+0000","updated":"2017-12-17T05:10:40.646+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16294013","id":"16294013","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m  9s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:red}-1{color} | {color:red} test4tests {color} | {color:red}  0m  0s{color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 16m 35s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 12m 38s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 37s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  5s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 36s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 27s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 54s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 11m 39s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 11m 39s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 37s{color} | {color:green} hadoop-common-project/hadoop-common: The patch generated 0 new + 47 unchanged - 10 fixed = 47 total (was 57) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  3s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  1s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  9m 59s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 33s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 54s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}  8m 12s{color} | {color:red} hadoop-common in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 33s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 80m  5s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.fs.viewfs.TestViewFileSystemLocalFileSystem |\r\n|   | hadoop.fs.viewfs.TestViewFileSystemWithAuthorityLocalFileSystem |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | HADOOP-15123 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12902533/HADOOP-15123.0002.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux 06f52cd6b7e9 3.13.0-135-generic #184-Ubuntu SMP Wed Oct 18 11:55:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 5e81f32 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_151 |\r\n| findbugs | v3.1.0-RC1 |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/13850/artifact/out/patch-unit-hadoop-common-project_hadoop-common.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13850/testReport/ |\r\n| Max. process+thread count | 1431 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13850/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-17T06:20:54.491+0000","updated":"2017-12-17T06:20:54.491+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16295441","id":"16295441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"+1\r\n\r\ncommitted, to branch-2, branch-3.0 & trunk. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-12-18T18:50:38.450+0000","updated":"2017-12-18T18:50:38.450+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16330446","id":"16330446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"correction: now committed to trunk; it had been accidentally merged in with a commit #35ad9b1dd from HADOOP-13974; reverted all of that and now applying this standalone by cherry picking the branch-3 version","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2018-01-18T12:30:59.929+0000","updated":"2018-01-18T12:30:59.929+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13125390/comment/16330467","id":"16330467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #13514 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/13514/])\nHADOOP-15123. KDiag tries to load krb5.conf from KRB5CCNAME instead of (stevel: rev de630708d1912b3e4fa31e00f5d84a08a580e763)\n* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/KDiag.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2018-01-18T12:55:16.218+0000","updated":"2018-01-18T12:55:16.218+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15123/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3nz9b:"}}