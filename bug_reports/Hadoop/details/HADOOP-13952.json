{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13032295","self":"https://issues.apache.org/jira/rest/api/2/issue/13032295","key":"HADOOP-13952","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/7","id":"7","description":"Later","name":"Later"},"customfield_12312322":null,"customfield_12310220":"2017-01-05T23:11:00.066+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Nov 20 19:20:28 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_18243067486_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_33956597582","customfield_12312321":null,"resolutiondate":"2018-09-01T20:15:14.993+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-13952/watchers","watchCount":5,"isWatching":false},"created":"2017-01-05T16:20:49.953+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12337975","id":"12337975","name":"3.0.0-alpha2","archived":false,"released":true,"releaseDate":"2017-01-25"}],"issuelinks":[{"id":"12522328","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12522328","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"13124232","key":"HADOOP-15118","self":"https://issues.apache.org/jira/rest/api/2/issue/13124232","fields":{"summary":"Change default classpath to be only shaded jars","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-09-01T20:15:15.011+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311543","id":"12311543","name":"build","description":"Build scripts"}],"timeoriginalestimate":null,"description":"During build, we are throwing these errors:\n\n{code}\nERROR: hadoop-aliyun has missing dependencies: jasper-compiler-5.5.23.jar\nERROR: hadoop-aliyun has missing dependencies: json-lib-jdk15.jar\nERROR: hadoop-archive-logs has missing dependencies: jasper-compiler-5.5.23.jar\nERROR: hadoop-archives has missing dependencies: jasper-compiler-5.5.23.jar\nERROR: hadoop-aws has missing dependencies: jasper-compiler-5.5.23.jar\nERROR: hadoop-azure has missing dependencies: jetty-util-ajax-9.3.11.v20160721.jar\nERROR: hadoop-azure-datalake has missing dependencies: okhttp-2.4.0.jar\nERROR: hadoop-azure-datalake has missing dependencies: okio-1.4.0.jar\nERROR: hadoop-extras has missing dependencies: jasper-compiler-5.5.23.jar\nERROR: hadoop-gridmix has missing dependencies: jasper-compiler-5.5.23.jar\nERROR: hadoop-kafka has missing dependencies: lz4-1.2.0.jar\nERROR: hadoop-kafka has missing dependencies: kafka-clients-0.8.2.1.jar\nERROR: hadoop-openstack has missing dependencies: commons-httpclient-3.1.jar\nERROR: hadoop-rumen has missing dependencies: jasper-compiler-5.5.23.jar\nERROR: hadoop-sls has missing dependencies: jasper-compiler-5.5.23.jar\nERROR: hadoop-sls has missing dependencies: metrics-core-3.0.1.jar\nERROR: hadoop-streaming has missing dependencies: jasper-compiler-5.5.23.jar\n{code}\n\nLikely a variety of reasons for the failures.  Kafka is HADOOP-12556, but others need to be investigated.  Probably just need to look at more than just common/lib in dist-tools-hooks-maker now that shading has gone in.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12342324","id":"12342324","description":"3.2 release","name":"3.2.0","archived":false,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12880451","id":"12880451","filename":"HADOOP-13952.000.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-04T19:49:32.863+0000","size":4589,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12880451/HADOOP-13952.000.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12880473","id":"12880473","filename":"HADOOP-13952.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-04T21:18:26.244+0000","size":4583,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12880473/HADOOP-13952.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12880308","id":"12880308","filename":"HADOOP-13952.preview.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-03T21:18:25.019+0000","size":1684,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12880308/HADOOP-13952.preview.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"tools dependency hooks are throwing errors","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/15801803","id":"15801803","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"We should probably consider making these errors fatal after fixing this too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-01-05T16:33:13.492+0000","updated":"2017-01-05T16:33:13.492+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/15802820","id":"15802820","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"I peeked at dependency:list and dependency:tree for hadoop-aliyun, and these two errors at least look like issues with the hadoop-tools-dist stitching.\n\n* jasper-compiler is a test-scoped dependency, but it gets picked up by grep since it has the word \"compile\" in it.  The dep plugin can print a specific scope with the \"includeScope\" option, which seems better.\n* json-lib is available as {{json-lib-2.4-jdk15.jar}}, the script misses this because it has multiple version components. The build-classpath goal prints things out as jar names, which is what we really want.\n\nOther questions:\n\n* should this be looking for \"runtime\" scoped dependencies rather than \"compile\"?\n* all the modules except hadoop-pipes have this dependency plugin invocation. Maybe we can move the dep plugin invocation to a shared location, and special case hadoop-pipes.\n\nAllen, are you planning to pick this one up? I'm not much of a bash scripter...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-05T23:11:00.066+0000","updated":"2017-01-05T23:11:00.066+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/15813130","id":"15813130","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"bq. jasper-compiler is a test-scoped dependency, but it gets picked up by grep since it has the word \"compile\" in it. The dep plugin can print a specific scope with the \"includeScope\" option, which seems better.\n\nI had a lot of problems getting includeScope to work correctly for our build, so gave up on it.  We can change the grep to be grep -E compile$ and it should work as well.\n\nbq. The build-classpath goal prints things out as jar names, which is what we really want.\n\nIt does, but without getting scoping to work, this doesn't work well.  \n\nbq. should this be looking for \"runtime\" scoped dependencies rather than \"compile\"?\n\nI seem to recall that there was something that broke with just the runtime listed. This is likely a pom issue, but I was doing all of them at once sooo...\n\nbq. all the modules except hadoop-pipes have this dependency plugin invocation.\n\nNot quite.  They call the file name extensions different things in order to build different types of shell profiles.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-01-09T22:58:40.040+0000","updated":"2017-01-09T22:58:40.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/15813280","id":"15813280","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm downgrading this from a Blocker since there's currently no assignee, and the two errors that I looked at were false positives. If there are functional issues, then we can re-upgrade the priority.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-09T23:59:29.651+0000","updated":"2017-01-09T23:59:29.651+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16113086","id":"16113086","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"body":"FYI most of these appear to have been fixed. What remains is:\n{code}\nERROR: hadoop-azure-datalake has missing dependencies: okhttp-2.4.0.jar\nERROR: hadoop-azure-datalake has missing dependencies: okio-1.4.0.jar\nERROR: hadoop-azure has missing dependencies: jetty-util-ajax-9.3.11.v20160721.jar\nERROR: hadoop-aliyun has missing dependencies: json-lib-jdk15.jar\n{code}\n\nThe Azure dependencies are all in the HDFS directory:\n{code}\n./hadoop-dist/target/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/hdfs/lib/okhttp-2.4.0.jar\n./hadoop-dist/target/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/hdfs/lib/okio-1.4.0.jar\n/hadoop-dist/target/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/hdfs/lib/jetty-util-ajax-9.3.11.v20160721.jar\n{code}\n\nThe Aliyun dependency appears to be getting the 2.4 stripped from the version:\n\n{code}\n./hadoop-dist/target/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/tools/lib/json-lib-2.4-jdk15.jar\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-03T17:00:40.034+0000","updated":"2017-08-03T17:00:40.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16113523","id":"16113523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"body":"I couldn't find much official documentation on the formatting of dependency:list's output so this is based on a few assumptions I don't 100% like, but it works well right now and I don't see better options.\n\nThere are 5 fields by default, 6 if there's a classifier. So I'm constructing those fields into the JAR name based on the number of fields. Including the classifier when there are 6 fields appears to fix both the json-lib issue as well as the jetty-util-ajax issue (though that one surprises me).\n\nI'm also exiting in the event there are NOT 5 or 6 fields, and exiting if there are other errors. Still have to fix the okio and okhttp issues, though.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-03T21:25:40.239+0000","updated":"2017-08-03T21:29:10.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16113722","id":"16113722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"body":"So: hadoop-tool-dist is including these dependencies in its share/tools/lib directory, but dist-layout-stitching is not copying it over because the findfileindir function reports that 1 copy is already included (under hdfs). But then when we're checking, we're not looking under hdfs, so we report it as missing. One of these should change. I think my preference would be to have findfileindir not be looking in hdfs (at least not for tools - maybe not for some other things too), because anyone not using HDFS for storage shouldn't be pulling in other HDFS-specific things into their classpath. [~aw] - any thoughts on that?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-04T00:09:25.545+0000","updated":"2017-08-04T00:10:06.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16114453","id":"16114453","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"body":"Changing findfileindir in dist-layout-stitching to only omit copying files if they're under share/hadoop/common (rather than anywhere under share) fixes the problems, but has some other effects as well. It increases total tarball size by 4MB and adds the following files:\n\n{code}\n./hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/mapreduce/lib: # dir didn't exist at all before\n-rw-rw-r--. 1 sean sean    4467 aopalliance-1.0.jar\n-rw-rw-r--. 1 sean sean  668235 guice-4.0.jar\n-rw-rw-r--. 1 sean sean   76983 guice-servlet-4.0.jar\n-rw-rw-r--. 1 sean sean    2497 javax.inject-1.jar\n-rw-rw-r--. 1 sean sean   16151 jersey-guice-1.19.jar\n-rw-rw-r--. 1 sean sean 1045744 leveldbjni-all-1.8.jar\n\n./hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/tools/lib:\n-rw-rw-r--. 1 sean sean    38302 jetty-util-ajax-9.3.11.v20160721.jar\n-rw-rw-r--. 1 sean sean    85449 metrics-core-3.0.1.jar\n-rw-rw-r--. 1 sean sean   319099 okhttp-2.4.0.jar\n-rw-rw-r--. 1 sean sean    64661 okio-1.4.0.jar\n\n./hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/yarn/lib:\n-rw-rw-r--. 1 sean sean   38302 jetty-util-ajax-9.3.11.v20160721.jar\n-rw-rw-r--. 1 sean sean 1045744 leveldbjni-all-1.8.jar\n-rw-rw-r--. 1 sean sean 1779991 netty-all-4.0.23.Final.jar\n{code}\n\nThis seems like the correct solution to me, although it perhaps indicates a few other dependencies could be moved to common since they are in fact shared between multiple things apparently. The alternative is to not consider dependencies missing if they're provided by HDFS, but having tools share classpath with HDFS doesn't feel right. Although I'd expect they actually do that in practice now?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-04T14:42:53.041+0000","updated":"2017-08-04T14:42:53.041+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16114676","id":"16114676","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"bq. anyone not using HDFS for storage shouldn't be pulling in other HDFS-specific things into their classpath. \n\nFrom a logistical stand point, this is correct.  However, as you observe:\n\nbq. Although I'd expect they actually do that in practice now?\n\nIn practice?  \n\n* 0.x-2.x always forces subproject directories into the classpath. Don't want them? Too bad.\n* 3.x at least looks to see if these directories exist and allows function redefinition to cut them out.\n* I don't know of a single distribution that *doesn't* include HDFS or YARN (yes, including MapR).  In fact, I'm not even sure it's possible to run Hadoop without HDFS given things like hdfs getconf have no equivalent in common.\n\nIt's pretty much a guarantee these jars are already in the classpath. It's worth pointing out that if they weren't, these tools likely wouldn't be working now. :)\n\nIMO, if someone is going to go through the effort of ripping out HDFS, then changing the hadoop-tools dependency profile is the least of their concerns.  That said... we should probably at least add comments to the profile what the implied dependencies are though to make that easier.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-04T17:30:57.273+0000","updated":"2017-08-04T17:30:57.273+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16114886","id":"16114886","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"body":".000 patch:\n\nI added an \"extra_dir\" parameter so you can specify a dependency. It's used to specify that MapReduce can rely on whatever is already in YARN's classpath as well as the common stuff. That cut down most of the duplicated JARs. What's left are the okio and okhttp JARs and just a couple of things that happen to also be in HDFS.\n\nVery slight increase in bloat, but I feel this is the more correct solution. If anyone wants to argue that just accepting it anywhere under ./share and minimizing duplication is better, I'd be happy to create and test that patch too, but this is what I'm proposing for inclusion to resolve this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-04T19:51:30.254+0000","updated":"2017-08-04T19:51:49.942+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16114925","id":"16114925","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"*shrugs*  None of the solutions are great, honestly.  Most of the gains that we got by doing the dedupe were quickly ate up by YARN's bloat anyway. :(\n\nCode-wise:\n\n1. using an array will be significantly faster. (Yes, getting rid of awk's and cut's is my new thing, now that I've just thrown in the towel on arrays.)\n\n{code}\nfunction depline_to_jarname\n{\n  declare depline=\"${*}\"\n  declare jarname\n  declare -a fields\n\n  IFS=':' read -ra fields <<< \"${depline}\"\n  case \"${#fields[@]}\" in\n    \"5\")\n      # format: groupId:artifactId:type:version:scope\n      jarname=\"${fields[1]}-${fields[3]}.jar\"\n      ;;\n    \"6\")\n      # format: groupId:artifactId:type:classifier:version:scope\n      jarname=\"${fields[1]}-${fields[4]}-${fields[5]}.jar\"\n      ;;\n    *)\n      echo \"Error: unrecognized number of fields in mvn dependency:list output\"\n      exit 1\n      ;;\n  esac\n  echo \"${jarname}\"\n}\n{code}\n\n2.  Probably better to do bash-style math:\n\n{code}\ndeclare -i errors=0\n...\n((errors=errors+1))\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-04T20:23:59.163+0000","updated":"2017-08-04T20:24:54.790+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16114982","id":"16114982","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"body":"Made the suggested changes, rebuilt and re-ran Yetus (although note that the order in the 6-field case is 1-4-3, not 1-4-5, as the dependency plugin lists the classifier before the version).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mackrorysd","name":"mackrorysd","key":"mackrorysd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mackrorysd&avatarId=18559","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mackrorysd&avatarId=18559","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mackrorysd&avatarId=18559","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mackrorysd&avatarId=18559"},"displayName":"Sean Mackrory","active":true,"timeZone":"America/Denver"},"created":"2017-08-04T21:20:10.819+0000","updated":"2017-08-04T21:20:10.819+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16115079","id":"16115079","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  1m 57s{color} | {color:blue} Docker mode activated. {color} |\n|| || || || {color:brown} Prechecks {color} ||\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n|| || || || {color:brown} trunk Compile Tests {color} ||\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m 40s{color} | {color:blue} Maven dependency ordering for branch {color} |\n|| || || || {color:brown} Patch Compile Tests {color} ||\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 20s{color} | {color:blue} Maven dependency ordering for patch {color} |\n| {color:green}+1{color} | {color:green} shellcheck {color} | {color:green}  0m  0s{color} | {color:green} There were no new shellcheck issues. {color} |\n| {color:green}+1{color} | {color:green} shelldocs {color} | {color:green}  0m 12s{color} | {color:green} There were no new shelldocs issues. {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n|| || || || {color:brown} Other Tests {color} ||\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 20s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black}  4m 49s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:14b5c93 |\n| JIRA Issue | HADOOP-13952 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12880473/HADOOP-13952.001.patch |\n| Optional Tests |  asflicense  shellcheck  shelldocs  |\n| uname | Linux 63b804a36f9b 3.13.0-116-generic #163-Ubuntu SMP Fri Mar 31 14:13:22 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / f44b349 |\n| shellcheck | v0.4.6 |\n| modules | C:  U:  |\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/12955/console |\n| Powered by | Apache Yetus 0.6.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-04T23:11:57.638+0000","updated":"2017-08-04T23:11:57.638+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16131521","id":"16131521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hey [~aw], do you have time to review Sean's patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-08-18T00:25:05.830+0000","updated":"2017-08-18T00:25:05.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16142294","id":"16142294","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm dropping this in priority after offline discussion from Sean.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-08-25T21:55:29.719+0000","updated":"2017-08-25T21:55:29.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16255511","id":"16255511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kshukla","name":"kshukla","key":"kshukla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Kuhu Shukla","active":true,"timeZone":"Etc/UTC"},"body":"To add here, hadoop-resourceestimator is also showing up in the errors from a recent build \r\n{code}\r\nERROR: hadoop-resourceestimator has missing dependencies: hadoop-yarn-common-3.0.0.0.123.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: jersey-client-1.19.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: guice-servlet-4.0.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: guice-4.0.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: aopalliance-1.0.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: jersey-guice-1.19.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: jackson-module-jaxb-annotations-2.7.8.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: jackson-jaxrs-json-provider-2.7.8.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: jackson-jaxrs-base-2.7.8.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: hadoop-yarn-api-3.0.0.0.123.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: hadoop-yarn-server-resourcemanager-3.0.0.0.123.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: jetty-util-ajax-9.3.19.v20170502.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: hadoop-yarn-server-common-3.0.0.0123.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: geronimo-jcache_1.0_spec-1.0-alpha-1.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: ehcache-3.3.1.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: HikariCP-java7-2.4.12.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: hadoop-yarn-server-applicationhistoryservice-3.0.0.0.123.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: fst-2.50.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: java-util-1.9.0.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: json-io-2.5.1.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: hadoop-yarn-server-timelineservice-3.0.0.0.123.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: commons-csv-1.0.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: hadoop-yarn-server-web-proxy-3.0.0.0.123.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: leveldbjni-all-1.8.jar\r\n22:19:38 ERROR: hadoop-resourceestimator has missing dependencies: javax.inject-1.jar\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kshukla","name":"kshukla","key":"kshukla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Kuhu Shukla","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-16T15:53:09.100+0000","updated":"2017-11-16T15:53:09.100+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16255565","id":"16255565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  9m 23s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 20s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} shellcheck {color} | {color:green}  0m  0s{color} | {color:green} There were no new shellcheck issues. {color} |\r\n| {color:green}+1{color} | {color:green} shelldocs {color} | {color:green}  0m 11s{color} | {color:green} There were no new shelldocs issues. {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m  4s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 22s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 32m 41s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | HADOOP-13952 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12880473/HADOOP-13952.001.patch |\r\n| Optional Tests |  asflicense  shellcheck  shelldocs  |\r\n| uname | Linux 7710cccd5e64 3.13.0-135-generic #184-Ubuntu SMP Wed Oct 18 11:55:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / f4d5d20 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| shellcheck | v0.4.6 |\r\n| Max. process+thread count | 337 (vs. ulimit of 5000) |\r\n| modules | C: . U: . |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13701/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-16T16:33:36.996+0000","updated":"2017-11-16T16:33:36.996+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16255675","id":"16255675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"That's because hadoop-resource-estimator's pom is misconfigured.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-11-16T17:39:58.700+0000","updated":"2017-11-16T17:39:58.700+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13032295/comment/16259698","id":"16259698","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kshukla","name":"kshukla","key":"kshukla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Kuhu Shukla","active":true,"timeZone":"Etc/UTC"},"body":"bq. That's because hadoop-resource-estimator's pom is misconfigured.\r\nOpened HADOOP-15052","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kshukla","name":"kshukla","key":"kshukla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Kuhu Shukla","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-20T19:20:28.045+0000","updated":"2017-11-20T19:20:28.045+0000"}],"maxResults":19,"total":19,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-13952/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i38b7r:"}}