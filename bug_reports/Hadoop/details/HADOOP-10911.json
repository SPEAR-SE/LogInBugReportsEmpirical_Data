{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12730938","self":"https://issues.apache.org/jira/rest/api/2/issue/12730938","key":"HADOOP-10911","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327179","id":"12327179","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-07-30T23:20:13.759+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 29 06:35:20 UTC 2014","customfield_12310420":"409010","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_6925240_*|*_1_*:*_1_*:*_2569050488_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-08-29T18:25:35.454+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-10911/watchers","watchCount":6,"isWatching":false},"created":"2014-07-30T22:52:39.763+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326263","id":"12326263","description":"2.5.0 release","name":"2.5.0","archived":false,"released":true,"releaseDate":"2014-08-11"}],"issuelinks":[{"id":"12400056","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12400056","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12721514","key":"HADOOP-10710","self":"https://issues.apache.org/jira/rest/api/2/issue/12721514","fields":{"summary":"hadoop.auth cookie is not properly constructed according to RFC2109","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12400055","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12400055","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12739565","key":"HADOOP-11068","self":"https://issues.apache.org/jira/rest/api/2/issue/12739565","fields":{"summary":"Match hadoop.auth cookie format to jetty output","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12395526","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12395526","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12737910","key":"HADOOP-11028","self":"https://issues.apache.org/jira/rest/api/2/issue/12737910","fields":{"summary":"Use Java 7 HttpCookie to implement hadoop.auth cookie","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-12-01T03:10:51.053+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312526","id":"12312526","name":"security"}],"timeoriginalestimate":null,"description":"I'm seeing the same problem reported in HADOOP-10710 (that is, httpclient is unable to authenticate with servers running the authentication filter), even with HADOOP-10710 applied.\n\nFrom my reading of the spec, the problem is as follows:\nExpires is not a valid directive according to the RFC, though it is mentioned for backwards compatibility with netscape draft spec.  When httpclient sees \"Expires\", it parses according to the netscape draft spec, but note from RFC2109:\n{code}\nNote that the Expires date format contains embedded spaces, and that \"old\" cookies did not have quotes around values. \n{code}\nand note that AuthenticationFilter puts quotes around the value:\nhttps://github.com/apache/hadoop-common/blob/6b11bff94ebf7d99b3a9e513edd813cb82538400/hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java#L437-L439\n\nSo httpclient's parsing appears to be kosher.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12658765","id":"12658765","filename":"HADOOP-10911.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-30T23:07:49.268+0000","size":939,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12658765/HADOOP-10911.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12659009","id":"12659009","filename":"HADOOP-10911-tests.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-31T21:41:41.575+0000","size":5608,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12659009/HADOOP-10911-tests.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12662887","id":"12662887","filename":"HADOOP-10911v2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-08-19T22:59:56.365+0000","size":14823,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12662887/HADOOP-10911v2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12664529","id":"12664529","filename":"HADOOP-10911v3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-08-27T00:18:34.902+0000","size":14823,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12664529/HADOOP-10911v3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12677835","id":"12677835","filename":"oozie-webconsole.stream","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-10-29T05:52:49.895+0000","size":16707,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12677835/oozie-webconsole.stream"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"409007","customfield_12312823":null,"summary":"hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14080152","id":"14080152","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"Here's a trivial patch that removes the quotes.\n\nAlternatively, we could get rid of Expires or use Max-Age.\n\nFinally, since this has been broken multiple times perhaps we should add a test against httpclient directly?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-30T23:07:49.273+0000","updated":"2014-07-30T23:07:49.273+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14080171","id":"14080171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"Please don't remove the quotes.\n\nBy looking at RFC2109:\n\n{code}\n   set-cookie      =       \"Set-Cookie:\" cookies\n   cookies         =       1#cookie\n   cookie          =       NAME \"=\" VALUE *(\";\" cookie-av)\n   NAME            =       attr\n   VALUE           =       value\n   cookie-av       =       \"Comment\" \"=\" value\n                   |       \"Domain\" \"=\" value\n                   |       \"Max-Age\" \"=\" value\n                   |       \"Path\" \"=\" value\n                   |       \"Secure\"\n                   |       \"Version\" \"=\" 1*DIGIT\n{code}\n\nIt seems we are only off with {{Max-Age}} (ignoring HttpOnly which is not breaking things).\n\nGood idea on adding a test for HttpClient.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2014-07-30T23:20:13.759+0000","updated":"2014-07-30T23:20:13.759+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14080217","id":"14080217","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"Thanks [~tucu00].\n\nbq. Please don't remove the quotes.\nIs this because the value can contain whitespace?\n\nSo you want to use Max-Age?  It seems it's not supported by older versions of IE (http://mrcoles.com/blog/cookies-max-age-vs-expires/) -- do we care about that?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-30T23:44:47.780+0000","updated":"2014-07-30T23:44:47.780+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14080263","id":"14080263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"on the quotes, we had them, they got removed, that broke things, we added again. They don't do any harm if they are there.\n\nOn Max-Age & Expired, i don't think we want to break old browsers. It seems to me an HttpClient bug that uses the presence of Expire to go back to old cookie format, the precense of Version=1 should trump. Can you dig on HttpClient side?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2014-07-31T00:08:28.450+0000","updated":"2014-07-31T00:08:28.450+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14080313","id":"14080313","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"bq. on the quotes, we had them, they got removed, that broke things, we added again. They don't do any harm if they are there.\n\nIt's a little more complicated -- HADOOP-10379 made multiple changes like removing the quotes and the Version field.  So it was the combination of changes that broke things, not specifically removing the quotes.\n\nbq. On Max-Age & Expired, i don't think we want to break old browsers. It seems to me an HttpClient bug that uses the presence of Expire to go back to old cookie format, the precense of Version=1 should trump. Can you dig on HttpClient side?\n\nSeems reasonable, I'll dig.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-31T00:41:20.282+0000","updated":"2014-07-31T00:41:20.282+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14081526","id":"14081526","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"Here are a couple of test cases.  You'll notice they fail with the current cookie format and pass without the quotes.\n\nI'm still investigating httpclient's handling of the cookies, as we discussed above.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-31T21:41:41.581+0000","updated":"2014-07-31T21:41:41.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14081656","id":"14081656","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"Did a little more digging.  Httpclient is indeed acting like I thought: if there is \"expires\" it is parsed as a netscape cookie, even if there is a version field.  I'll check with httpclient why that is.  By the way, even if it was parsed as an RFC2109 cookie, it wouldn't parse correctly because the Expires value has non-quoted spaces.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-31T23:10:44.888+0000","updated":"2014-07-31T23:10:44.888+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14081682","id":"14081682","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"Sent an e-mail to the httpclient list.  FWIW, I think we should just remove the quotes, as in my original patch.  It's a valid cookie, at least according to the netscape draft spec, and it works with current versions of httpclient.  That's good because it won't break existing clients and httpclient is popular enough to warrant consideration.  If they consider the above a bug and fix it in a later version, we can upgrade the required httpclient version and have a proper RFC2109 cookie format.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-31T23:39:37.242+0000","updated":"2014-07-31T23:39:37.242+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14081684","id":"14081684","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"Thoughts [~tucu00]?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-07-31T23:40:31.978+0000","updated":"2014-07-31T23:40:31.978+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14085540","id":"14085540","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"I tried the tests with the format used in HADOOP-10379 and they seem to pass.  Let me see if I can come up with a test that fails for both those and HADOOP-10710.  I think only then would I be confident in our cookie format.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-08-05T00:14:12.092+0000","updated":"2014-08-05T00:14:12.092+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14103007","id":"14103007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"bq. On Max-Age & Expired, i don't think we want to break old browsers. It seems to me an HttpClient bug that uses the presence of Expire to go back to old cookie format, the precense of Version=1 should trump. Can you dig on HttpClient side?\n\nThis is a bit complicated -- see the discussion here: http://mail-archives.apache.org/mod_mbox/hc-httpclient-users/201408.mbox/%3C1406895602.17749.8.camel%40ubuntu%3E\nIn short, it's not a valid Version=1 cookie, but httpclient would like to be able to handle it anyway, see HTTPCLIENT-1546.\n\nI added a patch that does the following:\n1) Runs the TestKerberosAuthenticator test cases against Tomcat as well as Jetty, this exposes the bug in HADOOP-10379, which didn't get a test added in HADOOP-10710\n2) Adds an httpclient test case to TestKerberosAuthenticator.  This does 2 things:\n- Checks that the cookie is actually being processed.  Note that it's possible for the existing tests to pass by doing the SPNego negotiation on each request, rather than relying on the cookie.  But the entity type we use in the test doesn't support repeating, so an exception is raised if the SPNego process repeats\n- Verifies that httpclient works with our cookie format (probably not strictly necessary, but nice to have given httpclient's popularity)\n\nSo, I think the the test cases are pretty useful for catching regressions.\n\nAs for the format itself, I just chose a simple format that passes all the tests.  That seems like a reasonable improvement over what we have now, but I'm not married to the particular format.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-08-19T22:59:56.370+0000","updated":"2014-08-19T22:59:56.370+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14103124","id":"14103124","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"Once hadoop itself moves over to Java 7 at 2.7, is it possible to use {{java.net.HttpCookie}} directly and delegate this issue to JDK?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T00:16:32.075+0000","updated":"2014-08-20T00:16:32.075+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14111626","id":"14111626","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"Latest version of the patch.\n\nThis patch has the following changes from the previous patch:\n- Adds a check that a cookie with a proper token is included with each POST request.  This guarantees that the cookies are being handled correctly (i.e. the test can't pass by just redoing negotiate on each request).  The previous patch had a test for this with httpclient, but not with AuthenticatedURL.\n- Changes the cookie format.  Note with the new tests, we are checking {jetty, tomcat} x {AuthenticatedURL, HttpClient}.  So we should be pretty confident in any cookie that passes all those tests.  To generate the cookie format, I used jetty 8.1.15.v20140411.  (NOTE: I didn't actually use the Cookie class and the 3.0 servlet API, I called the helper function jetty uses to produce the format: http://archive.eclipse.org/jetty/9.0.0.RC0/apidocs/org/eclipse/jetty/http/HttpFields.html#addSetCookie%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20long,%20java.lang.String,%20boolean,%20boolean,%20int%29 ).  It produced a cookie like:\n{code}\nSet-Cookie=hadoop.auth=\"u=client&p=client@EXAMPLE.COM&t=kerberos&e=1409128342379&s=R6rNnd4CcMV0bNtK1dNLiJr1ivk=\";Expires=Mon, 31-Aug-2026 08:36:23 GMT;HttpOnly\n{code}\nThis is if you set to use version 0 cookies, version 1 is identical with a Max-Age entry added:\n{code}\nSet-Cookie=hadoop.auth=\"u=client&p=client@EXAMPLE.COM&t=kerberos&e=1409128342379&s=R6rNnd4CcMV0bNtK1dNLiJr1ivk=\";Expires=Mon, 31-Aug-2026 08:36:23 GMT;Max-Age=379069291;HttpOnly\n{code}\nThe Max-Age entry doesn't seem necessary, given even the JDK docs say version 1 is experimental.  Note that I kept the spaces after the ; in our format, as they don't seem to affect anything and make it easier to read.  Also, I tested the new format against Solr on real cluster and it passed, while the old format fails.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-08-27T00:18:34.909+0000","updated":"2014-08-27T00:18:34.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14115409","id":"14115409","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"+1, pending jenkins. Greg, thanks for you patience and for doing all those combinations of scenarios in the tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2014-08-29T16:29:56.532+0000","updated":"2014-08-29T16:30:28.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14115474","id":"14115474","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12664529/HADOOP-10911v3.patch\n  against trunk revision 4ae8178.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-auth.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HADOOP-Build/4594//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/4594//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-29T17:01:39.073+0000","updated":"2014-08-29T17:01:39.073+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14115621","id":"14115621","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"Thanks Greg. Committed to trunk and branch-2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2014-08-29T18:25:35.480+0000","updated":"2014-08-29T18:25:35.480+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14116342","id":"14116342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #664 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/664/])\nHADOOP-10911. hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109. (gchanan via tucu) (tucu: rev 156e6a4f8aed69febec408af423b2a8ac313c643)\n* hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/TestKerberosAuthenticator.java\n* hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java\n* hadoop-project/pom.xml\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/AuthenticatorTestCase.java\n* hadoop-common-project/hadoop-auth/pom.xml\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-30T11:38:09.870+0000","updated":"2014-08-30T11:38:09.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14116375","id":"14116375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #1855 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1855/])\nHADOOP-10911. hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109. (gchanan via tucu) (tucu: rev 156e6a4f8aed69febec408af423b2a8ac313c643)\n* hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/AuthenticatorTestCase.java\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/TestKerberosAuthenticator.java\n* hadoop-common-project/hadoop-auth/pom.xml\n* hadoop-project/pom.xml\n* hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-30T13:45:33.966+0000","updated":"2014-08-30T13:45:33.966+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14116461","id":"14116461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #1881 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1881/])\nHADOOP-10911. hadoop.auth cookie after HADOOP-10710 still not proper according to RFC2109. (gchanan via tucu) (tucu: rev 156e6a4f8aed69febec408af423b2a8ac313c643)\n* hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/server/AuthenticationFilter.java\n* hadoop-common-project/hadoop-auth/pom.xml\n* hadoop-project/pom.xml\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/AuthenticatorTestCase.java\n* hadoop-common-project/hadoop-auth/src/test/java/org/apache/hadoop/security/authentication/client/TestKerberosAuthenticator.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-30T16:47:16.277+0000","updated":"2014-08-30T16:47:16.277+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14188041","id":"14188041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"We've discovered that this patch has broken the Oozie web console in secure clusters.  The attached trace shows that the cookie is getting truncated after the first occurrence of '='.  Reintroducing the quotes fixes the issue.\n\nI'd like to revert this patch for 2.6.0.  We can reopen this issue if there is still a need to make a subsequent attempt at another patch for something related to HttpClient.  What do others think?\n\nThanks to [~venkatnrangan] for reporting the bug and providing the root cause analysis that identified this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-10-29T05:52:49.903+0000","updated":"2014-10-29T05:52:49.903+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14188065","id":"14188065","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"body":"[~cnauroth] do you have a test?  Ideally we'd have a format that worked for as many users as possible.\n\nAlso, can you check out HADOOP-11068?  I changed the format there to what's output by the latest jetty but it hasn't been committed.  Perhaps that works for you?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gchanan","name":"gchanan","key":"gchanan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregory Chanan","active":true,"timeZone":"America/New_York"},"created":"2014-10-29T06:26:16.718+0000","updated":"2014-10-29T06:26:16.718+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12730938/comment/14188071","id":"14188071","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks, Gregory.  From a quick scan of HADOOP-11068, I think that will do the trick.  I'll try it out and report back there.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-10-29T06:35:20.645+0000","updated":"2014-10-29T06:35:20.645+0000"}],"maxResults":22,"total":22,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-10911/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1ydhr:"}}