{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12384262","self":"https://issues.apache.org/jira/rest/api/2/issue/12384262","key":"HADOOP-2391","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312927","id":"12312927","description":"","name":"0.16.1","archived":false,"released":true,"releaseDate":"2008-03-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-12-10T04:38:32.721+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Mar 07 12:11:14 UTC 2008","customfield_12310420":"125555","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_200390884_*|*_1_*:*_1_*:*_5615582694_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_2522792509","customfield_12312321":null,"resolutiondate":"2008-02-14T13:45:18.223+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-2391/watchers","watchCount":6,"isWatching":false},"created":"2007-12-09T06:12:24.645+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12318956","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12318956","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12387204","key":"HADOOP-2715","self":"https://issues.apache.org/jira/rest/api/2/issue/12387204","fields":{"summary":"Review and document '_' prefix convention in input directories","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12318936","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12318936","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12386982","key":"PIG-71","self":"https://issues.apache.org/jira/rest/api/2/issue/12386982","fields":{"summary":"Support for Hadoop Speculative Execution","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T16:52:37.509+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"I am tracking a problem where when speculative execution is enabled, there is a race condition when trying to read output paths from a previously completed job.  More specifically when reduce tasks run their output is put into a working directory under the task name until the task in completed.  The directory name is something like workdir/_taskid.  Upon completion the output get moved into workdir.  Regular tasks are checked for this move and not considered completed until this move is made.  I have not verified it but all indications point to speculative tasks NOT having this same check for completion and more importantly removal when killed.  So what we end up with when trying to read the output of previous tasks with speculative execution enabled is the possibility that previous workdir/_taskid will be present when the output directory is read by a chained job.  Here is an error when supports my theory:\n\nGenerator: org.apache.hadoop.ipc.RemoteException: java.io.IOException: Cannot open filename /u01/hadoop/mapred/temp/generate-temp-1197104928603/_task_200712080949_0005_r_000014_1\n        at org.apache.hadoop.dfs.NameNode.open(NameNode.java:234)\n        at sun.reflect.GeneratedMethodAccessor64.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:389)\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:644)\n        at org.apache.hadoop.ipc.Client.call(Client.java:507)\n        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:186)\n        at org.apache.hadoop.dfs.$Proxy0.open(Unknown Source)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)\n        at org.apache.hadoop.dfs.$Proxy0.open(Unknown Source)\n        at org.apache.hadoop.dfs.DFSClient$DFSInputStream.openInfo(DFSClient.java:839)\n        at org.apache.hadoop.dfs.DFSClient$DFSInputStream.<init>(DFSClient.java:831)\n        at org.apache.hadoop.dfs.DFSClient.open(DFSClient.java:263)\n        at org.apache.hadoop.dfs.DistributedFileSystem.open(DistributedFileSystem.java:114)\n        at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1356)\n        at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1349)\n        at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1344)\n        at org.apache.hadoop.mapred.SequenceFileOutputFormat.getReaders(SequenceFileOutputFormat.java:87)\n        at org.apache.nutch.crawl.Generator.generate(Generator.java:429)\n        at org.apache.nutch.crawl.Generator.run(Generator.java:563)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n        at org.apache.hadoop.util.ToolBase.doMain(ToolBase.java:54)\n        at org.apache.nutch.crawl.Generator.main(Generator.java:526)\n\nI will continue to research this and post as I make progress on tracking down this bug.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12371448","id":"12371448","filename":"HADOOP-2391-1-20071211.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"created":"2007-12-11T17:40:43.104+0000","size":2195,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12371448/HADOOP-2391-1-20071211.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12375307","id":"12375307","filename":"patch-2391.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2008-02-12T06:03:43.717+0000","size":16416,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12375307/patch-2391.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"105727","customfield_12312823":null,"summary":"Speculative Execution race condition with output paths","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"all","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12549888","id":"12549888","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"body":"After more looking I think I have a better understanding of what is happening.  Speculative execution would cause more tasks to be killed because in parallel tasks one task will finish before the other and the slower task will be killed.  Killed tasks are returned as completed immediately and have their output removed by a separate thread than the thread which completes a job.  Meaning it is possible for a job to complete and return before output for killed tasks is fully removed.\n\nWould it be useful to have a structure that checks if killed tasks are removed before allowing a job to complete?  I think it would but I might not be fully understanding why killed tasks are returned immediately.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"created":"2007-12-10T03:50:36.498+0000","updated":"2007-12-10T03:50:36.498+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12549895","id":"12549895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"Dennis, the way it works is that there is a TaskCommitQueue thread that saves or discards outputs. And, yes, the job could be declared as \"complete\" before the killed tasks' outputs are discarded since the job is declared as successful as soon as all the tasks are successful (including saving their outputs).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2007-12-10T04:38:32.721+0000","updated":"2007-12-10T04:38:32.721+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12550232","id":"12550232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"body":"I will say that this only happens because hadoop keep the output of tasks in a task_id directory directly beneath the output directory.  Another, perhaps better solutions would simply be to store the temporary task output somewhere else NOT beneath the output directory.  This way even if the killed tasks weren't finished removing output before the job finished it wouldn't matter as the only thing that would be read by later jobs is the final output directory and not the temp task directories. \n\nIf this sounds like a good solution I will make up a patch for it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"created":"2007-12-10T23:40:25.498+0000","updated":"2007-12-10T23:40:25.498+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12550297","id":"12550297","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"bq. Another, perhaps better solutions would simply be to store the temporary task output somewhere else NOT beneath the output directory\n+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2007-12-11T04:21:28.187+0000","updated":"2007-12-11T04:21:28.187+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12550332","id":"12550332","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I will say that this only happens because hadoop keep the output of tasks in a task_id directory directly beneath the output directory.\n\nAgreed.\n\nThe reason this is done is that once we have file-permissions and/or quotas in HDFS this will continue to work seamlessly... the other option of putting the temporary outputs elsewhere is brittle as soon as we do permissions/quotas unless we ask the user to specify yet another temp-dir in his job-configuration; IMHO a needless complication.\n\n----\n\nTaking a step back, I'd argue the simplest solution is for your input format to just ignore input directories beginning with underscore, thus all ${mapred.output.dir}/__${taskid}_ dirs are silently ignored. \n\nIn fact {{FileInputFormat}} does exactly that: there is a {{hiddenFileFilter}} which ignores files starting with either \"_\" or \".\". This bug then becomes a question of figuring why that filter isn't working...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-12-11T07:01:36.554+0000","updated":"2007-12-11T07:01:36.554+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12550653","id":"12550653","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"body":"The code in Nutch uses SequenceFileOutputFormat.getReaders which doesn't specify a file format path filter.  I have added an overloaded method to SequenceFileOutputFormat to allow passing in a PathFilter.  This should allow us to make changes in the nutch code to ignore work and temp directories.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=musepwizard","name":"musepwizard","key":"musepwizard","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Kubes","active":true,"timeZone":"Etc/UTC"},"created":"2007-12-11T17:40:43.188+0000","updated":"2007-12-11T17:41:41.154+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12561949","id":"12561949","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"bq. Would it be useful to have a structure that checks if killed tasks are removed before allowing a job to complete?\n\nMaybe this makes sense (though in certain cases, especially in a busy cluster, the job might take a slightly longer time to declare itself a success).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-01-24T06:04:17.411+0000","updated":"2008-01-24T06:04:17.411+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12562114","id":"12562114","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=breed","name":"breed","key":"breed","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Reed","active":true,"timeZone":"America/Los_Angeles"},"body":"I agree that adding yet another filter for files to ignore is taking a step back. We are going to add yet another bit of cruft to the code. It is much better to make sure that the file output directory only has final output, not intermediate garbage. (That is what /tmp is for.)\n\nIf you really really want the temp files to be in the same output directory hierarchy, use a .inprocess directory and then delete that directory at the end of the job. If a job completes successfully there should not be any intermediate files to ignore.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=breed","name":"breed","key":"breed","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Reed","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-24T16:10:29.187+0000","updated":"2008-01-24T16:10:29.187+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12562209","id":"12562209","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":">  If a job completes successfully there should not be any intermediate files to ignore.\n\n+1  The bug is that the job is marked complete when speculative tasks are still running.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-24T20:42:10.011+0000","updated":"2008-01-24T20:42:10.011+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12562711","id":"12562711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric14","name":"eric14","key":"eric14","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"eric baldeschwieler","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 - The bug is that the job is marked complete when speculative tasks are still running\n\n---\n\nAlso we should discuss the '_' issue in more detail and fix related documentation.  I've started HADOOP-2715 to discuss.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric14","name":"eric14","key":"eric14","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"eric baldeschwieler","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-25T22:05:32.398+0000","updated":"2008-01-25T22:05:32.398+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12563752","id":"12563752","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=menicosia","name":"menicosia","key":"menicosia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marco Nicosia","active":true,"timeZone":"Etc/UTC"},"body":"Setting Fix Version to Hadoop 0.16.1. Not only might users see this even when speculative execution is turned off, it's even more likely for users to see this when it's turned on. So, this patch is more or less preventing us from deploying speculative execution as the default for our clusters.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=menicosia","name":"menicosia","key":"menicosia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marco Nicosia","active":true,"timeZone":"Etc/UTC"},"created":"2008-01-30T00:16:02.245+0000","updated":"2008-01-30T00:16:02.245+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12565669","id":"12565669","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"bq. After more looking I think I have a better understanding of what is happening. Speculative execution would cause more tasks to be killed because in parallel tasks one task will finish before the other and the slower task will be killed. Killed tasks are returned as completed immediately and have their output removed by a separate thread than the thread which completes a job. Meaning it is possible for a job to complete and return before output for killed tasks is fully removed.\n\nYes.  One probable solution is we can store the temporary output files in {noformat} <output_dir>/_temporary/_<taskid> {noformat}  When the job is complete, we can delete the directory {noformat} <output_dir>/_temporary/ {noformat} . With the same functionality of task commit thread, it gets an exception in discarding the task output for the killed tasks which is ignored, because it is already deleted. \nThoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2008-02-05T09:24:00.560+0000","updated":"2008-02-05T09:55:31.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12566183","id":"12566183","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"We had a hallway discussion which discussed the following:\n\n1. The ${mapred.output.dir}/_temp/_${taskid} as illustrated by Amareshwari's comment.\n\n_Pros_ : \na) Easy to implement\nb) Keeps job's output in ${mapred.output.dir}, so it ensures there are no junk files on HDFS which aren't noticeable by anyone (we assume the user will notice this *smile*).\n\n_Cons_: This still doesn't solve the problem... the issue is that there might be tasks which get launched as the job is completing and go ahead and create the _${taskid} directory (see HADOOP-2759 i.e. HDFS *create* automatically creates parent-directories). This problem is further aggravated by tasks creating side-files in the _${taskid} directory; another point to remember is that the OutputFormat is user-code...\n\n2. Put task-outputs in a job-specific temporary system-directory outside the ${mapred.output.dir} and then move them into ${mapred.output.dir}.\n\nThe problem with this approach is that although it is simple and solves the problems on-hand, we might be left with random files on HDFS which will never ever be noticed by anyone - leading to space-creep and at the very least requires a _tmpclean_ tool. We also need to study how this will work with permissions and quotas.\n\n3. Do not declare a job as complete till all it's TIPs have succeeded and all speculative tasks are killed.\n\n_Pros_:\na) It's probably the most _correct_ solution of the lot.\nb) This will mostly work (see the _Cons_).\n\n_Cons_:\na) Implementation is a little more involved... (we probably need to mark the Job as \"done, but cleaning up\")\nb) There are corner cases: think of a job which is complete, and whose speculative tasks are running on a TaskTracker which is _lost_ before the task is killed... we need to wait atleast 10mins (current timeout) before declaring the TaskTracker as _lost_ and the job as SUCCESS. Even this doesn't guarantee that the _task_ is actually dead since it could still be running on the TaskTracker node... and creating side-files etc. (again HADOOP-2759).\nc) The _lost tasktracker_ problem described above potentially adds a finite lag to jobs being declared a success. This doesn't play well with short-running jobs which need SLAs on completion/failure times (of course they can set the TaskTracker timeout to be less than 10mins on their clusters, just something to consider). \n\n----\n\nOverall combination of 1 & 3 i.e. having a single ${mapred.output.dir}/_tmp as the parent of all temporary tasks' directories and also waiting for all tasks to be killed might work well in most cases. We still need to fix HADOOP-2759, or at least add a *create* api which doesn't automatically create parent directories for this to work. \n\nThoughts?\n\nNote: Adding a new *create* api which doesn't automatically create parent dirs is a part of the solution, the other part is to educate users to not use the _old_ create api in their own OutputFormats.\n  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-02-06T16:27:16.635+0000","updated":"2008-02-06T16:27:16.635+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12566518","id":"12566518","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"As far as I understood we are trying to solve the problem:  \"If JT is alive tasks will be cleanedup eventually by TaskCommitThread by discarding their outputs. We have garbage left in dfs if the JT dies before cleaning up.\"\n\nWith option 1, we delete ${mapred.output.dir}/_tmp before we declare the job as successful which is going to delete all the garbage. Once we fix HADOOP-2759, we will be safe because when the task tries to create files ( output files or side-files), it will fail. I think option 1 would alone solve problem once HADOOP-2759 is done,  as tasks failing after job completion will be ignored.\nDo we still need to wait till all the speculative tasks die, as this is going to take a lot of time to declare job as Succeeded? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2008-02-07T09:36:14.542+0000","updated":"2008-02-07T09:36:14.542+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12566750","id":"12566750","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric14","name":"eric14","key":"eric14","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"eric baldeschwieler","active":true,"timeZone":"America/Los_Angeles"},"body":"As I understand things...\n\nA little work on the creation order should fix things.  The task  \ntracker should create the task directory, the job tracker should  \ncreate the job directory, user code should just create files.  If we  \ndid this, then the JT could rename and then remove the job directory  \nand then no task could start successfully.  The tasks should throw an  \nexception when they try to create new files, since their directory  \nwill have been removed.\n\nOf course there is always windows...\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric14","name":"eric14","key":"eric14","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"eric baldeschwieler","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-02-07T19:31:11.927+0000","updated":"2008-02-07T19:31:11.927+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12566761","id":"12566761","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"bq. The tasks should throw an exception when they try to create new files, since their directory will have been removed.\n\nNote that due to HADOOP-2759, the tasks would end up creating the directory hierarchy implictly without their knowledge. I think HADOOP-2759 should be fixed to address this problem without having to complicate things to do with keeping track of speculative tasks after all the TIPs of a job complete, etc. (as Arun and Amareshwari pointed out). But the thing that is bothering me is - could addressing HADOOP-2759 lead to an incompatible change (and hence shouldn't be done for 0.16.1)?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-02-07T19:52:13.146+0000","updated":"2008-02-07T19:52:13.146+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12566765","id":"12566765","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"bq. The tasks should throw an exception when they try to create new files, since their directory will have been removed.\nDo you mean to say that the tasks should first check the existence of the directory?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-02-07T20:03:09.256+0000","updated":"2008-02-07T20:03:09.256+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12566919","id":"12566919","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"We can create task directory, job directory and files as suggested by Eric and add check for existence of parent directory in tasks. And throw an exception if it doesnt exist. This will take care of creating output files. However we will have issue of tasks creating side files until we fix  HADOOP-2759.  So, we can fix this for 16.1 and once HADOOP-2759 gets fixed, creating side files will be fixed automatically.\nThoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2008-02-08T05:53:57.021+0000","updated":"2008-02-08T05:53:57.021+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12566930","id":"12566930","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"+1 (this will take care of the most usual case for now)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-02-08T06:26:48.163+0000","updated":"2008-02-08T06:26:48.163+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12567975","id":"12567975","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"Submiting patch with the proposed design. Added a test case to check if _temporary directory exists  after job completion.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2008-02-12T06:05:27.322+0000","updated":"2008-02-12T06:05:27.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12567988","id":"12567988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  Here are the results of testing the latest attachment \nhttp://issues.apache.org/jira/secure/attachment/12375307/patch-2391.txt\nagainst trunk revision 619744.\n\n    @author +1.  The patch does not contain any @author tags.\n\n    tests included +1.  The patch appears to include 6 new or modified tests.\n\n    javadoc +1.  The javadoc tool did not generate any warning messages.\n\n    javac +1.  The applied patch does not generate any new javac compiler warnings.\n\n    release audit +1.  The applied patch does not generate any new release audit warnings.\n\n    findbugs +1.  The patch does not introduce any new Findbugs warnings.\n\n    core tests +1.  The patch passed core unit tests.\n\n    contrib tests +1.  The patch passed contrib unit tests.\n\nTest results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/1782/testReport/\nFindbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/1782/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nCheckstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/1782/artifact/trunk/build/test/checkstyle-errors.html\nConsole output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/1782/console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2008-02-12T07:36:03.324+0000","updated":"2008-02-12T07:36:03.324+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12568930","id":"12568930","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"I just committed this. Thanks, Amareshwari!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-02-14T13:45:18.040+0000","updated":"2008-02-14T13:45:18.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12569246","id":"12569246","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-trunk #401 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/401/])","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2008-02-15T12:23:38.049+0000","updated":"2008-02-15T12:23:38.049+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12384262/comment/12576156","id":"12576156","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-trunk #422 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/422/])","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2008-03-07T12:11:14.695+0000","updated":"2008-03-07T12:11:14.695+0000"}],"maxResults":24,"total":24,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-2391/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ig93:"}}