{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12532998","self":"https://issues.apache.org/jira/rest/api/2/issue/12532998","key":"HADOOP-7866","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Nov 28 21:45:39 UTC 2011","customfield_12310420":"218730","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7866/watchers","watchCount":3,"isWatching":false},"created":"2011-11-28T21:38:36.293+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314203","id":"12314203","description":"","name":"0.20.2","archived":false,"released":true,"releaseDate":"2010-02-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-11-28T21:45:39.859+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310971","id":"12310971","name":"metrics","description":""}],"timeoriginalestimate":null,"description":"JVM Metrics:\n\nlogWarn\nlogInfo\nlogError\nlogFatal\ngcCount\ngcTimeMillis\n\nAre provided as \"counters\" only, meaning that they cumulate values over time rather than report real-time values. The code uses incrMetric() instead of setMetric(), for these metrics.\n\nIn tools like ganglia this leads to increasing graphs that aren't terribly useful: You can't tell by looking at a graph of these metrics whether or not garbage collection times are going up, how long individual gc events were, or when interesting log errors happened, because those events are overshadowed by trends when the metrics are reported as counters. Also, users are accustomed to thinking that a graph trending up indicates an operational issue, so these metrics cause interest and confusion among operators when they shouldn't.\n\nI'm attaching a patch to JVM Metrics that adds the following metrics:\n\nlogWarnGauge\nlogInfoGauge\nlogErrorGauge\nlogFatalGauge\ngcCountGauge\ngcTimeMillisGauge\n\nAs well as a sample image of how those metrics look after running with this patch on a test cluster for a couple weeks. \n\nJ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12505399","id":"12505399","filename":"ASF.LICENSE.NOT.GRANTED--screenshot-1.jpg","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-28T21:45:39.735+0000","size":79559,"mimeType":"image/jpeg","content":"https://issues.apache.org/jira/secure/attachment/12505399/ASF.LICENSE.NOT.GRANTED--screenshot-1.jpg"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12505398","id":"12505398","filename":"HADOOP-7866.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-28T21:40:43.074+0000","size":1276,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12505398/HADOOP-7866.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"44023","customfield_12312823":null,"summary":"logging and gc JVM metrics should be provided as \"gauges\"","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12532998/comment/13158810","id":"13158810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Patch of JvmMetrics.java to provide these metrics as gauges.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-28T21:40:43.173+0000","updated":"2011-11-28T21:40:43.173+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12532998/comment/13158812","id":"13158812","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"On the left, there's the trending upwards \"counter\" metric. On the right, the gc events are much much more visible as spikes. Also, the gauge metrics don't trend up unless there's an actual event.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-28T21:45:39.841+0000","updated":"2011-11-28T21:45:39.841+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7866/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07wfz:"}}