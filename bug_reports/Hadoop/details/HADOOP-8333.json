{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12553385","self":"https://issues.apache.org/jira/rest/api/2/issue/12553385","key":"HADOOP-8333","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2012-07-06T21:37:58.296+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 06 21:37:58 UTC 2012","customfield_12310420":"237540","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-8333/watchers","watchCount":3,"isWatching":false},"created":"2012-04-30T16:49:14.020+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320152","id":"12320152","description":"maintenance release on branch-1.0","name":"1.0.2","archived":false,"released":true,"releaseDate":"2012-04-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-07-06T21:37:58.323+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311543","id":"12311543","name":"build","description":"Build scripts"}],"timeoriginalestimate":null,"description":"src/contrib/fuse-dfs build failure when building in IBM Java 6 environment. The message on the console when the build aborts is:\n [exec] /usr/bin/ld: cannot find -ljvm\n     [exec] collect2: ld returned 1 exit status\n     [exec] make[1]: *** [fuse_dfs] Error 1\n     [exec] make[1]: Leaving directory `/home/hadoop/branch-1.0_0427/src/contrib/fuse-dfs/src'\n     [exec] make: *** [all-recursive] Error 1\n\nThe reason this seems to be happening is because of the last line in src/contrib/fuse-dfs/src/Makefile.am\n\nAM_LDFLAGS= -L$(HADOOP_HOME)/build/libhdfs -lhdfs -L$(FUSE_HOME)/lib -lfuse -L$(JAVA_HOME)/jre/lib/$(OS_ARCH)/server -ljvm\n\nFor hadoop to build on IBM Java, this last line should read as follows since this is where the libjvm library resides\n\nAM_LDFLAGS= -L$(HADOOP_HOME)/build/libhdfs -lhdfs -L$(FUSE_HOME)/lib -lfuse -L$(JAVA_HOME)/jre/lib/$(OS_ARCH)/j9vm -ljvm\n\nIMO, Changes like the following will need to be made to src/contrib/fuse-dfs/configure.ac (?) to include changes similar to that in src/native/ to check for the appropriate JVM and configure the appropriate path for ljvm.\n\ndnl Check for '-ljvm'\nJNI_LDFLAGS=\"\"\nif test $JAVA_HOME != \"\"\nthen\n  JNI_LDFLAGS=\"-L$JAVA_HOME/jre/lib/$OS_ARCH/server\"\n  JVMSOPATH=`find $JAVA_HOME/jre/ -name libjvm.so | head -n 1`\n  JNI_LDFLAGS=\"$JNI_LDFLAGS -L`dirname $JVMSOPATH`\"\nfi\nldflags_bak=$LDFLAGS\nLDFLAGS=\"$LDFLAGS $JNI_LDFLAGS\"\nAC_CHECK_LIB([jvm], [JNI_GetCreatedJavaVMs])\nLDFLAGS=$ldflags_bak\nAC_SUBST([JNI_LDFLAGS])\n\n# Checks for header files.\ndnl Check for Ansi C headers\nAC_HEADER_STDC\n\ndnl Check for other standard C headers\nAC_CHECK_HEADERS([stdio.h stddef.h], [], AC_MSG_ERROR(Some system headers not found... please ensure their presence on your platform.))\n\ndnl Check for JNI headers\nJNI_CPPFLAGS=\"\"\nif test $JAVA_HOME != \"\"\nthen\n  for dir in `find $JAVA_HOME/include -follow -type d`\n  do\n    JNI_CPPFLAGS=\"$JNI_CPPFLAGS -I$dir\"\n  done\nfi\n\n\n\n\n\n\n \n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"43636","customfield_12312823":null,"summary":"src/contrib/fuse-dfs build fails on non-Sun JVM environments","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kumarr","name":"kumarr","key":"kumarr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kumar Ravi","active":true,"timeZone":"Pacific/Easter"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kumarr","name":"kumarr","key":"kumarr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kumar Ravi","active":true,"timeZone":"Pacific/Easter"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"IBM Java 6 ","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553385/comment/13408377","id":"13408377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"body":"Since HADOOP-8368 on trunk (which switched us from automake to CMake), this is not an issue on OpenJDK at least.  I realize that doesn't help much on branch-1 though...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-06T21:37:58.296+0000","updated":"2012-07-06T21:37:58.296+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-8333/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07u1z:"}}