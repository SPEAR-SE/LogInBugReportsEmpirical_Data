{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12406915","self":"https://issues.apache.org/jira/rest/api/2/issue/12406915","key":"HADOOP-4473","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2008-10-21T19:08:58.594+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 29 10:11:20 UTC 2008","customfield_12310420":"126569","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_685397259_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_1953427522","customfield_12312321":null,"resolutiondate":"2008-10-29T08:43:19.181+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-4473/watchers","watchCount":1,"isWatching":false},"created":"2008-10-21T10:20:01.922+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313296","id":"12313296","description":"","name":"0.17.2","archived":false,"released":true,"releaseDate":"2008-08-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T17:06:42.983+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"When I run bin/hive\nThen I get the message\n\n\njava.lang.NoClassDefFoundError: org/apache/hadoop/hive/ql/session/SessionState\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:247)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:148)\n        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)\n        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)\nCaused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.ql.session.SessionState\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        ... 7 more\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74433","customfield_12312823":null,"summary":"I Can't run bin/hive ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Redhat  hadoop-0.17.1","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12641531","id":"12641531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"body":"Should have worked.\n\nHave you set HADOOP_HOME and HIVE_HOME environment variables.\n\nAlso a dump of your environment would be great including classpaths.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-21T19:08:58.594+0000","updated":"2008-10-21T19:08:58.594+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12642395","id":"12642395","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"body":"I already setted HADOOP_HOME ,HIVE_HOME and added hadoop_site.xml to CLASSPATH\n\nBut \"bin/hive\" doesn't work ,either.\n\nThe error message is the same.\n\n\\-_\\-::","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-24T07:06:16.300+0000","updated":"2008-10-24T07:07:41.761+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643003","id":"12643003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"body":"I have noticed that I have to start hive from the contrib directory pwd /opt/hadoop/contrib\nhive/bin/hive give that a try.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-27T18:36:11.715+0000","updated":"2008-10-27T18:36:11.715+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643024","id":"12643024","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"body":"This seems to be some issue with your environment. I tried this on mine. The following is the output and bin/hive seems to work fine for me... I am not sure what is going on with your environment. Can you check or send is your classpath settings?\n\n[~]$ cd fb_mirror/\n[~/fb_mirror]$ curl http://mirror.facebook.com/facebook/hive/hadoop-0.17/dist.tar.gz > dist.tar.gz\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 8025k  100 8025k    0     0  5355k      0  0:00:01  0:00:01 --:--:-- 6078k\n[~/fb_mirror]$ ls\ndist.tar.gz\n[~/fb_mirror]$ gunzip dist.tar.gz \n[~/fb_mirror]$ ls\ndist.tar\n[~/fb_mirror]$ tar xvf dist.tar \ndist/\ndist/lib/\ndist/lib/py/\ndist/lib/py/hive_metastore/\ndist/lib/py/hive_metastore/ttypes.py\ndist/lib/py/hive_metastore/ThriftMetaStore-remote\ndist/lib/py/hive_metastore/ThriftHiveMetastore-remote\ndist/lib/py/hive_metastore/ThriftHiveMetastore.py\ndist/lib/py/hive_metastore/ThriftMetaStore.py\ndist/lib/py/hive_metastore/constants.py\ndist/lib/py/hive_metastore/__init__.py\ndist/lib/py/__init__.py\ndist/lib/py/org_apache_hadoop_hive_serde/\ndist/lib/py/org_apache_hadoop_hive_serde/__init__.py\ndist/lib/py/org_apache_hadoop_hive_serde/ttypes.py\ndist/lib/py/org_apache_hadoop_hive_serde/constants.py\ndist/lib/php/\ndist/lib/php/serde_types.php\ndist/lib/php/ThriftMetaStore.php\ndist/lib/php/serde_constants.php\ndist/lib/php/hive_metastore_types.php\ndist/lib/php/hive_metastore_constants.php\ndist/lib/php/ThriftHiveMetastore.php\ndist/lib/hive_metastore.jar\ndist/lib/jpox-rdbms-1.2.2.jar\ndist/lib/hive_common.jar\ndist/lib/jpox-core-1.2.2.jar\ndist/lib/stringtemplate-3.1b1.jar\ndist/lib/libfb303.jar\ndist/lib/velocity-1.5.jar\ndist/lib/jpox-enhancer-1.2.2.jar\ndist/lib/derby.jar\ndist/lib/antlr-runtime-3.0.1.jar\ndist/lib/commons-collections-3.2.1.jar\ndist/lib/jline-0.9.94.jar\ndist/lib/libthrift.jar\ndist/lib/hive_cli.jar\ndist/lib/asm-3.1.jar\ndist/lib/hive_exec.jar\ndist/lib/TestSerDe.jar\ndist/lib/commons-jexl-1.1.jar\ndist/lib/jdo2-api-2.1.jar\ndist/lib/commons-lang-2.4.jar\ndist/conf/\ndist/conf/hive-default.xml\ndist/conf/hive-log4j.properties\ndist/conf/jpox.properties\ndist/bin/\ndist/bin/hive\ndist/bin/hive-config.sh\ndist/examples/\ndist/examples/files/\ndist/examples/files/kv2.txt\ndist/examples/files/kv1.txt\ndist/examples/files/kv1.string-sorted.txt\ndist/examples/files/kv1.val.sorted.txt\ndist/examples/files/lt100.sorted.txt\ndist/examples/files/lt100.txt\ndist/examples/files/kv1_cc.txt\ndist/examples/files/kv1kv2.cogroup.txt\ndist/examples/files/kv1_cb.txt\ndist/examples/files/kv1.seq\ndist/examples/files/kv4.txt\ndist/examples/files/complex.seq\ndist/examples/files/TestSerDe.jar\ndist/examples/files/kv3.txt\ndist/examples/queries/\ndist/examples/queries/sample1.q\ndist/examples/queries/input9.q\ndist/examples/queries/groupby6.q\ndist/examples/queries/join3.q\ndist/examples/queries/input8.q\ndist/examples/queries/groupby5.q\ndist/examples/queries/union.q\ndist/examples/queries/join2.q\ndist/examples/queries/input7.q\ndist/examples/queries/groupby4.q\ndist/examples/queries/sample7.q\ndist/examples/queries/join1.q\ndist/examples/queries/input6.q\ndist/examples/queries/groupby3.q\ndist/examples/queries/sample6.q\ndist/examples/queries/input_testxpath.q\ndist/examples/queries/input5.q\ndist/examples/queries/groupby2.q\ndist/examples/queries/udf1.q\ndist/examples/queries/join8.q\ndist/examples/queries/input_part1.q\ndist/examples/queries/sample5.q\ndist/examples/queries/input_testsequencefile.q\ndist/examples/queries/input4.q\ndist/examples/queries/groupby1.q\ndist/examples/queries/join7.q\ndist/examples/queries/sample4.q\ndist/examples/queries/input_testxpath2.q\ndist/examples/queries/input3.q\ndist/examples/queries/join6.q\ndist/examples/queries/subq.q\ndist/examples/queries/sample3.q\ndist/examples/queries/cast1.q\ndist/examples/queries/input2.q\ndist/examples/queries/join5.q\ndist/examples/queries/sample2.q\ndist/examples/queries/input1.q\ndist/examples/queries/case_sensitivity.q\ndist/examples/queries/join4.q\ndist/README\n[~/fb_mirror]$ ls\ndist  dist.tar\n[~/fb_mirror]$ cd dist\n[~/fb_mirror/dist]$ ls\nbin  conf  examples  lib  README\n[~/fb_mirror/dist]$ ls\nbin  conf  examples  lib  README\n[athusoo@dev053.snc1 ~/fb_mirror/dist]$ bin/hive   \nCannot find hadoop installation: $HADOOP_HOME must be set or hadoop must be in the path\n[~/fb_mirror/dist]$ ls /mnt/vol/hadoop/bin\n1                hadoop                   index.html       slaves.sh                 start-dfs.sh                 stop-all.sh       stop-mapred.sh\ncheck_nodes.sh   hadoop2~                 index.html.1     start-all.sh              start-dfs.sh~                stop-balancer.sh  timed_command\ncheck_nodes.sh~  hadoop-config.sh         index.html.2     start-balancer.sh         start-mapred.nojob.sh~       stop-cluster.sh\ndecommission.sh  hadoop-daemon.sh         index.html.3     start-cluster-mapred.sh~  start-mapred.sh              stop-cluster.sh~\nfsck.sh          hadoop-daemons.sh        rcc              start-cluster.sh          start-single-datanode.sh     stop-dfs.sh\nfsck.sh~         hadoop-single-daemon.sh  single-slave.sh  start-cluster.sh~         start-single-tasktracker.sh  stop-dfs.sh~\n[~/fb_mirror/dist]$ ls /mnt/vol/hadoop/bin/hadoop\n/mnt/vol/hive/stable/cluster/bin/hadoop\n[~/fb_mirror/dist]$ export HADOOP_HOME=/mnt/vol/hadoop\n[~/fb_mirror/dist]$ bin/hive \nhive> ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-27T19:24:51.515+0000","updated":"2008-10-27T19:24:51.515+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643026","id":"12643026","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"body":"Downgrading to critical as this seems to be specific to the users environment and has not been reported by a number of other users.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-27T19:25:58.342+0000","updated":"2008-10-27T19:25:58.342+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643155","id":"12643155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"body":"Hi I tried to install again,but the answer is the same.\nSo I show the step and my environment . And thank you for your help\n\n[ Install Step]\n[root@araca1 hive]# cd /hadoop-0.17.2.1/contrib/hive\n\n[root@araca1 hive]# tar -zxvf ./dist.tar.gz\ndist/\ndist/lib/\ndist/lib/py/\ndist/lib/py/hive_metastore/\ndist/lib/py/hive_metastore/ttypes.py\ndist/lib/py/hive_metastore/ThriftMetaStore-remote\ndist/lib/py/hive_metastore/ThriftHiveMetastore-remote\ndist/lib/py/hive_metastore/ThriftHiveMetastore.py\ndist/lib/py/hive_metastore/ThriftMetaStore.py\ndist/lib/py/hive_metastore/constants.py\ndist/lib/py/hive_metastore/__init__.py\ndist/lib/py/__init__.py\ndist/lib/py/org_apache_hadoop_hive_serde/\ndist/lib/py/org_apache_hadoop_hive_serde/__init__.py\ndist/lib/py/org_apache_hadoop_hive_serde/ttypes.py\ndist/lib/py/org_apache_hadoop_hive_serde/constants.py\ndist/lib/php/\ndist/lib/php/serde_types.php\ndist/lib/php/ThriftMetaStore.php\ndist/lib/php/serde_constants.php\ndist/lib/php/hive_metastore_types.php\ndist/lib/php/hive_metastore_constants.php\ndist/lib/php/ThriftHiveMetastore.php\ndist/lib/hive_metastore.jar\ndist/lib/jpox-rdbms-1.2.2.jar\ndist/lib/hive_common.jar\ndist/lib/jpox-core-1.2.2.jar\ndist/lib/stringtemplate-3.1b1.jar\ndist/lib/libfb303.jar\ndist/lib/velocity-1.5.jar\ndist/lib/jpox-enhancer-1.2.2.jar\ndist/lib/derby.jar\ndist/lib/antlr-runtime-3.0.1.jar\ndist/lib/commons-collections-3.2.1.jar\ndist/lib/jline-0.9.94.jar\ndist/lib/libthrift.jar\ndist/lib/hive_cli.jar\ndist/lib/asm-3.1.jar\ndist/lib/hive_exec.jar\ndist/lib/TestSerDe.jar\ndist/lib/commons-jexl-1.1.jar\ndist/lib/jdo2-api-2.1.jar\ndist/lib/commons-lang-2.4.jar\ndist/conf/\ndist/conf/hive-default.xml\ndist/conf/hive-log4j.properties\ndist/conf/jpox.properties\ndist/bin/\ndist/bin/hive\ndist/bin/hive-config.sh\ndist/examples/\ndist/examples/files/\ndist/examples/files/kv2.txt\ndist/examples/files/kv1.txt\ndist/examples/files/kv1.string-sorted.txt\ndist/examples/files/kv1.val.sorted.txt\ndist/examples/files/lt100.sorted.txt\ndist/examples/files/lt100.txt\ndist/examples/files/kv1_cc.txt\ndist/examples/files/kv1kv2.cogroup.txt\ndist/examples/files/kv1_cb.txt\ndist/examples/files/kv1.seq\ndist/examples/files/kv4.txt\ndist/examples/files/complex.seq\ndist/examples/files/TestSerDe.jar\ndist/examples/files/kv3.txt\ndist/examples/queries/\ndist/examples/queries/sample1.q\ndist/examples/queries/input9.q\ndist/examples/queries/groupby6.q\ndist/examples/queries/join3.q\ndist/examples/queries/input8.q\ndist/examples/queries/groupby5.q\ndist/examples/queries/udf4.q\ndist/examples/queries/union.q\ndist/examples/queries/join2.q\ndist/examples/queries/input7.q\ndist/examples/queries/groupby4.q\ndist/examples/queries/sample7.q\ndist/examples/queries/join1.q\ndist/examples/queries/input6.q\ndist/examples/queries/groupby3.q\ndist/examples/queries/sample6.q\ndist/examples/queries/input_testxpath.q\ndist/examples/queries/input5.q\ndist/examples/queries/groupby2.q\ndist/examples/queries/udf1.q\ndist/examples/queries/join8.q\ndist/examples/queries/input_part1.q\ndist/examples/queries/sample5.q\ndist/examples/queries/input_testsequencefile.q\ndist/examples/queries/input4.q\ndist/examples/queries/groupby1.q\ndist/examples/queries/join7.q\ndist/examples/queries/sample4.q\ndist/examples/queries/input_testxpath2.q\ndist/examples/queries/input3.q\ndist/examples/queries/join6.q\ndist/examples/queries/subq.q\ndist/examples/queries/sample3.q\ndist/examples/queries/cast1.q\ndist/examples/queries/input2.q\ndist/examples/queries/join5.q\ndist/examples/queries/sample2.q\ndist/examples/queries/input1.q\ndist/examples/queries/case_sensitivity.q\ndist/examples/queries/join4.q\ndist/README\n\n\n[My environment ]\n[root@araca1 ~]# echo $HADOOP_HOME\n/hadoop-0.17.2.1\n[root@araca1 ~]# echo $HIVE_HOME\n/hadoop-0.17.2.1/contrib/hive/dist\n[root@araca1 ~]# echo $CLASSPATH\n.:/jdk1.6.0_07/lib:/jdk1.6.0_07/lib/ojdbc14.jar:/hadoop-0.17.2.1/lib/:/hadoop-0.17.2.1/:/hadoop-0.17.2.1/hadoop-0.17.2.1-core.jar:/hadoop-0.17.2.1/conf/:/hadoop-0.17.2.1/lib/log4j-1.2.13.jar:/hadoop-0.17.2.1/example.jar:/hadoop-0.17.2.1/contrib/hbase-0.2.1/lib/:/hadoop-0.17.2.1/contrib/hbase-0.2.1/hbase-0.2.1.jar:/hadoop-0.17.2.1/contrib/hbase-0.2.1/lib/:/hadoop-0.17.2.1/contrib/hbase-0.2.1/lib/junit-3.8.1.jar:/hadoop-0.17.2.1/contrib/hbase-0.2.1/lib/log4j-1.2.13.jar:/hadoop-0.17.2.1/contrib/hbase-0.2.1/lib/commons-logging-1.0.4.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/:/hadoop-0.17.2.1/contrib/hive/dist/lib/antlr-runtime-3.0.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/asm-3.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/commons-collections-3.2.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/commons-jexl-1.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/commons-lang-2.4.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/derby.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/hive_cli.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/hive_common.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/hive_exec.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/hive_metastore.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/jdo2-api-2.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/jline-0.9.94.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/jpox-core-1.2.2.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/jpox-enhancer-1.2.2.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/jpox-rdbms-1.2.2.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/libfb303.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/libthrift.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/stringtemplate-3.1b1.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/TestSerDe.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/velocity-1.5.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/derbyclient.jar:/hadoop-0.17.2.1/contrib/hive/dist/lib/derbytools.jar\n\n[Run hive]\n\n[root@araca1 ~]# cd $HIVE_HOME\n[root@araca1 dist]# pwd\n/hadoop-0.17.2.1/contrib/hive/dist\n[root@araca1 dist]# ./bin/hive\njava.lang.NoClassDefFoundError: org/apache/hadoop/hive/ql/session/SessionState\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:247)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:148)\n        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)\n        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)\nCaused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.ql.session.SessionState\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        ... 7 more\n\n[root@araca1 dist]# jps\n15464 NameNode\n15587 DataNode\n15735 SecondaryNameNode\n15833 JobTracker\n29244 Jps\n15973 TaskTracker\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-28T07:38:43.504+0000","updated":"2008-10-28T07:38:43.504+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643402","id":"12643402","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi YihueyChyi,\n\nCan you uncomment the last 4 \"echo\" lines from bin/hive (as following) and run again?\n\necho \"CLASSPATH=\"$CLASSPATH\necho \"AUX_LIB_PATH\"=$AUX_PARAM\necho \"HADOOP_OPTS=\"$HADOOP_OPTS\necho $HADOOP jar $AUX_JARS_CMD_LINE ${HIVE_LIB}/hive_cli.jar $CLASS $HIVE_OPTS \"$@\"\n\nWhat did it show?\n\nZheng\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-10-29T03:10:18.419+0000","updated":"2008-10-29T03:10:18.419+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643428","id":"12643428","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"body":"Hi Zheng,\nIt show\n\nCLASSPATH=/hadoop-0.17.2.1/contrib/hive/dist/bin/../conf:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/antlr-runtime-3.0.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/asm-3.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/commons-collections-3.2.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/commons-jexl-1.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/commons-lang-2.4.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/derby.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/hive_cli.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/hive_common.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/hive_exec.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/hive_metastore.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/jdo2-api-2.1.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/jline-0.9.94.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/jpox-core-1.2.2.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/jpox-enhancer-1.2.2.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/jpox-rdbms-1.2.2.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/libfb303.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/libthrift.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/stringtemplate-3.1b1.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/TestSerDe.jar:/hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/velocity-1.5.jar:\nAUX_LIB_PATH=\nHADOOP_OPTS=\n/hadoop-0.17.2.1/bin/hadoop jar /hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/hive_cli.jar org.apache.hadoop.hive.cli.CliDriver -hiveconf hadoop.bin.path=/hadoop-0.17.2.1/bin/hadoop\njava.lang.NoClassDefFoundError: org/apache/hadoop/hive/ql/session/SessionState\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:247)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:148)\n        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)\n        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)\nCaused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.ql.session.SessionState\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        ... 7 more\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-29T07:11:30.051+0000","updated":"2008-10-29T07:11:30.051+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643429","id":"12643429","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"The class org.apache.hadoop.hive.ql.session.SessionState is in /hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/hive_exec.jar\nThat jar file is in the classpath as printed by bin/hive.\n\nCan you open /hadoop-0.17.2.1/bin/hadoop and add one line before the last line (The echo line):\n...\n# run it\necho \"$JAVA\" $JAVA_HEAP_MAX $HADOOP_OPTS -classpath \"$CLASSPATH\" $CLASS \"$@\"\nexec \"$JAVA\" $JAVA_HEAP_MAX $HADOOP_OPTS -classpath \"$CLASSPATH\" $CLASS \"$@\"\n\nLet's see what is actually passed to Java.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-10-29T07:30:48.664+0000","updated":"2008-10-29T07:30:48.664+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643430","id":"12643430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"body":"Add the line \n\nThe result:\n/jdk1.6.0_07/bin/java -Xmx1000m -Dhadoop.log.dir=/hadoop-0.17.2.1/logs -Dhadoop.log.file=hadoop.log -Dhadoop.home.dir=/hadoop-0.17.2.1 -Dhadoop.id.str= -Dhadoop.root.logger=INFO,console -Djava.library.path=/hadoop-0.17.2.1/lib/native/Linux-i386-32 -classpath /hadoop-0.17.2.1/bin/../conf:/jdk1.6.0_07/lib/tools.jar:/hadoop-0.17.2.1:/hadoop-0.17.2.1/hadoop-0.17.2.1-core.jar:/hadoop-0.17.2.1/lib/commons-cli-2.0-SNAPSHOT.jar:/hadoop-0.17.2.1/lib/commons-codec-1.3.jar:/hadoop-0.17.2.1/lib/commons-httpclient-3.0.1.jar:/hadoop-0.17.2.1/lib/commons-logging-1.0.4.jar:/hadoop-0.17.2.1/lib/commons-logging-api-1.0.4.jar:/hadoop-0.17.2.1/lib/jets3t-0.5.0.jar:/hadoop-0.17.2.1/lib/jetty-5.1.4.jar:/hadoop-0.17.2.1/lib/junit-3.8.1.jar:/hadoop-0.17.2.1/lib/kfs-0.1.jar:/hadoop-0.17.2.1/lib/log4j-1.2.13.jar:/hadoop-0.17.2.1/lib/servlet-api.jar:/hadoop-0.17.2.1/lib/xmlenc-0.52.jar:/hadoop-0.17.2.1/lib/jetty-ext/commons-el.jar:/hadoop-0.17.2.1/lib/jetty-ext/jasper-compiler.jar:/hadoop-0.17.2.1/lib/jetty-ext/jasper-runtime.jar:/hadoop-0.17.2.1/lib/jetty-ext/jsp-api.jar:.:/jdk1.6.0_07/lib:/hadoop-0.17.2.1/conf://hadoop-0.17.2.1/lib:/hadoop-0.17.2.1/contrib/hbase-0.2.1/build/test:/hadoop-0.17.2.1/contrib/hbase-0.2.1/build/hadoop-0.16.0-hbase.jar:/hadoop-0.17.2.1/contrib/hbase-0.2.1/conf:/hadoop-0.17.2.1/contrib/hbase-0.2.1/hbase-0.2.1.jar:/hadoop-0.17.2.1/hadoop-0.17.2.1-core.jar org.apache.hadoop.mapred.JobShell /hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/hive_cli.jar org.apache.hadoop.hive.cli.CliDriver -hiveconf hadoop.bin.path=/hadoop-0.17.2.1/bin/hadoop\njava.lang.NoClassDefFoundError: org/apache/hadoop/hive/ql/session/SessionState\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:247)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:148)\n        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)\n        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)\nCaused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.ql.session.SessionState\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        ... 7 more\n\nEven I copy hive_exec.jar to $HADOOP_HOME/lib/\nThe situation is the same. \n\n[root@araca1 dist]# ./bin/hive\n/jdk1.6.0_07/bin/java -Xmx1000m -Dhadoop.log.dir=/hadoop-0.17.1/logs -Dhadoop.log.file=hadoop.log -Dhadoop.home.dir=/hadoop-0.17.1 -Dhadoop.id.str= -Dhadoop.root.logger=INFO,console -Djava.library.path=/hadoop-0.17.1/lib/native/Linux-i386-32 -classpath /hadoop-0.17.2.1/bin/../conf:/jdk1.6.0_07/lib/tools.jar:/hadoop-0.17.1:/hadoop-0.17.1/hadoop-0.17.1-core.jar:/hadoop-0.17.1/lib/commons-cli-2.0-SNAPSHOT.jar:/hadoop-0.17.1/lib/commons-codec-1.3.jar:/hadoop-0.17.1/lib/commons-httpclient-3.0.1.jar:/hadoop-0.17.1/lib/commons-logging-1.0.4.jar:/hadoop-0.17.1/lib/commons-logging-api-1.0.4.jar:/hadoop-0.17.1/lib/jets3t-0.5.0.jar:/hadoop-0.17.1/lib/jetty-5.1.4.jar:/hadoop-0.17.1/lib/junit-3.8.1.jar:/hadoop-0.17.1/lib/kfs-0.1.jar:/hadoop-0.17.1/lib/log4j-1.2.13.jar:/hadoop-0.17.1/lib/servlet-api.jar:/hadoop-0.17.1/lib/xmlenc-0.52.jar:/hadoop-0.17.1/lib/jetty-ext/commons-el.jar:/hadoop-0.17.1/lib/jetty-ext/jasper-compiler.jar:/hadoop-0.17.1/lib/jetty-ext/jasper-runtime.jar:/hadoop-0.17.1/lib/jetty-ext/jsp-api.jar:.:/jdk1.6.0_07/lib:/hadoop-0.17.1/conf:/hadoop-0.17.1/lib:/hadoop-0.17.1/contrib/hbase-0.2.1/build/test:/hadoop-0.17.1/contrib/hbase-0.2.1/build/hadoop-0.16.0-hbase.jar:/hadoop-0.17.1/contrib/hbase-0.2.1/conf:/hadoop-0.17.1/contrib/hbase-0.2.1/hbase-0.2.1.jar:/hadoop-0.17.1/hadoop-0.17.1-core.jar org.apache.hadoop.mapred.JobShell /hadoop-0.17.2.1/contrib/hive/dist/bin/../lib/hive_cli.jar org.apache.hadoop.hive.cli.CliDriver -hiveconf hadoop.bin.path=/hadoop-0.17.2.1/bin/hadoop\njava.lang.NoClassDefFoundError: org/apache/hadoop/hive/ql/session/SessionState\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:247)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:148)\n        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)\n        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)\nCaused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.ql.session.SessionState\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        ... 7 more\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-29T07:45:08.430+0000","updated":"2008-10-29T07:45:08.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643431","id":"12643431","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi YihueyChyi,\n\nIt seems the problem is clear now. The java command does not contains hive_exec.jar in the classpath.\n\nWhat bin/hive does is to put all necessary jars in an environment variable HADOOP_CLASSPATH, and then call bin/hadoop.\nbin/hadoop is supposed to pick HADOOP_CLASSPATH up.\n\nMy guess is that you modified bin/hadoop or bin/hadoop-env.sh and have a line like:\n\nexport HADOOP_CLASSPATH=\"xxx\"\n\nIs that correct? If so, please do:\nexport HADOOP_CLASSPATH=\"xxx:$HADOOP_CLASSPATH\"\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-10-29T08:00:50.899+0000","updated":"2008-10-29T08:00:50.899+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643432","id":"12643432","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"body":"Hi Zheng ,\n\nOh !! It's working.\nI add a line \" export HADOOP_CLASSPATH=$CLASSPATH:$HADOOP_CLASSPATH \" to  bin/hadoop-env.sh.\n\n\nThe old version \n export HADOOP_CLASSPATH=.:$JAVA_HOME/lib:$HADOOP_HOME/conf:/$HADOOP_HOME/lib:$HBASE_HOME/build/test:$HBASE_HOME/build/hadoop-0.16.0-hbase.jar:$HBASE_HOME/conf:$HBASE_HOME/hbase-0.2.1.jar:$HADOOP_HOME/hadoop-0.17.2.1-core.jar\n\nThe new version\n export HADOOP_CLASSPATH=.:$JAVA_HOME/lib:$HADOOP_HOME/conf:/$HADOOP_HOME/lib:$HBASE_HOME/build/test:$HBASE_HOME/build/hadoop-0.16.0-hbase.jar:$HBASE_HOME/conf:$HBASE_HOME/hbase-0.2.1.jar:$HADOOP_HOME/hadoop-0.17.2.1-core.jar\n export HADOOP_CLASSPATH=$CLASSPATH:$HADOOP_CLASSPATH\n\n\nThank you very much.\nThe problems are many days.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-29T08:32:53.786+0000","updated":"2008-10-29T08:32:53.786+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643437","id":"12643437","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"We found the problem in the customized hadoop code.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-10-29T08:43:19.161+0000","updated":"2008-10-29T08:43:19.161+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643439","id":"12643439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Glad it helps. To tell you the truth, I made exactly the same mistake before.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-10-29T08:44:58.134+0000","updated":"2008-10-29T08:44:58.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12406915/comment/12643452","id":"12643452","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"body":"Thank you a lot.\nI traced the hive_exec.jar code and check hadoop ,hadoop-env.sh and environment variables ,but I didn't think about $HADOOP_CLASSPATH.\n\nSo thank you again.\n\n\\^o\\^\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yihuey","name":"yihuey","key":"yihuey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"YihueyChyi","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-29T10:11:20.342+0000","updated":"2008-10-29T10:11:39.953+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-4473/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d41z:"}}