{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12415375","self":"https://issues.apache.org/jira/rest/api/2/issue/12415375","key":"HADOOP-5307","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2009-02-23T19:39:45.349+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Mar 17 05:39:27 UTC 2009","customfield_12310420":"78030","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_1383548742_*|*_1_*:*_1_*:*_258675_*|*_5_*:*_2_*:*_3810904_*|*_4_*:*_1_*:*_420546777","customfield_12312321":null,"resolutiondate":"2009-03-16T14:18:26.098+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-5307/watchers","watchCount":1,"isWatching":false},"created":"2009-02-23T16:02:21.039+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313563","id":"12313563","description":"","name":"0.21.0","archived":false,"released":true,"releaseDate":"2010-08-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-04-23T19:25:04.011+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310740","id":"12310740","name":"util","description":""}],"timeoriginalestimate":null,"description":"StringUtils#arrayToString() converts String array to a String of comma separated elements. If the String array includes null values, these are recovered as \"null\" (literal) from getStrings() method, which eventually causes configuration issues. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12400765","id":"12400765","filename":"h5307_v1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-02-23T16:06:22.091+0000","size":6295,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12400765/h5307_v1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"102570","customfield_12312823":null,"summary":"Fix null value handling in StringUtils#arrayToString() and #getStrings()","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12675960","id":"12675960","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching patch. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-02-23T16:06:22.197+0000","updated":"2009-02-23T16:06:22.197+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12676032","id":"12676032","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12400765/h5307_v1.patch\n  against trunk revision 746970.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 12 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs warnings.\n\n    +1 Eclipse classpath. The patch retains Eclipse classpath integrity.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/3903/testReport/\nFindbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/3903/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nCheckstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/3903/artifact/trunk/build/test/checkstyle-errors.html\nConsole output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/3903/console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-23T19:39:45.349+0000","updated":"2009-02-23T19:39:45.349+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12680910","id":"12680910","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"body":"I committed this. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-03-11T16:25:48.330+0000","updated":"2009-03-11T16:25:48.330+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12680936","id":"12680936","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"I reverted this for two procedural reasons:\n# The patch never received a +1 or review\n# Committing it all the way back to 0.19 is arguably appropriate, particularly since it's an incompatible change\n\nAs for the content of the patch, adding a special value parsed as \"null\" without escaping literal instances of it in a utility class is not good. The use case is also unclear; where is this causing problems, configuration or otherwise?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-03-11T17:29:19.319+0000","updated":"2009-03-11T17:29:19.319+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12681345","id":"12681345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"body":"The issue occurs in the context of storing/restoring an array(with possible null values) in the configuration. The specific use case arose after HADOOP-4955, in which we store the column names in the configuration for DB access, however the names of the columns are not always available to the job, thus are passed as null array. \n\nThis issue fixes the issue introduced by HADOOP-4955(which wad committed to 0.19), I guess it is appropriate for this to be in 0.19. \n\nAs for escaping literal instances of \"__null__\", we can introduce an escaping mechanism, however it will not be backwards compatible, since \"any\" form of escaping the value will result in some literal matching the value which was not set by StringUtils#arrayToStrings(). (For example setting the value by hand from the configuration). \n\nI believe that using a pragmatical value for representing nulls, which is extremely unlikely to occur, does not introduce a backward incompatibility at all. I think classifying this as an incompatible change would only introduce noise to the long list of incompatible changes. \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-03-12T14:57:56.598+0000","updated":"2009-03-12T14:57:56.598+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12681555","id":"12681555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"# bq. I believe that *using a pragmatical value for representing nulls, [...], does not introduce a backward incompatibility at all*.\n# bq. As for escaping literal instances of \"\\_\\_null\\_\\_\", *we can introduce an escaping mechanism, however it will not be backwards compatible*, since \"any\" form of escaping the value will result in some literal matching the value which was not set by StringUtils#arrayToStrings().\n\nThese read as mutually exclusive statements. If escaping \"\\_\\_null\\_\\_\" is backwards-incompatible, then escaping {{null}} is, too. That any escape sequence needs a way to represent itself literally isn't controversial. Further, the change is to a public utility class: even if we defined \"incompatible\" statistically, the frequency of either case is unknown since its domain is undefined.\n\nI'm a little confused about why StringUtils needs its own escape for a null reference. Converting an array of String with a null reference to a String with a special symbol for null is odd. It's cleaner to throw from StringUtils if it gets {{null}} and require callers to handle escaping.\n\nbq. The issue occurs in the context of storing/restoring an array(with possible null values) in the configuration. The specific use case arose after HADOOP-4955 [...]\n\nHADOOP-4955 probably should not have been committed to 0.19.1. It reads as an improvement, not a fix to a regression.\n\nThat said, if HADOOP-4955 is the cause, then this _is_ a regression in 0.19.1. I'm not sure what to do about this. Since the regression is in DBOutputFormat, wouldn't it make sense to fix this there?\n\nOther:\n* What was committed didn't match the patch posted here. There was a conflict in the imports for StringUtils.\n* One of the cases added in testArrayToStringToArray (nullArr3) doesn't have a corresponding test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-03-13T00:12:04.207+0000","updated":"2009-03-13T00:12:04.207+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12681732","id":"12681732","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. These read as mutually exclusive statements. If escaping \"__null__\" is backwards-incompatible, then escaping null is, too. bq. That any escape sequence needs a way to represent itself literally isn't controversial. Further, the change is to a public utility class: even if we defined \"incompatible\" statistically, the frequency of either case is unknown since its domain is undefined.\nOf course the patch is technically backwards-incompatible, what I say is that, the frequency is expected to be so small that it is negligible.\n\nbq. I'm a little confused about why StringUtils needs its own escape for a null reference. Converting an array of String with a null reference to a String with a special symbol for null is odd. It's cleaner to throw from StringUtils if it gets null and require callers to handle escaping.\npassing an array, possibly containing null values seems to me generic enough to be introduced in StringUtils rather than a custom solution in the context(DBOutputFormat).\n\nbq. HADOOP-4955 probably should not have been committed to 0.19.1. It reads as an improvement, not a fix to a regression.\nThe API indicates to use the supplied column names, when in fact it did not, so 4955 is a bug fix, fixing the expected behavior from the API, rather than an improvement, introducing a new API. \n\nbq. What was committed didn't match the patch posted here. There was a conflict in the imports for StringUtils.\nThe patch is committed w/o changes to import statements. Committing a patch with minor changes is not uncommon. However I should have stated that. \nbq. One of the cases added in testArrayToStringToArray (nullArr3) doesn't have a corresponding test.\nWill fix\n\nAt this point I think we can continue with the patch in three ways : \n1. Introduce new String[] -> String, and String -> String[] array methods handling possible null values. \n2. Mark the patch incompatible and commit this one\n3. introduce a new API to set only the number of columns(not the names) in the DBConfiguration. However this does not fix the passing null values in configuration problem, if there is such. \n\nWhat would you suggest? \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-03-13T14:39:51.437+0000","updated":"2009-03-13T14:39:51.437+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12681768","id":"12681768","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-trunk #778 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/778/])\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2009-03-13T15:05:16.820+0000","updated":"2009-03-13T15:05:16.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12681959","id":"12681959","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Of course the patch is technically backwards-incompatible, what I say is that, the frequency is expected to be so small that it is negligible.\n\nNeither of us has enough data to assert anything about the frequency of any case because it's a public class. While my intuition matches yours, \"incompatible change\" isn't a statistical definition, let alone one based on our expectations.\n\nbq. passing an array, possibly containing null values seems to me generic enough to be introduced in StringUtils rather than a custom solution in the context(DBOutputFormat).\n\nI disagree. By supporting an escape for null references, this is defining a serialization for arrays of String, rather than representing an array of String in a single String. For this, the Stringifier seems like a more appropriate choice than changing the semantics of a method on StringUtils.\n\nbq. The API indicates to use the supplied column names, when in fact it did not, so 4955 is a bug fix, fixing the expected behavior from the API, rather than an improvement, introducing a new API.\n\nI see. From the description, it sounded like this was adding functionality by using the fields provided. I don't think adding a new API is necessary to differentiate an improvement from a bug; it's sufficient to change functionality. If the intent was to use them, then OK.\n\nbq. What would you suggest? \n\nNot sure. Since this seems to be serializing an array in and out of configs, I'm leaning towards the Stringifier work as a solution local to DBConfiguration. Would that work?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-03-14T00:38:42.251+0000","updated":"2009-03-14T00:38:42.251+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12682323","id":"12682323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Neither of us has enough data to assert anything about the frequency of any case because it's a public class. While my intuition matches yours, \"incompatible change\" isn't a statistical definition, let alone one based on our expectations.\nWish we had resolved HADOOP-5073, which will hopefully classify the \"gray areas\" in the code.\nbq. Not sure. Since this seems to be serializing an array in and out of configs, I'm leaning towards the Stringifier work as a solution local to DBConfiguration. Would that work?\nI have opened HADOOP-5500, to fix the issue in DB context. I will close this one as won't fix. If any other use case occurs for stringifying possible null object(s), we can reopen this one. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-03-16T14:17:35.401+0000","updated":"2009-03-16T16:17:57.282+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12415375/comment/12682563","id":"12682563","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Wish we had resolved HADOOP-5073, which will hopefully classify the \"gray areas\" in the code.\n\nAgreed. HADOOP-5073 is a necessary prerequisite for moving to 1.0, particularly for any remaining Java-public APIs.\n\nbq. I have opened HADOOP-5500, to fix the issue in DB context. I will close this one as won't fix. If any other use case occurs for stringifying possible null object(s), we can reopen this one.\n\nSounds fair.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-03-17T05:39:27.049+0000","updated":"2009-03-17T05:39:27.049+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-5307/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0hwrj:"}}