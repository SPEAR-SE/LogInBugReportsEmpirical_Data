{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12405081","self":"https://issues.apache.org/jira/rest/api/2/issue/12405081","key":"HADOOP-4264","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2008-09-25T07:09:10.464+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 01 17:39:16 UTC 2008","customfield_12310420":"126428","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_183459530601_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-18T23:46:02.784+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-4264/watchers","watchCount":4,"isWatching":false},"created":"2008-09-24T14:47:12.206+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313211","id":"12313211","description":"","name":"0.19.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-07-18T23:46:02.804+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310687","id":"12310687","name":"io","description":""},{"self":"https://issues.apache.org/jira/rest/api/2/component/12311440","id":"12311440","name":"test","description":"Testing support software"}],"timeoriginalestimate":null,"description":"On executing following command : \nbin/hadoop jar ~/hadoop/hadoop-0.19.0-test.jar TestDFSIO -write -nrFiles 990 -fileSize 320     \n\nThis error occurs:\n08/09/24 06:15:03 INFO mapred.JobClient:  map 98% reduce 32%\njava.io.IOException: Job failed!\n\tat org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1201)\n\tat org.apache.hadoop.fs.TestDFSIO.runIOTest(TestDFSIO.java:236)\n\tat org.apache.hadoop.fs.TestDFSIO.writeTest(TestDFSIO.java:218)\n\tat org.apache.hadoop.fs.TestDFSIO.main(TestDFSIO.java:354)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)\n\tat org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)\n\tat org.apache.hadoop.test.AllTestDriver.main(AllTestDriver.java:77)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:165)\n\tat org.apache.hadoop.mapred.JobShell.run(JobShell.java:54)\n\tat org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n\tat org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)\n\tat org.apache.hadoop.mapred.JobShell.main(JobShell.java:68)\n\nOn looking at hadoop logs, It seems that file names are clashing\n\n2008-09-24 06:21:41,618 INFO org.apache.hadoop.mapred.JobTracker: Removed completed task 'attempt_200809240600_0005_m_000802_2_1222236048515' from 'tracker_xxxx/client x.x.x.x:xxxxx'\n2008-09-24 06:21:41,627 INFO org.apache.hadoop.mapred.JobTracker: Adding task 'attempt_200809240600_0005_m_000802_4_1222236048515' to tip task_200809240600_0005_m_000802, for tracker 'tracker_xxxx/client x.x.x.x:xxxxx'\n2008-09-24 06:21:41,627 INFO org.apache.hadoop.mapred.JobInProgress: Choosing rack-local task task_200809240600_0005_m_000802\n2008-09-24 06:21:41,724 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_200809240600_0005_m_000900_2_1222236048515: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hdfs.protocol.AlreadyBeingCreatedException: failed to create file /benchmarks/TestDFSIO/io_data/test_io_20 for DFSClient_attempt_200809240600_0005_m_000900_2_1222236048515 on client client x.x.x.x, because this file is already being created by DFSClient_attempt_200809240600_0005_m_000900_0_1222236048515 on client x.x.x.x\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"104443","customfield_12312823":null,"summary":"DFSIO is failing on 500 nodes cluster","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sumanshg","name":"sumanshg","key":"sumanshg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suman Sehgal","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sumanshg","name":"sumanshg","key":"sumanshg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suman Sehgal","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405081/comment/12634392","id":"12634392","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"TestDFSIO is creating files in DATA_DIR, which is not output directory for the mapreduce job. If speculative execution is on for the test, two attempts of the task are trying to create same file. This test should have speculative execution off. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2008-09-25T07:09:10.464+0000","updated":"2008-09-25T07:09:10.464+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405081/comment/12634393","id":"12634393","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"Suman, can you try running test again with speculative execution off by specifying configuration properties *mapred.map.tasks.speculative.execution* and *mapred.reduce.tasks.speculative.execution* as *false*.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2008-09-25T07:18:03.281+0000","updated":"2008-09-25T07:18:03.281+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405081/comment/12635132","id":"12635132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sumanshg","name":"sumanshg","key":"sumanshg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suman Sehgal","active":true,"timeZone":"Etc/UTC"},"body":"Tried this test with above mentioned configurations i.e. mapred.map.tasks.speculative.execution and mapred.reduce.tasks.speculative.execution as false but it is still failing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sumanshg","name":"sumanshg","key":"sumanshg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suman Sehgal","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-27T12:19:26.722+0000","updated":"2008-09-27T12:19:26.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405081/comment/12636099","id":"12636099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sumanshg","name":"sumanshg","key":"sumanshg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suman Sehgal","active":true,"timeZone":"Etc/UTC"},"body":"Its giving the same AlreadyBeingCreatedException.\n2008-09-26 19:52:18,590 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_200809261929_0005_m_000001_0_1222457384229: Task attempt_200809261929_0005_m_000001_0_1222457384229 failed to report status for 603 seconds. Killing!\n2008-09-26 19:52:18,591 INFO org.apache.hadoop.mapred.JobTracker: Removed completed task 'attempt_200809261929_0005_m_000001_0_1222457384229' from 'tracker_host:host/xx.xxx.xx.xxx:xxxxx'\n\n2008-09-26 19:57:24,546 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_200809261929_0005_m_000001_1_1222457384229: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hdfs.protocol.AlreadyBeingCreatedException: failed to create file /benchmarks/TestDFSIO/io_data/test_io_101 for DFSClient_attempt_200809261929_0005_m_000001_1_1222457384229 on client xx.xxx.xx.xxx, because this file is already being created by DFSClient_attempt_200809261929_0005_m_000001_0_1222457384229 on xx.xxx.xx.xxx\n\n        \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sumanshg","name":"sumanshg","key":"sumanshg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suman Sehgal","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-01T17:17:18.800+0000","updated":"2008-10-01T17:17:18.800+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405081/comment/12636100","id":"12636100","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sumanshg","name":"sumanshg","key":"sumanshg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suman Sehgal","active":true,"timeZone":"Etc/UTC"},"body":"After discussing the issue with mapred team it was found that AlreadyBeingCreatedException was caused due to the following issue:\n\n2008-09-26 19:51:46,821 INFO org.apache.hadoop.hdfs.DFSClient: Exception in createBlockOutputStream java.net.SocketTimeoutException: 69000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel[connected local=/xx.xxx.xx.xxx:xxxxx remote=/xx.xxx.xx.xxx:xxxxx]\n2008-09-26 19:51:46,821 INFO org.apache.hadoop.hdfs.DFSClient: Abandoning block blk_-3654405428661288966_4855\n2008-09-26 19:51:46,823 INFO org.apache.hadoop.hdfs.DFSClient: Waiting to find target node: xx.xxx.xx.xxx:xxxxx\n2008-09-26 19:52:11,790 WARN org.apache.hadoop.mapred.TaskRunner: Parent died.  Exiting attempt_200809261929_0005_m_000001_0_1222457384229\n2008-09-26 19:53:16,581 WARN org.apache.hadoop.hdfs.DFSClient: DFSOutputStream ResponseProcessor exception  for block blk_-3774088676509031650_4855java.net.SocketTimeoutException: 69000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel[connected local=/xx.xxx.xx.xxx:xxxxx remote=/xx.xxx.xx.xxx:xxxxx]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sumanshg","name":"sumanshg","key":"sumanshg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suman Sehgal","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-01T17:19:03.009+0000","updated":"2008-10-01T17:19:03.009+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405081/comment/12636105","id":"12636105","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"Could it be because of lack of progress reporting while the task is waiting for the datanode?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-10-01T17:39:16.988+0000","updated":"2008-10-01T17:39:16.988+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-4264/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0i8br:"}}