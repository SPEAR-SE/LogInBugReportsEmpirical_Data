{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12400420","self":"https://issues.apache.org/jira/rest/api/2/issue/12400420","key":"HADOOP-3775","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2008-07-16T22:34:22.811+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jul 24 20:30:46 UTC 2008","customfield_12310420":"126150","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_685401351_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_4654404705","customfield_12312321":null,"resolutiondate":"2008-07-24T20:30:46.262+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3775/watchers","watchCount":1,"isWatching":false},"created":"2008-07-16T22:07:24.911+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312972","id":"12312972","description":"","name":"0.18.0","archived":false,"released":true,"releaseDate":"2008-08-22"}],"issuelinks":[{"id":"12321031","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12321031","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12399869","key":"HADOOP-3724","self":"https://issues.apache.org/jira/rest/api/2/issue/12399869","fields":{"summary":"Namenode does not start due to exception throw while saving Image","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T16:43:14.266+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"2008-07-16 21:56:46,150 WARN org.apache.hadoop.dfs.StateChange: DIR* NameSystem.internalReleaseCreate: attempt to release a create lock on xxx/.Trash/Current/machine.com/\nmachine.com/job_200807161951_0145/job.jar file does not exist.\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.dfs.LeaseManager: Lease Monitor: Removing lease [Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], sortedLeases.size()=: 2\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.fs.FSNamesystem: Recovering lease=[Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], src=xxx/.Trash/Current/machine.com\n/machine.com/job_200807161951_0145/job.jar\n2008-07-16 21:56:46,150 WARN org.apache.hadoop.dfs.StateChange: DIR* NameSystem.internalReleaseCreate: attempt to release a create lock on xxx/.Trash/Current/machine.com/\nmachine.com/job_200807161951_0145/job.jar file does not exist.\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.dfs.LeaseManager: Lease Monitor: Removing lease [Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], sortedLeases.size()=: 2\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.fs.FSNamesystem: Recovering lease=[Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], src=xxx/.Trash/Current/machine.com\n/machine.com/job_200807161951_0145/job.jar\n2008-07-16 21:56:46,150 WARN org.apache.hadoop.dfs.StateChange: DIR* NameSystem.internalReleaseCreate: attempt to release a create lock on xxx/.Trash/Current/machine.com/\nmachine.com/job_200807161951_0145/job.jar file does not exist.\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.dfs.LeaseManager: Lease Monitor: Removing lease [Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], sortedLeases.size()=: 2\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.fs.FSNamesystem: Recovering lease=[Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], src=xxx/.Trash/Current/machine.com\n/machine.com/job_200807161951_0145/job.jar\n2008-07-16 21:56:46,150 WARN org.apache.hadoop.dfs.StateChange: DIR* NameSystem.internalReleaseCreate: attempt to release a create lock on xxx/.Trash/Current/machine.com/\nmachine.com/job_200807161951_0145/job.jar file does not exist.\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.dfs.LeaseManager: Lease Monitor: Removing lease [Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], sortedLeases.size()=: 2\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.fs.FSNamesystem: Recovering lease=[Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], src=xxx/.Trash/Current/machine.com\n/machine.com/job_200807161951_0145/job.jar\n2008-07-16 21:56:46,150 WARN org.apache.hadoop.dfs.StateChange: DIR* NameSystem.internalReleaseCreate: attempt to release a create lock on xxx/.Trash/Current/machine.com/\nmachine.com/job_200807161951_0145/job.jar file does not exist.\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.dfs.LeaseManager: Lease Monitor: Removing lease [Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], sortedLeases.size()=: 2\n2008-07-16 21:56:46,150 INFO org.apache.hadoop.fs.FSNamesystem: Recovering lease=[Lease.  Holder: DFSClient_-1021744751, pendingcreates: 1], src=xxx/.Trash/Current/machine.com\n/machine.com/job_200807161951_0145/job.jar","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"104769","customfield_12312823":null,"summary":"Namenode trapped in an infinite loop","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12400420/comment/12614125","id":"12614125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"body":"That problem happened in Hadoop 0.18, built on July 2.\n\nThe above entries continue flowing into the name node's log file.\nThe name node stopped responding\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-16T22:08:38.439+0000","updated":"2008-07-16T22:16:59.389+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12400420/comment/12614134","id":"12614134","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"body":"\nHere is the stack trace of the infinite loop:\n\n\"org.apache.hadoop.dfs.LeaseManager$Monitor@228b677f\" daemon prio=10 tid=0x0000002e3c516400 nid=0x763a runnable [0x000000004163e000..0x000000004163ebb0]\n   java.lang.Thread.State: RUNNABLE\n        at java.io.FileOutputStream.writeBytes(Native Method)\n        at java.io.FileOutputStream.write(FileOutputStream.java:260)\n        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)\n        at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:272)\n        at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:276)\n        at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:122)\n        - locked <0x0000002b011b7068> (a java.io.OutputStreamWriter)\n        at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:212)\n        at org.apache.log4j.helpers.QuietWriter.flush(QuietWriter.java:57)\n        at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:315)\n        at org.apache.log4j.DailyRollingFileAppender.subAppend(DailyRollingFileAppender.java:358)\n        at org.apache.log4j.WriterAppender.append(WriterAppender.java:159)\n        at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)\n        - locked <0x0000002aa2d019d0> (a org.apache.log4j.DailyRollingFileAppender)\n        at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)\n        at org.apache.log4j.Category.callAppenders(Category.java:203)\n        - locked <0x0000002aa850d090> (a org.apache.log4j.spi.RootLogger)\n        at org.apache.log4j.Category.forcedLog(Category.java:388)\n        at org.apache.log4j.Category.log(Category.java:853)\n        at org.apache.commons.logging.impl.Log4JLogger.info(Log4JLogger.java:133)\n        at org.apache.hadoop.dfs.FSNamesystem.internalReleaseLease(FSNamesystem.java:1637)\n        at org.apache.hadoop.dfs.LeaseManager$Monitor.run(LeaseManager.java:353)\n        - locked <0x0000002aac9dbe78> (a org.apache.hadoop.dfs.LeaseManager)\n        - locked <0x0000002ab1fe7760> (a org.apache.hadoop.dfs.FSNamesystem)\n        at java.lang.Thread.run(Thread.java:619)\n\nThe monitor thread tried to release leases but failed, and loop around infinitely.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-16T22:32:51.080+0000","updated":"2008-07-16T22:32:51.080+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12400420/comment/12614136","id":"12614136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"body":"This looks similar to HADOOP-3724. In that JIRA, we were using an old hadoop-0.18, not sure on which day it was built. But after moving to latest 0.18, I guess around 11 July, we didnt have any problems. Few JIRAs were checked in which fixed it. Could this the same case too?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-16T22:34:22.811+0000","updated":"2008-07-16T22:34:22.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12400420/comment/12614164","id":"12614164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chansler","name":"chansler","key":"chansler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Chansler","active":true,"timeZone":"America/Los_Angeles"},"body":"Dhruba: What do you know about this? In particular, is this related to the infinite loop in Hadoop-3724 that you recently marked as resolved?\n\nDoes the lease monitor inner loop leave a faulty record at the top of the sorted leases map that is repeatedly tested?\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chansler","name":"chansler","key":"chansler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Chansler","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-17T00:23:01.585+0000","updated":"2008-07-17T00:23:01.585+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12400420/comment/12615414","id":"12615414","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"body":"This is related to HADOOP-3724. Marking this for 0.18. This leads to a corrupted image, which results in namenode failure. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-21T20:42:57.515+0000","updated":"2008-07-21T20:42:57.515+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12400420/comment/12616640","id":"12616640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"body":"The issue would be solved by HADOOP-3724","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-24T20:30:46.202+0000","updated":"2008-07-24T20:30:46.202+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3775/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0iac7:"}}