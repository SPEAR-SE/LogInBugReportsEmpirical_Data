{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12385927","self":"https://issues.apache.org/jira/rest/api/2/issue/12385927","key":"HADOOP-2569","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2008-01-09T21:35:06.661+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 25 22:22:37 UTC 2008","customfield_12310420":"81498","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1386217530_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_1213787115","customfield_12312321":null,"resolutiondate":"2008-01-25T22:22:37.673+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-2569/watchers","watchCount":0,"isWatching":false},"created":"2008-01-09T21:19:00.143+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312740","id":"12312740","description":"","name":"0.16.0","archived":false,"released":true,"releaseDate":"2008-02-07"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T16:52:36.577+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Unit test failed in the nightly build: org.apache.hadoop.mapred.TestMultiFileInputFormat.unknown\n\njunit.framework.AssertionFailedError: Timeout occurred\n\nLogs are at:\nhttp://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/361/","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"105648","customfield_12312823":null,"summary":"Unit test times out on Solaris nightly build: mapred.TestMultiFileInputFormat","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mukundm","name":"mukundm","key":"mukundm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukund Madhugiri","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mukundm","name":"mukundm","key":"mukundm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukund Madhugiri","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"solaris","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12385927/comment/12557442","id":"12557442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"body":"The console output for this test is:\n\n{code}\n    [junit] Running org.apache.hadoop.mapred.TestMultiFileInputFormat\n    [junit] 2008-01-09 13:19:49,604 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(84)) - Test started\n    [junit] 2008-01-09 13:19:49,609 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(85)) - Max split count           = 10000\n    [junit] 2008-01-09 13:19:49,610 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(86)) - Split count increment     = 6000\n    [junit] 2008-01-09 13:19:49,611 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(87)) - Max bytes per file        = 1024\n    [junit] 2008-01-09 13:19:49,612 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(88)) - Max number of files       = 10000\n    [junit] 2008-01-09 13:19:49,613 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(89)) - Number of files increment = 8000\n    [junit] 2008-01-09 13:19:50,007 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:initFiles(62)) - Creating 1 file(s) in /export/home/hudson/hudson/jobs/Hadoop-Nightly/workspace/trunk/build/test/data/mapred/test.multifile\n    [junit] 2008-01-09 13:19:50,611 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(101)) - Running for Num Files=1, split count=1\n    [junit] 2008-01-09 13:19:50,665 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(101)) - Running for Num Files=1, split count=3206\n    [junit] 2008-01-09 13:19:50,675 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:testFormat(101)) - Running for Num Files=1, split count=5230\n    [junit] 2008-01-09 13:19:51,278 INFO  mapred.TestMultiFileInputFormat (TestMultiFileInputFormat.java:initFiles(62)) - Creating 7823 file(s) in /export/home/hudson/hudson/jobs/Hadoop-Nightly/workspace/trunk/build/test/data/mapred/test.multifile\n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec\n    [junit] Test org.apache.hadoop.mapred.TestMultiFileInputFormat FAILED (timeout)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"created":"2008-01-09T21:35:06.661+0000","updated":"2008-01-09T21:35:06.661+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12385927/comment/12557445","id":"12557445","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"body":"Looks like there was about 25 minutes between the last timestamped log message and the \"FAILED\" log message (Junit timed out the test).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"created":"2008-01-09T21:36:59.833+0000","updated":"2008-01-09T21:36:59.833+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12385927/comment/12557446","id":"12557446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"body":"Enis, do you have any idea what's going on here?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"created":"2008-01-09T21:44:31.848+0000","updated":"2008-01-09T21:44:31.848+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12385927/comment/12557563","id":"12557563","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"body":"Well it seems to have stuck in lines below because the log after calling initFiles() is not printed. \n{code}\n   LOG.info(\"Creating \" + numFiles + \" file(s) in \" + multiFileDir);\n    for(int i=0; i<numFiles ;i++) {\n      Path path = new Path(multiFileDir, \"file_\" + i);\n       FSDataOutputStream out = fs.create(path);\n       if (numBytes == -1) {\n         numBytes = rand.nextInt(MAX_BYTES);\n       }\n       for(int j=0; j< numBytes; j++) {\n         out.write(rand.nextInt());\n       }\n       out.close();\n       if(LOG.isDebugEnabled()) {\n         LOG.debug(\"Created file \" + path + \" with length \" + numBytes);\n       }\n       lengths.put(path.getName(), new Long(numBytes));\n    }\n{code}\n\nI assume there is some space related problem in the build server. The test log reports many other problems such as : \n{noformat}\n...\n[junit] 2008-01-09 11:35:47,543 WARN  dfs.DataNode (DataNode.java:copyBlock(1144)) - Got exception while serving blk_-4990242691406600933 to 127.0.0.1:35838: java.io.IOException: Block blk_-4990242691406600933 is not valid.\n    [junit] \tat org.apache.hadoop.dfs.FSDataset.getBlockFile(FSDataset.java:549)\n    [junit] \tat org.apache.hadoop.dfs.FSDataset.getMetaFile(FSDataset.java:466)\n    [junit] \tat org.apache.hadoop.dfs.FSDataset.getMetaDataInputStream(FSDataset.java:480)\n    [junit] \tat org.apache.hadoop.dfs.DataNode$BlockSender.<init>(DataNode.java:1298)\n    [junit] \tat org.apache.hadoop.dfs.DataNode$DataXceiver.copyBlock(DataNode.java:1114)\n    [junit] \tat org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:877)\n    [junit] \tat java.lang.Thread.run(Thread.java:595)\n...\n[junit] 2008-01-09 11:35:56,574 ERROR dfs.DataNode (DataNode.java:run(1738)) - Exception: java.lang.reflect.UndeclaredThrowableException\n    [junit] \tat org.apache.hadoop.dfs.$Proxy1.blockReport(Unknown Source)\n    [junit] \tat org.apache.hadoop.dfs.DataNode.offerService(DataNode.java:616)\n    [junit] \tat org.apache.hadoop.dfs.DataNode.run(DataNode.java:1736)\n    [junit] \tat java.lang.Thread.run(Thread.java:595)\n    [junit] Caused by: java.lang.InterruptedException\n    [junit] \tat java.lang.Object.wait(Native Method)\n    [junit] \tat org.apache.hadoop.ipc.Client.call(Client.java:504)\n    [junit] \tat org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:198)\n    [junit] \t... 4 more\n...\n[junit] 2008-01-09 11:37:31,788 WARN  dfs.DataNode (DataNode.java:sendChunk(1401)) -  Could not read checksum for data at offset 1536 for block blk_-5451683627314743712 got : java.io.EOFException\n    [junit] \tat java.io.DataInputStream.readFully(DataInputStream.java:178)\n    [junit] \tat org.apache.hadoop.dfs.DataNode$BlockSender.sendChunk(DataNode.java:1399)\n    [junit] \tat org.apache.hadoop.dfs.DataNode$BlockSender.sendBlock(DataNode.java:1449)\n    [junit] \tat org.apache.hadoop.dfs.DataNode$DataXceiver.readBlock(DataNode.java:920)\n    [junit] \tat org.apache.hadoop.dfs.DataNode$DataXceiver.run(DataNode.java:865)\n    [junit] \tat java.lang.Thread.run(Thread.java:595)\n...\n[junit] 2008-01-09 12:36:51,570 WARN  fs.AllocatorPerContext (LocalDirAllocator.java:createPath(256)) - org.apache.hadoop.util.DiskChecker$DiskErrorException: directory is not writable: build/test/temp/tmp4\n    [junit] \tat org.apache.hadoop.util.DiskChecker.checkDir(DiskChecker.java:85)\n    [junit] \tat org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.createPath(LocalDirAllocator.java:253)\n    [junit] \tat org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathForWrite(LocalDirAllocator.java:301)\n    [junit] \tat org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.createTmpFileForWrite(LocalDirAllocator.java:326)\n    [junit] \tat org.apache.hadoop.fs.LocalDirAllocator.createTmpFileForWrite(LocalDirAllocator.java:155)\n    [junit] \tat org.apache.hadoop.fs.TestLocalDirAllocator.createTempFile(TestLocalDirAllocator.java:77)\n...\n{noformat}\n\ncan you check the server whether there is a space problem or the directories are writable (I don't have a hudson account). \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=enis","name":"enis","key":"enis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Enis Soztutar","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-10T07:49:55.881+0000","updated":"2008-01-10T10:00:50.360+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12385927/comment/12562718","id":"12562718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"body":"I haven't seen this again.  I suspect it was due to the disk io problems that the build machine was experiencing.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"created":"2008-01-25T22:22:37.637+0000","updated":"2008-01-25T22:22:37.637+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-2569/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ifrj:"}}