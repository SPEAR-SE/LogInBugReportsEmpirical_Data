{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12368425","self":"https://issues.apache.org/jira/rest/api/2/issue/12368425","key":"HADOOP-1313","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2007-05-01T23:46:46.784+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed May 02 16:57:19 UTC 2007","customfield_12310420":"125236","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_66242416_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_6579064585","customfield_12312321":null,"resolutiondate":"2007-05-02T17:51:31.905+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-1313/watchers","watchCount":0,"isWatching":false},"created":"2007-05-01T23:27:29.489+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T16:52:16.042+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"I'm trying to get programmatic access to hadoop job/task status through the JobTracker api.\n\nI notice that JobTracker returns a JobInProgress object in several public methods (runningJobs, getJob).  However, JobInProgress is a package-access class.  So, oddly, I can get JobTracker.getJob(), but I can't store the result as a JobInProgress (I suppose I could store it as an Object, but then I couldn't upcast it back).  \n\nThe JobInProgress object gives me useful information about jobs, so I don't think making runningJobs/getJob not public is a good idea.  I get the idea from HADOOP-28 that JobInProgress is not public because nobody wants to maintain compatibility in this class across hadoop versions.  \n\nSo it would probably be best if we created public interfaces that JobInProgress and TaskInProgress implement.  I only care about the accessors, so maybe from JobInProgress we could expose (getProfile, getStatus, get*Time, {finished,desired,running}{Maps,Reduces}, getMapTasks, getCounters) and from TaskInProgress (isRunning, isComplete, isFailed, isMapTask, numTaskFailures, numKilledTasks, getProgress, getCounters).\n\nAny thoughts?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"106335","customfield_12312823":null,"summary":"JobInProgress should be public (or implement a public interface)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bien","name":"bien","key":"bien","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Bieniosek","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bien","name":"bien","key":"bien","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Bieniosek","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12368425/comment/12492988","id":"12492988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":"The standard public API for such things is JobClient, not JobTracker.  Is that not sufficient?  It may not be, but I think that's the thing to change, rather than exposing stuff through JobTracker directly.  To my thinking, the only reason that JobTracker is a public class is so that one can start and stop the daemon.  Other interaction should be through JobClient.  Could that work for you?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-05-01T23:46:46.784+0000","updated":"2007-05-01T23:46:46.784+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12368425/comment/12492993","id":"12492993","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bien","name":"bien","key":"bien","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Bieniosek","active":true,"timeZone":"America/Los_Angeles"},"body":"The webapps use the JobTracker, so I assumed I would be able to use its interface as well.  It seems odd that the webapp is privileged.  \n\nJobClient and JobSubmissionProtocol don't provide the actual number of running/completed tasks; they only seem to provide the progress as a float.  I also want ClusterStatus.  ClusterStatus is available from JobSubmissionProtocol as well as JobTracker, but JobSubmissionProtocol is not available from JobClient.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bien","name":"bien","key":"bien","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Bieniosek","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-05-02T00:15:56.716+0000","updated":"2007-05-02T00:15:56.716+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12368425/comment/12492995","id":"12492995","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bien","name":"bien","key":"bien","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Bieniosek","active":true,"timeZone":"America/Los_Angeles"},"body":"Sorry, I'm wrong.  I can get ClusterStatus from JobClient.\n\nSo the only thing I care about is the actual number of running/completed tasks, which isn't in JobClient.  \n\nI'm also vaguely uncomfortable with the privileged access of the webapp/ to the JobTracker.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bien","name":"bien","key":"bien","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Bieniosek","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-05-02T00:48:00.565+0000","updated":"2007-05-02T00:48:00.565+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12368425/comment/12493146","id":"12493146","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":"> So the only thing I care about is the actual number of running/completed tasks, which isn't in JobClient.\n\nIsn't it?  The ClusterStatus includes the number of running map and reduce tasks.  The number of completed tasks can be determined from getMapTaskReports() and getReduceTaskReports(), or incrementally with getJob().getTaskCompletionEvents().  What's missing?\n\n> I'm also vaguely uncomfortable with the privileged access of the webapp/ to the JobTracker.\n\nMe too.  I think the webapp should ideally use only JobClient to access the JobTracker.  Not because I don't trust the webapp, but rather because I think that anything that's visible in the webapp should be accessible to user programs.  Probably we should put the webapp in a separate package.  We should also split JobTracker into a public launcher class and a package-private class that implements various protocols, so that the protocol implementation methods are not publicly visible, tempting folks to call them directly.  But such cleanups are separate issues.  If you feel strongly enough, please file issues and submit patches for this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-05-02T16:57:19.363+0000","updated":"2007-05-02T16:57:19.363+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-1313/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ik07:"}}