{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12511431","self":"https://issues.apache.org/jira/rest/api/2/issue/12511431","key":"HADOOP-7425","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-07-12T13:03:25.443+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Nov 05 19:17:33 UTC 2012","customfield_12310420":"212","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7425/watchers","watchCount":5,"isWatching":false},"created":"2011-06-24T02:05:40.421+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["patch"],"customfield_12312333":null,"customfield_12310230":"ReflectionUtils","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314203","id":"12314203","description":"","name":"0.20.2","archived":false,"released":true,"releaseDate":"2010-02-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316390","id":"12316390","description":"Merge append/sync support with security","name":"0.20.205.0","archived":false,"released":true,"releaseDate":"2011-10-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313563","id":"12313563","description":"","name":"0.21.0","archived":false,"released":true,"releaseDate":"2010-08-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315569","id":"12315569","description":"","name":"0.23.0","archived":false,"released":true,"releaseDate":"2011-11-11"}],"issuelinks":[{"id":"12341005","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12341005","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"inwardIssue":{"id":"12514545","key":"MAPREDUCE-2709","self":"https://issues.apache.org/jira/rest/api/2/issue/12514545","fields":{"summary":"Test case to ensure ReflectionUtils.setConf configures the target object only once","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/6","id":"6","description":"A new unit, integration or system test.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/requirement.png","name":"Test","subtask":false}}}},{"id":"12359860","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12359860","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12614836","key":"MAPREDUCE-4771","self":"https://issues.apache.org/jira/rest/api/2/issue/12614836","fields":{"summary":"KeyFieldBasedPartitioner not partitioning properly when configured","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-11-05T19:17:33.106+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310740","id":"12310740","name":"util","description":""}],"timeoriginalestimate":null,"description":"In  the setConf method of org.apache.hadoop.util.ReflectionUtils, any instance of Configurable would be configured twice.\n\nIn 0.21.0, KeyFieldBasedPartitioner implements the Configurable interface. When configured twice, it get two KeyDescription and gives out wrong partition number. \n\n\npublic static void setConf(Object theObject, Configuration conf) {\n    if (conf != null) {\n      if (theObject instanceof Configurable) {\n        ((Configurable) theObject).setConf(conf);\n      }\n      setJobConf(theObject, conf);\n    }\n  }\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12515238","id":"12515238","filename":"hadoop7425.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-20T11:49:31.091+0000","size":2011,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12515238/hadoop7425.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12488208","id":"12488208","filename":"HADOOP-7425.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-29T14:08:40.912+0000","size":1703,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12488208/HADOOP-7425.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12486260","id":"12486260","filename":"test.tar","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-13T02:40:56.586+0000","size":30720,"mimeType":"application/x-tar","content":"https://issues.apache.org/jira/secure/attachment/12486260/test.tar"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"84148","customfield_12312823":null,"summary":"ReflectionUtils.setConf would configure anything Configurable twice","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13063869","id":"13063869","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"body":"can you provide a sample code that cause you the issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-12T13:03:25.443+0000","updated":"2011-07-12T13:03:25.443+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13064305","id":"13064305","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"body":"hi, Sudharsan, sure, you can use the data and scripts I uploaded(later) to do the check. \n\nI used the \"org.apache.hadoop.mapred.lib.KeyFieldBasedPartitioner\" instead of the newer \"org.apache.hadoop.mapreduce.lib.partition.KeyFieldBasedPartitioner\" in streaming command cause in 0.21.0, the org.apache.hadoop.mapred.JobConf.setPartitionerClass() is still expecting an Object extends from \"org.apache.hadoop.mapred.Partitioner\":\n\npublic void setPartitionerClass(Class<? extends Partitioner> theClass) {\n'      setClass(\"mapred.partitioner.class\", theClass, Partitioner.class);\n}\n\nand why is KeyFieldBasedPartitioner configured twice here:\n  cause the \"o.a.h.mapred.lib.KeyFieldBasedPartitioner\" class now extends from \"o.a.h.mapreduce.lib.partition.KeyFieldBasedPartitioner\" to use potential newer features(which's not appeared yet), which is Configurable, so in ReflectionUtils.setConf, the line :\n\n\"if (theObject instanceof Configurable) { ((Configurable) theObject).setConf(conf); }\" \n\nwill be executed, configure the partitioner once, add a KeyDescription to the KeyDescription list.\nAnd later, no matter the above line is executed or what, this line:\n\n\"setJobConf(theObject, conf);\"\n\nwill be executed anyway, configure the Partitioner twice, add another KeyDescription to the list, even if we just configured one.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-13T02:39:01.987+0000","updated":"2011-07-13T02:39:01.987+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13064306","id":"13064306","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"body":"use the scripts in this tar ball to test the KeyFieldBasedPartitioner.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-13T02:40:56.618+0000","updated":"2011-07-13T02:40:56.618+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13064494","id":"13064494","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"body":"Hi Steven,\n\nYes. You are right. This issue is seen on the trunk too. But to me, configuring twice should not be an issue but processing the configured property without realizing that the same configuration has been processed already could be avoided.\n\nWill it be ok if instead of maintaining a List, we maintain a Set of keyspecs in the KeyFieldHelper and provide an equals method that returns true if its params match exactly as the passed in. The downside is that if some job wants this kind of double hashing done on the same keyspec that would be difficult asking for a custom partitioner. But I doubt if there would be such a scenario.\n\nThis would also ensure we get the correct partition and increase performance as we avoid a hash invoke for every record. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-13T11:30:08.773+0000","updated":"2011-07-13T11:30:08.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13064633","id":"13064633","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"body":"hi Sudharsan, \n    I think the KeyFieldHelper has done its job, it is the setConf method of ReflectionUtils makes the partitioner configured twice.\n    I wonder why the logic in ReflectionUtils.setConf first call setConf() then call configure() on the same object? can we write it as:\n\n\n      if (theObject instanceof Configurable) {\n\n        ((Configurable) theObject).setConf(conf);\n\n      }\n      else { \n        \n        setJobConf(theObject, conf);\n\n      }    \ncan we do this?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-13T15:28:49.860+0000","updated":"2011-07-13T15:28:49.860+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13067525","id":"13067525","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"body":"Made changes to set configuration only once for the old/new api","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-19T06:08:57.352+0000","updated":"2011-07-19T06:08:57.352+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13067527","id":"13067527","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"body":"Changes to set configuration only once for the new/old api","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-19T06:17:08.723+0000","updated":"2011-07-19T06:17:08.723+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13067534","id":"13067534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"body":"changes to apply configuration only once ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-19T06:32:03.225+0000","updated":"2011-07-19T06:32:03.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13067538","id":"13067538","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12486973/Hadoop-7425.patch\n  against trunk revision 1147971.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 system test framework.  The patch passed system test framework compile.\n\nTest results: https://builds.apache.org/job/PreCommit-HADOOP-Build/745//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/745//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/745//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-19T06:51:59.570+0000","updated":"2011-07-19T06:51:59.570+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13067769","id":"13067769","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"body":"thanks Sudharsan, you are doing great job here. will we see this modification in new release of hadoop?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-19T14:59:21.122+0000","updated":"2011-07-19T14:59:21.122+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13068170","id":"13068170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"body":"Added test case to the patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-20T06:35:59.699+0000","updated":"2011-07-20T06:35:59.699+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13068178","id":"13068178","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12487111/HADOOP-7425.patch\n  against trunk revision 1147971.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    -1 javac.  The patch appears to cause tar ant target to fail.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed these core unit tests:\n\n\n    -1 system test framework.  The patch failed system test framework compile.\n\nTest results: https://builds.apache.org/job/PreCommit-HADOOP-Build/752//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/752//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/752//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-20T06:45:13.936+0000","updated":"2011-07-20T06:45:13.936+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13072837","id":"13072837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"body":"Updated with proper test case. We should add a test case on JobConfigurable or KeyFieldBasedPartitioner on their respective test classes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sudhan65","name":"sudhan65","key":"sudhan65","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudharsan Sampath","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-29T14:08:41.176+0000","updated":"2011-07-29T14:08:41.176+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13210407","id":"13210407","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"The latest test patch failed.  Also the patch is rather old, and will need to be upmerged to apply to trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2012-02-17T17:43:52.571+0000","updated":"2012-02-17T17:43:52.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13211789","id":"13211789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"body":"so glad this problem is updated.\nand Robert, I think the given patch might not point out how the problem is gonna happen. the tested object should be an object from a class implements these two interfaces: Configurable, JobConfigurable, only in this case will the object be configured twice(1. setConf and 2. configure).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-20T11:44:16.339+0000","updated":"2012-02-20T11:44:16.339+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13211792","id":"13211792","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"body":"this file contains patch to ReflectionUtils.java and TestReflectionUtils.java.\nsetConf is a method called many times, this patch may have profound influence if it introduces any bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevenzhuang","name":"stevenzhuang","key":"stevenzhuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"steven zhuang","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-20T11:49:31.237+0000","updated":"2012-02-20T11:49:31.237+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13218477","id":"13218477","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Steven,\n\nThe build system on trunk has changed to use maven instead of ant so the location of the files are different.  In addition to this common, mapreduce, and HDFS were split up and common no longer has any direct dependencies on mapreduce, but the new test does, so it will not compile.  ReflectionUtils loads the mapreduce dependencies using reflection now, which is ugly, but works.  If you want this fix to go into the 1.0 line, 0.21 or even 0.22 we also need to have a version that is compatible with trunk so we do not get any regressions in newer versions.\n\nIn addition to this, looking at the code I am not sure of all of the ramifications of not having JobConfiguration.configure called for all classes that are both JobConfigurable and Configurable.  There are other classes that may rely on this behavior.  I think I would prefer to see KeyFieldBasedPartitioner updated to handle having both methods called.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2012-02-28T19:00:31.337+0000","updated":"2012-02-28T19:00:31.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511431/comment/13490839","id":"13490839","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Filed MAPREDUCE-4771 to fix KeyFieldBasedPartitioner so it doesn't behave improperly if it is configured twice.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2012-11-05T19:17:33.106+0000","updated":"2012-11-05T19:17:33.106+0000"}],"maxResults":18,"total":18,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7425/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0er2n:"}}