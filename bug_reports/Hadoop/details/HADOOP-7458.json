{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12513886","self":"https://issues.apache.org/jira/rest/api/2/issue/12513886","key":"HADOOP-7458","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2011-07-14T19:48:39.062+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jul 19 16:40:25 UTC 2011","customfield_12310420":"67534","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_129433242_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-14T19:54:25.261+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7458/watchers","watchCount":4,"isWatching":false},"created":"2011-07-13T07:57:12.056+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":["hadoop"],"customfield_12312333":null,"customfield_12310230":"namenode","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":172800,"aggregatetimeoriginalestimate":172800,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314203","id":"12314203","description":"","name":"0.20.2","archived":false,"released":true,"releaseDate":"2010-02-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-19T16:40:25.172+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310689","id":"12310689","name":"fs","description":"Generic FileSystem code"}],"timeoriginalestimate":172800,"description":"2011-07-13 12:04:12,967 ERROR org.apache.hadoop.hdfs.server.namenode.FSNamesystem: FSNamesystem initialization failed.\njava.io.FileNotFoundException: File does not exist: /opt/data/tmp/mapred/system/job_201107041958_0120/j^@^@^@^@^@^@\n        at org.apache.hadoop.hdfs.server.namenode.FSDirectory.unprotectedSetPermission(FSDirectory.java:544)\n        at org.apache.hadoop.hdfs.server.namenode.FSEditLog.loadFSEdits(FSEditLog.java:724)\n        at org.apache.hadoop.hdfs.server.namenode.FSImage.loadFSEdits(FSImage.java:992)\n        at org.apache.hadoop.hdfs.server.namenode.FSImage.loadFSImage(FSImage.java:812)\n        at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:364)\n        at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:87)\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:311)\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:292)\n        at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:201)\n        at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:279)\n        at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:956)\n        at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:965)\n2011-07-13 12:04:13,006 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: java.io.FileNotFoundException: File does not exist: /opt/data/tmp/mapred/system/job_201107041958_0120/j^@^@^@^@^@^@\n        at org.apache.hadoop.hdfs.server.namenode.FSDirectory.unprotectedSetPermission(FSDirectory.java:544)\n        at org.apache.hadoop.hdfs.server.namenode.FSEditLog.loadFSEdits(FSEditLog.java:724)\n        at org.apache.hadoop.hdfs.server.namenode.FSImage.loadFSEdits(FSImage.java:992)\n        at org.apache.hadoop.hdfs.server.namenode.FSImage.loadFSImage(FSImage.java:812)\n        at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:364)\n        at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:87)\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:311)\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:292)\n        at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:201)\n        at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:279)\n        at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:956)\n        at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:965)\n\n\nIn the path /opt/data/tmp/mapred, \"system/\" folder itself is not available","customfield_10010":null,"timetracking":{"originalEstimate":"48h","remainingEstimate":"48h","originalEstimateSeconds":172800,"remainingEstimateSeconds":172800},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":172800,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"102490","customfield_12312823":null,"summary":"Namenode not get started! FSNamesystem initialization failed. java.io.FileNotFoundException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sakthivel","name":"sakthivel","key":"sakthivel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sakthivel Murugasamy","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sakthivel","name":"sakthivel","key":"sakthivel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sakthivel Murugasamy","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":172800,"percent":0},"customfield_12311024":null,"environment":"CentOS release 5.5 (Final), 18 node Cluster ","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":172800,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13065254","id":"13065254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sakthivel","name":"sakthivel","key":"sakthivel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sakthivel Murugasamy","active":true,"timeZone":"Etc/UTC"},"body":"In the path /opt/data/tmp/mapred, \"system/\" folder itself is not available","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sakthivel","name":"sakthivel","key":"sakthivel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sakthivel Murugasamy","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-14T13:33:07.919+0000","updated":"2011-07-14T13:33:07.919+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13065498","id":"13065498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"The file name \"/opt/data/tmp/mapred/system/job_201107041958_0120/....\"  seems to be not right. Probably the edit logs got corrupted. Do you have a backup for edit logs?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-14T19:48:39.062+0000","updated":"2011-07-14T19:48:39.062+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13065501","id":"13065501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"body":"This appears to be an issue of file corruption.  The best forum for resolving it is the mailing list, rather than the issue tracker.  Please write to the hdfs users' list.  Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-14T19:54:25.269+0000","updated":"2011-07-14T19:54:25.269+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13065793","id":"13065793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sakthivel","name":"sakthivel","key":"sakthivel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sakthivel Murugasamy","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for your reply @Jithendra & @Jacob, I am running hadoop cluster with basic configurations with very minimal custom configurations and haven't taken any backup separately.\n@Jacob, I have written this to hdfs user's list.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sakthivel","name":"sakthivel","key":"sakthivel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sakthivel Murugasamy","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-15T09:10:17.384+0000","updated":"2011-07-15T09:10:17.384+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13065848","id":"13065848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gerritjvv","name":"gerritjvv","key":"gerritjvv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gerrit Jansen van Vuuren","active":true,"timeZone":"Etc/UTC"},"body":"This does mean the edit logs is corrupted, but it should be something the namenode can recover from. \nReasoning is: So you've got 30TB of data. For some reason the metadata is corrupted and the only corruption is last 100 lines in the edit logs. \nDo you need to loose all of your 30TB data because the last 100 lines are corrupt???? This should not be the case.\n\n\n\nA very simple fix is the edit the FSImage.java file and add in a try catch where it loads the edits log. \nThe best solution would be that if this happens, the namenode prints out an error, and goes into safemode automatically, but it must still load and not crash.\nI've had this error recently and decided to recompile the hadoop core jar with a simple try catch. It worked and I recovered all of my data, except for some hadoop jobtemp files, which I don't care about any how.\n\n\nThe patch is:\n\nIndex: src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\n===================================================================\n--- src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\t(revision 1145902)\n+++ src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\t(working copy)\n@@ -1003,12 +1003,20 @@\n     int numEdits = 0;\n     EditLogFileInputStream edits = \n       new EditLogFileInputStream(getImageFile(sd, NameNodeFile.EDITS));\n+    try{\n     numEdits = FSEditLog.loadFSEdits(edits);\n+    }catch(Throwable t){\n+      t.printStackTrace();\n+    }\n     edits.close();\n     File editsNew = getImageFile(sd, NameNodeFile.EDITS_NEW);\n     if (editsNew.exists() && editsNew.length() > 0) {\n       edits = new EditLogFileInputStream(editsNew);\n+      try{\n       numEdits += FSEditLog.loadFSEdits(edits);\n+      }catch(Throwable t){\n+        t.printStackTrace();\n+      }\n       edits.close();\n     }\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gerritjvv","name":"gerritjvv","key":"gerritjvv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gerrit Jansen van Vuuren","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-15T10:42:41.974+0000","updated":"2011-07-15T10:42:41.974+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13066024","id":"13066024","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"body":"But you can not write data right?\nIt is better to recover from secondary Namenode in that case.\nif you want only to read the data then you can do this....:-) (read only cluster?)\n\nThis issue already invalidated here. So, i would suggest to discuss this on mailing list if any thing more on this to discuss.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-15T15:48:22.960+0000","updated":"2011-07-15T15:48:22.960+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13066323","id":"13066323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gerritjvv","name":"gerritjvv","key":"gerritjvv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gerrit Jansen van Vuuren","active":true,"timeZone":"Etc/UTC"},"body":"Of course you can write. \nOnce the namenode reads the edit logs and merges the valid entries into the image file your good to go.\n\nI say put it in safe mode because that way you can validate.\nAfter validation nothing stops you from putting the namenode out of safe mode. \n\nThe problem is if you don't have a secondary namenode checkpoint because for some reason the secondary namenode failed \nsilently. This was my case a couple of days ago, and I managed via the method above to recover all of my data, the cluster is now running writing and reading. With the other alternatives provided in this jira and other mailing lists I would've lost all data.\n\nYes I know the issue is invalidated but I strongly disagree with that. Why is the need to recover from a corrupt edits log invalid????? Its not enough to just say: oh you should have had backups.\nEspecially when a simple alternative exists, and the namenode has the ability to recover from it.\n\nI would strongly insist to reopen this issue, especially when a fix does exist.\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gerritjvv","name":"gerritjvv","key":"gerritjvv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gerrit Jansen van Vuuren","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-16T00:12:12.681+0000","updated":"2011-07-16T00:12:12.681+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13066329","id":"13066329","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"body":"@Gerrit\n   Sakthivel most likely has a corrupted edits log and his immediate need is get support on how to recover from his particular calamity.  The correct forum for that is our mailing lists, where he is already receiving assistance.  You're correct that we can always handle error recovery better than we do, and if you have a patch you'd like to offer to help with this, please do so in another JIRA dedicated to your particular fix.  Combining discussion of your suggested approach with the troubleshooting needed to address Skithivel's current problem will not be productive.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-16T00:49:14.076+0000","updated":"2011-07-16T00:49:14.076+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13066345","id":"13066345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"body":"Hay Gerrit,\nI think you misunderstood me.\nwhat i mean is, discussion on this invalid issue may not be effective as Jakob said you could have filed other Jira if we have better recovery mechanism exits ( your approach sounds good). Because people may not look into this Jira that actively  because of issue status.\n\n\nbq.After validation nothing stops you from putting the namenode out of safe mode. \nyou are right!. we can leave safe mode forcibly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-16T02:05:30.636+0000","updated":"2011-07-16T02:05:30.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13066389","id":"13066389","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gerritjvv","name":"gerritjvv","key":"gerritjvv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gerrit Jansen van Vuuren","active":true,"timeZone":"Etc/UTC"},"body":"Hi, \n\nYes your right, apologies I did misunderstand you. \nI will file different jira for this. \n\nThanks.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gerritjvv","name":"gerritjvv","key":"gerritjvv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gerrit Jansen van Vuuren","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-16T09:25:44.723+0000","updated":"2011-07-16T09:25:44.723+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13067554","id":"13067554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sakthivel","name":"sakthivel","key":"sakthivel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sakthivel Murugasamy","active":true,"timeZone":"Etc/UTC"},"body":"Hi All,\n\nThank you so much for your valuable solutions!\n\nProblem got resolved, but significant time+data loss(since we were running on an experimental basis, reloaded fewer GB of the data). I used -importCheckpoint option.\n\nI just would like to tell you the possible scenario/reason of editlog corruption might have happened(correct me if I am wrong),\n\nBelow were the typical configurations in hdfs-site.xml\n\n    * hadoop.tmp.dir : /opt/data/tmp\n    * dfs.name.dir : /opt/data/name\n    * dfs.data.dir : /opt/data/data\n    * mapred.local.dir  : ${hadoop.tmp.dir}/mapred/local\n\n/opt/data is an mounted storage, size is 50GB. Namenode, SecondaryNamenode( ${hadoop.tmp.dir}/dfs/namesecondary) & Datanode directories were configured within /opt/data itself.\n\nOnce I moved 3.6GB compressed(bz2) file, I guess /opt/data memory usage of this dir. could have been 100%(I checked($df -h) after this incident). Then, I ran Hive with simple \"Select\" query, its job.jar files also needs to be created within the same directory which already has no space. So this is how the editlog corruption could have been occurred.\n\nThis is really a good learning for me! Now I have changed that configurations.\n\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sakthivel","name":"sakthivel","key":"sakthivel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sakthivel Murugasamy","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-19T07:30:54.661+0000","updated":"2011-07-19T07:30:54.661+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513886/comment/13067825","id":"13067825","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"body":"Is this jira still valid?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-19T16:40:25.131+0000","updated":"2011-07-19T16:40:25.131+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7458/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0hw9r:"}}