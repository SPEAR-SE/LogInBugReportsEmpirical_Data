{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12331854","self":"https://issues.apache.org/jira/rest/api/2/issue/12331854","key":"HADOOP-127","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2006-04-11T07:26:52.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Sep 27 22:01:29 UTC 2007","customfield_12310420":"124649","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_46239229480_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_504283783","customfield_12312321":null,"resolutiondate":"2007-09-27T22:01:29.480+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-127/watchers","watchCount":0,"isWatching":false},"created":"2006-04-10T17:47:40.000+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-10-03T18:06:13.240+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310711","id":"12310711","name":"conf","description":"Hadoop configuration mechanism."}],"timeoriginalestimate":null,"description":"The order in which configuration resources are read is not sufficiently documented, and also there are no mechanisms preventing harmful re-definition of certain properties, if they are put in wrong config files.\n\nFrom reading the code in Hadoop Configuration.java, JobConf.java and Nutch NutchConfiguration.java I _think_ this is what's happening.\n\nThere are two groups of resources: default resources, loaded first, and final resources, loaded at the end. All properties (re)-defined in files loaded later will override any previous definitions:\n\n* default resources: loaded in the order as they are added. The following files are added here, in order:\n\n    1. hadoop-default.xml (Configuration)\n    2. nutch-default.xml  (NutchConfiguration)\n    3. mapred-default.xml (JobConf)\n    4. job_xx_xxx.xml       (JobConf, in JobConf(File config))\n\n* final resource: which always come after default resources, i.e. if any value is defined here it will always override those set in default resources (NOTE: including per job settings!!!). The following files are added here, in reversed order:\n\n    2. hadoop-site.xml (Configuration)\n    1. nutch-site.xml    (NutchConfiguration)\n\n(i.e. hadoop-site.xml will take precedence over anything else defined in any other config file).\n\nI would appreciate checking that this is indeed the case, and suggestions how to ensure that you cannot so easily shoot yourself in the foot if you define wrong properties in hadoop-site or nutch-site ...","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"107344","customfield_12312823":null,"summary":"Unclear precedence of config files and property definitions","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ab","name":"ab","key":"ab","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ab&avatarId=36393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ab&avatarId=36393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ab&avatarId=36393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ab&avatarId=36393"},"displayName":"Andrzej Bialecki ","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ab","name":"ab","key":"ab","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ab&avatarId=36393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ab&avatarId=36393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ab&avatarId=36393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ab&avatarId=36393"},"displayName":"Andrzej Bialecki ","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hadoop 0.1.1, Nutch 0.8-dev","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331854/comment/12373950","id":"12373950","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":"I think you have it right.  Some guidelines:\n\nFolks should only define things in the -site files if they want to force them for all code.\n\nFolks should not edit the -default files.\n\nNon-default settings that may be overridden by application code should be put in mapred-default.xml.\n\nApplication settings are set in the job.\n\nStrictly speaking, it doesn't much matter whether you put something in a nutch- or hadoop- file, although the intent is to keep things that are specific to Hadoop in hadoop- files and things specific to Nutch in nutch- files.\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-04-11T07:26:52.000+0000","updated":"2006-04-11T07:26:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331854/comment/12432153","id":"12432153","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fred.bertin","name":"fred.bertin","key":"fred.bertin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Frédéric Bertin","active":true,"timeZone":"Etc/UTC"},"body":"<quote>Folks should only define things in the -site files if they want to force them for all code. </quote>\n\nI should have read this earlier, it would have saved me some time.\n\nActually, the fact that properties defined in hadoop-final.xml override EVERYTHING, included properties defined in job config files, is something very important that should be well documented, because it's not the intuitively expected behaviour (which, to me, was:\n - hadoop-default.xml, mapred-default.xml overrided by\n - hadoop-final.xml, overrided by\n - job config files\n\nI've searched the wiki (afterwards, unfortunately) and it's very well documented there. However, the comments included in hadoop-default.xml and other delivered config files are not clear about this. Maybe they should be detailed, or just link to the wiki page.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fred.bertin","name":"fred.bertin","key":"fred.bertin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Frédéric Bertin","active":true,"timeZone":"Etc/UTC"},"created":"2006-09-01T14:43:43.000+0000","updated":"2006-09-01T14:43:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331854/comment/12530859","id":"12530859","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owen.omalley","name":"owen.omalley","key":"owen.omalley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=owen.omalley&avatarId=29697","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=owen.omalley&avatarId=29697","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=owen.omalley&avatarId=29697","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=owen.omalley&avatarId=29697"},"displayName":"Owen O'Malley","active":true,"timeZone":"America/Los_Angeles"},"body":"I believe this was fixed by HADOOP-785.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owen.omalley","name":"owen.omalley","key":"owen.omalley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=owen.omalley&avatarId=29697","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=owen.omalley&avatarId=29697","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=owen.omalley&avatarId=29697","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=owen.omalley&avatarId=29697"},"displayName":"Owen O'Malley","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-09-27T22:01:29.204+0000","updated":"2007-09-27T22:01:29.204+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-127/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0iq8f:"}}