{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12519366","self":"https://issues.apache.org/jira/rest/api/2/issue/12519366","key":"HADOOP-7556","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-08-19T04:12:57.622+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat May 02 16:47:01 UTC 2015","customfield_12310420":"198","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_116858249264_*|*_1_*:*_1_*:*_3775231_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-05-02T16:47:01.860+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7556/watchers","watchCount":3,"isWatching":false},"created":"2011-08-19T03:06:37.527+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316064","id":"12316064","description":"Security for hadoop-0.20","name":"0.20.203.0","archived":false,"released":true,"releaseDate":"2011-05-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-05-02T16:47:02.015+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"For background see http://groups.google.com/group/brisk-users/browse_thread/thread/3a18f4679673bea8\nhttp://mail-archives.apache.org/mod_mbox/hadoop-common-user/201108.mbox/%3C4E370C97-1541-4FDA-8456-1067DDDC4D77@thelastpickle.com%3E\n\nCassandra is using a log4j PropertyConfigurator which is closing all existing appenders. After a task has completed the TaskLogAppender.flush() is called and it tries to flush without checking if the writer has been closed. I'll upload a patch to check if the writer is closed, and log and silently fail if it is. \n\nThe real problem is the log4j config collision, we're looking to different log4j LoggerRepositories for that. \n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12490914","id":"12490914","filename":"HADDOP-7556.diff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amorton","name":"amorton","key":"amorton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amorton&avatarId=25923","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amorton&avatarId=25923","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amorton&avatarId=25923","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amorton&avatarId=25923"},"displayName":"amorton","active":true,"timeZone":"Pacific/Auckland"},"created":"2011-08-19T04:09:25.056+0000","size":741,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12490914/HADDOP-7556.diff"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"102438","customfield_12312823":null,"summary":"TaskLogAppender does not check if closed before flushing","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amorton","name":"amorton","key":"amorton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amorton&avatarId=25923","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amorton&avatarId=25923","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amorton&avatarId=25923","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amorton&avatarId=25923"},"displayName":"amorton","active":true,"timeZone":"Pacific/Auckland"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amorton","name":"amorton","key":"amorton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amorton&avatarId=25923","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amorton&avatarId=25923","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amorton&avatarId=25923","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amorton&avatarId=25923"},"displayName":"amorton","active":true,"timeZone":"Pacific/Auckland"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519366/comment/13087510","id":"13087510","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amorton","name":"amorton","key":"amorton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amorton&avatarId=25923","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amorton&avatarId=25923","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amorton&avatarId=25923","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amorton&avatarId=25923"},"displayName":"amorton","active":true,"timeZone":"Pacific/Auckland"},"body":"Patch to check if the TaskLogAppender is closed before flushing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amorton","name":"amorton","key":"amorton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amorton&avatarId=25923","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amorton&avatarId=25923","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amorton&avatarId=25923","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amorton&avatarId=25923"},"displayName":"amorton","active":true,"timeZone":"Pacific/Auckland"},"created":"2011-08-19T04:09:25.083+0000","updated":"2011-08-19T04:09:25.083+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519366/comment/13087512","id":"13087512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12490914/HADDOP-7556.diff\n  against trunk revision .\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/53//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-19T04:12:57.622+0000","updated":"2011-08-19T04:12:57.622+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519366/comment/13087522","id":"13087522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amorton","name":"amorton","key":"amorton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amorton&avatarId=25923","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amorton&avatarId=25923","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amorton&avatarId=25923","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amorton&avatarId=25923"},"displayName":"amorton","active":true,"timeZone":"Pacific/Auckland"},"body":"I see my patch failed. Could some one tell me the correct branch (was using branch-0.20) and I will rebase. \n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amorton","name":"amorton","key":"amorton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amorton&avatarId=25923","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amorton&avatarId=25923","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amorton&avatarId=25923","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amorton&avatarId=25923"},"displayName":"amorton","active":true,"timeZone":"Pacific/Auckland"},"created":"2011-08-19T04:26:56.430+0000","updated":"2011-08-19T04:26:56.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519366/comment/13211101","id":"13211101","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"There's a couple of places the patch should go.\n\n* if you want it in trunk & 0.23, then a patch against trunk will usually work in both\n* for the 1.x branch, it'll need to be against hadoop/common/branches/branch-1/\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2012-02-18T21:33:21.134+0000","updated":"2012-02-18T21:33:21.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519366/comment/14525341","id":"14525341","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"This appears to fixed in trunk. Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2015-05-02T16:47:01.974+0000","updated":"2015-05-02T16:47:01.974+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7556/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0hvy7:"}}