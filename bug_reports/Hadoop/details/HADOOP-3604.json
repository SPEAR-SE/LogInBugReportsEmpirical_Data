{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12398655","self":"https://issues.apache.org/jira/rest/api/2/issue/12398655","key":"HADOOP-3604","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312972","id":"12312972","description":"","name":"0.18.0","archived":false,"released":true,"releaseDate":"2008-08-22"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2008-06-20T05:03:21.722+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jul 02 13:27:55 UTC 2008","customfield_12310420":"126060","customfield_12312320":null,"customfield_12310222":"10002_*:*_3_*:*_218129106_*|*_1_*:*_3_*:*_819546556_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_4473304346","customfield_12312321":null,"resolutiondate":"2008-07-02T01:15:38.804+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3604/watchers","watchCount":2,"isWatching":false},"created":"2008-06-20T01:01:03.142+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312972","id":"12312972","description":"","name":"0.18.0","archived":false,"released":true,"releaseDate":"2008-08-22"}],"issuelinks":[{"id":"12409215","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12409215","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12672633","key":"HADOOP-10027","self":"https://issues.apache.org/jira/rest/api/2/issue/12672633","fields":{"summary":"*Compressor_deflateBytesDirect passes instance instead of jclass to GetStaticObjectField","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-02-26T22:20:07.646+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"I was running gridmix with Hadoop 0.18.\nI set the map output compression to true.\nMost of the jobs completed just fine.\nThree jobs, however, got stuck.\nEach has one reducer stuck at shuffling phase.\nHere is the log:\n\n\n2008-06-20 00:06:01,264 INFO org.apache.hadoop.metrics.jvm.JvmMetrics: Initializing JVM Metrics with processName=SHUFFLE, sessionId=\n2008-06-20 00:06:01,415 INFO org.apache.hadoop.streaming.PipeMapRed: PipeMapRed exec [/bin/cat]\n2008-06-20 00:06:01,463 INFO org.apache.hadoop.mapred.ReduceTask: ShuffleRamManager: MemoryLimit=134217728, MaxSingleShuffleLimit=33554432\n2008-06-20 00:06:01,474 INFO org.apache.hadoop.util.NativeCodeLoader: Loaded the native-hadoop library\n2008-06-20 00:06:01,475 INFO org.apache.hadoop.io.compress.zlib.ZlibFactory: Successfully loaded & initialized native-zlib library\n2008-06-20 00:06:01,476 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,477 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,477 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,478 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,478 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,486 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,486 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,487 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,487 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,488 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,488 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,489 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,489 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,489 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,493 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,496 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,496 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,496 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,497 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,497 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor\n2008-06-20 00:06:01,500 INFO org.apache.hadoop.mapred.ReduceTask: attempt_200806192318_0450_r_000016_0 Thread started: Thread for merging on-disk files\n2008-06-20 00:06:01,500 INFO org.apache.hadoop.mapred.ReduceTask: attempt_200806192318_0450_r_000016_0 Thread waiting: Thread for merging on-disk files\n2008-06-20 00:06:01,502 INFO org.apache.hadoop.mapred.ReduceTask: attempt_200806192318_0450_r_000016_0 Need another 270 map output(s) where 0 is already in progress\n2008-06-20 00:06:01,503 INFO org.apache.hadoop.mapred.ReduceTask: attempt_200806192318_0450_r_000016_0 Thread started: Thread for merging in memory files\n2008-06-20 00:06:01,503 INFO org.apache.hadoop.mapred.ReduceTask: attempt_200806192318_0450_r_000016_0: Got 0 new map-outputs & number of known map outputs is 0\n2008-06-20 00:06:01,504 INFO org.apache.hadoop.mapred.ReduceTask: attempt_200806192318_0450_r_000016_0 Scheduled 0 of 0 known outputs (0 slow hosts and 0 dup hosts)\n2008-06-20 00:06:06,654 INFO org.apache.hadoop.mapred.ReduceTask: attempt_200806192318_0450_r_000016_0: Got 269 new map-outputs & number of known map outputs is 269\n2008-06-20 00:06:06,656 INFO org.apache.hadoop.mapred.ReduceTask: attempt_200806192318_0450_r_000016_0 Scheduled 229 of 269 known outputs (0 slow hosts and 40 dup hosts)\n2008-06-20 00:06:07,163 INFO org.apache.hadoop.mapred.ReduceTask: Shuffling 846183 bytes (210104 raw bytes) into RAM-FS from attempt_200806192318_0450_m_000089_0\n2008-06-20 00:06:07,163 INFO org.apache.hadoop.mapred.ReduceTask: Shuffling 820890 bytes (204371 raw bytes) into RAM-FS from attempt_200806192318_0450_m_000083_0\n2008-06-20 00:06:07,166 INFO org.apache.hadoop.mapred.ReduceTask: Shuffling 835672 bytes (208085 raw bytes) into RAM-FS from attempt_200806192318_0450_m_000122_0\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384477","id":"12384477","filename":"HADOOP-3604_0_20080623.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-23T07:10:58.625+0000","size":1168,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12384477/HADOOP-3604_0_20080623.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384655","id":"12384655","filename":"HADOOP-3604_1_20080624.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-25T07:04:00.794+0000","size":23802,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12384655/HADOOP-3604_1_20080624.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384631","id":"12384631","filename":"HADOOP-3604_1_20080624.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T22:27:55.702+0000","size":12568,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12384631/HADOOP-3604_1_20080624.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384734","id":"12384734","filename":"HADOOP-3604_2_20080625.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-26T04:36:20.094+0000","size":23985,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12384734/HADOOP-3604_2_20080625.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384877","id":"12384877","filename":"HADOOP-3604_3_20080627.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-27T22:52:54.968+0000","size":24894,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12384877/HADOOP-3604_3_20080627.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384864","id":"12384864","filename":"HADOOP-3604_3_20080627.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-27T20:16:26.985+0000","size":24590,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12384864/HADOOP-3604_3_20080627.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384999","id":"12384999","filename":"HADOOP-3604_4_20080630.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-01T04:26:50.698+0000","size":28534,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12384999/HADOOP-3604_4_20080630.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384566","id":"12384566","filename":"stack.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T08:04:29.408+0000","size":60295,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12384566/stack.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"104888","customfield_12312823":null,"summary":"Reduce stuck at shuffling phase","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12606609","id":"12606609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"body":"\nThose job completed after I failed those stuck reducers through web GUI.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-20T01:11:15.526+0000","updated":"2008-06-20T01:11:15.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12606631","id":"12606631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"body":"\nmore info:\n\nThe jobs were all streaming jobs.\nIt seems to be reproducible.\nMany copier threads were blocked at socket read:\n\nThread 6022: (state = BLOCKED)\n - java.net.SocketInputStream.socketRead0(java.io.FileDescriptor, byte[], int, int, int) @bci=0 (Interpreted frame)\n - java.net.SocketInputStream.read(byte[], int, int) @bci=84, line=129 (Interpreted frame)\n - java.io.BufferedInputStream.fill() @bci=175, line=218 (Interpreted frame)\n - java.io.BufferedInputStream.read1(byte[], int, int) @bci=44, line=258 (Interpreted frame)\n - java.io.BufferedInputStream.read(byte[], int, int) @bci=49, line=317 (Interpreted frame)\n - sun.net.www.http.HttpClient.parseHTTPHeader(sun.net.www.MessageHeader, sun.net.ProgressSource, sun.net.www.protocol.http.\nHttpURLConnection) @bci=51, line=687 (Interpreted frame)\n - sun.net.www.http.HttpClient.parseHTTP(sun.net.www.MessageHeader, sun.net.ProgressSource, sun.net.www.protocol.http.HttpUR\nLConnection) @bci=30, line=632 (Interpreted frame)\n - sun.net.www.protocol.http.HttpURLConnection.getInputStream() @bci=290, line=1000 (Interpreted frame)\n - org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getInputStream(java.net.URLConnection, int, int) @bci=71\n, line=1217 (Interpreted frame)\n - org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(org.apache.hadoop.mapred.ReduceTask$ReduceC\nopier$MapOutputLocation, org.apache.hadoop.fs.Path) @bci=24, line=1067 (Interpreted frame)\n - org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCop\nier$MapOutputLocation) @bci=181, line=976 (Interpreted frame)\n - org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run() @bci=93, line=925 (Interpreted frame)\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-20T04:33:54.808+0000","updated":"2008-06-20T04:33:54.808+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12606637","id":"12606637","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Runping, did you see any timeouts? Or was that all of the reduce's logs?\nI assume you are using the DefaultCodec.\n\nI'm marking this as a blocker till we understand what is happening...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-20T05:03:21.722+0000","updated":"2008-06-20T05:03:21.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607156","id":"12607156","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"This patch fixes a potential problem in exception handling in ReduceTask.MapOutputCopier.getMapOutput, I'll test this further once I have access to a bigger cluster.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-23T07:10:58.660+0000","updated":"2008-06-23T07:10:58.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607499","id":"12607499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Ok, this turned very murky indeed... \n\nLooks like lots of threads in JVM are hung in a call to Mutex::lock_without_safepoint_check; when I ran jstack over the hung reducer with\n\n$ jstack -F -m <pid>\n\nI saw:\n\n{noformat}\n----------------- 22175 -----------------\n0xffffe410  ????????\n0x00000002  ????????\n0x064e5344  _ZN5Mutex28lock_without_safepoint_checkEv + 0x44\n0x06557f57  _ZN20SafepointSynchronize5blockEP10JavaThread + 0xd7\n0x064fc204  _ZN2os5sleepEP6Threadxb + 0x244\n0x063d5d20  JVM_Sleep + 0x320\n0xf4d863aa  * java.lang.Thread.sleep(long) bci:0 (Interpreted frame)\n0xf4d7ef0d  * org.apache.hadoop.mapred.Task$1.run() bci:31 line:301 (Interpreted frame)\n0xf4d7f3e9  * java.lang.Thread.run() bci:11 line:619 (Interpreted frame)\n...\n...\n\n\n----------------- 22178 -----------------\n0xffffe410  ????????\n0x00000002  ????????\n0x064e5344  _ZN5Mutex28lock_without_safepoint_checkEv + 0x44\n0x06557f57  _ZN20SafepointSynchronize5blockEP10JavaThread + 0xd7\n0x065b79f4  _ZN10JavaThread44check_safepoint_and_suspend_for_native_transEPS_ + 0x2b4\n0x06398e9c  jni_SetByteArrayRegion + 0x7c\n0xd034b55b  Java_java_net_SocketInputStream_socketRead0 + 0xfb\n0xf4d863aa  * java.net.SocketInputStream.socketRead0(java.io.FileDescriptor, byte[], int, int, int) bci:0 (Interpreted frame)\n0xf4d7ede9  * java.net.SocketInputStream.read(byte[], int, int) bci:84 line:129 (Interpreted frame)\n0xf4d7ede9  * java.io.BufferedInputStream.fill() bci:175 line:218 (Interpreted frame)\n0xf4d7ef0d  * java.io.BufferedInputStream.read1(byte[], int, int) bci:44 line:258 (Interpreted frame)\n0xf4d7ede9  * java.io.BufferedInputStream.read(byte[], int, int) bci:49 line:317 (Interpreted frame)\n0xf4d7ede9  * sun.net.www.http.HttpClient.parseHTTPHeader(sun.net.www.MessageHeader, sun.net.ProgressSource, sun.net.www.protocol.http.HttpURLConnection) bci:51 line:687 (Interpreted frame)\n0xf4d7ece1  * sun.net.www.http.HttpClient.parseHTTP(sun.net.www.MessageHeader, sun.net.ProgressSource, sun.net.www.protocol.http.HttpURLConnection) bci:30 line:632 (Interpreted frame)\n0xf4d7ece1  * sun.net.www.protocol.http.HttpURLConnection.getInputStream() bci:290 line:1000 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getInputStream(java.net.URLConnection, int, int) bci:71 line:1230 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation, org.apache.hadoop.fs.Path) bci:54 line:1068 (Interpreted frame)\n...\n...\n\n\n----------------- 22182 -----------------\n0xffffe410  ????????0x00000002  ????????\n0x064e5344  _ZN5Mutex28lock_without_safepoint_checkEv + 0x440x06557f57  _ZN20SafepointSynchronize5blockEP10JavaThread + 0xd7\n0x06594250  _ZN13ObjectMonitor5enterEP6Thread + 0x2a0\n0x0659253a  _ZN18ObjectSynchronizer10slow_enterE6HandleP9BasicLockP6Thread + 0x6a\n0x06365bde  _ZN18InterpreterRuntime12monitorenterEP10JavaThreadP15BasicObjectLock + 0x6e\n0xf4d8f263  * org.apache.log4j.Category.callAppenders(org.apache.log4j.spi.LoggingEvent) bci:13 line:202 (Interpreted frame)\n0xf4d7ef0d  * org.apache.log4j.Category.forcedLog(java.lang.String, org.apache.log4j.Priority, java.lang.Object, java.lang.Throwable) bci:14 line:388 (Interpreted frame)\n0xf4d7ef0d  * org.apache.log4j.Category.log(java.lang.String, org.apache.log4j.Priority, java.lang.Object, java.lang.Throwable) bci:34 line:853 (Interpreted frame)\n0xf4d7ef0d  * org.apache.commons.logging.impl.Log4JLogger.info(java.lang.Object) bci:21 line:133 (Interpreted frame)\n0xf4d7f3e9  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation, org.apache.hadoop.fs.Path) bci:311 line:1114 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation) bci:181 line:976 (Interpreted frame)\n...\n...\n\n\n----------------- 22185 -----------------\n0xffffe410  ????????\n0x00000002  ????????\n0x064e5344  _ZN5Mutex28lock_without_safepoint_checkEv + 0x44\n0x06557f57  _ZN20SafepointSynchronize5blockEP10JavaThread + 0xd7\n0x063639cc  _ZN18InterpreterRuntime8newarrayEP10JavaThread9BasicTypei + 0xfc\n0xf4d8eb97  * java.lang.AbstractStringBuilder.<init>(int) bci:6 line:45 (Interpreted frame)\n0xf4d7ef0d  * java.lang.StringBuffer.<init>() bci:3 line:79 (Interpreted frame)\n0xf4d7ef0d  * java.text.NumberFormat.format(long) bci:6 line:280 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.JobID.toStringWOPrefix() bci:30 line:107 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.TaskID.toStringWOPrefix() bci:13 line:135 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.TaskAttemptID.toStringWOPrefix() bci:13 line:124 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.TaskAttemptID.toString() bci:20 line:118 (Interpreted frame)\n0xf4d7eda7  * java.lang.String.valueOf(java.lang.Object) bci:10 line:2827 (Interpreted frame)\n0xf4d7eda7  * java.lang.StringBuilder.append(java.lang.Object) bci:2 line:115 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation, org.apache.hadoop.fs.Path) bci:372 line:1119 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation) bci:181 line:976 (Interpreted frame)\n0xf4d7ee2b  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run() bci:93 line:925 (Interpreted frame)\n...\n...\n{noformat}\n\n\nSigh! This could possibly mean that we are running into JVM bug - maybe I should upgrade to the latest, stable jvm and check.\n\nOh, the one other point to note is that the native codecs are compiled on a machine with 1.6.0 jvm and are run on nodes with 1.6.0_06...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T07:07:13.431+0000","updated":"2008-06-24T07:07:13.431+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607500","id":"12607500","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"I saw a couple of shuffle threads with:\n\n{noformat}\n----------------- 22176 -----------------0xffffe410  ????????\n0x00000ffc  ????????\n0x0639c149  jni_GetDirectBufferAddress + 0x79\n0xcf9fdf90  Java_org_apache_hadoop_io_compress_lzo_LzoDecompressor_decompressBytesDirect + 0xd0\n0xf4d863aa  * org.apache.hadoop.io.compress.lzo.LzoDecompressor.decompressBytesDirect(int) bci:0 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.io.compress.lzo.LzoDecompressor.decompress(byte[], int, int) bci:116 line:273 (Interpreted frame)\n0xf4d7f2c5  * org.apache.hadoop.io.compress.BlockDecompressorStream.decompress(byte[], int, int) bci:49 line:75 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.io.compress.DecompressorStream.read(byte[], int, int) bci:39 line:74 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation, org.apache.hadoop.fs.Path) bci:549 line:1141 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation) bci:181 line:976 (Interpreted frame)\n0xf4d7ee2b  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run() bci:93 line:925 (Interpreted frame)\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T07:19:54.000+0000","updated":"2008-06-24T08:01:47.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607507","id":"12607507","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Complete output of \"jstack -F -m\" ...\n\nForgot to mention that the process does not respond to 'kill -3' at all.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T08:04:29.441+0000","updated":"2008-06-24T08:04:29.441+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607510","id":"12607510","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Some links to similar bugs wrt SafepointSynchronize::block -> Mutex::lock_without_safepoint_check:\n\nhttp://bugs.sun.com/bugdatabase/view_bug.do;:WuuT?bug_id=4472904\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4639387\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4681171\n\nand:\n\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6601725\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6317397","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T08:18:03.670+0000","updated":"2008-06-24T08:32:30.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607511","id":"12607511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"A blog entry for a java process with similar characteristics i.e. hung jvm which doesn't respond to 'kill -3' etc. :\nhttp://developers.sun.com/solaris/articles/debugjvm/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T08:19:37.034+0000","updated":"2008-06-24T08:19:37.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607711","id":"12607711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm hoping for some traction on http://forum.java.sun.com/thread.jspa?threadID=5308115 ...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T18:12:25.377+0000","updated":"2008-06-24T18:12:25.377+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607717","id":"12607717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"The streaming tasks don't timeout since mapred.task.timeout is set to infinity...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T18:22:10.252+0000","updated":"2008-06-24T18:22:10.252+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607764","id":"12607764","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":"> The streaming tasks don't timeout since mapred.task.timeout is set to infinity... \n\nThat's a bug.  Fixing that should be the blocker, no?  We should not be forced to support such a configuration.\n\nArguably we should have two timeouts, one for user code and one for system code.  If user code hangs, and the user has set an infinite timeout, then the job will hang and that is not a bug.  But if system code hangs then the task would timeout no matter what the user timeout setting.  In general, however, that would be hard to implement, since user code can call system code and vice versa.  But in this particular case, during the shuffle, there's no user code running (except comparators when merging) so we could in theory somehow reset the task timeout during copies.  But even that may be difficult, if some threads are copying and some are merging.  Sigh.  I think we're better of just saying that setting an infinite timeout risks jobs hanging, that Hadoop cannot, e.g., guarantee that jvm's don't ever hang.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T21:13:26.213+0000","updated":"2008-06-24T21:13:26.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607766","id":"12607766","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"body":"\nIt seems to me that there might be a lock contention condition in the jni code of the native compression library to access the direct buffers.\nOnce I limited the number of concurrent calls to the native decompression method to one by adding a lock around it, then the problem is gone.\n{code}\n--- src/core/org/apache/hadoop/io/compress/zlib/ZlibDecompressor.java   (revision 669236)\n+++ src/core/org/apache/hadoop/io/compress/zlib/ZlibDecompressor.java   (working copy)\n@@ -215,7 +215,9 @@\n     uncompressedDirectBuf.limit(directBufferSize);\n \n     // Decompress data\n+    synchronized(ZlibDecompressor.class){\n     n = inflateBytesDirect();\n+    }\n     uncompressedDirectBuf.limit(n);\n\n--- src/core/org/apache/hadoop/io/compress/lzo/LzoDecompressor.java     (revision 669236)\n+++ src/core/org/apache/hadoop/io/compress/lzo/LzoDecompressor.java     (working copy)\n@@ -25,6 +25,7 @@\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;\n import org.apache.hadoop.io.compress.Decompressor;\n import org.apache.hadoop.util.NativeCodeLoader;\n \n /**\n@@ -270,7 +271,9 @@\n     uncompressedDirectBuf.limit(directBufferSize);\n \n     // Decompress data\n+    synchronized(LzoDecompressor.class){\n     n = decompressBytesDirect(strategy.getDecompressor());\n+    }\n     uncompressedDirectBuf.limit(n);\n\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-24T21:19:17.400+0000","updated":"2008-06-24T21:19:17.400+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607784","id":"12607784","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Plausible patch which incorporates Runping's synchronization fix, we'll continue to test this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-24T22:27:55.729+0000","updated":"2008-06-24T22:27:55.729+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12607876","id":"12607876","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"So it looks like a bug in the jvm causing a lock-up when 2 or more threads call 'JniEnv::GetDirectBufferAddress' to get the direct-buffer address in the JNI layer, especially when the first call is initializing the direct-buffer address... \n\n{noformat}\n----------------- 22126 -----------------\n22190 0xffffe410 ????????\n0x00000002 ????????\n0x064e5344 _ZN5Mutex28lock_without_safepoint_checkEv + 0x44\n0x06557f57 _ZN20SafepointSynchronize5blockEP10JavaThread + 0xd7\n0x0639bfd5 lookupDirectBufferClasses + 0x245\n0x0639d5d2 _Z29initializeDirectBufferSupportP7JNIEnv_P10JavaThread + 0x192\n0x0639c149 jni_GetDirectBufferAddress + 0x79\n0xcf9fdf90 Java_org_apache_hadoop_io_compress_lzo_LzoDecompressor_decompressBytesDirect + 0xd0\n0xf4d863aa * org.apache.hadoop.io.compress.lzo.LzoDecompressor.decompressBytesDirect(int) bci:0 (Interpreted frame)\n0xf4d7ede9 * org.apache.hadoop.io.compress.lzo.LzoDecompressor.decompress(byte[], int, int) bci:116 line:273 (Interpreted frame)\n0xf4d7f2c5 * org.apache.hadoop.io.compress.BlockDecompressorStream.decompress(byte[], int, int) bci:49 line:75 (Interpreted frame)\n0xf4d7ede9 * org.apache.hadoop.io.compress.DecompressorStream.read(byte[], int, int) bci:39 line:74 (Interpreted frame)\n0xf4d7ede9 * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation, org.apache.hadoop.fs.Path) bci:549 line:1141 (Interpreted frame)\n0xf4d7eda7 * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation) bci:181 line:976 (Interpreted frame)\n0xf4d7ee2b * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run() bci:93 line:925 (Interpreted frame)\n\n----------------- 22176 -----------------\n0xffffe410  ????????\n0x00000ffc  ????????\n0x0639c149  jni_GetDirectBufferAddress + 0x79\n0xcf9fdf90  Java_org_apache_hadoop_io_compress_lzo_LzoDecompressor_decompressBytesDirect + 0xd0\n0xf4d863aa  * org.apache.hadoop.io.compress.lzo.LzoDecompressor.decompressBytesDirect(int) bci:0 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.io.compress.lzo.LzoDecompressor.decompress(byte[], int, int) bci:116 line:273 (Interpreted frame)\n0xf4d7f2c5  * org.apache.hadoop.io.compress.BlockDecompressorStream.decompress(byte[], int, int) bci:49 line:75 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.io.compress.DecompressorStream.read(byte[], int, int) bci:39 line:74 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation, org.apache.hadoop.fs.Path) bci:549 line:1141 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation) bci:181 line:976 (Interpreted frame)\n0xf4d7ee2b  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run() bci:93 line:925 (Interpreted frame)\n\n----------------- 22172 -----------------\n0xffffe410  ????????\n0x00000ffc  ????????\n0x0639c149  jni_GetDirectBufferAddress + 0x79\n0xcf9fdf90  Java_org_apache_hadoop_io_compress_lzo_LzoDecompressor_decompressBytesDirect + 0xd0\n0xf4d863aa  * org.apache.hadoop.io.compress.lzo.LzoDecompressor.decompressBytesDirect(int) bci:0 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.io.compress.lzo.LzoDecompressor.decompress(byte[], int, int) bci:116 line:273 (Interpreted frame)\n0xf4d7f2c5  * org.apache.hadoop.io.compress.BlockDecompressorStream.decompress(byte[], int, int) bci:49 line:75 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.io.compress.DecompressorStream.read(byte[], int, int) bci:39 line:74 (Interpreted frame)\n0xf4d7ede9  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation, org.apache.hadoop.fs.Path) bci:549 line:1141 (Interpreted frame)\n0xf4d7eda7  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputLocation) bci:181 line:976 (Interpreted frame)\n0xf4d7ee2b  * org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run() bci:93 line:925 (Interpreted frame)\n\n{noformat}\n\nWe synchronized access to 'JniEnv::GetDirectBufferAddress'... voila!\n\nHere is a patch which does fine-grained locking of just the call to JniEnv::GetDirectBufferAddress, it has minimal performance impact and we see a substantial improvement in GridMix with compression on for intermediate map-outputs and no more lockups, whee! *smile*\n\nI'm hoping for a response from the post of the java forum...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-25T07:04:00.833+0000","updated":"2008-06-25T07:04:00.833+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12608271","id":"12608271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Updated patch, gridmix works just fine! *smile*","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-26T04:36:20.126+0000","updated":"2008-06-26T04:36:20.126+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12608288","id":"12608288","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12384734/HADOOP-3604_2_20080625.patch\n  against trunk revision 671563.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no tests are needed for this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    -1 contrib tests.  The patch failed contrib unit tests.\n\nTest results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2742/testReport/\nFindbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2742/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nCheckstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2742/artifact/trunk/build/test/checkstyle-errors.html\nConsole output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2742/console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-26T06:13:15.576+0000","updated":"2008-06-26T06:13:15.576+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12608710","id":"12608710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"Some comments: \n1) In ReduceTask, shouldn't you call mapoutput.discard when there is an exception while reading/writing the map output.\n2) Shouldn't the line {noformat} workmem = (*env)->GetDirectBufferAddress(env, working_memory_buf); {noformat} in LzoCompressor.java be within a LOCK & UNLOCK \n3) In the codec implementations, you lock on a per class level the call to GetDirectBufferAddress. I wonder whether it makes more sense to have all the calls to GetDirectBufferAddress synched on a single global lock. Wouldn't that be the safest thing to do (since we do use both the compression and decompression classes in the same JVM although maybe at different times always).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-06-27T09:33:37.569+0000","updated":"2008-06-27T10:24:51.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12608906","id":"12608906","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Updated patch.\n\nI don't think we need to bother about a global lock for now... so I haven't changed that.\n\nWe don't need to discard MapOutput for error during read since it hasn't been constructed yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-27T20:16:27.013+0000","updated":"2008-06-27T20:16:27.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12608910","id":"12608910","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"body":"\nAgree.\nI think this patch is ready for commit.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-27T20:35:44.873+0000","updated":"2008-06-27T20:35:44.873+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12608939","id":"12608939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Same patch, fixed some indentation issues.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-27T22:52:55.007+0000","updated":"2008-06-27T22:52:55.007+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12608984","id":"12608984","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"Although the MapOutput has not been created, we still need to delete the file on the localfs (when we shuffle the file directly to the disk). If you are convinced that the GetDirectBufferAddress calls don't require a global JVM lock, I am ok.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-06-28T06:15:42.155+0000","updated":"2008-06-28T06:15:42.155+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609015","id":"12609015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"My bad. I'll put the new patch after testing it...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-28T15:12:16.089+0000","updated":"2008-06-28T15:12:16.089+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609444","id":"12609444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Updated patch...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-01T04:26:50.730+0000","updated":"2008-07-01T04:26:50.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609483","id":"12609483","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"body":"Hi arun, do you know whether this bug affects hadoop 0.15 as well? Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"created":"2008-07-01T07:53:13.654+0000","updated":"2008-07-01T07:53:13.654+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609602","id":"12609602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Dhruba, this is a very different bug - looks like a bug in the jvm caused the child reduce's task's jvm to lockup - it wasn't responding to kill -3 too.\n\nSo, it could affect hadoop-0.15, but in a very different manner.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-01T14:25:45.809+0000","updated":"2008-07-01T14:25:45.809+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609608","id":"12609608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"sigh .. I still have one nit - in the methods shuffleToDisk and shuffleInMemory, there is some common code .. For readability/maintainability, could you pls move those out to independent methods. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-07-01T14:39:04.227+0000","updated":"2008-07-01T14:39:04.227+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609631","id":"12609631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"I noticed that there are some differences in the code which i thought was duplicated in the methods... So +1 to the current patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-07-01T16:25:47.160+0000","updated":"2008-07-01T16:25:47.160+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609757","id":"12609757","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12384999/HADOOP-3604_4_20080630.patch\n  against trunk revision 673215.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no tests are needed for this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    -1 contrib tests.  The patch failed contrib unit tests.\n\nTest results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2778/testReport/\nFindbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2778/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nCheckstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2778/artifact/trunk/build/test/checkstyle-errors.html\nConsole output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2778/console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-02T00:44:51.887+0000","updated":"2008-07-02T00:44:51.887+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609766","id":"12609766","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"I just committed this. Thanks, Arun","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-02T01:15:38.800+0000","updated":"2008-07-02T01:15:38.800+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398655/comment/12609923","id":"12609923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-trunk #536 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/536/])","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-02T13:27:55.931+0000","updated":"2008-07-02T13:27:55.931+0000"}],"maxResults":31,"total":31,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3604/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ib2n:"}}