{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12428694","self":"https://issues.apache.org/jira/rest/api/2/issue/12428694","key":"HADOOP-6101","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2010-06-25T23:53:40.359+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jul 30 22:15:56 UTC 2014","customfield_12310420":"77823","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_160975142277_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-30T22:15:56.567+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-6101/watchers","watchCount":7,"isWatching":false},"created":"2009-06-23T18:56:54.330+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313473","id":"12313473","description":"","name":"0.19.1","archived":false,"released":true,"releaseDate":"2009-02-24"}],"issuelinks":[{"id":"12336659","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12336659","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12468672","key":"HDFS-1281","self":"https://issues.apache.org/jira/rest/api/2/issue/12468672","fields":{"summary":"Fix '$bin' path duplication in setup scripts","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-07-30T22:15:56.603+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311393","id":"12311393","name":"scripts"}],"timeoriginalestimate":null,"description":"Most of the scripts in bin/* assume that cd produces no output. But when using bash (and some other shells) cd will output the destination directory if the CDPATH environment variable is set. CDPATH is very useful, and it's unfortunate to have to unset it to use Hadoop.\n\nThe offending line (in start-all.sh, though most of the scripts exhibit the problem) is:\n\n  bin=`cd \"$bin\"; pwd`\n\nAdding this to the top of each affected script will fix the problem:\n\n  unset CDPATH","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"103418","customfield_12312823":null,"summary":"CDPATH environment variable causes bin scripts to fail.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=technomancy","name":"technomancy","key":"technomancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Hagelberg","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=technomancy","name":"technomancy","key":"technomancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Hagelberg","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428694/comment/12882772","id":"12882772","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mccrew","name":"mccrew","key":"mccrew","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve McCarthy","active":true,"timeZone":"Etc/UTC"},"body":"I ran into this as well.  An alternate solution would be to change the lines in the scripts to \n\nbin=`cd \"$bin\" > /dev/null; pwd`","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mccrew","name":"mccrew","key":"mccrew","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve McCarthy","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-25T23:53:40.359+0000","updated":"2010-06-25T23:53:40.359+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428694/comment/12899263","id":"12899263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"What version of bash are you using and what's your CDPATH?  Looking at the way the bin scripts from 19 to trunk, cd is given an absolute path, \".\", or one that starts with \"./\"  from dirname, and bash won't use CDPATH (and print to stdout) if that's the case doesn't seem to use CDPATH used to stdout if that's the case (even though the manual claims it . \n\n{code}\nbin=`dirname \"$0\"`   # or bin=`dirname \"${BASH_SOURCE-$0}\"`\nbin=`cd \"$bin\"; pwd`\n{code}\n\n1. http://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html\n2. http://www.opengroup.org/onlinepubs/009695399/utilities/cd.html\n\nWe can unset CDPATH in the bin scripts but it doesn't look like it should fix anything.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-08-17T04:06:57.502+0000","updated":"2010-08-17T04:06:57.502+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428694/comment/13413973","id":"13413973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dowobeha","name":"dowobeha","key":"dowobeha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lane Schwartz","active":true,"timeZone":"America/New_York"},"body":"This problem occurs when CDPATH is set and includes \".\" (the present working directory). It is unsafe to assume that cd will not print to standard output.\n\nThe bash documentation states:\n\n{quote}\nIf a non-empty directory name from CDPATH is used, or if ‘-’ is the first argument, and the directory change is successful, the absolute pathname of the new working directory is written to the standard output. \n{quote}\n\nSteps to recreate:\n\n1. export CDPATH=.\n2. Run any hadoop script that contains the offending bin=`cd \"$bin\"; pwd` line\n\nIn this case, because CDPATH includes \".\" and the current value of $bin is \".\" an invocation of \"cd\" will cause the current absolute path to be printed to standard output. I have verified this problem occurs under these circumstances using bash 4.1.2(1) on Scientific Linux 6.2.\n\nAs stated above, the safest fix is to find all instances of the following:\n\n{code}\nbin=`cd \"$bin\"; pwd`\n{code}\n\nand replace the above with the following:\n\n{code}\nbin=`cd \"$bin\" &> /dev/null; pwd`\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dowobeha","name":"dowobeha","key":"dowobeha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lane Schwartz","active":true,"timeZone":"America/New_York"},"created":"2012-07-13T19:18:45.814+0000","updated":"2012-07-13T19:18:45.814+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428694/comment/14080065","id":"14080065","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Next version of HADOOP-9902 will include this fix. Closing as a dupe.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2014-07-30T22:15:56.598+0000","updated":"2014-07-30T22:15:56.598+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-6101/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0i1zz:"}}