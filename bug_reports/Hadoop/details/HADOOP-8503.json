{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12560114","self":"https://issues.apache.org/jira/rest/api/2/issue/12560114","key":"HADOOP-8503","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2012-06-11T03:25:09.385+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jun 12 02:25:45 UTC 2012","customfield_12310420":"246836","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-8503/watchers","watchCount":8,"isWatching":false},"created":"2012-06-11T03:22:38.830+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313438","id":"12313438","description":"","name":"0.20.0","archived":false,"released":true,"releaseDate":"2009-04-22"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-06-12T02:25:45.734+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"in the old mapred.FileInputFormat.getSplits(JobConf, int) \n\n\n        long splitSize = computeSplitSize(goalSize, minSize, blockSize);\n\n\nso we could control splitSize with the goalSize, which is controlled by mapred.map.tasks \n\nin the new code, mapreduces.lib.input.FileInputFormat\n\n\n        long splitSize = computeSplitSize(blockSize, minSize, maxSize);\n\ni.e. we don't have goal size anymore, furthermore,\nthe implementation of computeSplitSize() no longer makes sense:\n\n    return Math.max(minSize, Math.min(maxSize, blockSize));\n\nsince we assume that maxSize is always bigger than minSize, the above line is equivalent to  just\nreturn Math.min(maxSize, blockSize), so minSize is useless ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12531757","id":"12531757","filename":"0001-HADOOP-8503-re-enable-mapreduces.job.maps.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","key":"yangyangyyy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-12T02:25:45.654+0000","size":2037,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12531757/0001-HADOOP-8503-re-enable-mapreduces.job.maps.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"43535","customfield_12312823":null,"summary":"logic difference between old mapred.FileInputFormat and mapreduce.lib.input.FileInputFormat","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","key":"yangyangyyy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","key":"yangyangyyy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560114/comment/13292629","id":"13292629","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi Yang,\n\nPlease add more description on what logic difference you speak of here, and which versions of Apache Hadoop is affected by it.\n\nThanks! :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-06-11T03:25:09.385+0000","updated":"2012-06-11T03:25:09.385+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560114/comment/13292641","id":"13292641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"bq. i.e. we don't have goal size anymore\n\nI believe this was intentional and to remove confusion around \"specify number of maps to run\" kind of needs, that doesn't sit well with files as input.\n\nFor the issue with the min/max size, do you mean to report that setting min-split-size has no impact in increasing number of input splits (i.e. mappers)? If possible, can you also attach in code form the bug you wish to report (like, a test case of whats to be expected vs. reality)?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-06-11T05:07:48.421+0000","updated":"2012-06-11T05:07:48.421+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560114/comment/13292644","id":"13292644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","key":"yangyangyyy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true,"timeZone":"Etc/UTC"},"body":"Harsh:\n\nthis is an issue in PIG, which uses the same config for multiple jobs in the same pig script. (one pig script normally translates to several MR jobs)\n\n\nlet's say, for the first PIG stage, I have a huge input file (10G). by default hadoop launches about 10G/128MB = 100 mappers.\n\nif I have 400 mapper slots, I want to launch 400 mappers.  with the old InputFormat code, I could set min.split.size=25MB, with the new code, I could also set max.split.size=25MB, both would work fine.\n\n\nbut the next stage in pig script would take an input of 100GB, now, with 25MB split size,it's going to generate 4000 mappers, which is too much for my 400 slots.\nin the old code, I could set \"mapred.map.tasks=400\" to control the upper limit of map tasks number, or the lower limit of split size (which takes into effect in the Math.max() in computeSplitSize()  ). so I can still maintain 400 mappers.  but the new code would lead to 4000 mappers, which don't make sense anymore.\n\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","key":"yangyangyyy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-11T05:20:02.272+0000","updated":"2012-06-11T05:20:02.272+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560114/comment/13293292","id":"13293292","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","key":"yangyangyyy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true,"timeZone":"Etc/UTC"},"body":"here is a patch to use the new mapreduce.job.maps  config param\n\nit's the same spirit as the old mapred.map.tasks\n\n\nI have not tested this since the github source I pulled does not build . Harsh could you please try this?\n\nThanks\nYang","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","key":"yangyangyyy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-12T02:25:45.709+0000","updated":"2012-06-12T02:25:45.709+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-8503/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07tfj:"}}