{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13160292","self":"https://issues.apache.org/jira/rest/api/2/issue/13160292","key":"HADOOP-15478","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341706","id":"12341706","description":"2.10.0 Release","name":"2.10.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342984","id":"12342984","description":"3.1.1 release","name":"3.1.1","archived":false,"released":true,"releaseDate":"2018-08-07"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-05-18T21:26:39.297+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 21 11:08:45 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_41482272_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_225502934","customfield_12312321":null,"resolutiondate":"2018-05-21T11:08:45.315+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15478/watchers","watchCount":6,"isWatching":false},"created":"2018-05-18T08:59:00.148+0000","customfield_12310192":"WASB: Bug fix for recent regression in hflush() and hsync().","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334219","id":"12334219","description":"2.9.0 release","name":"2.9.0","archived":false,"released":true,"releaseDate":"2017-11-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342733","id":"12342733","description":"3.0.2 release","name":"3.0.2","archived":false,"released":true,"releaseDate":"2018-04-21"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-06-18T05:40:35.598+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12328416","id":"12328416","name":"fs/azure","description":"Azure WASB filesystem client"}],"timeoriginalestimate":null,"description":"HADOOP-14520 introduced a regression in hflush() and hsync().  Previously, for the default case where users upload data as block blobs, these were no-ops.  Unfortunately, HADOOP-14520 accidentally implemented hflush() and hsync() by default, so any data buffered in the stream is immediately uploaded to storage.  This new behavior is undesirable, because block blobs have a limit of 50,000 blocks.  Spark users are now seeing failures due to exceeding the block limit, since Spark frequently invokes hflush().","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12924180","id":"12924180","filename":"HADOOP-15478.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-18T20:10:29.409+0000","size":16389,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12924180/HADOOP-15478.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12924329","id":"12924329","filename":"HADOOP-15478-002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2018-05-21T10:18:58.506+0000","size":16389,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12924329/HADOOP-15478-002.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"WASB: hflush() and hsync() regression","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16481157","id":"16481157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"body":"I've attached HADOOP-15478.001.patch with the fix and new test cases.  The new testBlockBlobHFlush() and testBlockBlobHSync() tests fail without the fix, and pass with the fix.  The new tests ensure correct behavior of flush, hflush, hsync, and close for the output streams used by the WASB driver.\r\n\r\nWASB test results against my Azure storage account are below:\r\n\r\n*$ mvn -T 1C -Dparallel-tests clean verify*\r\n\r\nTests run: 241, Failures: 0, Errors: 0, Skipped: 11\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0\r\nTests run: 444, Failures: 0, Errors: 0, Skipped: 55\r\nTests run: 126, Failures: 3, Errors: 0, Skipped: 10\r\n\r\nNote 3 tests are failing in trunk.  These are failing without my change, and I will look into them.\r\n\r\n*[ERROR] ITestNativeAzureFileSystemLive>NativeAzureFileSystemBaseTest.testFolderLastModifiedTime*:\r\n\r\n651->NativeAzureFileSystemBaseTest.testModifiedTime:1492->Assert.assertTrue:41->Assert.fail:88 Modification time Fri May 18 20:21:56 UTC 2018 is not close to now: Fri May 18 20:21:40 UTC 2018\r\n\r\n*[ERROR] ITestNativeAzureFileSystemLive>NativeAzureFileSystemBaseTest.testModifiedTimeForFile*:\r\n\r\n626->NativeAzureFileSystemBaseTest.testModifiedTime:1492->Assert.assertTrue:41->Assert.fail:88 Modification time Fri May 18 20:23:31 UTC 2018 is not close to now: Fri May 18 20:23:15 UTC 2018\r\n\r\n*[ERROR] ITestNativeAzureFileSystemLive>NativeAzureFileSystemBaseTest.testModifiedTimeForFolder*:\r\n\r\n633->NativeAzureFileSystemBaseTest.testModifiedTime:1492->Assert.assertTrue:41->Assert.fail:88 Modification time Fri May 18 20:21:49 UTC 2018 is not close to now: Fri May 18 20:21:33 UTC 2018\r\n\r\n \r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-18T20:29:47.742+0000","updated":"2018-05-18T20:29:47.742+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16481160","id":"16481160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"body":"Submitting patch HADOOP-15478.001.patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-18T20:30:22.415+0000","updated":"2018-05-18T20:30:22.415+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16481218","id":"16481218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 18s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 26m 44s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 24s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 18s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 27s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 10m 59s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  0m 34s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 19s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 25s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 22s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 22s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 14s{color} | {color:orange} hadoop-tools/hadoop-azure: The patch generated 11 new + 10 unchanged - 0 fixed = 21 total (was 10) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 24s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 29s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  0m 38s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 16s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  1m  4s{color} | {color:green} hadoop-azure in the patch passed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 29s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 55m 39s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:abb62dd |\r\n| JIRA Issue | HADOOP-15478 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12924180/HADOOP-15478.001.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux 0d3b6d81f4cb 3.13.0-139-generic #188-Ubuntu SMP Tue Jan 9 14:43:09 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 89f5911 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_162 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/14660/artifact/out/diff-checkstyle-hadoop-tools_hadoop-azure.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/14660/testReport/ |\r\n| Max. process+thread count | 334 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/14660/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-18T21:26:39.297+0000","updated":"2018-05-18T21:26:39.297+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16481729","id":"16481729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"As usual, which endpoint did you test against?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2018-05-19T18:32:57.469+0000","updated":"2018-05-19T18:32:57.469+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16481743","id":"16481743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"body":"My storage account in West US.  Test results are in the comments above.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmarquardt","name":"tmarquardt","key":"tmarquardt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tmarquardt&avatarId=32243","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tmarquardt&avatarId=32243","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tmarquardt&avatarId=32243","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tmarquardt&avatarId=32243"},"displayName":"Thomas Marquardt","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-19T19:08:49.984+0000","updated":"2018-05-19T19:08:49.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16482364","id":"16482364","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"+1 for trunk & branch-3.1; running the new test on branch-2 too to verify it's OK to go in there","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2018-05-21T10:16:17.917+0000","updated":"2018-05-21T10:16:17.917+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16482371","id":"16482371","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"patch 002 is patch as applied: added LF at end of test file, reordered imports slightly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2018-05-21T10:19:20.482+0000","updated":"2018-05-21T10:19:20.482+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16482373","id":"16482373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m  0s{color} | {color:blue} Docker mode activated. {color} |\r\n| {color:red}-1{color} | {color:red} patch {color} | {color:red}  0m  5s{color} | {color:red} HADOOP-15478 does not apply to trunk. Rebase required? Wrong Branch? See https://wiki.apache.org/hadoop/HowToContribute for help. {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| JIRA Issue | HADOOP-15478 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12924329/HADOOP-15478-002.patch |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/14666/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-21T10:20:50.400+0000","updated":"2018-05-21T10:20:50.400+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16482385","id":"16482385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #14241 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/14241/])\nHADOOP-15478. WASB: hflush() and hsync() regression. Contributed by (stevel: rev ba842847c94d31d3f737226d954c566b5d88656b)\n* (edit) hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azure/PageBlobOutputStream.java\n* (add) hadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azure/ITestOutputStreamSemantics.java\n* (edit) hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azure/SyncableDataOutputStream.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-21T10:35:28.870+0000","updated":"2018-05-21T10:35:28.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160292/comment/16482403","id":"16482403","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"+1\r\napplied to branch-3.1&, then cherrypicked to branch-2 and retested against Azure ireland. new test was happy.\r\n\r\nI did see a failure of {{ITestAzureFileSystemInstrumentation}}; its assertion about bytes written in the last second, even when I tried a standalone run of it\r\n{code}\r\n[ERROR]   ITestAzureFileSystemInstrumentation.testMetricsOnFileCreateRead:162->Assert.assertTrue:41->Assert.fail:88 The bytes written in the last second 0 is pretty far from the expected range of around 1000 bytes plus a little overhead.\r\n{code}\r\n\r\nI think my network is just playing up today, with bandwidth/latency below what the tests expect. If its recurrent, we might have to think about making the assertion checks tuneable.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2018-05-21T11:08:45.340+0000","updated":"2018-05-21T11:08:45.340+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15478/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3tvn3:"}}