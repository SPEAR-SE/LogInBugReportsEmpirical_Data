{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13069416","self":"https://issues.apache.org/jira/rest/api/2/issue/13069416","key":"HADOOP-14387","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2017-05-05T15:12:50.637+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri May 19 15:04:01 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1220123559_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-05-19T14:07:50.630+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-14387/watchers","watchCount":4,"isWatching":false},"created":"2017-05-05T11:12:27.111+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12339180","id":"12339180","name":"3.0.0-alpha4","archived":false,"released":true,"releaseDate":"2017-07-07"}],"issuelinks":[{"id":"12502705","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12502705","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"inwardIssue":{"id":"13058454","key":"HADOOP-14216","self":"https://issues.apache.org/jira/rest/api/2/issue/13058454","fields":{"summary":"Improve Configuration XML Parsing Performance","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-05-19T15:04:01.726+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310711","id":"12310711","name":"conf","description":"Hadoop configuration mechanism."}],"timeoriginalestimate":null,"description":"If you try to create a config via {{new Configuration()}} and there isn't a {{core-site.xml}} on the CP, you get a stack trace. Previously it'd just skip the failure to load.\n\nThis is a regression which breaks downstream apps that don't need a core-site to run, but do want to load core-default &c","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12339180","id":"12339180","name":"3.0.0-alpha4","archived":false,"released":true,"releaseDate":"2017-07-07"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12866672","id":"12866672","filename":"HADOOP-14387.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2017-05-05T21:25:13.912+0000","size":3733,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12866672/HADOOP-14387.1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"new Configuration().get() fails if core-site.xml isn't on the classpath","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"test run in downstream project with no core-site in test/resources","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/15998164","id":"15998164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"{code}\n- Check Hadoop version *** FAILED ***\n  java.lang.RuntimeException: java.io.IOException: Fetch fail on include with no fallback while loading 'core-site.xml'\n  at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:2872)\n  at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:2657)\n  at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:2545)\n  at org.apache.hadoop.conf.Configuration.get(Configuration.java:1325)\n  at com.hortonworks.spark.cloud.CloudSuite$.loadConfiguration(CloudSuite.scala:353)\n  at com.hortonworks.spark.cloud.common.HadoopVersionSuite$$anonfun$1.apply$mcV$sp(HadoopVersionSuite.scala:32)\n  at com.hortonworks.spark.cloud.common.HadoopVersionSuite$$anonfun$1.apply(HadoopVersionSuite.scala:31)\n  at com.hortonworks.spark.cloud.common.HadoopVersionSuite$$anonfun$1.apply(HadoopVersionSuite.scala:31)\n  at org.scalatest.Transformer$$anonfun$apply$1.apply$mcV$sp(Transformer.scala:22)\n  at org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85)\n  ...\n  Cause: java.io.IOException: Fetch fail on include with no fallback while loading 'core-site.xml'\n  at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:2831)\n  at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:2657)\n  at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:2545)\n  at org.apache.hadoop.conf.Configuration.get(Configuration.java:1325)\n  at com.hortonworks.spark.cloud.CloudSuite$.loadConfiguration(CloudSuite.scala:353)\n  at com.hortonworks.spark.cloud.common.HadoopVersionSuite$$anonfun$1.apply$mcV$sp(HadoopVersionSuite.scala:32)\n  at com.hortonworks.spark.cloud.common.HadoopVersionSuite$$anonfun$1.apply(HadoopVersionSuite.scala:31)\n  at com.hortonworks.spark.cloud.common.HadoopVersionSuite$$anonfun$1.apply(HadoopVersionSuite.scala:31)\n  at org.scalatest.Transformer$$anonfun$apply$1.apply$mcV$sp(Transformer.scala:22)\n  at org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-05T11:13:15.410+0000","updated":"2017-05-05T11:13:15.410+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/15998172","id":"15998172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"I'm assuming this is HADOOP-14216 related\n\nwe don't see this in hadoop's own tests as we do tend to have a core-site in test/resources; this is one of mine [which doesnt|https://github.com/steveloughran/spark-cloud-examples/tree/master/cloud-examples]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-05T11:16:32.040+0000","updated":"2017-05-05T11:16:32.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/15998173","id":"15998173","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"cc [~jeagles]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-05T11:16:56.002+0000","updated":"2017-05-05T11:16:56.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/15998232","id":"15998232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"I think may the story here would be to declare that some resources could be absent, with the -site.xml on the list; that way if there's no hdfs-default, core-default things would fail fast, but the site ones were considered optional","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-05T12:00:58.544+0000","updated":"2017-05-05T12:00:58.544+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/15998452","id":"15998452","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"Thanks for filing this jira and bringing this to my attention, [~stevel@apache.org]. Will post a patch shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2017-05-05T15:12:50.637+0000","updated":"2017-05-05T15:12:50.637+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/15998863","id":"15998863","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"{code}\njava.lang.RuntimeException: java.io.IOException: Fetch fail on include with no fallback while loading 'core-site.xml'\n{code}\nThis message looks to be saying that while parsing core-site.xml, it was unable to xinclude a file and there was no fallback. Can you confirm this case, [~stevel@apache.org]?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2017-05-05T19:44:35.891+0000","updated":"2017-05-05T19:44:35.891+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/15998974","id":"15998974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"[~stevel@apache.org], included a patch that includes a better error message as well as allowing for URL includes which is as known problem. Can you comment on whether this fixes the issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2017-05-05T21:25:13.920+0000","updated":"2017-05-05T21:25:13.920+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16000501","id":"16000501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"The problem I'm having is\n\nI'm trying to create a configuration object with: {{new Configuration(true)}} in a test suite downstream. That's all.\n\nThe problem arises as the new code fails fast if any resource is missing, and this test deployment doesn't have a core-site as it's not a live Hadoop cluster.\n{code}\n  static {\n    // Add default resources\n    addDefaultResource(\"core-default.xml\");\n    addDefaultResource(\"core-site.xml\");\n   ...+ check for hadoop-site.xml & load iff present\n  }\n{code}\n\nAnd the default configuration option requires not just the classpath resource {{/core-default.xml}} (which I want) but {{/core-site.xml}}, which isn't here. I suspect if I'd got past that and asked for an HdfsConfiguration or YarnConfiguration I'd hit the same on yarn-site and hdfs-site XML files mapred-site, httpfs-site.xml, kms-site.xml, ...\n\nEssentially: we must not treat the absence of these resource files as a reason to fail the construction. They are optional. \n\nI like the patch and reporting, but it isn't going address this as the problem isn't that the XML file isn't loading: it's that we're treating the failure to find the -site.xml files as a failure\n\nI think we need to move to making the -site.xml files optional, presumably by adding one option for a mandatory resource, and one for an optional one. And for backwards compatibility, probably making addDefaultResource() be for optional., addMandatoryDefaultResource for the mandatory one, so that downstream apps don't suffer the same fate (hbase-site.xml, ....)\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-08T09:31:47.347+0000","updated":"2017-05-08T09:31:47.347+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16000906","id":"16000906","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"I'm also seeing problems when I'm trying to XInclude resources from different JARs, specifically hadoop-common-test referencing anything in hadoop common JAR.\n\nI don't actually know if this is a regression or not because it's something I've never tested before\n\n{code}\n\n<configuration>\n  <include xmlns=\"http://www.w3.org/2001/XInclude\"\n    href=\"/core-default.xml\">\n  </include>\n...\n{code}\n\nHere's the stack trace with the 001 patch applied. Its extra diagnostics are valuable\n\n{code}\n\tat org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\n\tat org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)\nCaused by: java.io.IOException: Fetch fail on include for '/core-default.xml' with no fallback while loading 'contract/localfs.xml'\n\tat org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:2840)\n\tat org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:2663)\n\tat org.apache.hadoop.conf.Configuration.getProps(Configuration.java:2546)\n\tat org.apache.hadoop.conf.Configuration.get(Configuration.java:1326)\n\tat org.apache.hadoop.fs.FileSystem.getDefaultUri(FileSystem.java:240)\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:471)\n\tat org.apache.hadoop.fs.FileSystem.getLocal(FileSystem.java:439)\n\tat org.apache.hadoop.fs.contract.localfs.LocalFSContract.getLocalFS(LocalFSContract.java:89)\n\tat org.apache.hadoop.fs.contract.localfs.LocalFSContract.init(LocalFSContract.java:63)\n\tat org.apache.hadoop.fs.contract.AbstractFSContractTestBase.setup(AbstractFSContractTestBase.java:177)\n\tat org.apache.hadoop.fs.contract.AbstractContractSetTimesTest.setup(AbstractContractSetTimesTest.java:41)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n\tat org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\n\tat org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-08T15:24:09.615+0000","updated":"2017-05-08T15:24:57.180+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16000983","id":"16000983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"Followup: that last failure isn't a regression, it surfaces on branch-2.8 too, if you try to xinclude across JARs\n{code}\ntestSetTimesNonexistentFile(org.apache.hadoop.fs.contract.localfs.TestLocalFSContractSetTimes)  Time elapsed: 0.128 sec  <<< ERROR!\njava.lang.RuntimeException: org.xml.sax.SAXParseException; systemId: file:/Users/stevel/Projects/hadoop-trunk/hadoop-common-project/hadoop-common/target/test-classes/contract/localfs.xml; lineNumber: 22; columnNumber: 13; An include with href 'unknown'failed, and no fallback element was found.\n\tat org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:2713)\n\tat org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:2570)\n\tat org.apache.hadoop.conf.Configuration.getProps(Configuration.java:2443)\n\tat org.apache.hadoop.conf.Configuration.get(Configuration.java:1257)\n\tat org.apache.hadoop.fs.FileSystem.getDefaultUri(FileSystem.java:189)\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:377)\n\tat org.apache.hadoop.fs.FileSystem.getLocal(FileSystem.java:360)\n\tat org.apache.hadoop.fs.contract.localfs.LocalFSContract.getLocalFS(LocalFSContract.java:89)\n\tat org.apache.hadoop.fs.contract.localfs.LocalFSContract.init(LocalFSContract.java:63)\n\tat org.apache.hadoop.fs.contract.AbstractFSContractTestBase.setup(AbstractFSContractTestBase.java:177)\n\tat org.apache.hadoop.fs.contract.AbstractContractSetTimesTest.setup(AbstractContractSetTimesTest.java:41)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n\tat org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\n\tat org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)\nCaused by: org.xml.sax.SAXParseException: An include with href 'unknown'failed, and no fallback element was found.\n\tat com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:257)\n\tat com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)\n\tat javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:150)\n\tat org.apache.hadoop.conf.Configuration.parse(Configuration.java:2548)\n\tat org.apache.hadoop.conf.Configuration.parse(Configuration.java:2536)\n\tat org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:2607)\n\tat org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:2570)\n\tat org.apache.hadoop.conf.Configuration.getProps(Configuration.java:2443)\n\tat org.apache.hadoop.conf.Configuration.get(Configuration.java:1257)\n\tat org.apache.hadoop.fs.FileSystem.getDefaultUri(FileSystem.java:189)\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:377)\n\tat org.apache.hadoop.fs.FileSystem.getLocal(FileSystem.java:360)\n\tat org.apache.hadoop.fs.contract.localfs.LocalFSContract.getLocalFS(LocalFSContract.java:89)\n\tat org.apache.hadoop.fs.contract.localfs.LocalFSContract.init(LocalFSContract.java:63)\n\tat org.apache.hadoop.fs.contract.AbstractFSContractTestBase.setup(AbstractFSContractTestBase.java:177)\n\tat org.apache.hadoop.fs.contract.AbstractContractSetTimesTest.setup(AbstractContractSetTimesTest.java:41)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n\tat org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\n\tat org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-08T16:02:07.310+0000","updated":"2017-05-08T16:02:07.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16001049","id":"16001049","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"[~stevel@apache.org], Could use some help reproducing the case you are seeing. Some background. The original patch tries to maintain the policy that all default resources are optional by checking the reader. \n\n{code:title=Configuration#loadResource}\n      ...\n      if (reader == null) {\n        if (quiet) {\n          return null;\n        }\n        throw new RuntimeException(resource + \" not found\");\n      }\n      ...\n{code}\n\nWhere I am having confusion is the stack trace provided doesn't match the description of how to reproduce. I verified the bug in the stack trace is fixed. I have verified in my setup that core-site.xml is optional using the below test case. Can you help me understand how to reproduce the case you are having? \n\n{code:title=FailConf.java}\nimport org.apache.hadoop.conf.Configuration;\npublic class FailConf {\n  public static void main(String[] args) {\n    Configuration conf = new Configuration();\n    System.out.println(conf.get(\"hadoop.common.configuration.version\"));\n    System.out.println(conf.toString());\n  }\n}\n{code}\n\n{code:title=bash}\n# build hadoop 2.9\n$ mvn clean install package -Pdist -Dtar -DskipTests -Dmaven.javadoc.skip\n# build FailConf.java\n$ javac -cp ./:./hadoop-client/target/hadoop-client-2.9.0-SNAPSHOT/share/hadoop/client/lib/* FailConf.java\n# run FailConf with core-default.xml and no core-site.xml\n$ java -cp ./:./hadoop-client/target/hadoop-client-2.9.0-SNAPSHOT/share/hadoop/client/lib/* FailConf\n# Success\n# 0.23.0\n# Configuration: core-default.xml, core-site.xml\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2017-05-08T16:36:41.218+0000","updated":"2017-05-08T16:36:41.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16001051","id":"16001051","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"My last comment was posted before reading your previous post.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2017-05-08T16:37:49.817+0000","updated":"2017-05-08T16:37:49.817+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16001351","id":"16001351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"[~stevel@apache.org], still eager to get to the bottom of this but I still need help trying to reproduce the failure as stated in the summary. Can you please provide a stack trace or reproducible case that can cause this to fail. I have tried to reproduce this case with the test code above. As you can see from my results, a core-site.xml missing from the classpath is treated as optional based on these steps.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2017-05-08T19:07:45.258+0000","updated":"2017-05-08T19:07:45.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16002400","id":"16002400","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"OK, let me try again; I'd made things go away by adding a core-site.xml\n\nthe project I see this is actually: https://github.com/steveloughran/spark-cloud-examples/tree/master/cloud-examples\n\nI could try something much more minimal though","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-09T09:52:13.243+0000","updated":"2017-05-09T09:52:13.243+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16006163","id":"16006163","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"I've created a simple standalone project and I'm not seeing this, so I'll go back to my other one. That's a bit trickier to work with as it uses spark built downstream of hadoop; you'll need to build all of it. I'll list the details if I can show the problem there consistenty","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-11T09:47:24.385+0000","updated":"2017-05-11T09:47:24.385+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16017442","id":"16017442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"I'm not seeing this any more; don't know what is up.\n\nI'm closing as a cannot reproduce for now. The one about file:// not working is still a serious issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-05-19T14:07:44.741+0000","updated":"2017-05-19T14:07:44.741+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13069416/comment/16017503","id":"16017503","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"Thanks for following up with this [~stevel@apache.org]. My only last thought is that there was a jar with a core-site.xml bundled or a core-site.xml in the classpath by accident. I this does occur, please reopen and I'll be happy to take another look. I'll re-post the attached patch as HADOOP-14399 to handle the file:// case correctly. Thanks, again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2017-05-19T15:04:01.726+0000","updated":"2017-05-19T15:04:01.726+0000"}],"maxResults":17,"total":17,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-14387/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3ejb3:"}}