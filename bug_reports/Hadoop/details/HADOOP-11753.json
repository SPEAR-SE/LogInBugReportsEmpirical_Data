{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12785774","self":"https://issues.apache.org/jira/rest/api/2/issue/12785774","key":"HADOOP-11753","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2015-03-26T04:58:38.201+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Mar 30 10:01:27 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_345980094_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-03-30T04:23:16.111+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-11753/watchers","watchCount":4,"isWatching":false},"created":"2015-03-26T04:16:56.069+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327583","id":"12327583","description":"2.7.0 release","name":"2.7.0","archived":false,"released":true,"releaseDate":"2015-04-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335733","id":"12335733","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-12T18:21:45.864+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311814","id":"12311814","name":"fs/s3","description":"S3A filesystem client and other S3 connectivity issues"}],"timeoriginalestimate":null,"description":"_TestS3AContractOpen#testOpenReadZeroByteFile_ fails as follows.\n\n{code}\ntestOpenReadZeroByteFile(org.apache.hadoop.fs.contract.s3a.TestS3AContractOpen)  Time elapsed: 3.312 sec  <<< ERROR!\ncom.amazonaws.services.s3.model.AmazonS3Exception: Status Code: 416, AWS Service: Amazon S3, AWS Request ID: A58A95E0D36811E4, AWS Error Code: InvalidRange, AWS Error Message: The requested range cannot be satisfied.\n\tat com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:798)\n\tat com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:421)\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:232)\n\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:3528)\n\tat com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:1111)\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.reopen(S3AInputStream.java:91)\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.openIfNeeded(S3AInputStream.java:62)\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.read(S3AInputStream.java:127)\n\tat java.io.FilterInputStream.read(FilterInputStream.java:83)\n\tat org.apache.hadoop.fs.contract.AbstractContractOpenTest.testOpenReadZeroByteFile(AbstractContractOpenTest.java:66)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n\tat org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)\n{code}\n\nThis is because the header is wrong when calling _S3AInputStream#read_ after _S3AInputStream#open_.\n\n{code}\nRange: bytes=0--1\n* from 0 to -1\n{code}\n\nTested on the latest branch-2.7.\n\n{quote}\n$ git log\ncommit d286673c602524af08935ea132c8afd181b6e2e4\nAuthor: Jitendra Pandey <Jitendra@Jitendra-Pandeys-MacBook-Pro-4.local>\nDate:   Tue Mar 24 16:17:06 2015 -0700\n{quote}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12707445","id":"12707445","filename":"HADOOP-11753-branch-2.7.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-03-26T06:38:20.137+0000","size":809,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12707445/HADOOP-11753-branch-2.7.001.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"TestS3AContractOpen#testOpenReadZeroByteFile fails due to negative range header","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14381338","id":"14381338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"body":"_TestS3AContractSeek#testBlockReadZeroByteFile_ fails by the same reason, too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-03-26T04:24:33.088+0000","updated":"2015-03-26T04:24:33.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14381343","id":"14381343","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"body":"Another one.\n\n{code}\ntestSeekZeroByteFile(org.apache.hadoop.fs.contract.s3a.TestS3AContractSeek)  Time elapsed: 9.478 sec  <<< ERROR!\ncom.amazonaws.services.s3.model.AmazonS3Exception: Status Code: 416, AWS Service: Amazon S3, AWS Request ID: 29E6B1A0D37011E4, AWS Error Code: InvalidRange, AWS Error Message: The requested range cannot be satisfied.\n\tat com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:798)\n\tat com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:421)\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:232)\n\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:3528)\n\tat com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:1111)\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.reopen(S3AInputStream.java:91)\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.openIfNeeded(S3AInputStream.java:62)\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.read(S3AInputStream.java:127)\n\tat java.io.FilterInputStream.read(FilterInputStream.java:83)\n\tat org.apache.hadoop.fs.contract.AbstractContractSeekTest.testSeekZeroByteFile(AbstractContractSeekTest.java:88)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n\tat org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-03-26T04:29:19.352+0000","updated":"2015-03-26T04:29:19.352+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14381371","id":"14381371","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreina","name":"andreina","key":"andreina","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"J.Andreina","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi Takenori Sato ,\n\nI would like to work on this jira. If you have already started to work on this patch , please feel free to reassign to you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreina","name":"andreina","key":"andreina","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"J.Andreina","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-03-26T04:58:38.201+0000","updated":"2015-03-26T04:58:38.201+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14381384","id":"14381384","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"body":"Hi, OK, thanks. I was about to start. So I leave this to you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-03-26T05:18:42.657+0000","updated":"2015-03-26T05:18:42.657+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14381389","id":"14381389","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreina","name":"andreina","key":"andreina","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"J.Andreina","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi Takenori Sato,\n\nIt's ok . You can work on this :) . Reassigning to you. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreina","name":"andreina","key":"andreina","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"J.Andreina","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-03-26T05:25:28.910+0000","updated":"2015-03-26T05:25:28.910+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14381462","id":"14381462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"body":"set Range header only when contentLength > 0\n\n{code}\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning org.apache.hadoop.fs.contract.s3a.TestS3AContractCreate\nTests run: 6, Failures: 0, Errors: 0, Skipped: 3, Time elapsed: 19.821 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractCreate\nRunning org.apache.hadoop.fs.contract.s3a.TestS3AContractDelete\nTests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 15.186 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractDelete\nRunning org.apache.hadoop.fs.contract.s3a.TestS3AContractMkdir\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 10.563 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractMkdir\nRunning org.apache.hadoop.fs.contract.s3a.TestS3AContractOpen\nTests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 10.412 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractOpen\nRunning org.apache.hadoop.fs.contract.s3a.TestS3AContractRename\nTests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 25.687 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractRename\nRunning org.apache.hadoop.fs.contract.s3a.TestS3AContractRootDir\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.29 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractRootDir\nRunning org.apache.hadoop.fs.contract.s3a.TestS3AContractSeek\nTests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 36.943 sec - in org.apache.hadoop.fs.contract.s3a.TestS3AContractSeek\nRunning org.apache.hadoop.fs.contract.s3n.TestS3NContractCreate\nTests run: 6, Failures: 0, Errors: 0, Skipped: 3, Time elapsed: 16.791 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractCreate\nRunning org.apache.hadoop.fs.contract.s3n.TestS3NContractDelete\nTests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 12.891 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractDelete\nRunning org.apache.hadoop.fs.contract.s3n.TestS3NContractMkdir\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 9.791 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractMkdir\nRunning org.apache.hadoop.fs.contract.s3n.TestS3NContractOpen\nTests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 8.736 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractOpen\nRunning org.apache.hadoop.fs.contract.s3n.TestS3NContractRename\nTests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 22.308 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractRename\nRunning org.apache.hadoop.fs.contract.s3n.TestS3NContractRootDir\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.716 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractRootDir\nRunning org.apache.hadoop.fs.contract.s3n.TestS3NContractSeek\nTests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 33.433 sec - in org.apache.hadoop.fs.contract.s3n.TestS3NContractSeek\nRunning org.apache.hadoop.fs.s3.TestInMemoryS3FileSystemContract\nTests run: 31, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.641 sec - in org.apache.hadoop.fs.s3.TestInMemoryS3FileSystemContract\nRunning org.apache.hadoop.fs.s3.TestINode\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.127 sec - in org.apache.hadoop.fs.s3.TestINode\nRunning org.apache.hadoop.fs.s3.TestS3Credentials\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.36 sec - in org.apache.hadoop.fs.s3.TestS3Credentials\nRunning org.apache.hadoop.fs.s3.TestS3FileSystem\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.362 sec - in org.apache.hadoop.fs.s3.TestS3FileSystem\nRunning org.apache.hadoop.fs.s3.TestS3InMemoryFileSystem\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.754 sec - in org.apache.hadoop.fs.s3.TestS3InMemoryFileSystem\nRunning org.apache.hadoop.fs.s3a.scale.TestS3ADeleteManyFiles\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 500.943 sec - in org.apache.hadoop.fs.s3a.scale.TestS3ADeleteManyFiles\nRunning org.apache.hadoop.fs.s3a.TestS3ABlocksize\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.25 sec - in org.apache.hadoop.fs.s3a.TestS3ABlocksize\nRunning org.apache.hadoop.fs.s3a.TestS3AConfiguration\nTests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.334 sec - in org.apache.hadoop.fs.s3a.TestS3AConfiguration\nRunning org.apache.hadoop.fs.s3a.TestS3AFastOutputStream\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 9.867 sec - in org.apache.hadoop.fs.s3a.TestS3AFastOutputStream\nRunning org.apache.hadoop.fs.s3a.TestS3AFileSystemContract\nTests run: 31, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 79.965 sec - in org.apache.hadoop.fs.s3a.TestS3AFileSystemContract\nRunning org.apache.hadoop.fs.s3native.TestInMemoryNativeS3FileSystemContract\nTests run: 39, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.382 sec - in org.apache.hadoop.fs.s3native.TestInMemoryNativeS3FileSystemContract\nRunning org.apache.hadoop.fs.s3native.TestJets3tNativeFileSystemStore\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 16.237 sec - in org.apache.hadoop.fs.s3native.TestJets3tNativeFileSystemStore\nRunning org.apache.hadoop.fs.s3native.TestS3NInMemoryFileSystem\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.408 sec - in org.apache.hadoop.fs.s3native.TestS3NInMemoryFileSystem\n\nResults :\n\nTests run: 213, Failures: 0, Errors: 0, Skipped: 6\n\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 14:54 min\n[INFO] Finished at: 2015-03-26T15:28:04+09:00\n[INFO] Final Memory: 24M/200M\n[INFO] ------------------------------------------------------------------------\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-03-26T06:38:20.146+0000","updated":"2015-03-26T06:38:20.146+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14381681","id":"14381681","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"This is interesting. That line hasn't changed since S3a shipped -and I'm not seeing errors against US east.\n\nWhich AWS endpoint are you testing against? Or is it something in-house supporting the S3 protocol?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2015-03-26T10:40:04.950+0000","updated":"2015-03-26T10:40:04.950+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14383659","id":"14383659","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thodemoor","name":"thodemoor","key":"thodemoor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Demoor","active":true,"timeZone":"Europe/Berlin"},"body":"Probably against Cloudian backend.\n\nPlease see the HTTP [spec| https://tools.ietf.org/html/rfc7233#section-2.1]\n{quote} An origin server MUST ignore a Range header field that contains a range unit it does not understand. {quote}\n\nIf you still use the [old spec | https://tools.ietf.org/html/rfc2616#section-14.35.1]\n{quote}The recipient of a byte-range-set that includes one or more syntactically invalid byte-range-spec values MUST ignore the header field that includes that byte-range-set.{quote}\n\nInvestigated vs AWS: correct implementation, the request is served as if it would be a non-ranged GET. (f.i.: (0,-1) on a 0-byte object returns 0 bytes,  (0,-1000) on a 4 byte object returns 4 bytes, ...).\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thodemoor","name":"thodemoor","key":"thodemoor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Demoor","active":true,"timeZone":"Europe/Berlin"},"created":"2015-03-27T10:58:26.286+0000","updated":"2015-03-27T10:58:26.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14386168","id":"14386168","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"body":"Thanks for the clarification. Yes, this is against Cloudian. So let me close. Will check AWS as well for further tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-03-30T04:22:10.365+0000","updated":"2015-03-30T04:22:10.365+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14386427","id":"14386427","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thodemoor","name":"thodemoor","key":"thodemoor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Demoor","active":true,"timeZone":"Europe/Berlin"},"body":"Not sure we should close this. The change you propose seems harmless (the result is the same, the entire object is returned) and it makes the code more readable (one no longer needs to know the HTTP spec) so I'm OK with it (+ it makes your life easier). [~stevel@apache.org] what do you think?\n\nYour other change (HADOOP-11742) is higher risk, we want to be really sure you don't break other backends and AWS is the standard against which we can all run tests, so some more justification is required.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thodemoor","name":"thodemoor","key":"thodemoor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Demoor","active":true,"timeZone":"Europe/Berlin"},"created":"2015-03-30T09:13:32.233+0000","updated":"2015-03-30T09:13:32.233+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14386454","id":"14386454","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"It is harmless, and would stop other things getting confused...I think it could fit into 2.8 with enough regression testing (which is why I didn't rush to get it into the 2.7.0 RC)\n\n HADOOP-11742 is different, though the test changes would seem something worth including —so as to act as a regression test for S3a re-implementations.\n\nAnyone re-implementing the S3 protocols does have to consider it to be incompletely specified: how applications use it must be taken as the implicit API specification, much as the HDFS team accepts HBase's use of HDFS as the reference there. A failure of s3a to work with your implementation should be taken as a discovery of a new quirk in the API as much as a defect in the S3 client.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2015-03-30T09:33:33.246+0000","updated":"2015-03-30T09:33:33.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14386456","id":"14386456","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"[~tsato] Can I add one suggestion -that you build Hadoop (ideally branch-2 & trunk) in your local jenkins server and run the S3 module tests against your implementation? That way regressions in the Hadoop code will get picked up within hours, rather than months.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2015-03-30T09:35:56.404+0000","updated":"2015-03-30T09:35:56.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785774/comment/14386493","id":"14386493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"body":"Thanks, it makes sense. I will discuss internally.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsato","name":"tsato","key":"tsato","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takenori Sato","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-03-30T10:01:27.806+0000","updated":"2015-03-30T10:01:27.806+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-11753/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i27dnz:"}}