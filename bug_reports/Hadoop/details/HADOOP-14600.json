{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13082936","self":"https://issues.apache.org/jira/rest/api/2/issue/13082936","key":"HADOOP-14600","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341432","id":"12341432","description":"3.1.0 release","name":"3.1.0","archived":false,"released":true,"releaseDate":"2018-04-06"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-09-01T09:02:06.088+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Mar 23 16:59:53 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_3_*:*_5688930407_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_3_*:*_7910816211","customfield_12312321":null,"resolutiondate":"2017-12-02T06:24:54.830+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-14600/watchers","watchCount":8,"isWatching":false},"created":"2017-06-27T20:42:28.282+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"12.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334005","id":"12334005","description":"2.7.3 release","name":"2.7.3","archived":false,"released":true,"releaseDate":"2016-08-25"}],"issuelinks":[{"id":"12522571","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12522571","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"13125751","key":"HADOOP-15128","self":"https://issues.apache.org/jira/rest/api/2/issue/13125751","fields":{"summary":"TestViewFileSystem tests are broken in trunk","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12507711","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12507711","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"outwardIssue":{"id":"13080783","key":"SPARK-21137","self":"https://issues.apache.org/jira/rest/api/2/issue/13080783","fields":{"summary":"Spark reads many small files slowly off local filesystem","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-03-23T16:59:53.471+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310689","id":"12310689","name":"fs","description":"Generic FileSystem code"}],"timeoriginalestimate":null,"description":"Reported in SPARK-21137. a {{FileSystem.listStatus}} call really craws against the local FS, because {{FileStatus.getPemissions}} call forces  {{DeprecatedRawLocalFileStatus}} tp spawn a process to read the real UGI values.\n\nThat is: for every other FS, what's a field lookup or even a no-op, on the local FS it's a process exec/spawn, with all the costs. This gets expensive if you have many files.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341432","id":"12341432","description":"3.1.0 release","name":"3.1.0","archived":false,"released":true,"releaseDate":"2018-04-06"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12900152","id":"12900152","filename":"command_line_test_result__linux.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-01T05:43:22.234+0000","size":109578,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12900152/command_line_test_result__linux.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12900151","id":"12900151","filename":"command_line_test_result__windows.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-01T05:43:29.123+0000","size":185944,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12900151/command_line_test_result__windows.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12884977","id":"12884977","filename":"HADOOP-14600.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T16:49:04.451+0000","size":7917,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12884977/HADOOP-14600.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12886284","id":"12886284","filename":"HADOOP-14600.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-10T01:22:49.233+0000","size":17121,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12886284/HADOOP-14600.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12889823","id":"12889823","filename":"HADOOP-14600.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-30T03:17:15.324+0000","size":28214,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12889823/HADOOP-14600.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12890083","id":"12890083","filename":"HADOOP-14600.004.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-03T01:01:49.694+0000","size":29083,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12890083/HADOOP-14600.004.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12890472","id":"12890472","filename":"HADOOP-14600.005.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-05T02:58:31.117+0000","size":29371,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12890472/HADOOP-14600.005.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12896102","id":"12896102","filename":"HADOOP-14600.006.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-05T02:15:44.482+0000","size":29377,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12896102/HADOOP-14600.006.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12898077","id":"12898077","filename":"HADOOP-14600.007.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-16T23:10:49.853+0000","size":29214,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12898077/HADOOP-14600.007.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12898099","id":"12898099","filename":"HADOOP-14600.008.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-17T01:11:19.656+0000","size":28914,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12898099/HADOOP-14600.008.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12898893","id":"12898893","filename":"HADOOP-14600.009.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-22T17:18:18.927+0000","size":28914,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12898893/HADOOP-14600.009.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12884976","id":"12884976","filename":"TestRawLocalFileSystemContract.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T16:49:23.623+0000","size":3379,"mimeType":"text/x-java-source","content":"https://issues.apache.org/jira/secure/attachment/12884976/TestRawLocalFileSystemContract.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"LocatedFileStatus constructor forces RawLocalFS to exec a process to get the permissions","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"file:// in a dir with many files","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16065441","id":"16065441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"{{NativeIO.POSIX.getFstat}} should handle all of this, cross platform. Testable","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-06-27T20:48:08.005+0000","updated":"2017-06-27T20:48:08.005+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16066510","id":"16066510","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"no, fstat() doesn't work, as it needs an open FD, and we don't want to call `open()` here: that could require permissions which the caller may not actually have. We need the `stat(path)` call, which isn't in the package yet.\n\nAny volunteers to add it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-06-28T13:58:45.224+0000","updated":"2017-06-28T13:58:45.224+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16150245","id":"16150245","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"I just followed [~steve_l]'s idea to add stat() native implementation.  Yes, it is similar to fstat() but doesn't need open file as it doesn't require a file descriptor.\n\nNow there is no need to spawn extra thread to gather process info any more.\n\nI did some manual test on both Windows 10 and Linux (Ubuntu on VirtualBox).  It looks like it has dramatic improvement on both systems.\n\n{noformat}\nWindows\n    number of files     time (ms)       time (ms) with native IO\n    \n    100                 14274           1234\n    150                 19002           1782\n    200                 21865           2250\n    500                 timed out       5125\n    \n    1000                timed out       9735\n    2000                timed out       18875\n\nLinux\n    number of files     time (ms)       time (ms) with native IO\n    \n    100                 4539            1632\n    150                 6137            2031\n    200                 7139            2764\n    500                 15566           5292\n    \n    1000                timed out       7490\n    2000                timed out       14040\n{noformat}\n\nThe test is primitive but sufficiently shows the improvement.\n\nAttached is the patch file: *HADOOP-14600__Patch__20170901.txt*.\n\nWhen doing the test, I added testListStatusForPerformance() to TestRawLocalFileSystem.java.  Also attached above.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T09:02:06.088+0000","updated":"2017-09-01T09:02:06.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16150254","id":"16150254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Oops, looks like I don't have permission to attach files.  I'll see if I can request the permission from the mailing list.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T09:09:32.399+0000","updated":"2017-09-01T09:09:32.399+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16150810","id":"16150810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jzhuge","name":"jzhuge","key":"jzhuge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jzhuge&avatarId=31264","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jzhuge&avatarId=31264","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jzhuge&avatarId=31264","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jzhuge&avatarId=31264"},"displayName":"John Zhuge","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~myapachejira], added you to the contributor list and assigned the jira to you. Thank you for working on the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jzhuge","name":"jzhuge","key":"jzhuge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jzhuge&avatarId=31264","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jzhuge&avatarId=31264","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jzhuge&avatarId=31264","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jzhuge&avatarId=31264"},"displayName":"John Zhuge","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-09-01T16:43:16.709+0000","updated":"2017-09-01T16:43:16.709+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16150811","id":"16150811","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jzhuge","name":"jzhuge","key":"jzhuge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jzhuge&avatarId=31264","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jzhuge&avatarId=31264","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jzhuge&avatarId=31264","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jzhuge&avatarId=31264"},"displayName":"John Zhuge","active":true,"timeZone":"America/Los_Angeles"},"body":"Please follow the guidelines in https://wiki.apache.org/hadoop/HowToContribute#Naming_your_patch. The patch file name should be: *HADOOP-14600.NNN.patch*, e.g., *HADOOP-14600.001.patch*.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jzhuge","name":"jzhuge","key":"jzhuge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jzhuge&avatarId=31264","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jzhuge&avatarId=31264","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jzhuge&avatarId=31264","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jzhuge&avatarId=31264"},"displayName":"John Zhuge","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-09-01T16:44:38.618+0000","updated":"2017-09-01T16:45:40.184+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16150822","id":"16150822","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~jzhuge], thanks for your help!\n\nThe patch and the test file are now attached.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T16:52:33.011+0000","updated":"2017-09-01T16:52:33.011+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16150948","id":"16150948","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 24s{color} | {color:blue} Docker mode activated. {color} |\n|| || || || {color:brown} Prechecks {color} ||\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:red}-1{color} | {color:red} test4tests {color} | {color:red}  0m  0s{color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |\n|| || || || {color:brown} trunk Compile Tests {color} ||\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 18m 23s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 14m 38s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 38s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  2s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 27s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 51s{color} | {color:green} trunk passed {color} |\n|| || || || {color:brown} Patch Compile Tests {color} ||\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 40s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 11m 20s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} cc {color} | {color:green} 11m 20s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 11m 20s{color} | {color:green} the patch passed {color} |\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 39s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 5 new + 156 unchanged - 0 fixed = 161 total (was 156) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  3s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 39s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 50s{color} | {color:green} the patch passed {color} |\n|| || || || {color:brown} Other Tests {color} ||\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}  8m 29s{color} | {color:red} hadoop-common in the patch failed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 29s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 64m 23s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed junit tests | hadoop.security.TestRaceWhenRelogin |\n|   | hadoop.fs.sftp.TestSFTPFileSystem |\n|   | hadoop.security.TestKDiag |\n|   | hadoop.net.TestDNS |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:71bbb86 |\n| JIRA Issue | HADOOP-14600 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12884977/HADOOP-14600.001.patch |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  cc  |\n| uname | Linux 568b8f8ee110 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 99a7f5d |\n| Default Java | 1.8.0_144 |\n| findbugs | v3.1.0-RC1 |\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13153/artifact/patchprocess/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/13153/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13153/testReport/ |\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13153/console |\n| Powered by | Apache Yetus 0.6.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T18:05:37.007+0000","updated":"2017-09-01T18:05:37.007+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16151090","id":"16151090","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Now I am trying to do the patch test on my Windows.  It looks like dev-support/bin/test-patch is a BASH script and cannot be run on Windows.  Is there any guide on how to run it on Windows or the patch test is not expected to be run on Windows?\n\nCC: [~aw]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T20:18:23.692+0000","updated":"2017-09-01T20:18:23.692+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16151203","id":"16151203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"You actually can run test-patch on Windows.  I've got a daily job that runs on the ASF infra now. \\Program Files\\Git\\usr\\bin has almost everything you need, outside of cmake, protoc, maven, and whatever features you want. But there are a lot of gotchas.   Beyond that, there are a lot of problems with just using mvn test on Windows.  It's probably better just to specifically use mvn test -Dtest=foo and test your specific foo at the moment.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-09-01T21:45:07.964+0000","updated":"2017-09-01T21:45:07.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16151255","id":"16151255","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~aw]!  I have both Cygwin and Git.  But Neither has /usr/bin.  As I checked Program Files, I found there is another Git installation just as you mentioned!  I can try this one.\n\nBut you are right.  I got lots of cuts and blood with getting mvn test -Dtest=foo running on Windows.  I'll try to run test-patch on Linux and come back test the same scenario on Windows probably with mvn test -Dtest=foo one by one as a workaround.\n\nThanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T22:45:33.088+0000","updated":"2017-09-01T22:45:33.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16151275","id":"16151275","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"bq. As I checked Program Files, I found there is another Git installation just as you mentioned!\n\nIt's good to know my spyware is still working. ;)\n\nIn reality, MingW (which is what that is) comes with the KitWare cmake binary or maybe the git binary package.  Most people who go down this path have it installed already so it was a safe hunch.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-09-01T23:10:25.231+0000","updated":"2017-09-01T23:10:25.231+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16151289","id":"16151289","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Yeah, it must be automatically included with MingW, Visual Studio, or some other installation.  Thanks for telling me that!  It's good to know all of these especially when using command line.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-01T23:23:33.298+0000","updated":"2017-09-01T23:23:33.298+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16154192","id":"16154192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"I couldn't successfully set up a local environment to run test-patch.  So I went to the test result at https://builds.apache.org/job/PreCommit-HADOOP-Build/13153/testReport/ in the above table from [~hadoopqa].\n\nI did manual test on all of five tests as follows.\n\n* TestSFTPFileSystem.testStatFile\n* TestDNS.testDefaultDnsServer\n* TestRaceWhenRelogin.test\n* TestKDiag.testKeytabAndPrincipal\n* TestKDiag.testFileOutput\n* TestKDiag.testLoadResource\n\nBut none of the tests hits on the new method *loadPermissionInfoByNativeIO()* in *RawLocalFileSystem* -- *loadPermissionInfoByNativeIO()* is the new code that swaps the original *_loadPermissionInfo()_* and is the only change to the previous version.\n\nAdditionally, I ran \"mvn test -Pnative -Dtest=allNative\" on my local environment and found 3 failures and 5 errors.\n\nBut they are mainly timed out.  After giving more time, majority of the tests passed.  For  TestRPCWaitForProxy.testInterruptedWaitForProxy, it's the only one still generating error after timeout time has been increased.  However, manual test on it didn't hit the break point in *loadPermissionInfoByNativeIO()* too.\n\nIn summary, I didn't find any failed test case for the target new method, *loadPermissionInfoByNativeIO()*.  Please let me know if this is enough for the verification or there are more tests to run and how.\n\nCC: [~hadoopqa]\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-05T19:52:50.089+0000","updated":"2017-09-05T19:52:50.089+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16156841","id":"16156841","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"bq.  I got lots of cuts and blood with getting mvn test -Dtest=foo running on Window\n\nI like that phrase, I'll have to use it.\n\nIf tests are timing out, that's something a (separate) patch should address.\n\nh3. RawLocalFileSystem\n\n\nL678, 687, 696, 751: need to fallback to non-native code if not present; a lot of client uses of the hadoop libs don't use the native libs (including all our tests)\n\nwe may want to think about actually falling back to the original mechanism if the native IO Fails, e.g\n\n{code}\nif (!isPermissionLoaded() && nativeLibPresent) {\n  try {\n    loadPermissionsByNativeIO()\n  } catch (NativeIOException ex) {\n    LOG.debug(\"Native call failed\", ex)\n  }\n}\nif (!isPermissionLoaded()) {\n  // invoked if \n  loadPermissionInfo();\n}\n{code}\n\nProbably best to pull this out into some common method \"maybeLoadPermissionInfo\". \n\nLooking at the code, I see we don't appear to be doing any synchronization. Really, if a call\nis made to get the perm info, it should block other attempts. Making the proposed\n{{maybeLoadPermissionInfo()}} synchronized would be the easy way to do this\n\n\nL751\n\ndon't bother with StringifyException. I know a lot of old code uses it, but its best just to go\n\nthrow new RuntimeException(\" failure in ...\" + e, e)\n\nthis adds e.toString() to the exception text, and includes the nested exception there for code and logs to print.\n\n\n\nh3. NativeIO.java \n\nL451: include the caught exception in the new one\n\nL456. given this adds nothing, just rethrow the caught exception\n\n\nh3. NativeIO.c\n\nL435. Prefer {{if (path == NULL)}} for consistency.\n\nh3. proposed tests: \n\n# pass in a null path\n# query a nonexistent file","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-09-07T11:55:40.841+0000","updated":"2017-09-07T11:55:40.841+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16157223","id":"16157223","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Excellent comments.  I'm going to make the suggested changes.\n\nFor all of those tests that timed out, they don't use the file permission.  They test something else.  I should have clarified it.\n\nThanks Steve!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-07T16:51:21.848+0000","updated":"2017-09-07T16:51:21.848+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16160168","id":"16160168","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Changes has been made.  *HADOOP-14600.002.patch* is attached.  Also added unit tests.\n\nCC: [~stevel@apache.org]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-10T01:32:18.938+0000","updated":"2017-09-10T01:32:18.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16171960","id":"16171960","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"I like where this is going, done another review. Without looking at my first review...sorry if I'm now inconsistent.\n\n h3. production code\n \n * I'm hoping other people with native build setups can play with this. Any volunteers watching? \n * {{FsPermission}}: wrap the new octal mask table with <pre></pre> tags for formatting in javadocs; document {{mode}} param. \n\nh3. {{NativeIO}} \n\n * L224, L434, anywhere else (TestFsPermission) add a \".\" at the end of the first javadoc sentence in the javadocs. Java 8 javadoc expects that.\n * L455, Raise a {{PathIOException}} with the path, exception string to include the value of nioe.toString. e.g {{throw new PathIOException(path, nioe.toString()), nioe)}}\n \nh3. {{NativeIO.c}}\n * Where is the windows API call {{FindFileOwnerAndPermission}} coming from? I couldn't find it on MSDN.\n \nh3. {{RawLocalFileSystem}}\n\n* L700: don't bother with the HADOOP- ref in the comments; we use the git logs for that.\n* but do use javadocs instead.\n* L707 use {{NativeIO.isAvailable()}} as the check for it being present.\n* {{loadPermissionByNativeIO}}. Have it rethrow as an IOE & catch that in loadPermissionInfo() at L771.\n\nOne thing to consider is: if the native IO fails for one instance, is it going to stay broken for everything? That is: after 1 failure, set some static variable so there are no further attempts? I think this is probably over-complex for now, and so just leave as is.\n\nh3. TestNativeIO\n\n* in the finally clauses, {{fileSystem != null && path != null}} can never be false. Use {{ContractTestUtils.cleanup()}} for a more resilient cleanup.\n* {{doStatTest}} for all the tests which are assertTrue/False/Not null, include a text message which is meanginful. Maybe include the stat.toString() value\n* {{testStatOnError}} Use {{LambdaTestUtils.intercept}} for better reporting when an exception isn't raised, checking of the response, etc.\n\n{code}\nLambdaTestUtils.intercept(IOException.class, testFilePath,\n   () -> NativeIO.POSIX.getStat(testFilePath));\n{code}\n\n{{testMultiThreadedStat()}}. It's good to see some work here, we (I!) undertest the concurrency.\n * could you use Futures & Callable? That has exception raising built in. Or, if you must use Thread, give it a java 8 closure rather than a subclassing.\n\nOne thing to consdier is could {{DeprecatedRawLocalFileStatus.loadPermissionInfoByNonNativeIO()}} could be made package scoped, tagged @VisibleForTesting and then used explicitly in {{TestNativeIO.doStatTest()}}? That'd remove the stat command buildup there, and verify that the output of the native and non-native stat calls match exactly,.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-09-19T16:12:14.267+0000","updated":"2017-09-19T16:12:14.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16186875","id":"16186875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"[~stevel@apache.org]\n\nThanks for your detailed code review!  Really appreciate it.\n\nI just finished making recommended changes and attached *HADOOP-14600.003.patch*.\n\nFollowing are details.\n\n{{Helper.java (new class):}}\n\nFor better supporting unit test, I added some more testing mechanism and moved the logic into a new class called Helper.java.  Now I can not only check permission but also change permission. I didn't find a place where we can put the utilities.  So just add this one.  In case, if one want to added other common utility method.  Helper class can be the place.\n\n{{TestRawLocalFileSystemContract.java:}}\n\nWith this addition, I can improve test by adding testPermission() into TestRawLocalFileSystemContract where now both loadPermissionInfoByNativeIO() and loadPermissionInfoByNonNativeIO() can be directly tested as you suggested. I can test it on Linux.  But on Windows, sticky bit change doesn't take effect.  I guess Windows probably doesn't have sticky bit feature.\n\n{{TestNativeIO.java:}}\n\nSimilarly, doStatTest() was simplified by calling the Helper method.\n\nAlso improved testStatOnError() by using LambdaTestUtils, improved testMultiThreadedStat() by using ExecutorService and Future, also adding testMultiThreadedStatOnError().\n\n{{RawLocalFileSystem.java:}}\n\nA minor issue found (loadPermissionInfo()) is that domain returned with group in Windows.  So we need remove domain.  This is the same as removing domain from domain/user in existing code.\n\nLastly, for {{NativeIO.c}}, FindFileOwnerAndPermission is not a MSDN function.  I found it defined at Line 811 in hadoop-common/src/main/winutils/libwinutils.c.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-30T04:06:59.235+0000","updated":"2017-09-30T04:06:59.235+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16186891","id":"16186891","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 17s{color} | {color:blue} Docker mode activated. {color} |\n|| || || || {color:brown} Prechecks {color} ||\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 4 new or modified test files. {color} |\n|| || || || {color:brown} trunk Compile Tests {color} ||\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 13m 49s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 14m 27s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 39s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  4s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 10m 36s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 25s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 51s{color} | {color:green} trunk passed {color} |\n|| || || || {color:brown} Patch Compile Tests {color} ||\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 39s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 10m 51s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} cc {color} | {color:green} 10m 51s{color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} javac {color} | {color:red} 10m 51s{color} | {color:red} root generated 5 new + 1289 unchanged - 0 fixed = 1294 total (was 1289) {color} |\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 41s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 126 new + 227 unchanged - 1 fixed = 353 total (was 228) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 59s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  9m 14s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 31s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 52s{color} | {color:green} the patch passed {color} |\n|| || || || {color:brown} Other Tests {color} ||\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}  8m  6s{color} | {color:red} hadoop-common in the patch failed. {color} |\n| {color:red}-1{color} | {color:red} asflicense {color} | {color:red}  0m 30s{color} | {color:red} The patch generated 2 ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 76m 35s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed junit tests | hadoop.security.TestKDiag |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:71bbb86 |\n| JIRA Issue | HADOOP-14600 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12889823/HADOOP-14600.003.patch |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  cc  |\n| uname | Linux a86b131ab6c1 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 06df6ab |\n| Default Java | 1.8.0_144 |\n| findbugs | v3.1.0-RC1 |\n| javac | https://builds.apache.org/job/PreCommit-HADOOP-Build/13438/artifact/patchprocess/diff-compile-javac-root.txt |\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13438/artifact/patchprocess/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/13438/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13438/testReport/ |\n| asflicense | https://builds.apache.org/job/PreCommit-HADOOP-Build/13438/artifact/patchprocess/patch-asflicense-problems.txt |\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13438/console |\n| Powered by | Apache Yetus 0.6.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-30T04:37:47.658+0000","updated":"2017-09-30T04:37:47.658+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16189146","id":"16189146","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"=> Fixed license issue\n        - added ASF license header to newly added Helper.java\n\n=> Fixed deprecation issue\n        - added Suppression anotation in TestRawLocalFileSystemContract.testPermission()\n\n=> Fixed leftover test directory and file, which should have be cleaned up\n        - changed to use test base directory (getTestBaseDir()) in TestRawLocalFileSystemContract.testPermission()\n        - this directory will be automatically recycled in tearDown()\n\nPlease note that there are totally three test failures as follows.\n\n{quote}Tests in error: \n  TestKDiag.testKeytabAndPrincipal:162->kdiag:119 ? KerberosAuth Login failure f...\n  TestKDiag.testFileOutput:186->kdiag:119 ? KerberosAuth Login failure for user:...\n  TestKDiag.testLoadResource:196->kdiag:119 ? KerberosAuth Login failure for use...\n\nTests run: 3927, Failures: 0, Errors: 3, Skipped: 206{quote}\n\nThe failures are all from TestKDiag which is not related to HADOOP-14600.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-03T01:18:31.871+0000","updated":"2017-10-03T01:18:31.871+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16189239","id":"16189239","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 53s{color} | {color:blue} Docker mode activated. {color} |\n|| || || || {color:brown} Prechecks {color} ||\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 4 new or modified test files. {color} |\n|| || || || {color:brown} trunk Compile Tests {color} ||\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 34m 22s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 37m 16s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m 29s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  2m 29s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 19m 44s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  3m 34s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 49s{color} | {color:green} trunk passed {color} |\n|| || || || {color:brown} Patch Compile Tests {color} ||\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 52s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 28m 17s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} cc {color} | {color:green} 28m 17s{color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} javac {color} | {color:red} 28m 17s{color} | {color:red} root generated 1 new + 1272 unchanged - 0 fixed = 1273 total (was 1272) {color} |\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  1m 39s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 126 new + 227 unchanged - 1 fixed = 353 total (was 228) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  2m 27s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  9m 47s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 44s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 51s{color} | {color:green} the patch passed {color} |\n|| || || || {color:brown} Other Tests {color} ||\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}  8m 20s{color} | {color:red} hadoop-common in the patch failed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 40s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black}156m 52s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed junit tests | hadoop.security.TestRaceWhenRelogin |\n|   | hadoop.security.TestKDiag |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:71bbb86 |\n| JIRA Issue | HADOOP-14600 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12890083/HADOOP-14600.004.patch |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  cc  |\n| uname | Linux e305e8aa1f0c 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / d4d2fd1 |\n| Default Java | 1.8.0_144 |\n| findbugs | v3.1.0-RC1 |\n| javac | https://builds.apache.org/job/PreCommit-HADOOP-Build/13442/artifact/patchprocess/diff-compile-javac-root.txt |\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13442/artifact/patchprocess/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/13442/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13442/testReport/ |\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13442/console |\n| Powered by | Apache Yetus 0.6.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-03T03:57:59.709+0000","updated":"2017-10-03T03:57:59.709+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16192409","id":"16192409","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"* Moved up deprecation suppression annotation in TestRawLocalFileSystemContract to class level - hopefully this will clear javac warning.\n* Again, the JUnit test failures with KDiag.java and TestRaceWhenRelogin.java are irrelevant to HADOOP-14600.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-05T03:03:00.832+0000","updated":"2017-10-05T03:03:00.832+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16192445","id":"16192445","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 16s{color} | {color:blue} Docker mode activated. {color} |\n|| || || || {color:brown} Prechecks {color} ||\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 4 new or modified test files. {color} |\n|| || || || {color:brown} trunk Compile Tests {color} ||\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 13m  7s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 14m 18s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 39s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  1s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 10m 31s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 24s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 51s{color} | {color:green} trunk passed {color} |\n|| || || || {color:brown} Patch Compile Tests {color} ||\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 39s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 10m 52s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} cc {color} | {color:green} 10m 52s{color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} javac {color} | {color:red} 10m 52s{color} | {color:red} root generated 1 new + 1271 unchanged - 0 fixed = 1272 total (was 1271) {color} |\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 41s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 126 new + 227 unchanged - 1 fixed = 353 total (was 228) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 59s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  8m 41s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 32s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 50s{color} | {color:green} the patch passed {color} |\n|| || || || {color:brown} Other Tests {color} ||\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}  8m  3s{color} | {color:red} hadoop-common in the patch failed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 29s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 74m 58s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed junit tests | hadoop.security.TestRaceWhenRelogin |\n|   | hadoop.security.TestKDiag |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:71bbb86 |\n| JIRA Issue | HADOOP-14600 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12890472/HADOOP-14600.005.patch |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  cc  |\n| uname | Linux b2d29a3938e2 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / e6e614e |\n| Default Java | 1.8.0_144 |\n| findbugs | v3.1.0-RC1 |\n| javac | https://builds.apache.org/job/PreCommit-HADOOP-Build/13455/artifact/patchprocess/diff-compile-javac-root.txt |\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13455/artifact/patchprocess/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/13455/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13455/testReport/ |\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13455/console |\n| Powered by | Apache Yetus 0.6.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-05T04:25:50.458+0000","updated":"2017-10-05T04:25:50.458+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16235082","id":"16235082","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Can someone have a look at this?  As I said before, the unit test failure is irrelevant to this fix.\r\n\r\n[~stevel@apache.org]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-02T02:14:20.590+0000","updated":"2017-11-02T02:14:20.590+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16236837","id":"16236837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"Just skimmed the patch, but this line jumped out:\r\n{noformat}\r\n+cleanup:\r\n+  if (ret == NULL) {\r\n+    if (path)\r\n+      (*env)->ReleaseStringChars(env, j_path, (const jchar*) path);\r\n{noformat}\r\nShouldn't {{path}} be released if not null, even if {{ret != NULL}} ?\r\n\r\nCheckstyle output is gone, but it looks like {{Helper.java}} is not indented correctly. Other than that, this looks good.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-02T23:51:28.751+0000","updated":"2017-11-02T23:51:45.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16239347","id":"16239347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"[~chris.douglas] You are right.  {{path}} doesn't connect to return value.  It should be released regardless the value of {{ret}}.  I just added updated new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-05T02:10:59.506+0000","updated":"2017-11-05T02:10:59.506+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16239375","id":"16239375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  9m 27s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 4 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 16m 28s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 12m 18s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 40s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  6s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 46s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 33s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 54s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 47s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 11m 35s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} cc {color} | {color:green} 11m 35s{color} | {color:green} the patch passed {color} |\r\n| {color:red}-1{color} | {color:red} javac {color} | {color:red} 11m 35s{color} | {color:red} root generated 1 new + 1238 unchanged - 0 fixed = 1239 total (was 1238) {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 40s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 126 new + 228 unchanged - 1 fixed = 354 total (was 229) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  9s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  9m 52s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 40s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 54s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  8m 16s{color} | {color:green} hadoop-common in the patch passed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 30s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 89m 12s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | HADOOP-14600 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12896102/HADOOP-14600.006.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  cc  |\r\n| uname | Linux f9dbcd6c0c70 3.13.0-129-generic #178-Ubuntu SMP Fri Aug 11 12:48:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / b6d8f87 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_131 |\r\n| findbugs | v3.1.0-RC1 |\r\n| javac | https://builds.apache.org/job/PreCommit-HADOOP-Build/13630/artifact/out/diff-compile-javac-root.txt |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13630/artifact/out/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13630/testReport/ |\r\n| Max. process+thread count | 1479 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13630/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-05T03:51:04.812+0000","updated":"2017-11-05T03:51:04.812+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16239376","id":"16239376","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 10m  5s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 4 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 17m 13s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 14m 57s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 46s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 20s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 48s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 50s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 55s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 56s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 13m 34s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} cc {color} | {color:green} 13m 34s{color} | {color:green} the patch passed {color} |\r\n| {color:red}-1{color} | {color:red} javac {color} | {color:red} 13m 34s{color} | {color:red} root generated 1 new + 1238 unchanged - 0 fixed = 1239 total (was 1238) {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 44s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 126 new + 227 unchanged - 1 fixed = 353 total (was 228) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 11s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 10m 50s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 52s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 57s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}  9m 22s{color} | {color:red} hadoop-common in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 34s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 99m 24s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.ha.TestZKFailoverController |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | HADOOP-14600 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12896102/HADOOP-14600.006.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  cc  |\r\n| uname | Linux c04b08ae0511 3.13.0-117-generic #164-Ubuntu SMP Fri Apr 7 11:05:26 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / b6d8f87 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_131 |\r\n| findbugs | v3.1.0-RC1 |\r\n| javac | https://builds.apache.org/job/PreCommit-HADOOP-Build/13629/artifact/out/diff-compile-javac-root.txt |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13629/artifact/out/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/13629/artifact/out/patch-unit-hadoop-common-project_hadoop-common.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13629/testReport/ |\r\n| Max. process+thread count | 1344 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13629/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-05T03:51:34.103+0000","updated":"2017-11-05T03:51:34.103+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16239865","id":"16239865","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"This time unit test fails on different test case (TestZKFailoverController.testGracefulFailover).  But again it is irrelevant to the patch.\r\ncc: [~chris.douglas], [~stevel@apache.org]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-06T03:57:25.304+0000","updated":"2017-11-06T03:57:25.304+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16256125","id":"16256125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for being patient with the reviews, [~myapachejira]. I made a few changes to the patch, almost all to make the patch adhere to the [code conventions|http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html] ([wiki|https://wiki.apache.org/hadoop/HowToContribute]).\r\n\r\nCould you take a look and make sure this didn't accidentally break your changes? The only intended functional change was to {{Helper}} (renamed {{StatUtils}}), to use the {{recursive}} parameter. It looks like this was accidentally unused.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-16T23:13:57.458+0000","updated":"2017-11-16T23:13:57.458+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16256234","id":"16256234","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 10s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 4 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 17m 39s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 15m 21s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 44s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 25s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 10s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m  1s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 58s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 10s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 15m 27s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} cc {color} | {color:green} 15m 27s{color} | {color:green} the patch passed {color} |\r\n| {color:red}-1{color} | {color:red} javac {color} | {color:red} 15m 27s{color} | {color:red} root generated 1 new + 1234 unchanged - 0 fixed = 1235 total (was 1234) {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 43s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 19 new + 228 unchanged - 1 fixed = 247 total (was 229) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 22s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  9m 49s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m 11s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m  0s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 10m 20s{color} | {color:red} hadoop-common in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 34s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 92m 23s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.ha.TestZKFailoverController |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | HADOOP-14600 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12898077/HADOOP-14600.007.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  cc  |\r\n| uname | Linux 774586e826d4 3.13.0-129-generic #178-Ubuntu SMP Fri Aug 11 12:48:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 0987a7b |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_151 |\r\n| findbugs | v3.1.0-RC1 |\r\n| javac | https://builds.apache.org/job/PreCommit-HADOOP-Build/13703/artifact/out/diff-compile-javac-root.txt |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13703/artifact/out/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/13703/artifact/out/patch-unit-hadoop-common-project_hadoop-common.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13703/testReport/ |\r\n| Max. process+thread count | 1478 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13703/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-17T00:53:11.666+0000","updated":"2017-11-17T00:53:11.666+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16256259","id":"16256259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"Trying to fix javac warning...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-17T01:11:28.352+0000","updated":"2017-11-17T01:11:28.352+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16256301","id":"16256301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 17s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 4 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:red}-1{color} | {color:red} mvninstall {color} | {color:red}  0m 22s{color} | {color:red} root in trunk failed. {color} |\r\n| {color:red}-1{color} | {color:red} compile {color} | {color:red}  0m 23s{color} | {color:red} root in trunk failed. {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 20s{color} | {color:green} trunk passed {color} |\r\n| {color:red}-1{color} | {color:red} mvnsite {color} | {color:red}  0m 22s{color} | {color:red} hadoop-common in trunk failed. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  1m  3s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:red}-1{color} | {color:red} findbugs {color} | {color:red}  0m 22s{color} | {color:red} hadoop-common in trunk failed. {color} |\r\n| {color:red}-1{color} | {color:red} javadoc {color} | {color:red}  0m 23s{color} | {color:red} hadoop-common in trunk failed. {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:red}-1{color} | {color:red} mvninstall {color} | {color:red}  0m 21s{color} | {color:red} hadoop-common in the patch failed. {color} |\r\n| {color:red}-1{color} | {color:red} compile {color} | {color:red}  0m 21s{color} | {color:red} root in the patch failed. {color} |\r\n| {color:red}-1{color} | {color:red} cc {color} | {color:red}  0m 21s{color} | {color:red} root in the patch failed. {color} |\r\n| {color:red}-1{color} | {color:red} javac {color} | {color:red}  0m 21s{color} | {color:red} root in the patch failed. {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  1m 17s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 246 new + 0 unchanged - 0 fixed = 246 total (was 0) {color} |\r\n| {color:red}-1{color} | {color:red} mvnsite {color} | {color:red}  0m 44s{color} | {color:red} hadoop-common in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:red}-1{color} | {color:red} shadedclient {color} | {color:red}  4m 39s{color} | {color:red} patch has errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 39s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 48s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  9m 21s{color} | {color:green} hadoop-common in the patch passed. {color} |\r\n| {color:red}-1{color} | {color:red} asflicense {color} | {color:red}  0m 22s{color} | {color:red} The patch generated 1 ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 23m 23s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | HADOOP-14600 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12898099/HADOOP-14600.008.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  cc  |\r\n| uname | Linux f829e2ac21dc 3.13.0-135-generic #184-Ubuntu SMP Wed Oct 18 11:55:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / e182e77 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_151 |\r\n| mvninstall | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/branch-mvninstall-root.txt |\r\n| compile | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/branch-compile-root.txt |\r\n| mvnsite | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/branch-mvnsite-hadoop-common-project_hadoop-common.txt |\r\n| findbugs | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/branch-findbugs-hadoop-common-project_hadoop-common.txt |\r\n| javadoc | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/branch-javadoc-hadoop-common-project_hadoop-common.txt |\r\n| mvninstall | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/patch-mvninstall-hadoop-common-project_hadoop-common.txt |\r\n| compile | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/patch-compile-root.txt |\r\n| cc | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/patch-compile-root.txt |\r\n| javac | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/patch-compile-root.txt |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\r\n| mvnsite | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/patch-mvnsite-hadoop-common-project_hadoop-common.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/testReport/ |\r\n| asflicense | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/artifact/out/patch-asflicense-problems.txt |\r\n| Max. process+thread count | 1340 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13704/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-17T01:44:17.694+0000","updated":"2017-11-17T01:44:17.694+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16257912","id":"16257912","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"[~chris.douglas] excellent catch!  Your correction is perfect.  Yes, {{recursive}} is boolean and will instruct {{Shell.getSetPermissionCommand()}} to get \"set permission command\" either recursively or not based on the flag.  Currently, only non-recursive mode is used.  But in the future, recursive mode can be used when needed.\r\n\r\nOther changes look good.  Thanks for detailed changes!  The only question I have is the number of spaces for indentation.  I notice you are using two spaces in {{StatUtils}}.  I was using two-space before as I think this saves space but was told four-space should be used for readability as two-space looks busy.  Oh, as I just read the Oracle/Sun code convention, it says indentation should be four spaces.  Other than indentation, all else look good.  Thanks Chris!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-18T04:08:57.121+0000","updated":"2017-11-18T04:08:57.121+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16260386","id":"16260386","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. The only question I have is the number of spaces for indentation [...] Oh, as I just read the Oracle/Sun code convention, it says indentation should be four spaces\r\nThat exception is buried in the contribution [docs|https://wiki.apache.org/hadoop/HowToContribute#line-67]. Hadoop uses 2 spaces instead of 4.\r\n\r\nSomething went horribly awry with Jenkins. Have you been able to test v008 locally?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-21T08:01:56.296+0000","updated":"2017-11-21T08:01:56.296+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16262939","id":"16262939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching identical patch, to retry Jenkins...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-22T17:18:31.266+0000","updated":"2017-11-22T17:18:31.266+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16263136","id":"16263136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  9m 27s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 4 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 15m 59s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 12m 16s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 38s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  4s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 34s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 26s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 54s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 43s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 11m 56s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} cc {color} | {color:green} 11m 56s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 11m 56s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 41s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 19 new + 227 unchanged - 1 fixed = 246 total (was 228) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  7s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  9m 50s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 41s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 58s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  9m 15s{color} | {color:green} hadoop-common in the patch passed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 34s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 89m 49s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | HADOOP-14600 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12898893/HADOOP-14600.009.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  cc  |\r\n| uname | Linux ece29766f12c 3.13.0-135-generic #184-Ubuntu SMP Wed Oct 18 11:55:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / de8b6ca |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_151 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/13737/artifact/out/diff-checkstyle-hadoop-common-project_hadoop-common.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/13737/testReport/ |\r\n| Max. process+thread count | 1570 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/13737/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-22T18:50:48.358+0000","updated":"2017-11-22T18:50:48.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16263821","id":"16263821","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"[~chris.douglas] Finally, this round is green.  That's great!  Do you still need me verify it?  If so, I will try to work on it during this weekend.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-23T05:00:56.268+0000","updated":"2017-11-23T05:01:36.624+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16263924","id":"16263924","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"lgtm, but if you have cycles to verify the patch, then let's commit it as soon as you +1 it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-23T07:52:04.474+0000","updated":"2017-11-23T07:52:04.474+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16264406","id":"16264406","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=uzadude","name":"uzadude","key":"uzadude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=uzadude&avatarId=29470","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=uzadude&avatarId=29470","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=uzadude&avatarId=29470","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=uzadude&avatarId=29470"},"displayName":"Ohad Raviv","active":true,"timeZone":"Etc/UTC"},"body":"Hi,\r\nWe also encountered a similar problem as SPARK-21137, when we debugged it we saw that all the time got consumed in the initilazation of LocatedFileStatus when in FileInputFormat tries to get: \r\n{code}\r\nRemoteIterator<LocatedFileStatus> iter = fs.listLocatedStatus(globStat.getPath());\r\n{code}\r\nHowever, non of the \"special\" methods of LocatedFileStatus are used in the loop, so changing it to:\r\n{code}\r\nfor (FileStatus globStat: matches) {\r\n    if (globStat.isDirectory()) {\r\n        RemoteIterator<FileStatus> iter =\r\n                fs.listStatusIterator(globStat.getPath());\r\n        while (iter.hasNext()) {\r\n            FileStatus stat = iter.next();\r\n            if (inputFilter.accept(stat.getPath())) {\r\n                if (recursive && stat.isDirectory()) {\r\n                    addInputPathRecursively(result, fs, stat.getPath(),\r\n                            inputFilter);\r\n                } else {\r\n                    result.add(stat);\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        result.add(globStat);\r\n    }\r\n}\r\n{code}\r\nactually solved all the problem.\r\nI know that it is not the only place that needs to change, \r\nbut I would like to know what do you think about that?\r\n\r\nthanks,\r\nOhad.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=uzadude","name":"uzadude","key":"uzadude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=uzadude&avatarId=29470","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=uzadude&avatarId=29470","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=uzadude&avatarId=29470","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=uzadude&avatarId=29470"},"displayName":"Ohad Raviv","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-23T14:35:40.821+0000","updated":"2017-11-23T14:35:40.821+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16264461","id":"16264461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"doing a recursive walk like that will kill performance against object stores though; the API calls which recurse in the FS client allow the connectors to move from a mock-treewalk to a flat list operation. It's best to fix the FileSystem client the way this patch does.\r\n\r\n\r\nIf spark does -> that new new loop then know it will be pathological on s3 & bring back  SPARK-17593.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-11-23T15:16:11.415+0000","updated":"2017-11-23T15:16:11.415+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16265476","id":"16265476","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=uzadude","name":"uzadude","key":"uzadude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=uzadude&avatarId=29470","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=uzadude&avatarId=29470","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=uzadude&avatarId=29470","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=uzadude&avatarId=29470"},"displayName":"Ohad Raviv","active":true,"timeZone":"Etc/UTC"},"body":"I'm not sure I was clear enough in the above comment.\r\nI totaly agree with your current patch, but I'm saying that the initiator of all this mess from SPARK-21137 is org.apache.hadoop.mapred.FileInputFormat with the following code:\r\n{code}\r\nfor (FileStatus globStat: matches) {\r\n  if (globStat.isDirectory()) {\r\n    RemoteIterator<LocatedFileStatus> iter =\r\n        fs.listLocatedStatus(globStat.getPath());\r\n    while (iter.hasNext()) {\r\n      LocatedFileStatus stat = iter.next();\r\n      if (inputFilter.accept(stat.getPath())) {\r\n        if (recursive && stat.isDirectory()) {\r\n          addInputPathRecursively(result, fs, stat.getPath(),\r\n              inputFilter);\r\n        } else {\r\n          result.add(stat);\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    result.add(globStat);\r\n  }\r\n}\r\n{code}\r\nAll I'm suggesting is to replace `listLocatedStatus` call with `listStatusIterator` because it returns FileStatus rather than LocatedFileStatus and that doesn't trigger all the getPermission() mess at all.\r\ntesting that localy (on Mac) caused the test to run in less than a second instead of about 30 seconds for about 10000 files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=uzadude","name":"uzadude","key":"uzadude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=uzadude&avatarId=29470","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=uzadude&avatarId=29470","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=uzadude&avatarId=29470","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=uzadude&avatarId=29470"},"displayName":"Ohad Raviv","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-24T18:35:58.390+0000","updated":"2017-11-24T18:35:58.390+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16267246","id":"16267246","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. replace `listLocatedStatus` call with `listStatusIterator` because it returns FileStatus rather than LocatedFileStatus and that doesn't trigger all the getPermission() mess at all\r\nGood point. Unfortunately, for everything accepted by the filter (which defaults to accepting everything, IIRC), we double the RPCs if the client subsequently asks for locations. That's bad for HDFS, but irrelevant to the local FS and object stores that don't report locality information.\r\n\r\n[~myapachejira], have you had a chance to verify the patch, yet?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-27T18:54:14.579+0000","updated":"2017-11-27T18:54:14.579+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16268098","id":"16268098","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Yes, Chris.  I am verifying the patch.  There is an issue just found tonight in my Linux environment.  In TestRawLocalFileSystemContract.testPermission(), the native call failed with {{java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$POSIX.stat(Ljava/lang/String;)Lorg/apache/hadoop/io/nativeio/NativeIO$POSIX$Stat;}}.  I'll look into it further.  I guess it is due to my last change.  I'll come back with update.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-28T04:26:28.763+0000","updated":"2017-11-28T04:26:28.763+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16273970","id":"16273970","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"Just verified.  There is no error!\r\n\r\nI missed {{-Pnative}} in Maven build that is required profile to generate JNI native code.  Now after built with {{-Pnative}}, things look good.  I tried the patch on IntelliJ in both Windows and Linux and made sure seeing the code flow into the test cases.\r\n\r\nAlso tested command line console.  I am attaching the command line test results from both Windows and Linux (see attachments: {{command_line_test_result__linux.txt}}, {{command_line_test_result__windows.txt}}).\r\n\r\ncc: [~chris.douglas], [~steve_l]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-01T05:46:48.226+0000","updated":"2017-12-01T05:47:58.645+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16274962","id":"16274962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks, [~myapachejira]. Glad to have that cleared up.\r\n\r\n+1 on the latest patch. [~stevel@apache.org], unless you have other feedback, let's leave further refinements to followup JIRAs and commit this.\r\n\r\nOne question: this speeds up calls through {{DeprecatedRawLocalFileStatus}}. Did you look at refactoring the deprecation logic, to see if this class is still necessary? There are multiple checks for the platform and whether the native library is loaded, and not only for {{FileStatus}} operations. This is likely due to accumulated layers of ad hoc improvements and optimizations in {{RawLocalFileSystem}}. At a glance, it looks feasible to cut the number of inline checks substantially. What do you think?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-12-01T20:55:39.351+0000","updated":"2017-12-01T20:55:39.351+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16275440","id":"16275440","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"I committed this. Thanks [~myapachejira]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-12-02T06:24:54.882+0000","updated":"2017-12-02T06:24:54.882+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16275443","id":"16275443","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #13312 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/13312/])\nHADOOP-14600. LocatedFileStatus constructor forces RawLocalFS to exec a (cdouglas: rev f9d195dfe9cc2c3e4659c3475319ac7c937b5c44)\n* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/nativeio/NativeIO.java\n* (add) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/test/StatUtils.java\n* (edit) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/permission/TestFsPermission.java\n* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/RawLocalFileSystem.java\n* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/permission/FsPermission.java\n* (edit) hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/nativeio/NativeIO.c\n* (edit) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/TestRawLocalFileSystemContract.java\n* (edit) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/io/nativeio/TestNativeIO.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-02T06:44:36.839+0000","updated":"2017-12-02T06:44:36.839+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16275613","id":"16275613","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"body":"This is great to hear!  Finally, this gets in.  Thanks [~chris.douglas]!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myapachejira","name":"myapachejira","key":"myapachejira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ping Liu","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-02T15:36:27.326+0000","updated":"2017-12-02T15:36:27.326+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16411586","id":"16411586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"[~myapachejira] Was taking a look at this exact bug I found this week while running 2.8. Filed HADOOP-15337 to fix, but this is likely the same exactly.  It would be great to have this feature fix in 2.8, but I see this JIRA took a vastly different approach that seems more work to backport. Did you compare the posix file system approach implementation approach for speeds and support? Without realizing you had already fixed this issue, I put a patch up in HADOOP-15337 that shows the alternative implementation approach. Sorry again for being so late to the conversation, not intending to step on toes. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2018-03-23T15:41:22.125+0000","updated":"2018-03-23T15:41:22.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13082936/comment/16411719","id":"16411719","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Without realizing you had already fixed this issue, I put a patch up in HADOOP-15337 that shows the alternative implementation approach. Sorry again for being so late to the conversation, not intending to step on toes.\r\n\r\nNo worries. If the approach in HADOOP-15337 is more portable, performs comparably, and is equivalent, then let's take the simpler approach. Where applicable, do the unit tests on this issue pass in HADOOP-15337, on Linux/MacOS/Windows?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-03-23T16:59:53.471+0000","updated":"2018-03-23T16:59:53.471+0000"}],"maxResults":52,"total":52,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-14600/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3gt07:"}}