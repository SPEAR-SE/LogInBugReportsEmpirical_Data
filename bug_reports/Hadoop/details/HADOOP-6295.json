{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12437151","self":"https://issues.apache.org/jira/rest/api/2/issue/12437151","key":"HADOOP-6295","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2009-10-05T10:03:20.923+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Oct 06 01:14:09 UTC 2009","customfield_12310420":"34278","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_65745145370_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-11-02T18:22:41.162+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-6295/watchers","watchCount":10,"isWatching":false},"created":"2009-10-02T19:50:15.830+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-11-02T18:22:41.195+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312070","id":"12312070","name":"native","description":"The native code that is loaded into the jvm"}],"timeoriginalestimate":null,"description":"Currently, the natively compiled components have a requirement of building from within ant.  To make matters worse, after talking this over with Lee, it appears that the ant build assumes to be executed from a svn-checkout and not from the tarballs that are generated.  We need to\n\na) start packaging up the svn repo trees as src tarballs\nb) separate out the compiled bits out from underneath ant completely\nc) be able to create real builds from the tarball\n\nAs an admin, I shouldn't have to reach for svn to make Hadoop work optimally on non-Linux.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"103281","customfield_12312823":null,"summary":"Build process from tarball is flawed","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437151/comment/12762133","id":"12762133","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"body":"I'm not going offer any of my limited time to help with this, but I will note that I've worked on build files in the past that <exec> a native tar -xf and then run the build file in the expanded directory just to check that the redistributable works. That is, it's possible to automated the test that your redistributables build.\n\nThat said, I'm normally reluctant to provide redists that compile, as encouraging people to check out from SVN actually put them half-way to doing a real fix to correct a problem -lets you answer the \"does the problem go away in SVN_HEAD\" question, and if the answer is no, puts them in a place to do the patch. Perhaps native code is special in that you do need to rebuild it for different target platforms. In which case, perhaps someone needs to be thinking of source RPM/deb packages.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"created":"2009-10-05T10:03:20.923+0000","updated":"2009-10-05T10:03:20.923+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437151/comment/12762251","id":"12762251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":"I agree that releases should be buildable when unpacked: if they're not, that should be a blocking bug.\n\nHowever I do not see that we need Ant-independent builds.  We currently require Ant to build Hadoop.  So this part does not seem like a bug.  Changing things so that the native code can be built without Ant would be a new feature that we should discuss separately from making sure that native sources in release tarballs are buildable.  Does that make sense?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-10-05T16:44:46.447+0000","updated":"2009-10-05T16:44:46.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437151/comment/12762266","id":"12762266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hong.tang","name":"hong.tang","key":"hong.tang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Tang","active":true,"timeZone":"Etc/UTC"},"body":"One possible deficiency in the current native code compilation is that On modern 64-bit capable intel processors, we would compile either 32-bit or 64-bit native library depending on the version of JVM being used by ant.\n\nTypically, we invoke the build process twice, with 32-bit and 64-bit jvm without cleaning the build directory, so that the release version can be used without worrying about which version of jvm is used in the cluster.\n\nMight it be better if we just build both 32-bit and 64-bit versions up front?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hong.tang","name":"hong.tang","key":"hong.tang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2009-10-05T17:07:04.548+0000","updated":"2009-10-05T17:07:04.548+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437151/comment/12762480","id":"12762480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=metcalfc","name":"metcalfc","key":"metcalfc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chad Metcalf","active":true,"timeZone":"Etc/UTC"},"body":"The native parts can be compiled separately. They are autoconf'd. What does need to get fixed:\n\n* Autoconf files that should not be committed (config.guess, config.sub, ltmain.sh) need to be removed\n* The ant scripts need to call the standard autoreconf commands themselves for developers\n* When src tarballs are made the equlivent of make dist needs to be called so that there are no autoconf version problems its all in one configure script\n\nThe current setup can result in weird errors on various platforms depending on what auto toolchains you have installed. This isn't hard almost all the right places are in the current build.xml files. The tarball make dist part is slightly harder.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=metcalfc","name":"metcalfc","key":"metcalfc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chad Metcalf","active":true,"timeZone":"Etc/UTC"},"created":"2009-10-06T01:14:09.298+0000","updated":"2009-10-06T01:14:09.298+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-6295/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0i15j:"}}