{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13016728","self":"https://issues.apache.org/jira/rest/api/2/issue/13016728","key":"HADOOP-13774","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2017-01-05T21:09:01.911+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 06 10:37:29 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-13774/watchers","watchCount":2,"isWatching":false},"created":"2016-10-31T21:06:34.277+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334005","id":"12334005","description":"2.7.3 release","name":"2.7.3","archived":false,"released":true,"releaseDate":"2016-08-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-01-06T10:37:29.238+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"Hello,\nI am launching an app within a MR REST. This app executes well within Hadoop normal invocation. However, when I use the rest \n{code}\ncurl -i -X POST -H 'Accept: application/json' -H 'Content-Type: application/json' http://localhost:8088/ws/v1/cluster/apps?user.name=exo -d @app.json\n{code} \n6/10/31 21:42:13 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:8032\n16/10/31 21:42:14 INFO input.FileInputFormat: Total input paths to process : 4\n16/10/31 21:42:14 INFO mapreduce.JobSubmitter: number of splits:4\n16/10/31 21:42:14 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1477946173138_0003\n16/10/31 21:42:14 INFO mapreduce.JobSubmitter: Kind: YARN_AM_RM_TOKEN, Service: , Ident: (appAttemptId { application_id { id: 3 cluster_timestamp: 1477946173138 } attemptId: 1 } keyId: -678745738)\n16/10/31 21:42:15 INFO impl.YarnClientImpl: Submitted application application_1477946173138_0003\n16/10/31 21:42:15 INFO mapreduce.Job: The url to track the job: http://MEA-029-L:8088/proxy/application_1477946173138_0003/\n16/10/31 21:42:15 INFO mapreduce.Job: Running job: job_1477946173138_0003\n16/10/31 21:52:53 INFO mapreduce.Job: Job job_1477946173138_0003 running in uber mode : false\n16/10/31 21:52:53 INFO mapreduce.Job:  map 0% reduce 0%\n16/10/31 21:52:53 INFO mapreduce.Job: Job job_1477946173138_0003 failed with state FAILED due to: Application application_1477946173138_0003 failed 1 times due to ApplicationMaster for attempt appattempt_1477946173138_0003_000001 timed out. Failing the application.\n16/10/31 21:52:53 INFO mapreduce.Job: Counters: 0\n{code}\nThe main job always ends fail with timeout. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12836225","id":"12836225","filename":"app.json","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-31T21:07:25.686+0000","size":2281,"mimeType":"application/json","content":"https://issues.apache.org/jira/secure/attachment/12836225/app.json"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12836323","id":"12836323","filename":"Error_message.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-01T09:58:35.456+0000","size":175561,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12836323/Error_message.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12836322","id":"12836322","filename":"Failed_app_exec.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-01T09:58:35.450+0000","size":156022,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12836322/Failed_app_exec.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12836226","id":"12836226","filename":"WordCount.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-31T21:07:26.969+0000","size":3477,"mimeType":"text/x-java","content":"https://issues.apache.org/jira/secure/attachment/12836226/WordCount.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Rest Loaded App fails","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hadoop Map Reduce REST","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016728/comment/15624977","id":"15624977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"body":"In several times, the job of mapreduce ended with success. However the Job which launched it failed [^Failed_app_exec.png]\n{code}\n16/11/01 10:33:16 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:8032\n16/11/01 10:33:18 INFO input.FileInputFormat: Total input paths to process : 4\n16/11/01 10:33:18 INFO mapreduce.JobSubmitter: number of splits:4\n16/11/01 10:33:18 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1477992554679_0002\n16/11/01 10:33:18 INFO mapreduce.JobSubmitter: Kind: YARN_AM_RM_TOKEN, Service: , Ident: (appAttemptId { application_id { id: 1 cluster_timestamp: 1477992554679 } attemptId: 1 } keyId: 1178737823)\n16/11/01 10:33:19 INFO impl.YarnClientImpl: Submitted application application_1477992554679_0002\n16/11/01 10:33:19 INFO mapreduce.Job: The url to track the job: http://MEA-029-L:8088/proxy/application_1477992554679_0002/\n16/11/01 10:33:19 INFO mapreduce.Job: Running job: job_1477992554679_0002\n16/11/01 10:46:00 INFO mapreduce.Job: Job job_1477992554679_0002 running in uber mode : false\n16/11/01 10:46:00 INFO mapreduce.Job:  map 0% reduce 0%\n16/11/01 10:46:10 INFO mapreduce.Job:  map 75% reduce 0%\n16/11/01 10:46:11 INFO mapreduce.Job:  map 100% reduce 0%\n16/11/01 10:46:15 INFO mapreduce.Job:  map 100% reduce 100%\n16/11/01 10:46:16 INFO mapreduce.Job: Job job_1477992554679_0002 completed successfully\n16/11/01 10:46:16 INFO mapreduce.Job: Counters: 49\n\tFile System Counters\n\t\tFILE: Number of bytes read=47766\n\t\tFILE: Number of bytes written=688270\n\t\tFILE: Number of read operations=0\n\t\tFILE: Number of large read operations=0\n\t\tFILE: Number of write operations=0\n\t\tHDFS: Number of bytes read=105882\n\t\tHDFS: Number of bytes written=33400\n\t\tHDFS: Number of read operations=15\n\t\tHDFS: Number of large read operations=0\n\t\tHDFS: Number of write operations=2\n\tJob Counters \n\t\tLaunched map tasks=4\n\t\tLaunched reduce tasks=1\n\t\tData-local map tasks=4\n\t\tTotal time spent by all maps in occupied slots (ms)=30786\n\t\tTotal time spent by all reduces in occupied slots (ms)=2869\n\t\tTotal time spent by all map tasks (ms)=30786\n\t\tTotal time spent by all reduce tasks (ms)=2869\n\t\tTotal vcore-milliseconds taken by all map tasks=30786\n\t\tTotal vcore-milliseconds taken by all reduce tasks=2869\n\t\tTotal megabyte-milliseconds taken by all map tasks=31524864\n\t\tTotal megabyte-milliseconds taken by all reduce tasks=2937856\n\tMap-Reduce Framework\n\t\tMap input records=2161\n\t\tMap output records=14799\n\t\tMap output bytes=161969\n\t\tMap output materialized bytes=47784\n\t\tInput split bytes=413\n\t\tCombine input records=14799\n\t\tCombine output records=2988\n\t\tReduce input groups=2667\n\t\tReduce shuffle bytes=47784\n\t\tReduce input records=2988\n\t\tReduce output records=2667\n\t\tSpilled Records=5976\n\t\tShuffled Maps =4\n\t\tFailed Shuffles=0\n\t\tMerged Map outputs=4\n\t\tGC time elapsed (ms)=1199\n\t\tCPU time spent (ms)=5150\n\t\tPhysical memory (bytes) snapshot=1253482496\n\t\tVirtual memory (bytes) snapshot=9562353664\n\t\tTotal committed heap usage (bytes)=925892608\n\tShuffle Errors\n\t\tBAD_ID=0\n\t\tCONNECTION=0\n\t\tIO_ERROR=0\n\t\tWRONG_LENGTH=0\n\t\tWRONG_MAP=0\n\t\tWRONG_REDUCE=0\n\tFile Input Format Counters \n\t\tBytes Read=105469\n\tFile Output Format Counters \n\t\tBytes Written=33400\n{code}\n\nIt always end with the same error message [^Error_message.png].\neven with increasing the *mapreduce.task.timeout*  \n{code}\n<property>\n  <name>mapreduce.task.timeout</name>\n  <value>1800000</value>\n  <description>The number of milliseconds before a task will be\n  terminated if it neither reads an input, writes an output, nor\n  updates its status string.  A value of 0 disables the timeout.\n  </description>\n</property>\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-01T09:58:35.460+0000","updated":"2016-11-01T09:58:35.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016728/comment/15802529","id":"15802529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"body":"Hi, we should set target version instead of fix version when jira is open. The fix version is used when patch get committed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"created":"2017-01-05T21:09:01.911+0000","updated":"2017-01-05T21:09:01.911+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016728/comment/15804254","id":"15804254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"body":"Sorry for the missing information. Affect version updated","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bourasom","name":"bourasom","key":"bourasom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bourasom&avatarId=29685","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bourasom&avatarId=29685","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bourasom&avatarId=29685","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bourasom&avatarId=29685"},"displayName":"Omar Bouras","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-06T10:37:29.238+0000","updated":"2017-01-06T10:37:29.238+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-13774/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i35n6f:"}}