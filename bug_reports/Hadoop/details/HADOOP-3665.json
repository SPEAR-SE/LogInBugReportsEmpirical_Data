{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12399247","self":"https://issues.apache.org/jira/rest/api/2/issue/12399247","key":"HADOOP-3665","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312972","id":"12312972","description":"","name":"0.18.0","archived":false,"released":true,"releaseDate":"2008-08-22"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2008-06-30T21:59:33.269+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Aug 22 12:34:17 UTC 2008","customfield_12310420":"81315","customfield_12312320":null,"customfield_12310222":"10002_*:*_3_*:*_232856879_*|*_1_*:*_3_*:*_120305440_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_4305808242","customfield_12312321":null,"resolutiondate":"2008-07-03T23:47:15.634+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3665/watchers","watchCount":1,"isWatching":false},"created":"2008-06-29T21:41:13.315+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10342","value":"Incompatible change","id":"10342"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312740","id":"12312740","description":"","name":"0.16.0","archived":false,"released":true,"releaseDate":"2008-02-07"}],"issuelinks":[{"id":"12320789","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12320789","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12389992","key":"HADOOP-2922","self":"https://issues.apache.org/jira/rest/api/2/issue/12389992","fields":{"summary":"sequencefiles without keys","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-08-22T19:50:43.875+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310687","id":"12310687","name":"io","description":""}],"timeoriginalestimate":null,"description":"It is not possible to use NullWritable as a key in order to suppress key value in output.\n\nSyndrome exception:\nCaused by: java.lang.IllegalAccessException: Class org.apache.hadoop.io.WritableComparator can not access a member of class org.apache.hadoop.io.NullWritable with modifiers \"private\"\n\nThe problem is that NullWritable is a singleton and does not provide public non-parametric constructor. The following code in WritableComparator causes the exception: return (WritableComparable)keyClass.newInstance();\n\nProposed simple solution is to use ReflectionUtils instead (it requires modification as well).\n\nThis issue is probably related to HADOOP-2922","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12385009","id":"12385009","filename":"3665-0.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-01T07:04:18.743+0000","size":9996,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12385009/3665-0.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12385023","id":"12385023","filename":"3665-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-01T09:24:55.121+0000","size":10363,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12385023/3665-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12385142","id":"12385142","filename":"3665-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-02T20:21:02.134+0000","size":9633,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12385142/3665-2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384929","id":"12384929","filename":"HADOOP-3665.path","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"created":"2008-06-29T22:13:09.542+0000","size":7421,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12384929/HADOOP-3665.path"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"104841","customfield_12312823":null,"summary":"WritableComparator newKey() fails for NullWritable","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"n/a","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12609140","id":"12609140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"body":"Here is simple patch. Please review it!\n\nStill there are few questions/notes opened I think:\n1) There is no clear way how to learn whether particular WritableComparator can be instantiated or not. There should be some new interface introduced for singletons.\n2) It is not clear if key value can be of zero length. For NullWritable it make sense but it has nothing to do with the fact that it is a singleton I think.\n3) I found other two classes implementing WritableComparable having private or protected constructor. These are ID and TaskID. Since they are both WritableComparable they may be used as a key (I can not tell if there is any point in such use case but technically it should be possible). This patch DOES NOT fixes such use case in any way.\n\nGiving these notes together I can see the following conclusion:\nGoing forward it should be possible to learn if WritableComparable:\na) can be used as a key\nb) can have zero length\nc) can be instantiated using constructor and if not then what is the way to get the instance.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"created":"2008-06-29T22:13:09.576+0000","updated":"2008-06-29T22:13:09.576+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12609381","id":"12609381","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"* NullWritable should define a RawComparator, so it doesn't need to use the default WritableComparator rather than special-casing NullWritable\n* Your apt use of ReflectionUtils calls out a separate issue with WritableComparator, i.e. that the keys and values it uses are not Configured, where in most contexts they are. This should probably be a separate JIRA...\n* SequenceFile shouldn't make a special case of NullWritable, either. Does the rest of the logic still work if the expression is changed from keylength == 0 to keylength < 0?\n* ReflectionUtils shouldn't special-case NullWritable, either. Are you certain this is necessary? Doesn't setAccessible take care of this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-30T21:59:33.269+0000","updated":"2008-06-30T21:59:33.269+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12609404","id":"12609404","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"body":"The whole point is that I would like to understand how Reduce job can output a file without any key values in it. The NullWritable seemed to be an ideal candidate for this but unfortunately I ran into exceptions when trying it. So I made a quick and dirty fix which is not meant to be a production ready (obviously NullWritable should not be special-cased in any way!).\n\nOn the other hand there seemed to be some questions which need to be asked and possible addressed. One of them is that ReflectionUtils is able to call any constructor after setAccessible is set to true but is this what we really want for singleton keys? And do we really need singleton keys at all? (I believe the answer is positive). How about size (length) of key value? Is it allowed to be zero? And why WritableComparato calls to newInstance method while this causes issues with any class having non-public constructor?\n\nThese were the questions I was trying to acknowledge while learning Hadoop and trying to experiment with some simple jobs having no Reduce output key...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"created":"2008-06-30T23:43:29.373+0000","updated":"2008-06-30T23:43:29.373+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12609474","id":"12609474","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. The whole point is that I would like to understand how Reduce job can output a file without any key values in it. The NullWritable seemed to be an ideal candidate for this but unfortunately I ran into exceptions when trying it. So I made a quick and dirty fix which is not meant to be a production ready (obviously NullWritable should not be special-cased in any way!).\n\nI'm sorry, I hadn't understood this. If you only want to output null keys from your reduce, then the RecordWriter used by your OutputFormat can encode or ignore null keys (e.g. TextOutputFormat). SequenceFiles, as you discovered, explicitly disallow zero-length keys, so you'll need to pick a different binary file format to store output records. Glancing at the code, this constraint is inconsistently enforced, and not for any particular reason that I can discern. Adapting SequenceFile to handle zero-length keys might be as simple as allowing zero-length keys from the Writers, since the Reader looks like it could handle it.\n\nbq. On the other hand there seemed to be some questions which need to be asked and possible addressed. One of them is that ReflectionUtils is able to call any constructor after setAccessible is set to true but is this what we really want for singleton keys? And do we really need singleton keys at all? (I believe the answer is positive).\n\nThere's already a fair amount of object reuse. We need an object to deserialize into per the Writable contract, so a registration system like the one in WritableComparator would be necessary in ReflectionUtils to make singletons work (i.e. a map of classes to instances checked before the map of classes to constructors). Other than NullWritable, all of the sane use cases I can think of are just badly designed, but there are likely good ones.\n\nbq. How about size (length) of key value? Is it allowed to be zero?\n\nIt depends on where in the framework you're looking. The OutputFormat defines how to encode/handle null/NullWritable keys from the reduce (or the map if you're running without reduces). In 0.17, intermediate data is stored in SequenceFiles, so zero-length keys can't be emitted from the map. In 0.18, zero-length keys are supported, but their semantics are kind of odd. In most cases, emitting NullWritable keys from the map is not a scalable design.\n\nbq. And why WritableComparato calls to newInstance method while this causes issues with any class having non-public constructor?\n\nMost WritableComparable types use RawComparator, which provides much better performance while rendering this consideration irrelevant. Unfortunately, WritableComparator creates new instances of its internal keys whether it requires them or not! This is easily remedied. This patch does the following:\n\n* No longer creates instances of the WritableComparable in WritableComparator when a class has registered a WritableComparator (neither does it create a buffer). This makes super.compare(byte[], off1, len1, byte[], off2, len2) illegal, but I doubt this is a problem. Though one could imagine a situation where a raw comparator attempts an efficient comparison but uses the slow comparator when the result is ambiguous, such a comparator is easily adapted.\n* Lets WritableComparators be configurable, so WritableComparable objects not defining RawComparators are still configured before being compared\n* Defines a raw comparator for NullWritable\n* Changes checks in SequenceFile Writer classes to check only for key lengths less than zero; this doesn't require any changes to the Reader, which already supports zero-length keys, so the SequenceFile version doesn't need to be adjusted, either.\n* Adds a test case for reading/writing NullWritable keys.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-01T07:04:18.789+0000","updated":"2008-07-01T07:04:18.789+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12609493","id":"12609493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12385009/3665-0.patch\n  against trunk revision 672976.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    -1 contrib tests.  The patch failed contrib unit tests.\n\nTest results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2775/testReport/\nFindbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2775/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nCheckstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2775/artifact/trunk/build/test/checkstyle-errors.html\nConsole output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2775/console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-01T08:49:42.905+0000","updated":"2008-07-01T08:49:42.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12609502","id":"12609502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"Corrected WritableComparator creation in SequenceFile::Sorter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-01T09:20:50.179+0000","updated":"2008-07-01T09:20:50.179+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12609522","id":"12609522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12385023/3665-1.patch\n  against trunk revision 672976.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    -1 contrib tests.  The patch failed contrib unit tests.\n\nTest results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2776/testReport/\nFindbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2776/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nCheckstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2776/artifact/trunk/build/test/checkstyle-errors.html\nConsole output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2776/console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-01T10:56:06.902+0000","updated":"2008-07-01T10:56:06.902+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12609753","id":"12609753","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm ok with this patch, though making WritableComparator a Configurable might be a stretch... given that we don't have and Configurable Writables. But I'm happy to bow down to the wisdom of the crowd.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-02T00:24:01.441+0000","updated":"2008-07-02T00:25:01.967+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12610032","id":"12610032","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"I think Arun is right; the approach in 3665-1 wouldn't have accomplished what it set out to do, anyway. Attached a patch removing the Configurable stuff.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-02T20:21:02.156+0000","updated":"2008-07-02T20:21:02.156+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12610058","id":"12610058","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"body":"I tested 3665-2 with my specific use case (NullWritable in reduced key) and it is working fine! Thanks guys.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"created":"2008-07-02T21:46:44.054+0000","updated":"2008-07-02T21:46:44.054+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12610061","id":"12610061","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"body":"BTW: Shouldn't this issue be renamed to something more descriptive?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukas.vlcek","name":"lukas.vlcek","key":"lukas.vlcek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lukas.vlcek&avatarId=19000","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lukas.vlcek&avatarId=19000","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lukas.vlcek&avatarId=19000","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lukas.vlcek&avatarId=19000"},"displayName":"Lukas Vlcek","active":true,"timeZone":"Europe/Berlin"},"created":"2008-07-02T21:49:37.115+0000","updated":"2008-07-02T21:49:37.115+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12610070","id":"12610070","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12385142/3665-2.patch\n  against trunk revision 673445.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    -1 contrib tests.  The patch failed contrib unit tests.\n\nTest results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2784/testReport/\nFindbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2784/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nCheckstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2784/artifact/trunk/build/test/checkstyle-errors.html\nConsole output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2784/console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-02T22:13:08.718+0000","updated":"2008-07-02T22:13:08.718+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12610345","id":"12610345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks good. I think we should just go ahead and mark this as an incompatible change for the fact that the key1/key2 fields aren't constructed for the protected WritableComparator constructor, a break from the past.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-03T20:59:20.359+0000","updated":"2008-07-03T20:59:20.359+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12610375","id":"12610375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"I just committed this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-03T23:47:15.597+0000","updated":"2008-07-03T23:47:15.597+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12399247/comment/12624753","id":"12624753","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-trunk #581 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/581/])","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2008-08-22T12:34:17.441+0000","updated":"2008-08-22T12:34:17.441+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3665/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ias7:"}}