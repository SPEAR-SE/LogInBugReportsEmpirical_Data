{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12627417","self":"https://issues.apache.org/jira/rest/api/2/issue/12627417","key":"HADOOP-9205","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2013-01-14T12:44:31.789+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jan 16 11:27:07 UTC 2013","customfield_12310420":"304201","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_169223255_*|*_1_*:*_1_*:*_720045_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-01-16T11:27:07.121+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-9205/watchers","watchCount":6,"isWatching":false},"created":"2013-01-14T12:14:43.863+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323273","id":"12323273","description":"2.0.3-alpha release","name":"2.0.3-alpha","archived":false,"released":true,"releaseDate":"2013-02-14"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12323504","id":"12323504","description":"0.23.6 release","name":"0.23.6","archived":false,"released":true,"releaseDate":"2013-02-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335733","id":"12335733","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-12T18:25:39.650+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Currently the path to native libraries is passed to unit tests via environment variable LD_LIBRARTY_PATH. This is okay for Java6, but does not work for Java7, since Java7 ignores this environment variable.\n\nSo, to run the tests with native implementation on Java7 one needs to pass the paths to native libs via -Djava.library.path system property rather than the LD_LIBRARY_PATH env variable.\n\nThe suggested patch fixes the problem via setting the paths to native libs using both LD_LIBRARY_PATH and -Djava.library.path property. This way the tests work equally on both Java6 and Java7.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12564693","id":"12564693","filename":"HADOOP-9205.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"created":"2013-01-14T12:26:32.918+0000","size":979,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12564693/HADOOP-9205.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"252221","customfield_12312823":null,"summary":"Java7: path to native libraries should be passed to tests via -Djava.library.path rather than env.LD_LIBRARY_PATH","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13552607","id":"13552607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"body":"The patch is applicable to all the 3 affected branches.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"created":"2013-01-14T12:26:32.922+0000","updated":"2013-01-14T12:26:32.922+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13552620","id":"13552620","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12564693/HADOOP-9205.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in .\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HADOOP-Build/2037//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2037//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-14T12:44:31.789+0000","updated":"2013-01-14T12:44:31.789+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13552822","id":"13552822","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"Would you elaborate what is failing and how? We run oracle/sun java 1.7.0_05 and JNI libraries are loading fine with only LD_LIBRARY_PATH set. Which jdk are you using?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2013-01-14T16:03:05.123+0000","updated":"2013-01-14T16:03:05.123+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13553038","id":"13553038","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"body":"I observed the problem with Oracle's JDK 1.7.0_10.\nThe tests are not failing, they just use Java implementation instead of the native one, even if -Pnative profile is enabled.\nLinks that seem to be relevant there are:\nhttp://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html\nhttps://blogs.oracle.com/darcy/entry/purging_ld_library_path\nI will investigate if the problem is reproducible with J1.7.0_05.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"created":"2013-01-14T19:47:44.465+0000","updated":"2013-01-14T19:47:44.465+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13553707","id":"13553707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"body":"Shortest way to reproduce the issue:\nRun test org.apache.hadoop.util.TestNativeCodeLoader with -Drequire.test.libhadoop=true and \nenv variable LD_LIBRARY_PATH=.../hadoop-common/hadoop-common-project/hadoop-common/target/native/target/usr/local/lib\nIf you're running on Java 1.6, the test passes.\nIf you're running on Java 1.7, the test fails.\nIf we add parameter\n-Djava.library.path=.../hadoop-common/hadoop-common-project/hadoop-common/target/native/target/usr/local/lib , the test passes on both 1.6 and 1.7.\n\nThis is reproducible with Oracle's JDK jdk1.7.0_07, jdk1.7.0_10, but is *not* reproducible with jdk1.7.0_05, so Kihwall's observation regarding 1.7.0_05 is correct.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"created":"2013-01-15T11:54:24.172+0000","updated":"2013-01-15T11:54:24.172+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13553909","id":"13553909","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"body":"I ran a quick job using jdk1.7.0_10 and it loads the native libraries fine. This was using jdk1.7.0_10 for execution, jars were still built with jdk1.6.\n\nAlso I tried to reproduce with method you stated.  On trunk I wasn't able to reproduce.  Note I built all source code with jdk1.7.0_10 and then ran the test.  I did have to create a symlink from hadoop-common-project/hadoop-common/target/native/target/usr/local/lib/libhadoop.so to hadoop-common-project/hadoop-common/target/native/target/usr/local/lib/libhadoop.so.1.0.0. \n\nI'm not sure what happened to libhadoop.so I'll have to investigate.  I need to look at the jdk release notes in more detail but at a glance it says \"Java applications invoking JDK 7 from a legacy JDK must be careful to clean up the LD_LIBRARY_PATH environment variable before executing JDK 7\" which makes me wonder if it applies. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"created":"2013-01-15T15:42:19.718+0000","updated":"2013-01-15T15:42:19.718+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13553958","id":"13553958","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"I tried with jdk 1.7.0_11 but could not reproduce the issue. May be your run-time env has something different from ours. I don't have anything special: Fedora 17 x86_64, freshly downloaded Oracle jdk 7u11. JAVA_HOME was set accordingly. maven 3.0.4 and maven --version shows the right java info. My run-time env does not have LD_LIBRARY_PATH or JAVA_LIBRARY_PATH set. No hadoop specific settings either.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2013-01-15T16:27:42.462+0000","updated":"2013-01-15T16:27:42.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13553960","id":"13553960","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"body":"Hi, Thomas, \ncan you please provide more detail on your environment: what OS did you use?\nI experimented on \"CentOS release 6.3 (Final)\" and \"Ubuntu precise (12.04.1 LTS)\".\n\nBTW, the problem with missing symlink libhadoop.so -> libhadoop.so.1.0.0 can be avoided in you install \"cmake\" utility of version >= 2.8. On CentOS systems this version is installed as a separate package named \"cmake28\", and corresponding executable is /usr/bin/cmake28. We create symlink cmake -> cmake28, and after that the problem goes away.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"created":"2013-01-15T16:28:04.396+0000","updated":"2013-01-15T16:28:04.396+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13553966","id":"13553966","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snihalani","name":"snihalani","key":"snihalani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=snihalani&avatarId=16439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=snihalani&avatarId=16439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=snihalani&avatarId=16439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=snihalani&avatarId=16439"},"displayName":"Surenkumar Nihalani","active":true,"timeZone":"America/New_York"},"body":"I think we should share our output from {{env}} in a pastie to solve this better.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snihalani","name":"snihalani","key":"snihalani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=snihalani&avatarId=16439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=snihalani&avatarId=16439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=snihalani&avatarId=16439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=snihalani&avatarId=16439"},"displayName":"Surenkumar Nihalani","active":true,"timeZone":"America/New_York"},"created":"2013-01-15T16:32:56.798+0000","updated":"2013-01-15T16:32:56.798+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13553993","id":"13553993","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"body":"I'm running on rhel5.6 with maven 3.0.3 and cmake version 2.6-patch 4. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"created":"2013-01-15T16:52:58.149+0000","updated":"2013-01-15T16:52:58.149+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627417/comment/13554949","id":"13554949","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"body":"The described problem appears to be reproducible *only* on JDKs 7 patched in order to enable privileged ports (<1024) usage by non-root users via linux capabilities. (The exact patching proc looks like the folowing: \n    patchelf --set-rpath ${J7_HOME}/jre/lib/amd64/jli ${J7_HOME}/bin/java\n    setcap cap_net_bind_service=+epi ${J7_HOME}/bin/java\n    patchelf --set-rpath ${J7_HOME}/jre/lib/amd64/jli ${J7_HOME}/jre/bin/java\n    setcap cap_net_bind_service=+epi ${J7_HOME}/jre/bin/java   \nThis patching is needed to run some security tests because they use <1024 ports, and there is no simple way to re-configure these ports to higher values.)\n\nSo, the problem described in this issue appears to be a side effect of this patch. On a clean JDK 7 installed from scratch the problem is *not*  reproducible, as both Thomas and Kihwal stated.\n\nThe command to verify:\nmvn clean test -Pnative -Dtest=org.apache.hadoop.util.TestNativeCodeLoader -Drequire.test.libhadoop=true\n\nSo, I'm closing this issue as invalid. \nSorry for this mess and many thanks for the provided information. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iveselovsky","name":"iveselovsky","key":"iveselovsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan A. Veselovsky","active":true,"timeZone":"Europe/Moscow"},"created":"2013-01-16T11:27:07.151+0000","updated":"2013-01-16T11:27:07.151+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-9205/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i17k2n:"}}