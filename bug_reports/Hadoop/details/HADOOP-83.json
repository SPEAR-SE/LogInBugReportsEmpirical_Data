{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12330297","self":"https://issues.apache.org/jira/rest/api/2/issue/12330297","key":"HADOOP-83","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310812","id":"12310812","description":"","name":"0.1.0","archived":false,"released":true,"releaseDate":"2006-04-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-03-23T09:02:52.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Mar 24 02:13:29 UTC 2006","customfield_12310420":"80530","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_688445000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_2779144000","customfield_12312321":null,"resolutiondate":"2006-03-24T02:13:29.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-83/watchers","watchCount":0,"isWatching":false},"created":"2006-03-16T02:59:24.000+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310812","id":"12310812","description":"","name":"0.1.0","archived":false,"released":true,"releaseDate":"2006-04-02"}],"issuelinks":[{"id":"12312116","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12312116","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12328902","key":"HADOOP-35","self":"https://issues.apache.org/jira/rest/api/2/issue/12328902","fields":{"summary":"Files missing chunks can cause mapred runs to get stuck","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12312345","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12312345","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12330302","key":"HADOOP-85","self":"https://issues.apache.org/jira/rest/api/2/issue/12330302","fields":{"summary":"a single client stuck in a loop blocks all clients on same machine","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12319426","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12319426","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12378492","key":"HADOOP-1911","self":"https://issues.apache.org/jira/rest/api/2/issue/12378492","fields":{"summary":"infinite loop in dfs -cat command.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T16:41:50.735+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"A file in the DFS got corrupted - the reason for that is unknown, but might be justified.\n\nwhen accessing the file, I get an infinite stream of error messages from the client - attached below.\nThe client aparently increments an error counter, but never checks it.\n\nCorrect behaviour is for the client to retry a few times, then abort.\n\n\n060315 105436 No node available for block blk_2690692619196463439\n060315 105436 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105446 No node available for block blk_2690692619196463439\n060315 105446 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105456 No node available for block blk_2690692619196463439\n060315 105456 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105506 No node available for block blk_2690692619196463439\n060315 105506 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105516 No node available for block blk_2690692619196463439\n060315 105516 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105526 No node available for block blk_2690692619196463439\n060315 105526 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105536 No node available for block blk_2690692619196463439\n060315 105536 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105546 No node available for block blk_2690692619196463439\n060315 105546 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105556 No node available for block blk_2690692619196463439\n060315 105556 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105606 No node available for block blk_2690692619196463439\n060315 105606 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105616 No node available for block blk_2690692619196463439\n060315 105616 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105626 No node available for block blk_2690692619196463439\n060315 105626 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105636 No node available for block blk_2690692619196463439\n060315 105636 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105646 No node available for block blk_2690692619196463439\n060315 105646 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105657 No node available for block blk_2690692619196463439\n060315 105657 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105707 No node available for block blk_2690692619196463439\n060315 105707 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105717 No node available for block blk_2690692619196463439\n060315 105717 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105727 No node available for block blk_2690692619196463439\n060315 105727 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105737 No node available for block blk_2690692619196463439\n060315 105737 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105747 No node available for block blk_2690692619196463439\n060315 105747 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105757 No node available for block blk_2690692619196463439\n060315 105757 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105807 No node available for block blk_2690692619196463439\n060315 105807 Could not obtain block from any node:  java.io.IOException: No live nodes contain current block\n060315 105817 No node available for block blk_2690692619196463439\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"79355","customfield_12312823":null,"summary":"infinite retries accessing a missing block","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yarnon","name":"yarnon","key":"yarnon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yoram Arnon","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yarnon","name":"yarnon","key":"yarnon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yoram Arnon","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330297/comment/12371503","id":"12371503","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"In order to prevent the client from looping infinitely retrying to locate missing block the following line\n-                   /**\n                    if (failures >= MAX_BLOCK_ACQUIRE_FAILURES) {\n                        throw new IOException(\"Could not obtain block \" + blocks[targetBlock]);\n                    }\n-                   **/\nin DFSClient.blockSeekTo(long) should be uncommented.\nIt is also desired to reduce the value of the MAX_BLOCK_ACQUIRE_FAILURES constant\nwhich is set to 10 now. In current settings it will take at least 100 seconds to detect missing block.\nSo additionally to uncommenting the lines above I'd set\n-   static int MAX_BLOCK_ACQUIRE_FAILURES = 10;\n+   static int MAX_BLOCK_ACQUIRE_FAILURES = 3;\nand reduce sleeping time between retries to 3 seconds from current 10\n                    LOG.info(\"Could not obtain block from any node:  \" + ie);\n                    try {\n-                       Thread.sleep(10000);\n+                       Thread.sleep(3000);\n                    } catch (InterruptedException iex) {\n                    }\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-03-23T09:02:52.000+0000","updated":"2006-03-23T09:02:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330297/comment/12371604","id":"12371604","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"body":"Okay, I've commited this.\n\nNote that this situation can occur while a dfs system is starting up.  If one lanuches the namenode prior to the datanodes then the namenode will know about files but not yet know wherre their blocks are, until the datanodes check in for the first time.  I recently changed the bin/start-all.sh script to start the namenode first, so that datanodes would not all initially report problems connecting to the namenode.  I knew there was a reason that it was done in the other order, but could not remember what the reason was.  Now I remember!  I switched that back and added a comment.\n\nAlso, next time, can you please attach a patch file, so that I don't have to manually make your suggested changes?  Thanks!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cutting","name":"cutting","key":"cutting","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Cutting","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-03-24T02:13:29.000+0000","updated":"2006-03-24T02:13:29.000+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-83/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0dxhj:"}}