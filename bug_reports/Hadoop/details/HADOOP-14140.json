{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13047815","self":"https://issues.apache.org/jira/rest/api/2/issue/13047815","key":"HADOOP-14140","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2017-03-02T22:01:51.580+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Mar 05 13:00:08 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_50453317_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-03-03T11:48:48.614+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-14140/watchers","watchCount":2,"isWatching":false},"created":"2017-03-02T21:47:55.371+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334005","id":"12334005","description":"2.7.3 release","name":"2.7.3","archived":false,"released":true,"releaseDate":"2016-08-25"}],"issuelinks":[{"id":"12496129","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12496129","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12827077","key":"HADOOP-11918","self":"https://issues.apache.org/jira/rest/api/2/issue/12827077","fields":{"summary":"Listing an empty s3a root directory throws FileNotFound.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-03-05T13:00:08.598+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311814","id":"12311814","name":"fs/s3","description":"S3A filesystem client and other S3 connectivity issues"}],"timeoriginalestimate":null,"description":"Hi:\n\n\nUPDATE: This stack trace is being caused because there are 0 objects in the target directory. S3A is unable to handle 0 objects\n\n---\nConnecting S3A to a 3rd party object store does not work. This is a publicly hosted grid and i can provide credentials if required. Please see the debug log below\n\nThere are two problems -\n1. Path Style setting is ignored, and S3A always uses host style addressing\n2. Even when host style is specified, it is unable to proceed, see debug log (in comment below)\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"S3A reporting \"Not found on empty bucket","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vardhanv","name":"vardhanv","key":"vardhanv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishnu Vardhan","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vardhanv","name":"vardhanv","key":"vardhanv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishnu Vardhan","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Non-AWS s3 implementation","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13047815/comment/15893109","id":"15893109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"vishnu, we ought to be doing this, I Think [~Thomas Demoor] tests this way against their in-house endpoint.\n\nInteresting here is that a 200 is coming back, yet the XML result is triggering an interpretation as a 404.\n\n# can you check out and build Hadoop branch-2.8.0; this is what is about to ship and so the last chance place to get a fix in.\n# Don't bother with building spark, just see if you can set up the hadoop-aws tests (only bother with the s3a ones), See: https://github.com/apache/hadoop/blob/trunk/hadoop-tools/hadoop-aws/src/site/markdown/tools/hadoop-aws/testing.md\n# on the failure, it'd be good to have the full stack trace; spark appears to have dropped the interesting bits (i.e we don't know exactly which operation failed)\n\nThere are major changes between 2.7 and 2.8 here (everything in HADOOP-11694); hopefully this will have been addressed too. We just need your assistance in testing and debugging the problem.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-03-02T22:01:51.580+0000","updated":"2017-03-02T22:01:51.580+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13047815/comment/15894198","id":"15894198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"Closing as a duplicate of HADOOP-11918, \"Listing an empty s3a root directory throws FileNotFound\"\n\nAs requested, please grab the branch-2.8 or branch-2 code and test there before worrying about a failure in the 2.7.x codepath. Hopefully the problems will have been fixed, and instead you can get to catch those issues which haven't been addressed yet","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-03-03T11:48:48.649+0000","updated":"2017-03-03T11:48:48.649+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13047815/comment/15894201","id":"15894201","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"Stack\n{code}\n\n\n\n17/03/02 13:35:03 DEBUG HadoopRDD: Creating new JobConf and caching it for later re-use\n17/03/02 13:35:03 DEBUG InternalConfig: Configuration override awssdk_config_override.json not found.\n17/03/02 13:35:03 DEBUG AWSCredentialsProviderChain: Loading credentials from BasicAWSCredentialsProvider\n17/03/02 13:35:03 DEBUG S3Signer: Calculated string to sign:\n\"HEAD\n\napplication/x-www-form-urlencoded; charset=utf-8\nThu, 02 Mar 2017 21:35:03 GMT\n/solidfire/\"\n17/03/02 13:35:03 DEBUG request: Sending Request: HEAD https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082 / Headers: (Authorization: AWS 2SNAJYEMQU45YPVYC89D:WO0R+mPeYoQ2V29L4dMUJSSSVsQ=, User-Agent: aws-sdk-java/1.7.4 Mac_OS_X/10.12.3 Java_HotSpot(TM)_64-Bit_Server_VM/25.60-b23/1.8.0_60, Date: Thu, 02 Mar 2017 21:35:03 GMT, Content-Type: application/x-www-form-urlencoded; charset=utf-8, ) \n17/03/02 13:35:03 DEBUG PoolingClientConnectionManager: Connection request: [route: {s}->https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082][total kept alive: 0; route allocated: 0 of 15; total allocated: 0 of 15]\n17/03/02 13:35:03 DEBUG PoolingClientConnectionManager: Connection leased: [id: 0][route: {s}->https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082][total kept alive: 0; route allocated: 1 of 15; total allocated: 1 of 15]\n17/03/02 13:35:03 DEBUG DefaultClientConnectionOperator: Connecting to solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082\n17/03/02 13:35:03 DEBUG RequestAddCookies: CookieSpec selected: default\n17/03/02 13:35:03 DEBUG RequestAuthCache: Auth cache not set in the context\n17/03/02 13:35:03 DEBUG RequestProxyAuthentication: Proxy auth state: UNCHALLENGED\n17/03/02 13:35:03 DEBUG SdkHttpClient: Attempt 1 to execute request\n17/03/02 13:35:03 DEBUG DefaultClientConnection: Sending request: HEAD / HTTP/1.1\n17/03/02 13:35:03 DEBUG wire:  >> \"HEAD / HTTP/1.1[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  >> \"Host: solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  >> \"Authorization: AWS 2SNAJYEMQU45YPVYC89D:WO0R+mPeYoQ2V29L4dMUJSSSVsQ=[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  >> \"User-Agent: aws-sdk-java/1.7.4 Mac_OS_X/10.12.3 Java_HotSpot(TM)_64-Bit_Server_VM/25.60-b23/1.8.0_60[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  >> \"Date: Thu, 02 Mar 2017 21:35:03 GMT[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  >> \"Content-Type: application/x-www-form-urlencoded; charset=utf-8[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  >> \"Connection: Keep-Alive[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  >> \"[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG headers: >> HEAD / HTTP/1.1\n17/03/02 13:35:03 DEBUG headers: >> Host: solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082\n17/03/02 13:35:03 DEBUG headers: >> Authorization: AWS 2SNAJYEMQU45YPVYC89D:WO0R+mPeYoQ2V29L4dMUJSSSVsQ=\n17/03/02 13:35:03 DEBUG headers: >> User-Agent: aws-sdk-java/1.7.4 Mac_OS_X/10.12.3 Java_HotSpot(TM)_64-Bit_Server_VM/25.60-b23/1.8.0_60\n17/03/02 13:35:03 DEBUG headers: >> Date: Thu, 02 Mar 2017 21:35:03 GMT\n17/03/02 13:35:03 DEBUG headers: >> Content-Type: application/x-www-form-urlencoded; charset=utf-8\n17/03/02 13:35:03 DEBUG headers: >> Connection: Keep-Alive\n17/03/02 13:35:03 DEBUG wire:  << \"HTTP/1.1 200 OK[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  << \"Date: Thu, 02 Mar 2017 21:35:03 GMT[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  << \"Connection: KEEP-ALIVE[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  << \"Server: StorageGRID/10.3.0.1[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  << \"x-amz-request-id: 640939184[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  << \"Content-Length: 0[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG wire:  << \"[\\r][\\n]\"\n17/03/02 13:35:03 DEBUG DefaultClientConnection: Receiving response: HTTP/1.1 200 OK\n17/03/02 13:35:03 DEBUG headers: << HTTP/1.1 200 OK\n17/03/02 13:35:03 DEBUG headers: << Date: Thu, 02 Mar 2017 21:35:03 GMT\n17/03/02 13:35:03 DEBUG headers: << Connection: KEEP-ALIVE\n17/03/02 13:35:03 DEBUG headers: << Server: StorageGRID/10.3.0.1\n17/03/02 13:35:03 DEBUG headers: << x-amz-request-id: 640939184\n17/03/02 13:35:03 DEBUG headers: << Content-Length: 0\n17/03/02 13:35:03 DEBUG SdkHttpClient: Connection can be kept alive indefinitely\n17/03/02 13:35:04 DEBUG PoolingClientConnectionManager: Connection [id: 0][route: {s}->https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082] can be kept alive indefinitely\n17/03/02 13:35:04 DEBUG PoolingClientConnectionManager: Connection released: [id: 0][route: {s}->https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082][total kept alive: 1; route allocated: 1 of 15; total allocated: 1 of 15]\n17/03/02 13:35:04 DEBUG request: Received successful response: 200, AWS Request ID: 640939184\n17/03/02 13:35:04 DEBUG S3AFileSystem: Getting path status for s3a://solidfire/ ()\n17/03/02 13:35:04 DEBUG S3Signer: Calculated string to sign:\n\"GET\n\napplication/x-www-form-urlencoded; charset=utf-8\nThu, 02 Mar 2017 21:35:04 GMT\n/solidfire/\"\n17/03/02 13:35:04 DEBUG request: Sending Request: GET https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082 / Parameters: (max-keys: 1, prefix: , delimiter: /, ) Headers: (Authorization: AWS 2SNAJYEMQU45YPVYC89D:lfPlFQy/vzQuLHXisTmL1Bb5D/k=, User-Agent: aws-sdk-java/1.7.4 Mac_OS_X/10.12.3 Java_HotSpot(TM)_64-Bit_Server_VM/25.60-b23/1.8.0_60, Date: Thu, 02 Mar 2017 21:35:04 GMT, Content-Type: application/x-www-form-urlencoded; charset=utf-8, ) \n17/03/02 13:35:04 DEBUG PoolingClientConnectionManager: Connection request: [route: {s}->https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082][total kept alive: 1; route allocated: 1 of 15; total allocated: 1 of 15]\n17/03/02 13:35:04 DEBUG PoolingClientConnectionManager: Connection leased: [id: 0][route: {s}->https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082][total kept alive: 0; route allocated: 1 of 15; total allocated: 1 of 15]\n17/03/02 13:35:04 DEBUG SdkHttpClient: Stale connection check\n17/03/02 13:35:04 DEBUG RequestAddCookies: CookieSpec selected: default\n17/03/02 13:35:04 DEBUG RequestAuthCache: Auth cache not set in the context\n17/03/02 13:35:04 DEBUG RequestProxyAuthentication: Proxy auth state: UNCHALLENGED\n17/03/02 13:35:04 DEBUG SdkHttpClient: Attempt 1 to execute request\n17/03/02 13:35:04 DEBUG DefaultClientConnection: Sending request: GET /?max-keys=1&prefix=&delimiter=%2F HTTP/1.1\n17/03/02 13:35:04 DEBUG wire:  >> \"GET /?max-keys=1&prefix=&delimiter=%2F HTTP/1.1[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  >> \"Host: solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  >> \"Authorization: AWS 2SNAJYEMQU45YPVYC89D:lfPlFQy/vzQuLHXisTmL1Bb5D/k=[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  >> \"User-Agent: aws-sdk-java/1.7.4 Mac_OS_X/10.12.3 Java_HotSpot(TM)_64-Bit_Server_VM/25.60-b23/1.8.0_60[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  >> \"Date: Thu, 02 Mar 2017 21:35:04 GMT[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  >> \"Content-Type: application/x-www-form-urlencoded; charset=utf-8[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  >> \"Connection: Keep-Alive[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  >> \"[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG headers: >> GET /?max-keys=1&prefix=&delimiter=%2F HTTP/1.1\n17/03/02 13:35:04 DEBUG headers: >> Host: solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082\n17/03/02 13:35:04 DEBUG headers: >> Authorization: AWS 2SNAJYEMQU45YPVYC89D:lfPlFQy/vzQuLHXisTmL1Bb5D/k=\n17/03/02 13:35:04 DEBUG headers: >> User-Agent: aws-sdk-java/1.7.4 Mac_OS_X/10.12.3 Java_HotSpot(TM)_64-Bit_Server_VM/25.60-b23/1.8.0_60\n17/03/02 13:35:04 DEBUG headers: >> Date: Thu, 02 Mar 2017 21:35:04 GMT\n17/03/02 13:35:04 DEBUG headers: >> Content-Type: application/x-www-form-urlencoded; charset=utf-8\n17/03/02 13:35:04 DEBUG headers: >> Connection: Keep-Alive\n17/03/02 13:35:04 DEBUG wire:  << \"HTTP/1.1 200 OK[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  << \"Date: Thu, 02 Mar 2017 21:35:04 GMT[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  << \"Connection: KEEP-ALIVE[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  << \"Server: StorageGRID/10.3.0.1[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  << \"x-amz-request-id: 640939184[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  << \"Content-Length: 256[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  << \"Content-Type: application/xml[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG wire:  << \"[\\r][\\n]\"\n17/03/02 13:35:04 DEBUG DefaultClientConnection: Receiving response: HTTP/1.1 200 OK\n17/03/02 13:35:04 DEBUG headers: << HTTP/1.1 200 OK\n17/03/02 13:35:04 DEBUG headers: << Date: Thu, 02 Mar 2017 21:35:04 GMT\n17/03/02 13:35:04 DEBUG headers: << Connection: KEEP-ALIVE\n17/03/02 13:35:04 DEBUG headers: << Server: StorageGRID/10.3.0.1\n17/03/02 13:35:04 DEBUG headers: << x-amz-request-id: 640939184\n17/03/02 13:35:04 DEBUG headers: << Content-Length: 256\n17/03/02 13:35:04 DEBUG headers: << Content-Type: application/xml\n17/03/02 13:35:04 DEBUG SdkHttpClient: Connection can be kept alive indefinitely\n17/03/02 13:35:04 DEBUG XmlResponsesSaxParser: Sanitizing XML document destined for handler class com.amazonaws.services.s3.model.transform.XmlResponsesSaxParser$ListBucketHandler\n17/03/02 13:35:04 DEBUG wire:  << \"<?xml version=\"1.0\" encoding=\"UTF-8\"?>[\\n]\"\n17/03/02 13:35:04 DEBUG wire:  << \"<ListBucketResult xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Name>solidfire</Name><Prefix></Prefix><Marker></Marker><MaxKeys>1</MaxKeys><Delimiter>/</Delimiter><IsTruncated>false</IsTruncated></ListBucketResult>\"\n17/03/02 13:35:04 DEBUG PoolingClientConnectionManager: Connection [id: 0][route: {s}->https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082] can be kept alive indefinitely\n17/03/02 13:35:04 DEBUG PoolingClientConnectionManager: Connection released: [id: 0][route: {s}->https://solidfire.vmasgwwebg01-tst.webscaledemo.netapp.com:8082][total kept alive: 1; route allocated: 1 of 15; total allocated: 1 of 15]\n17/03/02 13:35:04 DEBUG XmlResponsesSaxParser: Parsing XML response document with handler: class com.amazonaws.services.s3.model.transform.XmlResponsesSaxParser$ListBucketHandler\n17/03/02 13:35:04 DEBUG XmlResponsesSaxParser: Examining listing for bucket: solidfire\n17/03/02 13:35:04 DEBUG request: Received successful response: 200, AWS Request ID: 640939184\n17/03/02 13:35:04 DEBUG S3AFileSystem: Not Found: s3a://solidfire/\norg.apache.hadoop.mapred.InvalidInputException: Input path does not exist: s3a://solidfire/\n  at org.apache.hadoop.mapred.FileInputFormat.singleThreadedListStatus(FileInputFormat.java:287)\n  at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:229)\n  at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:315)\n  at org.apache.spark.rdd.HadoopRDD.getPartitions(HadoopRDD.scala:202)\n  at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:252)\n  at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:250)\n  at scala.Option.getOrElse(Option.scala:121)\n  at org.apache.spark.rdd.RDD.partitions(RDD.scala:250)\n  at org.apache.spark.rdd.MapPartitionsRDD.getPartitions(MapPartitionsRDD.scala:35)\n  at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:252)\n  at org.apache.spark.rdd.RDD$$anonfun$partitions$2.apply(RDD.scala:250)\n  at scala.Option.getOrElse(Option.scala:121)\n  at org.apache.spark.rdd.RDD.partitions(RDD.scala:250)\n  at org.apache.spark.SparkContext.runJob(SparkContext.scala:1958)\n  at org.apache.spark.rdd.RDD.count(RDD.scala:1157)\n  ... 53 elided\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-03-03T11:51:05.828+0000","updated":"2017-03-03T11:51:19.089+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13047815/comment/15895833","id":"15895833","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vardhanv","name":"vardhanv","key":"vardhanv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishnu Vardhan","active":true,"timeZone":"Etc/UTC"},"body":"Steve,\n\nI will build s3a from the 2.8-RC1 hadoop branch and see if i can replicate the issues. \n\nCan I just replace the hadoop-aws-2.7.3.jar into a spark build with hadoop 2.7, or will i need to rebuild spark also.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vardhanv","name":"vardhanv","key":"vardhanv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishnu Vardhan","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-04T19:30:26.765+0000","updated":"2017-03-04T19:30:26.765+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13047815/comment/15896251","id":"15896251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"don't worry about spark for now, it will only complicate your life. Replicate this in a snippet of a junit test or with the 'hadoop fs' command.\n\nOnce you are confident it works, then you could look at spark\n# you can't mix them unless you replace every hadoop-* JAR\n# if you look at SPARK-7481 you can get the PR I use to build this stuff\n\nHowever, before you bother, consider this. There is no point running any analytics query against an empty bucket. There's no data, there's no answer. It's a corner case, which is why it didn't surface for a while. Prioritise your problems.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-03-05T13:00:08.598+0000","updated":"2017-03-05T13:00:08.598+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-14140/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3avk7:"}}