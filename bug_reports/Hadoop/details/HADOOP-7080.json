{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12494262","self":"https://issues.apache.org/jira/rest/api/2/issue/12494262","key":"HADOOP-7080","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2010-12-29T18:50:38.840+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Mar 19 03:15:48 UTC 2011","customfield_12310420":"77555","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7080/watchers","watchCount":6,"isWatching":false},"created":"2010-12-29T18:35:33.134+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313563","id":"12313563","description":"","name":"0.21.0","archived":false,"released":true,"releaseDate":"2010-08-23"}],"issuelinks":[{"id":"12336654","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12336654","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12436103","key":"HDFS-631","self":"https://issues.apache.org/jira/rest/api/2/issue/12436103","fields":{"summary":"Changes in HDFS to rename the config keys as detailed in HDFS-531.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-03-19T03:15:48.333+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"The configuration for the block size is named *dfs.block.size* in the [documentation for Release 0.21.0 of Hadoop|http://hadoop.apache.org/common/docs/r0.21.0/cluster_setup.html] but this will not work nor will it be recognized. If i use [*dfs.blocksize*|http://hadoop.apache.org/hdfs/docs/current/api/constant-values.html] instead it will work perfectly.  So this seemed to be a documentation bug.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"102783","customfield_12312823":null,"summary":"Documentation dfs.block.size where dfs.blocksize has to be used instead.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=khmarbaise","name":"khmarbaise","key":"khmarbaise","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=khmarbaise&avatarId=18932","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=khmarbaise&avatarId=18932","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=khmarbaise&avatarId=18932","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=khmarbaise&avatarId=18932"},"displayName":"Karl Heinz Marbaise","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=khmarbaise","name":"khmarbaise","key":"khmarbaise","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=khmarbaise&avatarId=18932","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=khmarbaise&avatarId=18932","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=khmarbaise&avatarId=18932","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=khmarbaise&avatarId=18932"},"displayName":"Karl Heinz Marbaise","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux (Ubuntu)","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494262/comment/12975867","id":"12975867","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"dfs.blocksize is the new name for dfs.block.size as of HDFS-631. But the old one should still work as well, unless both are set. How were you using the dfs.block.size configuration, and are you sure you didn't have both settings set?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2010-12-29T18:50:38.840+0000","updated":"2010-12-29T18:50:38.840+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494262/comment/12975871","id":"12975871","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=khmarbaise","name":"khmarbaise","key":"khmarbaise","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=khmarbaise&avatarId=18932","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=khmarbaise&avatarId=18932","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=khmarbaise&avatarId=18932","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=khmarbaise&avatarId=18932"},"displayName":"Karl Heinz Marbaise","active":true,"timeZone":"Etc/UTC"},"body":"I have first tried to set dfs.block.size in the hdfs-site.xml file and nothing else, cause i didn't known anything about the new name. I have copied the configuration (hdfs-site.xml) to all data nodes (only three in my case) and checked that several times. Completely removed all contents from the HDFS storage and reformatted the namenode (removed also the data directories from the data nodes).  It doesn't change anything. The files in HDFS used 64 MiB block size based on the display in the file system  browser (Web-UI). After that i changed the name from dfs.block.size to dfs.blocksize in the hdfs-site.xml file. And then completely removed things from cluster etc. and from that point it worked. Now the change of the block size via command line option like this: \n{{hadoop fs -Ddfs.blocksize=67108864 -copyFromLocal result.log /user/km/tapelogs/logfile-test-64MB.log}} works.\nI tried several time with the following:\n{{hadoop fs -Ddfs.block.size=134217728 -copyFromLocal result.log /user/km/tapelogs/logfile-test-64MB.log}} but this didn't work either. So in my opinion this is not only a documentation bug.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=khmarbaise","name":"khmarbaise","key":"khmarbaise","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=khmarbaise&avatarId=18932","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=khmarbaise&avatarId=18932","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=khmarbaise&avatarId=18932","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=khmarbaise&avatarId=18932"},"displayName":"Karl Heinz Marbaise","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-29T19:04:24.180+0000","updated":"2010-12-29T19:04:24.180+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494262/comment/12977452","id":"12977452","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=roelofs","name":"roelofs","key":"roelofs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Roelofs","active":true,"timeZone":"Etc/UTC"},"body":"I looked into this a bit on 0.22(ish) while trying to test another feature (in early November, I think?).  At the time, dfs.blocksize was used in:\n\n{noformat}\n    hdfs-default.xml\n    hdfs/DFSConfigKeys.java\n    hdfs/server/namenode/TestHDFSConcat.java\n{noformat}\n\ndfs.block.size was used in:\n\n{noformat}\n    Hadoop FAQ\n    hadoop-hdfs/src/c++/libhdfs/hdfs.c \n    hdfsproxy-default.xml\n    documentation/content/xdocs/hdfsproxy.xml\n    hdfs/HdfsConfiguration.java\n    fs/TestFiRename.java\n    hdfs/server/namenode/TestBlockTokenWithDFS.java\n    hdfs/TestFileConcurrentReader.java\n{noformat}\n\n(I realize the paths are incomplete; so are my notes at this point.)\n\nPerhaps this JIRA should be under HDFS rather than common?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=roelofs","name":"roelofs","key":"roelofs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Roelofs","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-04T20:45:02.859+0000","updated":"2011-01-04T20:45:02.859+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494262/comment/13008720","id":"13008720","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"A potential issue here is that the dfs.block.size deprecation is done in HdfsConfiguration, so if somone is using just using the Configuration object the deprecated config won't work.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-03-19T03:15:48.306+0000","updated":"2011-03-19T03:15:48.306+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7080/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0hy2v:"}}