{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12937819","self":"https://issues.apache.org/jira/rest/api/2/issue/12937819","key":"HADOOP-12785","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-02-09T16:16:41.145+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Apr 09 12:07:09 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-12785/watchers","watchCount":4,"isWatching":false},"created":"2016-02-09T10:19:41.982+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["easyfix"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331977","id":"12331977","description":"2.7.1 release","name":"2.7.1","archived":false,"released":true,"releaseDate":"2015-07-06"}],"issuelinks":[{"id":"12458352","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12458352","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12943042","key":"HADOOP-12838","self":"https://issues.apache.org/jira/rest/api/2/issue/12943042","fields":{"summary":"Add metrics for LDAP-specific group mapping resolution time","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-04-09T12:07:09.174+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312526","id":"12312526","name":"security"}],"timeoriginalestimate":null,"description":"_CommunicationException_ and _NamingException_ are not logged in _LdapGroupsMapping.getGroups()_.\n\n{code:title=LdapGroupsMapping.java|borderStyle=solid}\n  public synchronized List<String> getGroups(String user) throws IOException {\n    List<String> emptyResults = new ArrayList<String>();\n    // ...\n    try {\n      return doGetGroups(user);\n    } catch (CommunicationException e) {\n      LOG.warn(\"Connection is closed, will try to reconnect\");\n    } catch (NamingException e) {\n      LOG.warn(\"Exception trying to get groups for user \" + user + \": \" + e.getMessage());\n      return emptyResults;\n    }\n    //...\n    return emptyResults;\n  }\n{code}\n\n{color:red}It is not possible to understand _LDAP_ level failures.{color}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12797740","id":"12797740","filename":"HADOOP-12785.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-04-08T16:06:42.195+0000","size":9694,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12797740/HADOOP-12785.001.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"[Handling exceptions] LdapGroupsMapping.getGroups() do not provide information about root cause","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"_Operating system_: CentOS Linux 7 {color:gray}(7.1.1503){color}\n_Platform_: HDP 2.3.4.0, Ambari 2.1.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15139133","id":"15139133","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~mukhadin], thanks for reporting this issue.\nJust to be clear, what is the expected error message here? A NamingException is logged here, although CommunicationException message is not logged. I think we can log the query itself, and also the returned result.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-02-09T16:16:41.145+0000","updated":"2016-02-09T16:16:41.145+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15139195","id":"15139195","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"body":"[~jojochuang], thank you for paying attention!\n\nI'm pretty fine with messages, suggestion was to print stack trace of exceptions, something like:\n{code:title=WARN level|borderStyle=solid}\n    try {\n        // ...\n    } catch (CommunicationException e) {\n      LOG.warn(\"Connection is closed, will try to reconnect\", e);\n    } catch (NamingException e) {\n      LOG.warn(\"Exception trying to get groups for user \" + user, e);\n      return emptyResults;\n    }\n{code}\n\nOr if it will generate to much logs - just to provide stack trace on DEBUG level:\n{code:title=DEBUG level|borderStyle=solid}\n    try {\n        // ...\n    } catch (CommunicationException e) {\n      LOG.warn(\"Connection is closed, will try to reconnect\");\n      LOG.debug(\"Root cause is\", e);\n    } catch (NamingException e) {\n      LOG.warn(\"Exception trying to get groups for user \" + user + \": \" + e.getMessage());\n      LOG.debug(\"Root cause is\", e);\n      return emptyResults;\n    }\n{code}\n\n----\n\nHad to write something similar to _LdapGroupsMapping_ today to understand what is wrong with my environment and configuration properties.\nException message only may be not informative enough - today had a problem with self-signed CA and only the 3rd level exception says me this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-09T16:53:56.527+0000","updated":"2016-02-09T16:53:56.527+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15139324","id":"15139324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"[~mbuzdov], thank you for reporting the issue.  Since you've already had to debug this in your environment, would you be interested in contributing a patch?  If so, instructions on how to contribute are here:\n\nhttps://wiki.apache.org/hadoop/HowToContribute\n\n(If you don't want to contribute a patch, then that's fine too, and someone else in the community will pick it up.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-02-09T18:11:38.821+0000","updated":"2016-02-09T18:11:38.821+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15141700","id":"15141700","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"body":"[~cnauroth], I didn't debug it as it is, just prepare my own class based on the _Hadoop_ sources to understand problems on my side.\nSo to contribute I will need to prepare environment on my side to run unit / integration tests at least.\n\nHave too much work right now. If it waits for couple weeks - then it will be my pleasure to provide a patch.\nIf not - no problem, will provide patch next time for another JIRA.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-10T21:27:12.288+0000","updated":"2016-02-10T21:27:12.288+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15169778","id":"15169778","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"body":"FYI -- here' s a list of status codes and what you can refer from the exceptions. We've also had issues with troubleshooting LDAP, so I'm really looking forward to having this place.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-02-26T20:49:21.333+0000","updated":"2016-02-26T20:49:21.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15199568","id":"15199568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"body":"[~mukhadin], would you mind if I work on this and provide a patch?\nI've been debugging LDAP group mapping issues and have some understanding of the error messages.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-17T14:01:44.519+0000","updated":"2016-03-17T14:01:44.519+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15199634","id":"15199634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"body":"[~jojochuang], sure, will be glad if you will work on this.\n\nBut I'm not sure if it is reasonable to handle _LDAP Status Codes_. My suggestion was to add exception/root cause into the logs {color:gray}and not just to ignore it{color}.\n\n----\n\nSo my suggestion was just to adjust sources next way:\n{code:title=WARN level|borderStyle=solid}\n    try {\n        // ...\n    } catch (CommunicationException e) {\n      LOG.warn(\"Connection is closed, will try to reconnect\", e);\n    } catch (NamingException e) {\n      LOG.warn(\"Exception trying to get groups for user \" + user, e);\n      return emptyResults;\n    }\n{code}\n{color:gray}_P.S.:_ And to check if unit/integration test are fine of course.{color}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-17T14:43:19.034+0000","updated":"2016-03-17T14:43:19.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15199722","id":"15199722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks. Sure, I think adding the exception plus root cause will help. But some of the error messages are obscure, and I am thinking to add hints for troubleshooting.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-17T15:33:08.218+0000","updated":"2016-03-17T15:33:08.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15201465","id":"15201465","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"body":"And just BTW, you probably hit HADOOP-12862 when using your LDAP with self signed certificates.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-18T13:25:05.350+0000","updated":"2016-03-18T13:25:05.350+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15232398","id":"15232398","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploaded v01 to show that I am still working on it.\nHowever, I would really love to see other LdapGroupsMapping fixes to be committed before moving further, as working on two patches at the same code scope creates conflicts.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-04-08T16:06:42.200+0000","updated":"2016-04-08T16:06:42.200+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15233514","id":"15233514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"body":"[~jojochuang], please let me share few review comments:\n* No need to include in this patch _truststore_ related changes.\n* There are tabulation related problems in the patch.\n* As for me you've introduced too much complication to exception handling - IMO it should be just maintainable and implemented in common way.\nAs a Hadoop admin I will prefer to have standard stack traces to analyze for sure, but not just suggestions {color:gray}(_explainException()_ method){color} of what might be a problem cause. Standard LDAP error codes are easy to google, never had problems with this.\n* No unit test changes was needed?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"created":"2016-04-09T11:53:01.104+0000","updated":"2016-04-09T11:53:01.104+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12937819/comment/15233519","id":"15233519","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"body":"[~jojochuang], what relates to the self-signed certificates I didn't have any problems with them as soon as I saw details in stack trace.\nPlease follow e.g. [Hortonworks manual page >>|https://docs.hortonworks.com/HDPDocuments/Ambari-2.2.1.1/bk_Ambari_Security_Guide/content/_configure_ambari_to_use_ldap_server.html], there are two ways to handle this case:\n* Adding _LDAPS Server_'s certificate to _JDK_ keystore - which is less secure, since all other _JDK_ applications will also trust this certificate. But it is fine in most of the cases.\n* Generating your own JKS truststore and set up [related properties>>|https://hadoop.apache.org/docs/r2.7.1/hadoop-project-dist/hadoop-common/core-default.xml] during configuration, i.e.:\n** hadoop.security.group.mapping.ldap.ssl.keystore\n** hadoop.security.group.mapping.ldap.ssl.keystore.password.file\n\nThis  works for me, so please check it on your side.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mbuzdov","name":"mbuzdov","key":"mbuzdov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukhadin Buzdov","active":true,"timeZone":"Etc/UTC"},"created":"2016-04-09T12:07:09.174+0000","updated":"2016-04-09T12:07:09.174+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-12785/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2slr3:"}}