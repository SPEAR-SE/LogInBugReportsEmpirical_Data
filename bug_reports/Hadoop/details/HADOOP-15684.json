{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13179708","self":"https://issues.apache.org/jira/rest/api/2/issue/13179708","key":"HADOOP-15684","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-08-18T00:17:10.078+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Sep 07 01:21:17 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15684/watchers","watchCount":8,"isWatching":false},"created":"2018-08-18T00:06:13.750+0000","customfield_12310192":"When a namenode A sends request RollEditLog to a remote NN, either the remote NN is standby or IO Exception happens, A should continue to try next NN, instead of getting stuck on the problematic one.  This Patch is based on trunk.","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335733","id":"12335733","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[{"id":"12542608","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12542608","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"13183378","key":"HDFS-13900","self":"https://issues.apache.org/jira/rest/api/2/issue/13183378","fields":{"summary":"NameNode: Unable to trigger a roll of the active NN","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12541367","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12541367","type":{"id":"12310560","name":"Problem/Incident","inward":"is caused by","outward":"causes","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310560"},"inwardIssue":{"id":"12715633","key":"HDFS-6440","self":"https://issues.apache.org/jira/rest/api/2/issue/12715633","fields":{"summary":"Support more than 2 NameNodes","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-09-07T01:21:17.535+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12316608","id":"12316608","name":"ha","description":"High Availability"}],"timeoriginalestimate":null,"description":"When name node call triggerActiveLogRoll, and the cachedActiveProxy is a dead name node, it will throws a ConnectTimeoutException, expected behavior is to try next NN, but current logic doesn't do so, instead, it keeps trying the dead, mistakenly take it as active.\r\n\r\n \r\n\r\n2018-08-17 10:02:12,001 WARN [Edit log tailer] org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer: Unable to trigger a roll of the active NN\r\n\r\norg.apache.hadoop.net.ConnectTimeoutException: Call From SourceMachine001/SourceIP to001 TargetMachine001.ap.gbl:8020 failed on socket timeout exception: org.apache.hadoop.net.ConnectTimeoutException: 20000 millis timeout org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$2.doWork(EditLogTailer.java:298)\r\n\r\n \r\n\r\nC:\\Users\\rotang>ping TargetMachine001\r\n\r\nPinging TargetMachine001[TargetIP001] with 32 bytes of data:\r\n Request timed out.\r\n Request timed out.\r\n Request timed out.\r\n Request timed out.\r\n\r\n Attachment is a log file saying how it repeatedly retries a dead name node, and a fix patch.\r\n\r\n I replaced the actual machine name/ip as SourceMachine001/SourceIP001 and TargetMachine001/TargetIP001.\r\n\r\n \r\n\r\nHow to Repro:\r\n\r\nIn a good running NNs, take down the active NN (don't let it come back during test), and then the stand by NNs will keep trying dead (old active) NN, because it is the cached one.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12342324","id":"12342324","description":"3.2 release","name":"3.2.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343400","id":"12343400","name":"3.0.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343796","id":"12343796","name":"3.1.2","archived":false,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12936335","id":"12936335","filename":"0001-RollEditLog-try-next-NN-when-exception-happens.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T21:56:06.604+0000","size":6393,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12936335/0001-RollEditLog-try-next-NN-when-exception-happens.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12936536","id":"12936536","filename":"HADOOP-15684.000.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-21T22:43:54.675+0000","size":6393,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12936536/HADOOP-15684.000.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12936709","id":"12936709","filename":"HADOOP-15684.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-22T22:05:38.270+0000","size":7679,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12936709/HADOOP-15684.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12936721","id":"12936721","filename":"HADOOP-15684.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-23T00:25:13.170+0000","size":11054,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12936721/HADOOP-15684.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12937954","id":"12937954","filename":"HADOOP-15684.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-31T20:32:07.304+0000","size":10841,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12937954/HADOOP-15684.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12938558","id":"12938558","filename":"HADOOP-15684.004.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-09-06T00:01:43.649+0000","size":10814,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12938558/HADOOP-15684.004.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12936350","id":"12936350","filename":"hadoop--rollingUpgrade-SourceMachine001.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T23:16:56.768+0000","size":15287,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12936350/hadoop--rollingUpgrade-SourceMachine001.log"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"triggerActiveLogRoll stuck on dead name node, when ConnectTimeoutException happens. ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10430","value":"Patch","id":"10430"}],"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16584528","id":"16584528","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"body":"Does it actually affect Hadoop 2.75. and 2.9.1? The MultipleNameNode was added in HDFS-6440 and is not in Hadoop 2.x","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jojochuang","name":"jojochuang","key":"jojochuang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"},"displayName":"Wei-Chiu Chuang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-08-18T00:17:10.078+0000","updated":"2018-08-18T00:17:10.078+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16584558","id":"16584558","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"[~jojochuang]    No, it is not 2.7.X and 2.9.X, thanks for pointing it out.  our private branches manually merged these MultipleNameNode related changes.\r\n\r\nI also checked the truck, it still has this issue. Please help confirm it. thanks.\r\n\r\nBTW, the warning log is strange when remote nn is standby.\r\n\r\n// it is a standby exception, so we try the other NN\r\n LOG.warn(\"Failed to reach remote node: \" + currentNN\r\n + \", retrying with remaining remote NNs\");\r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-18T01:11:46.320+0000","updated":"2018-08-18T01:11:46.320+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16586322","id":"16586322","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukmajercak","name":"lukmajercak","key":"lukmajercak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukas Majercak","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for the patch [~trjianjianjiao]. Instead of adding another catch statement for ConnectTimeoutException, could we just change RemoteException to Exception? And get rid of the check for whether the exception is Standby. We should just move to the next NN no matter what the exception is.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukmajercak","name":"lukmajercak","key":"lukmajercak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukas Majercak","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T18:05:21.820+0000","updated":"2018-08-20T18:05:21.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16586356","id":"16586356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"[~lukmajercak]  I agree with you.\r\n\r\nThe current logic is:\r\n\r\n 1. Try to RollEditLog for cachedAcitveProxy.\r\n\r\n 2. If it returns StandBy exception, it knows that the cached is a standby and try next NN.\r\n\r\n3. For other exceptions, it  just re-throws, interesting is that the outer method triggerActiveLogRoll just *swallow* the exceptions.\r\n\r\n4. That means, next time, it will continue to try the same NN.\r\n\r\n \r\n\r\nThe issue I report here is that if a name node is dead(ConnectTimeoutException), it will go to step 3 and 4, and indefinitely takes the dead NN and active. \r\n\r\nA better solution, I think, is like you said.\r\n # Try to RollEditLog for cachedAcitveProxy.\r\n # If it is StandBy exception, we should log it as INFO, and try next NN.\r\n # For other exceptions,  we should log it as Warning, and try next NN.\r\n\r\n*It makes no sense to stuck trying the same NN, if it returns exception.*\r\n\r\n \r\n\r\nI will provide the patch for it. Please let me know if you have more suggestions.\r\n\r\n[~jojochuang] for knowing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-20T18:34:44.996+0000","updated":"2018-08-20T18:36:42.900+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16586703","id":"16586703","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 24s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 23m  0s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 12s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 58s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 16s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 14m  1s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 58s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 53s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m  8s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 54s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 54s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 47s{color} | {color:green} hadoop-hdfs-project/hadoop-hdfs: The patch generated 0 new + 30 unchanged - 1 fixed = 30 total (was 31) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 59s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 38s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 59s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 45s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 80m 58s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 37s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}144m  9s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.hdfs.server.datanode.TestDataNodeErasureCodingMetrics |\r\n|   | hadoop.hdfs.server.namenode.TestPersistentStoragePolicySatisfier |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderLocal |\r\n|   | hadoop.hdfs.TestLeaseRecovery2 |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:ba1ab08 |\r\n| JIRA Issue | HADOOP-15684 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12936335/0001-RollEditLog-try-next-NN-when-exception-happens.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux 220b503f8c4a 3.13.0-153-generic #203-Ubuntu SMP Thu Jun 14 08:52:28 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / e0f6ffd |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_171 |\r\n| findbugs | v3.1.0-RC1 |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/15062/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/15062/testReport/ |\r\n| Max. process+thread count | 3322 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project/hadoop-hdfs |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/15062/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-21T00:24:44.907+0000","updated":"2018-08-21T00:24:44.907+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16588029","id":"16588029","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"[~lukmajercak], [~jojochuang], [~elgoiri]\r\n\r\nFound a way to constantly re-pro this issue, which is added in the \"Description\", and I verified the fix in our Hadoop cluster.\r\n\r\nAny suggestion on what I should do now to push it forward?\r\n\r\n \r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-21T21:33:19.556+0000","updated":"2018-08-21T21:33:19.556+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16588033","id":"16588033","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukmajercak","name":"lukmajercak","key":"lukmajercak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukas Majercak","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~trjianjianjiao]. Could we add a unit test for this scenario?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lukmajercak","name":"lukmajercak","key":"lukmajercak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukas Majercak","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-21T21:35:07.918+0000","updated":"2018-08-21T21:35:07.918+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16588043","id":"16588043","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"[~lukmajercak] added, the patch contains one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-21T21:44:24.086+0000","updated":"2018-08-21T21:44:24.086+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16588074","id":"16588074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"body":"[~trjianjianjiao], add the patch with names like HADOOP-15684.000.patch.\r\nDon't remove the old ones, just add new files; this is good to keep track of the evolution of the path.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-21T22:11:27.753+0000","updated":"2018-08-21T22:11:27.753+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16588216","id":"16588216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 17s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 19m 59s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 11s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m  2s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 26s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 14m 27s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m 17s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 56s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 12s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 58s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 58s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 54s{color} | {color:green} hadoop-hdfs-project/hadoop-hdfs: The patch generated 0 new + 30 unchanged - 1 fixed = 30 total (was 31) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 15s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 13m  4s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m 17s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 52s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 90m 28s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 36s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}152m 47s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.hdfs.server.datanode.TestDataNodeUUID |\r\n|   | hadoop.hdfs.server.datanode.TestDirectoryScanner |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderLocal |\r\n|   | hadoop.hdfs.TestDFSStripedOutputStreamWithFailureWithRandomECPolicy |\r\n|   | hadoop.hdfs.TestLeaseRecovery2 |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:ba1ab08 |\r\n| JIRA Issue | HADOOP-15684 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12936536/HADOOP-15684.000.patch |\r\n| Optional Tests |  dupname  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux 2217e03e13e1 3.13.0-153-generic #203-Ubuntu SMP Thu Jun 14 08:52:28 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 9c3fc3e |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_171 |\r\n| findbugs | v3.1.0-RC1 |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/15070/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/15070/testReport/ |\r\n| Max. process+thread count | 3320 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project/hadoop-hdfs |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/15070/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-22T01:23:35.085+0000","updated":"2018-08-22T01:23:35.085+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16588946","id":"16588946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~trjianjianjiao] for  [^HADOOP-15684.000.patch].\r\nA couple comments:\r\n* Why do we need to fix the ports? Not a big fan of the retry approach.\r\n* Add a couple high level comments on the invokedtimes approach.\r\n* You should wrap the whole thing in a try finally shutdown with a null check.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-22T14:45:47.804+0000","updated":"2018-08-22T14:45:47.804+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16589398","id":"16589398","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"[~elgoiri] , thanks for your comments.\r\n * Why do we need to fix the ports? Not a big fan of the retry approach. \r\n ** _IPC ports are used to determine whether enabling roll log or not._\r\n ** _Removed the retry._\r\n * Add a couple high level comments on the invokedtimes approach.\r\n ** _Added_\r\n * You should wrap the whole thing in a try finally shutdown with a null check.\r\n ** _Moved the \"cluster\" related code into try-finally._\r\n\r\n \r\n\r\nUploaded a new patch. \r\n\r\nDo you know if there is more convenient way for code review instead of using plain text?\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-22T22:04:51.460+0000","updated":"2018-08-22T22:05:11.351+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16589429","id":"16589429","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"body":"[~jesse_yates], are you available to take a look here?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-22T22:51:06.316+0000","updated":"2018-08-22T22:51:06.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16589506","id":"16589506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"Refactor TestEditLogTailer.java to avoid duplication code of creating MiniDFSCluster with IPC ports.  patch: HADOOP-15684.002.patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-23T00:27:29.858+0000","updated":"2018-08-23T00:27:29.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16589571","id":"16589571","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 23s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 22m 42s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 57s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 51s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  6s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 13m  6s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m  2s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 50s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m  6s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 58s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 58s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 46s{color} | {color:orange} hadoop-hdfs-project/hadoop-hdfs: The patch generated 9 new + 44 unchanged - 1 fixed = 53 total (was 45) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  2s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 29s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m 10s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 46s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 99m 33s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 33s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}161m  7s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.hdfs.TestDFSInotifyEventInputStreamKerberized |\r\n|   | hadoop.hdfs.TestLeaseRecovery2 |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderLocal |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:ba1ab08 |\r\n| JIRA Issue | HADOOP-15684 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12936709/HADOOP-15684.001.patch |\r\n| Optional Tests |  dupname  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux ee4f3a53495c 3.13.0-153-generic #203-Ubuntu SMP Thu Jun 14 08:52:28 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / af4b705 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_181 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/15080/artifact/out/diff-checkstyle-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/15080/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/15080/testReport/ |\r\n| Max. process+thread count | 3041 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project/hadoop-hdfs |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/15080/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-23T01:50:33.043+0000","updated":"2018-08-23T01:50:33.043+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16589663","id":"16589663","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 17m 24s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 20m 49s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 50s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 44s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 56s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 11s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 57s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 45s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 55s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 48s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 48s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 39s{color} | {color:orange} hadoop-hdfs-project/hadoop-hdfs: The patch generated 16 new + 44 unchanged - 1 fixed = 60 total (was 45) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 55s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 10m 12s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 56s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 40s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}107m 23s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 27s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}178m 19s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailure |\r\n|   | hadoop.hdfs.qjournal.server.TestJournalNodeSync |\r\n|   | hadoop.hdfs.web.TestWebHdfsTimeouts |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:ba1ab08 |\r\n| JIRA Issue | HADOOP-15684 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12936721/HADOOP-15684.002.patch |\r\n| Optional Tests |  dupname  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux f0398b48782a 4.4.0-133-generic #159-Ubuntu SMP Fri Aug 10 07:31:43 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / af4b705 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_181 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/15081/artifact/out/diff-checkstyle-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/15081/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/15081/testReport/ |\r\n| Max. process+thread count | 3921 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project/hadoop-hdfs |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/15081/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-23T03:53:23.036+0000","updated":"2018-08-23T03:53:23.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16595935","id":"16595935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunilg","name":"sunilg","key":"sunilg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Govindan","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi [~trjianjianjiao] [~elgoiri]\r\n\r\nAs this jira is marked for 3.2 as a critical and close to finish, cud u pls help to take this forward. 3.2 code freeze date is nearby in a weeks. Kindly help to check the same.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunilg","name":"sunilg","key":"sunilg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Govindan","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-08-29T04:27:07.860+0000","updated":"2018-08-29T04:27:07.860+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16596546","id":"16596546","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"body":"We would need a review from somebody familiar with HA and the 2+ NNs code.\r\nAnyone available for review?\r\n\r\n[~trjianjianjiao], meanwhile do you mind checking the checkstyle warning and take a look at TestJournalNodeSync?\r\nThe other unit tests seem the typical ones.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-29T16:09:27.700+0000","updated":"2018-08-29T16:09:27.700+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16596696","id":"16596696","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"[~elgoiri]    For test case TestJournalNodeSync,  it also fails without my change. and it may be introduced in by  this  [commit |https://github.com/apache/hadoop/commit/96c4575d7373079becfa3e3db29ba98e6fb86388#diff-85c652b4af8b1cd3e90bda0fe753e218], add committer [~surendrasingh] to verify.\r\n\r\n[~sunilg]  What should I do to commit?\r\n\r\nAdd [~vinayrpet]  who seems to have the privilege to commit changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-29T18:29:13.360+0000","updated":"2018-08-29T18:29:13.360+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16596704","id":"16596704","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"body":"I'll follow up in HDFS-13805 for the {{TestJournalNodeSync}}, it didn't seem to break there, not sure why.\r\n\r\nFor the review, we should ask people involved in the review of HDFS-6440.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-29T18:36:38.108+0000","updated":"2018-08-29T18:36:38.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16597030","id":"16597030","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surendrasingh","name":"surendrasingh","key":"surendrasingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=surendrasingh&avatarId=30759","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=surendrasingh&avatarId=30759","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=surendrasingh&avatarId=30759","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=surendrasingh&avatarId=30759"},"displayName":"Surendra Singh Lilhore","active":true,"timeZone":"Etc/UTC"},"body":"[~trjianjianjiao] : I didn't see any failure in {{TestJournalNodeSysnc}} for HDFS-13805. Test Result link for HDFS-13805 : Test report\r\n\r\nStill I will check the failure, currently not able to open the test result for this jira, may be builds.apache.org is down. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surendrasingh","name":"surendrasingh","key":"surendrasingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=surendrasingh&avatarId=30759","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=surendrasingh&avatarId=30759","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=surendrasingh&avatarId=30759","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=surendrasingh&avatarId=30759"},"displayName":"Surendra Singh Lilhore","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-30T03:53:26.487+0000","updated":"2018-08-30T03:53:26.487+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16599259","id":"16599259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"Upload HADOOP-15684.003.patch to fix the \"checkstyle\" warnings, and to trigger a new build to see if {{TestJournalNodeSysnc}}  fails again.\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-31T20:33:23.661+0000","updated":"2018-08-31T20:33:23.661+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16599416","id":"16599416","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 28s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 27m 35s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m  5s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 44s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  2s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 12s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m 17s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 59s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 14s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m  0s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  1m  0s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 40s{color} | {color:orange} hadoop-hdfs-project/hadoop-hdfs: The patch generated 1 new + 44 unchanged - 1 fixed = 45 total (was 45) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  0s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 10m 32s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m  1s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 45s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}134m 14s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 25s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}198m  7s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.hdfs.qjournal.server.TestJournalNode |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestFsDatasetImpl |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderLocal |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeMultipleRegistrations |\r\n|   | hadoop.hdfs.server.namenode.TestReconstructStripedBlocks |\r\n|   | hadoop.hdfs.qjournal.client.TestQJMWithFaults |\r\n|   | hadoop.hdfs.TestErasureCodingPoliciesWithRandomECPolicy |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureReporting |\r\n|   | hadoop.hdfs.TestSafeMode |\r\n|   | hadoop.hdfs.server.namenode.TestCheckpoint |\r\n|   | hadoop.hdfs.web.TestWebHdfsTimeouts |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:ba1ab08 |\r\n| JIRA Issue | HADOOP-15684 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12937954/HADOOP-15684.003.patch |\r\n| Optional Tests |  dupname  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux a3133ada9f40 4.4.0-133-generic #159-Ubuntu SMP Fri Aug 10 07:31:43 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 8aa6c4f |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_181 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/15116/artifact/out/diff-checkstyle-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/15116/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/15116/testReport/ |\r\n| Max. process+thread count | 4500 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project/hadoop-hdfs |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/15116/console |\r\n| Powered by | Apache Yetus 0.9.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-31T23:59:29.046+0000","updated":"2018-08-31T23:59:29.046+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16605213","id":"16605213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 16m 48s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 19m 19s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 17s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m  4s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 26s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 15m  5s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m 10s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m  0s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 24s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 12s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  1m 12s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 54s{color} | {color:green} hadoop-hdfs-project/hadoop-hdfs: The patch generated 0 new + 44 unchanged - 1 fixed = 44 total (was 45) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 21s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 13m 52s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m 16s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 56s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}128m 16s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 43s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}208m 45s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.hdfs.TestDFSStripedOutputStreamWithFailureWithRandomECPolicy |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeMultipleRegistrations |\r\n|   | hadoop.hdfs.qjournal.server.TestJournalNodeSync |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailure |\r\n|   | hadoop.hdfs.TestDFSClientRetries |\r\n|   | hadoop.hdfs.server.namenode.TestFSImage |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeUUID |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:ba1ab08 |\r\n| JIRA Issue | HADOOP-15684 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12938558/HADOOP-15684.004.patch |\r\n| Optional Tests |  dupname  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux 431ebc928306 3.13.0-144-generic #193-Ubuntu SMP Thu Mar 15 17:03:53 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 8286bf2 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_181 |\r\n| findbugs | v3.1.0-RC1 |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/15146/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/15146/testReport/ |\r\n| Max. process+thread count | 2640 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project/hadoop-hdfs |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/15146/console |\r\n| Powered by | Apache Yetus 0.8.0   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2018-09-06T03:39:13.030+0000","updated":"2018-09-06T03:39:13.030+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16606534","id":"16606534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":"Test cases fail randomly, and my change doesn't touch them.\r\n\r\nOther people are complaining same issue.  HDFS-13900 \r\n\r\n[~sunilg]   Can I commit it?\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-09-06T23:37:06.436+0000","updated":"2018-09-06T23:37:06.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16606538","id":"16606538","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"body":"The only repeating failed unit test between  [^HADOOP-15684.004.patch] and  [^HADOOP-15684.003.patch] is TestDataNodeMultipleRegistrations.\r\nCan we double check locally it passes consistently?\r\n(Kind of depressing that we get 10+ spurious tests...)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"created":"2018-09-06T23:42:30.845+0000","updated":"2018-09-06T23:42:30.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16606565","id":"16606565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"body":" \r\n\r\n[~elgoiri]  TestDataNodeMultipleRegistrations succeeds locally.  is it possible that build is not stable recently? \r\n\r\n[INFO] Running org.apache.hadoop.hdfs.server.datanode.TestDataNodeMultipleRegistrations\r\n[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 66.715 s - in org.apache.hadoop.hdfs.server.datanode.TestDataNodeMultipleRegistrations\r\n[INFO]\r\n[INFO] Results:\r\n[INFO]\r\n[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0\r\n[INFO]\r\n[INFO]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trjianjianjiao","name":"trjianjianjiao","key":"trjianjianjiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10451","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10451","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10451","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10451"},"displayName":"Rong Tang","active":true,"timeZone":"Etc/UTC"},"created":"2018-09-07T00:26:01.340+0000","updated":"2018-09-07T00:26:01.340+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13179708/comment/16606605","id":"16606605","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"body":"bq. is it possible that build is not stable recently? \r\n\r\nYes, there are a lot of flaky tests.\r\nThere are a bunch of reports on {{TestDataNodeMultipleRegistrations}} being flaky actually.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elgoiri","name":"elgoiri","key":"elgoiri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Íñigo Goiri","active":true,"timeZone":"Etc/UTC"},"created":"2018-09-07T01:21:17.535+0000","updated":"2018-09-07T01:21:17.535+0000"}],"maxResults":28,"total":28,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15684/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3x6dj:"}}