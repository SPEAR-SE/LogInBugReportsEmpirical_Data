{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12405830","self":"https://issues.apache.org/jira/rest/api/2/issue/12405830","key":"HADOOP-4352","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2008-10-07T03:43:24.233+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 08 17:32:43 UTC 2008","customfield_12310420":"126487","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_182417397343_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-18T23:57:29.123+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-4352/watchers","watchCount":2,"isWatching":false},"created":"2008-10-06T16:27:31.803+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313296","id":"12313296","description":"","name":"0.17.2","archived":false,"released":true,"releaseDate":"2008-08-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-07-18T23:57:29.143+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"\nI encountered a job  that stays in running state forever, even though all the tasks completed a long time ago.\nThe last lines in the job tracker log complain that it cannot connect to the namenode of the dfs, although the dfs namenode works fine at present time.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12391698","id":"12391698","filename":"jobtracker_jstatck_trace.out","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=viraj","name":"viraj","key":"viraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=viraj&avatarId=18530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=viraj&avatarId=18530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=viraj&avatarId=18530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=viraj&avatarId=18530"},"displayName":"Viraj Bhat","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-10-08T01:47:51.283+0000","size":17962,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12391698/jobtracker_jstatck_trace.out"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"104375","customfield_12312823":null,"summary":"a job stays in running state forever, even though all the tasks completed a long time ago","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405830/comment/12637356","id":"12637356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"Runping, Can you paste the last lines from the JT log (including the last task) where it is complaining that it cannot connect to namenode.  Is it complaining in garbageCollect()?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2008-10-07T03:43:24.233+0000","updated":"2008-10-07T03:49:33.987+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405830/comment/12637743","id":"12637743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=viraj","name":"viraj","key":"viraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=viraj&avatarId=18530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=viraj&avatarId=18530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=viraj&avatarId=18530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=viraj&avatarId=18530"},"displayName":"Viraj Bhat","active":true,"timeZone":"America/Los_Angeles"},"body":"Java Stack trace for the JobTracker process","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=viraj","name":"viraj","key":"viraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=viraj&avatarId=18530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=viraj&avatarId=18530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=viraj&avatarId=18530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=viraj&avatarId=18530"},"displayName":"Viraj Bhat","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-10-08T01:47:51.320+0000","updated":"2008-10-08T01:47:51.320+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405830/comment/12637839","id":"12637839","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"Looked offline at a JT which was in this state. It looks like, due to an exception while updating the job history file (FSError exception) during heartbeat processing, the JT couldn't process the heartbeat completely leading to this inconsistent state. Maybe we should move to a model where we queue up everything to be written to the disk/dfs (mainly when a task is launched/succeeded/failed/killed), and let the JT deal with just in-memory datastructures during heartbeat processing.. That will lead to faster heartbeat processing as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2008-10-08T09:50:16.804+0000","updated":"2008-10-08T09:50:16.804+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405830/comment/12637922","id":"12637922","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"We can queue DFS writes, but still might wish to have disk writes inline for the sake of immediate availability of JobHistory for JobRecovery. Or in the minimum, we should give higher priority to disk writes while queuing JobHistory writes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-10-08T13:27:06.349+0000","updated":"2008-10-08T13:27:06.349+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12405830/comment/12637994","id":"12637994","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"body":"\nThe problem may be due to the following exception logged in jt log:\n\n2008-09-09 04:06:30,968 ERROR org.apache.hadoop.mapred.JobTracker: Task Commit Thread got an exception:\norg.apache.hadoop.fs.FSError: java.io.IOException: No space left on device\n        at org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileOutputStream.write(RawLocalFileSystem.java:199)\n        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n        at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)\n        at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:47)\n        at java.io.DataOutputStream.write(DataOutputStream.java:90)\n        at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSOutputSummer.writeChunk(ChecksumFileSystem.java:339)\n        at org.apache.hadoop.fs.FSOutputSummer.writeChecksumChunk(FSOutputSummer.java:155)\n        at org.apache.hadoop.fs.FSOutputSummer.write1(FSOutputSummer.java:100)\n        at org.apache.hadoop.fs.FSOutputSummer.write(FSOutputSummer.java:86)\n        at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:47)\n        at java.io.DataOutputStream.write(DataOutputStream.java:90)\n        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)\n        at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:263)\n        at sun.nio.cs.StreamEncoder.write(\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=runping","name":"runping","key":"runping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Runping Qi","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-08T17:32:43.777+0000","updated":"2008-10-08T17:32:43.777+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-4352/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0i7wn:"}}