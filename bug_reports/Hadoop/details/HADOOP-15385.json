{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13152579","self":"https://issues.apache.org/jira/rest/api/2/issue/13152579","key":"HADOOP-15385","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341706","id":"12341706","description":"2.10.0 Release","name":"2.10.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342178","id":"12342178","description":"2.8.4 Release","name":"2.8.4","archived":false,"released":true,"releaseDate":"2018-05-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343006","id":"12343006","description":"2.9.2 release","name":"2.9.2","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-04-20T01:48:36.798+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Apr 25 03:23:48 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_418954301_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_367487344","customfield_12312321":null,"resolutiondate":"2018-04-25T02:17:09.505+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15385/watchers","watchCount":8,"isWatching":false},"created":"2018-04-15T23:49:47.918+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340354","id":"12340354","name":"2.8.2","archived":false,"released":true,"releaseDate":"2017-10-24"}],"issuelinks":[{"id":"12532292","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12532292","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"inwardIssue":{"id":"13083818","key":"MAPREDUCE-6909","self":"https://issues.apache.org/jira/rest/api/2/issue/13083818","fields":{"summary":"LocalJobRunner fails when run on a node from multiple users","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-04-25T03:23:48.028+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319644","id":"12319644","name":"tools/distcp","description":"Distcp"}],"timeoriginalestimate":null,"description":"Many tests are failing in hadoop-distcp project in branch-2.8\r\nBelow are the failing tests.\r\n{noformat}\r\nFailed tests: \r\n  TestDistCpViewFs.testUpdateGlobTargetMissingSingleLevel:326->checkResult:428 expected:<4> but was:<5>\r\n  TestDistCpViewFs.testGlobTargetMissingMultiLevel:346->checkResult:428 expected:<4> but was:<5>\r\n  TestDistCpViewFs.testGlobTargetMissingSingleLevel:306->checkResult:428 expected:<2> but was:<3>\r\n  TestDistCpViewFs.testUpdateGlobTargetMissingMultiLevel:367->checkResult:428 expected:<6> but was:<8>\r\n  TestIntegration.testUpdateGlobTargetMissingSingleLevel:431->checkResult:577 expected:<4> but was:<5>\r\n  TestIntegration.testGlobTargetMissingMultiLevel:454->checkResult:577 expected:<4> but was:<5>\r\n  TestIntegration.testGlobTargetMissingSingleLevel:408->checkResult:577 expected:<2> but was:<3>\r\n  TestIntegration.testUpdateGlobTargetMissingMultiLevel:478->checkResult:577 expected:<6> but was:<8>\r\n  TestIntegration.testUpdateGlobTargetMissingSingleLevel:431->checkResult:577 expected:<4> but was:<5>\r\n  TestIntegration.testGlobTargetMissingMultiLevel:454->checkResult:577 expected:<4> but was:<5>\r\n  TestIntegration.testGlobTargetMissingSingleLevel:408->checkResult:577 expected:<2> but was:<3>\r\n  TestIntegration.testUpdateGlobTargetMissingMultiLevel:478->checkResult:577 expected:<6> but was:<8>\r\n  TestIntegration.testUpdateGlobTargetMissingSingleLevel:431->checkResult:577 expected:<4> but was:<5>\r\n  TestIntegration.testGlobTargetMissingMultiLevel:454->checkResult:577 expected:<4> but was:<5>\r\n  TestIntegration.testGlobTargetMissingSingleLevel:408->checkResult:577 expected:<2> but was:<3>\r\n  TestIntegration.testUpdateGlobTargetMissingMultiLevel:478->checkResult:577 expected:<6> but was:<8>\r\n\r\nTests run: 258, Failures: 16, Errors: 0, Skipped: 0\r\n{noformat}\r\n\r\n{noformat}\r\nrushabhs$ pwd\r\n/Users/rushabhs/hadoop/apacheHadoop/hadoop/hadoop-tools/hadoop-distcp\r\n\r\nrushabhs$ git branch\r\n branch-2\r\n  branch-2.7\r\n* branch-2.8\r\n  branch-2.9\r\n  branch-3.0\r\n\r\n rushabhs$ git log --oneline | head -n3\r\nc4ea1c8bb73 HADOOP-14970. MiniHadoopClusterManager doesn't respect lack of format option. Contributed by Erik Krogen\r\n1548205a845 YARN-8147. TestClientRMService#testGetApplications sporadically fails. Contributed by Jason Lowe\r\nc01b425ba31 YARN-8120. JVM can crash with SIGSEGV when exiting due to custom leveldb logger. Contributed by Jason Lowe.\r\n{noformat}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341706","id":"12341706","description":"2.10.0 Release","name":"2.10.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342178","id":"12342178","description":"2.8.4 Release","name":"2.8.4","archived":false,"released":true,"releaseDate":"2018-05-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343006","id":"12343006","description":"2.9.2 release","name":"2.9.2","archived":false,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12920074","id":"12920074","filename":"HADOOP-15385-branch-2.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2018-04-20T20:10:32.523+0000","size":2652,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12920074/HADOOP-15385-branch-2.001.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Many tests are failing in hadoop-distcp project in branch-2","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16441553","id":"16441553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"body":"Marking this Jira as a blocker for 2.8.4 release.\r\nCc [~djp].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-17T21:52:53.850+0000","updated":"2018-04-17T21:52:53.850+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16444805","id":"16444805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"body":"These tests are failing in branch-2.9 also.\r\n{noformat}\r\n[INFO] Results:\r\n[INFO] \r\n[ERROR] Failures: \r\n[ERROR]   TestDistCpViewFs.testGlobTargetMissingMultiLevel:346->checkResult:428 expected:<4> but was:<5>\r\n[ERROR]   TestDistCpViewFs.testGlobTargetMissingSingleLevel:306->checkResult:428 expected:<2> but was:<3>\r\n[ERROR]   TestDistCpViewFs.testUpdateGlobTargetMissingMultiLevel:367->checkResult:428 expected:<6> but was:<8>\r\n[ERROR]   TestDistCpViewFs.testUpdateGlobTargetMissingSingleLevel:326->checkResult:428 expected:<4> but was:<5>\r\n[ERROR]   TestIntegration.testGlobTargetMissingMultiLevel:454->checkResult:577 expected:<4> but was:<5>\r\n[ERROR]   TestIntegration.testGlobTargetMissingMultiLevel:454->checkResult:577 expected:<4> but was:<5>\r\n[ERROR]   TestIntegration.testGlobTargetMissingMultiLevel:454->checkResult:577 expected:<4> but was:<5>\r\n[ERROR]   TestIntegration.testGlobTargetMissingSingleLevel:408->checkResult:577 expected:<2> but was:<3>\r\n[ERROR]   TestIntegration.testGlobTargetMissingSingleLevel:408->checkResult:577 expected:<2> but was:<3>\r\n[ERROR]   TestIntegration.testGlobTargetMissingSingleLevel:408->checkResult:577 expected:<2> but was:<3>\r\n[ERROR]   TestIntegration.testUpdateGlobTargetMissingMultiLevel:478->checkResult:577 expected:<6> but was:<8>\r\n[ERROR]   TestIntegration.testUpdateGlobTargetMissingMultiLevel:478->checkResult:577 expected:<6> but was:<8>\r\n[ERROR]   TestIntegration.testUpdateGlobTargetMissingMultiLevel:478->checkResult:577 expected:<6> but was:<8>\r\n[ERROR]   TestIntegration.testUpdateGlobTargetMissingSingleLevel:431->checkResult:577 expected:<4> but was:<5>\r\n[ERROR]   TestIntegration.testUpdateGlobTargetMissingSingleLevel:431->checkResult:577 expected:<4> but was:<5>\r\n[ERROR]   TestIntegration.testUpdateGlobTargetMissingSingleLevel:431->checkResult:577 expected:<4> but was:<5>\r\n[INFO] \r\n[ERROR] Tests run: 73, Failures: 16, Errors: 0, Skipped: 0\r\n{noformat}\r\n\r\n{noformat}\r\nC02QD8LYG8WP-lm:hadoop-distcp rushabhs$ git branch\r\n* branch-2.9.1\r\n\r\nC02QD8LYG8WP-lm:hadoop-distcp rushabhs$ git status\r\nOn branch branch-2.9.1\r\nYour branch is up-to-date with 'origin/branch-2.9.1'.\r\nnothing to commit, working tree clean\r\n{noformat}\r\nCc [~Sammi].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-19T21:11:33.192+0000","updated":"2018-04-19T21:11:33.192+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16444808","id":"16444808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"body":"Added blocker for 2.9.1 also. Please remove if you feel its not a blocker.\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-19T21:12:40.233+0000","updated":"2018-04-19T21:12:40.233+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16445109","id":"16445109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sammi","name":"Sammi","key":"sammi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sammi Chen","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~shahrs87], thanks for ping me. Are you going on work on this JIRA?  I fully agree that we should better resolve the issue before the release. And on the other hand, there are some customers who are waiting eagerly to try the enhanced features in 2.9.  So If we can resolve the issue in a shot time window, that would be great.  Otherwise, I might consider leave it to next release. Your thoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sammi","name":"Sammi","key":"sammi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sammi Chen","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-20T01:48:36.798+0000","updated":"2018-04-20T01:48:36.798+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16445219","id":"16445219","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"body":"{quote} Are you going on work on this JIRA?  \r\n{quote}\r\nHi Sammi, I am _not_ planning to work on this soon. I am occupied with some other stuff.\r\nMaybe we can ping who broke/introduced these failures and request them to take a look ?\r\nThese failures are not seen in trunk or branch-3.1. Haven't checked branch-3.0.\r\n\r\nbq.   Otherwise, I might consider leave it to next release. Your thoughts?\r\nSince the junits are failing, I think there is a hidden bug somewhere and distcp is too important tool to ignore the failures. If there is a bug, then it can result in data loss/corruption.\r\n\r\nWould like to hear from other community members viewpoints.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-20T03:20:46.337+0000","updated":"2018-04-20T03:20:46.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16445334","id":"16445334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tasanuma0829","name":"tasanuma0829","key":"tasanuma0829","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takanobu Asanuma","active":true,"timeZone":"Asia/Tokyo"},"body":"Thanks for reporting it, [~shahrs87], and thanks for working on the release of 2.9.1, [~Sammi].\r\n\r\nI looked into this issue a little. Seems MAPREDUCE-6909 broke the tests. They succeeded with {{9f9d554edfd83cbd2249c780124a75feebc52ef3}} and failed with {{71f49406f291038ef5772f216001c9e5abb14c8d in branch-2.8}}.\r\n\r\nI'd like to ping [~jlowe] and [~ajisakaa].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tasanuma0829","name":"tasanuma0829","key":"tasanuma0829","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takanobu Asanuma","active":true,"timeZone":"Asia/Tokyo"},"created":"2018-04-20T05:28:30.968+0000","updated":"2018-04-20T05:28:30.968+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16446282","id":"16446282","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Thanks for the analysis, [~tasanuma0829]!\r\n\r\nI took a quick look at this, and the failures are an unfortunate collision between the test directory and the staging directory.  Both of these end up using 'target/tmp' as a directory, so the staging directory used during the launch of the distcp job ends up showing up in the test directory and confuses the test when it checks how many files are in its test directory.  I can put up a patch shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2018-04-20T19:59:30.291+0000","updated":"2018-04-20T19:59:30.291+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16446297","id":"16446297","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Here's a patch that uses a unique path for each test suite that won't collide with the hadoop.tmp.dir set during the unit test runs.  This is something we would need to do for parallel unit tests anyway.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2018-04-20T20:12:22.212+0000","updated":"2018-04-20T20:12:22.212+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16447535","id":"16447535","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tasanuma0829","name":"tasanuma0829","key":"tasanuma0829","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takanobu Asanuma","active":true,"timeZone":"Asia/Tokyo"},"body":"Thanks for the explanation of the cause and uploading the patch quickly, [~jlowe]!\r\n\r\n+1 (non-binding) for the latest patch. I confirmed that the tests succeeded with it in branch-2.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tasanuma0829","name":"tasanuma0829","key":"tasanuma0829","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Takanobu Asanuma","active":true,"timeZone":"Asia/Tokyo"},"created":"2018-04-23T03:48:10.617+0000","updated":"2018-04-23T03:48:10.617+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16449234","id":"16449234","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 24s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m  0s{color} | {color:blue} Findbugs executables are not available. {color} |\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\r\n|| || || || {color:brown} branch-2 Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 10m 12s{color} | {color:green} branch-2 passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 23s{color} | {color:green} branch-2 passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 16s{color} | {color:green} branch-2 passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 29s{color} | {color:green} branch-2 passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 18s{color} | {color:green} branch-2 passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 25s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 20s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 20s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 13s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 25s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 14s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}423m 39s{color} | {color:red} hadoop-distcp in the patch failed. {color} |\r\n| {color:red}-1{color} | {color:red} asflicense {color} | {color:red}  0m 27s{color} | {color:red} The patch generated 2 ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}438m 38s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.tools.TestDistCpSystem |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:f667ef1 |\r\n| JIRA Issue | HADOOP-15385 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12920074/HADOOP-15385-branch-2.001.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux d0c3fd34b579 3.13.0-137-generic #186-Ubuntu SMP Mon Dec 4 19:09:19 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | branch-2 / 99e82e2 |\r\n| maven | version: Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00) |\r\n| Default Java | 1.7.0_171 |\r\n| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/14517/artifact/out/patch-unit-hadoop-tools_hadoop-distcp.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/14517/testReport/ |\r\n| asflicense | https://builds.apache.org/job/PreCommit-HADOOP-Build/14517/artifact/out/patch-asflicense-problems.txt |\r\n| Max. process+thread count | 241 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-tools/hadoop-distcp U: hadoop-tools/hadoop-distcp |\r\n| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/14517/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-24T03:36:12.853+0000","updated":"2018-04-24T03:36:12.853+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16449855","id":"16449855","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~jlowe] for the patch and [~tasanuma0829] for the review.\r\n+1 (binding).\r\nThere are 3 test failures in {{TestDistCpSystem}}.\r\nSince this patch is just a test code change, I can't think this patch broke tests in {{TestDistCpSystem}}.\r\nJason, can you please verify that these failures are unrelated and if possible create a tracking jira.\r\nI will commit this patch shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahrs87","name":"shahrs87","key":"shahrs87","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rushabh S Shah","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-24T13:35:32.383+0000","updated":"2018-04-24T13:35:32.383+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16450026","id":"16450026","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"The failures are unrelated and pass for me locally on branch-2 with or without the patch applied.\r\n\r\nThe ASF warnings are for hs_err pid files, so apparently the JVM was crashing on the system at least twice during the tests.  That could easily explain why the test was failing with timeouts and other errors if the launched distcp didn't complete properly.  I'm not sure that's so much a problem with the test as it is with the setup of the Jenkins host.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2018-04-24T15:05:30.118+0000","updated":"2018-04-24T15:05:30.118+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16450067","id":"16450067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"body":"Thanks [~shahrs87] for reporting the issue and [~jlowe] for fixing. I also verified locally that the patch work well to resolve previous UT problems and Jenkins report UT failure cannot reproduce locally too. ASF warning are related to environment but not our code.\r\n+1. [~shahrs87], would you like to do the honor?\r\nbtw, because this is only test problem but not serious production issue, downgrade this from blocker to critical.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-04-24T15:34:44.606+0000","updated":"2018-04-24T15:34:44.606+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16451524","id":"16451524","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"body":"I have commit the patch to branch-2, branch-2.9 and branch-2.8. Thanks [~shahrs87] for reporting the issue and [~jlowe] for delivering the fix and [~Sammi] for comments! I haven't commit it in 2.9.1 branch as leave it upto [~Sammi]'s decision given RC0 is out.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-04-25T02:17:09.533+0000","updated":"2018-04-25T02:17:09.533+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13152579/comment/16451569","id":"16451569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sammi","name":"Sammi","key":"sammi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sammi Chen","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~jlowe] for the quick fix and [~djp] for the commit. I'm glad the issue limits to the test case, doesn't impact the code.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sammi","name":"Sammi","key":"sammi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sammi Chen","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-25T03:23:48.028+0000","updated":"2018-04-25T03:23:48.028+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-15385/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3skpb:"}}