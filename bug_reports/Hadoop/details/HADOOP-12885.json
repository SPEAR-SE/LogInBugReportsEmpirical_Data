{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12946556","self":"https://issues.apache.org/jira/rest/api/2/issue/12946556","key":"HADOOP-12885","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-03-03T18:35:33.270+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Mar 07 18:08:18 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-12885/watchers","watchCount":4,"isWatching":false},"created":"2016-03-03T14:16:11.348+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=madhuch-ms","name":"madhuch-ms","key":"madhuch-ms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"madhumita chakraborty","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-03-07T18:08:18.380+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"An operation of atomic fold rename crashed in Wasb FileSystem\n{code}\norg.apache.hadoop.fs.azure.AzureException: Source blob hbase/azurtst-xiaomi/data/default/YCSBTest/5f882f5492c90b4c03a26561a2ee0a96/.regioninfo does not exist.\n        at org.apache.hadoop.fs.azure.AzureNativeFileSystemStore.rename(AzureNativeFileSystemStore.java:2405)\n        at org.apache.hadoop.fs.azure.NativeAzureFileSystem$FolderRenamePending.execute(NativeAzureFileSystem.java:413)\n        at org.apache.hadoop.fs.azure.NativeAzureFileSystem.rename(NativeAzureFileSystem.java:1997)\n{code}\n\nThe problem is that there are duplicated file is the RenamePending.json. \n{code}\n    \"5f882f5492c90b4c03a26561a2ee0a96\",                                                     \n\"5f882f5492c90b4c03a26561a2ee0a96\\/.regioninfo\",                                                                                                                              \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/C\\/8a2c08db432d447d9e0ed5266940b25e\",                         \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/C\\/9425c621073e41df9430e88f0ef61c01\",                         \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/C\\/f9fc55a94fa34efbb2d26be77c76187c\",                         \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/.regioninfo\",                                                 \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/.tmp\",                                                        \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/C\",                                                           \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/C\\/8a2c08db432d447d9e0ed5266940b25e\",                         \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/C\\/9425c621073e41df9430e88f0ef61c01\",                         \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/C\\/f9fc55a94fa34efbb2d26be77c76187c\",                         \n    \"5f882f5492c90b4c03a26561a2ee0a96\\/recovered.edits\", \n\n{code}\n\nMaybe there is a bug in the Listing of all the files in the folder in Wasb. Any suggestions?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12791710","id":"12791710","filename":"hbase.16773.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-07T05:10:24.783+0000","size":134187,"mimeType":"text/x-log","content":"https://issues.apache.org/jira/secure/attachment/12791710/hbase.16773.log"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"An operation of atomic fold rename crashed in Wasb FileSystem","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15178338","id":"15178338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"Hello [~liushaohui].  There have been several recent bug fixes in this area.  Please see HADOOP-12634 and HADOOP-12780.  If it looks like these address the problem you saw, then would you please close this as a duplicate issue?  Thank you.\n\nCc [~gouravk], [~madhuch-ms], [~onpduo], [~dchickabasapa].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-03T18:35:33.270+0000","updated":"2016-03-03T18:35:33.270+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15179166","id":"15179166","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for your reminding~ [~cnauroth]\nI think this problem is different from HADOOP-12634 and HADOOP-12780.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-04T02:15:06.304+0000","updated":"2016-03-04T02:15:06.304+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15180372","id":"15180372","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"[~liushaohui], interesting...  I think you're right that this one is different.  I have not seen cases of duplicates showing up in the rename pending list like you showed in the description.  Cc [~gouravk], [~madhuch-ms], [~onpduo], [~dchickabasapa] to check if any of them have seen something like this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-04T18:57:31.373+0000","updated":"2016-03-04T18:57:31.373+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15180386","id":"15180386","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gouravk","name":"gouravk","key":"gouravk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gaurav Kanade","active":true,"timeZone":"Etc/UTC"},"body":"I agree; [~madhuch-ms] since you worked on this specifically in the latest instance does this look like a case that can happen and we might have missed? \n\nAlso is it possible this might be a regression due to latest fixes?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gouravk","name":"gouravk","key":"gouravk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gaurav Kanade","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-04T19:07:24.319+0000","updated":"2016-03-04T19:07:24.319+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15182536","id":"15182536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=madhuch-ms","name":"madhuch-ms","key":"madhuch-ms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"madhumita chakraborty","active":true,"timeZone":"Etc/UTC"},"body":"[~liushaohui] Could you please share the logs, a cluster where you are able to repro this issue and the storage account details of the cluster? And are you getting this error when the first rename happened, or after some crash happened, and we are trying to redo the pending renames?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=madhuch-ms","name":"madhuch-ms","key":"madhuch-ms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"madhumita chakraborty","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-07T03:47:55.122+0000","updated":"2016-03-07T03:47:55.122+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15182571","id":"15182571","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=madhuch-ms","name":"madhuch-ms","key":"madhuch-ms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"madhumita chakraborty","active":true,"timeZone":"Etc/UTC"},"body":"[~liushaohui] Some more doubts\nHow often you are facing this? Are you seeing this frequently across many clusters in production?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=madhuch-ms","name":"madhuch-ms","key":"madhuch-ms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"madhumita chakraborty","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-07T04:37:57.982+0000","updated":"2016-03-07T04:37:57.982+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15182574","id":"15182574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. ...storage account details of the cluster...\n\nPlease do not share any passwords, ssh keys, or any other forms of private credentials over Apache JIRA.  This is a public forum, and you wouldn't want to let the whole Internet into your cluster.  :-)  I apologize if I misinterpreted this comment, but I wanted to make sure no one was compromised by mistake.\n\nSharing additional logs though would be fine to help troubleshoot root cause.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-07T04:39:31.332+0000","updated":"2016-03-07T04:39:31.332+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15182586","id":"15182586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"body":"[~madhuch-ms]\n{quote}\nCould you please share the logs, a cluster where you are able to repro this issue and the storage account details of the cluster?\n{quote}\nThe storage account is xiaomitst2 in Central India and the container is named xiaomi. The state of container didn't be changed after this issue. The RenamePending.json(/hbase/azurtst-xiaomi/data/default/YCSBTest-RenamePending.json) is still there.\n\n{quote}\nAnd are you getting this error when the first rename happened, or after some crash happened, and we are trying to redo the pending renames?\n{quote}\nThe exception when  the first rename happened\n{code}\n2016-02-29,05:58:57,780 ERROR org.apache.hadoop.hbase.master.handler.TableEventHandler: Error manipulating table YCSBTest\norg.apache.hadoop.fs.azure.AzureException: Source blob hbase/azurtst-xiaomi/data/default/YCSBTest/5f882f5492c90b4c03a26561a2ee0a96/.regioninfo does not exist.\n        at org.apache.hadoop.fs.azure.AzureNativeFileSystemStore.rename(AzureNativeFileSystemStore.java:2405)\n        at org.apache.hadoop.fs.azure.NativeAzureFileSystem$FolderRenamePending.execute(NativeAzureFileSystem.java:413)\n        at org.apache.hadoop.fs.azure.NativeAzureFileSystem.rename(NativeAzureFileSystem.java:1997)\n        at org.apache.hadoop.hbase.master.MasterFileSystem.moveTableToTemp(MasterFileSystem.java:586)\n        at org.apache.hadoop.hbase.master.handler.DeleteTableHandler.handleTableOperation(DeleteTableHandler.java:105)\n        at org.apache.hadoop.hbase.master.handler.TableEventHandler.process(TableEventHandler.java:129)\n        at org.apache.hadoop.hbase.executor.EventHandler.run(EventHandler.java:128)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n{code}\nWhen we are trying to redo the pending renames,  it encounter the bug mentioned in HDFS-9897\n{code}\njava.io.IOException: Attempting to complete rename of file hbase/azurtst-xiaomi/data/default/YCSBTest/.tabledesc during folder rename redo, and file was not found in source or destination.\n        at org.apache.hadoop.fs.azure.NativeAzureFileSystem$FolderRenamePending.finishSingleFileRename(NativeAzureFileSystem.java:561)\n        at org.apache.hadoop.fs.azure.NativeAzureFileSystem$FolderRenamePending.redo(NativeAzureFileSystem.java:511)\n        at org.apache.hadoop.fs.azure.NativeAzureFileSystem.conditionalRedoFolderRenames(NativeAzureFileSystem.java:1743)\n        at org.apache.hadoop.fs.azure.NativeAzureFileSystem.listStatus(NativeAzureFileSystem.java:1689)\n        at org.apache.hadoop.fs.FileSystem.listStatus(FileSystem.java:1515)\n        at org.apache.hadoop.fs.FileSystem.listStatus(FileSystem.java:1555)\n        at org.apache.hadoop.hbase.util.FSUtils.getLocalTableDirs(FSUtils.java:1333)\n        at org.apache.hadoop.hbase.util.FSUtils.getTableDirs(FSUtils.java:1318)\n        at org.apache.hadoop.hbase.util.FSTableDescriptors.getAll(FSTableDescriptors.java:206)\n        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:920)\n        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:711)\n        at java.lang.Thread.run(Thread.java:745)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-07T04:59:19.155+0000","updated":"2016-03-07T04:59:19.155+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15182588","id":"15182588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"body":"[~madhuch-ms]\n{quote}\nHow often you are facing this? Are you seeing this frequently across many clusters in production?\n{quote}\nNo. Only once so far. I tried but failed to reproduce this problem for many times.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-07T05:02:28.330+0000","updated":"2016-03-07T05:02:28.330+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15182592","id":"15182592","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"body":"Here is log from when the first rename happened. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liushaohui","name":"liushaohui","key":"liushaohui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Liu Shaohui","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-07T05:10:24.787+0000","updated":"2016-03-07T05:10:24.787+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12946556/comment/15183368","id":"15183368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gouravk","name":"gouravk","key":"gouravk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gaurav Kanade","active":true,"timeZone":"Etc/UTC"},"body":"[~liushaohui] I remember you reported a similar JIRA https://issues.apache.org/jira/browse/HADOOP-12884 and that was reported as dup and resolved. I understand the symptom here is slightly different but just checking did you retry with the appropriate versions that had the fix for the previous issue and were you able to repro it with appropriate updated versions? If not there is a possibility that the issue may be self-resolved with the latest versions. Just something to verify\n\n[~onpduo], [~pravinmittal] for context","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gouravk","name":"gouravk","key":"gouravk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gaurav Kanade","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-07T18:08:18.380+0000","updated":"2016-03-07T18:08:18.380+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-12885/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2u3m7:"}}