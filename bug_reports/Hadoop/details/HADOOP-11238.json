{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12750886","self":"https://issues.apache.org/jira/rest/api/2/issue/12750886","key":"HADOOP-11238","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329005","id":"12329005","description":"2.6.1 release","name":"2.6.1","archived":false,"released":true,"releaseDate":"2015-09-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12327583","id":"12327583","description":"2.7.0 release","name":"2.7.0","archived":false,"released":true,"releaseDate":"2015-04-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335733","id":"12335733","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-11-10T22:31:50.903+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Aug 31 02:50:11 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_2775469847_*|*_1_*:*_1_*:*_1209587485_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-12-13T00:33:38.305+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-11238/watchers","watchCount":19,"isWatching":false},"created":"2014-10-27T21:36:01.023+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["2.6.1-candidate"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327745","id":"12327745","description":"2.5.1 release","name":"2.5.1","archived":false,"released":true,"releaseDate":"2014-09-05"}],"issuelinks":[{"id":"12402754","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12402754","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12676739","key":"HADOOP-10077","self":"https://issues.apache.org/jira/rest/api/2/issue/12676739","fields":{"summary":"o.a.h.s.Groups should refresh in the background","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12401386","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12401386","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12676739","key":"HADOOP-10077","self":"https://issues.apache.org/jira/rest/api/2/issue/12676739","fields":{"summary":"o.a.h.s.Groups should refresh in the background","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12403469","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12403469","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12761508","key":"HADOOP-11402","self":"https://issues.apache.org/jira/rest/api/2/issue/12761508","fields":{"summary":"Negative user-to-group cache entries are never cleared for never-again-accessed users","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-08-30T01:31:42.356+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"This patch addresses an issue where the namenode pauses during group resolution by only allowing a single group resolution query on expiry. There are two scenarios:\n1. When there is not yet a value in the cache, all threads which make a request will block while a single thread fetches the value.\n2. When there is already a value in the cache and it is expired, the new value will be fetched in the background while the old value is used by other threads\nThis is handled by guava's cache.\n\nNegative caching is a feature built into the groups cache, and since guava's caches don't support different expiration times, we have a separate negative cache which masks the guava cache: if an element exists in the negative cache and isn't expired, we return it.\n\nIn total the logic for fetching a group is:\n1. If username exists in static cache, return the value (this was already present)\n2. If username exists in negative cache and negative cache is not expired, raise an exception as usual\n3. Otherwise Defer to guava cache (see two scenarios above)\n\n\nOriginal Issue Below:\n----------------------------\nOur namenode pauses for 12-60 seconds several times every hour. During these pauses, no new requests can come in.\n\nAround the time of pauses, we have log messages such as:\n2014-10-22 13:24:22,688 WARN org.apache.hadoop.security.Groups: Potential performance problem: getGroups(user=xxxxx) took 34507 milliseconds.\n\nThe current theory is:\n1. Groups has a cache that is refreshed periodically. Each entry has a cache expiry.\n2. When a cache entry expires, multiple threads can see this expiration and then we have a thundering herd effect where all these threads hit the wire and overwhelm our LDAP servers (we are using ShellBasedUnixGroupsMapping with sssd, how this happens has yet to be established)\n3. group resolution queries begin to take longer, I've observed it taking 1.2 seconds instead of the usual 0.01-0.03 seconds when measuring in the shell `time groups myself`\n4. If there is mutual exclusion somewhere along this path, a 1 second pause could lead to a 60 second pause as all the threads compete for the resource. The exact cause hasn't been established\n\nPotential solutions include:\n1. Increasing group cache time, which will make the issue less frequent\n2. Rolling evictions of the cache so we prevent the large spike in LDAP queries\n3. Gate the cache refresh so that only one thread is responsible for refreshing the cache\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12686935","id":"12686935","filename":"HADOOP-11238.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-12T20:12:10.116+0000","size":17793,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12686935/HADOOP-11238.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12686121","id":"12686121","filename":"HADOOP-11238.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-09T22:58:27.289+0000","size":17793,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12686121/HADOOP-11238.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12685414","id":"12685414","filename":"HADOOP-11238.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-05T20:12:46.734+0000","size":16825,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12685414/HADOOP-11238.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12680662","id":"12680662","filename":"HADOOP-11238.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-11-10T21:35:38.831+0000","size":15531,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12680662/HADOOP-11238.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Update the NameNode's Group Cache in the background when possible","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14205364","id":"14205364","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"body":"Uploading patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-11-10T21:35:38.840+0000","updated":"2014-11-10T21:35:38.840+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14205437","id":"14205437","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12680662/HADOOP-11238.patch\n  against trunk revision eace218.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-common-project/hadoop-common:\n\n                  org.apache.hadoop.security.ssl.TestReloadingX509TrustManager\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HADOOP-Build/5060//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5060//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-11-10T22:31:50.903+0000","updated":"2014-11-10T22:31:50.903+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14205602","id":"14205602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"body":"Chris , Could you please describe the solution ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-10T23:57:22.276+0000","updated":"2014-11-10T23:57:22.276+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14207107","id":"14207107","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"body":"Sure:\n\nThis patch addresses the issue by only allowing a single group resolution query on expiry. There are two scenarios:\n1. When there is not yet a value in the cache, all threads which make a request will block while a single thread fetches the value.\n2. When there is already a value in the cache and it is expired, the new value will be fetched in the background while the old value is used by other threads\n\nThis is handled by guava's cache.\n\nNegative caching is a feature built into the groups cache, and since guava's caches don't support different expiration times, we have a separate negative cache which masks the guava cache: if an element exists in the negative cache and isn't expired, we return it.\n\nIn total the logic for fetching a group is:\n\n1. If username exists in static cache, return the value (this was already present)\n2. If username exists in negative cache and negative cache is not expired, raise an exception\n3. Defer to guava cache (see two scenarios above)\n\nLet me know if you'd like additional details. Also I will investigate that failing test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-11-11T21:30:08.505+0000","updated":"2014-11-11T21:30:08.505+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14207110","id":"14207110","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"body":"Hmm, that test passes on my local machine so it may be another patch causing that failure. I can re-upload the patch later to trigger another run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-11-11T21:31:20.473+0000","updated":"2014-11-11T21:31:20.473+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14208842","id":"14208842","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"body":"Nice way to refresh the cache asynchronously to avoid penalizing few requests.\n\nIn the new implementation, it looks like a user's group will be refreshed periodically forever even if the user accessed Hadoop only once. Is there a way to prevent that ? \n\nLine #63 is more than 100 lines. \nIn line#63 could you keep the type of the variable as _Map_ instead of _ConcurrentHashMap_ ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-12T22:56:47.445+0000","updated":"2014-11-12T22:56:47.445+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14208847","id":"14208847","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"body":"The test failure seems to be unrelated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-12T22:57:23.912+0000","updated":"2014-11-12T22:57:23.912+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14212649","id":"14212649","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue might overlap with HADOOP-10077, which also has a patch available.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-14T19:06:58.693+0000","updated":"2014-11-14T19:06:58.693+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14233541","id":"14233541","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"[~chris li] Do you think  HADOOP-10077 complete addresses this one? Ideally one of them should be marked as duplicate.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-03T21:23:49.524+0000","updated":"2014-12-03T21:23:49.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14234658","id":"14234658","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"[~chrilisf], thanks for working on this.  Can you update the JIRA title and description to better describe the patch here?  It seems like the approach here is the same as on HADOOP-10077... refreshing the groups cache in the background.  Normally, the description and title of a JIRA should refer to the patch.  It is nice to have detailed information about exactly what happened on a particular cluster, but we generally put this in the first comment.  That way, it is easier to browse through JIRAs to see what each JIRA implemented.\n\nThe patch on HADOOP-10077 would need to be updated to handle negative caching and warningDeltaMs, which didn't exist back when I wrote it.  So I feel that the patch on this JIRA is more fresh.  If this JIRA gets committed, we should definitely mark HADOOP-10077 as a duplicate of it.\n\n{code}\n+    this.cache = CacheBuilder.newBuilder()\n+      .refreshAfterWrite(cacheTimeout, TimeUnit.MILLISECONDS)\n+      .ticker(new TimerToTickerAdapter(timer))\n+      .build(new GroupCacheLoader());\n{code}\n\nDo we need to set the ticker here?  It seems that the default ticker uses {{System.nanoTime}}, which is the same monotonic time source that Hadoop's {{Timer}} uses.\n\nCan we add a comment to {{GroupCacheLoader}} explaining that this code runs in the background if the cache entry is expired and there is an existing cache entry?  I don't think that would be completely clear to someone reading this for the first time.  And perhaps a similar comment to {{Groups#getGroups}} explaining that the access may block, but only if there is no existing entry.\n\nbq. Benoy wrote: In the new implementation, it looks like a user's group will be refreshed periodically forever even if the user accessed Hadoop only once. Is there a way to prevent that ?\n\nThis is a good point.  The code currently never shrinks the cache, only grows it.  Why don't we use Guava's {{expireAfterWrite}} option to remove entries from the cache after a certain timeout?  I guess this could be a separate configuration option, or we could just use 10 * cacheTimeout.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-04T21:33:57.117+0000","updated":"2014-12-04T21:33:57.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14235897","id":"14235897","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}\n In line#63 could you keep the type of the variable as Map instead of ConcurrentHashMap ?\n{quote}\n\nJust noted that the above recommendation cannot be carried out as the code uses _ConcurrentHashMap.remove(key, value)_. You can ignore this recommendation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-05T18:54:29.836+0000","updated":"2014-12-05T18:54:29.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14236035","id":"14236035","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"body":"[~benoyantony] I trimmed the length on line 63\n\nHi [~cmccabe], made those changes to the jira ticket, thanks for the advice.\n\nbq. Do we need to set the ticker here? It seems that the default ticker uses System.nanoTime, which is the same monotonic time source that Hadoop's Timer uses.\n\nIt's currently like this because the test case uses dependency injection to test timing. We could use a fake guava timer but I wanted to avoid tight coupling between hadoop and the guava library. Let me know what you think.\n\nbq. Why don't we use Guava's expireAfterWrite option to remove entries from the cache after a certain timeout? I guess this could be a separate configuration option, or we could just use 10 * cacheTimeout.\n\nGood idea. I added this using 10*cacheTimeout, and added some comments","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-05T20:12:35.928+0000","updated":"2014-12-05T20:12:35.928+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14236121","id":"14236121","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12685414/HADOOP-11238.patch\n  against trunk revision 3c72f54.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HADOOP-Build/5167//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5167//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-05T21:13:54.520+0000","updated":"2014-12-05T21:13:54.520+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14238539","id":"14238539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"body":"Reviewed the latest patch. Looks good. \n\nI have one issue with refresh(). \nIt invalidates the cache, but it doesn't clear the negative-cache. I believe, we should clear the negative cache in refresh().\nThough the issue is not introduced by this patch, it is better to fix it.\nCould you please fix it and add a test case to test it ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-08T22:06:00.120+0000","updated":"2014-12-08T22:06:00.120+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14238830","id":"14238830","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. It's currently like this because the test case uses dependency injection to test timing. We could use a fake guava timer but I wanted to avoid tight coupling between hadoop and the guava library. Let me know what you think.\n\nSure, seems reasonable.\n\nbq. Good idea. I added {{\\[expireAfterWrite\\]}} using 10*cacheTimeout, and added some comments\n\nGreat.\n\n{code}\n201\t     * This method will block if a cache entry doesn't exist, and\n202\t     * any subsequent requests for the user will wait on the first\n203\t     * request to return. If a user already exists in the cache,\n204\t     * this will be run in the background.\n{code}\nMaybe say \"any subsequent requests for the user will wait on *this* request to return\" to make it slightly clearer.\n\nSmall nit: can you give different names to your different patches?  There was a discussion about this on hadoop-common-dev recently, the consensus is that putting numbers on each one makes it clearer which is the latest (yes, we know JIRA attaches a date as well :)\n\nI renamed the jira to \"Update the NameNode's Group Cache in the background when possible\" to better reflect the current patch (i.e. talked about the solution, as well as the problem)\n\nThanks again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-09T01:44:27.856+0000","updated":"2014-12-09T01:44:27.856+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14240225","id":"14240225","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"body":"[~benoyantony] good catch, I fixed that in this next patch.\n\n[~cmccabe] Updated comment in this next patch. Issue rename looks good too. Also thanks for letting me know about the patch numbering, I'll do that from now on!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-09T22:56:09.547+0000","updated":"2014-12-09T22:56:09.547+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14240323","id":"14240323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12686121/HADOOP-11238.003.patch\n  against trunk revision 03867eb.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:red}-1 findbugs{color}.  The patch appears to introduce 111 new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.\n\nTest results: https://builds.apache.org/job/PreCommit-HADOOP-Build/5216//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/5216//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5216//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-09T23:55:48.724+0000","updated":"2014-12-09T23:55:48.724+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14244561","id":"14244561","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"body":"[~chrili], I don't think the \"findbugs warnings\" are introduced by this patch. Could you please re-attach the patch to trigger a new build to make sure that the findbugs issues are gone ?\n\n+1 on the patch itself.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benoyantony","name":"benoyantony","key":"benoyantony","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benoy Antony","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-12T18:29:16.888+0000","updated":"2014-12-12T18:29:16.888+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14244706","id":"14244706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"body":"Re-attaching patch to re-trigger build (no changes were made)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrilisf","name":"chrilisf","key":"chrilisf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chrilisf&avatarId=18125","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chrilisf&avatarId=18125","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chrilisf&avatarId=18125","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chrilisf&avatarId=18125"},"displayName":"Chris Li","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-12T20:12:10.122+0000","updated":"2014-12-12T20:12:10.122+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14244787","id":"14244787","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12686935/HADOOP-11238.003.patch\n  against trunk revision 46612c7.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:red}-1 findbugs{color}.  The patch appears to introduce 3 new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.\n\nTest results: https://builds.apache.org/job/PreCommit-HADOOP-Build/5258//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/5258//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5258//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-12T21:15:29.059+0000","updated":"2014-12-12T21:15:29.059+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245045","id":"14245045","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"One thing that I notice here is that negative cache entries will never be removed unless the user is accessed again.  So if I try to get the groups for \"bozo\" and then never access that user again, there will always be an entry in the hashmap for bozo ever after.... unless someone does a refresh.\n\nAnyway, that's a pre-existing problem, and the rest of the patch looks good.\n\n+1.  Thanks, Chris.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-13T00:28:26.331+0000","updated":"2014-12-13T00:28:26.331+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245052","id":"14245052","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"committed to 2.7, thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-13T00:33:38.345+0000","updated":"2014-12-13T00:33:38.345+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245055","id":"14245055","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"Filed follow-up for clearing negative cache entries for never-again-accessed users","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-13T00:35:54.798+0000","updated":"2014-12-13T00:35:54.798+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245063","id":"14245063","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-trunk-Commit #6710 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/6710/])\nHADOOP-11238. Update the NameNode's Group Cache in the background when possible (Chris Li via Colin P. McCabe) (cmccabe: rev e5a692519956aefb3a540ed0137b63cf598ac10d)\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Groups.java\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/security/TestGroupsCaching.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-13T00:42:33.200+0000","updated":"2014-12-13T00:42:33.200+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245274","id":"14245274","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #774 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/774/])\nHADOOP-11238. Update the NameNode's Group Cache in the background when possible (Chris Li via Colin P. McCabe) (cmccabe: rev e5a692519956aefb3a540ed0137b63cf598ac10d)\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Groups.java\n* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/security/TestGroupsCaching.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-13T10:44:56.642+0000","updated":"2014-12-13T10:44:56.642+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245294","id":"14245294","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #40 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/40/])\nHADOOP-11238. Update the NameNode's Group Cache in the background when possible (Chris Li via Colin P. McCabe) (cmccabe: rev e5a692519956aefb3a540ed0137b63cf598ac10d)\n* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/security/TestGroupsCaching.java\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Groups.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-13T11:45:48.935+0000","updated":"2014-12-13T11:45:48.935+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245328","id":"14245328","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #1971 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1971/])\nHADOOP-11238. Update the NameNode's Group Cache in the background when possible (Chris Li via Colin P. McCabe) (cmccabe: rev e5a692519956aefb3a540ed0137b63cf598ac10d)\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/security/TestGroupsCaching.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Groups.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-13T14:20:22.370+0000","updated":"2014-12-13T14:20:22.370+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245341","id":"14245341","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Hdfs-trunk-Java8 #37 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/37/])\nHADOOP-11238. Update the NameNode's Group Cache in the background when possible (Chris Li via Colin P. McCabe) (cmccabe: rev e5a692519956aefb3a540ed0137b63cf598ac10d)\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/security/TestGroupsCaching.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Groups.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-13T14:45:45.621+0000","updated":"2014-12-13T14:45:45.621+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245355","id":"14245355","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #41 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/41/])\nHADOOP-11238. Update the NameNode's Group Cache in the background when possible (Chris Li via Colin P. McCabe) (cmccabe: rev e5a692519956aefb3a540ed0137b63cf598ac10d)\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/security/TestGroupsCaching.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Groups.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-13T15:08:09.365+0000","updated":"2014-12-13T15:08:09.365+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14245375","id":"14245375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #1991 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1991/])\nHADOOP-11238. Update the NameNode's Group Cache in the background when possible (Chris Li via Colin P. McCabe) (cmccabe: rev e5a692519956aefb3a540ed0137b63cf598ac10d)\n* hadoop-common-project/hadoop-common/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/security/TestGroupsCaching.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Groups.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-13T15:25:46.323+0000","updated":"2014-12-13T15:25:46.323+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12750886/comment/14721895","id":"14721895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"Pulled this into 2.6.1 after [~ajisakaa] verified that the patch applies cleanly. Ran compilation and TestGroupsCaching before the push.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-31T02:50:11.847+0000","updated":"2015-08-31T02:50:11.847+0000"}],"maxResults":31,"total":31,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-11238/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i21mvb:"}}