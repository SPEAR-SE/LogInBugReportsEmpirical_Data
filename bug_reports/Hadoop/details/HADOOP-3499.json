{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12397591","self":"https://issues.apache.org/jira/rest/api/2/issue/12397591","key":"HADOOP-3499","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2008-06-11T15:11:22.369+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 18 22:17:02 UTC 2008","customfield_12310420":"125995","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3738527432_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_5166426627","customfield_12312321":null,"resolutiondate":"2008-07-18T22:17:02.375+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3499/watchers","watchCount":1,"isWatching":false},"created":"2008-06-05T15:48:14.943+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":259200,"aggregatetimeoriginalestimate":259200,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312913","id":"12312913","description":"","name":"0.17.0","archived":false,"released":true,"releaseDate":"2008-05-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T16:43:08.731+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":259200,"description":"try to decommission a node by the following the steps:\n(1) write the hostname of node which will be decommissioned in a file (the exclude file)\n(2) specified the absolute path of the exclude file as a configuration parameter dfs.hosts.exclude.\n(3) run \"bin/hadoop dfsadmin -refreshNodes\".\n\nIt is surprising that the node is found both in the \"Live Datanodes\" with \"In Service\" status, and in the \"Dead Datanodes\" of \n\nthe dfs namenode web ui. When copy new data to the HDFS, its Used size is increasing as other un-decommissioned nodes. \n\nObviously it is in service. Restarting the HDFS or waiting a long time(two day) havn't make the decommission yet.\n\nthe more strange thing, If nodes are configured as the include nodes by similar steps, then these include nodes and\nthe exclude node are all only in the \"Dead Datanodes\" lists. \n\nI did many times tests in both 0.17.0 and 0.15.1. The results is same. So i think there maybe bugs.","customfield_10010":null,"timetracking":{"originalEstimate":"72h","remainingEstimate":"72h","originalEstimateSeconds":259200,"remainingEstimateSeconds":259200},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":259200,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"104968","customfield_12312823":null,"summary":"decommission node is both in the \"Live Datanodes\" with \"In Service\" status, and in the \"Dead Datanodes\" of the dfs namenode web ui.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xprincess","name":"xprincess","key":"xprincess","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lixiangna","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xprincess","name":"xprincess","key":"xprincess","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lixiangna","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":259200,"percent":0},"customfield_12311024":null,"environment":"linux-2.6.9","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":259200,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12397591/comment/12604179","id":"12604179","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xprincess","name":"xprincess","key":"xprincess","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lixiangna","active":true,"timeZone":"Etc/UTC"},"body":"Hi,\n\nI found where the problem is:\nI gave the hostname of decommission nodes in the excludesFile, but\nthose hostnames were not the full name(no xx.com suffix). the namenode\nwould look about if a datanode's name(ip:port) or host(ip) or hostname\ncontained by the excludelist. And the hostname is the full name, not\nequal to the name in the excludelist, so nodes weren't considered in\nthe excludelist. Decommission had never successed actually!  the nodes\nin excludesFile were seemed as other new nodes.\n\nI guess if converting hostname of exclude node to ip for compare will\nbe better. Because one ip can have lots hostname. anyhow, no change is\nalso ok. if so the bug could be end?\n\nthanks\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xprincess","name":"xprincess","key":"xprincess","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lixiangna","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-11T10:58:45.916+0000","updated":"2008-06-11T10:58:45.916+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12397591/comment/12604246","id":"12604246","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"body":"lixiangna, thanks for confirming this. We could update the twiki or docs about this and then close the bug. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-06-11T15:11:22.369+0000","updated":"2008-06-11T15:11:22.369+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12397591/comment/12614743","id":"12614743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eamelink","name":"eamelink","key":"eamelink","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik Bakker","active":true,"timeZone":"Etc/UTC"},"body":"I have added a line to the FAQ about this: http://wiki.apache.org/hadoop/FAQ#17 No other Wiki pages seem to address decommissioning. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eamelink","name":"eamelink","key":"eamelink","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik Bakker","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-18T15:03:34.412+0000","updated":"2008-07-18T15:03:34.412+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12397591/comment/12614896","id":"12614896","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"body":"HADOOP-3720 added info to help message and dfs user guide. Thanks Erik for updating the twiki. I will close this bug as invalid (although we updated twiki) as there were no code changes. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit","name":"lohit","key":"lohit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lohit Vijayarenu","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-07-18T22:17:02.362+0000","updated":"2008-07-18T22:17:02.362+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-3499/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ibkf:"}}