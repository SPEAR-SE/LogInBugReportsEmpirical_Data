{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12386876","self":"https://issues.apache.org/jira/rest/api/2/issue/12386876","key":"HADOOP-2680","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2008-01-23T01:38:55.852+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 25 22:29:28 UTC 2008","customfield_12310420":"81486","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_269739487_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_1213376282","customfield_12312321":null,"resolutiondate":"2008-01-25T22:29:28.859+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-2680/watchers","watchCount":1,"isWatching":false},"created":"2008-01-22T19:33:49.372+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312740","id":"12312740","description":"","name":"0.16.0","archived":false,"released":true,"releaseDate":"2008-02-07"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-08T16:42:45.994+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"The unit test: TestDFSStorageStateRecovery has failed a couple of times with a timeout on the nightly build:\n\nHere are the logs from the failures:\nhttp://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/373/console\nhttp://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/369/console\n\n\nHere is a build where it passed:\nhttp://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/365/console\n\nHere is the part where it failed:\n\n[junit] 2008-01-22 12:16:39,499 INFO  dfs.TestDFSStorageStateRecovery (TestDFSStorageStateRecovery.java:log(84)) - ============================================================\n    [junit] 2008-01-22 12:16:39,502 INFO  dfs.TestDFSStorageStateRecovery (TestDFSStorageStateRecovery.java:log(85)) - ***TEST 34*** NAME_NODE recovery: numDirs=1 testCase=17 current=false previous=true previous.tmp=false removed.tmp=true\n    [junit] 2008-01-22 12:16:39,499 INFO  ipc.Server (Server.java:run(939)) - IPC Server handler 4 on 36207: exiting\n    [junit] 2008-01-22 12:16:39,499 INFO  ipc.Server (Server.java:run(939)) - IPC Server handler 3 on 36207: exiting\n    [junit] 2008-01-22 12:16:39,499 INFO  ipc.Server (Server.java:run(939)) - IPC Server handler 7 on 36207: exiting\n    [junit] 2008-01-22 12:16:39,499 INFO  ipc.Server (Server.java:run(353)) - Stopping IPC Server listener on 36207\n    [junit] 2008-01-22 12:16:39,499 INFO  ipc.Server (Server.java:run(939)) - IPC Server handler 2 on 36207: exiting\n    [junit] 2008-01-22 12:16:40,153 INFO  jvm.JvmMetrics (RpcMetrics.java:setTags(49)) - Initializing RPC Metrics with serverName=NameNode, port=0\n    [junit] javax.management.InstanceAlreadyExistsException: hadoop.dfs:service=NameNode,name=RpcStatistics\n    [junit] \tat com.sun.jmx.mbeanserver.RepositorySupport.addMBean(RepositorySupport.java:452)\n    [junit] \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.internal_addObject(DefaultMBeanServerInterceptor.java:1410)\n    [junit] \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:936)\n    [junit] \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:337)\n    [junit] \tat com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:497)\n    [junit] \tat org.apache.hadoop.metrics.util.MBeanUtil.registerMBean(MBeanUtil.java:50)\n    [junit] \tat org.apache.hadoop.ipc.metrics.RpcMgt.<init>(RpcMgt.java:37)\n    [junit] \tat org.apache.hadoop.ipc.metrics.RpcMetrics.<init>(RpcMetrics.java:60)\n    [junit] \tat org.apache.hadoop.ipc.Server.<init>(Server.java:969)\n    [junit] \tat org.apache.hadoop.ipc.RPC$Server.<init>(RPC.java:393)\n    [junit] \tat org.apache.hadoop.ipc.RPC.getServer(RPC.java:355)\n    [junit] 2008-01-22 12:16:40,156 INFO  dfs.NameNode (NameNode.java:initialize(125)) - Namenode up at: localhost/127.0.0.1:36768\n    [junit] \tat org.apache.hadoop.dfs.NameNode.initialize(NameNode.java:119)\n    [junit] \tat org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:174)\n    [junit] 2008-01-22 12:16:40,156 INFO  jvm.JvmMetrics (JvmMetrics.java:init(51)) - Cannot initialize JVM Metrics with processName=NameNode, sessionId=null - already initialized\n    [junit] \tat org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:160)\n    [junit] \tat org.apache.hadoop.dfs.NameNode.createNameNode(NameNode.java:849)\n    [junit] \tat org.apache.hadoop.dfs.MiniDFSCluster.<init>(MiniDFSCluster.java:195)\n    [junit] \tat org.apache.hadoop.dfs.MiniDFSCluster.<init>(MiniDFSCluster.java:134)\n    [junit] \tat org.apache.hadoop.dfs.MiniDFSCluster.<init>(MiniDFSCluster.java:86)\n    [junit] \tat org.apache.hadoop.dfs.TestDFSStorageStateRecovery.testStorageStates(TestDFSStorageStateRecovery.java:193)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:585)\n    [junit] \tat junit.framework.TestCase.runTest(TestCase.java:154)\n    [junit] \tat junit.framework.TestCase.runBare(TestCase.java:127)\n    [junit] 2008-01-22 12:16:40,158 INFO  dfs.NameNodeMetrics (NameNodeMetrics.java:<init>(74)) - Initializing NameNodeMeterics using context object:org.apache.hadoop.metrics.spi.NullContext\n    [junit] \tat junit.framework.TestResult$1.protect(TestResult.java:106)\n    [junit] \tat junit.framework.TestResult.runProtected(TestResult.java:124)\n    [junit] \tat junit.framework.TestResult.run(TestResult.java:109)\n    [junit] \tat junit.framework.TestCase.run(TestCase.java:118)\n    [junit] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n    [junit] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:297)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:672)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:567)\n    [junit] javax.management.InstanceAlreadyExistsException: hadoop.dfs:service=NameNode,name=NameNodeStatistics\n    [junit] \tat com.sun.jmx.mbeanserver.RepositorySupport.addMBean(RepositorySupport.java:452)\n    [junit] \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.internal_addObject(DefaultMBeanServerInterceptor.java:1410)\n    [junit] \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:936)\n    [junit] \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:337)\n    [junit] \tat com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:497)\n    [junit] \tat org.apache.hadoop.metrics.util.MBeanUtil.registerMBean(MBeanUtil.java:50)\n    [junit] \tat org.apache.hadoop.dfs.namenode.metrics.NameNodeMgt.<init>(NameNodeMgt.java:36)\n    [junit] \tat org.apache.hadoop.dfs.NameNodeMetrics.<init>(NameNodeMetrics.java:67)\n    [junit] \tat org.apache.hadoop.dfs.NameNode.initialize(NameNode.java:127)\n    [junit] \tat org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:174)\n    [junit] \tat org.apache.hadoop.dfs.NameNode.<init>(NameNode.java:160)\n    [junit] \tat org.apache.hadoop.dfs.NameNode.createNameNode(NameNode.java:849)\n    [junit] \tat org.apache.hadoop.dfs.MiniDFSCluster.<init>(MiniDFSCluster.java:195)\n    [junit] \tat org.apache.hadoop.dfs.MiniDFSCluster.<init>(MiniDFSCluster.java:134)\n    [junit] \tat org.apache.hadoop.dfs.MiniDFSCluster.<init>(MiniDFSCluster.java:86)\n    [junit] \tat org.apache.hadoop.dfs.TestDFSStorageStateRecovery.testStorageStates(TestDFSStorageStateRecovery.java:193)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:585)\n    [junit] \tat junit.framework.TestCase.runTest(TestCase.java:154)\n    [junit] \tat junit.framework.TestCase.runBare(TestCase.java:127)\n    [junit] \tat junit.framework.TestResult$1.protect(TestResult.java:106)\n    [junit] \tat junit.framework.TestResult.runProtected(TestResult.java:124)\n    [junit] \tat junit.framework.TestResult.run(TestResult.java:109)\n    [junit] \tat junit.framework.TestCase.run(TestCase.java:118)\n    [junit] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n    [junit] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:297)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:672)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:567)\n    [junit] 2008-01-22 12:16:40,193 INFO  fs.FSNamesystem (FSNamesystem.java:setConfigurationParameters(321)) - fsOwner=hudson,hudson\n    [junit] 2008-01-22 12:16:40,195 INFO  fs.FSNamesystem (FSNamesystem.java:setConfigurationParameters(325)) - supergroup=supergroup\n    [junit] 2008-01-22 12:16:40,195 INFO  fs.FSNamesystem (FSNamesystem.java:setConfigurationParameters(326)) - isPermissionEnabled=true\n    [junit] 2008-01-22 12:16:40,198 INFO  dfs.Storage (Storage.java:doRecover(369)) - Recovering storage directory /export/home/hudson/hudson/jobs/Hadoop-Nightly/workspace/trunk/build/test/data/name1 from previous rollback.\n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec\n    [junit] Test org.apache.hadoop.dfs.TestDFSStorageStateRecovery FAILED (timeout) ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12373799","id":"12373799","filename":"build-369-TestEditLog.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-23T01:38:55.760+0000","size":15831,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12373799/build-369-TestEditLog.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"105600","customfield_12312823":null,"summary":"Unit test fails with a timeout on nightly build: org.apache.hadoop.dfs.TestDFSStorageStateRecovery","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mukundm","name":"mukundm","key":"mukundm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukund Madhugiri","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mukundm","name":"mukundm","key":"mukundm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukund Madhugiri","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561542","id":"12561542","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mukundm","name":"mukundm","key":"mukundm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukund Madhugiri","active":true,"timeZone":"America/Los_Angeles"},"body":"This test was first seen failing on Jan 04, 2008 (see HADOOP-2524). Since this JIRA has the latest information, I am going to mark HADOOP-2524 as a DUP of this one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mukundm","name":"mukundm","key":"mukundm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukund Madhugiri","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-23T01:07:55.897+0000","updated":"2008-01-23T01:07:55.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561550","id":"12561550","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"body":"build-369-TestEditLog.txt : contains the output of this failed test from the console.\n\nKonstantin and I looked at this and it looks like disk sync was very slow during this test. We don't know if there is some other reason, but a very slow or busy partition could cause this.\n\nNot sure if this is related to TestDFSStorageStateRecovery failures.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-23T01:38:55.852+0000","updated":"2008-01-23T01:38:55.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561552","id":"12561552","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"body":"More regd TestEditLog : even when it passes, it came dangerously close to the limit, 8 minutes :\n\nhttp://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/373/testReport/org.apache.hadoop.dfs/TestEditLog/\n\nFor Hudson, we might have to reduce the number of transaction in this test.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-23T01:46:44.497+0000","updated":"2008-01-23T01:46:44.497+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561553","id":"12561553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"body":"> For Hudson, we might have to reduce the number of transaction in this test.\n\nActually this was not common till build #366 or so.. the test used to take 1-2 min in earlier builds. may be the Hudson got busier?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-23T01:51:57.013+0000","updated":"2008-01-23T01:51:57.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561554","id":"12561554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"I think these problems are related to the slowness of the mounted disk drive.\nIn case of TestEditLog name-node is supposed to make 100,000 transactions and synchronize them to disk.\nAnd this takes more than 10 minutes with less than a half of transaction completed. \nHere is the relevant part of the log:\n{code}\n    [junit] 2008-01-18 13:38:04,406 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 2727 Total time for transactions(ms): 180 Number of syncs: 54 SyncTimes(ms): 33105 28125 \n    [junit] 2008-01-18 13:39:05,135 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 5728 Total time for transactions(ms): 231 Number of syncs: 113 SyncTimes(ms): 63838 58107 \n    [junit] 2008-01-18 13:40:05,714 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 8874 Total time for transactions(ms): 294 Number of syncs: 177 SyncTimes(ms): 95192 87320 \n    [junit] 2008-01-18 13:41:05,910 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 12400 Total time for transactions(ms): 378 Number of syncs: 247 SyncTimes(ms): 125102 117586 \n    [junit] 2008-01-18 13:42:06,136 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 15279 Total time for transactions(ms): 432 Number of syncs: 303 SyncTimes(ms): 156284 146617 \n    [junit] 2008-01-18 13:43:06,820 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 18602 Total time for transactions(ms): 467 Number of syncs: 369 SyncTimes(ms): 187323 176248 \n    [junit] 2008-01-18 13:44:07,818 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 21877 Total time for transactions(ms): 514 Number of syncs: 434 SyncTimes(ms): 218905 205651 \n    [junit] 2008-01-18 13:45:08,400 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 25358 Total time for transactions(ms): 562 Number of syncs: 503 SyncTimes(ms): 250827 234296 \n    [junit] 2008-01-18 13:46:08,565 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 28183 Total time for transactions(ms): 611 Number of syncs: 559 SyncTimes(ms): 281769 263511 \n    [junit] 2008-01-18 13:47:09,728 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 31349 Total time for transactions(ms): 639 Number of syncs: 622 SyncTimes(ms): 311388 295040 \n    [junit] 2008-01-18 13:48:10,725 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 34534 Total time for transactions(ms): 668 Number of syncs: 686 SyncTimes(ms): 342038 325370 \n    [junit] 2008-01-18 13:49:11,673 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 37197 Total time for transactions(ms): 695 Number of syncs: 738 SyncTimes(ms): 372024 356322 \n    [junit] 2008-01-18 13:50:12,050 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 40113 Total time for transactions(ms): 723 Number of syncs: 796 SyncTimes(ms): 403170 385541 \n    [junit] 2008-01-18 13:51:12,981 INFO  fs.FSNamesystem (FSEditLog.java:printStatistics(772)) - Number of transactions: 42734 Total time for transactions(ms): 745 Number of syncs: 848 SyncTimes(ms): 432674 416957 \n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec\n    [junit] Test org.apache.hadoop.dfs.TestEditLog FAILED (timeout)\n{code}\n\nIn case of TestDFSStorageStateRecovery the name-node tries to recover from the aborted rollback, which means \nit needs to rename some directories. And this also takes more than a minute and causes the test to timeout.\n{code}\n    [junit] 2008-01-22 12:16:40,198 INFO  dfs.Storage (Storage.java:doRecover(369)) - Recovering storage directory /export/home/hudson/hudson/jobs/Hadoop-Nightly/workspace/trunk/build/test/data/name1 from previous rollback.\n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec\n    [junit] Test org.apache.hadoop.dfs.TestDFSStorageStateRecovery FAILED (timeout)\n{code}\n\nCould anyone please check the partition Hundson uses for storage directories.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-23T02:01:43.257+0000","updated":"2008-01-23T02:01:43.257+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561558","id":"12561558","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Could we simply decrease the value of TestEditLog.numberTransactions to 500, or even 200?  I did that in my local copy for saving time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-23T02:09:03.077+0000","updated":"2008-01-23T02:09:03.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561563","id":"12561563","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"body":"> Could we simply decrease the value of TestEditLog.numberTransactions to 500, or even 200? I did that in my local copy for saving time.\n\nBefore we do this probably its better to know what changed on Hudson. This slowness would affect pretty much everything that Hudson does...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rangadi","name":"rangadi","key":"rangadi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raghu Angadi","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-23T02:37:22.885+0000","updated":"2008-01-23T02:37:22.885+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561577","id":"12561577","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"body":"Perhaps this is causing the slowness:\n\nhttps://issues.apache.org/jira/browse/INFRA-1460? \nfocusedCommentId=12557402#action_12557402\n\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"created":"2008-01-23T04:22:38.074+0000","updated":"2008-01-23T04:22:38.074+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561600","id":"12561600","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"body":"I see that the hudson tests run on a machine that shows that lots of swap space is being used:\n\nMemory: 16G real, 5912M free, 13G swap in use, 30G swap free\n\nCan somebody please check if these machines are really swapping user processes (this could cause test runs to slow down drastically)?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"created":"2008-01-23T07:13:50.515+0000","updated":"2008-01-23T07:13:50.515+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12561602","id":"12561602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"body":"Also, a \"iostat -xc 5\" on the test machine yields:\n\nsd19     92.8   99.4  237.9  430.5  0.0 14.7   76.6   0 100\n\nwhich means that device sd19 has a service wait time of 76 ms and 100% busy (this is very very bad).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"created":"2008-01-23T07:22:40.133+0000","updated":"2008-01-23T07:22:40.133+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12386876/comment/12562720","id":"12562720","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mukundm","name":"mukundm","key":"mukundm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukund Madhugiri","active":true,"timeZone":"America/Los_Angeles"},"body":"Marking it as resolved since I have not seen it in the recent builds","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mukundm","name":"mukundm","key":"mukundm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mukund Madhugiri","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-01-25T22:29:28.693+0000","updated":"2008-01-25T22:29:28.693+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-2680/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ifgv:"}}