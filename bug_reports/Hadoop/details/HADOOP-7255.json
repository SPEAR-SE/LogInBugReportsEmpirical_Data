{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12506009","self":"https://issues.apache.org/jira/rest/api/2/issue/12506009","key":"HADOOP-7255","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310240","id":"12310240","key":"HADOOP","name":"Hadoop Common","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310240&avatarId=10095","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310240&avatarId=10095","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310240&avatarId=10095","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310240&avatarId=10095"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-05-03T05:44:41.538+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 03 11:33:51 UTC 2011","customfield_12310420":"77516","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7255/watchers","watchCount":14,"isWatching":false},"created":"2011-05-03T01:49:49.679+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316064","id":"12316064","description":"Security for hadoop-0.20","name":"0.20.203.0","archived":false,"released":true,"releaseDate":"2011-05-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-05-03T11:33:51.160+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"While testing the 0.20.203 branch we have discovered quite a severe performance regression caused by the following checkin:\n\nhttp://svn.apache.org/viewvc?view=revision&revision=1079260\n\nThis locking seems to cause a pause of a few seconds between tasks, example with DFSIOTest:\n\n*CURRENT CODE*\n{noformat}\n11/05/02 21:16:28 INFO fs.TestDFSIO: ----- TestDFSIO ----- : read\n11/05/02 21:16:28 INFO fs.TestDFSIO:            Date & time: Mon May 02 21:16:28 EDT 2011\n11/05/02 21:16:28 INFO fs.TestDFSIO:        Number of files: 5\n11/05/02 21:16:28 INFO fs.TestDFSIO: Total MBytes processed: 500\n11/05/02 21:16:28 INFO fs.TestDFSIO:      Throughput mb/sec: 303.3980582524272\n11/05/02 21:16:28 INFO fs.TestDFSIO: Average IO rate mb/sec: 327.69122314453125\n11/05/02 21:16:28 INFO fs.TestDFSIO:  IO rate std deviation: 78.95767116969083\n11/05/02 21:16:28 INFO fs.TestDFSIO:     Test exec time sec: 19.476\n11/05/02 21:16:28 INFO fs.TestDFSIO: \n{noformat}\n\n\n*WITH PATCH REMOVED*\n{noformat}\n11/05/02 21:19:03 INFO fs.TestDFSIO: ----- TestDFSIO ----- : read\n11/05/02 21:19:03 INFO fs.TestDFSIO:            Date & time: Mon May 02 21:19:03 EDT 2011\n11/05/02 21:19:03 INFO fs.TestDFSIO:        Number of files: 5\n11/05/02 21:19:03 INFO fs.TestDFSIO: Total MBytes processed: 500\n11/05/02 21:19:03 INFO fs.TestDFSIO:      Throughput mb/sec: 366.03221083455344\n11/05/02 21:19:03 INFO fs.TestDFSIO: Average IO rate mb/sec: 366.35528564453125\n11/05/02 21:19:03 INFO fs.TestDFSIO:  IO rate std deviation: 11.020931463080379\n11/05/02 21:19:03 INFO fs.TestDFSIO:     Test exec time sec: 3.543\n11/05/02 21:19:03 INFO fs.TestDFSIO: \n{noformat}\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"102641","customfield_12312823":null,"summary":"Performance regression bug caused by locking code","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","key":"tjake","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","key":"tjake","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506009/comment/13028039","id":"13028039","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathm","name":"bharathm","key":"bharathm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath Mundlapudi","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for posting performance data. Can you please let us know the test setup details? Like how big is your cluster?\nIt is interesting to see high Std Deviation without the patch. Did you try multiple runs?   \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathm","name":"bharathm","key":"bharathm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath Mundlapudi","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-03T05:44:41.538+0000","updated":"2011-05-03T05:44:41.538+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506009/comment/13028040","id":"13028040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathm","name":"bharathm","key":"bharathm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath Mundlapudi","active":true,"timeZone":"Etc/UTC"},"body":"Correction: Std deviation is high with patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathm","name":"bharathm","key":"bharathm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath Mundlapudi","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-03T05:49:57.414+0000","updated":"2011-05-03T05:49:57.414+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506009/comment/13028162","id":"13028162","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","key":"tjake","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true,"timeZone":"America/New_York"},"body":"For simplicity this is a single node from a fresh checkout.  Yes I did run this multiple times... the stddev varies on read from 78 - 30... writes are fine in terms of stddev.\n\nIf you build the test jar you should be able to reproduce locally.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","key":"tjake","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true,"timeZone":"America/New_York"},"created":"2011-05-03T11:33:51.140+0000","updated":"2011-05-03T11:33:51.140+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HADOOP-7255/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0hx7b:"}}