[This patch sends a non-empty dnRegistration so that the name-node could correctly log the data-node name with a wrong build version.
, +1

http://issues.apache.org/jira/secure/attachment/12359647/NullRegistration.patch applied and successfully tested against trunk revision r547159.

Test results:   http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/285/testReport/
Console output: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/285/console, I just committed this.  Thanks, Konstantin!, Integrated in Hadoop-Nightly #127 (See [http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/127/])]