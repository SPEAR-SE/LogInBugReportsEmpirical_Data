[Attaching a Byron's patch uploaded at HADOOP-6853., s/HADOOP-6853/HADOOP-6857/g, Thanks [~Byron Wong] for the update. Looks good to me. I'll run full test suite locally in branch-2. +1 if all the tests passed., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12702295/HADOOP-6857-revert.patch
  against trunk revision e17e5ba.

    {color:red}-1 patch{color}.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5837//console

This message is automatically generated., +1. I ran all tests of hadoop-common and hadoop-hdfs. Some tests failed but I think they are not related to the patch. Filed HDFS-7880 and HDFS-7881 for fixing them., Committed this to branch-2. Thank you, Byron!]