[I agree, this was not what was intended.  Malcolm, do you want to post a patch for this?, I wanted to send in a patch for this yesterday, but am having trouble 
with git :

    $ git remote update
    Fetching origin
    fatal: read error: Connection reset by peer
    error: Could not fetch origin

So, perhaps you could patch this ?


, Hi [~malcolm kavalsky].  Is your remote git://git.apache.org/hadoop-common.git?  If so, then I noticed the same thing earlier today.  We probably need to follow up on that with Apache Infrastructure.

Meanwhile though, I think you can make progress by using a different remote: https://git-wip-us.apache.org/repos/asf/hadoop.git.  This is the remote where we actually push committed patches.  git.apache.org is a mirror of that, and then the github copy is a mirror of git.apache.org., Patch attached, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |   5m 43s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | javac |   7m 27s | There were no new javac warning messages. |
| {color:green}+1{color} | release audit |   0m 19s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | install |   1m 38s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 31s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | common tests |  21m 43s | Tests passed in hadoop-common. |
| | |  37m 31s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12727147/HADOOP-11848.001.patch |
| Optional Tests | javac unit |
| git revision | trunk / 6f8003d |
| hadoop-common test log | https://builds.apache.org/job/PreCommit-HADOOP-Build/6145/artifact/patchprocess/testrun_hadoop-common.txt |
| Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/6145/testReport/ |
| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/6145//console |


This message was automatically generated., +1, FAILURE: Integrated in Hadoop-trunk-Commit #7639 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/7639/])
HADOOP-11848. Incorrect arguments to sizeof in DomainSocket.c (Malcolm Kavalsky via Colin P. McCabe) (cmccabe: rev a3b1d8c90288a6237089a98d4a81c25f44aedb2c)
* hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2104 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2104/])
HADOOP-11848. Incorrect arguments to sizeof in DomainSocket.c (Malcolm Kavalsky via Colin P. McCabe) (cmccabe: rev a3b1d8c90288a6237089a98d4a81c25f44aedb2c)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #163 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/163/])
HADOOP-11848. Incorrect arguments to sizeof in DomainSocket.c (Malcolm Kavalsky via Colin P. McCabe) (cmccabe: rev a3b1d8c90288a6237089a98d4a81c25f44aedb2c)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #172 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/172/])
HADOOP-11848. Incorrect arguments to sizeof in DomainSocket.c (Malcolm Kavalsky via Colin P. McCabe) (cmccabe: rev a3b1d8c90288a6237089a98d4a81c25f44aedb2c)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c
, SUCCESS: Integrated in Hadoop-Yarn-trunk #906 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/906/])
HADOOP-11848. Incorrect arguments to sizeof in DomainSocket.c (Malcolm Kavalsky via Colin P. McCabe) (cmccabe: rev a3b1d8c90288a6237089a98d4a81c25f44aedb2c)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #173 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/173/])
HADOOP-11848. Incorrect arguments to sizeof in DomainSocket.c (Malcolm Kavalsky via Colin P. McCabe) (cmccabe: rev a3b1d8c90288a6237089a98d4a81c25f44aedb2c)
* hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2122 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2122/])
HADOOP-11848. Incorrect arguments to sizeof in DomainSocket.c (Malcolm Kavalsky via Colin P. McCabe) (cmccabe: rev a3b1d8c90288a6237089a98d4a81c25f44aedb2c)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/net/unix/DomainSocket.c
]