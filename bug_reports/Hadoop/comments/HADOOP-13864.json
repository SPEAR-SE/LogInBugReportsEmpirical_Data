[To the question of "you're not requiring a password now, isn't that a bad (less secure) thing?" I reply:

My first agrument is that of symmetry. For C/C++/Python programs (anything using openssl), a trust store is a plain-text file containing certificates. No password required, and indeed there is not even a way to password-protect it. So this "protection" in java has never been thought worthy of a feature in openssl. Note that since all our certificates need to be in both pem and jks format the passwordless trust stores will continue to exist in pem format regardless of what we do in java programs.

My second argument is that the truststore password is worthless anyway. It could in theory be useful in the limited world of keytool generating a truststore, but when you actually go to use that truststore it all falls apart. The reason is that hadoop clients need the trust store in order to trust the server that they're talking to. Since the client needs it, the client has to be able to fully use the trust store. If the trust store password is given, then the client (anyone who connects to the hadoop cluster, that is) then knows the trust store password. There is no way around this: even if we try to encrypt that password, we would have to give the client the decryption key. Even if we tried to obfuscate that password, we'd have to unobfuscate the password before using it.

The other thing to consider here is that customers frequently re-use the trust store password to be the same as the keystore password. This is dumb, but it happens, and now the password is spread far and wide. The "benefit" is that the integrity of the truststore is cryptographically verified. But since essentially anyone can learn that password, anyone could write to the truststore, so... who cares?

My third argument is that the global trust store on the system has a well known password of "changeit" (even though changing it is pointless) and no software ever accesses the global trust store using this password - because it would provide no benefit.
, | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 16s{color} | {color:blue} Docker mode activated. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  7m 39s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 10m 18s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 31s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 11s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 18s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 37s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 51s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 10m  5s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 10m  5s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  4s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 18s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 40s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 48s{color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red}  7m 37s{color} | {color:red} hadoop-common in the patch failed. {color} |
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 33s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 47m 47s{color} | {color:black} {color} |
\\
\\
|| Reason || Tests ||
| Failed junit tests | hadoop.net.TestDNS |
\\
\\
|| Subsystem || Report/Notes ||
| Docker |  Image:yetus/hadoop:a9ad5d6 |
| JIRA Issue | HADOOP-13864 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12841658/HADOOP-13864.000.patch |
| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |
| uname | Linux f060250aaaf1 3.13.0-93-generic #140-Ubuntu SMP Mon Jul 18 21:21:05 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |
| git revision | trunk / f885160 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/11194/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common.txt |
|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/11194/testReport/ |
| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |
| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/11194/console |
| Powered by | Apache Yetus 0.4.0-SNAPSHOT   http://yetus.apache.org |


This message was automatically generated.

, Thanks [~yoderme] for reporting the issue and providing a patch!
+1, will commit this end of today if no objections.

, Failed test looks unrelated and passed locally. This commit results in a behavior change, but since as Mike explained here I think we should consider it a bug, hence not marking incompatible., Committed to trunk. Thanks [~yoderme] for the contribution, and [~andrew.wang] for offline reviews!, SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #10943 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/10943/])
HADOOP-13864. KMS should not require truststore password. Contributed by (xiao: rev a2b5d602201a4f619f6a68ec2168a884190d8de6)
* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/ReloadingX509TrustManager.java
* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/FileBasedKeyStoresFactory.java
* (edit) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/security/ssl/TestReloadingX509TrustManager.java
]