[
This is code trying to talk to an RM that's down, with {{yarn.resourcemanager.connect.max-wait.ms == 0 }} and {{yarn.resourcemanager.connect.retry-interval.ms==0}}
I'd have expected a fail-fast with the underlying cause, instead I see an {{UndeclaredThrowableException}}

{code}
2016-04-04 18:58:55,265 [YarnHistoryProvider Refresher] WARN  server.YarnHistoryProvider (Logging.scala:logWarning(91)) - Exception in refresh thread
java.lang.reflect.UndeclaredThrowableException
	at com.sun.proxy.$Proxy19.getApplications(Unknown Source)
	at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.getApplications(YarnClientImpl.java:479)
	at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.getApplications(YarnClientImpl.java:463)
	at org.apache.spark.deploy.history.yarn.server.YarnHistoryProvider.listYarnSparkApplications(YarnHistoryProvider.scala:947)
	at org.apache.spark.deploy.history.yarn.server.YarnHistoryProvider$$anonfun$listAndCacheApplications$1.apply(YarnHistoryProvider.scala:633)
	at org.apache.spark.deploy.history.yarn.server.YarnHistoryProvider$$anonfun$listAndCacheApplications$1.apply(YarnHistoryProvider.scala:617)
	at org.apache.spark.deploy.history.yarn.ExtendedMetricsSource$class.time(ExtendedMetricsSource.scala:60)
	at org.apache.spark.deploy.history.yarn.server.YarnHistoryProviderMetrics.time(YarnHistoryProvider.scala:1264)
	at org.apache.spark.deploy.history.yarn.server.YarnHistoryProvider.listAndCacheApplications(YarnHistoryProvider.scala:616)
	at org.apache.spark.deploy.history.yarn.server.YarnHistoryProvider$Refresher.doRefresh(YarnHistoryProvider.scala:1185)
	at org.apache.spark.deploy.history.yarn.server.YarnHistoryProvider$Refresher.run(YarnHistoryProvider.scala:1131)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.InterruptedException: sleep interrupted
	at java.lang.Thread.sleep(Native Method)
	at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:159)
	... 12 more

{code}
, log from an old bit of code. It was an interruption. next stack trace for a new app]