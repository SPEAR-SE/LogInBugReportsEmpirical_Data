[The test fails probably because of left over from a previous runs of the same test which does not cleanup /tmp/existingDir

There is another problem with the test. It replies on the system property test.build.data - in its absence it sets the default 
test dir to /tmp like many of our other tests.
The default should  really be build/test/data relative to the working dir.

The attached patch fixes this and cleans up the testWorkingDir.
While testing this patch I ran into another bug in TEST_X_FILTER which is also fixed in the patch.


This path REQUIRES a minior fix to the HDFS test that uses the same base class.
The attached patch should be followed by patch to HDFS (see attached)., +1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12422880/buildError.patch
  against trunk revision 828181.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 10 new or modified tests.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/99/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/99/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/99/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-h4.grid.sp2.yahoo.net/99/console

This message is automatically generated., +1 patch looks good., I have committed this to 0.21 and above.  Thanks, Sanjay!, Integrated in Hadoop-Common-trunk-Commit #68 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk-Commit/68/])
    . FileContext tests should not use /tmp and should clean up files.  Contributed by Sanjay Radia
, Integrated in Hadoop-Common-trunk #136 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Common-trunk/136/])
    . FileContext tests should not use /tmp and should clean up files.  Contributed by Sanjay Radia
, Integrated in Hadoop-Hdfs-trunk-Commit #80 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/80/])
    HDFS-725. Support the build error fix for .  Contributed by Sanjay Radia
, Integrated in Hdfs-Patch-h2.grid.sp2.yahoo.net #59 (See [http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/59/])
    , Integrated in Hadoop-Hdfs-trunk #120 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk/120/])
    , Integrated in Hdfs-Patch-h5.grid.sp2.yahoo.net #78 (See [http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/78/])
    ]