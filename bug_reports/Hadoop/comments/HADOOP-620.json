[
Dhruba submitted a patch that calculates total capacity, totalDiskRemaining etc when required by iterating over all the nodes instead of maintaining global counter (HADOOP-814). Replication factor can be approximated in the same way : 

replication = (sum all blocks in each node) / (size of global blockMap).

will add this once 814 is committed.
 , Test. Please ignore:
<pre> 
----
|   |
----
</pre>
]