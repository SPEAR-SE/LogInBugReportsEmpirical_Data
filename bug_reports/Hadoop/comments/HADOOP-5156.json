[{code}
compile-core-test:
    [javac] Compiling 7 source files to branch-0.20/build/test/classes
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 319 source files to branch-0.20/build/test/classes
    [javac] branch-0.20/src/test/org/apache/hadoop/hdfs/server/namenode/TestHeartbeatHandling.java:30: cannot find symbol
    [javac] symbol  : method getNamesystem()
    [javac] location: class org.apache.hadoop.hdfs.MiniDFSCluster
    [javac]       final FSNamesystem namesystem = cluster.getNamesystem();
    [javac]                                              ^
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] 1 error

BUILD FAILED
{code}
, More problems with branch 0.19:
{code}
compile-core-test:
    [javac] Compiling 7 source files to branch-0.19/build/test/classes
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] Compiling 299 source files to branch-0.19/build/test/classes
    [javac] branch-0.19/src/test/org/apache/hadoop/hdfs/NNThroughputBenchmark.java:729: incompatible types
    [javac] found   : org.apache.hadoop.hdfs.server.protocol.DatanodeCommand[]
    [javac] required: org.apache.hadoop.hdfs.server.protocol.DatanodeCommand
    [javac]       DatanodeCommand cmd = nameNode.sendHeartbeat(
    [javac]                                                   ^
    [javac] branch-0.19/src/test/org/apache/hadoop/hdfs/NNThroughputBenchmark.java:760: incompatible types
    [javac] found   : org.apache.hadoop.hdfs.server.protocol.DatanodeCommand[]
    [javac] required: org.apache.hadoop.hdfs.server.protocol.DatanodeCommand
    [javac]       DatanodeCommand cmd = nameNode.sendHeartbeat(
    [javac]                                                   ^
    [javac] branch-0.19/src/test/org/apache/hadoop/hdfs/server/namenode/TestHeartbeatHandling.java:30: cannot find symbol
    [javac] symbol  : method getNamesystem()
    [javac] location: class org.apache.hadoop.hdfs.MiniDFSCluster
    [javac]       final FSNamesystem namesystem = cluster.getNamesystem();
    [javac]                                              ^
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] 3 errors

BUILD FAILED
{code}, Here is the patch that takes the second suggested approach., This ia a patch for 0.19., I've just committed this.]