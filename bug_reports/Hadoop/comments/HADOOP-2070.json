[HADOOP-1788's patch broke Pipes in some cases by putting in a buffer and not flushing it when the application is done., Add a flush method to the downward protocol and call it before waiting for the application to finish., Speaking of which, Nigel can you please add building and testing pipes to the automated patch review process?, -1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12367916/pipes-flush.patch
against trunk revision r585648.

    @author +1.  The patch does not contain any @author tags.

    javadoc +1.  The javadoc tool did not generate any warning messages.

    javac +1.  The applied patch does not generate any new compiler warnings.

    findbugs +1.  The patch does not introduce any new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests -1.  The patch failed contrib unit tests.

Test results: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/965/testReport/
Findbugs warnings: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/965/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/965/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/965/console

This message is automatically generated., +1, I just committed this. Thanks, Owen!, Integrated in Hadoop-Nightly #277 (See [http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/277/])]