[Attaching a patch. When running the unit test, the function returns correct path to "hadoop.dll", i.e. hadoop-common-project\hadoop-common\target\bin\hadoop.dll. However the unit test does not pass fully on Windows due to the native zlib compressor not available on Windows. , The unit test in my previous comment refers to new test case in TestNativeCodeLoader added by HADOOP-9164. "-Drequire.test.libhadoop=true" is required to run the unit test; otherwise, it will be skipped., Thanks Chuan.

attached patch is working on windows 64bit machine.
, Attaching a new version with some slight update., +1 for the patch.  I verified that the patch fixes the build failure on Windows.  I also tested a native build on Linux to make sure that still works.  I'll commit this., I've committed this to trunk, branch-2, and branch-2.1-beta.  Thank you for the patch, Chuan.]