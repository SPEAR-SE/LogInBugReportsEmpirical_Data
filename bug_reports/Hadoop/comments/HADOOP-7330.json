[This is only for the branch-0.20-security* branches. yahoo-merge and trunk do not have this bug., Comment +1 on the patch.  It looks good, some tests would be nice, but it is a single line change that really doesn't impact much.  Plus it makes 0.20.20X consistent with trunk., bq. some tests would be nice.

Agreed. It'd be awesome if you can take up HADOOP-7273, which would help us write tests for JMX stuff outside HDFS., I just committed this. Thanks, Luke!, Hadoop 0.20.204.0 was released today.]