[Patch attached., +1, http://issues.apache.org/jira/secure/attachment/12345858/record-buffer.patch applied and successfully tested against trunk revision 479930, I just committed this.  Thanks, Milind!]