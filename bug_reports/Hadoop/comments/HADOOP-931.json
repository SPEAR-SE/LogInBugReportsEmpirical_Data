[Hmm.  Seeing partial files could be considered a feature.  LocalFileSystem also makes partial files visitible, no?  Is this breaking something?  If not, I'd leave things as-is., No, it's not breaking anything that I know of. I wanted to make S3FileSystem consistent with DFS, but as you rightly point out LocalFileSystem makes partial files visible.

It would be nice to improve the documentation of FileSystem to make it clearer what the contract permits, this could be combined with creating a set of common unit tests for different implementations. However, this feels like a longer term goal, so I won't pursue it further at the moment.

I'll close this issue., I would prefer the DFS doing the right thing, i.e. listing the file being created in listPaths, but not allowing it to be opened for reading while it is being written. , While we're at it, it's been often requested by Nutch users that DFS should do an automatic close of a partial file, if the process writing it abruptly exits. Currently partial files are deleted (which often means that even in case where partial files are usable they are deleted anyway)., Closing since nothing is broken. Any DFS changes should go in a new issue.]