[bq. That is basically limited by how many http fetches a thread can do per second. To further improve shuffling, we may need to consider to use keep alive http connection and fetch multiple segments per http connection.

Actually the shuffle client uses the URLConnection class which behind the scenes uses http keep-alive connection. I believe it maintains a list of connections to hosts for a particular amount of time (I am not sure whether there is an upper limit on the number of such connections). The shuffle client, however, doesn't take advantage of this. We randomize the map output locations that we have and possibly fetch from a host, the connection to which, is not there in that list of cached connections. In the meantime, some other cached connections might time out. 
, The discussion and the associated fix can continue in HADOOP-3297]