[This is a problem whenever a file name contains a comma. I am thinking to escape commas before saving the input paths to a jobconf and unescape it after reading it from the jobconf. , A patch for review., - should we use String.replaceAll(...) instead of String.replace(...)?

-  could you add some more complicated test (e.g. with two or more comma, escape char, etc)?, This patch adds a testcase as suggested by Nicholas. I think using replace is more efficient than replaceAll., +1, -1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12378426/inputPath1.patch
against trunk revision 619744.

    @author +1.  The patch does not contain any @author tags.

    tests included +1.  The patch appears to include 3 new or modified tests.

    javadoc -1.  The javadoc tool appears to have generated 1 warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs +1.  The patch does not introduce any new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2029/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2029/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2029/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2029/console

This message is automatically generated., Thanks Hairong. This patch fixes the problem I was seeing.

+1

It would be good if you could add some unit tests for the new public methods in StringUtils. I know there is a test for JobConf, but it would be nice if there were some direct tests of split, escapeString and unEscapeString (including corner cases)., Tom, thanks for testing my previous patch and suggestions. I added some testcases and ended up with rewriting all my code. :-) Here comes this brandnew patch., In java.lang.String, "".split(",") returns an empty array but StringUtils.split("") returns {""}.

What is the expected behavior for StringUtils.split(",,,")?
, FYI, all of the following return an empty array:
{code}
    System.out.println(Arrays.asList("".split(",")));
    System.out.println(Arrays.asList(",".split(",")));
    System.out.println(Arrays.asList(",,".split(",")));
{code}, Ok this patch removes all trailing empty splits as Java does., +1, +1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12378666/inputPath3.patch
against trunk revision 619744.

    @author +1.  The patch does not contain any @author tags.

    tests included +1.  The patch appears to include 6 new or modified tests.

    javadoc +1.  The javadoc tool did not generate any warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs +1.  The patch does not introduce any new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2072/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2072/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2072/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2072/console

This message is automatically generated., > I added some testcases and ended up with rewriting all my code.

Reminds me of Fred Brooks: "Plan to throw one away; you will anyhow." The changes look good, and it still fixes my original problem.

The new unit tests had the arguments to assertEquals the wrong way round (it's expected value then actual value), so I've created another patch to fix that., Thank you, Tom., I just committed this. Thank you Hairong., Integrated in Hadoop-trunk #444 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/444/])]