[
The patch is fine but does not exactly do what original intent of the code was. I suggest adding skipFully( InputStream ) and readFully( InputStream ) to our utils.

I added readFully() in FileUtil.java in the code I am working on.. It should probably go into io-utils.
, 
On second thought, this is fine I think. We may not need util methods unless there are more cases like this.
, I looked at the skipBytes code. It pretty much like skipFully since it tries to skip as many bytes any possible., +1 code is fine.

Implementation does not matter. If  the contract says it may skip less than asked for, then we need to handle it.
, Raghu, I agree with what you said. But the patch still handles the case when less number of bytes are skipped. Only when enough bytes are skipped, it returns true., > it returns true.
I meant that done is set to be true., I just committed this.  Thanks, Hairong!, +1

http://issues.apache.org/jira/secure/attachment/12357410/skip.patch applied and successfully tested against trunk revision r537939.

Test results:   http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/144/testReport/
Console output: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/144/console, Integrated in Hadoop-Nightly #90 (See http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/90/)]