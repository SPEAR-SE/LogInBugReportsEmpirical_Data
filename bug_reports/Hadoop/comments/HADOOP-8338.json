[The problem is that fetchdt doesn't include the hdfs-site.xml and therefore doesn't get the value of dfs.namenode.kerberos.principal., Hi Owen, we should call HdfsConfiguration.init() instead.
, Nicholas,
  I tend to think that HdfsConfiguration is a mistake, but it doesn't even exist in 1.x. I guess the trunk version of the patch should use it., Oops, I missed that the patch is for 1.x.  Why HdfsConfiguration is mistake?

+1 on the 1.x patch., I committed this to branch-1.0 and branch-1. Trunk was already referencing HdfsConfiguration in DelegationTokenFetcher, so the problem won't happen., Closed upon release of Hadoop-1.0.3., 1.0.3 was a lineal predecessor of 1.1.0.]