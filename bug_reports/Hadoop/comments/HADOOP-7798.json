[In Avro I'm able to push the candidate jars to Nexus with:

mvn -P dist,sign deploy -DskipTests=true -Dgpg.passphrase=XXX -Davro.version=X.Y.Z

where the 'sign' profile is:

{noformat}

    <profile>
      <id>sign</id>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-gpg-plugin</artifactId>
            <executions>
              <execution>
                <id>sign-artifacts</id>
                <phase>verify</phase>
                <goals>
	          <goal>sign</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>
{noformat}
, Thanks Doug, do you mind providing it as a patch? , Here's a patch for the 0.23 branch that works for me.  Just adding the profiles isn't enough.  It seems you can't stage stuff named *-SNAPSHOT either.  Also, the Maven versions plugin doesn't seem to like it when the version is repeated in the child, but you need to name the parent's version.

With this, 'mvn -P dist,sign deploy -DskipTests -Dgpg.passphrase=XXX' works for me, staging a release at https://repository.apache.org/ that I can close, including source and documentation jars, everything signed, etc.

After this, to change the version, you can edit the version in the top-level pom.xml then use 'mvn versions:update-child-modules' to propagate that to all of the children.  There are a few other files that unfortunately contain the version too..., I think we can use the version plugin at the top level to change the version number

{noformat}
mvn versions:set -DnewVersion=0.23.0
{noformat}

this would update the version from 0.23.0-snapshot to 0.23.0 , Since we use 'mvn versions:set' at top-level, I'm guessing we only need part of Doug's patch for the gpg plugin right?, Just the gpg plugin part of Doug's patch.

Tested this with a push of rc1 and seems to work fine., Fixed avro refs., +1 to latest mvn-gpg.patch, I just committed this. Thanks Doug!

Also thanks to Giri and Bruno., Integrated in Hadoop-Common-0.23-Commit #140 (See [https://builds.apache.org/job/Hadoop-Common-0.23-Commit/140/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196967
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Hdfs-0.23-Commit #141 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/141/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196967
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Common-trunk-Commit #1239 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1239/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196966
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Hdfs-trunk-Commit #1314 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1314/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196966
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Mapreduce-trunk-Commit #1262 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1262/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196966
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Mapreduce-0.23-Commit #153 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/153/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196967
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Hdfs-0.23-Build #65 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/65/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196967
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Hdfs-trunk #852 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/852/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196966
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Mapreduce-0.23-Build #79 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Build/79/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196967
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Mapreduce-trunk #886 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/886/])
    HADOOP-7798. Fixed jira number in CHANGES.txt.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196966
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
]