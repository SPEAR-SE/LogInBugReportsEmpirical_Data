[Another point to make is Guice filters are used in mrv2 so they cannot be added as Servlet filters as can be done in mrv1., There are two approaches I see to doing this while maintaining backwards compatibility for public APIs. 1) Add a new constructor or 2) add a public accessible API to add a filter path. This patch takes the approach of add a new constructor., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12500528/HADOOP-7764.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed the unit tests build

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/311//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/311//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/311//console

This message is automatically generated., 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2549/
-----------------------------------------------------------

Review request for Robert Evans, Ravi Prakash and Mark Holderbaugh.


Summary
-------

HttpServer allows setting global path spec filters in one constructor and ACL list in another constructor. Having both set in HttpServer is not user settable either by public API or constructor.

This feature is needed for MAPREDUCE-3175. No tests were added since no new functionality was added. Only a single API change.


This addresses bug HADOOP-7764.
    http://issues.apache.org/jira/browse/HADOOP-7764


Diffs
-----

  hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java 6ad3703 

Diff: https://reviews.apache.org/r/2549/diff


Testing
-------


Thanks,

Jonathan

, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2549/#review2804
-----------------------------------------------------------



hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
<https://reviews.apache.org/r/2549/#comment6276>

    This new constructor seems like the new fully featured one.  Why not make all other constructors call into this one? and move over the code as needed to do it?


- Robert


On 2011-10-24 20:30:15, Jonathan Eagles wrote:
bq.  
bq.  -----------------------------------------------------------
bq.  This is an automatically generated e-mail. To reply, visit:
bq.  https://reviews.apache.org/r/2549/
bq.  -----------------------------------------------------------
bq.  
bq.  (Updated 2011-10-24 20:30:15)
bq.  
bq.  
bq.  Review request for Robert Evans, Ravi Prakash and Mark Holderbaugh.
bq.  
bq.  
bq.  Summary
bq.  -------
bq.  
bq.  HttpServer allows setting global path spec filters in one constructor and ACL list in another constructor. Having both set in HttpServer is not user settable either by public API or constructor.
bq.  
bq.  This feature is needed for MAPREDUCE-3175. No tests were added since no new functionality was added. Only a single API change.
bq.  
bq.  
bq.  This addresses bug HADOOP-7764.
bq.      http://issues.apache.org/jira/browse/HADOOP-7764
bq.  
bq.  
bq.  Diffs
bq.  -----
bq.  
bq.    hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java 6ad3703 
bq.  
bq.  Diff: https://reviews.apache.org/r/2549/diff
bq.  
bq.  
bq.  Testing
bq.  -------
bq.  
bq.  
bq.  Thanks,
bq.  
bq.  Jonathan
bq.  
bq.

, Addressing comments from Bobby, 

bq.  On 2011-10-24 20:54:09, Robert Evans wrote:
bq.  > hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java, line 146
bq.  > <https://reviews.apache.org/r/2549/diff/1/?file=52894#file52894line146>
bq.  >
bq.  >     This new constructor seems like the new fully featured one.  Why not make all other constructors call into this one? and move over the code as needed to do it?

Terrific idea, Bobby.


- Jonathan


-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2549/#review2804
-----------------------------------------------------------


On 2011-10-24 20:30:15, Jonathan Eagles wrote:
bq.  
bq.  -----------------------------------------------------------
bq.  This is an automatically generated e-mail. To reply, visit:
bq.  https://reviews.apache.org/r/2549/
bq.  -----------------------------------------------------------
bq.  
bq.  (Updated 2011-10-24 20:30:15)
bq.  
bq.  
bq.  Review request for Robert Evans, Ravi Prakash and Mark Holderbaugh.
bq.  
bq.  
bq.  Summary
bq.  -------
bq.  
bq.  HttpServer allows setting global path spec filters in one constructor and ACL list in another constructor. Having both set in HttpServer is not user settable either by public API or constructor.
bq.  
bq.  This feature is needed for MAPREDUCE-3175. No tests were added since no new functionality was added. Only a single API change.
bq.  
bq.  
bq.  This addresses bug HADOOP-7764.
bq.      http://issues.apache.org/jira/browse/HADOOP-7764
bq.  
bq.  
bq.  Diffs
bq.  -----
bq.  
bq.    hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java 6ad3703 
bq.  
bq.  Diff: https://reviews.apache.org/r/2549/diff
bq.  
bq.  
bq.  Testing
bq.  -------
bq.  
bq.  
bq.  Thanks,
bq.  
bq.  Jonathan
bq.  
bq.

, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2549/
-----------------------------------------------------------

(Updated 2011-10-25 15:34:56.636502)


Review request for Robert Evans, Ravi Prakash and Mark Holderbaugh.


Changes
-------

Made the fully featured constructor as the constructor that all constructors call into. Moved path spec functionality to the main constructor.


Summary
-------

HttpServer allows setting global path spec filters in one constructor and ACL list in another constructor. Having both set in HttpServer is not user settable either by public API or constructor.

This feature is needed for MAPREDUCE-3175. No tests were added since no new functionality was added. Only a single API change.


This addresses bug HADOOP-7764.
    http://issues.apache.org/jira/browse/HADOOP-7764


Diffs (updated)
-----

  hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java 37b89f4 

Diff: https://reviews.apache.org/r/2549/diff


Testing
-------


Thanks,

Jonathan

, Also filled in some missing javadoc params in the latest patch., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12500693/HADOOP-7764.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed the unit tests build

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/315//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/315//artifact/trunk/hadoop-common-project/patchprocess/newPatchFindbugsWarningshadoop-common.html
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/315//console

This message is automatically generated., Core test failures are unrelated to my changes. Seems like the Trunk build has been broken since October 13th with the same error. , Core test failures are unrelated to my changes. Seems like the Trunk build has been broken since October 13th with the same error. , Results run from my box.

-1 overall.  

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.security.TestUserGroupInformation

    +1 contrib tests.  The patch passed contrib unit tests.
, * No tests added since only added a new constructor
* core test failure is expected for org.apache.hadoop.security.TestUserGroupInformation

* findbugs error unrelated to this patch in org.apache.hadoop.security.token.Token.getKind() is unsynchronized, org.apache.hadoop.security.token.Token.setKind(Text) is synchronized, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2549/#review2856
-----------------------------------------------------------

Ship it!


No comments

- Mark


On 2011-10-25 15:34:56, Jonathan Eagles wrote:
bq.  
bq.  -----------------------------------------------------------
bq.  This is an automatically generated e-mail. To reply, visit:
bq.  https://reviews.apache.org/r/2549/
bq.  -----------------------------------------------------------
bq.  
bq.  (Updated 2011-10-25 15:34:56)
bq.  
bq.  
bq.  Review request for Robert Evans, Ravi Prakash and Mark Holderbaugh.
bq.  
bq.  
bq.  Summary
bq.  -------
bq.  
bq.  HttpServer allows setting global path spec filters in one constructor and ACL list in another constructor. Having both set in HttpServer is not user settable either by public API or constructor.
bq.  
bq.  This feature is needed for MAPREDUCE-3175. No tests were added since no new functionality was added. Only a single API change.
bq.  
bq.  
bq.  This addresses bug HADOOP-7764.
bq.      http://issues.apache.org/jira/browse/HADOOP-7764
bq.  
bq.  
bq.  Diffs
bq.  -----
bq.  
bq.    hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java 37b89f4 
bq.  
bq.  Diff: https://reviews.apache.org/r/2549/diff
bq.  
bq.  
bq.  Testing
bq.  -------
bq.  
bq.  
bq.  Thanks,
bq.  
bq.  Jonathan
bq.  
bq.

, I just committed this. Thanks Jonathan!, Integrated in Hadoop-Common-trunk-Commit #1158 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1158/])
    HADOOP-7764. Allow HttpServer to set both ACL list and path spec filters. Contributed by Jonathan Eagles.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189314
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Integrated in Hadoop-Hdfs-0.23-Commit #55 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/55/])
    Merge -c 1189314 from trunk to branch-0.23 to fix HADOOP-7764.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189315
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Integrated in Hadoop-Common-0.23-Commit #54 (See [https://builds.apache.org/job/Hadoop-Common-0.23-Commit/54/])
    Merge -c 1189314 from trunk to branch-0.23 to fix HADOOP-7764.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189315
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Integrated in Hadoop-Mapreduce-0.23-Commit #54 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/54/])
    Merge -c 1189314 from trunk to branch-0.23 to fix HADOOP-7764.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189315
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Integrated in Hadoop-Hdfs-trunk-Commit #1236 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1236/])
    HADOOP-7764. Allow HttpServer to set both ACL list and path spec filters. Contributed by Jonathan Eagles.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189314
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Integrated in Hadoop-Mapreduce-trunk-Commit #1172 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1172/])
    HADOOP-7764. Allow HttpServer to set both ACL list and path spec filters. Contributed by Jonathan Eagles.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189314
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Thanks, Arun., Integrated in Hadoop-Hdfs-0.23-Build #52 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/52/])
    Merge -c 1189314 from trunk to branch-0.23 to fix HADOOP-7764.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189315
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Integrated in Hadoop-Mapreduce-trunk #873 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/873/])
    HADOOP-7764. Allow HttpServer to set both ACL list and path spec filters. Contributed by Jonathan Eagles.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189314
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Integrated in Hadoop-Mapreduce-0.23-Build #64 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Build/64/])
    Merge -c 1189314 from trunk to branch-0.23 to fix HADOOP-7764.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189315
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
, Integrated in Hadoop-Hdfs-trunk #845 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/845/])
    HADOOP-7764. Allow HttpServer to set both ACL list and path spec filters. Contributed by Jonathan Eagles.

acmurthy : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1189314
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/http/HttpServer.java
]