[This is related to HADOOP-1283. This patch removed the implementation of file level locks from HDFS., HADOOP-932 was filed about removing the all of the locking interface. It probably time to fix it., Remove libhdfsLock and libhdfsLockRelease(). , The tests no longer fail with this patch. Moving to patch available., +1

http://issues.apache.org/jira/secure/attachment/12360769/libhdfs.patch applied and successfully tested against trunk revision r551725.

Test results:   http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/346/testReport/
Console output: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/346/console, The changes look fine.

+1

, I just committed this.  Thanks Dhruba!, Integrated in Hadoop-Nightly #140 (See [http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/140/])]