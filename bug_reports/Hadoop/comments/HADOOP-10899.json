[Please look at all of the linked JIRAs for related information, even if closed., I've created MAPREDUCE-5942 and MAPREDUCE-5943 for this issue and attached a patch in MAPREDUCE-5942.
Committers, would you review MAPREDUCE-5942 first?, I can review any HDFS patches. I actually independently happened across this today, running "hadoop namenode" etc is definitely deprecated., Thanks Andrew, I'll file a separate JIRA for HDFS changes and attach a patch., Filed HDFS-6781 for HDFS changes., IMO, the issue was fixed by MAPREDUCE-5942, MAPREDUCE-5943, and HDFS-6781.
[~aw], May I close this issue? Thank you for the reviews and commits of the related patches., yes, probably time to close this one. Thanks for working on them!]