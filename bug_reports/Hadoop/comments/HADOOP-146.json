[I'd vote for sequential allocation.  It will take a *really* long time to cycle through all ids.  Migration should not be expensive, since it just requires renaming block files, not copying them.  The high-watermark block id can be logged with the block->name table.

Here's one way to migrate: initially the high-water-mark id is zero.  So all blocks in the name table are out-of-range, and hence need renaming.  Renaming can be handled like other blockwork: the namenode can give datanodes rename commands.  While a block is being renamed it must be kept in side tables, so that, e.g., requests to read files whose blocks are partially renamed can still be handled.
, I have attached a patch that fixes block-id conflicts for randomly generated block-ids. Now it checks after generating a block ID whether it already exists in the file system.
, I just committed this.  Thanks, Konstantin!, Oops.  I meant, "Thanks Milind! "  Sorry.  I wasn't paying attention.]