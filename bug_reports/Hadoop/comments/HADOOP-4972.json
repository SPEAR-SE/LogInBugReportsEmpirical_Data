[I checked the trunk - all calls to {{FSNamesystem.countNodes()}} are done under the FSNamesystem lock.
Could you please check earlier versions. If it is not synchronized in them we should fix it there, if not the issue can be closed., Your are right.  All of them are synchronized.  I also checked 0.18.]