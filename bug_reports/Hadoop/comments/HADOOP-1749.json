[This assert could happen if 'file.listFiles()' returns files in two different orders inside UpgradeUtilities for two directories that have same contents.

The attached patch sorts the files before checksumming them.
, +1

The patch solves the assertion error, seen in the patch for HADOOP-1601. , triggering the hudson build. , Attaching the SAME patch (Raghu's patch), in the hope that hudson build can now be started. , triggering hudson yet again. , For some magical reason, i could not trigger hudson for the last 3 attempts. In the patch for HADOOP-1601, this patch was included and passed the unit tests. So i think it is quite safe to commit this one. Can somebody please do that?, I just committed this.  Thanks, Enis!, Actually the patch is from Raghu, I would be much happier if he is credited instead of me. Sorry for the trouble.  ]