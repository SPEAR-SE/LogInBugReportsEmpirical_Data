[Hi, [~anthony.young-garner@cloudera.com].  In HADOOP-11063, I had turned on the archiveClasses option.  From this patch file, it looks like your local copy didn't have that change when you made the patch.

I thought the classes in hadoop-kms were only used by the webapp and therefore didn't need to be published as a separate Maven artifact, which is what attachClasses would do.  Is there something else that needs to depend on these classes?  If something needs to use the classes as a library, then perhaps we really need to separate them into a different module to communicate the intent more clearly and simplify the dependency declaration for those users.

Thanks!, [~cnauroth], HADOOP-11070 introduced a minikms, HDFS-7006 is testing hfds encryption using minikms, with this JIRA we publis all the necessary JARs for that work. Also it enables, somebody doing a custom keyprovider to test using KMS from testcases.

I've been chatting with [~anthony.young-garner@cloudera.com] discussing all necessary pom changes to get this right, he is testing a patch and will post it as soon as verified., [~tucu00], thanks for the explanation.  That makes sense now., Updated patch to use JARs from HDFS-7006, +1 tested patch locally. I'll look at the findbugs issues of HDFS-7006, fix those and once that one is committed commit this one., +1 from me too.  I tested building a full distro and confirmed that the jar won't creep into a client's classpath accidentally.  (It's only in the webapp structure, not in anything covered by {{hadoop classpath}}.)  Windows is still OK too (no regression of HADOOP-11063).  Thanks for the patch, Anthony., Integrating this into HDFS-7006, will give credit to [~anthony.young-garner@cloudera.com] for it on commit.]