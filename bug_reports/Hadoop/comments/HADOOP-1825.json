[Here's a patch to automatically creates the pid directory if it doesn't exist, +1

http://issues.apache.org/jira/secure/attachment/12364923/hadoop-1825.patch applied and successfully tested against trunk revision r571547.

Test results:   http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/667/testReport/
Console output: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/667/console, I just committed this.  Thanks, Michael!, This patch is wrong.  The first line should be

    if [ ! -d "$HADOOP_PID_DIR" ]; then

Note the $ in front of HADOOP_PID_DIR, Since mkdir -p has no effect if the directory already exists, remove the test for directory existence., Moved this to HADOOP-2100., I'm closing this issue, HADOOP-2100 takes care of bugs introduced by the committed patch.]