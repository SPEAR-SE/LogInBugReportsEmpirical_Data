[Attached initial patch.
Please review.., [~chrilisf]/[~mingma] can you please review.., [~xyao] can you please review.., Thanks [~surendrasingh] for reporting the issue and posting the patch. My only concern of this change is the potential duplicate short user name from different host/domains combinations. A simple one maybe hive@domainA and hive@domainB. This may cause calculation of the DecayRpcScheduler#getPriorityLevel for users., Thansk [~xyao] for review..

bq. This may cause calculation of the DecayRpcScheduler#getPriorityLevel for users.

I think same problem will come when two applications is using same principal. We should include client IP also to indentify the uniqueness of user/application]