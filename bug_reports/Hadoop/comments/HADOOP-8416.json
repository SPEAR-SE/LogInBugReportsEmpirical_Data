[This is because , test-patch tries to apply the patch relative to the current working directory which is a subdirectory under hadoop-common., The attached patch solves the problem by changing the working directory to the parent. After the patch is applied , it restores the working directory to the original., What is the patch you are trying to apply? I assume it is the mega security one?
If a patch is generated relative to repo root, then test-patch will not be able to apply while running from common, hdfs or mapreduce. test-patch is actually supposed to run from one of the three, not from the root.
If your modification covers both cases, then it is ok. I don't think it does though. Could you please clarify.
]