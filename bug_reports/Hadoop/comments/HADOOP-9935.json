[{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12601580/HADOOP-9935.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/3065//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/3065//console

This message is automatically generated., This patch should really have associated MR and YARN jiras & patches, as we want to make sure all their tests work; Jenkins for Hadoop common doesn't build and test them -which we need to do so as to ensure that their build and test runs don't fail. Andre, could you do that?, So what you say is, break the patch into two and submit one for YARN and one for MR, or how would that work?, one diff for the mapreduce/ bit of the source tree, one diff for the hadoop-yarn section, submitted as bugs against yarn and mapreduce projects , with the "submit patch" button set to trigger the relevant build and test.

When I apply the patch -which I will do- I will do the unified patch, as that will mean only one patch backport from trunk -it's just that we want jenkins to do the work.

Actually, you could just get away with creating JIRAs for the two things and submitting the same patch to all. Let me try that, patch submitted as is to the sub projects, YARN-1164 and MAPREDUCE-5498, cool. Looks like both passed., I just realized that this issue is the "parent" of MAPREDUCE-5498 and YARN-1164, so repasting my comment here:

Would it make sense to put {{<scope>test</scope>}} into the {{<dependencyManagement>}} stanza of hadoop-project/pom.xml, so that all sub-modules are covered automatically, including any new sub-modules we might add in the future?, Chris: good idea. I uploaded a new patch that sets junit and mockito to scope test in the parent pom., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12602360/HADOOP-9935.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/3076//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/3076//console

This message is automatically generated., +1 for the patch.  I verified by running unit tests in a few sub-modules and running mvn dependency:list in a few sub-modules to verify that they showed up as scope test., SUCCESS: Integrated in Hadoop-trunk-Commit #4417 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/4417/])
HADOOP-9935. set junit dependency to test scope. Contributed by André Kelpe. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1523403)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-project/pom.xml
, I've committed this to trunk, branch-2, and branch-2.1-beta.  André, thank you for the contribution., SUCCESS: Integrated in Hadoop-Yarn-trunk #333 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/333/])
HADOOP-9935. set junit dependency to test scope. Contributed by André Kelpe. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1523403)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-project/pom.xml
, FAILURE: Integrated in Hadoop-Hdfs-trunk #1523 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1523/])
HADOOP-9935. set junit dependency to test scope. Contributed by André Kelpe. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1523403)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-project/pom.xml
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1549 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1549/])
HADOOP-9935. set junit dependency to test scope. Contributed by André Kelpe. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1523403)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-project/pom.xml
, I believe this broke the ability to run the test jars that are distributed in the tarball, e.g.: TestDFSIO, sleep jobs, etc.  See YARN-1205.

Actually this appears to be a duplicate of HADOOP-8738 which was reopened when it was committed due to the same issues.  I think the real fix is to have junit and other test-only dependencies placed into directories that are not in the standard classpath but can easily be picked up via another command for running the tests.  See HADOOP-9116., I'll revert this., Why isn't the tests jar a "hadoop compliant jar", that includes junit, like any other hadoop app? Is there a reason, to treat it special?, SUCCESS: Integrated in Hadoop-trunk-Commit #4424 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/4424/])
HADOOP-9935. Revert from trunk. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1523839)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-project/pom.xml
, Reopening the issue while YARN-1205 is taken care of., André, sorry I didn't catch the problem at code review time.  I frequently use the {{CreateEditsLog}} tool, so I should have thought to test that.

bq. Why isn't the tests jar a "hadoop compliant jar", that includes junit, like any other hadoop app? Is there a reason, to treat it special?

The current situation isn't ideal, but it appears that we need to keep it this way for backwards-compatibility right now.  Thanks to Jason for pointing out HADOOP-8738 and HADOOP-9116, which will address the root cause.  André, perhaps you'd like to participate on those other 2 issues.

I'm resolving this as a duplicate of HADOOP-8738., SUCCESS: Integrated in Hadoop-Yarn-trunk #335 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/335/])
HADOOP-9935. Revert from trunk. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1523839)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-project/pom.xml
, FAILURE: Integrated in Hadoop-Hdfs-trunk #1525 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1525/])
HADOOP-9935. Revert from trunk. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1523839)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-project/pom.xml
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1551 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1551/])
HADOOP-9935. Revert from trunk. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1523839)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-project/pom.xml
]