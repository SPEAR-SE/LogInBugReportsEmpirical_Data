[Should do the same thing that was done in HADOOP-8287, which is to add the file from the templates dir to src/main/conf. These files get copied to etc/hadoop/conf in the dist step.

HADOOP-8407 tracks not having the packaging duplicate the conf dir., Just kidding the templates dir doesn't exist anymore.  It doesn't exist anywhere other than test dirs., Thanks Sandy. Mind updating it to reflect the latest values (eg security.task.umbilical.protocol.acl and security.job.submission.protocol.acl have been deprecated) and defining constants for the acl keys in this file that don't have them (eg see HDFSPolicyProvider.java)?, Uploaded a new patch that includes the yarn acl configs and defines constants for the ones that don't have them.  I removed the deprecated ones - should I leave them in?, {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12563686/HADOOP-9178-1.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:red}-1 javac{color:red}.  The patch appears to cause the build to fail.

Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2006//console

This message is automatically generated., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12563695/HADOOP-9178-1.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/2007//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2007//console

This message is automatically generated., bq. I removed the deprecated ones - should I leave them in?

Removing them is correct. Two of them already have deprecations added to ConfigUtil.java, there's no equivalent deprecation for security.inter.tracker.protocol.acl (security.containermanager.protocol.acl is closest but since it's yarn only probably doesn't need to be added as a deprecation here).

Patch looks good, thanks for all the cleanup!  One nit: three of the configs (security.ha.service.protocol.acl, security.zkfc.protocol.acl, are security.qjournal.service.protocol.acl) in the yarn section of hadoop-policy.xml, please move them up next to the hdfs configs and also fix the formatting of security.mrhs.client.protocol.acl., I uploaded a new patch that addresses the nits.  I also tested on a pseudo-distributed cluster from a tarball and was to run jobs and use HDFS successfully., Thanks Sandy. The security.mrhs.client.protocol.acl config should actually go down with the Yarn configs, also "security.client.datanode.protocol.acl" should be indented. +1 otherwise, My understanding was that security.mrhs.client.protocol.acl was an MR, not YARN, config?, {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12564800/HADOOP-9178-2.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

        {color:red}-1 release audit{color}.  The applied patch generated 2 release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/2041//testReport/
Release audit warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/2041//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2041//console

This message is automatically generated., Sandy, you're right, my bad. +1  I'll commit this but with that config back where you had it., I've committed this and merge to branch-2. Thanks Sandy!, Integrated in Hadoop-trunk-Commit #3233 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/3233/])
    HADOOP-9178. src/main/conf is missing hadoop-policy.xml. Contributed by Sandy Ryza (Revision 1433275)

     Result = SUCCESS
eli : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1433275
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/docs/src/documentation/content/xdocs/service_level_auth.xml
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/CommonConfigurationKeys.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HDFSPolicyProvider.java
, Integrated in Hadoop-Yarn-trunk #97 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/97/])
    HADOOP-9178. src/main/conf is missing hadoop-policy.xml. Contributed by Sandy Ryza (Revision 1433275)

     Result = SUCCESS
eli : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1433275
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/docs/src/documentation/content/xdocs/service_level_auth.xml
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/CommonConfigurationKeys.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HDFSPolicyProvider.java
, Integrated in Hadoop-Hdfs-trunk #1286 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1286/])
    HADOOP-9178. src/main/conf is missing hadoop-policy.xml. Contributed by Sandy Ryza (Revision 1433275)

     Result = FAILURE
eli : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1433275
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/docs/src/documentation/content/xdocs/service_level_auth.xml
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/CommonConfigurationKeys.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HDFSPolicyProvider.java
, Integrated in Hadoop-Mapreduce-trunk #1314 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1314/])
    HADOOP-9178. src/main/conf is missing hadoop-policy.xml. Contributed by Sandy Ryza (Revision 1433275)

     Result = FAILURE
eli : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1433275
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/docs/src/documentation/content/xdocs/service_level_auth.xml
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/CommonConfigurationKeys.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HDFSPolicyProvider.java
]