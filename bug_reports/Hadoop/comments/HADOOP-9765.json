[The [script|https://builds.apache.org/job/PreCommit-Admin/ws/nightly/hudsonPatchQueueAdmin.sh] which does this is showing it's age., Given we're parsing XML, the bash stuff is obviously fragile. Perhaps it would be better to do this with python and lxml or something., The attached patch changes the script to python. I did not use lxml because it's not installed on all machines by default. ElementTree is slower but more widely available. Other changes:

* Limit the number of entries in the historical log to 5000
* Only submit jobs to Jenkins if --live is specified

Should we choose to deploy this, the process would be as follows:

1) Test on a hadoop slave to ensure it works:

{noformat}
python jenkinsPrecommitAdmin.py \
  --jira-filter="https://issues.apache.org/jira/sr/jira.issueviews:searchrequest-xml/12323182/SearchRequest-12323182.xml?tempMax=50" \
  --jenkins-url="https://builds.apache.org"
{noformat}

2) Commit patch to nightly directory

3) Change Precommit-Admin job script to:

{noformat}
python $WORKSPACE/nightly/jenkinsPrecommitAdmin.py \
  --jira-filter="https://issues.apache.org/jira/sr/jira.issueviews:searchrequest-xml/12323182/SearchRequest-12323182.xml?tempMax=50" \
  --jenkins-url="https://builds.apache.org" \
  --jenkins-token=<REPLACE ME> \
  --live
{noformat}

The jenkins-token needs to be places where <REPLACE ME> is currently located. The token is available in the current Precommit admin job script., I'll add one more item to this change tomorrow. At this point the hive precommit tests are running on bigtop jenkins.  It'd be ideal if we could override the jenkins URL on a per project basis., Add's jenkins-url-override parameter so HIVE can submit jobs to the bigtop jenkins., Updated install instructions:

1) Test on a hadoop slave to ensure it works:
{noformat}
python jenkinsPrecommitAdmin.py \
  --jira-filter="https://issues.apache.org/jira/sr/jira.issueviews:searchrequest-xml/12323182/SearchRequest-12323182.xml?tempMax=50" \
  --jenkins-url="https://builds.apache.org" \
  --jenkins-url-override="HIVE=http://bigtop01.cloudera.org:8080"
{noformat}
2) Commit patch to nightly directory
3) Change Precommit-Admin job script to:
{noformat}
python $WORKSPACE/nightly/jenkinsPrecommitAdmin.py \
  --jira-filter="https://issues.apache.org/jira/sr/jira.issueviews:searchrequest-xml/12323182/SearchRequest-12323182.xml?tempMax=50" \
  --jenkins-url="https://builds.apache.org" \
  --jenkins-url-override="HIVE=http://bigtop01.cloudera.org:8080" \
  --jenkins-token=<REPLACE ME> \
  --live
{noformat}
The jenkins-token needs to be places where <REPLACE ME> is currently located. The token is available in the current Precommit admin job script., [~gkesavan] I noticed you're on the email list for the Jenkins PreCommit job and probably best able to review this. Do you mind taking a look at Brock's patch and testing it on a build slave?, This looks good to me. I reviewed the code and tested on a Jenkins slave (asf011.sp2.ygridcore.net). +1

I'll commit this to nightly and update the precommit script momentarily., SUCCESS: Integrated in Hadoop-trunk-Commit #4799 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/4799/])
Amend HADOOP-9765. Properly remove deleted file

(previous commit forgot to svn delete this file) (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546121)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
HADOOP-9765. Precommit Admin job chokes on issues without an attachment. Contributed by Brock Noland. (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546120)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
* /hadoop/nightly/jenkinsPrecommitAdmin.py
, Thanks Todd!  I monitored a few jobs and it looks to be working., SUCCESS: Integrated in Hadoop-Mapreduce-22-branch #112 (See [https://builds.apache.org/job/Hadoop-Mapreduce-22-branch/112/])
Amend HADOOP-9765. Properly remove deleted file

(previous commit forgot to svn delete this file) (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546121)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
HADOOP-9765. Precommit Admin job chokes on issues without an attachment. Contributed by Brock Noland. (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546120)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
* /hadoop/nightly/jenkinsPrecommitAdmin.py
, FAILURE: Integrated in ZooKeeper-trunk #2134 (See [https://builds.apache.org/job/ZooKeeper-trunk/2134/])
Amend HADOOP-9765. Properly remove deleted file

(previous commit forgot to svn delete this file) (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546121)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
HADOOP-9765. Precommit Admin job chokes on issues without an attachment. Contributed by Brock Noland. (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546120)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
* /hadoop/nightly/jenkinsPrecommitAdmin.py
, FAILURE: Integrated in Hadoop-Yarn-trunk #405 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/405/])
Amend HADOOP-9765. Properly remove deleted file

(previous commit forgot to svn delete this file) (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546121)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
HADOOP-9765. Precommit Admin job chokes on issues without an attachment. Contributed by Brock Noland. (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546120)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
* /hadoop/nightly/jenkinsPrecommitAdmin.py
, FAILURE: Integrated in Hadoop-Hdfs-0.23-Build #804 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/804/])
Amend HADOOP-9765. Properly remove deleted file

(previous commit forgot to svn delete this file) (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546121)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
HADOOP-9765. Precommit Admin job chokes on issues without an attachment. Contributed by Brock Noland. (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546120)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
* /hadoop/nightly/jenkinsPrecommitAdmin.py
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1622 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1622/])
Amend HADOOP-9765. Properly remove deleted file

(previous commit forgot to svn delete this file) (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546121)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
HADOOP-9765. Precommit Admin job chokes on issues without an attachment. Contributed by Brock Noland. (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546120)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
* /hadoop/nightly/jenkinsPrecommitAdmin.py
, SUCCESS: Integrated in Hadoop-Hdfs-trunk #1596 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1596/])
Amend HADOOP-9765. Properly remove deleted file

(previous commit forgot to svn delete this file) (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546121)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
HADOOP-9765. Precommit Admin job chokes on issues without an attachment. Contributed by Brock Noland. (todd: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1546120)
* /hadoop/nightly/hudsonPatchQueueAdmin.sh
* /hadoop/nightly/jenkinsPrecommitAdmin.py
]