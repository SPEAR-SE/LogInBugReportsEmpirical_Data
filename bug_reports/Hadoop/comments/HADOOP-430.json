[Invoking the "stop" method on the StatusHttpServer object should stop the http server. It is currently invoked only in DataNode.shutdown., This patch checks if the datanode registration has failed.  If it has, it stops the http server.  
, I should add that we intentionally did not switch the order of first starting up the http server and then registering the datanode.  

It also looks like the http server is stopped when a datanode fails (in general), so no changes were added for that.  , +1, http://issues.apache.org/jira/secure/attachment/12345986/hadoop-430.patch applied and successfully tested against trunk revision 480611, I just committed this.  Thanks, Wendy!]