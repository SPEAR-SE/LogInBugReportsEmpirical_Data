[Attaching the patch from hadoop-4782 to hadoop-4919 for hadoop-0.18.3 branch

---, I just committed this to the 0.18 branch (for Hadoop 0.18.3). Thanks, Peeyush !]