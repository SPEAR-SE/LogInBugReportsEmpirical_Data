[I'm attaching a patch.  [~arpitagarwal], would you mind reviewing this?

There are 2 causes for the test failures.  First, {{TestDNS#getLoopbackInterface}} was using the friendly display name of the interface instead of the interface name.  This didn't seem to cause problems on any of my *nix environments, but on Windows, the loopback interface has a friendly name that is not the same as the interface name.  These snippets from Scala REPL sessions show the difference.  The first is from Mac, and the second is from Windows.

{code}
scala> java.net.NetworkInterface.getByInetAddress(java.net.InetAddress.getLoopbackAddress).getDisplayName
ckAddress).getDisplayName
res3: java.lang.String = lo0

scala> java.net.NetworkInterface.getByInetAddress(java.net.InetAddress.getLoopbackAddress).getName
ckAddress).getName
res4: java.lang.String = lo0
{code}

{code}
scala> java.net.NetworkInterface.getByInetAddress(java.net.InetAddress.getLoopbackAddress).getDisplayName
res2: java.lang.String = Software Loopback Interface 1

scala> java.net.NetworkInterface.getByInetAddress(java.net.InetAddress.getLoopbackAddress).getName
res3: java.lang.String = lo
{code}

The second problem is that even with the above fixed, there was still a failure in {{TestDNS#testLookupWithHostsFallback}}.  This is because of the infamous problem we've seen many times before on Windows that it will not resolve 127.0.0.1 to host name "localhost", despite the presence of a correct entry in the hosts file.  The logic of {{DNS#getHosts}} refuses to return an IP address as a host name, so the test fails on Windows.  I used {{assumeTrue}} to skip this one on Windows.

With this patch, I verified that {{TestDNS}} runs clean on both Mac and Windows., +1 for the patch. I verified the fix on Centos 6, Windows and OS X. Thanks for debugging and fixing it [~cnauroth]!

It is unfortunate we need to skip that test on Windowsbut I don't see an easy workaround either. I'll try to think of an alternate for Windows but skipping it seems reasonable for now., | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 12s {color} | {color:blue} docker + precommit patch detected. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 3m 14s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 4m 51s {color} | {color:green} trunk passed with JDK v1.8.0_60 {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 4m 33s {color} | {color:green} trunk passed with JDK v1.7.0_79 {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 17s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 14s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 1m 45s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 58s {color} | {color:green} trunk passed with JDK v1.8.0_60 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 1m 9s {color} | {color:green} trunk passed with JDK v1.7.0_79 {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 1m 26s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 4m 45s {color} | {color:green} the patch passed with JDK v1.8.0_60 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 4m 45s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 4m 32s {color} | {color:green} the patch passed with JDK v1.7.0_79 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 4m 32s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 16s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 13s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} Patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 1m 59s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 1m 2s {color} | {color:green} the patch passed with JDK v1.8.0_60 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 1m 8s {color} | {color:green} the patch passed with JDK v1.7.0_79 {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 7m 27s {color} | {color:red} hadoop-common in the patch failed with JDK v1.8.0_60. {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 7m 16s {color} | {color:red} hadoop-common in the patch failed with JDK v1.7.0_79. {color} |
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 25s {color} | {color:green} Patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 48m 45s {color} | {color:black} {color} |
\\
\\
|| Reason || Tests ||
| JDK v1.8.0_60 Failed junit tests | hadoop.metrics2.impl.TestMetricsSystemImpl |
|   | hadoop.ha.TestZKFailoverController |
|   | hadoop.ipc.TestDecayRpcScheduler |
| JDK v1.7.0_79 Failed junit tests | hadoop.metrics2.impl.TestMetricsSystemImpl |
|   | hadoop.ipc.TestDecayRpcScheduler |
\\
\\
|| Subsystem || Report/Notes ||
| Docker | Client=1.7.1 Server=1.7.1 Image:test-patch-base-hadoop-date2015-11-03 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12770203/HADOOP-12542.001.patch |
| JIRA Issue | HADOOP-12542 |
| Optional Tests |  asflicense  javac  javadoc  mvninstall  unit  findbugs  checkstyle  compile  |
| uname | Linux 09fd71ba6196 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /home/jenkins/jenkins-slave/workspace/PreCommit-HADOOP-Build/patchprocess/apache-yetus-1a9afee/precommit/personality/hadoop.sh |
| git revision | trunk / 5ba2b98 |
| Default Java | 1.7.0_79 |
| Multi-JDK versions |  /usr/lib/jvm/java-8-oracle:1.8.0_60 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_79 |
| findbugs | v3.0.0 |
| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/8004/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common-jdk1.8.0_60.txt |
| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/8004/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common-jdk1.7.0_79.txt |
| unit test logs |  https://builds.apache.org/job/PreCommit-HADOOP-Build/8004/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common-jdk1.8.0_60.txt https://builds.apache.org/job/PreCommit-HADOOP-Build/8004/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common-jdk1.7.0_79.txt |
| JDK v1.7.0_79  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/8004/testReport/ |
| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |
| Max memory used | 224MB |
| Powered by | Apache Yetus   http://yetus.apache.org |
| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/8004/console |


This message was automatically generated.

, The test failures are unrelated to this test code patch.  I haven't been able to repro.  I'm going to proceed with the commit later., I have committed this to trunk and branch-2.  Arpit, thank you for the code review., FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #621 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/621/])
HADOOP-12542. TestDNS fails on Windows after HADOOP-12437. Contributed (cnauroth: rev 957f0311a160afb40dbb0619f455445b4f5d1e32)
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/net/TestDNS.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-trunk-Commit #8747 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8747/])
HADOOP-12542. TestDNS fails on Windows after HADOOP-12437. Contributed (cnauroth: rev 957f0311a160afb40dbb0619f455445b4f5d1e32)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/net/TestDNS.java
, FAILURE: Integrated in Hadoop-Yarn-trunk #1355 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1355/])
HADOOP-12542. TestDNS fails on Windows after HADOOP-12437. Contributed (cnauroth: rev 957f0311a160afb40dbb0619f455445b4f5d1e32)
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/net/TestDNS.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #566 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/566/])
HADOOP-12542. TestDNS fails on Windows after HADOOP-12437. Contributed (cnauroth: rev 957f0311a160afb40dbb0619f455445b4f5d1e32)
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/net/TestDNS.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #632 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/632/])
HADOOP-12542. TestDNS fails on Windows after HADOOP-12437. Contributed (cnauroth: rev 957f0311a160afb40dbb0619f455445b4f5d1e32)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/net/TestDNS.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2562 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2562/])
HADOOP-12542. TestDNS fails on Windows after HADOOP-12437. Contributed (cnauroth: rev 957f0311a160afb40dbb0619f455445b4f5d1e32)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/net/TestDNS.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2503 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2503/])
HADOOP-12542. TestDNS fails on Windows after HADOOP-12437. Contributed (cnauroth: rev 957f0311a160afb40dbb0619f455445b4f5d1e32)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/net/TestDNS.java
]