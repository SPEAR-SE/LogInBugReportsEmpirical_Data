[See TEZ-3413 for a sample backtrace.  I believe the fix is to simply lock the Property object while iterating it within the Configuration#iterator method, but I haven't thought through all of the potential interactions to see if we don't also have to lock the Configuration object itself as well or do something even more complicated.
, Hive is also hitting this issue with a different call stack, [~jnp] can we fix get this fixed eventually? ;),  [~lmccay] had a patch for this, IIRC., Already fixed by HADOOP-13556. Closing as a dup. Please reopen if that isn't the case., This is not a duplicate of HADOOP-13556.  That JIRA only changed the getPropsWithPrefix method which was not involved in the error reported by this JIRA or TEZ-3413.  AFAICT iterating a shared configuration object is still unsafe.]