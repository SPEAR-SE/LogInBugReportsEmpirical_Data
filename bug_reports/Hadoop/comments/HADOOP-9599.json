[{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12584729/HADOOP-9599.patch
  against trunk revision .

    {color:red}-1 patch{color}.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2567//console

This message is automatically generated., Judging from the context, I think it should be HADOOP_COMMON_HOME instead of HADOOP_HOME.
Because the purpose of the script is mainly to include JNI library, i.e. native library, in Java library path, and native library is a hadoop-common project.
I think it is also good to add some comments as well., Thanks Mostafa for reporting the problem!

The patch looks good. I was able to repro the problem and validate that it is fixed with the patch. I agree with Chuan though, using HADOOP_COMMON_HOME instead of HADOOP_HOME makes sense, otherwise +1 from me
, Thanks [~chuanliu] and [~ivanmi]. When I build dist, hadoop.dll is placed in <root>\bin not in <root>\share\hadoop\common\bin, so I think HADOOP_HOME is correct unless we want to fix the dist layout., By default, HADOOP_COMMON_HOME is set the same as HADOOP_HOME. Both point to <root>. Changing this will only impact the scenarios people set HADOOP_COMMON_HOME, HADOOP_MAPRED_HOME, HADOOP_YARN_HOME to different locations., Got it - sorry I misread the code there. Attached a new patch using HADOOP_COMMON_HOME instead of HADOOP_HOME. I verified that works as well., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12585119/HADOOP-9599.2.patch
  against trunk revision .

    {color:red}-1 patch{color}.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2576//console

This message is automatically generated., +1

Thanks for the patch!, +1 on the patch, will commit this shortly., bq. -1 patch. The patch command could not apply the patch.
Mostafa, your patch fails to apply. Can you please recreate the patch and resubmit? 

I tested by manually applying the changes on my test machine, so missed this. , {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12586544/HADOOP-9599.3.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/2613//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2613//console

This message is automatically generated., Thanks Ivan - I've updated the patch to correct this. I still have a "-1 tests included" but in this case it's a fundamental Windows platform fix so I think it should be fine (any unit test on Windows should catch this)., Thanks Mostafa, +1 again, will commit the patch shortly, Integrated in Hadoop-trunk-Commit #3886 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/3886/])
    HADOOP-9599. hadoop-config.cmd doesn't set JAVA_LIBRARY_PATH correctly. Contributed by Mostafa Elhemali. (Revision 1491030)

     Result = SUCCESS
ivanmi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1491030
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/bin/hadoop-config.cmd
, Patch committed to trunk, branch-2 and branch-2.1-beta. Thanks Mostafa for the patch and Chuan for the review., Integrated in Hadoop-Yarn-trunk #235 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/235/])
    HADOOP-9599. hadoop-config.cmd doesn't set JAVA_LIBRARY_PATH correctly. Contributed by Mostafa Elhemali. (Revision 1491030)

     Result = SUCCESS
ivanmi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1491030
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/bin/hadoop-config.cmd
, Integrated in Hadoop-Hdfs-trunk #1425 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1425/])
    HADOOP-9599. hadoop-config.cmd doesn't set JAVA_LIBRARY_PATH correctly. Contributed by Mostafa Elhemali. (Revision 1491030)

     Result = FAILURE
ivanmi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1491030
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/bin/hadoop-config.cmd
, Integrated in Hadoop-Mapreduce-trunk #1452 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1452/])
    HADOOP-9599. hadoop-config.cmd doesn't set JAVA_LIBRARY_PATH correctly. Contributed by Mostafa Elhemali. (Revision 1491030)

     Result = SUCCESS
ivanmi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1491030
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/bin/hadoop-config.cmd
]