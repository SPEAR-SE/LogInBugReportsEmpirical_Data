[This patch fixes the problem and the testcases., +1 Good catch, I messed up the previous patch by putting the annotation on the constructor rather than the class. I fix the definition of the annotation to only apply to types and put it in the right place., I just committed this., Integrated in Hadoop-Common-trunk-Commit #617 (See [https://builds.apache.org/hudson/job/Hadoop-Common-trunk-Commit/617/])
    HADOOP-7258. The Gzip codec should not return null decompressors. (omalley)

omalley : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1127215
Files : 
* /hadoop/common/trunk/CHANGES.txt
* /hadoop/common/trunk/src/java/org/apache/hadoop/io/compress/DoNotPool.java
* /hadoop/common/trunk/src/java/org/apache/hadoop/io/compress/CodecPool.java
* /hadoop/common/trunk/src/test/core/org/apache/hadoop/io/compress/TestCodec.java
* /hadoop/common/trunk/src/java/org/apache/hadoop/io/compress/zlib/BuiltInGzipDecompressor.java
, Integrated in Hadoop-Common-trunk #699 (See [https://builds.apache.org/hudson/job/Hadoop-Common-trunk/699/])
    HADOOP-7258. The Gzip codec should not return null decompressors. (omalley)

omalley : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1127215
Files : 
* /hadoop/common/trunk/CHANGES.txt
* /hadoop/common/trunk/src/java/org/apache/hadoop/io/compress/DoNotPool.java
* /hadoop/common/trunk/src/java/org/apache/hadoop/io/compress/CodecPool.java
* /hadoop/common/trunk/src/test/core/org/apache/hadoop/io/compress/TestCodec.java
* /hadoop/common/trunk/src/java/org/apache/hadoop/io/compress/zlib/BuiltInGzipDecompressor.java
, Closing for 0.20.203.0]