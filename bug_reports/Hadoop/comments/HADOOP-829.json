[This patch clarifies the following rules:

1. Information that is part of the ClientProtocol or DatanodeProtocol is part of DatanodeInfo.

2. Information that is local to the Namenode and need not be persisted across namenode restarts is in DatanodeDescriptor.

3. Information that is persisted across Namenode restarts is in DatanodeImage., This change separates out the three usage of Datanode information:

1. Information that is part of the ClientProtocol or DatanodeProtocol is part of DatanodeInfo.
2. Information that is local to the Namenode and need not be persisted across namenode restarts is in DatanodeDescriptor.
3. Information that is persisted across Namenode restarts is in DatanodeImage.

The initial idea of the refactoring was to enable new transient fields in the DatanodeDescriptor or DatanodeInfo that does not affect the fsimage. We have achieved it with this patch., -1, because the patch command could not apply the latest attachment (http://issues.apache.org/jira/secure/attachment/12347237/datanodeserialize1.patch) as a patch to trunk revision r486901. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch., -1, because the patch command could not apply the latest attachment (http://issues.apache.org/jira/secure/attachment/12347237/datanodeserialize1.patch</a>) as a patch to trunk revision r486901. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.) as a patch to trunk revision r486901. Please note that this message is automatically generated and may represent a problem with the automation system and not the patch., the previous path file was bad because it did not have full path names., +1, because http://issues.apache.org/jira/secure/attachment/12347320/datanodeserialize1.patch applied and successfully tested against trunk revision r486901., I just committed this.  Thanks, Dhruba!]