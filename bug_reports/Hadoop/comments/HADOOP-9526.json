[Trivial fixes to input/output of fencer test commands., Add patch for TestShell., I mean update patch with fix for TestShell., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12582015/HADOOP-9526.002.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/2519//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2519//console

This message is automatically generated., +1 for the patch.  I verified that the tests pass on Mac, Linux, and Windows.  Thanks, Arpit!, Request to committers - please merge this into branch-2 along with trunk., Also seeing this failure in branch-2., I committed the patch to trunk and branch-2. Thank you Arpit!, Integrated in Hadoop-trunk-Commit #3870 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/3870/])
    HADOOP-9526. TestShellCommandFencer and TestShell fail on Windows. Contributed by Arpit Agarwal. (Revision 1490120)

     Result = SUCCESS
suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1490120
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestShellCommandFencer.java
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestShell.java
, Integrated in Hadoop-Yarn-trunk #232 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/232/])
    HADOOP-9526. TestShellCommandFencer and TestShell fail on Windows. Contributed by Arpit Agarwal. (Revision 1490120)

     Result = SUCCESS
suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1490120
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestShellCommandFencer.java
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestShell.java
, Integrated in Hadoop-Hdfs-trunk #1422 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1422/])
    HADOOP-9526. TestShellCommandFencer and TestShell fail on Windows. Contributed by Arpit Agarwal. (Revision 1490120)

     Result = FAILURE
suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1490120
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestShellCommandFencer.java
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestShell.java
, Integrated in Hadoop-Mapreduce-trunk #1448 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1448/])
    HADOOP-9526. TestShellCommandFencer and TestShell fail on Windows. Contributed by Arpit Agarwal. (Revision 1490120)

     Result = SUCCESS
suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1490120
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestShellCommandFencer.java
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/TestShell.java
, TestShellCommandFencer will fail if there is a machine named ‘host’ in the network. The %target_address% environment variable used in the test was from result of InetSocketAddress.getAddress(). The method will return host/ip when the host actually exists in the network. When the test comparing the log output, it assumes there is no ip in the address.
, Attaching a simple fix. I simply remove the pattern matching on address. There is no lost in test coverage because we still test 'host' and 'port' settings; 'host' and 'port' are obtained via {{address.getHost()}} and {{address.getPort()}}., Chuan, instead of reverting the patch in many branches (which is a bunch of work), can you please open another jira and post this patch., I have opened HADOOP-9632 to track the issue., Resolving this. The open problem should be tracked by HADOOP-9632]