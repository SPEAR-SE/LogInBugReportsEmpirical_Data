[Here is what happened.
- There were 2 dfs.name.dir directories each with valid image and edits, but different checkpoint times
- The dir which had the latest checkpoint time had latest image and zero edits. The other directory had older image with non zero entries in edits
- So, while starting, after validating consistency of all dfs.name.dir, namenode started with latest image but ignored saving since needToSave was never set in any of the conditions.

This could be bad, sometimes. In cases if the other directory had edits.new and good directory didnt have, then checkpoint by secondary namenode would fail. , Is is OK to say that checkpoint would be same across all dirs? If so, here is a patch which forces saving of image, if there is a difference in checkpoint times. I tested this manually for the case described above, and it forces saving of good image back on all dfs.name.dir, Updated patch, with comments, and change to compare _checkpointTime != Long.MIN_VALUE_ instead of _latestSD != null_ , +1. Minor : Hadoop's prefered style is to keep single line block in braces. If you do add braces, could you move the comment inside the braces., Thanks Raghu, updated patch. , -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12386573/HADOOP-3795-1.patch
  against trunk revision 678577.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no tests are needed for this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2917/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2917/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2917/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2917/console

This message is automatically generated., I just committed this. Thanks lohit., Integrated in Hadoop-trunk #581 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/581/])]