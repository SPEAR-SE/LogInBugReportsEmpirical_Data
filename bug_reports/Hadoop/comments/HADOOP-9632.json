[Attaching a simple fix. I simply remove the pattern matching on address. There is no lost in test coverage because we still test 'host' and 'port' settings, and 'host' and 'port' are obtained via address.getHost() and address.getPort()., Hi Chuan,

Are we losing test coverage for the resolution of $target_address?

Thanks,
Arpit, There will be no lost in test coverage.

In HAServiceTarget.addFencingParameters() method:
'address' is from {{String.valueOf(getAddress())}};
'host' is from {{getAddress().getHostName()}};
'port' is from {{String.valueOf(getAddress().getPort())}},
where {{getAddress()}} is Java {{InetSocketAddress getaddress()}} API.
The three are set the same way as environment variables before process launching.
I removed comparing 'address' in test case, and kept 'host' and 'port'.
Because we still have 'host' and 'port' and these two are derived from getAddress(), I see no lost in test coverage., Sounds good.

+1 from me., Marking PA for Chuan., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12586805/HADOOP-9632.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/2630//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2630//console

This message is automatically generated., +1 for the patch.  I'll commit this., Integrated in Hadoop-trunk-Commit #3936 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/3936/])
    HADOOP-9632. TestShellCommandFencer will fail if there is a 'host' machine in the network. Contributed by Chuan Liu. (Revision 1493451)

     Result = SUCCESS
cnauroth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1493451
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestShellCommandFencer.java
, I committed this to trunk, branch-2, and branch-2.1-beta.  Chuan, thank you for the patch.  Arpit, thank you for the code review., Integrated in Hadoop-Yarn-trunk #242 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/242/])
    HADOOP-9632. TestShellCommandFencer will fail if there is a 'host' machine in the network. Contributed by Chuan Liu. (Revision 1493451)

     Result = SUCCESS
cnauroth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1493451
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestShellCommandFencer.java
, Integrated in Hadoop-Hdfs-trunk #1432 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1432/])
    HADOOP-9632. TestShellCommandFencer will fail if there is a 'host' machine in the network. Contributed by Chuan Liu. (Revision 1493451)

     Result = FAILURE
cnauroth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1493451
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestShellCommandFencer.java
, Integrated in Hadoop-Mapreduce-trunk #1459 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1459/])
    HADOOP-9632. TestShellCommandFencer will fail if there is a 'host' machine in the network. Contributed by Chuan Liu. (Revision 1493451)

     Result = FAILURE
cnauroth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1493451
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/ha/TestShellCommandFencer.java
]