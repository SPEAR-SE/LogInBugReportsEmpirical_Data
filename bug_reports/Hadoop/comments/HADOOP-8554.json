[About to raise another issue and noticed.
We are also facing this problem in 2.0.1

bq. Seems like we should use the configured hadoop.http.authentication.kerberos.principal instead right?

I don't find this property in trunk. I think it's better to pass principal from the user of KerberosAuthenticator.

Any different opinion?, tying to figure out SPN for multihomed systems is a matter of policy. For clusters, it simpler to generate it from the uri or make rDNS a requirement., bq. I don't find this property in trunk. I think it's better to pass principal from the user of KerberosAuthenticator.

See AuthenticationFilterInitializer, this config name is constructed via the PREFIX variable., @Eli, the line of code you point out happens on the client side, if your URL is of the form http://foohost/.... then the principal is created as 'HTTP/foohost'. There is a JIRAs to add support for kerberos name rules HADOOP-8518. IMO this JIRA is invalid., You're right, thanks for the explanation, I didn't realize the principal config was server-side only. Also, the reason I hit this with webhdfs and not hftp is that hftp doesn't support SPNEGO., @Eli & Alejandro, IMHO this issue is valid.

On server side, there is a provision to configure a principal like "web/hadoop@MYREALM"
Here second component "hadoop" refers to my cluster/domain identifier but not the canonical hostname.
Also, Kerberos doesn't mandate to use hostname only. 

So, I think this is a valid issue. Correct me if I'm missing something here.

Please refer to ZOOKEEPER-1467 for similar issue of client side hardcoding., Laxman, isn't HADOOP-8518 addressing your concern?]