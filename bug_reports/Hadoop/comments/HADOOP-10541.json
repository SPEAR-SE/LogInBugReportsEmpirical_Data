[[~tedyu] If you are ok with it, I'll like to take a stab at this., Patch attached., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12642996/HADOOP-10541.1.patch.txt
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-minikdc.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/3888//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/3888//console

This message is automatically generated., Thanks for the patch. , This should be ready for review., Hi, [~swarnim].  Thank you for providing the patch.

I still see a few opportunities for a resource leak in this code.  For {{is1}}, there is a call to {{IOUtils#toString}} outside the try block.  This can throw {{IOException}}, which would then result in {{is1}} not being closed.  For {{is2}}, there is a similar situation with {{BufferedReader#readLine}}, which can throw {{IOException}}.  In both cases, I recommend moving the calls that can throw inside the try block.  These are existing issues that weren't introduced by your new patch, but it would be convenient to clean them up now, since you're changing this code path anyway.

Also, the standard indentation for the project is to indent by 2 spaces (no tabs).  I saw a few tabs in your patch, so would you please convert those to 2 spaces?

Thanks again!, Thanks for the feedback Chris. I addressed your concerns and attached a new patch. Let me know if this looks any better. Thanks., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12643251/HADOOP-10541.2.patch.txt
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-minikdc.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/3907//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/3907//console

This message is automatically generated., New patch attached with minor cleanup., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12643318/HADOOP-10541.3.patch.txt
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-minikdc.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/3911//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/3911//console

This message is automatically generated., +1 for the patch.  Thank you for addressing the feedback.  I'll commit this., Actually, I spotted one more minor indentation issue.  Rather than go back and forth again, I just corrected it locally and generated a new patch.  I'm uploading v4.  I'll commit this version after Jenkins tries it., Thanks Chris and sorry for that. Is there an eclipse formatter that I can use for my future contributions? I tried hunting one here [1] but I couldn't find one. Only one I found was here[2]. Is it ok to use that?

Thanks again.

[1] http://wiki.apache.org/hadoop/EclipseEnvironment
[2] https://github.com/cloudera/blog-eclipse/blob/master/hadoop-format.xml , That's no problem.  Thank you for contributing a patch.  These little nitpick things are easy to address in review.  :-)

Unfortunately, I can't help you with advice on an Eclipse formatter, because I don't use Eclipse.  Maybe another community member who does use Eclipse will chime in.  We also have this page:

https://wiki.apache.org/hadoop/CodeReviewChecklist

Our stated standard is "follows Sun's code conventions except indentation is 2 spaces, not 4".  Maybe it's sufficient simply to clone the default formatting profile you get with Eclipse and then switch the indentation to 2 spaces/no tabs.  I seem to recall from my Eclipse days that there are 2 places you need to configure this: one setting for the number of spaces and another setting for using space characters instead of tab characters., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12643409/HADOOP-10541.4.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-minikdc.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/3914//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/3914//console

This message is automatically generated., I committed this to trunk and branch-2.  Swarnim, thank you again for contributing the patch., SUCCESS: Integrated in Hadoop-trunk-Commit #5594 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5594/])
HADOOP-10541. InputStream in MiniKdc#initKDCServer for minikdc.ldiff is not closed. Contributed by Swarnim Kulkarni. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1592803)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-minikdc/src/main/java/org/apache/hadoop/minikdc/MiniKdc.java
, SUCCESS: Integrated in Hadoop-Yarn-trunk #559 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/559/])
HADOOP-10541. InputStream in MiniKdc#initKDCServer for minikdc.ldiff is not closed. Contributed by Swarnim Kulkarni. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1592803)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-minikdc/src/main/java/org/apache/hadoop/minikdc/MiniKdc.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #1751 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1751/])
HADOOP-10541. InputStream in MiniKdc#initKDCServer for minikdc.ldiff is not closed. Contributed by Swarnim Kulkarni. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1592803)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-minikdc/src/main/java/org/apache/hadoop/minikdc/MiniKdc.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1777 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1777/])
HADOOP-10541. InputStream in MiniKdc#initKDCServer for minikdc.ldiff is not closed. Contributed by Swarnim Kulkarni. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1592803)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-minikdc/src/main/java/org/apache/hadoop/minikdc/MiniKdc.java
]