[Working on it., [~qwertymaniac], test may need some work adjustments. , Thanks [~Ryan P] for working on this! Can you address the changes for the test as below?

1. The Configuration should be set to a specific class value, like say the WritableSerialization one, but with a prefixed or suffixed space.
2. The SerializationFactory(conf) initialization is graceful, i.e. it will not fail but just log a WARN. So the ideal test case would need to then use the factory to fetch the serializer for a class such as the Text or LongWritable class, and ensure the return is not null., Bit confused on part 2, forgive my ignorance, but  testSerializationKeyIsTrimmed() will be run by the two testGetSerializer() and testGetDeserializer() methods below. 

At any rate I have added a serialization class padded with whitespace on both ends. If any further adjustments are needed please let me know. , Thanks again - the (1) change looks good, but the test still will not fail without the fix, making it incomplete. We need (2) done too to achieve it.

In literal terms, from the SerializationFactory object constructed at the end of your test, invoke its {{getSerializer(Text.class)}} or so, and assert that the returned object is not 'null'. This will exercise the serialization lookup and complete the test.

The current behaviour of constructing SerializationFactory with a bad config is that it still passes omitting the bad classes it finds in the configs (choosing to log them as WARNs than to throw an exception).

Let me know if this makes sense!, [~qwertymaniac], much appreciated. I'll get the hang of this eventually , Alright, so hopefully I got it this time. I apologize for all the testing mishaps.
, Thanks Ryan. I've attached a cleaned up version that removes the extra changes to indentation made on some unrelated lines.

+1, will commit after Jenkins runs through this.

I also attached a tested branch-2 variant as the back-port was not straight-forward., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12697403/HADOOP-11512.patch
  against trunk revision aab459c.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:red}-1 eclipse:eclipse{color}.  The patch failed to build with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/5635//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5635//console

This message is automatically generated., Eclipse failure appears unrelated. Checking locally before pushing anyhow. Thanks again Ryan!, Local mvn eclipse:eclipse passes just fine with patch. I've pushed the patch to trunk and branch-2.

Resolving., FAILURE: Integrated in Hadoop-trunk-Commit #7061 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/7061/])
HADOOP-11512. Use getTrimmedStrings when reading serialization keys. Contributed by Ryan P. (harsh: rev e0ec0718d033e84bda2ebeab7beb00b7dbd990c0)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/serializer/SerializationFactory.java
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/io/serializer/TestSerializationFactory.java
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #100 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/100/])
HADOOP-11512. Use getTrimmedStrings when reading serialization keys. Contributed by Ryan P. (harsh: rev e0ec0718d033e84bda2ebeab7beb00b7dbd990c0)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/serializer/SerializationFactory.java
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/io/serializer/TestSerializationFactory.java
, FAILURE: Integrated in Hadoop-Yarn-trunk #834 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/834/])
HADOOP-11512. Use getTrimmedStrings when reading serialization keys. Contributed by Ryan P. (harsh: rev e0ec0718d033e84bda2ebeab7beb00b7dbd990c0)
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/io/serializer/TestSerializationFactory.java
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/serializer/SerializationFactory.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2032 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2032/])
HADOOP-11512. Use getTrimmedStrings when reading serialization keys. Contributed by Ryan P. (harsh: rev e0ec0718d033e84bda2ebeab7beb00b7dbd990c0)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/serializer/SerializationFactory.java
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/io/serializer/TestSerializationFactory.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #101 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/101/])
HADOOP-11512. Use getTrimmedStrings when reading serialization keys. Contributed by Ryan P. (harsh: rev e0ec0718d033e84bda2ebeab7beb00b7dbd990c0)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/serializer/SerializationFactory.java
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/io/serializer/TestSerializationFactory.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2051 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2051/])
HADOOP-11512. Use getTrimmedStrings when reading serialization keys. Contributed by Ryan P. (harsh: rev e0ec0718d033e84bda2ebeab7beb00b7dbd990c0)
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/io/serializer/TestSerializationFactory.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/serializer/SerializationFactory.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, SUCCESS: Integrated in Hadoop-Hdfs-trunk-Java8 #97 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/97/])
HADOOP-11512. Use getTrimmedStrings when reading serialization keys. Contributed by Ryan P. (harsh: rev e0ec0718d033e84bda2ebeab7beb00b7dbd990c0)
* hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/io/serializer/TestSerializationFactory.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/serializer/SerializationFactory.java
* hadoop-common-project/hadoop-common/CHANGES.txt
]