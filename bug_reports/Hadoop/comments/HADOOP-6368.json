[Is there a limit to the length of the classpath, or is this just inconvenient?, One problem is that the ivy path is not consistent among subprojects.  The same jar file may exist in different location.  e.g. we have
- build/ivy/lib/Hadoop-Core/common/commons-logging-1.0.4.jar
- build/ivy/lib/Hadoop-Hdfs/common/commons-logging-1.0.4.jar
- build/ivy/lib/Hadoop/common/commons-logging-1.0.4.jar

Below is the classpath I got:

$ ./bin/hadoop classpath
/grid/0/dev/tsz-c2/conf:/grid/0/gs/java/jdk64/current/lib/tools.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/classes:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/test/classes:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../hadoop-core-*.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-core-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-core-test-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-hdfs-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-hdfs-test-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-mapred-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-mapred-examples-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-mapred-test-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/ant-1.6.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/asm-3.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/aspectjrt-1.6.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/aspectjtools-1.6.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/avro-1.2.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-cli-1.2.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-codec-1.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-el-1.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-httpclient-3.0.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-logging-1.0.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-logging-api-1.0.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-net-1.4.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/core-3.1.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/hsqldb-1.8.0.10.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jackson-core-asl-1.0.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jackson-mapper-asl-1.0.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jasper-compiler-5.5.12.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jasper-runtime-5.5.12.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jets3t-0.7.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jetty-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jetty-util-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jsp-2.1-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/jsp-api-2.1-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/junit-4.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/kfs-0.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/log4j-1.2.15.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/oro-2.0.8.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/paranamer-1.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/paranamer-ant-1.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/paranamer-generator-1.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/qdox-1.9.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/servlet-api-2.5-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/slf4j-api-1.5.8.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/slf4j-log4j12-1.4.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/slf4j-simple-1.5.8.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/xmlenc-0.52.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/aspectjrt-1.6.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/aspectjtools-1.6.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/avro-1.0.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/commons-cli-1.2.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/commons-codec-1.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/commons-el-1.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/commons-httpclient-3.0.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/commons-logging-1.0.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/commons-logging-api-1.0.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/commons-net-1.4.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/core-3.1.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/hsqldb-1.8.0.10.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/jasper-compiler-5.5.12.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/jasper-runtime-5.5.12.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/jets3t-0.6.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/jetty-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/jetty-util-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/jsp-2.1-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/jsp-api-2.1-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/junit-4.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/kfs-0.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/log4j-1.2.15.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/oro-2.0.8.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/servlet-api-2.5-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/slf4j-api-1.4.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/slf4j-log4j12-1.4.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Hdfs/common/xmlenc-0.52.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/ant-1.6.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/asm-3.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/avro-1.2.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/commons-cli-1.2.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/commons-codec-1.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/commons-el-1.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/commons-httpclient-3.0.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/commons-logging-1.0.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/commons-logging-api-1.0.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/commons-net-1.4.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/core-3.1.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/hsqldb-1.8.0.10.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jackson-core-asl-1.0.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jackson-mapper-asl-1.0.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jasper-compiler-5.5.12.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jasper-runtime-5.5.12.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jets3t-0.6.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jetty-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jetty-util-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jsp-2.1-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/jsp-api-2.1-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/junit-4.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/kfs-0.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/log4j-1.2.15.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/oro-2.0.8.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/paranamer-1.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/paranamer-ant-1.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/paranamer-generator-1.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/qdox-1.9.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/servlet-api-2.5-6.1.14.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/slf4j-api-1.5.8.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/slf4j-log4j12-1.4.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/slf4j-simple-1.5.8.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop/common/xmlenc-0.52.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/jsp-2.1/jsp-2.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/jsp-2.1/jsp-api-2.1.jar, > Is there a limit to the length of the classpath, or is this just inconvenient?

I am not sure whether there is a limit but it is definitely inconvenient.  For example, the command displayed in "ps aux" is truncated.  I see something like

tsz      27732  9.1  0.5 3574740 96352 pts/0   Sl   19:38   0:02 /grid/0/gs/java/jdk64/current/bin/java ... -classpath /grid/0/dev/tsz-c2/conf:/grid/0/gs/java/jdk64/current/lib/tools.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/classes:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/test/classes:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../hadoop-core-*.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-core-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-core-test-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-hdfs-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-hdfs-test-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-mapred-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-mapred-examples-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../lib/hadoop-mapred-test-0.21.0-dev.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/ant-1.6.5.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/asm-3.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/aspectjrt-1.6.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/aspectjtools-1.6.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/avro-1.2.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-cli-1.2.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-codec-1.3.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-el-1.0.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-httpclient-3.0.1.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/commons-logging-1.0.4.jar:/grid/0/dev/tsz-c2/Hadoop_0.21.0-SNAPSHOT/bin/../build/ivy/lib/Hadoop-Core/common/comm
, Operating systems often have limits on command line length, windows is the worst, but others do too. , The classpath can use wildcards:

{noformat}
'/path/to/lib1/*:path/to/lib2/*'
{noformat}

This can be combined with using export (HADOOP-6391)., I've seen a problem with this on other programs, esp. windows. One workaround is to set the CLASSPATH env variable to the classpath:

http://jira.codehaus.org/browse/SUREFIRE-727, Closing this as part of the HADOOP-9902 work.]