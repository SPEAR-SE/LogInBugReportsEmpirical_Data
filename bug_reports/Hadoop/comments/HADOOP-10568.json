[Trunk patch.  Will attach branch-2 patch soon., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12643072/HADOOP-10568.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-common-project/hadoop-common:

                  org.apache.hadoop.metrics2.impl.TestMetricsSystemImpl

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/3897//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/3897//console

This message is automatically generated., Hello Mr. Wang, the patch looks pretty good to me. Two little comments for you, +1 once these are addressed:

# It's best practice to document this option in the core-default.xml file, even if you're not setting a default value. The description of the config setting in that file will be helpful for users to know what the use of this option is and the possible values they could set it to.
# Have you tested this when setting _no_ value for the encryption config setting? i.e. is it definitely the case that passing {{null}} for this value (as would be returned from {{Configuration#get(String)}} if this value is unset) will work just fine? Or more generally, can you comment as to what testing you've done of this patch?

Regarding the branch-2 patch, if the updated patch applies cleanly to branch-2 (as this patch does) then there's no need to post a separate patch., Added blurb in core-default.xml., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12643138/HADOOP-10568-2.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/3901//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/3901//console

This message is automatically generated., [~atm],

Thank you for looking at this patch and providing comments.

I've uploaded a new patch that documents this option in core-default.xml.

I have tested this patch both with setting fs.s3n.server-side-encryption-algorithm to AES256, and with not setting fs.s3n.server-side-encryption-algorithm at all.  I used the AWS cli command:

aws s3api get-object --bucket <bucket name> --key <filename> <filename that you want to save to locally>

to check the metadata for the object to validate whether or not server-side encryption was set., Great, all sounds good. Thanks a lot for doing this.

+1, the latest patch looks good to me. I'm going to commit this momentarily., I've just committed this to trunk and branch-2.

Thanks a lot for the contribution, Dave., SUCCESS: Integrated in Hadoop-trunk-Commit #5591 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5591/])
HADOOP-10568. Add s3 server-side encryption. Contributed by David S. Wang. (atm: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1592133)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/s3native/Jets3tNativeFileSystemStore.java
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/resources/core-default.xml
, FAILURE: Integrated in Hadoop-Yarn-trunk #558 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/558/])
HADOOP-10568. Add s3 server-side encryption. Contributed by David S. Wang. (atm: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1592133)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/s3native/Jets3tNativeFileSystemStore.java
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/resources/core-default.xml
, FAILURE: Integrated in Hadoop-Hdfs-trunk #1749 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1749/])
HADOOP-10568. Add s3 server-side encryption. Contributed by David S. Wang. (atm: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1592133)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/s3native/Jets3tNativeFileSystemStore.java
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/resources/core-default.xml
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1775 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1775/])
HADOOP-10568. Add s3 server-side encryption. Contributed by David S. Wang. (atm: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1592133)
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/s3native/Jets3tNativeFileSystemStore.java
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/resources/core-default.xml
, SUCCESS: Integrated in Hadoop-trunk-Commit #10036 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/10036/])
HADOOP-10568. Reuse ObjectMapper instance in CombinedHostsFileReader and (aajisaka: rev 991c946593454b73b56f3c403fe128afe6f46355)
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/CombinedHostsFileReader.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/CombinedHostsFileWriter.java
]