[This is backport of existing solution from 0.21, Hey Konstantin. This patch doesn't seem to be against branch-20 -- it references fault-inject. Am I missing something?, This patch isn't for local inclusion and depends on [0.20-ydist patch HADOOP-6204|https://issues.apache.org/jira/secure/attachment/12431062/HADOOP-6204-ydist.patch] to be present., I think we should target Apache branch-20 with a fix for this as well -- we do have a branch-20 build on Apache hudson, and this is an easy fix that will help that out, no?, I agree, Todd - this is an unpleasant issue and it's better be fixed. This patch is for Apache 0.20., This is slightly different patch, because it relies on HADOOP-6204 and is used for ydist-0.20 release., Would appreciate if anyone can formally review the patch for Apache 0.20 so it can be committed., Oops, this is the patch for 0.20 branch. It doesn't have any dependencies from other patches and can be used as is. 

I'd appreciate if someone can review this, so it can be committed., Y!dist patch representing latest Apache 0.20 branch, Apache 0.20 patch looks good to me. +1, I have tested this locally, because there's no way to verify it through test-patch process.

I've just committed this., Updated patch for yhadoop20.]