[Sorry for looking late into this.

This is not an issue and it works as expected. The reason why test_incorrect doesnt fail is that the copyFromLocalFile call done internally calls the create method of ChecksumFileSystem which overrides the create method implemented in the FilterFileSystem.

Whereas the wrappedFs.create(OUT_PATH) in the test_correct fails because its a direct call made to FilterFileSystem and not to the LocalFileSystem which extends the ChecksumFileSystem. 

If the FailingFileSystem is made to extend the LocalFileSystem instead of FilterFileSystem then you will see both methods failing.

The below stacktrace says it all:-

{code}

java.lang.Thread.State: RUNNABLE
	  at org.apache.hadoop.fs.ChecksumFileSystem.create(ChecksumFileSystem.java:464)
	  at org.apache.hadoop.fs.ChecksumFileSystem.create(ChecksumFileSystem.java:443)
	  at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:1073)
	  at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:1053)
	  at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:942)
	  at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:391)
	  at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:364)
	  at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:314)
	  at org.apache.hadoop.fs.LocalFileSystem.copyFromLocalFile(LocalFileSystem.java:82)
	  at org.apache.hadoop.fs.FilterFileSystem.copyFromLocalFile(FilterFileSystem.java:332)
	  at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:2241)
	  at org.apache.hadoop.util.CopyFromLocalFileTest.test_incorrect(CopyFromLocalFileTest.java:48)

java.lang.Thread.State: RUNNABLE
	  at org.apache.hadoop.util.CopyFromLocalFileTest$FailingFileSystem.create(CopyFromLocalFileTest.java:60)
	  at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:1073)
	  at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:1053)
	  at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:942)
	  at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:930)
	  at org.apache.hadoop.util.CopyFromLocalFileTest.test_correct(CopyFromLocalFileTest.java:42)

{code}, Can anyone please grant me contributor access so that I can mark this as "Not An Issue" .]