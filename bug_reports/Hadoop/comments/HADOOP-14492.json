[How about changing the {{NameNodeMetrics}} to use {{MutableRatesWithAggregation}} instead of {{MutableRates}}? 
Any idea? [~steve_l] [~zhz], Hey [~cltlfcjin] - these metrics can be different since the RpcDetailed metric is the time to complete a DN's entire block report, which may include multiple storages (more than one value for {{dfs.datanode.data.dir}}), each of which contributes to the NameNodeActivity metric. In the cluster this was recorded from, do your datanodes run with multiple storages? Even without multiple storages, the AvgTime may be different because the RpcDetailed time is measured from different points in the code (e.g. it includes the time to acquire the FSNamesystem lock which the NameNodeActivity metric does not).

Assigning to myself in case there is in fact a bug since HADOOP-13782 was my patch., Thanks [~xkrogen] to explain. Yes, our DataNode run with multiple storages. Assigning to you is good. I think it better to use a different metrics name like {{WholeDNBlockReportAvgTime}}., [~cltlfcjin] I actually think that it is the {{NameNodeActivity}} metric which is named in a misleading way. The RpcDetailedMetric is named after the RPC call, which is in fact {{BlockReport}}. {{NameNodeActivity}} already has the metric {{StorageBlockReportOps}} which has a more clear naming (though it is a duplicate of {{BlockReportNumOps}}). It seems that we should deprecate {{NameNodeActivity#BlockReportNumOps}} and change {{StorageBlockReportOps}} to be a {{MutableRate}} to get both the count and the time, but this would be an incompatible change. Perhaps with the 3.0 release would be a good time. I filed a follow-on JIRA to discuss: HADOOP-14502. I will close this as JIRA as the original purpose (addressing {{MutableRate}} vs {{MutableRatesWithAggregation}}) is not an issue. Feel free to reopen if you disagree.]