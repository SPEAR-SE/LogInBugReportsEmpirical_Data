[HADOOP-8055.patch simply creates a empty core-site.xml in hadoop-hdfs-project/hadoop-hdfs/src/main/conf/

This core-site.xml will be taken in the tar.gz during the distribution building.

(file generated via git diff, so patch -p1 from top hadoop src folder)
, Noticed the same thing when playing with CDH4b1 assemblies of 0.23.x.

Thanks for reporting and filing a patch Eric!

The idea of the patch is right but the location is wrong. Based on assemblies from hadoop-assemblies, from what little I know of mvn, it seems we assemble the etc/hadoop bits from each projects' src/main/conf directory.

Sure enough, hadoop-common's src/main/conf is empty. We need the core-site.xml created there for an ideal fix, and it will get assembled. Could you refactor your patch to do this instead of using hdfs?, Also, when using git, simply do:

{{git diff --no-prefix}} to generate SVN compatible patches. I have a git alias called "sdiff" (short for svn diff) that I reuse to make it easier. So for all apache patches I go by a {{git sdiff > ~/PROJ-ID.patch}} and thats good enough :), This should go into 0.23 branch as well (trunk patch should apply fine)., Hi Harsh,

I had to take some time to figure out how hadoop does its maven assemblies.
First to find the place where the tar.gz was located...:
- hadoop-project/target/ : No
- hadoop-project-dist/target/hadoop-project-dist-0.24.0-SNAPSHOT.tar.gz : No (the archive just contains a few classes of the hadoop-project-dist module)
- hadoop-assemblies/target/ : No
- hadoop-dist/target/hadoop-0.24.0-SNAPSHOT.tar.gz Yes! :)

After, I saw the assembly is done in hadoop-site/pom.xml via maven-antrun
 run cp -r $ROOT/hadoop-common-project/hadoop-common/target/hadoop-common-${project.version}/* .
 run cp -r $ROOT/hadoop-hdfs-project/hadoop-hdfs/target/hadoop-hdfs-${project.version}/* .
 run cp -r $ROOT/hadoop-hdfs-project/hadoop-hdfs-httpfs/target/hadoop-hdfs-httpfs-${project.version}/* .
 run cp -r $ROOT/hadoop-mapreduce-project/target/hadoop-mapreduce-${project.version}/* .
 run cp -r $ROOT/hadoop-tools/hadoop-tools-dist/target/hadoop-tools-dist-${project.version}/* .

and yes, $ROOT/hadoop-hdfs-project/hadoop-hdfs/target/hadoop-hdfs-${project.version}/ contains the hdfs-site.xml file, but not the core-site.xml

This $ROOT/hadoop-hdfs-project/hadoop-hdfs/target/hadoop-hdfs-${project.version}/ folder is being generated by the hadoop-hdfs-project/hadoop-hdfs/ build, so I added the core-site.xml next to the hdfs-site.xml. After a clean/rebuild, the hadoop-dist/target/hadoop-0.24.0-SNAPSHOT.tar.gz had the needed core-site.xml inside.

I will further review the 0.24.0-SNAPSHOT hadoop-assemblies module based on your inputs, but a quick look to it leaves me in the shadow... Hope you followed me until here, otherwise welcome to the shadow :)

, I searched for a solution to create a svn-compatible patch yesterday and didn't find it...  and today, you saved my git Harsh :)
Well, without the --no-prefix, patch can still be applied with 'patch -p1', but that's obviously not ideal. 
Should my patch production rate become too high, I will also create a script with 'git diff --no-prefix --staged' within.
Thx again for the tip!
Eric
, I didn't look till now at branches, but https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.23/ seems to have a similar structure, so it should also do the job.

I will try to build a dist from that branch with the patch and report here.

(btw, where can newbies view a picture of the branches and their relations with trunk?)
, The code I was talking about is around line 34 of hadoop-assemblies/src/main/resources/assemblies/hadoop-dist.xml

Simple fix is to move your template core-site.xml to hadoop-common-project/hadoop-common/src/main/conf and I'll run the build and commit it in. I tested this fix locally, seems to work well and produce the file, but I'll have to run tests via hudson to know for sure.

Regarding the patch, if the patch is not -p0 applicable, Hadoop QA buildbot will fail to apply it cleanly for testing (When we run it via "Submit Patch" from the JIRA), and hence it is required that patches be svn-compatible :(, Eric,

bq. (btw, where can newbies view a picture of the branches and their relations with trunk?)

Its odd that we don't have a resource of our own but check out https://blogs.apache.org/bigtop/entry/all_you_wanted_to_know and http://www.cloudera.com/blog/2012/01/an-update-on-apache-hadoop-1-0/ -- should help clear all the confusion created with the half-baked rename of branches lately., TILT, core-site.xml is 'common' to 'dfs' and 'yarn', so it has to go to hadoop-common-project/hadoop-common/src/main/conf
I tested this with 0.24 and 0.23, and it works fine.

If OK for you, I will leave you add the core-site.xml file (in trunk and branch0.23) without submitting further patch. Just tell me!
I will try next time to submit via qa buildbot, and get some -1 from our good friend Hudson.

Regarding hadoop-assemblies/src/main/resources/assemblies/hadoop-dist.xml, it is not referenced anywhere. I had a first natural look at it (canonical maven way to do a tarball), but came after to the conclusion that the tar is done via the ant-run script I talked previously located in hadoop-site/pom.xml (to be confirmed/invalidate by anyone). I understand that hadoop-dist.xml as a ground for a future way to tarball hadoop.

Thx for the links about the branches. I knew the Cloudera one which didn't mention yet 0.24, and discovered the fresh bigtop one (posted during my last night) - very instructive (my remaining question is why are we working on 0.24 while 1.0 has been released? - just kidding :).
, Sure Eric, I'll do it then.

Patch that should fix this odd deficiency., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12514109/HADOOP-8055.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed unit tests in .

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/585//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/585//console

This message is automatically generated., Ok, got the patch submission process.
Thank you to have handled this Harsh.
Eric
, The patch looks fine to me, but I'm confused by why manually creating $HADOOP_HOME/etc/hadoop/core-site.xml avoids the problem - is there some deeper issue?, Tom - It would not resolve the issue if we just create the file, but I think what Eric meant to say was that he wanted to resolve it by adding fs.defaultFS and he could not find core-site.xml, and hence had to create it on his own., @harsh

Btw, how is the patch submission tested against 0.24 and 0.23. I don't see it directly from:
Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/585//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/585//console

Your previous post correctly summarized what I meant.

@tom

I don't think there's something fundamental, it's more about correct comprehension of the returned messages and the behavior we can expect.

I just found strange that hdfs-site.xml and yarn.xml was in the folder, but not core-site.xml (I was in fact wondering if something had changed in the configuration rules).
If you start without core-site.xml (or with an empty core-site.xml) you've got an exception with message "Exception in thread "main" java.lang.IllegalArgumentException: Invalid URI for NameNode address (check fs.defaultFS): file:/// has no authority."
It's quite confusing, the issue is in fact the absence of fs.default.name property (and not fs.defaultFS as written in the message).

Also, if you invoke 'hadoop namenode -format' with that empty/absent core-site.xml, hadoop does correctly the format in a self-decided tmp folder
12/02/10 18:22:19 INFO namenode.NNStorage: Storage directory /tmp/hadoop-echarles/dfs/name has been successfully formatted.
(prolly the default /tmp/hadoop-${user.name}/dfs/name value)
After that format, it refuses anyway to start (why doesn't it reuse that format file system?)

So, I would except a helpful error message for all commands in case of absence of configuration.

It's just the 'more' things I can see here (user-friendliness).
Maybe there are good reasons for this, or maybe I misuse the system? Otherwise, should I open a JIRA?
, Thanks Tom, committing to trunk and branch-0.23., Eric - The absence of a core-site.xml means the core-default.xml alone is loaded, and it has an fs.defaultFS in it set to file:/// OOB.

However, I agree our log messages, and our guards can be even better. Could you file another JIRA with your suggestions? I'll be happy discuss and carry it over from there :), Committed to branch-0.23 and trunk. Thanks for your report and contribution Eric, and thanks for review Tom!, Integrated in Hadoop-Hdfs-trunk-Commit #1789 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1789/])
    HADOOP-8055. Hadoop tarball distribution lacks a core-site.xml (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243065
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
, Integrated in Hadoop-Common-trunk-Commit #1715 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1715/])
    HADOOP-8055. Hadoop tarball distribution lacks a core-site.xml (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243065
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
, Integrated in Hadoop-Mapreduce-trunk-Commit #1726 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1726/])
    HADOOP-8055. Hadoop tarball distribution lacks a core-site.xml (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243065
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
, Integrated in Hadoop-Hdfs-0.23-Commit #527 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/527/])
    HADOOP-8055. svn merge -c 1243065 from trunk

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243068
Files : 
* /hadoop/common/branches/branch-0.23
* /hadoop/common/branches/branch-0.23/hadoop-common-project
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-auth
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/docs
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/core
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/native
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/datanode
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/secondary
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/test/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/conf
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/c++
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/block_forensics
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build-contrib.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/eclipse-plugin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/index
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/vaidya
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/java
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/fs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/ipc
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/webapps/job
* /hadoop/common/branches/branch-0.23/hadoop-project
* /hadoop/common/branches/branch-0.23/hadoop-project/src/site
, Integrated in Hadoop-Common-0.23-Commit #539 (See [https://builds.apache.org/job/Hadoop-Common-0.23-Commit/539/])
    HADOOP-8055. svn merge -c 1243065 from trunk

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243068
Files : 
* /hadoop/common/branches/branch-0.23
* /hadoop/common/branches/branch-0.23/hadoop-common-project
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-auth
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/docs
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/core
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/native
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/datanode
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/secondary
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/test/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/conf
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/c++
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/block_forensics
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build-contrib.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/eclipse-plugin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/index
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/vaidya
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/java
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/fs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/ipc
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/webapps/job
* /hadoop/common/branches/branch-0.23/hadoop-project
* /hadoop/common/branches/branch-0.23/hadoop-project/src/site
, Integrated in Hadoop-Mapreduce-0.23-Commit #543 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/543/])
    HADOOP-8055. svn merge -c 1243065 from trunk

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243068
Files : 
* /hadoop/common/branches/branch-0.23
* /hadoop/common/branches/branch-0.23/hadoop-common-project
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-auth
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/docs
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/core
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/native
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/datanode
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/secondary
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/test/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/conf
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/c++
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/block_forensics
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build-contrib.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/eclipse-plugin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/index
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/vaidya
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/java
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/fs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/ipc
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/webapps/job
* /hadoop/common/branches/branch-0.23/hadoop-project
* /hadoop/common/branches/branch-0.23/hadoop-project/src/site
, Integrated in Hadoop-Hdfs-trunk-Commit #1790 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1790/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243096
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Common-trunk-Commit #1716 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1716/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243096
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Hdfs-0.23-Commit #528 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/528/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243095
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Common-0.23-Commit #540 (See [https://builds.apache.org/job/Hadoop-Common-0.23-Commit/540/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243095
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Mapreduce-trunk-Commit #1727 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1727/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243096
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Mapreduce-0.23-Commit #544 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/544/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh)

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243095
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
, Integrated in Hadoop-Mapreduce-trunk #987 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/987/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh) (Revision 1243096)
HADOOP-8055. Hadoop tarball distribution lacks a core-site.xml (harsh) (Revision 1243065)

     Result = FAILURE
harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243096
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243065
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
, Integrated in Hadoop-Mapreduce-0.23-Build #190 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Build/190/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh) (Revision 1243095)
HADOOP-8055. svn merge -c 1243065 from trunk (Revision 1243068)

     Result = FAILURE
harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243095
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243068
Files : 
* /hadoop/common/branches/branch-0.23
* /hadoop/common/branches/branch-0.23/hadoop-common-project
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-auth
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/docs
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/core
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/native
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/datanode
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/secondary
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/test/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/conf
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/c++
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/block_forensics
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build-contrib.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/eclipse-plugin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/index
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/vaidya
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/java
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/fs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/ipc
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/webapps/job
* /hadoop/common/branches/branch-0.23/hadoop-project
* /hadoop/common/branches/branch-0.23/hadoop-project/src/site
, Integrated in Hadoop-Hdfs-trunk #954 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/954/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh) (Revision 1243096)
HADOOP-8055. Hadoop tarball distribution lacks a core-site.xml (harsh) (Revision 1243065)

     Result = FAILURE
harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243096
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243065
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
, Integrated in Hadoop-Hdfs-0.23-Build #167 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/167/])
    Amend HADOOP-8055. Placed changes log in a released section, corrected to 0.23.2. (harsh) (Revision 1243095)
HADOOP-8055. svn merge -c 1243065 from trunk (Revision 1243068)

     Result = FAILURE
harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243095
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt

harsh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1243068
Files : 
* /hadoop/common/branches/branch-0.23
* /hadoop/common/branches/branch-0.23/hadoop-common-project
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-auth
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/conf/core-site.xml
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/docs
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common/src/test/core
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/native
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/datanode
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/secondary
* /hadoop/common/branches/branch-0.23/hadoop-hdfs-project/hadoop-hdfs/src/test/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/conf
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/resources/mapred-default.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-mapreduce-examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/c++
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/block_forensics
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build-contrib.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/build.xml
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/eclipse-plugin
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/index
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/vaidya
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/examples
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/java
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/fs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/hdfs
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/ipc
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/webapps/job
* /hadoop/common/branches/branch-0.23/hadoop-project
* /hadoop/common/branches/branch-0.23/hadoop-project/src/site
, @Harsh/Tom,
  Doesnt core-site.xml get generated via the core-site.xml.template? Thats what happens in 0.20 line. In this patch we just added another file - core-site.xml. Is this the correct fix?, Mahadev,

From hadoop-assemblies' {{assemblies/hadoop-dist.xml}} all the target does is take each project's src/main/conf and place it inside etc/conf. This change is inline with empty configs inside other projects (hdfs, httpfs for example) and these reflect inside the tar already. Unsure how yarn gets them in, however, cause they do not carry such a dir in any of their projects. Perhaps that's why they don't appear under etc/hadoop?

Is the template sourcing is only done for packages, and not the tar assembly?

In any case, we'd have to pick one method up and use it for all projects. Please do reopen this issue if this current way of injecting core-site.xml is incorrect!, -Perhaps that's why they don't appear under etc/hadoop?-

These are all I see in etc/hadoop in a tarball (from an earlier report of mine), and I do recall hdfs/httpfs being empty as well -- didn't get around checking yarn back then:

hadoop-metrics.properties
hadoop-metrics2.properties
hdfs-site.xml
httpfs-env.sh
httpfs-log4j.properties
httpfs-signature.secret
httpfs-site.xml
log4j.properties
slaves
ssl-client.xml.example
ssl-server.xml.example
yarn-env.sh
yarn-site.xml, Merged this to 0.23.1. This might not be the right soln but we need to get 0.23.1 out soon!, @harshj I've opened https://issues.apache.org/jira/browse/HDFS-2965 to discuss the exception on startup]