[This fixes the problem., +1

http://issues.apache.org/jira/secure/attachment/12361435/NeedStorageID.patch applied and successfully tested against trunk revision r554144.

Test results:   http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/378/testReport/
Console output: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/378/console, Making it a blocker for 0.14.
Thanks Raghu for finding this bug., In order to prevent from happening that again I included
# an assert that verifies storage id consistency
# a log message when a new storage id is assigned, and
# an exception if the storage ids are not consistent.
, -1, could not apply patch.

The patch command could not apply the latest attachment http://issues.apache.org/jira/secure/attachment/12361453/NeedStorageID2.patch as a patch to trunk revision r554811.

Console output: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/383/console

Please note that this message is automatically generated and may represent a problem with the automation system and not the patch., +1

http://issues.apache.org/jira/secure/attachment/12361460/NeedStorageID2.patch applied and successfully tested against trunk revision r554811.

Test results:   http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/384/testReport/
Console output: http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/384/console, I just committed this.  Thanks, Konstantin!, Integrated in Hadoop-Nightly #152 (See [http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/152/])]