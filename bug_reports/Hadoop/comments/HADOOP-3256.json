[Another easy fix is using jobid + hash(other stuffs)., HADOOP-2066 is a manifestation of the same problem., Fixed to use jobId rather than jobName., Changing the log file name is going to use only jobId breaks history. 
History jsps assume that they have the path name as jobtrackerHostname_jobId_username_jobName.  Since there is no master index now, the history viewing jsps do a list paths in history directory and  parse the path names to give more information for the user about the log file.
(For more information see HADOOP-2178 )
I could see the following options:
1. One solution could be to write this information as the first line of history log, but the jsps have to read first line of all history files to print the first page.
This is going to be lot of reads. 
2. Another solution could be to construct a accepted path with the jobtrackerHostname, jobId, username and jobName.

Thoughts?, 
I thinkk option 2 is preferred.

You may introduce encode/decode functions to escape the job name part.

, -1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12380131/HADOOP-3256_0_20080414.patch
against trunk revision 645773.

    @author +1.  The patch does not contain any @author tags.

    tests included -1.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no tests are needed for this patch.

    javadoc +1.  The javadoc tool did not generate any warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs +1.  The patch does not introduce any new Findbugs warnings.

    core tests -1.  The patch failed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2233/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2233/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2233/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2233/console

This message is automatically generated., Cancelling patch to incorporate Amareshwari's comments ..., Alternate solution: I guess we can use URL{En|De}code the <jobtrackerHostname, jobId, username, jobName> quartet to ensure they are legal URIs:
http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLEncoder.html
http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLDecoder.html

Thoughts?, Updated patch to use UR{En|De}code and to keep the old scheme of <jobtrackerHostname, jobId, username, jobName> for the log-file name..., some comments
1. The code in jobhistory.jsp should call jobFile.getName.toString() to get the file name, instead of jobFile.toString()
{code}
+        decodedJobFileName = URLDecoder.decode(jobFile.toString(), "UTF-8");
{code} should be 
{code}
+        decodedJobFileName = URLDecoder.decode(jobFile.getName().toString(), "UTF-8");
{code}

2.  printJob should be passed jobFile, since jobFile is the complete path of the log file and is used to load the job details in the following jsps. and should not be decoded.
So, the code change 
{code}
       printJob(trackerHostName, trackerStartTime, jobId,
-               jobName, user, jobFile.toString(), out) ; 
+               jobName, user, decodedJobFileName, out) ; 
{code} is not necessary.

3. Otherthan above two comments, indentation issues to do with two spces vs four spaces.
, -1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12380155/HADOOP-3256_1_20080415.patch
against trunk revision 645773.

    @author +1.  The patch does not contain any @author tags.

    tests included -1.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no tests are needed for this patch.

    javadoc +1.  The javadoc tool did not generate any warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs +1.  The patch does not introduce any new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2237/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2237/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2237/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2237/console

This message is automatically generated., Updated patch incorporating review feedback, also fixed _all_ jsps to encode urls again so that the decoding done by the browser doesn't lead to wrong logFile parameter being passed around., -1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12380227/HADOOP-3256_2_20080415.patch
against trunk revision 645773.

    @author +1.  The patch does not contain any @author tags.

    tests included -1.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no tests are needed for this patch.

    javadoc +1.  The javadoc tool did not generate any warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs -1.  The patch appears to introduce 1 new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2245/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2245/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2245/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2245/console

This message is automatically generated., The encoding you are doing in jobhistory is not needed, because you are encoding the logFile in jobHistory.java before creating.
And listpaths will give encoded name. jobFile.toString() will give correct path to be passed for jsps, right?
{code}
+      // Encode the logfile name again to cancel the decoding done by the browser
+      String encodedJobFileName = 
+          JobHistory.JobInfo.encodeJobHistoryFileName(jobFile.getName().toString());
{code}

the above encoding and passing it for jsps is not correct, since jobFile.getName() is already encoded name. Thus patch needs only decoding of jobFile.getName() for extracting values of jobtracker hostname, starttime, jobid, username and jobname., Fixing findbugs warnings..., Amareshwari, as that comment says we need to re-encode the filename since the browser will un-encode it automatically. So that is necessary. Similarly I had to do it in a lot of places in other jsps too., Updated patch to fix the findbugs warnings..., Then it makes sense.

+1 for the patch. I validated the patch with both jobname having ':' in it and without it., Sorry..  one more comment.  Decoding should be done in HistoryViewer.java also, at the place where filename split is done to extract jobId., I need to fix HistoryViewer too..., Fixed HistoryViewer too..., +1 for the patch, -1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12380247/HADOOP-3256_2_20080415.patch
against trunk revision 645773.

    @author +1.  The patch does not contain any @author tags.

    tests included -1.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no tests are needed for this patch.

    javadoc +1.  The javadoc tool did not generate any warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs +1.  The patch does not introduce any new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2250/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2250/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2250/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2250/console

This message is automatically generated., Arun, I didn't understand the change you made in CopyFiles.java. Apart from that it looks good., Removed the debugging code in CopyFiles.java ... my bad., I just committed this. Thanks, Arun!, Integrated in Hadoop-trunk #463 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/463/])]