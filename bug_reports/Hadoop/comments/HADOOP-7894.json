[seen this in MAPREDUCE-3432 too; I will link that as cause-by this issue, Hey, did anyone ever come up with a one-size-fits-all solution to this? I am trying to configure 2.0.2-alpha and can't get JAVA_HOME to show up. I'm running on Ubuntu, and have gotten numerous non-YARN hadoop versions to run fine on this machine. Even when I hardcode my JAVA_HOME into {start,stop}-dfs.sh and {start,stop}-yarn.sh, add then to my bash profiles, source various config scripts, etc. nothing seems to work. Will report back when something works, but if anyone knows a quick workaround for linux right now that would be fantastic.

, Have you tried setting JAVA_HOME in just hadoop-env.sh? That's always worked for me.
, You know, I did, and it didn't pick up. I also tried the env_keep sudoers fix mentioned in another thread, etc. and no dice. In the end (running ubuntu) I had to hardcode the JAVA_HOME and a few other env vars into the env scripts in the run scripts in order to get my 2.0.2-alpha YARN, HDFS, and MR all running successfully. I'm on the wrong machine but if you're curious let me know and I can post a more detailed idea of what ended up working, if it helps diagnose the problem. Its certainly not ideal, but it is getting me by for now. Thanks for the advice!, Fixed in trunk.]