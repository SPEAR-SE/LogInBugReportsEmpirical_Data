[Since Hadoop has been moved to Java 7, upload this patch to simplify UGI#reloginFromKeytab. , {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12685831/HADOOP-11287-120814.patch
  against trunk revision 6c5bbd7.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:red}-1 findbugs{color}.  The patch appears to introduce 65 new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-common-project/hadoop-common:

                  org.apache.hadoop.metrics2.impl.TestMetricsSystemImpl

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/5193//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/5193//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5193//console

This message is automatically generated., Kick Jenkins again to see if the findbugs warnings are reproducible. Those warnings appears to be unrelated to this change. , {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12685895/HADOOP-11287-120814.patch
  against trunk revision ddffcd8.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:red}-1 findbugs{color}.  The patch appears to introduce 65 new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/5196//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/5196//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5196//console

This message is automatically generated., Hi, [~gtCarrera9]. Thanks for working on this.

I believe this will break when run with JDK8 because as described in HADOOP-10786: "Krb5LoginModule changed subtly in java 8: in particular, if useKeyTab and storeKey are specified, then only a KeyTab object is added to the Subject's private credentials, whereas in java <= 7 both a KeyTab and some number of KerberosKey objects were added."

If users run with the current patch on Java 8, then they will incorrectly set isKeytab to false because KerberosKey objects will not be added., To fix the above, we just check for presence of javax.security.auth.kerberos.KeyTab, and we don't need the reflection anymore because the class is available in JDK7 and up., Hi [~schu], thank you very much for pointing this out! In my updated patch, I followed your suggestion to check the presence of KeyTab, and keep the reflection part removed. , {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12685919/HADOOP-11287-120814-1.patch
  against trunk revision ddffcd8.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:red}-1 findbugs{color}.  The patch appears to introduce 65 new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/5199//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HADOOP-Build/5199//artifact/patchprocess/newPatchFindbugsWarningshadoop-common.html
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/5199//console

This message is automatically generated., +1.

The findbugs warnings are unrelated and being tracked by HADOOP-11366. I'll commit it shortly., I've committed the patch to trunk and branch-2. Thanks [~gtCarrera9] for the contribution., FAILURE: Integrated in Hadoop-trunk-Commit #6673 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/6673/])
HADOOP-11287. Simplify UGI#reloginFromKeytab for Java 7+. Contributed by Li Lu. (wheat9: rev 0ee41612bb237331fc7130a6fb8b5e3366fcc221)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-Yarn-trunk #770 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/770/])
HADOOP-11287. Simplify UGI#reloginFromKeytab for Java 7+. Contributed by Li Lu. (wheat9: rev 0ee41612bb237331fc7130a6fb8b5e3366fcc221)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java
, SUCCESS: Integrated in Hadoop-Yarn-trunk-Java8 #34 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/34/])
HADOOP-11287. Simplify UGI#reloginFromKeytab for Java 7+. Contributed by Li Lu. (wheat9: rev 0ee41612bb237331fc7130a6fb8b5e3366fcc221)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #33 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/33/])
HADOOP-11287. Simplify UGI#reloginFromKeytab for Java 7+. Contributed by Li Lu. (wheat9: rev 0ee41612bb237331fc7130a6fb8b5e3366fcc221)
* hadoop-common-project/hadoop-common/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java
, SUCCESS: Integrated in Hadoop-Hdfs-trunk #1966 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1966/])
HADOOP-11287. Simplify UGI#reloginFromKeytab for Java 7+. Contributed by Li Lu. (wheat9: rev 0ee41612bb237331fc7130a6fb8b5e3366fcc221)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #37 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/37/])
HADOOP-11287. Simplify UGI#reloginFromKeytab for Java 7+. Contributed by Li Lu. (wheat9: rev 0ee41612bb237331fc7130a6fb8b5e3366fcc221)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1987 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1987/])
HADOOP-11287. Simplify UGI#reloginFromKeytab for Java 7+. Contributed by Li Lu. (wheat9: rev 0ee41612bb237331fc7130a6fb8b5e3366fcc221)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java
* hadoop-common-project/hadoop-common/CHANGES.txt
, SUCCESS: Integrated in Hadoop-Hdfs-trunk #1967 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1967/])
HADOOP-11287. Simplify UGI#reloginFromKeytab for Java 7+. Contributed by Li Lu. (wheat9: rev 0ee41612bb237331fc7130a6fb8b5e3366fcc221)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java
* hadoop-common-project/hadoop-common/CHANGES.txt
]