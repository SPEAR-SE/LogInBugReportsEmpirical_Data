[Now I see the source of confusion. I have search shortcut for javadoc to go to Java SE 5.0. [SE 6|http://java.sun.com/javase/6/docs/api/java/net/Socket.html#getOutputStream()] explicitly states that closing this stream closes the socket, but [SE 5.0|http://java.sun.com/j2se/1.5.0/docs/api/java/net/Socket.html#getOutputStream()] doesn't., I think this is blocker for 0.17. The fix is also safe and simple., Patch attached. SocketInputStream and SocketOutputStream close the channel when close() is invoked by the user.

Also these two classes have getChannel() call so that underlying channel could be used for something thing like FileChannel.transferTo(). , Do we need try-finally in close()?  i.e.
{code}
try{
  reader.channel.close();
} finally {
  reader.close();
}
{code}, I don't think so. The fact that close() throws exception implies to user something is wrong and its ok for something to be wrong at that time.
, > something to be wrong at that time.
I meant its ok for 'close' flag not to be set., +1 the patch looks good, Thanks Nicholas. This a blocker for 0.17., -1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12378602/HADOOP-3073.patch
against trunk revision 619744.

    @author +1.  The patch does not contain any @author tags.

    tests included +1.  The patch appears to include 3 new or modified tests.

    javadoc -1.  The javadoc tool appears to have generated 1 warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs -1.  The patch appears to introduce 1 new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2068/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2068/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2068/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2068/console

This message is automatically generated., I think this findbugs warning need to be waived. close() removed below was added to fix the same findbugs warning in HADOOP-2346 as described in a [comment|http://issues.apache.org/jira/browse/HADOOP-2346?focusedCommentId=12575116#action_12575116].

affected code: {noformat}
-      try {
-        //write the header.
-        out.writeShort( DATA_TRANSFER_VERSION );
-        out.write( OP_READ_BLOCK );
-        out.writeLong( blockId );
-        out.writeLong( startOffset );
-        out.writeLong( len );
-        out.flush();
-      } finally {
-        IOUtils.closeStream(out);
-      }
+      //write the header.
+      out.writeShort( DATA_TRANSFER_VERSION );
+      out.write( OP_READ_BLOCK );
+      out.writeLong( blockId );
+      out.writeLong( startOffset );
+      out.writeLong( len );
+      out.flush();
{noformat}, I just committed this. - Only way I can think of avoiding findbugs warning is to write a FilterSocket class., Integrated in Hadoop-trunk #443 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/443/]), I committed this with javadoc errors by mistake. will commit attached javadoc.patch to fix that., Integrated in Hadoop-trunk #444 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/444/])]