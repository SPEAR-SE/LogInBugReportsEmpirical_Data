[The easy way to reproduce this is to run
{code}
NNThroughputBenchmark -op blockReport -datanodes 2000 -reports 2000 -blocksPerReport 43000 -blocksPerFile 300
{code}
, Now seems easy to reproduce, and gets in the way of testing., Oops! This should not have been unassigned from 0.18.0, The bug was caused by an incorrect initial assignment in getPipeline which may lead a null writer. Here is the patch that fixes the bug., +1 patch looks good, -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12384239/NullWriter.patch
  against trunk revision 669343.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no tests are needed for this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2689/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2689/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2689/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2689/console

This message is automatically generated., I've committed this., Integrated in Hadoop-trunk #524 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/524/])]