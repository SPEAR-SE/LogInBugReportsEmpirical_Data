{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "percent": 0,
            "progress": 0,
            "total": 60
        },
        "aggregatetimeestimate": 60,
        "aggregatetimeoriginalestimate": 60,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [{
            "id": "12319323",
            "name": "nodemanager",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12319323"
        }],
        "created": "2017-09-30T10:00:46.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "zhengchenyu",
            "key": "zhengchenyu",
            "name": "zhengchenyu",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=zhengchenyu",
            "timeZone": "Asia/Harbin"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2017-10-02T20:01:58.344+0000",
        "customfield_12310222": "1_*:*_1_*:*_15562675923_*|*_5_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310320": [{
            "archived": false,
            "id": "12342758",
            "name": "3.2.0",
            "released": false,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12342758"
        }],
        "customfield_12310420": "9223372036854775807",
        "customfield_12310920": "9223372036854775807",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i3kquv:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Mar 29 12:55:16 UTC 2018",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "In our cluster, nodemanagere recovery is turn on, and we use LinuxConainer with docker mode.\nContainer may be failed when nodemanager restart, exception is below:\n\n{code}\n[2017-09-29T15:47:14.433+08:00] [INFO] containermanager.monitor.ContainersMonitorImpl.run(ContainersMonitorImpl.java 472) [Container Monitor] : Memory usage of ProcessTree 120523 for container-id container_1506600355508_0023_01_000004: -1B of 10 GB physical memory used; -1B of 31 GB virtual memory used\n[2017-09-29T15:47:15.219+08:00] [ERROR] containermanager.launcher.RecoveredContainerLaunch.call(RecoveredContainerLaunch.java 93) [ContainersLauncher #1] : Unable to recover container container_1506600355508_0023_01_000004\njava.io.IOException: Timeout while waiting for exit code from container_1506600355508_0023_01_000004\n[2017-09-29T15:47:15.220+08:00] [INFO] containermanager.container.ContainerImpl.handle(ContainerImpl.java 1142) [AsyncDispatcher event handler] : Container container_1506600355508_0023_01_000004 transitioned from RUNNING to EXITED_WITH_FAILURE\n[2017-09-29T15:47:15.221+08:00] [INFO] containermanager.launcher.ContainerLaunch.cleanupContainer(ContainerLaunch.java 440) [AsyncDispatcher event handler] : Cleaning up container container_1506600355508_0023_01_000004\n{code}\n\nI guess the proccess is done, but 2 seconde later( the variable is msecLeft), the *.pid.exitcode wasn't created. Then I changed variable to 20000ms, The container is succeed when nodemanger is restart.\nSo I think it is too short for docker container to complete the work.\n\nIn docker mode of LinuxContainer, nm monitor the real task which is launched by \"docker run\" command. Then \"docker wait\" command will wait for exitcode, then \"docker rm\" will delete the docker container. Lastly, container-executor will write the exit code. So if some docker command is slow enough, nm wouldn't monitor the container. In fact, docker rm is always slow. \n\nI think the exit code of docker rm dosen't matter with the real task, so I think we could move the operation of write \"*.pid.exitcode\" before the command of docker rm. Or monitor the docker wait proccess, but not the real task.\n",
        "duedate": null,
        "environment": "CentOS",
        "fixVersions": [],
        "issuelinks": [{
            "id": "12530678",
            "outwardIssue": {
                "fields": {
                    "issuetype": {
                        "avatarId": 21146,
                        "description": "The sub-task of the issue",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
                        "id": "7",
                        "name": "Sub-task",
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
                        "subtask": true
                    },
                    "priority": {
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "id": "3",
                        "name": "Major",
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                    },
                    "status": {
                        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                        "id": "5",
                        "name": "Resolved",
                        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                        "statusCategory": {
                            "colorName": "green",
                            "id": 3,
                            "key": "done",
                            "name": "Done",
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                        }
                    },
                    "summary": "Improve handling of the Docker container life cycle"
                },
                "id": "12988950",
                "key": "YARN-5366",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/12988950"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12530678",
            "type": {
                "id": "12310000",
                "inward": "is duplicated by",
                "name": "Duplicate",
                "outward": "duplicates",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"
            }
        }],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": ["Docker"],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "percent": 0,
            "progress": 0,
            "total": 60
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135"
            },
            "id": "12313722",
            "key": "YARN",
            "name": "Hadoop YARN",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12313722"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "zhengchenyu",
            "key": "zhengchenyu",
            "name": "zhengchenyu",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=zhengchenyu",
            "timeZone": "Asia/Harbin"
        },
        "resolution": {
            "description": "The problem is a duplicate of an existing issue.",
            "id": "3",
            "name": "Duplicate",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/3"
        },
        "resolutiondate": "2018-03-29T12:58:42.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "LinuxContainer in docker mode will be failed when nodemanager restart, because timeout for docker is too slow.",
        "timeestimate": 60,
        "timeoriginalestimate": 60,
        "timespent": null,
        "updated": "2018-05-16T19:58:09.000+0000",
        "versions": [{
            "archived": false,
            "description": "2.8.0 release",
            "id": "12329059",
            "name": "2.8.0",
            "releaseDate": "2017-03-22",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12329059"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/YARN-7278/votes",
            "votes": 1
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/YARN-7278/watchers",
            "watchCount": 4
        },
        "workratio": 0
    },
    "id": "13106228",
    "key": "YARN-7278",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13106228"
}