[There is JIRA exist with for this test case failure i.e YARN-5548., The test fails in the following code:
{code}
    // the first app0 get kicked out from both rmContext and state store
    Assert.assertNull(rm2.getRMContext().getRMApps()
      .get(app0.getApplicationId()));
    Assert.assertNull(rmAppState.get(app0.getApplicationId()));
{code}
RMAppManager removes app0 from rmContext by blocking API, and removes it from state store by non-blocking API (Please see {{RMStateStore#removeApplication}} for the detail). That way the latter assertion may fail. I'm thinking the issue can be fixed by adding wait via {{GenericTestUtils#waitFor}}. I'll attach a patch shortly., Okay, I'll check YARN-5548., Sorry I had to get in YARN-5548.
Missed it. Will get it in by today., Attaching a patch to use GenericTestUtils.waitFor., I looked YARN-5548 and probably it will fix this failure. Closing this as dup. Thanks [~rohithsharma] and [~varun_saxena].]