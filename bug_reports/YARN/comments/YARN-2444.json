[The following search causes the problem described above:

{noformat}/ws/v1/timeline/test?primaryFilter=prop2:val2{noformat}

The following one works as expected:

{noformat}/ws/v1/timeline/test?primaryFilter=prop1:val1{noformat}, Ah, I'm using leveldb if that makes a difference., I've just written the tests to try and reproduce this on trunk against in-memory and leveldb-backed ATS; I'm not seeing it in either. I'm getting back the entities and nothing appears in the logs.

Attaching the logs and then -001 patch version.

This test uses the {{VisibleForTesting}} code to do a GET from the timeline client proposed in YARN-2423. It applies the diagnostics/reporting tweaks suggested in [my comment there|https://issues.apache.org/jira/browse/YARN-2423?focusedCommentId=14385756&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14385756]., Patch -001 attempts to replicate the problem; doesn't. Committing this test case will show that it's not there and ensure it stays that way., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12708055/YARN-2444-001.patch
  against trunk revision 3d9132d.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-applicationhistoryservice.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/7142//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/7142//console

This message is automatically generated., +add test to submit 100+K events and see what happens. , [~stevel@apache.org], shall we close the jira? Since 2.6/2.7, we have changed to use timeline domain control ACL. The per entity ACL control via owner information is no longer used., There's a test -it should go in just to catch regressions, closing at a wontfix; its moot in ATS2 and the SPARK-1537 code does its own REST client]