[I am a little confused on the goals of this JIRA.  This cannot be solved solely on the AM side.  The AM runs on nodes that can fail at any time without giving the AM any chance to perform corrective measures regarding the tracking URL.  AM behavior could make this better but it cannot be completely solved there.

Completely solving this requires changes on the YARN server side because the AM could catastrophically fail without executing any shutdown code.  One simple method that would work for Tez and possibly other frameworks would be supporting a history URL during registration in addition to the one already supported at unregistration.  Then as long as the AM registers we have a place to direct users after the app completes even if the AM subsequently crashes spectacularly and never unregisters.  If the AM crashes before it even registers then I would argue the existing AHS-only history behavior should be sufficient since it's not likely the AM had a chance to do any framework-specific behavior before it registered., Thank you [~jlowe].
bq. One simple method that would work for Tez and possibly other frameworks would be supporting a history URL during registration in addition to the one already supported at unregistration.
That would solve most cases and I agree that AM that dies before registration does not need a valid tracking URL.]