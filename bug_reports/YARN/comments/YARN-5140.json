[Workaround option to this issue is explicit yarn.nodemanager.local-dirs configuration pointing to DFS disks.

Default parameter value ${hadoop.tmp.dir}/nm-local-dir will imply usage of local FS on system disk in most installations. Besides of FS fill up risk explained in the description, this is not scalable and performs poorly for any heavy localization as well as some particular workload phases like Spark on YARN shuffle.

Perhaps those drawbacks of using single local FS directory should be better documented in yarn.nodemanager.local-dirs parameter description., Hi [~okalinin], this is a interesting issue. According to the description, if I understand correctly, could we avoid multiple NM crash if we reduce the "yarn.nodemanager.localizer.cache.cleanup.interval-ms" and increasing "yarn.nodemanager.localizer.cache.target-size-mb"?]