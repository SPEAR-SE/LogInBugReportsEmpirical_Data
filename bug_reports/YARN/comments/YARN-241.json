[Is this maybe caused by a race condition where the NM is receiving a container token before the RM registration completes and it receives the secret keys for the container tokens?, As per my observation when I debug, It is having the secret key and mac.init(key) is failing. It fails for all subsequent invocations. If we try with new mac instance with same secret key it succeeds., [~devaraj.k] taking over... any idea how to reproduce this? , I tried restarting NM several times in secured mode.. but containers successfully start /finish on it. However now this authentication happens irrespective of security and instead of container tokens, nmtokens are getting used. , Omkar, For me also it was not happening always. When I ran the cluster for long time and NM gets restarted multiple times I had faced it, when the issue comes it fails to launch all containers on that node due to error mentioned in the description.
, [~devaraj.k] closing it as not reproducible. lets open it if this issue shows up again., Recent changes have changed the behavior and is no longer reproducible.]