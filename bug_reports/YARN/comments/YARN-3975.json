[Attaching patch, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  18m 14s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 39s | There were no new javac warning messages. |
| {color:red}-1{color} | javadoc |   9m 42s | The applied patch generated  2  additional warning messages. |
| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   1m 36s | The applied patch generated  2 new checkstyle issues (total was 16, now 18). |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 23s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |
| {color:red}-1{color} | findbugs |   3m 52s | The patch appears to introduce 2 new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | yarn tests |   0m 23s | Tests passed in hadoop-yarn-api. |
| {color:red}-1{color} | yarn tests |   1m 54s | Tests failed in hadoop-yarn-common. |
| {color:green}+1{color} | yarn tests |   0m 23s | Tests passed in hadoop-yarn-server-web-proxy. |
| | |  46m 29s | |
\\
\\
|| Reason || Tests ||
| FindBugs | module:hadoop-yarn-common |
| Failed unit tests | hadoop.yarn.util.TestRackResolver |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12749490/YARN-3975.2.b2.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 8f73bdd |
| javadoc | https://builds.apache.org/job/PreCommit-YARN-Build/8808/artifact/patchprocess/diffJavadocWarnings.txt |
| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/8808/artifact/patchprocess/diffcheckstylehadoop-yarn-api.txt |
| Findbugs warnings | https://builds.apache.org/job/PreCommit-YARN-Build/8808/artifact/patchprocess/newPatchFindbugsWarningshadoop-yarn-common.html |
| hadoop-yarn-api test log | https://builds.apache.org/job/PreCommit-YARN-Build/8808/artifact/patchprocess/testrun_hadoop-yarn-api.txt |
| hadoop-yarn-common test log | https://builds.apache.org/job/PreCommit-YARN-Build/8808/artifact/patchprocess/testrun_hadoop-yarn-common.txt |
| hadoop-yarn-server-web-proxy test log | https://builds.apache.org/job/PreCommit-YARN-Build/8808/artifact/patchprocess/testrun_hadoop-yarn-server-web-proxy.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8808/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf906.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8808/console |


This message was automatically generated., Refined the patch.

The test failure is not related to the patch. I tested it on my local machine but could not reproduce it, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |  17m 14s | Findbugs (version 3.0.0) appears to be broken on trunk. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 41s | There were no new javac warning messages. |
| {color:red}-1{color} | javadoc |   9m 36s | The applied patch generated  2  additional warning messages. |
| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   1m 42s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 23s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |
| {color:red}-1{color} | findbugs |   3m 53s | The patch appears to introduce 2 new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | yarn tests |   0m 23s | Tests passed in hadoop-yarn-api. |
| {color:red}-1{color} | yarn tests |   1m 54s | Tests failed in hadoop-yarn-common. |
| {color:green}+1{color} | yarn tests |   0m 22s | Tests passed in hadoop-yarn-server-web-proxy. |
| | |  45m  8s | |
\\
\\
|| Reason || Tests ||
| FindBugs | module:hadoop-yarn-common |
| Failed unit tests | hadoop.yarn.util.TestRackResolver |
|   | hadoop.yarn.api.TestPBImplRecords |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12749603/YARN-3975.3.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 8f73bdd |
| javadoc | https://builds.apache.org/job/PreCommit-YARN-Build/8812/artifact/patchprocess/diffJavadocWarnings.txt |
| Findbugs warnings | https://builds.apache.org/job/PreCommit-YARN-Build/8812/artifact/patchprocess/newPatchFindbugsWarningshadoop-yarn-common.html |
| hadoop-yarn-api test log | https://builds.apache.org/job/PreCommit-YARN-Build/8812/artifact/patchprocess/testrun_hadoop-yarn-api.txt |
| hadoop-yarn-common test log | https://builds.apache.org/job/PreCommit-YARN-Build/8812/artifact/patchprocess/testrun_hadoop-yarn-common.txt |
| hadoop-yarn-server-web-proxy test log | https://builds.apache.org/job/PreCommit-YARN-Build/8812/artifact/patchprocess/testrun_hadoop-yarn-server-web-proxy.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8812/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf906.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8812/console |


This message was automatically generated., Updated patch. Also fixed YarnClient and WebAppProxyServlet catching YarnException and throwing the exception if it is not ApplicationNotFoundException, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  18m 59s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 44s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |   9m 44s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 22s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   2m 31s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 21s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   4m 40s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | yarn tests |   0m 22s | Tests passed in hadoop-yarn-api. |
| {color:green}+1{color} | yarn tests |   6m 54s | Tests passed in hadoop-yarn-client. |
| {color:red}-1{color} | yarn tests |   1m 53s | Tests failed in hadoop-yarn-common. |
| {color:green}+1{color} | yarn tests |   0m 21s | Tests passed in hadoop-yarn-server-web-proxy. |
| | |  55m 27s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.yarn.util.TestRackResolver |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12749695/YARN-3975.4.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / cf9d3c9 |
| hadoop-yarn-api test log | https://builds.apache.org/job/PreCommit-YARN-Build/8818/artifact/patchprocess/testrun_hadoop-yarn-api.txt |
| hadoop-yarn-client test log | https://builds.apache.org/job/PreCommit-YARN-Build/8818/artifact/patchprocess/testrun_hadoop-yarn-client.txt |
| hadoop-yarn-common test log | https://builds.apache.org/job/PreCommit-YARN-Build/8818/artifact/patchprocess/testrun_hadoop-yarn-common.txt |
| hadoop-yarn-server-web-proxy test log | https://builds.apache.org/job/PreCommit-YARN-Build/8818/artifact/patchprocess/testrun_hadoop-yarn-server-web-proxy.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8818/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf907.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8818/console |


This message was automatically generated., The test does not fail for me.

{noformat}
localhost:hadoop-yarn-common mitdesai$ git status
On branch trunk
Your branch is up-to-date with 'origin/trunk'.
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   ../hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/api/records/ApplicationReport.java
	modified:   ../hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java
	modified:   src/main/java/org/apache/hadoop/yarn/api/records/impl/pb/ApplicationReportPBImpl.java
	modified:   ../hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/AppReportFetcher.java
	modified:   ../hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java
	modified:   ../hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/test/java/org/apache/hadoop/yarn/server/webproxy/TestWebAppProxyServlet.java

no changes added to commit (use "git add" and/or "git commit -a")

localhost:hadoop-yarn-common mitdesai$ mvn clean test -Dtest=TestRackResolver
[INFO] Scanning for projects...
[INFO]
[INFO] Using the builder org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder with a thread count of 1
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Apache Hadoop YARN Common 3.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------

... skipping ...

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hadoop.yarn.util.TestRackResolver
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.412 sec - in org.apache.hadoop.yarn.util.TestRackResolver

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 15.523 s
[INFO] Finished at: 2015-08-10T18:19:15-06:00
[INFO] Final Memory: 38M/577M
[INFO] ------------------------------------------------------------------------
{noformat}, Thanks for the patch, Mit.

The web proxy should be able to keep track of the app report source itself without help from the report record since it knows which proxy it used to get the report in the first place.  This patch looks like we are abusing a public API used by the RM and AHS to convey information from one part of the web proxy servlet to another part of the same servlet.  Note that the app report source isn't even accurate -- if the AHS returns this record, the source doesn't indicate this _until_ the web proxy servlet doctors it up.  If someone else tried to rely on this new API outside of the web proxy servlet it wouldn't work properly.

So we shouldn't be modifying the app report record as part of this patch.  The patch should be completely contained within the web proxy servlet., Thanks for the review [~jlowe].
I have modified the patch based on your comments., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  16m 50s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   8m  0s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |   9m 57s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   0m 47s | The applied patch generated  5 new checkstyle issues (total was 17, now 22). |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 21s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m 36s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | yarn tests |   7m  0s | Tests passed in hadoop-yarn-client. |
| {color:green}+1{color} | yarn tests |   0m 23s | Tests passed in hadoop-yarn-server-web-proxy. |
| | |  46m 56s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12750843/YARN-3975.5.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 13604bd |
| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/8864/artifact/patchprocess/diffcheckstylehadoop-yarn-server-web-proxy.txt |
| hadoop-yarn-client test log | https://builds.apache.org/job/PreCommit-YARN-Build/8864/artifact/patchprocess/testrun_hadoop-yarn-client.txt |
| hadoop-yarn-server-web-proxy test log | https://builds.apache.org/job/PreCommit-YARN-Build/8864/artifact/patchprocess/testrun_hadoop-yarn-server-web-proxy.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8864/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf903.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8864/console |


This message was automatically generated., Fixed Checkstyle issues, \\
\\
| (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  17m  4s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   8m  0s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 10s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 50s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 25s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m 42s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | yarn tests |   6m 58s | Tests passed in hadoop-yarn-client. |
| {color:green}+1{color} | yarn tests |   0m 22s | Tests passed in hadoop-yarn-server-web-proxy. |
| | |  47m 34s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12750866/YARN-3975.6.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / c77bd6a |
| hadoop-yarn-client test log | https://builds.apache.org/job/PreCommit-YARN-Build/8867/artifact/patchprocess/testrun_hadoop-yarn-client.txt |
| hadoop-yarn-server-web-proxy test log | https://builds.apache.org/job/PreCommit-YARN-Build/8867/artifact/patchprocess/testrun_hadoop-yarn-server-web-proxy.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8867/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf904.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8867/console |


This message was automatically generated., Thanks for updating the patch, Mit!

Having two separate booleans for RM vs. AHS seems a bit odd and leads to weird situations like the possibiltiy they're both true.  Normally this is handled via an enum which would make the code a bit cleaner and eliminate the potential for weird states.

I think it would be a bit clearer if ApplicationReportBundle were named something like FetchedAppReport or something similar.

To reduce the amount of unnecessary boilerplate associated with the new class, I think the constructor should take the app report and the origination enum and there should only be getters.  We should be able to treat a fetched application report like an immutable object, and I don't see a need to have setters on it.

Nit: a number of comments that were added in the patch are exactly parroting the code and aren't adding value, e.g.:
{noformat}
      //set this flag to true so that WebAppProxyServlet can understand that the
      //appReport was fetched from the RM
      isReportFromRM = true;
[...]
    //Create a bundle of appReport and the source from where it was fetched
    //so the WebAppProxyServlet has a way to know the appReport source
    ApplicationReportBundle appReportBundle  = new ApplicationReportBundle();
{noformat}

Rather than tack on another set of tests to an already involved test method, it would be cleaner to have a separate test case for the new functionality., [~jlowe] Thanks for taking a look.
I have updated the patch and incorporated your comments. Can you please have another look?, Thanks for updating the patch, Mit!  Looks good overall with just two nits left.

The error message for an app that's not found now has an extraneous comma as it will now say, "Application application_1234_1 could not be found, in RM or history server".

We should probably throw an UnsupportedOperationException or something similar when the app report source isn't RM or AHS.  Shouldn't happen now but could if someone comes along and adds a new enum value and forgets to update this code.  If it does happen the code will just do nothing as-is., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  16m 56s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   8m 19s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  11m 17s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 26s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   0m 52s | The applied patch generated  2 new checkstyle issues (total was 16, now 18). |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 44s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 38s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m 52s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:red}-1{color} | yarn tests |   6m 59s | Tests failed in hadoop-yarn-client. |
| {color:red}-1{color} | yarn tests |   0m 24s | Tests failed in hadoop-yarn-server-web-proxy. |
| | |  49m 32s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.yarn.client.TestRMFailover |
|   | hadoop.yarn.server.webproxy.TestWebAppProxyServlet |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12761457/YARN-3975.8.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / c9cb6a5 |
| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/9230/artifact/patchprocess/diffcheckstylehadoop-yarn-server-web-proxy.txt |
| hadoop-yarn-client test log | https://builds.apache.org/job/PreCommit-YARN-Build/9230/artifact/patchprocess/testrun_hadoop-yarn-client.txt |
| hadoop-yarn-server-web-proxy test log | https://builds.apache.org/job/PreCommit-YARN-Build/9230/artifact/patchprocess/testrun_hadoop-yarn-server-web-proxy.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9230/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9230/console |


This message was automatically generated., Forgot to update TestWebAppProxyServlet. I'll update the patch soon, Somehow attached a wrong version of patch previously. Attached the patch with checkstyle fixed., \\
\\
| (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  17m  3s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 51s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 12s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 51s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 30s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m 39s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | yarn tests |   6m 54s | Tests passed in hadoop-yarn-client. |
| {color:green}+1{color} | yarn tests |   0m 24s | Tests passed in hadoop-yarn-server-web-proxy. |
| | |  47m 26s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12761709/YARN-3975.9.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / cc2b473 |
| hadoop-yarn-client test log | https://builds.apache.org/job/PreCommit-YARN-Build/9235/artifact/patchprocess/testrun_hadoop-yarn-client.txt |
| hadoop-yarn-server-web-proxy test log | https://builds.apache.org/job/PreCommit-YARN-Build/9235/artifact/patchprocess/testrun_hadoop-yarn-server-web-proxy.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9235/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf906.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9235/console |


This message was automatically generated., Latest patch looks good to me, however it does not apply cleanly to branch-2.7.  Could you provide a branch-2.7 patch as well?, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | patch |   0m  0s | The patch command could not apply the patch during dryrun. |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12761903/YARN-3975.9.b2.7.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / a2c76e5 |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9242/console |


This message was automatically generated., Attached branch-2.7 patch.
Also attached b2 patch agian. I realized, I left a debug statement in the previous one., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |  16m  1s | Findbugs (version 3.0.0) appears to be broken on trunk. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 48s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 24s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 39s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 41s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m 38s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:red}-1{color} | yarn tests |   6m 59s | Tests failed in hadoop-yarn-client. |
| {color:green}+1{color} | yarn tests |   0m 22s | Tests passed in hadoop-yarn-server-web-proxy. |
| | |  46m 33s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.yarn.client.api.impl.TestYarnClient |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12761904/YARN-3975.9.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / a2c76e5 |
| hadoop-yarn-client test log | https://builds.apache.org/job/PreCommit-YARN-Build/9243/artifact/patchprocess/testrun_hadoop-yarn-client.txt |
| hadoop-yarn-server-web-proxy test log | https://builds.apache.org/job/PreCommit-YARN-Build/9243/artifact/patchprocess/testrun_hadoop-yarn-server-web-proxy.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9243/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9243/console |


This message was automatically generated., Findbugs not broken due to the patch.
This is from the console output of this run.
{noformat}
 Running findbugs in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client
/home/jenkins/tools/maven/latest/bin/mvn clean test findbugs:findbugs -DskipTests -DhadoopPatchProcess > /home/jenkins/jenkins-slave/workspace/PreCommit-YARN-Build/patchprocess/trunkFindBugsOutputhadoop-yarn-client.txt 2>&1
Exception in thread "main" java.io.FileNotFoundException: /home/jenkins/jenkins-slave/workspace/PreCommit-YARN-Build/patchprocess/trunkFindbugsWarningshadoop-yarn-client.xml (No such file or directory)
	at java.io.FileInputStream.open(Native Method)
	at java.io.FileInputStream.<init>(FileInputStream.java:146)
	at edu.umd.cs.findbugs.SortedBugCollection.progessMonitoredInputStream(SortedBugCollection.java:1231)
	at edu.umd.cs.findbugs.SortedBugCollection.readXML(SortedBugCollection.java:308)
	at edu.umd.cs.findbugs.SortedBugCollection.readXML(SortedBugCollection.java:295)
	at edu.umd.cs.findbugs.workflow.Filter.main(Filter.java:712)
{noformat}
Found a similar issue in YARN-4075.
Console Output: https://builds.apache.org/job/PreCommit-YARN-Build/9241/console

TestYarnClient passes when I run it on my local box.

Filed HADOOP-12435 and YARN-4202 for investigating the issues.


, Moreover this is the exact same change form the one that was uploaded previously and got a +1.

Only difference between the two trunk patches is:
{{@Test//(timeout=5000)}} and {{@Test(timeout=5000)}}, +1 lgtm.  Committing this., Thanks Mit!  I committed this to trunk, branch-2, and branch-2.7., FAILURE: Integrated in Hadoop-trunk-Commit #8504 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8504/])
YARN-3975. WebAppProxyServlet should not redirect to RM page if AHS is enabled. Contributed by Mit Desai (jlowe: rev 692d51c09d3668cde47cc297296d095ddfa933a3)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/test/java/org/apache/hadoop/yarn/server/webproxy/TestWebAppProxyServlet.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/AppReportFetcher.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java
* hadoop-yarn-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #428 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/428/])
YARN-3975. WebAppProxyServlet should not redirect to RM page if AHS is enabled. Contributed by Mit Desai (jlowe: rev 692d51c09d3668cde47cc297296d095ddfa933a3)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/AppReportFetcher.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/test/java/org/apache/hadoop/yarn/server/webproxy/TestWebAppProxyServlet.java
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java
, SUCCESS: Integrated in Hadoop-Yarn-trunk-Java8 #435 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/435/])
YARN-3975. WebAppProxyServlet should not redirect to RM page if AHS is enabled. Contributed by Mit Desai (jlowe: rev 692d51c09d3668cde47cc297296d095ddfa933a3)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/AppReportFetcher.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/test/java/org/apache/hadoop/yarn/server/webproxy/TestWebAppProxyServlet.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java
* hadoop-yarn-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #408 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/408/])
YARN-3975. WebAppProxyServlet should not redirect to RM page if AHS is enabled. Contributed by Mit Desai (jlowe: rev 692d51c09d3668cde47cc297296d095ddfa933a3)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/test/java/org/apache/hadoop/yarn/server/webproxy/TestWebAppProxyServlet.java
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/AppReportFetcher.java
, SUCCESS: Integrated in Hadoop-Yarn-trunk #1168 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1168/])
YARN-3975. WebAppProxyServlet should not redirect to RM page if AHS is enabled. Contributed by Mit Desai (jlowe: rev 692d51c09d3668cde47cc297296d095ddfa933a3)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/test/java/org/apache/hadoop/yarn/server/webproxy/TestWebAppProxyServlet.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/AppReportFetcher.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2374 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2374/])
YARN-3975. WebAppProxyServlet should not redirect to RM page if AHS is enabled. Contributed by Mit Desai (jlowe: rev 692d51c09d3668cde47cc297296d095ddfa933a3)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/test/java/org/apache/hadoop/yarn/server/webproxy/TestWebAppProxyServlet.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/AppReportFetcher.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2347 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2347/])
YARN-3975. WebAppProxyServlet should not redirect to RM page if AHS is enabled. Contributed by Mit Desai (jlowe: rev 692d51c09d3668cde47cc297296d095ddfa933a3)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/test/java/org/apache/hadoop/yarn/server/webproxy/TestWebAppProxyServlet.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/AppReportFetcher.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java
* hadoop-yarn-project/CHANGES.txt
]