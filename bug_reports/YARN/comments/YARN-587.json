[YARN-585 fixes the test well. The test logic is only concerned with the application reaching the RMAppState.SUBMITTED state. Also, fixing the DrainDispatcher to allow waiting until the handler's completion will help with tests like this.]