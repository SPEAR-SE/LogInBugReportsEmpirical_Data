[extract from surefire logs
{code}
2013-11-20 18:59:47,514 INFO  [Thread-4] mortbay.log (Slf4jLog.java:info(67)) - Extract jar:file:/Users/ojoshi/hadoop/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/target/hadoop-yarn-common-3.0.0-SNAPSHOT.jar!/webapps/proxy to /var/folders/h8/dlw3rlfx0_b5zjrw7kn1752m0000gn/T/Jetty_localhost_57922_proxy____rtadom/webapp
2013-11-20 18:59:47,678 INFO  [Thread-4] mortbay.log (Slf4jLog.java:info(67)) - Started SelectChannelConnector@localhost:57922
Proxy server is started at port 57922                                           
2013-11-20 18:59:47,797 ERROR [1023736867@qtp-568432173-0] mortbay.log (Slf4jLog.java:warn(87)) - /proxy/app
org.apache.hadoop.yarn.exceptions.YarnRuntimeException: Error parsing application ID: app
        at org.apache.hadoop.yarn.util.Apps.throwParseException(Apps.java:69)   
        at org.apache.hadoop.yarn.util.Apps.toAppID(Apps.java:54)               
        at org.apache.hadoop.yarn.util.Apps.toAppID(Apps.java:49)               
        at org.apache.hadoop.yarn.server.webproxy.WebAppProxyServlet.doGet(WebAppProxyServlet.java:252)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)         
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)         
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)
        at org.apache.hadoop.http.lib.StaticUserWebFilter$StaticUserFilter.doFilter(StaticUserWebFilter.java:109)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
        at org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:1220)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
        at org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45) 
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)                     
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)          
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)     
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)     
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
2013-11-20 18:59:47,854 INFO  [1023736867@qtp-568432173-0] webproxy.WebAppProxyServlet (WebAppProxyServlet.java:doGet(322)) - dr.who is accessing unchecked http://localhost:57919/foo/bar/ which is the app master GUI of application_00_0 owned by dr.who
2013-11-20 18:59:47,925 WARN  [1023736867@qtp-568432173-0] webproxy.WebAppProxyServlet (WebAppProxyServlet.java:doGet(278)) - dr.who Attempting to access application_0_0000 that was not found
{code}, On my machine, this test is passed. The error log form surefire looks normal because of this code.
{code:java}
      URL wrongUrl = new URL("http://localhost:9099/proxy/app");
{code}, The real cause of timeout exception is this code. Maybe it depends on your machine.

{code:java}
      mainServer  = WebAppProxyServer.startServer(conf);
{code}

{code}
java.lang.Exception: test timed out after 5000 milliseconds
at java.net.Inet4AddressImpl.getHostByAddr(Native Method)
{code}]