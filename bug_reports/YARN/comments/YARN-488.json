[There were 2 problems.  The call from {{ContainerLaunch#sanitizeEnv}} to {{FileUtil#createJarWithClassPath}} would fail with {{NullPointerException}}, because the test's application master submission didn't include a classpath.  I've added a null check so that {{ContainerLaunch#sanitizeEnv}} won't attempt to set a classpath when the container launch isn't providing one.  The other problem was that the test used the Unix sleep command.  I've added logic to check for Windows and then simulate sleep using ping.

I verified that the test passes on Mac and Windows with this patch., This patch may cause a merge conflict with my patch on MAPREDUCE-4987, depending on which one gets committed first.  After one of these gets committed, I'll check and rebase if necessary., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12574365/YARN-488.1.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 tests included appear to have a timeout.{color}

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/540//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/540//console

This message is automatically generated., +1

Verified on Windows and OSX., {code}
if (inputClassPath != null)
{code}

Does it make sense to change to:

{code}
if (inputClassPath != null && !inputClassPath.isEmpty())
{code}
, Thanks, Hitesh.  AFAIK, there is no significant difference between no classpath and an empty classpath, so I do think it's correct to change the condition to check for empty string.  Here is a new patch that does that., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12574718/YARN-488.2.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 tests included appear to have a timeout.{color}

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/553//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/553//console

This message is automatically generated., +1. Will commit shortly. , Thanks Chris. Committed to trunk., Integrated in Hadoop-trunk-Commit #3501 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/3501/])
    YARN-488. TestContainerManagerSecurity fails on Windows. Contributed by Chris Nauroth. (Revision 1459514)

     Result = SUCCESS
hitesh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1459514
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests/src/test/java/org/apache/hadoop/yarn/server/TestContainerManagerSecurity.java
, Integrated in Hadoop-Yarn-trunk #163 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/163/])
    YARN-488. TestContainerManagerSecurity fails on Windows. Contributed by Chris Nauroth. (Revision 1459514)

     Result = FAILURE
hitesh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1459514
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests/src/test/java/org/apache/hadoop/yarn/server/TestContainerManagerSecurity.java
, Integrated in Hadoop-Hdfs-trunk #1352 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1352/])
    YARN-488. TestContainerManagerSecurity fails on Windows. Contributed by Chris Nauroth. (Revision 1459514)

     Result = FAILURE
hitesh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1459514
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests/src/test/java/org/apache/hadoop/yarn/server/TestContainerManagerSecurity.java
, Integrated in Hadoop-Mapreduce-trunk #1380 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1380/])
    YARN-488. TestContainerManagerSecurity fails on Windows. Contributed by Chris Nauroth. (Revision 1459514)

     Result = SUCCESS
hitesh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1459514
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests/src/test/java/org/apache/hadoop/yarn/server/TestContainerManagerSecurity.java
, Merged the patch to branch-2.]