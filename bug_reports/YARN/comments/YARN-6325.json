[[~jhung], 

bq. Disallow ParentQueues and LeafQueues to have the same queue name. (this breaks compatibility)
I think this this is the current behavior, we don't allow parent/leaf queue have the same name. Have you verified that existing CS supports two queues to have the same name? , Hi [~leftnoteasy], I started the RM with the attached configuration on current trunk, the RM started successfully with the attached scheduler UI. Let me know if I am missing something., Thanks [~jhung], 

Actually this is added since a very early patch, see MAPREDUCE-3147.

I think this is a bug: since we store both of leaf queue / parent queue in a Map with key of queue name. multiple queues with same name can definitely cause some issues, like CapacityScheduler#getQueueInfo. 

[~vinodkv], [~jlowe], do you think we should enforce this? Did we intentionally allow leaf/parent queue with the same name?, I don't have the full backstory on queue name requirements, but I agree it seems like a bug given the ambiguity in some APIs.  However since most of the user-facing APIs are only used for leaf queues, I can see how the parent/leaf conflict potential was missed.  Most of the APIs are only used for leaf queues since that's where the apps actually run.

I do worry that if we suddenly enforce something we didn't before that we would break some user's long-standing setup.  Seems like something we should fix for 3.x going forward, but not sure it's worth the compatibility risk in 2.x.  Thoughts?, [~jlowe] thanks for jumping in. I agree that client operations directly on parent queue is limited. However, since we have some APIs like ApplicationClientProtocol#getQueueInfo, and this cause some features cannot work, such as user-queue mapping. Instead of fixing this in trunk only, I prefer to have this fix in branch-2 as well.]