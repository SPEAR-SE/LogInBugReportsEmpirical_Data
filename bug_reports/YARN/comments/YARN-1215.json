[Attach a patch. Instead of modifying the URL class, I changed the {{getYarnUrlFromURI()}} method to set userinfo as part of the URL host. A unit test is also included to verify the desired behavior., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12603926/YARN-1215-trunk.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/1964//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/1964//console

This message is automatically generated., Looks good to me overall. But I think the best fix is to add a userInfo field for org.apache.hadoop.yarn.api.records.URL., Attach a new patch that adds a userInfo field for org.apache.hadoop.yarn.api.records.URL. This appends an optional filed to existing .proto file. This is allowed according to compatibility guide at:
http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/Compatibility.html#Wire_compatibility, {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12604945/YARN-1215-trunk.2.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/2011//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/2011//console

This message is automatically generated., Do we need a PB for URL. Can we not serialize URL as a string?, Thanks for the suggestion!

>Do we need a PB for URL. Can we not serialize URL as a string?
URLProto already exists and is used in LocalResourceProto message in yarn_protos.proto
I don't want to break the wire compatibility because .proto files are already marked stable in HADOOP-9619.
The current approach should cover most uses cases from my read of Java URL API below.
http://docs.oracle.com/javase/7/docs/api/java/net/URL.html, Looks good to me. To be safe about any assumptions, can we please run all YARN and MR unit tests manually. Jenkins does not run all of them., Sure. I will run unit tests locally to verify., +1
Looks good to me., I have following test failures in my full test run. None of them seems a regression, i.e. I have the same failures with or without the patch.

Yarn:
{noformat}
TestRMDelegationTokens.testRMDTMasterKeyStateOnRollingMasterKey:114 null
TestFairScheduler.testSimpleFairShareCalculation:385 expected:<3414> but was:<0>
TestDiskFailures.testLocalDirsFailures:99->testDirsFailures:179->verifyDisksHealth:247 Â» NoSuchElement
TestContainerManagerSecurity.testContainerManager:113->testNMTokens:222 Â» IllegalArgument
TestContainerManagerSecurity.testContainerManager:113->testNMTokens:222 Â» IllegalArgument
TestNMClient.testNMClientNoCleanupOnStop:199->allocateContainers:233 Â» IndexOutOfBounds
{noformat}

Mapred:
{noformat}
TestFetchFailure.testFetchFailureMultipleReduces:332 expected:<SUCCEEDED> but was:<SCHEDULED>
TestMRApp.testUpdatedNodes:258 Expecting 2 more completion events for killed expected:<4> but was:<3>
TestCommitterEventHandler.testBasic:263 null
TestMiniMRClientCluster.testRestart:146 Address before restart: chuanliu101:0 is different from new address: chuanliu101:53368 expected:<chuanliu101:[0]> but was:<chuanliu101:[53368]>
TestClusterMRNotification>NotificationTestCase.testMR:163 expected:<2> but was:<0>
TestJobListCache.testAddExisting:39 Â»  test timed out after 1000 milliseconds
TestLocalMRNotification>NotificationTestCase.testMR:178 Â» IO Job cleanup didn'...
TestMRJobsWithHistoryService.testJobHistoryData:153 Â» IO java.net.ConnectExcep...
{noformat}, Hmm.OK. Lets take the patch then. +1., +1 for the patch.  I'll commit this., I have committed this to trunk, branch-2, and branch-2.1-beta.  Chuan, thank you for the patch.  Thanks also to Shanyu and Bikas for additional code reviews., SUCCESS: Integrated in Hadoop-trunk-Commit #4506 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/4506/])
YARN-1215. Yarn URL should include userinfo. Contributed by Chuan Liu. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1528233)
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/api/records/URL.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/proto/yarn_protos.proto
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/api/records/impl/pb/URLPBImpl.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/util/ConverterUtils.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/test/java/org/apache/hadoop/yarn/util/TestConverterUtils.java
, SUCCESS: Integrated in Hadoop-trunk-Commit #4507 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/4507/])
YARN-1215. Correct CHANGES.txt. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1528239)
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Yarn-trunk #350 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/350/])
YARN-1215. Correct CHANGES.txt. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1528239)
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
YARN-1215. Yarn URL should include userinfo. Contributed by Chuan Liu. (cnauroth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1528233)
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/java/org/apache/hadoop/yarn/api/records/URL.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-api/src/main/proto/yarn_protos.proto
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/api/records/impl/pb/URLPBImpl.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/util/ConverterUtils.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/test/java/org/apache/hadoop/yarn/util/TestConverterUtils.java
, Closing old tickets that are already shipped in a release.]