[Today, RMAuthenticationFilterInitializer is always added in non-secure mode. The proposal is to always add RMAuthenticationFilterInitializer too in secure mode so that if "http.authentication.type" is 'simple' , user can pass the "user.name" to indicate the incoming user name., Uploaded a patch to always add the RMAuthenticationFilterInitializer/AuthenticationFilterInitializer in secure mode. , bq. "http.authentication.type" is 'simple' in secure mode

This is a misconfiguration, plain and simple., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  16m  3s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   7m 35s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |   9m 32s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   0m 45s | The applied patch generated  4 new checkstyle issues (total was 53, now 50). |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 34s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m 24s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:red}-1{color} | yarn tests |  50m 43s | Tests failed in hadoop-yarn-server-resourcemanager. |
| | |  88m 36s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.yarn.server.resourcemanager.TestResourceManager |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12741987/YARN-3855.1.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / aa5b15b |
| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/8352/artifact/patchprocess/diffcheckstylehadoop-yarn-server-resourcemanager.txt |
| hadoop-yarn-server-resourcemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/8352/artifact/patchprocess/testrun_hadoop-yarn-server-resourcemanager.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8352/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8352/console |


This message was automatically generated., bq. This is a misconfiguration, plain and simple.
we do see some use cases that people want their cluster secure but not the web UI. people do not bother doing kinit before launching the browser. If cluster is setup in this particular way which is by default, there's no way to browse the applications other than restarting the daemon and change configs which is too inconvenient. Given that the filter is already always added in non-secure mode, I think it's fine to add the filter when http is simple, which is what ATS is currently doing., bq. we do see some use cases that people want their cluster secure but not the web UI.

Just because people want it, doesn't mean it's a valid configuration.   By enabling insecure browsing on the YARN UI on a secure cluster with ACL management setup, you've essentially opened up a security hole.

bq. which is what ATS is currently doing.

Then ATS also has a security hole., I believe what you suggested is a general good practice to setup secure cluster. Btw, the patch did not enable/enforce any of this. People can config whatever they want for the http authentication regardless how the rest components are setup before this jira. The point of this jira is to prevent this scenario that user cannot view any application (even for its own application) in whatever way unless the daemon is restarted., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  16m 35s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   7m 26s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |   9m 34s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 20s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   1m 10s | The applied patch generated  5 new checkstyle issues (total was 53, now 51). |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 31s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   2m 11s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | mapreduce tests |   5m 44s | Tests passed in hadoop-mapreduce-client-hs. |
| {color:green}+1{color} | yarn tests |  50m 34s | Tests passed in hadoop-yarn-server-resourcemanager. |
| | |  95m 41s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12742043/YARN-3855.2.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 8ef07f7 |
| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/8354/artifact/patchprocess/diffcheckstylehadoop-yarn-server-resourcemanager.txt |
| hadoop-mapreduce-client-hs test log | https://builds.apache.org/job/PreCommit-YARN-Build/8354/artifact/patchprocess/testrun_hadoop-mapreduce-client-hs.txt |
| hadoop-yarn-server-resourcemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/8354/artifact/patchprocess/testrun_hadoop-yarn-server-resourcemanager.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8354/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf907.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8354/console |


This message was automatically generated.]