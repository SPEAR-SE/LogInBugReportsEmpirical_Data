[fixed reported case and also removed compiler warning in while loop., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12619450/nodemgr-sysconf.txt
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/2698//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/2698//console

This message is automatically generated., [~hsn], thank you for raising this issue and submitting the patch.

With the recent changes to the Apache build, I'm pretty sure that patches should take the form of {{YARN-1519.002.patch}}, especially the {{.patch}} so that it will kick the build.

I have taken the liberty of upmerging the patch and running {{test-patch.sh}} against it. All is fine except that there are no unit tests. In order to test this patch effectively, one would have to cause {{sysconf(_SC_GETPW_R_SIZE_MAX)}} to return -1, and I can't think of a way to do that without creating a custom {{sysconf()}} object, creating its own share library, and putting that in LD_LIBRARY_PATH ahead of {{libc}}. Can you think of a better way to test this? Otherwise, I would suggest to leave the patch as it is.

+1, by the way (non-binding), Nitpick: We don't set an upper limit for something we are going to malloc. Earlier it was atleast limited to INT_MAX. Now its LONG_MAX. I'd rather keep typecasting the long to int.
Otherwise +1. Please change that and I'm happy to commit, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |   5m 13s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   7m 32s | There were no new javac warning messages. |
| {color:green}+1{color} | release audit |   0m 20s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 36s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | yarn tests |   6m  0s | Tests passed in hadoop-yarn-server-nodemanager. |
| | |  21m 17s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12731625/YARN-1519.002.patch |
| Optional Tests | javac unit |
| git revision | trunk / 6471d18 |
| hadoop-yarn-server-nodemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/7837/artifact/patchprocess/testrun_hadoop-yarn-server-nodemanager.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/7837/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/7837/console |


This message was automatically generated., Hi [~raviprak]. Thank you for reviewing this issue.
{quote}
Nitpick: We don't set an upper limit for something we are going to malloc. Earlier it was atleast limited to INT_MAX. Now its LONG_MAX. I'd rather keep typecasting the long to int.
{quote}
[~hsn], do you want to make that change or should I?, [~hsn], since I didn't hear back, I will go ahead and post the patch with the changes suggested by [~raviprak]. Thanks again for doing all of the work and testing on this patch.

[~raviprak], will you please have a look? Thanks.
, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |   5m 14s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   7m 29s | There were no new javac warning messages. |
| {color:green}+1{color} | release audit |   0m 22s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 34s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | yarn tests |   6m  9s | Tests passed in hadoop-yarn-server-nodemanager. |
| | |  21m 23s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12732710/YARN-1519.003.patch |
| Optional Tests | javac unit |
| git revision | trunk / 281d47a |
| hadoop-yarn-server-nodemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/7928/artifact/patchprocess/testrun_hadoop-yarn-server-nodemanager.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/7928/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf906.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/7928/console |


This message was automatically generated., Thanks for the patch Eric and Radim. +1. lgtm. Will check in shortly, I've committed the patch to branch-2 and trunk. Thanks Eric and Radim, FAILURE: Integrated in Hadoop-trunk-Commit #7835 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/7835/])
YARN-1519. Check in container-executor if sysconf is implemented before using it (Radim Kolar and Eric Payne via raviprak) (raviprak: rev 53fe4eff09fdaeed75a8cad3a26156bf963a8d37)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/container-executor.c
, SUCCESS: Integrated in Hadoop-Yarn-trunk #928 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/928/])
YARN-1519. Check in container-executor if sysconf is implemented before using it (Radim Kolar and Eric Payne via raviprak) (raviprak: rev 53fe4eff09fdaeed75a8cad3a26156bf963a8d37)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/container-executor.c
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #197 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/197/])
YARN-1519. Check in container-executor if sysconf is implemented before using it (Radim Kolar and Eric Payne via raviprak) (raviprak: rev 53fe4eff09fdaeed75a8cad3a26156bf963a8d37)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/container-executor.c
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2126 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2126/])
YARN-1519. Check in container-executor if sysconf is implemented before using it (Radim Kolar and Eric Payne via raviprak) (raviprak: rev 53fe4eff09fdaeed75a8cad3a26156bf963a8d37)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/container-executor.c
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #186 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/186/])
YARN-1519. Check in container-executor if sysconf is implemented before using it (Radim Kolar and Eric Payne via raviprak) (raviprak: rev 53fe4eff09fdaeed75a8cad3a26156bf963a8d37)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/container-executor.c
, SUCCESS: Integrated in Hadoop-Mapreduce-trunk-Java8 #196 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/196/])
YARN-1519. Check in container-executor if sysconf is implemented before using it (Radim Kolar and Eric Payne via raviprak) (raviprak: rev 53fe4eff09fdaeed75a8cad3a26156bf963a8d37)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/container-executor.c
, SUCCESS: Integrated in Hadoop-Mapreduce-trunk #2144 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2144/])
YARN-1519. Check in container-executor if sysconf is implemented before using it (Radim Kolar and Eric Payne via raviprak) (raviprak: rev 53fe4eff09fdaeed75a8cad3a26156bf963a8d37)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/container-executor.c
* hadoop-yarn-project/CHANGES.txt
]