[AFAIK, YARN won't change the permissions on the work dirs when you switch modes.  The assumption is the ops folks/tools will handle this as part of the transition.

amabari-qa's dir changing seems to be more related to something else (are these machines being managed via ambari and, like a naughty child, ambari is putting these where they don't belong?) given that you didn't say that a job belonging to the user ambari-qa job was run..., Yes this cluster is being manager by Ambari, and yes there were jobs belonging to the user ambari-qa ran before and after enabling Kerberos.

Given what you said, it sounds like the fix for this issue is just changing the ownersip on these usercache directories and the directories/files within to the appropriate user., Yeah. In general when switching from non-K to K, people move to LinuxContainerExecutor first.  When they do that, a general going over of all permissions is done first since things like temp dirs tend to require rwx+sticky.  LCE is what is almost certainly forcing the permissions failures in your jobs., So, this is probably a bug in Ambari, really., Okay, thanks for the responses. I've  created AMBARI-12402 for this issue (I don't think I have the permissions to move this issue to the Ambari project).]