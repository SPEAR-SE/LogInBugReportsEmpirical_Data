[cc :/ [~jlowe], Even though scenario is very rare to happen, thinking one step ahead which would affect applications with large number of containers.
Thoughts.??, Sorry for missing this earlier.  As I mentioned on YARN-5193, log aggregation originally aggregated logs for containers as they finished.  The main issue with aggregating as containers complete is the additional load on the namenode.  See YARN-219.  Our large clusters were getting swamped with lease renewal load until that was changed.  We might be able to work around it with append operations, but it can be very problematic to simply have the NM hold the aggregated log file open until the app completes., bq. The main issue with aggregating as containers complete is the additional load on the namenode
Right, this is major issue in large cluster.

Since log rolling is supported I think it is worth to delete aggregated completed container log folders when log rolling is enabled.  Any potential issues with it. Thoughts?, Sorry for the delay in responding.  I think we can make deletion of aggregated completed container logs when log rolling is enabled.  Only issue I can think of would be potential problems around NM restart to make sure we don't accidentally clobber an existing aggregated log when recovering with the (now incorrect) assumption that we can simply re-aggregate the completed container's logs.

[~xgong] and [~vinodkv] may have some other insights and comments on this proposal as well., Thanks Jason for your inputs. Let me create version-0 patch initially.]