[bq. addToLocalResources() writes resources, null in the above case, through DataOutputStream#writeUTF().
This is a valid point. But, in reality,  the addToLocalResources won't be called if resources==null.   
close this]