[To solve this problem, how about to clear partitionToUnderServedQueues in the front of PreemptableResourceCalculator#computeIdealAllocation which will update partitionToUnderServedQueues later ? cc: [~cheersyang], [~sunil.g], [~leftnoteasy], [~Tao Yang], thanks for raising this issue and suggesting a fix:
{quote}To solve this problem, how about to clear partitionToUnderServedQueues in the front of PreemptableResourceCalculator#computeIdealAllocation which will update partitionToUnderServedQueues later ?
{quote}
It is true that {{partitionToUnderServedQueues}} needs to be cleared before every preemption interval. However, {{PreemptableResourceCalculator#computeIdealAllocation}} is not called by all selection policies ({{IntraQueueCandidatesSelector}} doesn't call it). So, I would suggest that {{partitionToUnderServedQueues}} should be cleared at the beginning of {{ProportionalCapacityPreemptionPolicy#containerBasedPreemptOrKill}} (or, at least before the loop where the PreemptionCandidatesSelectors are called)., Thanks [~Tao Yang] for raising this issue.

Yes, I agree with [~eepayne]. I think its better we clear partitionToUnderServedQueues before PreemptionCandidatesSelectors are called., Thanks [~eepayne], [~sunilg] for your suggestion!
It makes sense to me, I will upload a patch later., Attached v1 patch for review.

[~eepayne], [~sunilg], please help to review in your free time.

Thanks!, LGTM, changing to PA]