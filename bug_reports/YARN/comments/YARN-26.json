[The issue occurs because new queue instances are created and registered with the metrics system during the first refreshQueues before the exception is thrown.  The new queue instances are discarded due to the bad configuration, but they are left registered with the metrics system.  When the refreshQueues occurs the second time it creates new queue instances again, since the old ones were discarded.  When the new instances try to register with the metrics system, the metrics system sees a duplicate registration, throws an exception, and spoils the refreshQueues.

We need to deregister any newly created queue instances from the metrics system when recovering from a bad configuration., The same to MAPREDUCE-3763.Any updates here?, Duplicate of MAPREDUCE-3763, I moved MAPREDUCE-3763 over as YARN-27.]