[Hi [~maysamyabandeh] did you see this issue by code walk through? or you faced this in your cluster? related YARN-957 ?, Hi [~ojoshi]. I am observing the problem with a unit test using MiniYarnCluster. The explanation however is based solely on code walk through. I did not submit the test case since the problem did not always show up--due to the non-determinism in MiniYarnCluster.

Anyway, I see that you have already covered that in the objectives of YARN-957:

| Say 2048MB is reserved on nm1 but nm2 comes back with 2048MB available memory. In this case if the original request was made without any locality then scheduler should unreserve memory on nm1 and allocate requested 2048MB container on nm2.
, if it is similar then we can close it as duplicate.. can you try patch YARN-957 locally and see if it fixes your problem too?? thanks., I am attaching a unit test that shows the problem., [~ojoshi], I applied the latest patch of YARN-957 and it makes the unit test pass. So, I guess we can close this jira since YARN-957 is already taking care of it.

I also attached the new unit test just for the record. I also updated the jira description based on the scenario in which the unit test fails.

, Thanks [~maysamyabandeh] . Will close it as a duplicate.]