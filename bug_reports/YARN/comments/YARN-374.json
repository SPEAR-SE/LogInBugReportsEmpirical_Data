[The difference between bin/yarn and bin/mapred is that one use clientRMProtocol sending request to RM and the other use MRClientProtocol sending request to AM., At a high level the job history server is currently a mapreduce specific component.  So this behavior is currently expected.  yarn/RM doesn't know about any history server, so if you force kill something through the RM it has no knowledge on how to handle the history, it simply force kills the application. There is another jira that is looking at making the history server generic that would help with this issue - see YARN-321, Yes perhaps this should be a documentation change, at least for the time being. , Thanks for the information.
But why not have one more API like gracefullyKillApplication(or just change force kill's behavior).
With this method,RM will ask AM to kill the app itself,
a force kill will be triggered if AM haven't killed itself during some period., Agree that YARN-321 will help., Given we already have generic history server (now is timeline server) which will track YARN applications that get killed, I will resolve this issue.]