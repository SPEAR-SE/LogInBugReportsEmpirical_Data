[Seems some changes in the fair scheduler configuration part. YARN-1270 was created to solve the TestSLSRunner problem., FairSchedulerConfiguration.getAllocationFile() should read the value for yarn.scheduler.fair.allocation.file config entry and open that for the return value.

Is that what you were planning in YARN-1270 ?, Don't figure out the plan yet. 

Before, the fair scheduler can figure out the allocation file, but currently it fails. I remember Sandy discussed to improve the fair scheduler configuration in some jiras, which may cause the TestSLSRunner failed. I'll figure it out around today or tmr., This is occurring because of YARN-1228. It used to be that fair-scheduler.xml could house either hadoop-style configuration properties (e.g. for yarn.scheduler.fair.assignmultiple) or the fair scheduler allocations configuration.  We changed it to only allow the latter, but ./hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler.xml does the former.  We'll need to move the properties in it either into a yarn-site.xml or into the code.

Updated the title of the JIRA to reflect this., Patch v1 moves the contents of hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler.xml into hadoop-tools/hadoop-sls/src/test/resources/yarn-site.xml and contents of src/test/resources/fair-scheduler-allocation.xml into src/test/resources/fair-scheduler.xml

TestSLSRunner passes locally.

Please review., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12608035/yarn-1300-v1.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-tools/hadoop-sls.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/2166//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/2166//console

This message is automatically generated., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12608042/yarn-1300-v2.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-tools/hadoop-sls.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/2167//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/2167//console

This message is automatically generated., Thanks for the patch.  If we're going to be moving the allocations properties to fair-scheduler.xml, we should be deleting fair-scheduler-allocations.xml, right?  Also, because fair-scheduler.xml is in src/test/resources, it should end up on the classpath, so should be able to take out
{code}

  <property>
    <description>Absolute path to allocation file. An allocation file is an XML
    manifest describing queues and their properties, in addition to certain
    policy defaults. This file must be in XML format as described in
    http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/FairScheduler.html.
    </description>
    <name>yarn.scheduler.fair.allocation.file</name>
    <value>src/test/resources/fair-scheduler-allocation.xml</value>
  </property>
{code}, Patch v3 addresses review comments., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12608072/yarn-1300-v3.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 3 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-tools/hadoop-sls.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/2168//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/2168//console

This message is automatically generated., +1, SUCCESS: Integrated in Hadoop-trunk-Commit #4586 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/4586/])
YARN-1300. SLS tests fail because conf puts YARN properties in fair-scheduler.xml (Ted Yu via Sandy Ryza) (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531423)
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler-allocation.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/yarn-site.xml
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
, I just committed this to trunk and branch-2, SUCCESS: Integrated in Hadoop-trunk-Commit #4587 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/4587/])
Delete fair-scheduler-allocation.xml for YARN-1300 (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531425)
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler-allocation.xml
, SUCCESS: Integrated in Hadoop-Yarn-trunk #360 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/360/])
Delete fair-scheduler-allocation.xml for YARN-1300 (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531425)
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler-allocation.xml
YARN-1300. SLS tests fail because conf puts YARN properties in fair-scheduler.xml (Ted Yu via Sandy Ryza) (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531423)
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler-allocation.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/yarn-site.xml
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk #1550 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1550/])
Delete fair-scheduler-allocation.xml for YARN-1300 (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531425)
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler-allocation.xml
YARN-1300. SLS tests fail because conf puts YARN properties in fair-scheduler.xml (Ted Yu via Sandy Ryza) (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531423)
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler-allocation.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/yarn-site.xml
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1576 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1576/])
Delete fair-scheduler-allocation.xml for YARN-1300 (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531425)
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler-allocation.xml
YARN-1300. SLS tests fail because conf puts YARN properties in fair-scheduler.xml (Ted Yu via Sandy Ryza) (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531423)
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler-allocation.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/fair-scheduler.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-sls/src/test/resources/yarn-site.xml
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
]