[If you're not using RM HA, I wouldn't necessarily expect this to work. But, regardless, this sounds like a YARN issue, so moving the JIRA to that project., [~prophy999] if you are running 2.0.5-alpha, to test RM restart, after you submit the job, you need to manually ctrl-c the command line after you see the message saying job is submitted, since MR will clean up the staging dir if RM is not available.
this problem has been fixed in YARN-513., This looks more like a MAPREDUCE issue to me.  The MR AM is removing the staging directory when it shouldn't.  As [~jianhe] noted, this is probably fixed by YARN-513 / MAPREDUCE-5398 or it could be a duplicate of YARN-917., Jian He i have tryed the patch file in the YARN-513 list,but some error occur when i use the patch. my test version is hadoop2.0.5-alpha,so can this patch work with this version? thank you.]