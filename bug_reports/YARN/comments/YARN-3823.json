[Initial version.  Assume YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES needs to be increased from 4 to 32., Submit for testing, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  16m 45s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   8m  7s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  11m 50s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 27s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   1m 15s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   2m  9s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 41s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m 47s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | yarn tests |   0m 24s | Tests passed in hadoop-yarn-api. |
| | |  43m 29s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12742621/YARN-3823.001.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 8e33372 |
| hadoop-yarn-api test log | https://builds.apache.org/job/PreCommit-YARN-Build/8380/artifact/patchprocess/testrun_hadoop-yarn-api.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8380/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf904.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8380/console |


This message was automatically generated., RE: No new tests

The unit test is in a different JIRA.  HADOOP-12101 actually detects this mismatch., [~rchiang], Your change makes sense to me.

YARN-193 added this config with the default value as 32 in both of the places, Did you find any jira which changed value from 32 to 4 in YarnConfiguration.java?, I see this for YARN-193, using "git blame bc6777dd5bdcbaef09897b506bc6511ae456033d"

-  public static final String RM_SCHEDULER_MAXIMUM_ALLOCATION_CORES =
+  public static final String RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES =
       YARN_PREFIX + "scheduler.maximum-allocation-vcores";
-  public static final int DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_CORES = 32;
+  public static final int DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES = 4;

which looks like moving from 32 to 4 in YarnConfiguration.java while renaming _CORES to _VCORES.

I'm not sure if the intended semantics changed during this property rename.  [~zjshen], [~vinodkv] do either of you have any comment on this?, Hm... I think we forgot changing the default in the config file from 32 to 4. Compared to 8GB default max mem, 32 vcores are too big to be a reasonable machine. See the comment:

https://issues.apache.org/jira/browse/YARN-193?focusedCommentId=13621073&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13621073, That makes sense.  I'll update yarn-default.xml to match YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES then.  Thanks!, - Adjust yarn.scheduler.maximum-allocation-vcores to 4 in yarn-default.xml to match YarnConfiguration, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  14m 58s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   7m 38s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |   9m 37s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 33s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | yarn tests |   1m 57s | Tests passed in hadoop-yarn-common. |
| | |  36m 41s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12742911/YARN-3823.002.patch |
| Optional Tests | javadoc javac unit |
| git revision | trunk / 147e020 |
| hadoop-yarn-common test log | https://builds.apache.org/job/PreCommit-YARN-Build/8394/artifact/patchprocess/testrun_hadoop-yarn-common.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8394/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf901.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8394/console |


This message was automatically generated., RE: No new unit test

Same as before.  The unit test is in a different JIRA. HADOOP-12101 actually detects this mismatch., Thanks [~zjshen] for confirmation.

+1 for the latest patch. , Thanks [~rchiang] for the patch.

Committed to trunk and branch-2., SUCCESS: Integrated in Hadoop-trunk-Commit #8104 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8104/])
YARN-3823. Fix mismatch in default values for (devaraj: rev 7405c59799ed1b8ad1a7c6f1b18fabf49d0b92b2)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml
* hadoop-yarn-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Yarn-trunk #975 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/975/])
YARN-3823. Fix mismatch in default values for (devaraj: rev 7405c59799ed1b8ad1a7c6f1b18fabf49d0b92b2)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml
* hadoop-yarn-project/CHANGES.txt
, SUCCESS: Integrated in Hadoop-Yarn-trunk-Java8 #245 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/245/])
YARN-3823. Fix mismatch in default values for (devaraj: rev 7405c59799ed1b8ad1a7c6f1b18fabf49d0b92b2)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2172 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2172/])
YARN-3823. Fix mismatch in default values for (devaraj: rev 7405c59799ed1b8ad1a7c6f1b18fabf49d0b92b2)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #233 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/233/])
YARN-3823. Fix mismatch in default values for (devaraj: rev 7405c59799ed1b8ad1a7c6f1b18fabf49d0b92b2)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml
* hadoop-yarn-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2191 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2191/])
YARN-3823. Fix mismatch in default values for (devaraj: rev 7405c59799ed1b8ad1a7c6f1b18fabf49d0b92b2)
* hadoop-yarn-project/CHANGES.txt
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml
, SUCCESS: Integrated in Hadoop-Mapreduce-trunk-Java8 #243 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/243/])
YARN-3823. Fix mismatch in default values for (devaraj: rev 7405c59799ed1b8ad1a7c6f1b18fabf49d0b92b2)
* hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml
* hadoop-yarn-project/CHANGES.txt
, Double thanks for the info., Thanks for the review and commit!]