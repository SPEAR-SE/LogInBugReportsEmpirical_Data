[I found the following log:
{code}
2014-04-04 05:08:01,361 INFO  containermanager.ContainerManagerImpl (ContainerManagerImpl.java:getContainerStatusInternal(785)) - Returning ContainerStatus: [ContainerId: container_1396613275302_0001_01_000004, State: RUNNING, Diagnostics: , ExitStatus: -1000, ]
2014-04-04 05:08:01,365 INFO  containermanager.ContainerManagerImpl (ContainerManagerImpl.java:stopContainerInternal(718)) - Stopping container with container Id: container_1396613275302_0001_01_000004
2014-04-04 05:08:01,366 INFO  nodemanager.NMAuditLogger (NMAuditLogger.java:logSuccess(89)) - USER=jenkins	IP=10.79.62.28	OPERATION=Stop Container Request	TARGET=ContainerManageImpl	RESULT=SUCCESS	APPID=application_1396613275302_0001	CONTAINERID=container_1396613275302_0001_01_000004
2014-04-04 05:08:01,387 INFO  monitor.ContainersMonitorImpl (ContainersMonitorImpl.java:isEnabled(169)) - Neither virutal-memory nor physical-memory monitoring is needed. Not running the monitor-thread
2014-04-04 05:08:01,387 INFO  containermanager.AuxServices (AuxServices.java:handle(175)) - Got event CONTAINER_STOP for appId application_1396613275302_0001
2014-04-04 05:08:01,389 INFO  application.Application (ApplicationImpl.java:transition(296)) - Adding container_1396613275302_0001_01_000004 to application application_1396613275302_0001
2014-04-04 05:08:01,389 INFO  nodemanager.NMAuditLogger (NMAuditLogger.java:logSuccess(89)) - USER=jenkins	OPERATION=Container Finished - Killed	TARGET=ContainerImpl	RESULT=SUCCESS	APPID=application_1396613275302_0001	CONTAINERID=container_1396613275302_0001_01_000004
2014-04-04 05:08:01,389 INFO  container.Container (ContainerImpl.java:handle(884)) - Container container_1396613275302_0001_01_000004 transitioned from NEW to DONE
2014-04-04 05:08:01,389 INFO  application.Application (ApplicationImpl.java:transition(339)) - Removing container_1396613275302_0001_01_000004 from application application_1396613275302_0001
2014-04-04 05:08:01,390 INFO  util.ProcfsBasedProcessTree (ProcfsBasedProcessTree.java:isAvailable(182)) - ProcfsBasedProcessTree currently is supported only on Linux.
2014-04-04 05:08:01,392 INFO  rmcontainer.RMContainerImpl (RMContainerImpl.java:handle(321)) - container_1396613275302_0001_01_000004 Container Transitioned from ACQUIRED to RUNNING
2014-04-04 05:08:01,393 INFO  containermanager.ContainerManagerImpl (ContainerManagerImpl.java:getContainerStatusInternal(771)) - Getting container-status for container_1396613275302_0001_01_000004
2014-04-04 05:08:01,393 INFO  containermanager.ContainerManagerImpl (ContainerManagerImpl.java:getContainerStatusInternal(785)) - Returning ContainerStatus: [ContainerId: container_1396613275302_0001_01_000004, State: COMPLETE, Diagnostics: , ExitStatus: -1000, ]
{code}

When the kill event is received, the container is still at NEW, it is moved to DONE by going through ContainerDoneTransition, which won't set the killing related exitcode and diagnostics., I did more investigation. Instead of a test failure, it sound more like a bug on container life cycle to me:

1. If a container is killed on NEW, the exit code and diagnostics will never be set.
2. If a container is killed on LOCALIZING, the exit code will never be set., Upload a patch to fix these issues, {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12638788/YARN-1903.1.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/3513//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/3513//console

This message is automatically generated., +1 LGTM

Also, I run the TestNMClient with this patch applied on Windows several times. All of them are passed., +1, patch looks good., Looks good, one more suggestion, since the process is never started, we can add one more diagnostics to clarify that this is a not started container process., Thanks for review! Patch is updated., +1, will commit once Jenkins returns., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12639694/YARN-1903.2.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/3553//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/3553//console

This message is automatically generated., SUCCESS: Integrated in Hadoop-trunk-Commit #5494 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5494/])
YARN-1903. Set exit code and diagnostics when container is killed at NEW/LOCALIZING state. Contributed by Zhijie Shen (jianhe: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1586522)
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/test/java/org/apache/hadoop/yarn/client/api/impl/TestNMClient.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/TestContainer.java
, Committed to trunk, branch-2 and branch-2.4. Thanks Zhijie!, SUCCESS: Integrated in Hadoop-Yarn-trunk #537 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/537/])
YARN-1903. Set exit code and diagnostics when container is killed at NEW/LOCALIZING state. Contributed by Zhijie Shen (jianhe: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1586522)
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/test/java/org/apache/hadoop/yarn/client/api/impl/TestNMClient.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/TestContainer.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #1729 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1729/])
YARN-1903. Set exit code and diagnostics when container is killed at NEW/LOCALIZING state. Contributed by Zhijie Shen (jianhe: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1586522)
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/test/java/org/apache/hadoop/yarn/client/api/impl/TestNMClient.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/TestContainer.java
, SUCCESS: Integrated in Hadoop-Mapreduce-trunk #1754 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1754/])
YARN-1903. Set exit code and diagnostics when container is killed at NEW/LOCALIZING state. Contributed by Zhijie Shen (jianhe: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1586522)
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/test/java/org/apache/hadoop/yarn/client/api/impl/TestNMClient.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/TestContainer.java
]