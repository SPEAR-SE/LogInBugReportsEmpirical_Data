[The affect version is set to 2.7.1. So is this a bug related to DockerContainerExecutor? DockerContainerExecutor has been deprecated in 2.9 and removed in 3.0. If this is a problem with DockerLinuxContainerRuntime, then the affect version shouldn't be set to 2.7.1. , [~ebadger] 
Yes, you are right. I changed affects versions to 2.8.0. 
In fact, our company's hadoop version is 2.7.1, we add the feature of docker mode in linuxcontainere to our version. , Writing the pid out to a file also suffers from this issue. If a container is immediately requested to stop, the pid file is not yet available, and thus the container can leak. I'll also note that with Docker's live restore feature we need to eliminate the use of {{docker wait}} completely as this breaks when Docker is restarted. Improving container lifecycle management is a high priority that I expect to be able to revisit soon now that YARN-6623 is wrapping up. See YARN-5366, YARN-5818, and YARN-6305 for additional items I've noticed on this topic., Pushing it out from 2.9.0 as it's still unassigned and we are nearing 2.9 code freeze. Feel free to revert if required., I believe this is now resolved with the changes added by YARN-5366. We no longer call {{docker rm}} prior to writing the exit code and no longer depend on {{docker wait}}. Closing this for now, but please reopen if you see this after applying that patch.]