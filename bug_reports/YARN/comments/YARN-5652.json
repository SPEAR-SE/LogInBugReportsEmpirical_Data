[Looks closely related to YARN-4893 and YARN-5318.  YARN-4893 added a drainEvents to MockRM's registerNode, but in this case the test is calling MockNM's registerNode method which appears to have no corresponding drainEvents invocation.]