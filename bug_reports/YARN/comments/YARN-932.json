[{code}
org.apache.hadoop.yarn.YarnException: ${yarn.log.dir}/userlogs is not a valid path. Path should be with file scheme or without scheme
	at org.apache.hadoop.yarn.server.nodemanager.LocalDirsHandlerService.validatePaths(LocalDirsHandlerService.java:321)
	at org.apache.hadoop.yarn.server.nodemanager.LocalDirsHandlerService$MonitoringTimerTask.<init>(LocalDirsHandlerService.java:95)
	at org.apache.hadoop.yarn.server.nodemanager.LocalDirsHandlerService.init(LocalDirsHandlerService.java:123)
	at org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.TestResourceLocalizationService.testLocalizationInit(TestResourceLocalizationService.java:144)
        ... reflection ... junit ... bobloblaw
{code}, The fix is trivial - set the log_dir in testLocalizationInit explicitly.

Verified the fix works by moving the test to the end using JDK6. , {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12593996/yarn-932-1.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/1573//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/1573//console

This message is automatically generated., Thanks Karthik.  +1, wouldn't be the right fix to find out where {{yarn.log.dir}} (I guess that is reason why is being picked up as a ${}) is being set as system property and undo that?, bq. wouldn't be the right fix to find out where yarn.log.dir (I guess that is reason why is being picked up as a ${}) is being set as system property and undo that?
It's getting picked up by yarn-default.xml

Karthik, can you move this into a setup method so that all tests can just depend on that? At that point, you can & should remove the setting of log-dir in each and individual test., Then why not just configure in the surefire plugin the yarn.log.dir system property to point to $\{maven.project.build.directory\}/logs ?, For this particular test, I think we should move it to the setup method as Vinod suggested. In addition to that, I think we should also configure the surefire plugin to point appropriately., (Side note - I didn't receive Vinod's comment by email at all - wonder what is going on)
, - Moved common startup code of tests to setup()
- Configured yarn.log.dir to point to ${maven.project.build.directory}/logs

Ran a few tests including TestResourceLocalizationService. Will submit patch to see if the pom change affects any other tests., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12594264/yarn-932-2.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-YARN-Build/1586//testReport/
Console output: https://builds.apache.org/job/PreCommit-YARN-Build/1586//console

This message is automatically generated., Thanks Karthik!  Committed to trunk, branch-2, and branch-2.1.]