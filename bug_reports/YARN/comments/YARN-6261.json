[GitHub user pvillard31 opened a pull request:

    https://github.com/apache/hadoop/pull/198

    YARN-6261 - Catch user with no group when getting queue from mapping …

    …definition

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/pvillard31/hadoop YARN-6261

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/hadoop/pull/198.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #198
    
----
commit 59f19be39e4fbf2b59151ac205d274b26716e478
Author: Pierre Villard <pierre.villard.fr@gmail.com>
Date:   2017-03-01T22:25:58Z

    YARN-6261 - Catch user with no group when getting queue from mapping definition

----
, Thanks for the patch, [~pvillard].  Unfortunately, the {{getGroups()}} method makes no distinction between a user with no groups and a failure retrieving a user from the cache.  I think the cheapest way to deal with that is to add a log message that explain why the group mapping is not being applied.  Seems like it should be warn or info, probably warn.  It's a scenario that's undesirable and should be addressed no matter which reason it fails.  The better solution would be to update the API to throw different exceptions, but that could be a pretty big change., Yeah agreed [~templedf]. Initially I was looking at throwing a specific exception (or not catching the {{ExecutionException}} in {{getGroups()}}) but that is indeed quite impacting and not sure how this is usually handled in Hadoop project. An option could be to have a new {{getGroups()}} method with correct exception handling and mark as deprecated the existing one. Anyway, I added a log message at warn level as you suggested, this is the easiest way to solve the issue right now.]