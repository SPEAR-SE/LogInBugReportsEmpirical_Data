{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12767496","self":"https://issues.apache.org/jira/rest/api/2/issue/12767496","key":"YARN-3062","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2015-01-14T19:07:46.316+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jan 15 17:18:28 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_84110313_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-01-15T17:18:28.712+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-3062/watchers","watchCount":5,"isWatching":false},"created":"2015-01-14T17:56:38.588+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326142","id":"12326142","description":"2.4.0 release","name":"2.4.0","archived":false,"released":true,"releaseDate":"2014-04-07"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326262","id":"12326262","description":"2.5.0 release","name":"2.5.0","archived":false,"released":true,"releaseDate":"2014-08-11"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12327197","id":"12327197","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-01-15T17:18:28.892+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12322904","id":"12322904","name":"timelineserver","description":"YARN Timeline Server"}],"timeoriginalestimate":null,"description":"When otherinfo field gets updated, in some cases the data returned for an entity is dependent on the filter usage. \n\nfor ex in the attached files for the \n- entity: \"vertex_1421164610335_0020_1_01\",\n- entitytype: \"TEZ_VERTEX_ID\",\n\nfor the otherinfo.numTasks,  got updated from 1009 to 253\n- using {code}http://machine:8188/ws/v1/timeline/TEZ_VERTEX_ID/vertex_1421164610335_0020_1_01/ {code} gives the updated value: 253\n- using {code}http://cn042-10:8188/ws/v1/timeline/TEZ_VERTEX_ID?limit=11&primaryFilter=TEZ_DAG_ID%3Adag_1421164610335_0020_1{code} gives the old value: 1009\n \nfor the otherinfo.status field, which gets updated,   both of them show the updated value. \n\nTEZ-1942 has more details.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12692280","id":"12692280","filename":"withfilter.json","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-01-14T17:58:04.897+0000","size":30024,"mimeType":"application/json","content":"https://issues.apache.org/jira/secure/attachment/12692280/withfilter.json"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12692281","id":"12692281","filename":"withoutfilter.json","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-01-14T17:58:04.904+0000","size":27916,"mimeType":"application/json","content":"https://issues.apache.org/jira/secure/attachment/12692281/withoutfilter.json"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"timelineserver gives inconsistent data for otherinfo field based on the filter param","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12767496/comment/14277329","id":"14277329","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"body":"attaching sample output files. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-01-14T17:58:04.912+0000","updated":"2015-01-14T17:58:04.912+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12767496/comment/14277468","id":"14277468","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"[~pramachandran], how did you update the entity? Do you keep *primaryFilters* field set to the same filters when the entity is created? I understand it may be counter intuitive, but to post again to the existing entity and make all the records indexed by *primaryFilters* be updated to, you need to make sure *primaryFilters* field is properly set.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T19:07:46.316+0000","updated":"2015-01-14T19:07:46.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12767496/comment/14277573","id":"14277573","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"body":"thanks for the clarification.[~zjshen] could be the reason, will check and update. \n\nso to clarify \n* if I have 2 primaryFilters while creating the entity,  any update to entity has to use the TimelineEntity.addPrimaryFilter for both primaryFilters?\n* can a new primaryfilter be added in an update. (2 primaryfilters at entity creation time, add a new filter in update to make 3 filters, every subsequent update sets all 3 filters)\n* can the primaryFilter value be changed in an update?\n \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-01-14T19:58:43.087+0000","updated":"2015-01-14T19:58:43.087+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12767496/comment/14277603","id":"14277603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. if I have 2 primaryFilters while creating the entity, any update to entity has to use the TimelineEntity.addPrimaryFilter for both primaryFilters?\n\nYes\n\nbq. can a new primaryfilter be added in an update\n\nYou can, but when you filter with 3rd primaryfilter, you will miss the information that is posted before. It's a limitation of primaryfilter. The recommended way to use primaryfilter is to come up with all filters you may want to use.\n\nbq. can the primaryFilter value be changed in an update?\n\nIt doesn't update, but append. Say you have primaryFilter key1:value1. Then you update key1:value2. Finally you will get key1:[value1, value2].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T20:20:13.638+0000","updated":"2015-01-14T20:20:13.638+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12767496/comment/14277693","id":"14277693","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hitesh","name":"hitesh","key":"hitesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitesh Shah","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Do you keep primaryFilters field set to the same filters when the entity is created? I understand it may be counter intuitive, but to post again to the existing entity and make all the records indexed by primaryFilters be updated to, you need to make sure primaryFilters field is properly set.\n\nbq. It doesn't update, but append. Say you have primaryFilter key1:value1. Then you update key1:value2. Finally you will get key1:[value1, value2].\n\nWhere is all of the above documented?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hitesh","name":"hitesh","key":"hitesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitesh Shah","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T21:14:56.714+0000","updated":"2015-01-14T21:14:56.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12767496/comment/14277777","id":"14277777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"Unfortunately, we're still lacking the documentation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T22:06:41.225+0000","updated":"2015-01-14T22:06:41.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12767496/comment/14278878","id":"14278878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"body":"[~zjshen] looks like that was the issue. can close this jira now. Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pramachandran","name":"pramachandran","key":"pramachandran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prakash Ramachandran","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-01-15T16:14:45.586+0000","updated":"2015-01-15T16:14:45.586+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12767496/comment/14278962","id":"14278962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for your confirmation, [~pramachandran]! Close the Jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-15T17:18:28.872+0000","updated":"2015-01-15T17:18:28.872+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-3062/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i24ddj:"}}