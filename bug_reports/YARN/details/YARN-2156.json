{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12720986","self":"https://issues.apache.org/jira/rest/api/2/issue/12720986","key":"YARN-2156","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2014-06-12T20:59:42.553+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 13 13:55:48 UTC 2014","customfield_12310420":"399184","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_4615516_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-06-12T22:09:47.664+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-2156/watchers","watchCount":4,"isWatching":false},"created":"2014-06-12T20:52:52.183+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-06-13T13:55:48.481+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"org.apache.hadoop.yarn.server.resourcemanager.ApplicationMasterService#serviceStart() method has mistakenly hardcoded AuthMethod.TOKEN as Hadoop security authentication. \n\nIt looks like that:\n\n\n{code}\n\n@Override\n  protected void serviceStart() throws Exception {\n    Configuration conf = getConfig();\n    YarnRPC rpc = YarnRPC.create(conf);\n\n    InetSocketAddress masterServiceAddress = conf.getSocketAddr(\n        YarnConfiguration.RM_SCHEDULER_ADDRESS,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_ADDRESS,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_PORT);\n\n    Configuration serverConf = conf;\n    // If the auth is not-simple, enforce it to be token-based.\n    serverConf = new Configuration(conf);\n    serverConf.set(\n        CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,\n        SaslRpcServer.AuthMethod.TOKEN.toString());\n    \n\n...\n}\n{code}\n\nObviously such code makes sense only if CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION config setting is missing.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"399298","customfield_12312823":null,"summary":"ApplicationMasterService#serviceStart() method has hardcoded AuthMethod.TOKEN as security configuration","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svetozari","name":"svetozari","key":"svetozari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=svetozari&avatarId=27089","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=svetozari&avatarId=27089","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=svetozari&avatarId=27089","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=svetozari&avatarId=27089"},"displayName":"Svetozar Ivanov","active":true,"timeZone":"Europe/Sofia"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svetozari","name":"svetozari","key":"svetozari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=svetozari&avatarId=27089","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=svetozari&avatarId=27089","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=svetozari&avatarId=27089","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=svetozari&avatarId=27089"},"displayName":"Svetozar Ivanov","active":true,"timeZone":"Europe/Sofia"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720986/comment/14029796","id":"14029796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"body":"Svetozar, I think this is expected because AMRMToken today is used in both secure and non-secure environment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-12T20:59:42.553+0000","updated":"2014-06-12T20:59:42.553+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720986/comment/14029913","id":"14029913","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Yes, this is by design.  Yarn uses tokens regardless of your security setting.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2014-06-12T22:09:33.645+0000","updated":"2014-06-12T22:09:33.645+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720986/comment/14030286","id":"14030286","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svetozari","name":"svetozari","key":"svetozari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=svetozari&avatarId=27089","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=svetozari&avatarId=27089","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=svetozari&avatarId=27089","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=svetozari&avatarId=27089"},"displayName":"Svetozar Ivanov","active":true,"timeZone":"Europe/Sofia"},"body":"Hm, I would expect a warning message in my logs if is like you said. That's because my configuration settings are completely ignored.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svetozari","name":"svetozari","key":"svetozari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=svetozari&avatarId=27089","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=svetozari&avatarId=27089","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=svetozari&avatarId=27089","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=svetozari&avatarId=27089"},"displayName":"Svetozar Ivanov","active":true,"timeZone":"Europe/Sofia"},"created":"2014-06-13T06:05:07.911+0000","updated":"2014-06-13T06:05:07.911+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12720986/comment/14030639","id":"14030639","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"A warning doesn't make sense because it implies there is something you should change.  There's not.  The config setting, whether explicitly set or not, is entirely irrelevant.  By design, yarn always uses tokens and these tokens carry essential information that is not otherwise obtainable for non-token authenticated connections.  That's why token authentication is explicitly set.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2014-06-13T13:55:48.481+0000","updated":"2014-06-13T13:55:48.481+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-2156/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1wpyn:"}}