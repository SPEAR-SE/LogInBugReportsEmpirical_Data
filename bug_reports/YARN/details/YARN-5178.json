{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12973629","self":"https://issues.apache.org/jira/rest/api/2/issue/12973629","key":"YARN-5178","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-05-28T03:02:47.848+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 30 03:53:40 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5178/watchers","watchCount":6,"isWatching":false},"created":"2016-05-28T02:31:13.531+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327197","id":"12327197","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-30T03:53:40.676+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319322","id":"12319322","name":"resourcemanager"}],"timeoriginalestimate":null,"description":"Dear all \n\nproblem i detected is that : \n\nIn my cluster enviroment ( 16 nodes , 2 ResourceManager  , HA ) \n\nWhen an application are submitted in resource manager (Rs )  1st , suddenly that Rs1 machine are hang , this application is failover to Rs2 but it never can be run : \n\nName: \tcpaBidEcom\nApplication Type: \tSPARK\nApplication Tags: \t\nState: \tACCEPTED\nFinalStatus: \tUNDEFINED\nStarted: \t28-May-2016 01:46:13\nElapsed: \t7hrs, 35mins, 32sec\nTracking URL: \tUNASSIGNED\n\n\nafter that our developer try to kill this application by command : \n\nyarn application -kill app_\n\nwe retried this output forever : \n\n16/05/28 09:24:48 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:24:50 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:24:52 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:24:54 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:24:56 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:24:58 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:00 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:02 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:04 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:06 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:08 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:10 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:12 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:14 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n16/05/28 09:25:16 INFO impl.YarnClientImpl: Waiting for application application_1464374175189_0016 to be killed.\n\nI think it probably a bug . It 's hard to reproduce it but please review it for me\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12806787","id":"12806787","filename":"rs1.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-28T04:12:39.262+0000","size":18364116,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12806787/rs1.zip"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12806792","id":"12806792","filename":"rs2.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-28T04:53:41.864+0000","size":17989710,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12806792/rs2.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"yarn application never can be killed when failover resource manager","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12973629/comment/15305129","id":"15305129","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hex108","name":"hex108","key":"hex108","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Gong","active":true,"timeZone":"Asia/Shanghai"},"body":"Thanks [~tuyuri] for reporting the issue. Could you please upload two RMs logs if it is possible? It seems caused by that the RMApp was in ACCEPTED state and RM HA started before none of RMAppAttempt was saved.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hex108","name":"hex108","key":"hex108","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Gong","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-05-28T03:02:47.848+0000","updated":"2016-05-28T03:02:47.848+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12973629/comment/15305162","id":"15305162","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"body":"RS1 log","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-28T04:12:39.309+0000","updated":"2016-05-28T04:12:39.309+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12973629/comment/15305163","id":"15305163","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"body":"Sorry Jun Gong, it 's my mistake , i didn't stop cluster to get log , and so many other application ran , RS log is quite chao :D :D ,  it 's make too hard to read log , but i try to attached here , please find app : application_1464374175189_0016  to read log","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-28T04:12:45.493+0000","updated":"2016-05-28T05:04:09.542+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12973629/comment/15305176","id":"15305176","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"body":"Rs2 log","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-28T04:53:41.911+0000","updated":"2016-05-28T04:53:41.911+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12973629/comment/15305329","id":"15305329","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hex108","name":"hex108","key":"hex108","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Gong","active":true,"timeZone":"Asia/Shanghai"},"body":"Thanks [~tuyuri] for sharing the logs.  I analyzed rs2 log, and found it is a same problem as YARN-2856: the application was at accepted state, and ignored event {{RMAppEventType.ATTEMPT_KILLED}}. You could try the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hex108","name":"hex108","key":"hex108","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Gong","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-05-28T12:18:35.510+0000","updated":"2016-05-28T12:18:35.510+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12973629/comment/15306206","id":"15306206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"body":"[~hex108] tks for your helping , i will try this patch ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tuyuri","name":"tuyuri","key":"tuyuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tu nguyen khac","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-30T03:53:40.676+0000","updated":"2016-05-30T03:53:40.676+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5178/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ymxz:"}}