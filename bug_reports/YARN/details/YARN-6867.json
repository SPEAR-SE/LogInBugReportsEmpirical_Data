{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13089910","self":"https://issues.apache.org/jira/rest/api/2/issue/13089910","key":"YARN-6867","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jul 25 16:07:54 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_294862_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_2774058","customfield_12312321":null,"resolutiondate":"2017-07-25T16:09:29.241+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-6867/watchers","watchCount":3,"isWatching":false},"created":"2017-07-25T15:18:20.353+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12510203","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12510203","type":{"id":"12310060","name":"Container","inward":"Is contained by","outward":"contains","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310060"},"inwardIssue":{"id":"12941101","key":"YARN-4719","self":"https://issues.apache.org/jira/rest/api/2/issue/12941101","fields":{"summary":"Add a helper library to maintain node state and allows common queries","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12510189","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12510189","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12604534","key":"YARN-56","self":"https://issues.apache.org/jira/rest/api/2/issue/12604534","fields":{"summary":"Handle container requests that request more resources than currently available in the cluster","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nroberts","name":"nroberts","key":"nroberts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nathan Roberts","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-07-25T16:09:29.269+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319325","id":"12319325","name":"scheduler"}],"timeoriginalestimate":null,"description":"AbstractYarnScheduler has a configured wait time during which it reports the maximum resources from the configuration instead of the actual resources available in the cluster. However, the first query after the wait time expiration is responded by the configured maximum resources instead of the actual maximum resources. This can result in a app submission to fail with an InvalidResourceRequestException (will attach a unit test in the patch) since the maximum resources reported by the RM is different than the one it sanity checks against at app submission.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12878816","id":"12878816","filename":"YARN-6867.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"created":"2017-07-25T15:19:17.470+0000","size":6236,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12878816/YARN-6867.001.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"AbstractYarnScheduler reports the configured maximum resources, instead of the actual, even after the configured waittime","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13089910/comment/16100181","id":"16100181","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"body":"Added a new unit test in TestRM to demonstrate how an app submission can fail with a InvalidResourceRequestException being thrown. Changes to AbstractYarnScheduler to report the correct value after the wait time is over. Also added a unit test to TestAbstractYarnScheduler.\n\nThis does not handle all the corner cases, e.g. the RM reported the max values before the wait time was over but the app was submitted after the wait time had expired. But this should handle the more reproducible one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"created":"2017-07-25T15:23:05.356+0000","updated":"2017-07-25T15:23:05.356+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13089910/comment/16100193","id":"16100193","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"body":"If the application gets submitted before the wait time has expired, then the sanity check for resources will pass and the app submission will go through. However, if the requested resources is more than available in the cluster, then the app will \"hang\" forever waiting for the AM container to be allocated. I think YARN-56 captures this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"created":"2017-07-25T15:27:04.890+0000","updated":"2017-07-25T15:27:04.890+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13089910/comment/16100208","id":"16100208","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"body":"Requesting [~rkanter] and [~kasha] for comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"created":"2017-07-25T15:32:54.975+0000","updated":"2017-07-25T15:32:54.975+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13089910/comment/16100276","id":"16100276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"body":"Sorry, it looks like the problem was solved in trunk via YARN-4719. I should have checked on trunk before proceeding. Closing the JIRA now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"created":"2017-07-25T16:04:41.822+0000","updated":"2017-07-25T16:04:41.822+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13089910/comment/16100280","id":"16100280","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"body":"The patch in YARN-4719 solves the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkhan","name":"samkhan","key":"samkhan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Muhammad Samir Khan","active":true,"timeZone":"America/Chicago"},"created":"2017-07-25T16:07:54.225+0000","updated":"2017-07-25T16:07:54.225+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-6867/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3hzif:"}}