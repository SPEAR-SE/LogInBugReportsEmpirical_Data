{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12829786","self":"https://issues.apache.org/jira/rest/api/2/issue/12829786","key":"YARN-3644","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-05-16T22:55:16.133+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 13 18:16:38 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-3644/watchers","watchCount":21,"isWatching":false},"created":"2015-05-14T05:55:06.975+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12428961","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12428961","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12840429","key":"YARN-3847","self":"https://issues.apache.org/jira/rest/api/2/issue/12840429","fields":{"summary":"Refactor TestNodeStatusUpdater","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12424845","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12424845","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12829830","key":"YARN-3646","self":"https://issues.apache.org/jira/rest/api/2/issue/12829830","fields":{"summary":"Applications are getting stuck some times in case of retry policy forever","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12424715","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12424715","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12538494","key":"YARN-196","self":"https://issues.apache.org/jira/rest/api/2/issue/12538494","fields":{"summary":"Nodemanager should be more robust in handling connection failure  to ResourceManager when a cluster is started","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12424716","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12424716","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12637094","key":"YARN-479","self":"https://issues.apache.org/jira/rest/api/2/issue/12637094","fields":{"summary":"NM retry behavior for connection to RM should be similar for lost heartbeats","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12424980","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12424980","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12830490","key":"YARN-3668","self":"https://issues.apache.org/jira/rest/api/2/issue/12830490","fields":{"summary":"Long run service shouldn't be killed even if Yarn crashed","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/5","id":"5","description":"General wishlist item.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Wish","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-07-13T18:16:38.528+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319323","id":"12319323","name":"nodemanager"}],"timeoriginalestimate":null,"description":"When NM is unable to connect to RM, NM shuts itself down.\n\n{code}\n          } catch (ConnectException e) {\n            //catch and throw the exception if tried MAX wait time to connect RM\n            dispatcher.getEventHandler().handle(\n                new NodeManagerEvent(NodeManagerEventType.SHUTDOWN));\n            throw new YarnRuntimeException(e);\n{code}\n\nIn large clusters, if RM is down for maintenance for longer period, all the NMs shuts themselves down, requiring additional work to bring up the NMs.\n\nSetting the yarn.resourcemanager.connect.wait-ms to -1 has other side effects, where non connection failures are being retried infinitely by all YarnClients (via RMProxy).","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12741784","id":"12741784","filename":"YARN-3644.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-25T04:51:36.129+0000","size":9515,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12741784/YARN-3644.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12735288","id":"12735288","filename":"YARN-3644.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T09:28:09.375+0000","size":9414,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12735288/YARN-3644.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12741790","id":"12741790","filename":"YARN-3644.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-25T05:21:36.938+0000","size":9511,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12741790/YARN-3644.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12742125","id":"12742125","filename":"YARN-3644.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-26T14:16:34.251+0000","size":10260,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12742125/YARN-3644.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12735276","id":"12735276","filename":"YARN-3644.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T08:17:56.498+0000","size":9909,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12735276/YARN-3644.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Node manager shuts down if unable to connect with RM","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriksun","name":"sriksun","key":"sriksun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sriksun&avatarId=18853","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sriksun&avatarId=18853","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sriksun&avatarId=18853","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sriksun&avatarId=18853"},"displayName":"Srikanth Sundarrajan","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriksun","name":"sriksun","key":"sriksun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sriksun&avatarId=18853","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sriksun&avatarId=18853","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sriksun&avatarId=18853","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sriksun&avatarId=18853"},"displayName":"Srikanth Sundarrajan","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14544971","id":"14544971","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriksun","name":"sriksun","key":"sriksun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sriksun&avatarId=18853","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sriksun&avatarId=18853","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sriksun&avatarId=18853","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sriksun&avatarId=18853"},"displayName":"Srikanth Sundarrajan","active":true,"timeZone":"Asia/Kolkata"},"body":"{quote}\nSetting the yarn.resourcemanager.connect.wait-ms to -1 has other side effects, where non connection failures are being retried infinitely by all YarnClients (via RMProxy).\n{quote}\nSee YARN-3646","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriksun","name":"sriksun","key":"sriksun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sriksun&avatarId=18853","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sriksun&avatarId=18853","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sriksun&avatarId=18853","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sriksun&avatarId=18853"},"displayName":"Srikanth Sundarrajan","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-05-15T05:54:38.596+0000","updated":"2015-05-15T05:54:38.596+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14546971","id":"14546971","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandflee","name":"sandflee","key":"sandflee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sandflee","active":true,"timeZone":"Asia/Shanghai"},"body":"If RM is down, NM's connection will be reset by RM machine,  could we catch this exception and keeps NM alive?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandflee","name":"sandflee","key":"sandflee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sandflee","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-16T22:55:16.133+0000","updated":"2015-05-16T22:55:16.133+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14547040","id":"14547040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"[~sandflee] Yes, NM should catch the exception and keeps it alive.\n\nRight now, NM shuts down itself only in case of connection failures. NM ignores all other kinds of exceptions and errors while sending heartbeats.\n{code}\n         } catch (ConnectException e) {\n            //catch and throw the exception if tried MAX wait time to connect RM\n            dispatcher.getEventHandler().handle(\n                new NodeManagerEvent(NodeManagerEventType.SHUTDOWN));\n            throw new YarnRuntimeException(e);\n         } catch (Throwable e) {\n\n            // TODO Better error handling. Thread can die with the rest of the\n            // NM still running.\n            LOG.error(\"Caught exception in status-updater\", e);\n        } \n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-17T03:55:49.024+0000","updated":"2015-05-17T03:55:49.024+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14547155","id":"14547155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandflee","name":"sandflee","key":"sandflee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sandflee","active":true,"timeZone":"Asia/Shanghai"},"body":"[~raju.bairishetti] thanks for your reply,  If RM HA is not enabled, we can fix it like this. But with RM HA, there're some condition to consider.\n1, both RM A and RM B  reset the connection,  seems RMs are in trouble, NM keep containers alive\n2, both RM A and RM B socket timeout, seems NM are network partitioned with RMs or RM machine all crashed(Any way to distinguish them?), NM kills all containers\n3, one RM reset the connection and the other socket timeout, It's difficult to handle, sine we knows nothing about active RM, both RM maybe all crashed, or just active RM are network partitioned. \nI suggest backup RM also responses and tells NM I'm backup RM. So It becomes \n3.1  one RM reset the connection and the other socket timeout, seems RM in trouble, just keep containers alive \n3.2  one RM are backup and  the other RM socket timeout,  seems NM are network partitioned with active RM, kill all containers","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandflee","name":"sandflee","key":"sandflee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sandflee","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-17T12:50:53.671+0000","updated":"2015-05-17T12:50:53.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14547159","id":"14547159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandflee","name":"sandflee","key":"sandflee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sandflee","active":true,"timeZone":"Asia/Shanghai"},"body":"In our cluster we also have to face this problem, I'd like to have some work on this if possible, expecting more comments!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandflee","name":"sandflee","key":"sandflee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sandflee","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-17T12:57:33.225+0000","updated":"2015-05-17T12:57:33.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14547489","id":"14547489","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. In large clusters, if RM is down for maintenance for longer period, all the NMs shuts themselves down, requiring additional work to bring up the NMs.\nbq. Right now, NM shuts down itself only in case of connection failures. NM ignores all other kinds of exceptions and errors while sending heartbeats.\nThis path usually shouldn't happen at all as the RMProxy layer is supposed to retry _enough_, except perhaps for the bug at YARN-3646. We eventually want to give up if the retry layer itself gives up. Given that, is this JIRA simply a dup of YARN-3646? /cc [~jianhe] [~xgong]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-18T03:14:41.132+0000","updated":"2015-05-18T03:14:41.132+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14547492","id":"14547492","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"Actually, for all the above cases, we want NMs to just continue for a while without losing any work and finally give up after some time. The only difference between a HA vs non-HA setup is that in HA setup NMs will just wait many times over trying each of the RMs.\n\nGetting into the business of detecting and acting on partitions is best left up to admins/tools.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-18T03:18:53.853+0000","updated":"2015-05-18T03:18:53.853+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14547506","id":"14547506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriksun","name":"sriksun","key":"sriksun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sriksun&avatarId=18853","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sriksun&avatarId=18853","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sriksun&avatarId=18853","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sriksun&avatarId=18853"},"displayName":"Srikanth Sundarrajan","active":true,"timeZone":"Asia/Kolkata"},"body":"[~vinodkv], YARN-3644 is independent of this. In our setup we ran into this before we ran into YARN-3646. NM gives up trying for about 30 odd mts by default (default settings) before *attempting* to shut itself down. Is there an issue if this wait time is much (infinitely) longer (for both HA & Non-HA setup). An orthogonal issue is that when NM attempts to shut itself down, it doesn't actually go down and lingers around for days without actually accepting any containers, unless restarted (will file another issue for this).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sriksun","name":"sriksun","key":"sriksun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sriksun&avatarId=18853","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sriksun&avatarId=18853","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sriksun&avatarId=18853","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sriksun&avatarId=18853"},"displayName":"Srikanth Sundarrajan","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-05-18T04:01:38.234+0000","updated":"2015-05-18T04:01:38.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14547544","id":"14547544","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"W can have a new config like NODEMANAGER_ALIVE_ON_RM_CONNECTION_FAILURES? Based on this config value NM takes a decision on shutdown. In this way we can honour the existing behaviour as well.\n\nI will provide a patch shortly. Not able to assign myself. Can anyone help me in assigning?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-18T05:20:12.909+0000","updated":"2015-05-18T05:20:12.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14558844","id":"14558844","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"Intorduced a new config **NODEMANAGER_SHUTSDWON_ON_RM_CONNECTION_FAILURES** to allow the users to take decision on the shutdown of the NM when it is not able to connect to RM.\n\nKeeping default value as true to honour the current behavior.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T08:17:56.508+0000","updated":"2015-05-26T08:17:56.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14558902","id":"14558902","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  14m 38s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   7m 32s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |   9m 35s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 22s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   1m 43s | The applied patch generated  1 new checkstyle issues (total was 214, now 215). |\n| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 33s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   3m 48s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | yarn tests |   0m 26s | Tests passed in hadoop-yarn-api. |\n| {color:green}+1{color} | yarn tests |   1m 56s | Tests passed in hadoop-yarn-common. |\n| {color:green}+1{color} | yarn tests |   6m 15s | Tests passed in hadoop-yarn-server-nodemanager. |\n| | |  49m  2s | |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12735276/YARN-3644.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 56996a6 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/8082/artifact/patchprocess/diffcheckstylehadoop-yarn-api.txt |\n| hadoop-yarn-api test log | https://builds.apache.org/job/PreCommit-YARN-Build/8082/artifact/patchprocess/testrun_hadoop-yarn-api.txt |\n| hadoop-yarn-common test log | https://builds.apache.org/job/PreCommit-YARN-Build/8082/artifact/patchprocess/testrun_hadoop-yarn-common.txt |\n| hadoop-yarn-server-nodemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/8082/artifact/patchprocess/testrun_hadoop-yarn-server-nodemanager.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8082/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8082/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T09:09:30.333+0000","updated":"2015-05-26T09:09:30.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14558955","id":"14558955","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (/) *{color:green}+1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  14m 36s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   7m 35s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |   9m 32s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 22s | The applied patch does not increase the total number of release audit warnings. |\n| {color:green}+1{color} | checkstyle |   2m 20s | There were no new checkstyle issues. |\n| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 33s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   3m 49s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | yarn tests |   0m 27s | Tests passed in hadoop-yarn-api. |\n| {color:green}+1{color} | yarn tests |   1m 57s | Tests passed in hadoop-yarn-common. |\n| {color:green}+1{color} | yarn tests |   6m 26s | Tests passed in hadoop-yarn-server-nodemanager. |\n| | |  49m 19s | |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12735288/YARN-3644.001.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 56996a6 |\n| hadoop-yarn-api test log | https://builds.apache.org/job/PreCommit-YARN-Build/8083/artifact/patchprocess/testrun_hadoop-yarn-api.txt |\n| hadoop-yarn-common test log | https://builds.apache.org/job/PreCommit-YARN-Build/8083/artifact/patchprocess/testrun_hadoop-yarn-common.txt |\n| hadoop-yarn-server-nodemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/8083/artifact/patchprocess/testrun_hadoop-yarn-server-nodemanager.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8083/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8083/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T10:19:54.044+0000","updated":"2015-05-26T10:19:54.044+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14560111","id":"14560111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandflee","name":"sandflee","key":"sandflee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sandflee","active":true,"timeZone":"Asia/Shanghai"},"body":"Thanks [~vinodkv], what my concerns is long running containers shouldn't be killed even if all RM crashes. In our product env, we encountered the problem that all running containers are killed since NM couldn't connect to RM (RM couldn't be 100% available), the application running on our cluster becomes unavailble. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandflee","name":"sandflee","key":"sandflee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sandflee","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-26T23:27:30.075+0000","updated":"2015-05-26T23:27:30.075+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14562206","id":"14562206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"[~hex108] Is there any work pending on the jira to assign yourself or was it assigned yourself by mistake?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-28T02:34:06.800+0000","updated":"2015-05-28T02:34:06.800+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14562209","id":"14562209","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hex108","name":"hex108","key":"hex108","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Gong","active":true,"timeZone":"Asia/Shanghai"},"body":"Sorry, by mistake...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hex108","name":"hex108","key":"hex108","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Gong","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-28T02:35:50.700+0000","updated":"2015-05-28T02:35:50.700+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14562210","id":"14562210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hex108","name":"hex108","key":"hex108","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Gong","active":true,"timeZone":"Asia/Shanghai"},"body":"Sorry, by mistake...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hex108","name":"hex108","key":"hex108","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Gong","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-28T02:35:53.968+0000","updated":"2015-05-28T02:35:53.968+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14582898","id":"14582898","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"Could anyone please review the patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-12T03:57:44.974+0000","updated":"2015-06-12T03:57:44.974+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14582981","id":"14582981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"Patch looks good to me.\n\n[~vinodkv], [~sandflee] - do you see  any issue with adding new config \"yarn.nodemanager.shutdown.on.connection.failures\" for this behavior. I understand it is one more config getting added, but other than that i don't see any issue. Or do you know of any other solution ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-06-12T05:42:08.108+0000","updated":"2015-06-12T05:42:08.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14583093","id":"14583093","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi [~raju.bairishetti],\nIIUC intention of this jira is to only make NM wait for RM infinitely and hence we don't want to set  {{yarn.resourcemanager.connect.max-wait.ms}} to  FOREVER retry policy which might affect other clients connecting to RM right ?\nIf so i feel overall approach is fine except for the cosmetic comments below\n# {{NM_SHUTSDWON_ON_RM_CONNECTION_FAILURES}}  typo,  SHUTSDWON => SHUTDOWN\n# if agree on the earlier then {{DEFAULT_NM_SHUTSDOWN_ON_RM_CONNECTION_FAILURES}} => {{DEFAULT_NM_SHUTDOWN_ON_RM_CONNECTION_FAILURES}} \n# configuration could be {{yarn.nodemanager.shutdown.on.connection.failures}} => {{yarn.nodemanager.shutdown.on.RM.connection.failures}}. correct the same in yarn-default.xml's  description and name also\n# Testcase introduces new {{MyNodeStatusUpdater6}} whose only change is to get the new Resource tracker for the test case, its becoming more and more duplicate code for NodeStatusUpdater as most of the other overloaded NodeStatusUpdater is also doing the same, so can we bring in a common NodeStatusUpdater  class which accepts ResourceTracker  as parameter to constructor ? (may be refactoring other classes can be taken up in other jira if req)\n# {{MyResourceTracker8}} could extend {{MyResourceTracker5}} and just override the required methods. Would also appreciate if some documentation is added above these classes so that in future it will be helpfull to reuse if req.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-06-12T07:24:31.353+0000","updated":"2015-06-12T07:24:31.353+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14583189","id":"14583189","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"[~amareshwari] [~Naganarasimha] Thanks for the review and comments.\n\n[~Naganarasimha] Yes,  this jira is only to make NM wait for RM.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-12T09:38:36.200+0000","updated":"2015-06-12T09:38:36.200+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14600688","id":"14600688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"Created a jira [YARN-3847|https://issues.apache.org/jira/browse/YARN-3847] for *refactoring full test class*\n\n[~Naganarasimha] Fixed the couple of review comments. Is it fine to refactoring the test as part of [YARN-3847|https://issues.apache.org/jira/browse/YARN-3847] ?\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-25T04:51:36.134+0000","updated":"2015-06-25T04:51:36.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14600710","id":"14600710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  18m 30s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:red}-1{color} | javac |   2m 51s | The patch appears to cause the build to fail. |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12741784/YARN-3644.001.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / a815cc1 |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8338/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-25T05:23:05.928+0000","updated":"2015-06-25T05:23:05.928+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14600740","id":"14600740","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  18m 18s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:red}-1{color} | javac |   3m  0s | The patch appears to cause the build to fail. |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12741790/YARN-3644.002.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / a815cc1 |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8340/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-25T05:52:55.178+0000","updated":"2015-06-25T05:52:55.178+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14602006","id":"14602006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"body":"As long as Refactoring is taken care in YARN-3847, i don't mind! I will try to review the patch as soon as possible","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-06-25T21:41:39.065+0000","updated":"2015-06-25T21:41:39.065+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14602925","id":"14602925","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"Fixed test case with the newly added changes in the trunk. Override the   unRegisterNodeManager(request) method in MyResourceTracker8 class.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-26T14:16:34.255+0000","updated":"2015-06-26T14:16:34.255+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14603064","id":"14603064","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  18m 30s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   7m 36s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |   9m 34s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   1m 44s | The applied patch generated  1 new checkstyle issues (total was 211, now 211). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 35s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   4m 18s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | yarn tests |   0m 25s | Tests passed in hadoop-yarn-api. |\n| {color:green}+1{color} | yarn tests |   1m 57s | Tests passed in hadoop-yarn-common. |\n| {color:green}+1{color} | yarn tests |   6m 16s | Tests passed in hadoop-yarn-server-nodemanager. |\n| | |  53m 37s | |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12742125/YARN-3644.003.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 8ef07f7 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/8357/artifact/patchprocess/diffcheckstylehadoop-yarn-api.txt |\n| hadoop-yarn-api test log | https://builds.apache.org/job/PreCommit-YARN-Build/8357/artifact/patchprocess/testrun_hadoop-yarn-api.txt |\n| hadoop-yarn-common test log | https://builds.apache.org/job/PreCommit-YARN-Build/8357/artifact/patchprocess/testrun_hadoop-yarn-common.txt |\n| hadoop-yarn-server-nodemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/8357/artifact/patchprocess/testrun_hadoop-yarn-server-nodemanager.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8357/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8357/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-26T15:42:33.084+0000","updated":"2015-06-26T15:42:33.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14603363","id":"14603363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"Seems checkstyle error was not introduced as part of this patch. File had already more than 2000 lines :) .\n*Check style error:*  YarnConfiguration.java:1: File length is 2,036 lines (max allowed is 2,000).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-26T18:23:41.321+0000","updated":"2015-06-26T18:23:41.321+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14614591","id":"14614591","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"[~Naganarasimha] Could you kindly review the latest patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-07-06T06:25:12.631+0000","updated":"2015-07-06T06:25:12.631+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14615631","id":"14615631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"body":"Thanks [~raju.bairishetti] for working on this and the latest Patch looks fine to me !\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-07-06T20:48:59.841+0000","updated":"2015-07-06T20:48:59.841+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14622459","id":"14622459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=varun_saxena","name":"varun_saxena","key":"varun_saxena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Saxena","active":true,"timeZone":"Asia/Kolkata"},"body":"Thanks [~raju.bairishetti] for working on this.\n\nFTew comments :\n# No need to override {{MyNodeManager3#getNodeStatusUpdater}} and {{MyNodeManager3#serviceStop}}. serviceStop for instance only calls {{super.serviceStop()}}\n# {{MyNodeStatusUpdater6#context}} is not required.\n# The test doesnt really check for whether ConnectionException was thrown or NM Shutdown event was called or not. I think you check whether the flow has been hit or not using Mockito mock or spy. For instance, if you call {{NodeManager#start}}, service state will be STARTED irrespective of whether code written by you has been hit or not.\n# I think log added can be logged at WARN level instead of ERROR.\n# Also the log says \"Not shutting down NodeManager. Retry after default heartbeat interval time\". We can instead say something like \"Unable to connect to RM...Retry after default heartbeat time\".\n# The config name is {{yarn.nodemanager.shutdown.on.RM.connection.failures}}. All our config names are in lowercase, just for the sake of consistency, maybe RM can be in lowercase too. Thoughts ? \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=varun_saxena","name":"varun_saxena","key":"varun_saxena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Saxena","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-07-10T15:24:06.413+0000","updated":"2015-07-10T15:24:06.413+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14622468","id":"14622468","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=varun_saxena","name":"varun_saxena","key":"varun_saxena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Saxena","active":true,"timeZone":"Asia/Kolkata"},"body":"Moreover, I think most, if not all of the My**** classes added by you are not required. You can easily use mocking and use current classes to achieve the same result.\nYou just need to throw an exception while calling heartbeat. You can easily use Mockito to achieve it.\nWe can probably change visibility of {{getRMClient}} method in one of the MyNodeStatusUpdater* class which you can use so that its visible for use with Mockito.\nThis will greatly reduce unnecessary code.\n\nAnd IMHO, changing a method of a private class in test scope to public shouldn't be an issue. Thoughts ?\nYou can probably explore this option to refactor your code.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=varun_saxena","name":"varun_saxena","key":"varun_saxena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Saxena","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-07-10T15:30:43.113+0000","updated":"2015-07-10T15:30:43.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14622477","id":"14622477","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=varun_saxena","name":"varun_saxena","key":"varun_saxena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Saxena","active":true,"timeZone":"Asia/Kolkata"},"body":"A typo. Meant \"I think you *can* check whether flow has been hit or not using Mockito mock or spy\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=varun_saxena","name":"varun_saxena","key":"varun_saxena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Saxena","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-07-10T15:37:03.939+0000","updated":"2015-07-10T15:37:03.939+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14623462","id":"14623462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~varun_saxena] for the review and comments.\n\nbq. The config name is yarn.nodemanager.shutdown.on.RM.connection.failures. All our config names are in lowercase, just for the sake of consistency, maybe RM can be in lowercase too. Thoughts?\n  Agree. Will change it to lower case.\n\nbq. The test doesnt really check for whether ConnectionException was thrown or NM Shutdown event was called or not.\n   I ran the test in debugger mode. also. Test is hitting all the source changes. *I agree, I will rewrite this test using Mockito  to make it more generic*","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raju.bairishetti","name":"raju.bairishetti","key":"raju.bairishetti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Raju Bairishetti","active":true,"timeZone":"Etc/UTC"},"created":"2015-07-11T15:50:30.556+0000","updated":"2015-07-11T15:50:30.556+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14623616","id":"14623616","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=varun_saxena","name":"varun_saxena","key":"varun_saxena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Saxena","active":true,"timeZone":"Asia/Kolkata"},"body":"[~raju.bairishetti],\nbq. I ran the test in debugger mode. also. Test is hitting all the source changes\nI did not mean that test is not hitting the change. It is doing so and I verified it as well from logs.\nWhat I meant is some Mockito#verify statements can be added or some other assertions added to check if required functions or flows are getting hit.\nBecause the assertion of Service state being STARTED is something which can happen irrespective of whether your code is hit or not. \nLet us say somebody changes the code in future in a manner where your part of the code is conditional. Unlikely but you never know what happens 6 months down the line. \nIf you have verification statements checking whether your code has been called or not, your test case would fail after future changes, if those parts of code are not called. This would force the developer to change your test case as well.\nIf you have just the check for service being STARTED, after any future changes, your tests may still pass despite relevant flow being hit or not. And this may mask any mistakes made in this or related part of the main code.  So test case should verify if flow is being hit, either by checking function invocations or by having a set of assertions which are somewhat unique to test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=varun_saxena","name":"varun_saxena","key":"varun_saxena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Saxena","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-07-11T22:57:41.499+0000","updated":"2015-07-11T22:57:41.499+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14624909","id":"14624909","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vvasudev","name":"vvasudev","key":"vvasudev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Vasudev","active":true,"timeZone":"Asia/Kolkata"},"body":"[~raju.bairishetti] the latest patch also conflicts with a recent commit in NodeStatusUpdaterImpl. Can you please check it out? Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vvasudev","name":"vvasudev","key":"vvasudev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Vasudev","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-07-13T16:34:23.095+0000","updated":"2015-07-13T16:34:23.095+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12829786/comment/14625088","id":"14625088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vvasudev","name":"vvasudev","key":"vvasudev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Vasudev","active":true,"timeZone":"Asia/Kolkata"},"body":"One other minor comment - can you please change \"yarn.nodemanager.shutdown.on.RM.connection.failures\" to \"yarn.nodemanager.shutdown-on-rm-connection-failures\"? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vvasudev","name":"vvasudev","key":"vvasudev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Varun Vasudev","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-07-13T18:16:38.528+0000","updated":"2015-07-13T18:16:38.528+0000"}],"maxResults":36,"total":36,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-3644/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2epvj:"}}