{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12714171","self":"https://issues.apache.org/jira/rest/api/2/issue/12714171","key":"YARN-2057","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2014-05-14T15:20:54.195+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed May 14 16:58:03 UTC 2014","customfield_12310420":"392484","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_10994276_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-05-14T16:58:19.116+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-2057/watchers","watchCount":4,"isWatching":false},"created":"2014-05-14T13:55:04.871+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326142","id":"12326142","description":"2.4.0 release","name":"2.4.0","archived":false,"released":true,"releaseDate":"2014-04-07"}],"issuelinks":[{"id":"12388045","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12388045","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12710629","key":"YARN-1986","self":"https://issues.apache.org/jira/rest/api/2/issue/12710629","fields":{"summary":"In Fifo Scheduler, node heartbeat in between creating app and attempt causes NPE","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-05-14T16:58:19.143+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319322","id":"12319322","name":"resourcemanager"}],"timeoriginalestimate":null,"description":"One of our test runs finished prematurely with an NPE in the RM, followed by the RM thread calling system.exit(). It looks like an NM update came in while the app was still being set up, causing confusion.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"390555","customfield_12312823":null,"summary":"NPE in RM handling node update while app submission in progress","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"OS/X, hadoop 2.4.0 mini yarn cluster, slider unit test TestDestroyMasterlessAM","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714171/comment/13997557","id":"13997557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"Stack trace. This is a transient failure -and didn't reoccur immediately after- so the log is all there is, I'm afraid\n\nCan I note that failing to handle status updates by triggering RM exit is a bit brittle. It exposes the RM to failover if a single NM starts sending in bad data.\n\n{code}\n2014-05-14 14:48:32,248 [JUnit] DEBUG launch.AbstractLauncher (AbstractLauncher.java:completeContainerLaunch(162)) - Completed setting up container command $JAVA_HOME/bin/java -Djava.net.preferIPv4Stack=true -Djava.awt.headless=true -Xmx256M -ea -esa org.apache.slider.server.appmaster.SliderAppMaster create test_destroy_masterless_am --debug -cluster-uri file:/Users/stevel/.slider/cluster/test_destroy_masterless_am --rm 192.168.1.86:54470 --fs file:/// -D slider.registry.path=/registry -D slider.zookeeper.quorum=localhost:1 1><LOG_DIR>/slider-out.txt 2><LOG_DIR>/slider-err.txt \n2014-05-14 14:48:32,249 [JUnit] INFO  launch.AppMasterLauncher (AppMasterLauncher.java:submitApplication(207)) - Submitting application to Resource Manager\n2014-05-14 14:48:32,281 [IPC Server handler 2 on 54471] INFO  resourcemanager.ClientRMService (ClientRMService.java:submitApplication(537)) - Application with id 1 submitted by user stevel\n2014-05-14 14:48:32,281 [AsyncDispatcher event handler] INFO  rmapp.RMAppImpl (RMAppImpl.java:transition(863)) - Storing application with id application_1400075308869_0001\n2014-05-14 14:48:32,282 [IPC Server handler 2 on 54471] INFO  resourcemanager.RMAuditLogger (RMAuditLogger.java:logSuccess(142)) - USER=stevel\tIP=192.168.1.86\tOPERATION=Submit Application Request\tTARGET=ClientRMService\tRESULT=SUCCESS\tAPPID=application_1400075308869_0001\n2014-05-14 14:48:32,283 [AsyncDispatcher event handler] INFO  rmapp.RMAppImpl (RMAppImpl.java:handle(639)) - application_1400075308869_0001 State change from NEW to NEW_SAVING\n2014-05-14 14:48:32,287 [AsyncDispatcher event handler] INFO  recovery.RMStateStore (RMStateStore.java:handleStoreEvent(620)) - Storing info for app: application_1400075308869_0001\n2014-05-14 14:48:32,295 [AsyncDispatcher event handler] INFO  rmapp.RMAppImpl (RMAppImpl.java:handle(639)) - application_1400075308869_0001 State change from NEW_SAVING to SUBMITTED\n2014-05-14 14:48:32,296 [ResourceManager Event Processor] INFO  fifo.FifoScheduler (FifoScheduler.java:addApplication(369)) - Accepted application application_1400075308869_0001 from user: stevel, currently num of applications: 1\n2014-05-14 14:48:32,297 [ResourceManager Event Processor] FATAL resourcemanager.ResourceManager (ResourceManager.java:run(600)) - Error in handling event type NODE_UPDATE to the scheduler\njava.lang.NullPointerException\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.assignContainers(FifoScheduler.java:462)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.nodeUpdate(FifoScheduler.java:714)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.handle(FifoScheduler.java:743)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.handle(FifoScheduler.java:104)\n\tat org.apache.hadoop.yarn.server.resourcemanager.ResourceManager$SchedulerEventDispatcher$EventProcessor.run(ResourceManager.java:591)\n\tat java.lang.Thread.run(Thread.java:745)\n2014-05-14 14:48:32,298 [ResourceManager Event Processor] INFO  resourcemanager.ResourceManager (ResourceManager.java:run(604)) - Exiting, bbye..\n2014-05-14 14:48:32,298 [AsyncDispatcher event handler] INFO  rmapp.RMAppImpl (RMAppImpl.java:handle(639)) - application_1400075308869_0001 State change from SUBMITTED to ACCEPTED\n2014-05-14 14:48:32,299 [AsyncDispatcher event handler] INFO  resourcemanager.ApplicationMasterService (ApplicationMasterService.java:registerAppAttempt(608)) - Registering app attempt : appattempt_1400075308869_0001_000001\n\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2014-05-14T13:57:47.119+0000","updated":"2014-05-14T13:57:47.119+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714171/comment/13997635","id":"13997635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~stevel@apache.org], I think this is a same issue which is already resolved by YARN-1986. You can take a look and close it if you think so.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-14T15:20:54.195+0000","updated":"2014-05-14T15:20:54.195+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714171/comment/13997762","id":"13997762","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"you're right, the stack trace and scenario -\"heartbeat during app launch\" seems to match; closing as duplicate","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2014-05-14T16:58:03.801+0000","updated":"2014-05-14T16:58:03.801+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-2057/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1v8b3:"}}