{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13056409","self":"https://issues.apache.org/jira/rest/api/2/issue/13056409","key":"YARN-6344","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334216","id":"12334216","description":"2.9.0 release","name":"2.9.0","archived":false,"released":true,"releaseDate":"2017-11-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12339182","id":"12339182","name":"3.0.0-alpha4","archived":false,"released":true,"releaseDate":"2017-07-07"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-03-16T05:05:23.597+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 30 00:27:49 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_624802862_*|*_4_*:*_1_*:*_4322_*|*_5_*:*_2_*:*_1374315286_*|*_10002_*:*_2_*:*_7176688199","customfield_12312321":null,"resolutiondate":"2017-06-30T00:27:49.025+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-6344/watchers","watchCount":11,"isWatching":false},"created":"2017-03-15T19:37:38.411+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12535794","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12535794","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"13048455","key":"YARN-6289","self":"https://issues.apache.org/jira/rest/api/2/issue/13048455","fields":{"summary":"Fail to achieve data locality when runing MapReduce and Spark on HDFS","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12498432","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12498432","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12906904","key":"YARN-4287","self":"https://issues.apache.org/jira/rest/api/2/issue/12906904","fields":{"summary":"Capacity Scheduler: Rack Locality improvement","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-06-05T06:40:55.272+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319324","id":"12319324","name":"capacityscheduler"}],"timeoriginalestimate":null,"description":"When relaxing locality from node to rack, the {{node-locality-parameter}} is used: when scheduling opportunities for a scheduler key are more than the value of this parameter, we relax locality and try to assign the container to a node in the corresponding rack.\n\nOn the other hand, when relaxing locality to off-switch (i.e., assign the container anywhere in the cluster), we are using a {{localityWaitFactor}}, which is computed based on the number of outstanding requests for a specific scheduler key, which is divided by the size of the cluster. \nIn case of applications that request containers in big batches (e.g., traditional MR jobs), and for relatively small clusters, the localityWaitFactor does not affect relaxing locality much.\nHowever, in case of applications that request containers in small batches, this load factor takes a very small value, which leads to assigning off-switch containers too soon. This situation is even more pronounced in big clusters.\nFor example, if an application requests only one container per request, the locality will be relaxed after a single missed scheduling opportunity.\n\nThe purpose of this JIRA is to rethink the way we are relaxing locality for off-switch assignments.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12860053","id":"12860053","filename":"YARN-6344.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-23T01:10:40.381+0000","size":27331,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12860053/YARN-6344.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12861493","id":"12861493","filename":"YARN-6344.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-31T19:17:04.756+0000","size":31377,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12861493/YARN-6344.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12861539","id":"12861539","filename":"YARN-6344.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-31T22:59:56.062+0000","size":31474,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12861539/YARN-6344.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12861777","id":"12861777","filename":"YARN-6344.004.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-03T23:22:13.979+0000","size":21468,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12861777/YARN-6344.004.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12863501","id":"12863501","filename":"YARN-6344-branch-2.8.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-14T20:48:56.860+0000","size":20184,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12863501/YARN-6344-branch-2.8.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Add parameter for rack locality delay in CapacityScheduler","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15926830","id":"15926830","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"The described issue was observed together with [~asuresh] and [~curino], while examining some of our internal applications that request containers in small batches.\nWe also brought it to the attention of [~jlowe].\n\nOne way to solve the problem is to introduce an additional parameter, namely {{rack-locality-delay}}, which will work similarly to the {{node-locality-delay}}, and will therefore bypass the locality wait factor.\nThis way we will attempt assigning off-switch containers after {{rack-locality-delay}} missed opportunities.\n\nThoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-15T19:43:02.115+0000","updated":"2017-03-15T22:52:08.545+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15927509","id":"15927509","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curino","name":"curino","key":"curino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=curino&avatarId=21704","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=curino&avatarId=21704","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=curino&avatarId=21704","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=curino&avatarId=21704"},"displayName":"Carlo Curino","active":true,"timeZone":"Etc/UTC"},"body":"I agree with what [~kkaranasos] said. In our clusters, the localityWaitFactor (as it is today) it almost never leads to a reasonable behavior. For example, in a 5k nodes clusters, a very large job with 10k outstanding asks will only get to wait 2 (or up to 4) scheduling opportunities before giving up on the rack and going for off-switch. The change  [~kkaranasos] is proposing looked reasonable (he will share the code soon). We have been flighting it in tests clusters with good results, and will be running it in prod in the coming days. \n\nI think we could probably retain the current behavior if rack-locality-delay is not specified, but in most scenarios is equivalent to say \"we don't care about locality unless the job is many times bigger than the cluster\" in which case, we might just remove a bunch of code from RM. Am I missing something?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curino","name":"curino","key":"curino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=curino&avatarId=21704","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=curino&avatarId=21704","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=curino&avatarId=21704","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=curino&avatarId=21704"},"displayName":"Carlo Curino","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-16T05:05:23.597+0000","updated":"2017-03-16T05:05:23.597+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15932783","id":"15932783","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nroberts","name":"nroberts","key":"nroberts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nathan Roberts","active":true,"timeZone":"America/Chicago"},"body":"+1 on improving localityWaitFactor. It definitely won't behave well for applications that ask for resources in small batches. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nroberts","name":"nroberts","key":"nroberts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nathan Roberts","active":true,"timeZone":"America/Chicago"},"created":"2017-03-20T15:06:46.954+0000","updated":"2017-03-20T15:06:46.954+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15937502","id":"15937502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Adding a first patch.\nI have introduced a new parameter, namely {{rack-locality-delay}}, that is similar to the {{node-locality-delay}}, and determines after how many missed opportunities we can assign an off-switch container.\nWhen this parameter is set to -1, we fall back to the existing behavior that uses a load factor for determining off switch assignments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-23T01:10:40.387+0000","updated":"2017-03-23T01:10:40.387+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15937579","id":"15937579","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 19s{color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 12m 44s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 31s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 32s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 34s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 15s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  0m 58s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 21s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 30s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 29s{color} | {color:orange} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager: The patch generated 15 new + 505 unchanged - 3 fixed = 520 total (was 508) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 32s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 12s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  1s{color} | {color:green} The patch has no ill-formed XML file. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m  3s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 18s{color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 38m 59s{color} | {color:red} hadoop-yarn-server-resourcemanager in the patch failed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 17s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 60m 22s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed junit tests | hadoop.yarn.server.resourcemanager.security.TestDelegationTokenRenewer |\n|   | hadoop.yarn.server.resourcemanager.scheduler.capacity.TestApplicationLimits |\n|   | hadoop.yarn.server.resourcemanager.scheduler.capacity.TestApplicationLimitsByPartition |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Issue | YARN-6344 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12860053/YARN-6344.001.patch |\n| Optional Tests |  asflicense  xml  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 174ee9449549 3.13.0-106-generic #153-Ubuntu SMP Tue Dec 6 15:44:32 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / f462e1f |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-YARN-Build/15364/artifact/patchprocess/diff-checkstyle-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/15364/artifact/patchprocess/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/15364/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/15364/console |\n| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-23T02:18:49.606+0000","updated":"2017-03-23T02:18:49.606+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15937580","id":"15937580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"As I mentioned, in the patch I uploaded, if the new parameter ({{rack-locality-delay}}) is set to -1, the existing relax locality behavior is achieved.\nThe new functionality kicks in only for positive values of the parameter.\n\nSince we are at it, it might be useful to discuss if the existing behavior is still desirable.\nConsider a cluster of N nodes, and a resource request asking for C containers on L different locations (where locations is the sum of unique nodes and racks in the request).\nCurrently, rack assignment happens after node-locality-delay missed opportunities. The way this works is straightforward.\nOn the other hand, off-switch assignment happens after L * C / N missed opportunities, capped by the size of the cluster.\nThis means that we tend to allow off-switch assignments faster when: (a) the resource request targets a small number of nodes, (b) there are few containers requested, (c) the cluster is small, or for a combination thereof.\n\nThis seems to work well for apps requesting a big number of containers on a relatively small cluster. Let's see some examples:\n* On a 100-node cluster, requesting 100+ containers, off-switch assignment is dictated by the size of the cluster. This should be a typical MR application on a common cluster.\n* On a 100-node cluster, requesting 5 containers on 2 nodes of a single rack, will lead to off-switch assignment after 3 * 5 / 100 = 0.15 missed opportunities. This seems too pessimistic.\n* On a 2000-node cluster, any combination of L * C < 2000 (which should be the case more often than not), off-switch assignment happens after a single missed opportunity.\n\nNote that most of our applications fall in the third category.\n\nSo it seems that the L * C / N load factor not only is too pessimistic, but it also does not allow rack assignments, since it kicks in too fast: if off-switch assignment kicks in after a single missed opportunity, we essentially invalidate rack assignments.\nOne possible way to mitigate this problem could be to multiply this load factor with the node-locality-delay when it comes to rack assignments, and with the rack-locality-delay when it comes to off-switch assignments.\nThis way we also \"relax\" the node-locality-delay, increasing the probabilities for a rack assignment, and we make relax locality not kick in too soon.\n\nBut given it might affect the behavior of existing application, I would like to hear your opinion before making such a change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-23T02:19:23.769+0000","updated":"2017-03-23T17:35:41.473+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15938855","id":"15938855","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunilg","name":"sunilg","key":"sunilg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Govindan","active":true,"timeZone":"Asia/Kolkata"},"body":"Thanks [~kkaranasos]. Its a much needed effort to fast up or correct the delays for OFF_SWITCH when resource requests are too bug for an app, or too less for many apps in a big cluster. Nicely summarized the problem.\n\nI have a doubt/concern on configuring {{rack-locality-delay}}. From the POC patch, ideally you are looking for {{return missedOpportunities > getActualRackLocalityDelay();}} So this means, if we configure a lesser  value for {{rack-locality-delay}} compared to total-number-of-nodes, we can make faster allocation.\n\nBut number of nodes may increase/decrease in a cluster at regular interval. Why we are not considering a ratio to total-number-of-nodes? Did you met with some other pitfalls in tat approach. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunilg","name":"sunilg","key":"sunilg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Govindan","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-03-23T17:34:33.075+0000","updated":"2017-03-23T17:34:33.075+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15938932","id":"15938932","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 for the proposal, and thanks [~kkaranasos] for sharing detailed analysis and patch. \n\nOne question about the semantics of the new config: {{yarn.scheduler.capacity.rack-locality-delay}}.\n\nI think a valid config value should be >= {{node-locality-delay}}, correct? If so, do you think is it better to make it to an additional value of {{node-locality-delay}}, for example, node_locality_delay = x, and rack_locality_delay = y makes actual_rack_locality_delay = x + y.\n\n[~sunilg],\nbq. But number of nodes may increase/decrease in a cluster at regular interval. Why we are not considering a ratio to total-number-of-nodes? Did you met with some other pitfalls in tat approach. \nThere's a discussion at YARN-4287 about this before, https://issues.apache.org/jira/browse/YARN-4287?focusedCommentId=14980816&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14980816, I think it is one thing we can do in the future, but for now an absolute number of missed opportunity should be enough for most cases.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-23T18:10:56.216+0000","updated":"2017-03-23T18:10:56.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15938973","id":"15938973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you for the input, [~sunilg] and [~leftnoteasy].\n\n[~sunilg], indeed we could eventually give the parameter as a percentage of the cluster nodes, e.g., 0.25 would mean that we wait to hear from 25% of the cluster nodes before relaxing locality. But we would then have to change the node-locality-delay to be a percentage too, in order to be consistent. And this would mean that everybody would have to change its cluster configuration. So, like Wangda says, maybe it is better to keep it as an absolute value for now?\n\n[~leftnoteasy], I like your idea to put the rack-locality-delay as \"additional opportunities on top of node-locality-delay ones\". I will update the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-23T18:35:31.717+0000","updated":"2017-03-23T18:35:31.717+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15940808","id":"15940808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunilg","name":"sunilg","key":"sunilg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Govindan","active":true,"timeZone":"Asia/Kolkata"},"body":"Thanks [~leftnoteasy] [~kkaranasos]\nMakes sense for me. In future it ll be good addition. Agreeing to your points and lets keep it as it is.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunilg","name":"sunilg","key":"sunilg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Govindan","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-03-24T17:47:25.642+0000","updated":"2017-03-24T17:47:25.642+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15951521","id":"15951521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploading new version of the patch.\nI applied Wangda's suggestion to define the rack-locality-delay on top of the node-locality-delay.\nAlso fixed checkstyle issues and failing test cases.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-31T19:17:04.762+0000","updated":"2017-03-31T19:17:04.762+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15951528","id":"15951528","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"I just uploaded a new version in which I define the rack locality delay as additional missed opportunities on top of node locality delay, as per [~leftnoteasy]'s suggestion.\n\n[~leftnoteasy], [~sunilg], [~curino], [~asuresh] please give it a look, and let me know what you think.\nI personally like the idea, but I want to make sure it is more intuitive for the user to define it this way. I renamed the parameter to rack-locality-additional-delay to make more clear what it means.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-31T19:21:17.665+0000","updated":"2017-03-31T19:21:17.665+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15951663","id":"15951663","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  2m 29s{color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 20m 48s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 49s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 50s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 51s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 24s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 27s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 34s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 46s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 45s{color} | {color:orange} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager: The patch generated 3 new + 506 unchanged - 3 fixed = 509 total (was 509) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 47s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 15s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  2s{color} | {color:green} The patch has no ill-formed XML file. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 30s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 56m 35s{color} | {color:red} hadoop-yarn-server-resourcemanager in the patch failed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 40s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 92m 31s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed junit tests | hadoop.yarn.server.resourcemanager.TestRMRestart |\n|   | hadoop.yarn.server.resourcemanager.scheduler.capacity.TestContainerResizing |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Issue | YARN-6344 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12861493/YARN-6344.002.patch |\n| Optional Tests |  asflicense  xml  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 57d7525ec77b 3.13.0-92-generic #139-Ubuntu SMP Tue Jun 28 20:42:26 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 318bfb0 |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-YARN-Build/15458/artifact/patchprocess/diff-checkstyle-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/15458/artifact/patchprocess/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/15458/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/15458/console |\n| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-31T21:21:45.844+0000","updated":"2017-03-31T21:21:45.844+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15951760","id":"15951760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Fixing a couple more checkstyles and test cases.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-31T22:59:56.069+0000","updated":"2017-03-31T22:59:56.069+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15951861","id":"15951861","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 23s{color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 15m 17s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 33s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 31s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 36s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 13s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m  4s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 23s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 33s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 29s{color} | {color:green} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager: The patch generated 0 new + 505 unchanged - 3 fixed = 505 total (was 508) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 34s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 12s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  1s{color} | {color:green} The patch has no ill-formed XML file. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m  7s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 18s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 43m 49s{color} | {color:green} hadoop-yarn-server-resourcemanager in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 21s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 68m 26s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Issue | YARN-6344 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12861539/YARN-6344.003.patch |\n| Optional Tests |  asflicense  xml  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 863ab164e8e9 3.13.0-108-generic #155-Ubuntu SMP Wed Jan 11 16:58:52 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 73835c7 |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/15463/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/15463/console |\n| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-01T00:32:50.173+0000","updated":"2017-04-01T00:32:50.173+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15952813","id":"15952813","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"body":"[~kkaranasos], the patch LGTM. I like the idea of adding the rack locality delay on top of the node locality delay.\n\nMinor nit: Looks like you the imports have been re-ordered (do try to fix it... since it might lead to merge conflicts later)\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-02T19:01:33.815+0000","updated":"2017-04-02T19:01:33.815+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15954321","id":"15954321","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for checking the patch, [~asuresh]!\nYou are right about the imports, my IDE reordered them -- just uploaded a new version where I reverted those changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-03T23:23:42.977+0000","updated":"2017-04-03T23:23:42.977+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15954403","id":"15954403","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 30s{color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 13m 26s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 32s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 31s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 33s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 14s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  0m 59s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 21s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 30s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 29s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 32s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 12s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  1s{color} | {color:green} The patch has no ill-formed XML file. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m  3s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 18s{color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 38m 57s{color} | {color:red} hadoop-yarn-server-resourcemanager in the patch failed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 17s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 61m 15s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed junit tests | hadoop.yarn.server.resourcemanager.TestRMRestart |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Issue | YARN-6344 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12861777/YARN-6344.004.patch |\n| Optional Tests |  asflicense  xml  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 7b413031078d 3.13.0-106-generic #153-Ubuntu SMP Tue Dec 6 15:44:32 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 5faa949 |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/15494/artifact/patchprocess/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/15494/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/15494/console |\n| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-04T00:30:01.373+0000","updated":"2017-04-04T00:30:01.373+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15955874","id":"15955874","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"There is a failing test that seems to be unrelated. I just tested on trunk (without my changes) and it is failing intermittently.\n[~asuresh], can you please give a look at the latest patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-04T21:30:10.177+0000","updated":"2017-04-04T21:30:10.177+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15955890","id":"15955890","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~kkaranasos], thanks for update the patch, could you give me 1 more day to review the patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-04T21:33:51.338+0000","updated":"2017-04-04T21:33:51.338+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15955955","id":"15955955","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Of course, I'll wait for your feedback, [~leftnoteasy].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-04T22:09:43.995+0000","updated":"2017-04-04T22:09:43.995+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15957412","id":"15957412","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~kkaranasos], \n\n{code}\n281\t  private int getActualRackLocalityDelay() {\n282\t    return Math.min(rmContext.getScheduler().getNumClusterNodes(),\n283\t        application.getCSLeafQueue().getNodeLocalityDelay()\n284\t        + application.getCSLeafQueue().getRackLocalityAdditionalDelay());\n285\t  }\n{code}\n\nWill this cause the real_rack_locality_delay = node_locality_delay - 1 when getRackLocalityAdditionalDelay is not set?\n\n[~jlowe]: I think it's better to get review from you as well.\n\nThanks,","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-05T18:42:19.214+0000","updated":"2017-04-05T18:42:19.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15957652","id":"15957652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for checking the patch, [~leftnoteasy].\n\n{{getActualRackLocalityDelay}} is only called by the {{canAssign}} method, and within there I am falling back to the old behavior in case rack locality is set to -1, so what you are observing will not happen.\nI was also thinking we can push this logic inside the {{getActualRackLocalityDelay}}, but didn't do so to avoid evaluating the {{getActualRackLocalityDelay}} in case rack locality is set to -1 (existing behavior). \nLet me know what you think.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-05T20:53:47.078+0000","updated":"2017-04-05T20:53:47.078+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15957849","id":"15957849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"I'd prefer a configured rack locality delay of zero means no additional rack delay, but I see that is semantically different than disabling it altogether.  Specifying a rack locality delay of zero means it will _not_ scale the node locality delay based on the request/cluster sizes like it does today, whereas setting it to -1 will.  In that sense it's not purely an additional delay.  Given I don't know the complete backstory on the reasoning behind why it behaves the way it does for node locality delay, I can see the desire to leave the existing behavior unchanged when this new setting isn't configured.\n\nPatch looks good to me.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2017-04-05T22:08:19.060+0000","updated":"2017-04-05T22:08:19.060+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15958056","id":"15958056","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the feedback, [~jlowe].\nIndeed setting the additional rack delay to 0 has the double effect of no additional rack delay _and_ to _not_ fall back to the old behavior, while -1 just falls back to old behavior.\nIf we all agree, I wouldn't mind removing the old behavior completely. But as you say, I don't know the exact reason it is there, so it seems a less aggressive change to have the choice of falling back to the old behavior.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-05T23:52:38.589+0000","updated":"2017-04-05T23:52:38.589+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15959440","id":"15959440","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you all for the feedback. \nIf nobody objects, I will commit this later today.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-06T17:53:22.878+0000","updated":"2017-04-06T17:53:22.878+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15959746","id":"15959746","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"body":"Latest patch LGTM, thanks [~kkaranasos]. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-06T21:03:54.684+0000","updated":"2017-04-06T21:03:54.684+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15963686","id":"15963686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you for reviewing the patch, [~leftnoteasy], [~asuresh], [~sunilg], [~jlowe].\nJust committed it to trunk and branch-2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-11T00:38:57.135+0000","updated":"2017-04-11T00:38:57.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15968690","id":"15968690","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Huangkx6810","name":"Huangkx6810","key":"huangkx6810","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Huangkaixuan","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~kkaranasos]\nI noticed the patch has been merged into Hadoop 3.0 snapshot. Acutally, I am using Hadoop 2.7 and 2.8. Is there a way to port this patch to 2.7 and 2.8?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Huangkx6810","name":"Huangkx6810","key":"huangkx6810","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Huangkaixuan","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-14T06:30:43.922+0000","updated":"2017-04-14T06:30:43.922+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15969511","id":"15969511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching patch that can be applied to branch-2.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-14T20:48:56.866+0000","updated":"2017-04-14T20:48:56.866+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15969514","id":"15969514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~Huangkx6810]. I just uploaded a patch that can be applied in branch-2.8. I built and ran some tests locally and it looks good.\n\nYou cannot apply this new patch directly to 2.7 though. The major change between 2.7 and 2.8 is that you will need to apply the changes I did to {{RegularContainerAllocator}} directly to the {{LeafQueue}} instead. Try to see what I mean and if you need help with 2.7, let me know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-14T20:52:53.590+0000","updated":"2017-04-14T20:52:53.590+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15971213","id":"15971213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #11591 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/11591/])\nYARN-6344. Add parameter for rack locality delay in CapacityScheduler. (kkaranasos: rev 7999318af12a75b35815461c601d4c25750e8340)\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/TestLeafQueue.java\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/conf/capacity-scheduler.xml\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/SchedulerApplicationAttempt.java\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/CapacitySchedulerConfiguration.java\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/LeafQueue.java\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/allocator/RegularContainerAllocator.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-17T15:43:24.211+0000","updated":"2017-04-17T15:43:24.211+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15972069","id":"15972069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Huangkx6810","name":"Huangkx6810","key":"huangkx6810","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Huangkaixuan","active":true,"timeZone":"Etc/UTC"},"body":"Thanks, [~kkaranasos]. \nSince this seems to be a critical performance bug, do you plan to merge the fix for 2.8 or 2.7 ? BTW, How YARN community decide the patches get merged to branches? I think it's important for many many users of YARN 2.7 and 2.8 releases.  [~leftnoteasy]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Huangkx6810","name":"Huangkx6810","key":"huangkx6810","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Huangkaixuan","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-18T03:34:04.820+0000","updated":"2017-04-18T03:34:52.423+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15973084","id":"15973084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~Huangkx6810], if you could help to verify it works in 2.8, I can help with review and merge to branch-2.8. For 2.7 it might be tricker since code is pretty diverged between 2.8 and 2.7, so I think more efforts required to back port 2.7.x.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-18T17:09:54.837+0000","updated":"2017-04-18T17:09:54.837+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15973349","id":"15973349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"[~Huangkx6810], as [~wangda] said, please let us know if it worked on 2.8 (I tested it locally when doing the porting).\nThen we can discuss about 2.7 if it is really required. Also, let us know if it helped with YARN-6289 (and if not, what did you observe?).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-18T19:35:05.806+0000","updated":"2017-04-18T19:35:05.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15984201","id":"15984201","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Huangkx6810","name":"Huangkx6810","key":"huangkx6810","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Huangkaixuan","active":true,"timeZone":"Etc/UTC"},"body":"[~leftnoteasy],  [~kkaranasos]\nI have verified that it works in 2.8 and YARN-6344 issue fixes YARN-6289.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Huangkx6810","name":"Huangkx6810","key":"huangkx6810","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Huangkaixuan","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-26T05:36:35.473+0000","updated":"2017-04-26T05:36:55.407+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15985667","id":"15985667","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~Huangkx6810] for testing and getting back to us.\n\nI just reopened the JIRA so Jenkins can run tests for the 2.8 patch, will commit once Jenkins comes back.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-26T22:25:32.975+0000","updated":"2017-04-26T22:25:32.975+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15985789","id":"15985789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 17m 16s{color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  8m 47s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 27s{color} | {color:green} branch-2.8 passed with JDK v1.8.0_131 {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 32s{color} | {color:green} branch-2.8 passed with JDK v1.7.0_121 {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 20s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 44s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 19s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 11s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 21s{color} | {color:green} branch-2.8 passed with JDK v1.8.0_131 {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 24s{color} | {color:green} branch-2.8 passed with JDK v1.7.0_121 {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 30s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 25s{color} | {color:green} the patch passed with JDK v1.8.0_131 {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 25s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 28s{color} | {color:green} the patch passed with JDK v1.7.0_121 {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 28s{color} | {color:green} the patch passed {color} |\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 17s{color} | {color:orange} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager: The patch generated 3 new + 103 unchanged - 2 fixed = 106 total (was 105) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 34s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 14s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  1s{color} | {color:green} The patch has no ill-formed XML file. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 19s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 17s{color} | {color:green} the patch passed with JDK v1.8.0_131 {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 21s{color} | {color:green} the patch passed with JDK v1.7.0_121 {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}  0m  7s{color} | {color:red} hadoop-yarn-server-resourcemanager in the patch failed with JDK v1.7.0_121. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 31s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black}113m 23s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| JDK v1.8.0_131 Failed junit tests | hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:5970e82 |\n| JIRA Issue | YARN-6344 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12863501/YARN-6344-branch-2.8.patch |\n| Optional Tests |  asflicense  xml  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 4155c6dcf3a9 3.13.0-110-generic #157-Ubuntu SMP Mon Feb 20 11:54:05 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | branch-2.8 / 73563bc |\n| Default Java | 1.7.0_121 |\n| Multi-JDK versions |  /usr/lib/jvm/java-8-oracle:1.8.0_131 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_121 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-YARN-Build/15747/artifact/patchprocess/diff-checkstyle-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/15747/artifact/patchprocess/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager-jdk1.7.0_121.txt |\n| JDK v1.7.0_121  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/15747/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/15747/console |\n| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-27T00:22:47.916+0000","updated":"2017-04-27T00:22:47.916+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/15985956","id":"15985956","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 18m 48s{color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  8m 59s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 27s{color} | {color:green} branch-2.8 passed with JDK v1.8.0_131 {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 31s{color} | {color:green} branch-2.8 passed with JDK v1.7.0_121 {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 20s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 39s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 17s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m  9s{color} | {color:green} branch-2.8 passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 24s{color} | {color:green} branch-2.8 passed with JDK v1.8.0_131 {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 26s{color} | {color:green} branch-2.8 passed with JDK v1.7.0_121 {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 33s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 27s{color} | {color:green} the patch passed with JDK v1.8.0_131 {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 27s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 32s{color} | {color:green} the patch passed with JDK v1.7.0_121 {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 32s{color} | {color:green} the patch passed {color} |\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 19s{color} | {color:orange} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager: The patch generated 3 new + 103 unchanged - 2 fixed = 106 total (was 105) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 37s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 14s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  0s{color} | {color:green} The patch has no ill-formed XML file. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 19s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 19s{color} | {color:green} the patch passed with JDK v1.8.0_131 {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 23s{color} | {color:green} the patch passed with JDK v1.7.0_121 {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 81m 43s{color} | {color:red} hadoop-yarn-server-resourcemanager in the patch failed with JDK v1.7.0_121. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 19s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black}199m 46s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| JDK v1.8.0_131 Failed junit tests | hadoop.yarn.server.resourcemanager.TestAMAuthorization |\n|   | hadoop.yarn.server.resourcemanager.TestClientRMTokens |\n|   | hadoop.yarn.server.resourcemanager.scheduler.capacity.TestCapacitySchedulerSurgicalPreemption |\n| JDK v1.7.0_121 Failed junit tests | hadoop.yarn.server.resourcemanager.scheduler.capacity.TestCapacitySchedulerLazyPreemption |\n|   | hadoop.yarn.server.resourcemanager.TestAMAuthorization |\n|   | hadoop.yarn.server.resourcemanager.TestClientRMTokens |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:5970e82 |\n| JIRA Issue | YARN-6344 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12863501/YARN-6344-branch-2.8.patch |\n| Optional Tests |  asflicense  xml  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 959aaf084143 3.13.0-116-generic #163-Ubuntu SMP Fri Mar 31 14:13:22 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | branch-2.8 / 73563bc |\n| Default Java | 1.7.0_121 |\n| Multi-JDK versions |  /usr/lib/jvm/java-8-oracle:1.8.0_131 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_121 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-YARN-Build/15754/artifact/patchprocess/diff-checkstyle-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/15754/artifact/patchprocess/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager-jdk1.7.0_121.txt |\n| JDK v1.7.0_121  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/15754/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/15754/console |\n| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-27T03:51:14.618+0000","updated":"2017-04-27T03:51:14.618+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/16063701","id":"16063701","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi, is the branch-2.8 patch going to be committed? This JIRA is in a dangling state, I'd like to resolve it for the release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-26T20:23:51.941+0000","updated":"2017-06-26T20:23:51.941+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/16063804","id":"16063804","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"hi [~andrew.wang], I just double-checked: the patch is already committed in branch-2 and trunk.\nWe had re-opened the JIRA as I uploaded an additional patch for 2.8 and wanted to check if it is working.\nUnless we want to add it to a 2.8 release, I suggest to mark it as resolved. \n[~leftnoteasy], what do you think is better?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-26T21:11:18.757+0000","updated":"2017-06-26T21:11:18.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056409/comment/16069264","id":"16069264","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Konstantinos, I'm going to resolve for now so the release notes generation works. Please re-open if you need a run for a branch-2.8 patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-30T00:27:49.071+0000","updated":"2017-06-30T00:27:49.071+0000"}],"maxResults":42,"total":42,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-6344/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3cbof:"}}