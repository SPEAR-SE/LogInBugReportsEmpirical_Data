{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13028312","self":"https://issues.apache.org/jira/rest/api/2/issue/13028312","key":"YARN-6006","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-12-15T11:18:17.966+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Dec 15 17:07:36 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-6006/watchers","watchCount":4,"isWatching":false},"created":"2016-12-15T07:32:32.593+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327197","id":"12327197","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-12-16T01:02:39.708+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319323","id":"12319323","name":"nodemanager"}],"timeoriginalestimate":null,"description":"log aggregation is enabled, nodemanager died with oom exception. exception as sreenshot. and NM_heapsize is 4096MB","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12843362","id":"12843362","filename":"e.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shenyinjie","name":"shenyinjie","key":"shenyinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shenyinjie&avatarId=32638","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shenyinjie&avatarId=32638","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shenyinjie&avatarId=32638","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shenyinjie&avatarId=32638"},"displayName":"Shen Yinjie","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-15T07:40:37.509+0000","size":100345,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12843362/e.png"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Log aggregation causes nodemanager OOM","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shenyinjie","name":"shenyinjie","key":"shenyinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shenyinjie&avatarId=32638","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shenyinjie&avatarId=32638","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shenyinjie&avatarId=32638","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shenyinjie&avatarId=32638"},"displayName":"Shen Yinjie","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shenyinjie","name":"shenyinjie","key":"shenyinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shenyinjie&avatarId=32638","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shenyinjie&avatarId=32638","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shenyinjie&avatarId=32638","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shenyinjie&avatarId=32638"},"displayName":"Shen Yinjie","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13028312/comment/15750717","id":"15750717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shenyinjie","name":"shenyinjie","key":"shenyinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shenyinjie&avatarId=32638","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shenyinjie&avatarId=32638","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shenyinjie&avatarId=32638","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shenyinjie&avatarId=32638"},"displayName":"Shen Yinjie","active":true,"timeZone":"Etc/UTC"},"body":"refer to the code in {{AggregatedLogFormat.java}}\n{code}    private void writeVersion() throws IOException {\n      DataOutputStream out = this.writer.prepareAppendKey(-1);\n      VERSION_KEY.write(out);\n      out.close();\n      out = this.writer.prepareAppendValue(-1);\n      out.writeInt(VERSION);\n      out.close();\n    } {code}\n{{DataOutputStream out}} may cannot be closed while exception occurs.so need to add {{finally}} module to ensure stream  closed..","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shenyinjie","name":"shenyinjie","key":"shenyinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shenyinjie&avatarId=32638","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shenyinjie&avatarId=32638","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shenyinjie&avatarId=32638","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shenyinjie&avatarId=32638"},"displayName":"Shen Yinjie","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-15T08:02:00.054+0000","updated":"2016-12-15T08:11:49.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13028312/comment/15750731","id":"15750731","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shenyinjie","name":"shenyinjie","key":"shenyinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shenyinjie&avatarId=32638","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shenyinjie&avatarId=32638","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shenyinjie&avatarId=32638","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shenyinjie&avatarId=32638"},"displayName":"Shen Yinjie","active":true,"timeZone":"Etc/UTC"},"body":"attach patch fixed that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shenyinjie","name":"shenyinjie","key":"shenyinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shenyinjie&avatarId=32638","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shenyinjie&avatarId=32638","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shenyinjie&avatarId=32638","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shenyinjie&avatarId=32638"},"displayName":"Shen Yinjie","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-15T08:09:06.124+0000","updated":"2016-12-15T08:09:06.124+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13028312/comment/15751107","id":"15751107","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 19s{color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:red}-1{color} | {color:red} test4tests {color} | {color:red}  0m  0s{color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  8m 10s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 33s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 21s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 34s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 14s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m  2s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 32s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 31s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 31s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 31s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 18s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 33s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 10s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m  3s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 25s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  2m 25s{color} | {color:green} hadoop-yarn-common in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 16s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 19m 21s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Issue | YARN-6006 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12843369/YARN-6006_1.patch |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux ffd6dea65476 3.13.0-103-generic #150-Ubuntu SMP Thu Nov 24 10:34:17 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 64a2d5b |\n| Default Java | 1.8.0_111 |\n| findbugs | v3.0.0 |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/14327/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/14327/console |\n| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-15T11:18:17.966+0000","updated":"2016-12-15T11:18:17.966+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13028312/comment/15751885","id":"15751885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi [~shenyinjie],\nAgree that during the writeVersion it might have collected OOM but it might not  be the exact reason for the OOM. Did you get to take heap/memory dump ? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-12-15T17:07:36.492+0000","updated":"2016-12-15T17:07:36.492+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-6006/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i37mnr:"}}