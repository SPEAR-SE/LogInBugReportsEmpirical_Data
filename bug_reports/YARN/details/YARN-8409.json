{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13165018","self":"https://issues.apache.org/jira/rest/api/2/issue/13165018","key":"YARN-8409","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12342758","id":"12342758","name":"3.2.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342982","id":"12342982","description":"3.1.1 Release","name":"3.1.1","archived":false,"released":true,"releaseDate":"2018-08-07"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-06-26T22:38:33.513+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jun 28 17:17:30 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_2_*:*_1570899141_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_2_*:*_144899328","customfield_12312321":null,"resolutiondate":"2018-06-28T17:13:10.460+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-8409/watchers","watchCount":4,"isWatching":false},"created":"2018-06-08T20:36:32.049+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12342982","id":"12342982","description":"3.1.1 Release","name":"3.1.1","archived":false,"released":true,"releaseDate":"2018-08-07"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-06-28T17:17:30.919+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"In RM-HA env, kill ZK leader and then perform RM failover. \r\n\r\nSometimes, active RM gets NPE and fail to come up successfully\r\n{code:java}\r\n\r\n2018-06-08 10:31:03,007 INFO  client.ZooKeeperSaslClient (ZooKeeperSaslClient.java:run(289)) - Client will use GSSAPI as SASL mechanism.\r\n\r\n2018-06-08 10:31:03,008 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(1019)) - Opening socket connection to server xxx/xxx:2181. Will attempt to SASL-authenticate using Login Context section 'Client'\r\n\r\n2018-06-08 10:31:03,009 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1146)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect\r\n\r\njava.net.ConnectException: Connection refused\r\n\r\nat sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\r\n\r\nat sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)\r\n\r\nat org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)\r\n\r\nat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1125)\r\n\r\n2018-06-08 10:31:03,344 INFO  service.AbstractService (AbstractService.java:noteFailure(267)) - Service org.apache.hadoop.yarn.server.resourcemanager.ActiveStandbyElectorBasedElectorService failed in state INITED\r\n\r\njava.lang.NullPointerException\r\n\r\nat org.apache.hadoop.ha.ActiveStandbyElector$3.run(ActiveStandbyElector.java:1033)\r\n\r\nat org.apache.hadoop.ha.ActiveStandbyElector$3.run(ActiveStandbyElector.java:1030)\r\n\r\nat org.apache.hadoop.ha.ActiveStandbyElector.zkDoWithRetries(ActiveStandbyElector.java:1095)\r\n\r\nat org.apache.hadoop.ha.ActiveStandbyElector.zkDoWithRetries(ActiveStandbyElector.java:1087)\r\n\r\nat org.apache.hadoop.ha.ActiveStandbyElector.createWithRetries(ActiveStandbyElector.java:1030)\r\n\r\nat org.apache.hadoop.ha.ActiveStandbyElector.ensureParentZNode(ActiveStandbyElector.java:347)\r\n\r\nat org.apache.hadoop.yarn.server.resourcemanager.ActiveStandbyElectorBasedElectorService.serviceInit(ActiveStandbyElectorBasedElectorService.java:110)\r\n\r\nat org.apache.hadoop.service.AbstractService.init(AbstractService.java:164)\r\n\r\nat org.apache.hadoop.service.CompositeService.serviceInit(CompositeService.java:108)\r\n\r\nat org.apache.hadoop.yarn.server.resourcemanager.ResourceManager.serviceInit(ResourceManager.java:336)\r\n\r\nat org.apache.hadoop.service.AbstractService.init(AbstractService.java:164)\r\n\r\nat org.apache.hadoop.yarn.server.resourcemanager.ResourceManager.main(ResourceManager.java:1479)\r\n\r\n2018-06-08 10:31:03,345 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(409)) - Yielding from election{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12929486","id":"12929486","filename":"YARN-8409.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-06-27T21:50:11.992+0000","size":3947,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12929486/YARN-8409.002.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"ActiveStandbyElectorBasedElectorService is failing with NPE","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yeshavora","name":"yeshavora","key":"yeshavora","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10436","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10436","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10436","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10436"},"displayName":"Yesha Vora","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yeshavora","name":"yeshavora","key":"yeshavora","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10436","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10436","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10436","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10436"},"displayName":"Yesha Vora","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13165018/comment/16524290","id":"16524290","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"body":"This happens when RM is started immediately after killing zookeeper leader. \r\n The {{zkClient}} reference in {{ActiveStandbyElector}} is null which causes NPE.\r\n\r\nBelow is the chain of calls:\r\n # In {{ActiveStandbyElector}} constructor, at line 274: {{reEstablishSession()}} is invoked.\r\n # {{reEstablishSession}} tries to create zookeeper connection at line 825.\r\n # {{createConnection}} calls {{connectToZookeeper}} at line 850 to initialize {{zkClient}}\r\n # However, {{connectToZookeeper}} throws IOException because of session timeout\r\n # {{zkClient}} never gets initialized and is {{null}}.\r\n\r\n{{ActiveStandbyElectorBasedElectorService}} currently doesn't care if elector is connected to zookeeper and executes {{elector.ensureParentZNode()}} which then throws NPE.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-06-26T22:38:33.513+0000","updated":"2018-06-27T00:51:40.670+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13165018/comment/16524406","id":"16524406","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"body":"Unit test is pending.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-06-27T00:58:06.638+0000","updated":"2018-06-27T00:58:06.638+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13165018/comment/16524552","id":"16524552","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 32s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:red}-1{color} | {color:red} test4tests {color} | {color:red}  0m  0s{color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 26m 18s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 42s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 13s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 45s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 54s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m  9s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 27s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 42s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 38s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 38s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m  9s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 41s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 14s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 15s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 25s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 68m 54s{color} | {color:red} hadoop-yarn-server-resourcemanager in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 23s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}127m 29s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.yarn.server.resourcemanager.applicationsmanager.TestAMRestart |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:abb62dd |\r\n| JIRA Issue | YARN-8409 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12929301/YARN-8409.001.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux 218feda4cf95 3.13.0-139-generic #188-Ubuntu SMP Tue Jan 9 14:43:09 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 62d83ca |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_171 |\r\n| findbugs | v3.1.0-RC1 |\r\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/21122/artifact/out/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/21122/testReport/ |\r\n| Max. process+thread count | 856 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager |\r\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/21122/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-06-27T04:11:08.634+0000","updated":"2018-06-27T04:11:08.634+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13165018/comment/16525688","id":"16525688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"body":"[~eyang] could you please review patch 2?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-06-27T22:30:39.470+0000","updated":"2018-06-27T22:30:39.470+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13165018/comment/16525805","id":"16525805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 35s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m 48s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 29m 15s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 32m 21s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 21s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  2m 17s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 13m 46s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  3m 33s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 33s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 18s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 36s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 30m 49s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 30m 49s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 21s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  2m 16s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 21s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  3m 50s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 32s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  9m 16s{color} | {color:green} hadoop-common in the patch passed. {color} |\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 68m 54s{color} | {color:red} hadoop-yarn-server-resourcemanager in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 41s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}215m 39s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:abb62dd |\r\n| JIRA Issue | YARN-8409 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12929486/YARN-8409.002.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux da6557d9b103 3.13.0-143-generic #192-Ubuntu SMP Tue Feb 27 10:45:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 8752a48 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_171 |\r\n| findbugs | v3.1.0-RC1 |\r\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/21136/artifact/out/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-resourcemanager.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/21136/testReport/ |\r\n| Max. process+thread count | 1348 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-common-project/hadoop-common hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager U: . |\r\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/21136/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-06-28T01:40:20.688+0000","updated":"2018-06-28T01:40:20.688+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13165018/comment/16526497","id":"16526497","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eyang","name":"eyang","key":"eyang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"[~csingh] Thank you for the patch.  TestAppManager error seems to be Jenkins out of resource to fork.  The error doesn't happen when I ran the unit test locally.  RM handles ZooKeeper unavailability more gracefully with this patch.  +1 on this patch, and will commit shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eyang","name":"eyang","key":"eyang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-06-28T16:35:42.526+0000","updated":"2018-06-28T16:35:42.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13165018/comment/16526561","id":"16526561","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #14496 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/14496/])\nYARN-8409.  Fixed NPE in ActiveStandbyElectorBasedElectorService.        (eyang: rev 384764cdeac6490bc47fa0eb7b936baa4c0d3230)\n* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ZKFailoverController.java\n* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/ActiveStandbyElector.java\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/TestRMEmbeddedElector.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2018-06-28T17:12:04.655+0000","updated":"2018-06-28T17:12:04.655+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13165018/comment/16526578","id":"16526578","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~eyang] for reviewing and merging the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csingh","name":"csingh","key":"csingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csingh&avatarId=24876","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csingh&avatarId=24876","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csingh&avatarId=24876","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csingh&avatarId=24876"},"displayName":"Chandni Singh","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-06-28T17:17:30.919+0000","updated":"2018-06-28T17:17:30.919+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-8409/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3uocv:"}}