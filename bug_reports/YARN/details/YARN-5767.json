{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13014424","self":"https://issues.apache.org/jira/rest/api/2/issue/13014424","key":"YARN-5767","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329059","id":"12329059","description":"2.8.0 release","name":"2.8.0","archived":false,"released":true,"releaseDate":"2017-03-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12337978","id":"12337978","name":"3.0.0-alpha2","archived":false,"released":true,"releaseDate":"2017-01-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-10-23T23:40:53.743+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Oct 28 17:17:23 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_68631_*|*_3_*:*_1_*:*_171837282_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_409136758","customfield_12312321":null,"resolutiondate":"2016-10-28T16:13:54.582+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5767/watchers","watchCount":6,"isWatching":false},"created":"2016-10-21T22:49:52.328+0000","customfield_12310192":"This issue fixes a bug in how resources are evicted from the PUBLIC and PRIVATE yarn local caches used by the node manager for resource localization. In summary, the caches are now properly cleaned based on an LRU policy across both the public and private caches.","customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["oct16-easy"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327197","id":"12327197","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12327585","id":"12327585","description":"2.7.0 release","name":"2.7.0","archived":false,"released":true,"releaseDate":"2015-04-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335735","id":"12335735","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[{"id":"12484634","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12484634","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"13016212","key":"YARN-5797","self":"https://issues.apache.org/jira/rest/api/2/issue/13016212","fields":{"summary":"Add metrics to the node manager for cleaning the PUBLIC and PRIVATE caches","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-10-28T17:20:29.878+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"If you look at {{ResourceLocalizationService#handleCacheCleanup}}, you can see that public resources are added to the {{ResourceRetentionSet}} first followed by private resources:\n{code:java}\nprivate void handleCacheCleanup(LocalizationEvent event) {\n  ResourceRetentionSet retain =\n    new ResourceRetentionSet(delService, cacheTargetSize);\n  retain.addResources(publicRsrc);\n  if (LOG.isDebugEnabled()) {\n    LOG.debug(\"Resource cleanup (public) \" + retain);\n  }\n  for (LocalResourcesTracker t : privateRsrc.values()) {\n    retain.addResources(t);\n    if (LOG.isDebugEnabled()) {\n      LOG.debug(\"Resource cleanup \" + t.getUser() + \":\" + retain);\n    }\n  }\n  //TODO Check if appRsrcs should also be added to the retention set.\n}\n{code}\n\nUnfortunately, if we look at {{ResourceRetentionSet#addResources}} we see that this means public resources are deleted first until the target cache size is met:\n{code:java}\npublic void addResources(LocalResourcesTracker newTracker) {\n  for (LocalizedResource resource : newTracker) {\n    currentSize += resource.getSize();\n    if (resource.getRefCount() > 0) {\n      // always retain resources in use\n      continue;\n    }\n    retain.put(resource, newTracker);\n  }\n  for (Iterator<Map.Entry<LocalizedResource,LocalResourcesTracker>> i =\n         retain.entrySet().iterator();\n       currentSize - delSize > targetSize && i.hasNext();) {\n    Map.Entry<LocalizedResource,LocalResourcesTracker> rsrc = i.next();\n    LocalizedResource resource = rsrc.getKey();\n    LocalResourcesTracker tracker = rsrc.getValue();\n    if (tracker.remove(resource, delService)) {\n      delSize += resource.getSize();\n      i.remove();\n    }\n  }\n}\n{code}\n\nThe result of this is that resources in the private cache are only deleted in the cases where:\n# The cache size is larger than the target cache size and the public cache is empty.\n# The cache size is larger than the target cache size and everything in the public cache is being used by a running container.\n\nFor clusters that primarily use the public cache (i.e. make use of the shared cache), this means that the most commonly used resources can be deleted before old resources in the private cache. Furthermore, the private cache can continue to grow over time causing more and more churn in the public cache.\n\nAdditionally, the same problem exists within the private cache. Since resources are added to the retention set on a user by user basis, resources will get cleaned up one user at a time in the order that privateRsrc.values() returns the LocalResourcesTracker. So if user1 has 10MB in their cache and user2 has 100MB in their cache and the target size of the cache is 50MB, user1 could potentially have their entire cache removed before anything is deleted from the user2 cache.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12834856","id":"12834856","filename":"YARN-5767-trunk-v1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-23T22:33:41.753+0000","size":30992,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12834856/YARN-5767-trunk-v1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12835016","id":"12835016","filename":"YARN-5767-trunk-v2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-24T21:31:53.732+0000","size":31569,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12835016/YARN-5767-trunk-v2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12835025","id":"12835025","filename":"YARN-5767-trunk-v3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-24T22:15:21.471+0000","size":31568,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12835025/YARN-5767-trunk-v3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12835439","id":"12835439","filename":"YARN-5767-trunk-v4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-27T00:14:02.926+0000","size":32566,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12835439/YARN-5767-trunk-v4.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Fix the order that resources are cleaned up from the local Public/Private caches","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15596593","id":"15596593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"I see two initial high-level approaches to this problem:\n# Add all resources from the public and private cache to the retention set at the same time. Then resources across all caches will be removed using an LRU eviction strategy.\n# Use separate retention sets for the public and private caches. This way, an admin can set separate retention sizes for the public and private cache. Furthermore, the caches will be isolated from each other and a large file being localized in a user cache will not cause churn in the public cache or visa versa.\n\nCurrently I am leaning towards #2. Please let me know your thoughts! Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-21T22:50:56.393+0000","updated":"2016-10-21T22:50:56.393+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15600416","id":"15600416","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"Attached is a v1 patch for trunk.\n\nIn this initial patch I actually went with approach #1.\n\nHere is a summary of the modifications this patch makes:\n# Renamed the {{ResourceRetentionSet}} class to {{LocalCacheCleaner}}. In the patch it looks like a delete/add.\n# Modified {{LocalCacheCleaner#addResources}} so that it only adds resources to the map and does not clean.\n# Added a new method {{LocalCacheCleaner#cleanCache}} that is actually responsible for cleaning the cache. The general intention is that you would add a bunch of resources to the cleaner, and then call clean. All resources that the cleaner is aware of at that point will get cleaned up on an LRU basis.\n# Added a new stats class to {{LocalCacheCleaner}} that keeps track of the same stats {{ResourceRetentionSet}} did, plus an optional more detailed breakdown of what was cleaned from private caches.\n# Added a new test class {{TestLocalCacheCleanup}}. This tests a basic cleanup, a cleanup where there are resources with positive ref counts, tests that the cleaner is indeed using an LRU policy across both private and public caches, and finally tests that the cleanup stats are correct.\n# Deleted the {{TestRetentionSet}} class because it is now redundant with {{TestLocalCacheCleanup}}.\n\nPlease let me know your thoughts! If there is too much going on in the patch, I can always break it down into smaller ones. Thanks.\n\n/cc [~jlowe] [~sjlee0]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-23T22:33:41.760+0000","updated":"2016-10-23T22:33:41.760+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15600419","id":"15600419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"Submitting patch for a qa run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-23T22:34:58.125+0000","updated":"2016-10-23T22:34:58.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15600496","id":"15600496","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 19s {color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 6m 41s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 27s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 18s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 26s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 13s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 40s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 17s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 22s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 24s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 24s {color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red} 0m 15s {color} | {color:red} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager: The patch generated 6 new + 160 unchanged - 27 fixed = 166 total (was 187) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 24s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 10s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:red}-1{color} | {color:red} findbugs {color} | {color:red} 0m 47s {color} | {color:red} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager generated 1 new + 0 unchanged - 0 fixed = 1 total (was 0) {color} |\n| {color:red}-1{color} | {color:red} javadoc {color} | {color:red} 0m 14s {color} | {color:red} hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-nodemanager generated 2 new + 237 unchanged - 0 fixed = 239 total (was 237) {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 15m 3s {color} | {color:green} hadoop-yarn-server-nodemanager in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 15s {color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 27m 55s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| FindBugs | module:hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager |\n|  |  org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.LocalCacheCleaner$LRUComparator implements Comparator but not Serializable  At LocalCacheCleaner.java:Serializable  At LocalCacheCleaner.java:[lines 159-168] |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:9560f25 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12834856/YARN-5767-trunk-v1.patch |\n| JIRA Issue | YARN-5767 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 5903daa0a638 3.13.0-95-generic #142-Ubuntu SMP Fri Aug 12 17:00:09 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / d0a3479 |\n| Default Java | 1.8.0_101 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-YARN-Build/13483/artifact/patchprocess/diff-checkstyle-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-nodemanager.txt |\n| findbugs | https://builds.apache.org/job/PreCommit-YARN-Build/13483/artifact/patchprocess/new-findbugs-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-nodemanager.html |\n| javadoc | https://builds.apache.org/job/PreCommit-YARN-Build/13483/artifact/patchprocess/diff-javadoc-javadoc-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-nodemanager.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/13483/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/13483/console |\n| Powered by | Apache Yetus 0.3.0   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-23T23:40:53.743+0000","updated":"2016-10-23T23:40:53.743+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15603288","id":"15603288","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching a v2 patch for trunk. This new version simply fixes checkstyles and findbugs. Here is a summary:\n\n# Add javadoc comments and fix spacing.\n# Add a hashcode method and serializable interface to {{LocalCacheCleaner#LRUComparator}}.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-24T21:31:53.736+0000","updated":"2016-10-24T21:31:53.736+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15603367","id":"15603367","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 10s {color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 6m 54s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 25s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 18s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 27s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 13s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 40s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 17s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 21s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 23s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 23s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 16s {color} | {color:green} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager: The patch generated 0 new + 160 unchanged - 27 fixed = 160 total (was 187) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 23s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 10s {color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} whitespace {color} | {color:red} 0m 0s {color} | {color:red} The patch has 1 line(s) that end in whitespace. Use git apply --whitespace=fix. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 45s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 13s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 14m 53s {color} | {color:green} hadoop-yarn-server-nodemanager in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 16s {color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 27m 42s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:9560f25 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12835016/YARN-5767-trunk-v2.patch |\n| JIRA Issue | YARN-5767 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 2f2b8c5e8486 3.13.0-93-generic #140-Ubuntu SMP Mon Jul 18 21:21:05 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / a1a0281 |\n| Default Java | 1.8.0_101 |\n| findbugs | v3.0.0 |\n| whitespace | https://builds.apache.org/job/PreCommit-YARN-Build/13492/artifact/patchprocess/whitespace-eol.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/13492/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/13492/console |\n| Powered by | Apache Yetus 0.3.0   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-24T22:06:26.943+0000","updated":"2016-10-24T22:06:26.943+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15603387","id":"15603387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"V3 attached. Fixed whitespace.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-24T22:15:21.543+0000","updated":"2016-10-24T22:15:21.543+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15603469","id":"15603469","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 16s {color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 8m 3s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 33s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 19s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 31s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 14s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 48s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 20s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 26s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 29s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 29s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 17s {color} | {color:green} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager: The patch generated 0 new + 159 unchanged - 27 fixed = 159 total (was 186) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 29s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 11s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 55s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 17s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 14m 58s {color} | {color:green} hadoop-yarn-server-nodemanager in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 17s {color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 30m 4s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:9560f25 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12835025/YARN-5767-trunk-v3.patch |\n| JIRA Issue | YARN-5767 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 815705b05614 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 9d17585 |\n| Default Java | 1.8.0_101 |\n| findbugs | v3.0.0 |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/13493/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/13493/console |\n| Powered by | Apache Yetus 0.3.0   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-24T22:48:48.273+0000","updated":"2016-10-24T22:48:48.273+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15606624","id":"15606624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miklos.szegedi%40cloudera.com","name":"miklos.szegedi@cloudera.com","key":"miklos.szegedi@cloudera.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miklos.szegedi%40cloudera.com&avatarId=32342","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miklos.szegedi%40cloudera.com&avatarId=32342","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miklos.szegedi%40cloudera.com&avatarId=32342","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miklos.szegedi%40cloudera.com&avatarId=32342"},"displayName":"Miklos Szegedi","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 (non-binding) Thank you, [~ctrezzo]!\n\nI have a few optional comments:\n\ntestLRUAcrossTrackers:\nThe test does not check whether the right resource was deleted from each list. \nYou might want to use resources.getLocalRsrc().containsKey here just like in testPositiveRefCount.\n\nLocalCacheCleanerStats:\nIt would be useful in the future for debugging, if toStringDetailed() printed out the actual resource paths not just the size per user\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miklos.szegedi%40cloudera.com","name":"miklos.szegedi@cloudera.com","key":"miklos.szegedi@cloudera.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miklos.szegedi%40cloudera.com&avatarId=32342","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miklos.szegedi%40cloudera.com&avatarId=32342","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miklos.szegedi%40cloudera.com&avatarId=32342","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miklos.szegedi%40cloudera.com&avatarId=32342"},"displayName":"Miklos Szegedi","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-25T22:10:06.889+0000","updated":"2016-10-25T22:10:06.889+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15608897","id":"15608897","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Thanks for the patch, Chris!  Looks good overall, just some minor nits in addition to the unit test comment above.  I don't think the actual resource path logging is necessary since LocalResourcesTrackerImpl already does this in its remove method.  If this does get added here, please make it a trace-level log separate from the debug one.\n\nLocalCacheCleaner should be a package-private class.  It does not need to be public.\n\nhandleCacheCleanup takes an event that isn't used and should be removed.  Looks like this was in the original code as well, but it would be nice to cleanup while we're here.\n\nWhy does LRUComparator implement Serializable?  It doesn't really do it properly and appears to be unnecessary.\n\nLocalCacheCleanerStats should take the currentSize as a constructor argument which can be used to initialize cacheSizeBeforeClean.  As a bonus, cacheSizeBeforeClean can then be marked final.\n\nI'm curious why we're removing the map entry here:\n{code}\n      if (tracker.remove(resource, delService)) {\n        stats.incDelSize(tracker.getUser(), resource.getSize());\n        i.remove();\n      }\n{code}\nThe removal seems unnecessary.  Is the concern that someone will create a long-term cache cleaner object that will hold onto these LocalizedResource objects?  If so then it would be simpler and faster to just clear the entire resourceMap at the end of the method, since we don't really support reusing a cleaner object.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2016-10-26T16:16:23.039+0000","updated":"2016-10-26T16:16:23.039+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15609674","id":"15609674","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the reviews [~miklos.szegedi@cloudera.com] and [~jlowe]!\n\nbq. You might want to use resources.getLocalRsrc().containsKey here just like in testPositiveRefCount.\n[~miklos.szegedi@cloudera.com] Ack, I will add the check to testLRUAcrossTrackers.\n\nbq. Why does LRUComparator implement Serializable? It doesn't really do it properly and appears to be unnecessary.\nI agree that it is unnecessary since we never serialize LRUComparator or the map that we add it to. This is a result of the old code and our findbugs check. There were a couple of modifications I made to the LRUComparator class to satisfy findbugs:\n# The comparator interface forces you to implement the equals method (how the original code was implemented), but does not force you to add a hashcode implementation. Findbugs now flags this. The original implementation of the equals method was implemented incorrectly (compares object references), but I left it because we never compare comparators in the code. To appease findbugs, I added an identity hashcode implementation that paired with the original implementation of the equals method. In hindsight, maybe I should just fix the original implementation of the equals method and add a correct hashcode implementation as well. [~jlowe], it seems a little unnecessary because our code never uses it, so I would be curious to hear your thoughts.\n# Findbugs flags the original LRUComparator for implementing the comparator interface, but not implementing Serializable. The argument is that if the comparator is not serializable and it is added to a map, then the map is not serializable. The LRUComparator has no member variables, so I figured all I had to do was declare it serializable and add a serial version number. [~jlowe], should I add default write/read object methods as well? Thanks!\n\nbq. Is the concern that someone will create a long-term cache cleaner object that will hold onto these LocalizedResource objects? If so then it would be simpler and faster to just clear the entire resourceMap at the end of the method, since we don't really support reusing a cleaner object.\nMaybe? This was just copied from the original ResourceRetentionSet class. I can delete the remove call and clear the entire resourceMap at the end of {{cleanCache}}.\n\nI will also address the other comments. Thanks again for the reviews!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-26T21:06:44.791+0000","updated":"2016-10-26T21:06:44.791+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15609727","id":"15609727","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Ah, I missed the findbugs connection with respect to comparator serialization.  In that case I'm fine with leaving that in, since the alternative of adding a findbugs exception is about as much work.  No need to do read/write object methods.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2016-10-26T21:25:46.096+0000","updated":"2016-10-26T21:25:46.096+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15610050","id":"15610050","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sjlee0","name":"sjlee0","key":"sjlee0","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sjlee0&avatarId=16831","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sjlee0&avatarId=16831","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sjlee0&avatarId=16831","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sjlee0&avatarId=16831"},"displayName":"Sangjin Lee","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the patch [~ctrezzo]! I agree with the above feedback from Jason and Mikios.\n\nJust a couple of more minor comments.\n\n1. Let's make {{LRUComparator}} a private static class. This doesn't need to be visible outside {{LocalCacheCleaner}}.\n2. Can we remove {{LocalCacheCleanerStats.getUserDelSizes()}}? This publishes the internal map and breaks the encapsulation. It doesn't appear to be used by any code.\n3. Please use a generated {{serialVersionUID}} value instead of a hard-coded value of 1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sjlee0","name":"sjlee0","key":"sjlee0","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sjlee0&avatarId=16831","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sjlee0&avatarId=16831","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sjlee0&avatarId=16831","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sjlee0&avatarId=16831"},"displayName":"Sangjin Lee","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-26T23:37:24.099+0000","updated":"2016-10-26T23:37:24.099+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15610127","id":"15610127","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"Attached is a v4 patch for trunk addressing all comments from the reviews. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-27T00:14:02.930+0000","updated":"2016-10-27T00:14:02.930+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15610147","id":"15610147","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"Two notes:\n# Instead of removing {{LocalCacheCleanerStats.getUserDelSizes()}} I made it return an unmodifiable map. That way, users of the class still have access to the data (outside of the toString method) and it is still protected.\n# I wound up removing both {{LRUComparator.equals}} and {{LRUComparator.hashCode}}. I figure we don't need to override them since the methods were just using the default implementation anyways.\n\nMy intention is to file a followup jira that adds metrics that expose the statistics from {{LocalCacheCleanerStats}}.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-27T00:23:34.504+0000","updated":"2016-10-27T00:23:34.504+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15610204","id":"15610204","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 15s{color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 2 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  7m 40s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 32s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 18s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 27s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 13s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  0m 51s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 20s{color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 27s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 27s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 27s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 16s{color} | {color:green} hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager: The patch generated 0 new + 159 unchanged - 27 fixed = 159 total (was 186) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 27s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green}  0m 12s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  0m 57s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 14s{color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 15m 29s{color} | {color:green} hadoop-yarn-server-nodemanager in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 16s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 30m 41s{color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:9560f25 |\n| JIRA Issue | YARN-5767 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12835439/YARN-5767-trunk-v4.patch |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 26badfc5aa93 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 22ff0ef |\n| Default Java | 1.8.0_101 |\n| findbugs | v3.0.0 |\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/13528/testReport/ |\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/13528/console |\n| Powered by | Apache Yetus 0.4.0-SNAPSHOT   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-27T00:49:30.907+0000","updated":"2016-10-27T00:49:30.907+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15612061","id":"15612061","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"+1 lgtm.  I'll commit this tomorrow if there are no objections.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2016-10-27T14:34:15.134+0000","updated":"2016-10-27T14:34:15.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15612611","id":"15612611","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sjlee0","name":"sjlee0","key":"sjlee0","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sjlee0&avatarId=16831","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sjlee0&avatarId=16831","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sjlee0&avatarId=16831","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sjlee0&avatarId=16831"},"displayName":"Sangjin Lee","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sjlee0","name":"sjlee0","key":"sjlee0","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sjlee0&avatarId=16831","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sjlee0&avatarId=16831","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sjlee0&avatarId=16831","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sjlee0&avatarId=16831"},"displayName":"Sangjin Lee","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-27T17:47:17.557+0000","updated":"2016-10-27T17:47:17.557+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15615826","id":"15615826","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Thanks to [~ctrezzo] for the contribution and to [~miklos.szegedi@cloudera.com] and [~sjlee0] for additional review!  I committed this to trunk, branch-2, and branch-2.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2016-10-28T16:13:54.768+0000","updated":"2016-10-28T16:13:54.768+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15615855","id":"15615855","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #10721 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/10721/])\nYARN-5767. Fix the order that resources are cleaned up from the local (jlowe: rev 1b79c417dca17bcd2e031864bc6ca07254c61b47)\n* (add) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/LocalCacheCleaner.java\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/LocalResourcesTrackerImpl.java\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java\n* (add) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestLocalCacheCleanup.java\n* (delete) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestResourceRetention.java\n* (delete) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceRetentionSet.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-28T16:21:30.734+0000","updated":"2016-10-28T16:21:30.734+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15615974","id":"15615974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~jlowe]! I will add release notes to the issue as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-28T17:09:57.801+0000","updated":"2016-10-28T17:09:57.801+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13014424/comment/15615991","id":"15615991","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"body":"I have filed a followup jira for the metrics: YARN-5797","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctrezzo","name":"ctrezzo","key":"ctrezzo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Trezzo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-28T17:17:23.187+0000","updated":"2016-10-28T17:17:23.187+0000"}],"maxResults":22,"total":22,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5767/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i358yv:"}}