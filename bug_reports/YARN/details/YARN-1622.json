{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12690155","self":"https://issues.apache.org/jira/rest/api/2/issue/12690155","key":"YARN-1622","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2014-01-22T21:11:22.305+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Feb 05 22:19:25 UTC 2014","customfield_12310420":"369112","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_3735505128_*|*_1_*:*_1_*:*_71483263_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-03-07T02:21:37.273+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-1622/watchers","watchCount":5,"isWatching":false},"created":"2014-01-22T00:51:48.932+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325051","id":"12325051","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"}],"issuelinks":[{"id":"12384362","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12384362","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12680374","key":"YARN-1429","self":"https://issues.apache.org/jira/rest/api/2/issue/12680374","fields":{"summary":"*nix: Allow a way for users to augment classpath of YARN daemons","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamrul","name":"kamrul","key":"kamrul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mohammad Kamrul Islam","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-03-07T02:21:37.299+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319413","id":"12319413","name":"client"}],"timeoriginalestimate":null,"description":"There are few issues with 'bin/yarn' and 'etc/hadoop/yarn-env.sh'. They are loosely related but fixes are minor and will go in the same files. Therefore I combined them into one JIRA.\n\nIssues are:\n1, bin/yarn has a dangling 'fi' in the last line. Thanks to shell for so compliant!\n2. YARN_ROOT_LOGGER is defined as \"INFO, DFRA\" in yarn-env.sh. That's why 'bin/yarn' command doesn't show (by default) the log messages in client window. But when we used 'bin/hadoop', it shows the log correctly  (because HADOOP_ROOT_LOOGER is \"INFO,console\" by default). Need to address this non-consistent behavior.\n\n3. For each client command, yarn creates a log file in $YARN_LOG_DIR/yarn.log own by the 'end-user'. In a multi-tenant environment, the second user will not be able to create its own yarn.log in the same place causing the  exception (pasted at the end). By default, it should write to $YARN_LOG_DIR/$USER/yarn.log instead. \n\nNote:\n --------\nI plan to address only #1 and #2 in this JIRA. If we default the YARN_ROOT_LOGGER consistent with 'bin/hadoop', the issue #3 will not happen. The scope of this JIRA is come close to 'bin/hadoop' behavior.\n\nException:\nlog4j:ERROR setFile(null,true) call failed.\njava.io.FileNotFoundException: /export/apps/hadoop/logs/yarn.log (Permission denied)\nat java.io.FileOutputStream.open(Native Method)\nat java.io.FileOutputStream.<init>(FileOutputStream.java:221)\nat java.io.FileOutputStream.<init>(FileOutputStream.java:142)\nat org.apache.log4j.FileAppender.setFile(FileAppender.java:294)\nat org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165)\nat org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:223)\nat org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:307)\nat org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:172)\nat org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:104)\nat org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:842)\nat org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:768)\nat org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:648)\nat org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:514)\nat org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:580)\nat org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:526)\nat org.apache.log4j.LogManager.<clinit>(LogManager.java:127)\nat org.apache.log4j.Logger.getLogger(Logger.java:104)\nat org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:289)\nat org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:109)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\nat org.apache.commons.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1116)\nat org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:914)\nat org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:604)\nat org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:336)\nat org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:310)\nat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:685)\nat org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:165)\nat org.apache.hadoop.util.RunJar.main(RunJar.java:158)\n\n\n  ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325667","id":"12325667","description":"2.2.1 release","name":"2.2.1","archived":true,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12624423","id":"12624423","filename":"YARN-1622.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamrul","name":"kamrul","key":"kamrul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mohammad Kamrul Islam","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-01-22T20:42:14.069+0000","size":387,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12624423/YARN-1622.1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"369417","customfield_12312823":null,"summary":"'bin/yarn' command doesn't behave like 'hadoop' and etc. ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamrul","name":"kamrul","key":"kamrul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mohammad Kamrul Islam","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamrul","name":"kamrul","key":"kamrul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mohammad Kamrul Islam","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12690155/comment/13878118","id":"13878118","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamrul","name":"kamrul","key":"kamrul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mohammad Kamrul Islam","active":true,"timeZone":"America/Los_Angeles"},"body":"Further analysis found the some claims made in the original description are no longer valid for apache version. The issue #2 and #3 are in our cluster specific -- not an apache issue.\n\nHowever, the issue #1 remains valid.\n\nIn short, the scope of this JIRA becomes very limited than what I originally thought.\nWill put a simple patch soon.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamrul","name":"kamrul","key":"kamrul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mohammad Kamrul Islam","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-01-22T01:28:04.615+0000","updated":"2014-01-22T01:28:04.615+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12690155/comment/13879157","id":"13879157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamrul","name":"kamrul","key":"kamrul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mohammad Kamrul Islam","active":true,"timeZone":"America/Los_Angeles"},"body":"Simple one line patch in script.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamrul","name":"kamrul","key":"kamrul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mohammad Kamrul Islam","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-01-22T20:42:14.074+0000","updated":"2014-01-22T20:42:14.074+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12690155/comment/13879185","id":"13879185","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12624423/YARN-1622.1.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in .\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-YARN-Build/2929//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-YARN-Build/2929//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-01-22T21:11:22.305+0000","updated":"2014-01-22T21:11:22.305+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12690155/comment/13892646","id":"13892646","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayank_bansal","name":"mayank_bansal","key":"mayank_bansal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayank Bansal","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 \n\nWill commit.\n\nThanks,\nMayank","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayank_bansal","name":"mayank_bansal","key":"mayank_bansal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayank Bansal","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-05T22:19:25.300+0000","updated":"2014-02-05T22:19:25.300+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-1622/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1rmbj:"}}