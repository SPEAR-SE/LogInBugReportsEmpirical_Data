{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12976161","self":"https://issues.apache.org/jira/rest/api/2/issue/12976161","key":"YARN-5201","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-02-05T12:56:44.712+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Feb 05 12:56:44 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5201/watchers","watchCount":3,"isWatching":false},"created":"2016-06-06T18:28:33.219+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-02-05T12:56:44.712+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"Hi,\n\nI have setup Apache Ranger in hadoop cluster and defined yarn policies to allow certain user to certain queue. \nIdea is to have user 'x' submit spark job only to queue 'x' and not to queue 'y'. when submitting spark job queue is mentioned as one of the arguments\nBut user 'x' is able to submit spark job to queue 'y'\n\nRanger audit logs shows the policy used is HDFS policy \nYarn policy is not used at all.\n\nI have enabled ranger plugin for YARN and defined yarn policy\n\nYarn ACL is also set to true\n\ncapacity scheduler setting as below:\nyarn.scheduler.capacity.queue-mappings=u:user1:user1,u:user2:userr2\nyarn.scheduler.capacity.root.acl_submit_applications=yarn,spark,hdfs\nyarn.scheduler.capacity.root.customer1.acl_administer_jobs=user1\nyarn.scheduler.capacity.root.customer1.acl_submit_applications=user1\nyarn.scheduler.capacity.root.customer1.capacity=50\nyarn.scheduler.capacity.root.customer1.maximum-capacity=100\nyarn.scheduler.capacity.root.customer1.state=RUNNING\nyarn.scheduler.capacity.root.customer1.user-limit-factor=1\nyarn.scheduler.capacity.root.customer2.acl_administer_jobs=user2\nyarn.scheduler.capacity.root.customer2.acl_submit_applications=user2\nyarn.scheduler.capacity.root.customer2.capacity=50\nyarn.scheduler.capacity.root.customer2.maximum-capacity=100\nyarn.scheduler.capacity.root.customer2.state=RUNNING\nyarn.scheduler.capacity.root.customer2.user-limit-factor=1\nyarn.scheduler.capacity.root.queues=user1,user2\n\nThanks \nRengan\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Apache Ranger Yarn policies are not used","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajtherengan%40gmail.com","name":"rajtherengan@gmail.com","key":"rajtherengan@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajendranath Rengan","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajtherengan%40gmail.com","name":"rajtherengan@gmail.com","key":"rajtherengan@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajendranath Rengan","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976161/comment/16352338","id":"16352338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sachinsga.com%40gmail.com","name":"sachinsga.com@gmail.com","key":"sachinsga.com@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sachin Gupta","active":true,"timeZone":"Asia/Kolkata"},"body":"Is this really an issue? if no, could anyone please help me with a solution because I am facing the same issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sachinsga.com%40gmail.com","name":"sachinsga.com@gmail.com","key":"sachinsga.com@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sachin Gupta","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-02-05T12:56:44.712+0000","updated":"2018-02-05T12:56:44.712+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5201/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2z1gf:"}}