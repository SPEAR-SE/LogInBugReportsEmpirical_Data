{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12852529","self":"https://issues.apache.org/jira/rest/api/2/issue/12852529","key":"YARN-4022","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2015-09-08T10:29:05.144+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed May 02 15:55:47 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_4_*:*_41852818310_*|*_3_*:*_1_*:*_8661029360_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_3_*:*_35908010479","customfield_12312321":null,"resolutiondate":"2018-05-02T15:55:47.854+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-4022/watchers","watchCount":14,"isWatching":false},"created":"2015-08-06T09:51:29.771+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["oct16-medium","scheduler"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331976","id":"12331976","description":"2.7.1 release","name":"2.7.1","archived":false,"released":true,"releaseDate":"2015-07-06"}],"issuelinks":[{"id":"12533100","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12533100","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"13154031","key":"YARN-8191","self":"https://issues.apache.org/jira/rest/api/2/issue/13154031","fields":{"summary":"Fair scheduler: queue deletion without RM restart","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snemeth","name":"snemeth","key":"snemeth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=snemeth&avatarId=33743","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=snemeth&avatarId=33743","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=snemeth&avatarId=33743","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=snemeth&avatarId=33743"},"displayName":"Szilard Nemeth","active":true,"timeZone":"Europe/Budapest"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-05-02T15:55:47.904+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12322906","id":"12322906","name":"fairscheduler","description":"Fair Scheduler"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12319322","id":"12319322","name":"resourcemanager"}],"timeoriginalestimate":null,"description":"When I delete an existing queue by modify the xxx-schedule.xml, I can still see the queue information block in webpage(/cluster/scheduler) though the 'Min Resources' items all become to zero and have no item of 'Max Running Applications'.\nI can still submit an application to the deleted queue and the application will run using 'root.default' queue instead, but submit to an un-exist queue will cause an exception.\n\nMy expectation is the deleted queue will not displayed in webpage and submit application to the deleted queue will act just like the queue doesn't exist.\n\nPS: There's no application running in the queue I delete.\n\nSome related config in yarn-site.xml:\n\n{code}\n<property>\n        <name>yarn.scheduler.fair.user-as-default-queue</name>\n        <value>false</value>\n</property>\n\n<property>\n        <name>yarn.scheduler.fair.allow-undeclared-pools</name>\n        <value>false</value>\n</property>\n{code}\n\na related question is here: http://stackoverflow.com/questions/26488564/hadoop-yarn-why-the-queue-cannot-be-deleted-after-i-revise-my-fair-scheduler-xm","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331976","id":"12331976","description":"2.7.1 release","name":"2.7.1","archived":false,"released":true,"releaseDate":"2015-07-06"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12915212","id":"12915212","filename":"Queue Deletion in Fair Scheduler.pdf","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yufeigu","name":"yufeigu","key":"yufeigu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yufeigu&avatarId=31240","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yufeigu&avatarId=31240","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yufeigu&avatarId=31240","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yufeigu&avatarId=31240"},"displayName":"Yufei Gu","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-03-19T22:25:12.803+0000","size":84699,"mimeType":"application/pdf","content":"https://issues.apache.org/jira/secure/attachment/12915212/Queue+Deletion+in+Fair+Scheduler.pdf"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12754601","id":"12754601","filename":"YARN-4022.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-08T08:57:40.619+0000","size":9821,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12754601/YARN-4022.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12754618","id":"12754618","filename":"YARN-4022.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-08T11:04:20.521+0000","size":9955,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12754618/YARN-4022.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12754830","id":"12754830","filename":"YARN-4022.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-09T06:12:46.506+0000","size":10009,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12754830/YARN-4022.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12754857","id":"12754857","filename":"YARN-4022.004.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-09T08:24:20.376+0000","size":10036,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12754857/YARN-4022.004.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"queue not remove from webpage(/cluster/scheduler) when delete queue in xxx-scheduler.xml","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14734454","id":"14734454","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"body":"Attach a patch to fix it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-08T08:58:06.866+0000","updated":"2015-09-08T08:58:06.866+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14734580","id":"14734580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | pre-patch |  15m 28s | Findbugs (version ) appears to be broken on trunk. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   7m 39s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m  3s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |\n| {color:green}+1{color} | checkstyle |   0m 25s | There were no new checkstyle issues. |\n| {color:red}-1{color} | whitespace |   0m  0s | The patch has 1  line(s) that end in whitespace. Use git apply --whitespace=fix. |\n| {color:green}+1{color} | install |   1m 32s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   1m 30s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:red}-1{color} | yarn tests |  52m 30s | Tests failed in hadoop-yarn-server-resourcemanager. |\n| | |  90m  8s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed unit tests | hadoop.yarn.server.resourcemanager.scheduler.fair.TestFairScheduler |\n|   | hadoop.yarn.server.resourcemanager.scheduler.fair.TestAllocationFileLoaderService |\n|   | hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification |\n|   | hadoop.yarn.server.resourcemanager.scheduler.fair.TestFairSchedulerQueueACLs |\n|   | hadoop.yarn.server.resourcemanager.scheduler.fair.TestFairSchedulerFairShare |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12754601/YARN-4022.001.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 435f935 |\n| whitespace | https://builds.apache.org/job/PreCommit-YARN-Build/9032/artifact/patchprocess/whitespace.txt |\n| hadoop-yarn-server-resourcemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/9032/artifact/patchprocess/testrun_hadoop-yarn-server-resourcemanager.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9032/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf906.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9032/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-08T10:29:05.144+0000","updated":"2015-09-08T10:29:05.144+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14734624","id":"14734624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"body":"Fix test bug & whitespace.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-08T11:04:20.525+0000","updated":"2015-09-08T11:04:20.525+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14734652","id":"14734652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"body":"Patch to fix this issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-08T11:20:11.233+0000","updated":"2015-09-08T11:20:11.233+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14734751","id":"14734751","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  16m 20s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   7m 38s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |   9m 59s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   0m 50s | The applied patch generated  11 new checkstyle issues (total was 85, now 94). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 29s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   1m 33s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:red}-1{color} | yarn tests |  54m  7s | Tests failed in hadoop-yarn-server-resourcemanager. |\n| | |  92m 55s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed unit tests | hadoop.yarn.server.resourcemanager.rmapp.TestRMAppTransitions |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12754618/YARN-4022.002.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 435f935 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/9035/artifact/patchprocess/diffcheckstylehadoop-yarn-server-resourcemanager.txt |\n| hadoop-yarn-server-resourcemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/9035/artifact/patchprocess/testrun_hadoop-yarn-server-resourcemanager.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9035/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf906.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9035/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-08T12:41:35.097+0000","updated":"2015-09-08T12:41:35.097+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14736260","id":"14736260","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"body":"Fix checkstyle","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-09T06:12:46.509+0000","updated":"2015-09-09T06:12:46.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14736390","id":"14736390","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  16m 55s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   8m  4s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m 15s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   0m 55s | The applied patch generated  1 new checkstyle issues (total was 85, now 84). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 32s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   1m 32s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:red}-1{color} | yarn tests |  54m 21s | Tests failed in hadoop-yarn-server-resourcemanager. |\n| | |  94m 33s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed unit tests | hadoop.yarn.server.resourcemanager.TestKillApplicationWithRMHA |\n|   | hadoop.yarn.server.resourcemanager.scheduler.fifo.TestFifoScheduler |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12754830/YARN-4022.003.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 94cf7ab |\n| checkstyle |  https://builds.apache.org/job/PreCommit-YARN-Build/9053/artifact/patchprocess/diffcheckstylehadoop-yarn-server-resourcemanager.txt |\n| hadoop-yarn-server-resourcemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/9053/artifact/patchprocess/testrun_hadoop-yarn-server-resourcemanager.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9053/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9053/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-09T07:53:17.296+0000","updated":"2015-09-09T07:53:17.296+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14736435","id":"14736435","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"body":"It seems that the test fail is not raised by this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-09-09T08:24:20.380+0000","updated":"2015-09-09T08:24:20.380+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14736590","id":"14736590","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  17m  4s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   7m 55s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |   9m 54s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 22s | The applied patch does not increase the total number of release audit warnings. |\n| {color:green}+1{color} | checkstyle |   0m 51s | There were no new checkstyle issues. |\n| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 26s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   1m 28s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | yarn tests |  54m 17s | Tests passed in hadoop-yarn-server-resourcemanager. |\n| | |  93m 54s | |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12754857/YARN-4022.004.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 0113e45 |\n| hadoop-yarn-server-resourcemanager test log | https://builds.apache.org/job/PreCommit-YARN-Build/9054/artifact/patchprocess/testrun_hadoop-yarn-server-resourcemanager.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9054/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9054/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-09T10:02:38.574+0000","updated":"2015-09-09T10:02:38.574+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/14951560","id":"14951560","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"body":"Could anyone help review this issue please?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forrestchen","name":"forrestchen","key":"forrestchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"forrestchen","active":true,"timeZone":"Asia/Chongqing"},"created":"2015-10-10T03:23:54.232+0000","updated":"2015-10-10T03:23:54.232+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/15032978","id":"15032978","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=imstefanlee","name":"imstefanlee","key":"imstefanlee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"stefanlee","active":true,"timeZone":"Asia/Shanghai"},"body":"hi forrestchen, my configuration in cluster is similar to you  ,and when i delete a queue in fair-scheduler.xml,I submit an application to the deleted queue and the application will run using 'root.default' queue instead, then  submit to an un-exist queue ,but still run using 'root.default' and no exception. why ? my hadoop version is 2.4.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=imstefanlee","name":"imstefanlee","key":"imstefanlee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"stefanlee","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-12-01T02:46:51.774+0000","updated":"2015-12-01T02:46:51.774+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/15033006","id":"15033006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | {color:red} patch {color} | {color:red} 0m 5s {color} | {color:red} YARN-4022 does not apply to trunk. Rebase required? Wrong Branch? See https://wiki.apache.org/hadoop/HowToContribute for help. {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12754857/YARN-4022.004.patch |\n| JIRA Issue | YARN-4022 |\n| Powered by | Apache Yetus   http://yetus.apache.org |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9819/console |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-12-01T03:23:21.347+0000","updated":"2015-12-01T03:23:21.347+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/15613638","id":"15613638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=templedf","name":"templedf","key":"templedf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=templedf&avatarId=24879","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=templedf&avatarId=24879","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=templedf&avatarId=24879","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=templedf&avatarId=24879"},"displayName":"Daniel Templeton","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the patch, [~forrestchen].  This is definitely useful functionality.\n\nIt the patch you're using a thread that watches for updates to the configuration so it can remove unused queues.  YARN-5556 is adding the same capability for fair scheduler, and that patch handles the delete during the reload of the configuration.  Think that approach could work for fair scheduler?\n\nI'd also like to see some unit tests to cover the new functionality.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=templedf","name":"templedf","key":"templedf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=templedf&avatarId=24879","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=templedf&avatarId=24879","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=templedf&avatarId=24879","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=templedf&avatarId=24879"},"displayName":"Daniel Templeton","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-27T23:25:25.009+0000","updated":"2016-10-27T23:25:25.009+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/15613640","id":"15613640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=templedf","name":"templedf","key":"templedf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=templedf&avatarId=24879","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=templedf&avatarId=24879","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=templedf&avatarId=24879","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=templedf&avatarId=24879"},"displayName":"Daniel Templeton","active":true,"timeZone":"America/Los_Angeles"},"body":"Canceling patch until comments are addressed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=templedf","name":"templedf","key":"templedf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=templedf&avatarId=24879","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=templedf&avatarId=24879","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=templedf&avatarId=24879","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=templedf&avatarId=24879"},"displayName":"Daniel Templeton","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-27T23:25:43.834+0000","updated":"2016-10-27T23:25:43.834+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/15812907","id":"15812907","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yufeigu","name":"yufeigu","key":"yufeigu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yufeigu&avatarId=31240","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yufeigu&avatarId=31240","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yufeigu&avatarId=31240","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yufeigu&avatarId=31240"},"displayName":"Yufei Gu","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~forrestchen], are you still work on this? If not, can I take it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yufeigu","name":"yufeigu","key":"yufeigu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yufeigu&avatarId=31240","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yufeigu&avatarId=31240","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yufeigu&avatarId=31240","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yufeigu&avatarId=31240"},"displayName":"Yufei Gu","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-09T21:30:48.237+0000","updated":"2017-01-09T21:30:48.237+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/15849161","id":"15849161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashwinshankar77","name":"ashwinshankar77","key":"ashwinshankar77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashwin Shankar","active":true,"timeZone":"America/Los_Angeles"},"body":"[~templedf],[~forrestchen],[~yufeigu],\nWhoever is planning to work on this patch, please account for 'dynamic user queues' in fair scheduler. These queues don't exist in the xml, but are created on the fly based on username when a user submits a job. Please see fair scheduler docs for more information. So basically queues can exist in the scheduler but not in xml, and shouldn't be deleted just because they don't exist in the xml.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashwinshankar77","name":"ashwinshankar77","key":"ashwinshankar77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashwin Shankar","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-02T00:16:58.428+0000","updated":"2017-02-02T00:16:58.428+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/16334116","id":"16334116","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snemeth","name":"snemeth","key":"snemeth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=snemeth&avatarId=33743","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=snemeth&avatarId=33743","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=snemeth&avatarId=33743","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=snemeth&avatarId=33743"},"displayName":"Szilard Nemeth","active":true,"timeZone":"Europe/Budapest"},"body":"Hey [~templedf], [~yufeigu]!\r\n\r\nCould you please help me a bit with this one?\r\n\r\nI left the _{{yarn.scheduler.fair.user-as-default-queue}}_ and _{{yarn.scheduler.fair.allow-undeclared-pools}}_ configs on their default values (true) as based on the FairScheduler page ([https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/FairScheduler.html]), this makes the most sense to have dynamic queues created.\r\n When I started a pi job, the job was assigned to a dynamically created queue, namely \"root.szilardnemeth\" so I guess the above config is correct.\r\n When I ran {{yarn rmadmin -refreshQueues}} and checked the RM Webservices API with a GET request to \"ws/v1/cluster/scheduler\", the queue was still there.\r\n After that, I debugged the calls described below and found out that the queues are not deleted when refreshQueues is invoked even if they are empty.\r\n\r\nEventually, {{org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.QueueManager#removeEmptyIncompatibleQueues}} is invoked but this method does not delete my dynamically created leaf queue, moreover this method does not seem to be a good fit to add queue removal functionality, since it only deals with incompatible queues.\r\n\r\nI found out that when I start the command {{yarn rmadmin -refreshQueues}}, the following relevant calls are performed:\r\n\r\n1. {{AdminService.refreshQueues}} handles the CLI command\r\n 2. {{org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler#reinitialize}} is invoked\r\n 3. The method above invokes {{org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.AllocationFileLoaderService#reloadAllocations}} which loads the allocations.xml file.\r\n At the end of this method, a call happens to the {{reloadListener}} with the parsed configuration object: {{reloadListener.onReload(info);}}\r\n 4. {{org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler.AllocationReloadListener#onReload}} is invoked.\r\n 5. The method above invokes {{org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.QueueManager#updateAllocationConfiguration}}\r\n This method is responsible for removing incompatible queues, see {{removeEmptyIncompatibleQueues}} in {{QueueManager}} (at the time of writing: [https://github.com/apache/hadoop/blob/99292adcefdc6b8f280b8e100605fb39f755c38a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/QueueManager.java#L351])\r\n\r\n\r\n*For me, adding the queue removal functionality to FairScheduler.reinitialize would be the most logical thing to do, as the rest of the methods are strongly related to reading the allocations file and since dynamically created queues are not based on that file, it is a \"separate entity\". *\r\n\r\nMy questions: \r\n 1. Should all empty dynamically created queues be removed when the refreshQueues command is invoked with the CLI?\r\n 2. May all empty queues be removed when refreshQueues command is invoked or just the dynamically created ones?\r\n 3. If the answer is \"just the dynamically created queues can be removed\" for question 2, how can I differentiate the normal queues from the dynamically created queues?\r\n4. Does it make sense to define a new command like \"purgeQueues\" or something like that? \r\nBased on the documentation (https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YarnCommands.html), refreshQueues does not delete any queue, so maybe users would be surprised with the result.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snemeth","name":"snemeth","key":"snemeth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=snemeth&avatarId=33743","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=snemeth&avatarId=33743","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=snemeth&avatarId=33743","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=snemeth&avatarId=33743"},"displayName":"Szilard Nemeth","active":true,"timeZone":"Europe/Budapest"},"created":"2018-01-22T10:31:13.647+0000","updated":"2018-01-22T11:27:27.558+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/16336310","id":"16336310","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yufeigu","name":"yufeigu","key":"yufeigu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yufeigu&avatarId=31240","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yufeigu&avatarId=31240","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yufeigu&avatarId=31240","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yufeigu&avatarId=31240"},"displayName":"Yufei Gu","active":true,"timeZone":"America/Los_Angeles"},"body":" \r\n\r\nFor your questions:\r\n # Need further investigation. \r\n # No. We shouldn't do that. \r\n # A dynamic queue gets a parent who is labeled as \"parent\" and its queue type is \"LEAF\"\r\n # I don't think this Jira is to implement functionality of deleting queues. \r\n\r\nI believe you want to do something similar to YARN-5556. However, I think the scope of this Jira is limited, which aims to refresh the RM WebUI while it shouldn't show the queue if the queue has been deleted by RM. \r\n\r\nIt is debatable whether we need the similar functionality in YARN-5556, and I'd prefer to file a new Jira for that and move the discussion to there. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yufeigu","name":"yufeigu","key":"yufeigu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yufeigu&avatarId=31240","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yufeigu&avatarId=31240","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yufeigu&avatarId=31240","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yufeigu&avatarId=31240"},"displayName":"Yufei Gu","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-01-23T20:07:23.826+0000","updated":"2018-01-23T20:07:23.826+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/16337412","id":"16337412","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snemeth","name":"snemeth","key":"snemeth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=snemeth&avatarId=33743","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=snemeth&avatarId=33743","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=snemeth&avatarId=33743","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=snemeth&avatarId=33743"},"displayName":"Szilard Nemeth","active":true,"timeZone":"Europe/Budapest"},"body":"Hey [~yufeigu]!\r\nSorry, there was a confusion from my side so please ignore my last comment, especially a part about -refreshQueues since this bug is about the allocations.xml file, as I see it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snemeth","name":"snemeth","key":"snemeth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=snemeth&avatarId=33743","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=snemeth&avatarId=33743","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=snemeth&avatarId=33743","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=snemeth&avatarId=33743"},"displayName":"Szilard Nemeth","active":true,"timeZone":"Europe/Budapest"},"created":"2018-01-24T11:11:35.530+0000","updated":"2018-01-24T11:11:35.530+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/16405546","id":"16405546","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yufeigu","name":"yufeigu","key":"yufeigu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yufeigu&avatarId=31240","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yufeigu&avatarId=31240","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yufeigu&avatarId=31240","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yufeigu&avatarId=31240"},"displayName":"Yufei Gu","active":true,"timeZone":"America/Los_Angeles"},"body":"Attached the design document.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yufeigu","name":"yufeigu","key":"yufeigu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yufeigu&avatarId=31240","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yufeigu&avatarId=31240","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yufeigu&avatarId=31240","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yufeigu&avatarId=31240"},"displayName":"Yufei Gu","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-03-19T22:25:48.572+0000","updated":"2018-03-19T22:25:48.572+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12852529/comment/16461220","id":"16461220","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=grepas","name":"grepas","key":"grepas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=grepas&avatarId=35295","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=grepas&avatarId=35295","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=grepas&avatarId=35295","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=grepas&avatarId=35295"},"displayName":"Gergo Repas","active":true,"timeZone":"Etc/UTC"},"body":"[~snemeth] As per our discussion, this issue is covered by YARN-8191. Let's close this one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=grepas","name":"grepas","key":"grepas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=grepas&avatarId=35295","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=grepas&avatarId=35295","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=grepas&avatarId=35295","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=grepas&avatarId=35295"},"displayName":"Gergo Repas","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-02T15:55:47.892+0000","updated":"2018-05-02T15:55:47.892+0000"}],"maxResults":21,"total":21,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-4022/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ieu7:"}}