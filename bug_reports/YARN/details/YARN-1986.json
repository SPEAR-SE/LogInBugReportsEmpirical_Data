{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12710629","self":"https://issues.apache.org/jira/rest/api/2/issue/12710629","key":"YARN-1986","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326697","id":"12326697","description":"2.4.1 bug-fix release","name":"2.4.1","archived":false,"released":true,"releaseDate":"2014-06-30"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-05-06T07:51:05.907+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu May 15 18:20:14 UTC 2014","customfield_12310420":"388950","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_687252083_*|*_1_*:*_1_*:*_907582753_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-05-14T06:45:17.965+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-1986/watchers","watchCount":11,"isWatching":false},"created":"2014-04-25T19:44:43.166+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326142","id":"12326142","description":"2.4.0 release","name":"2.4.0","archived":false,"released":true,"releaseDate":"2014-04-07"}],"issuelinks":[{"id":"12388045","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12388045","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12714171","key":"YARN-2057","self":"https://issues.apache.org/jira/rest/api/2/issue/12714171","fields":{"summary":"NPE in RM handling node update while app submission in progress","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-06-30T08:18:11.157+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"After upgrade from 2.2.0 to 2.4.0, NPE on first job start.\n\n-After RM was restarted, the job runs without a problem.-\n\n{noformat}\n19:11:13,441 FATAL ResourceManager:600 - Error in handling event type NODE_UPDATE to the scheduler\njava.lang.NullPointerException\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.assignContainers(FifoScheduler.java:462)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.nodeUpdate(FifoScheduler.java:714)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.handle(FifoScheduler.java:743)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.handle(FifoScheduler.java:104)\n\tat org.apache.hadoop.yarn.server.resourcemanager.ResourceManager$SchedulerEventDispatcher$EventProcessor.run(ResourceManager.java:591)\n\tat java.lang.Thread.run(Thread.java:744)\n19:11:13,443  INFO ResourceManager:604 - Exiting, bbye..\n{noformat}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12643524","id":"12643524","filename":"YARN-1986.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-06T09:40:49.879+0000","size":1552,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12643524/YARN-1986.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12643739","id":"12643739","filename":"YARN-1986-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-07T11:07:54.937+0000","size":4946,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12643739/YARN-1986-2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12643895","id":"12643895","filename":"YARN-1986-3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-08T04:05:54.928+0000","size":4785,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12643895/YARN-1986-3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12643498","id":"12643498","filename":"YARN-1986-testcase.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-06T07:54:09.048+0000","size":4838,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12643498/YARN-1986-testcase.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"389196","customfield_12312823":null,"summary":"In Fifo Scheduler, node heartbeat in between creating app and attempt causes NPE","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonbringhurst","name":"jonbringhurst","key":"jonbringhurst","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jonbringhurst&avatarId=19323","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jonbringhurst&avatarId=19323","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jonbringhurst&avatarId=19323","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jonbringhurst&avatarId=19323"},"displayName":"Jon Bringhurst","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonbringhurst","name":"jonbringhurst","key":"jonbringhurst","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jonbringhurst&avatarId=19323","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jonbringhurst&avatarId=19323","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jonbringhurst&avatarId=19323","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jonbringhurst&avatarId=19323"},"displayName":"Jon Bringhurst","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13990396","id":"13990396","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"body":"reproduced by the new unit test \"TestFifoScheduler#testYARN1986\" which is attached with name \"YARN-1986-testcase.patch\". It's not for commit, just for your information.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-06T07:51:05.907+0000","updated":"2014-05-06T07:51:05.907+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13990398","id":"13990398","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"body":"It's the new unit test to reproduce this NPE constantly.\nIt's not for commit, just for your information or validation.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-06T07:54:09.054+0000","updated":"2014-05-06T07:54:09.054+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13990430","id":"13990430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12643498/YARN-1986-testcase.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager:\n\n                  org.apache.hadoop.yarn.server.resourcemanager.TestClientRMService\n                  org.apache.hadoop.yarn.server.resourcemanager.TestFifoScheduler\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-YARN-Build/3699//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-YARN-Build/3699//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-06T08:40:56.356+0000","updated":"2014-05-06T08:40:56.356+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13990482","id":"13990482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"body":"The failure of TestClientRMService is tracked by YARN-2023.\nThe failure of TestFifoScheduler when YARN-1986-testcase.patch is applied shows the reproduce of this NPE.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-06T09:40:49.884+0000","updated":"2014-05-06T09:40:49.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13990621","id":"13990621","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks you for reporting the issue, Hong. It looks like a concurrency bug about AbstractYarnScheduler#applications. \nI'll take a look more deeply.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-06T13:17:14.978+0000","updated":"2014-05-06T13:17:14.978+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13990826","id":"13990826","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"body":"Fixing itself LGTM. Minor points:\n\n{code}\n+      if (application == null) {\n+        continue;\n+      }\n{code}\n\n{code}\n+      if (attempt == null) {\n+        continue;\n+      }\n{code}\n\nHow about adding comments to describe why we can skip the entry like this?\n{code}\n// attempt can be null because assignContainer doesn't have any locks.\n// In this case, we can just skip the entry.\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-06T17:01:35.218+0000","updated":"2014-05-06T17:01:35.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13990830","id":"13990830","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sandyr], should we fix this race condition in 2.4.1 release? IMHO, It should be fixed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-06T17:05:13.378+0000","updated":"2014-05-06T17:05:13.378+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13990838","id":"13990838","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12643524/YARN-1986.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager:\n\n                  org.apache.hadoop.yarn.server.resourcemanager.TestRMRestart\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-YARN-Build/3702//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-YARN-Build/3702//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-06T17:13:22.522+0000","updated":"2014-05-06T17:13:22.522+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13991459","id":"13991459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandyr","name":"sandyr","key":"sandyr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandy Ryza","active":true,"timeZone":"America/Los_Angeles"},"body":"Under what circumstances does application end up null?  This does seem like a serious issue that we should fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandyr","name":"sandyr","key":"sandyr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandy Ryza","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-07T01:29:05.719+0000","updated":"2014-05-07T01:29:05.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13991594","id":"13991594","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sandyr], in my understanding, this will be happen in following invoke sequence. [~zhiguohong] please correct me if I was wrong.\n{code}\n1) APP_ADDED // will create SchedulerApplication\n2) NODE_UPDATE // will access SchedulerApplication.getCurrentAppAttempt(), it's null currently. :(\n3) APP_ATTEMPT_ADDED // will call SchedulerApplication.setCurrentAppAttempt(...)\n{code}\nInstead of \n{code}\n1) APP_ADDED // will create SchedulerApplication\n2) APP_ATTEMPT_ADDED // will call SchedulerApplication.setCurrentAppAttempt(...)\n3) NODE_UPDATE // will access SchedulerApplication.getCurrentAppAttempt, not null now :)\n{code}\n\nI think the patch should be enough to fix this problem, but some comments,\n1) A simple test case (instead of a random test) should be included to make sure no regression in the future\n2) Should we rethink is it possible to evict APP_ADDED event in scheduler? Only APP_ATTEMPT_ADDED event left can make sure atomic in this case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftnoteasy","name":"leftnoteasy","key":"leftnoteasy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=leftnoteasy&avatarId=18647","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=leftnoteasy&avatarId=18647","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=leftnoteasy&avatarId=18647","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=leftnoteasy&avatarId=18647"},"displayName":"Wangda Tan","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-07T06:17:56.511+0000","updated":"2014-05-07T06:17:56.511+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13991741","id":"13991741","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"body":"Wangda, thanks for your suggestion. I add the test going through the sequence: APP_ADDED, NODE_UPDATE, APP_ATTEMPT_ADDED. And it works as expected: fails on trunk and succeed with the fix.\n\nI agree with you to evict APP_ADDED in scheduler. But that's a big change. We'd better do it in another jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-07T11:07:54.941+0000","updated":"2014-05-07T11:07:54.941+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13991767","id":"13991767","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12643739/YARN-1986-2.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-YARN-Build/3710//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-YARN-Build/3710//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-07T11:55:42.433+0000","updated":"2014-05-07T11:55:42.433+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13992059","id":"13992059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonbringhurst","name":"jonbringhurst","key":"jonbringhurst","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jonbringhurst&avatarId=19323","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jonbringhurst&avatarId=19323","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jonbringhurst&avatarId=19323","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jonbringhurst&avatarId=19323"},"displayName":"Jon Bringhurst","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for looking into this everyone. I wanted to post again to correct an assumption I made in my original post.\n\nI found a situation where \"After RM was restarted, the job runs without a problem\" isn't correct.\n\nIn this case, after restarting this RM multiple times, the exception persists on startup. Removing the RM state allows the RM to startup again.\n\n{noformat}\n17:50:29,781  INFO FifoScheduler:369 - Accepted application application_1396474639291_0106 from user: xxxxx, currently num of applications: 1\n17:50:29,782  INFO FifoScheduler:369 - Accepted application application_1396474639291_0105 from user: xxxxx, currently num of applications: 2\n17:50:29,782  INFO FifoScheduler:369 - Accepted application application_1396474639291_0063 from user: xxxxx, currently num of applications: 3\n17:50:29,782  INFO FifoScheduler:369 - Accepted application application_1396474639291_0051 from user: xxxxx, currently num of applications: 4\n17:50:29,782  INFO FifoScheduler:369 - Accepted application application_1396474639291_0094 from user: xxxxx, currently num of applications: 5\n17:50:29,782  INFO FifoScheduler:369 - Accepted application application_1396474639291_0061 from user: xxxxx, currently num of applications: 6\n17:50:29,782  INFO FifoScheduler:369 - Accepted application application_1396474639291_0095 from user: xxxxx, currently num of applications: 7\n17:50:29,782  INFO RMNodeImpl:385 - xxxxx.com:33502 Node Transitioned from NEW to RUNNING\n17:50:29,782  INFO FifoScheduler:369 - Accepted application application_1396474639291_0062 from user: xxxxx, currently num of applications: 8\n17:50:29,783  INFO FifoScheduler:369 - Accepted application application_1396474639291_0050 from user: xxxxx, currently num of applications: 9\n17:50:29,788 FATAL ResourceManager:600 - Error in handling event type NODE_UPDATE to the scheduler\njava.lang.NullPointerException\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.assignContainers(FifoScheduler.java:462)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.nodeUpdate(FifoScheduler.java:714)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.handle(FifoScheduler.java:743)\n\tat org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler.handle(FifoScheduler.java:104)\n\tat org.apache.hadoop.yarn.server.resourcemanager.ResourceManager$SchedulerEventDispatcher$EventProcessor.run(ResourceManager.java:591)\n\tat java.lang.Thread.run(Thread.java:744)\n17:50:29,790  INFO ResourceManager:604 - Exiting, bbye..\n17:50:29,800  INFO CallQueueManager:53 - Using callQueue class java.util.concurrent.LinkedBlockingQueue\n17:50:29,801  INFO Server:593 - Starting Socket Reader #1 for port 8033\n17:50:29,803  INFO RpcServerFactoryPBImpl:174 - Adding protocol org.apache.hadoop.yarn.server.api.ResourceManagerAdministrationProtocolPB to the server\n17:50:29,804  INFO Server:662 - IPC Server listener on 8033: starting\n17:50:29,804  INFO Server:815 - IPC Server Responder: starting\n17:50:29,809  INFO log:67 - Stopped SelectChannelConnector@0.0.0.0:8088\n17:50:29,910  INFO Server:2399 - Stopping server on 8032\n17:50:29,911  INFO Server:694 - Stopping IPC Server listener on 8032\n17:50:29,911  INFO Server:820 - Stopping IPC Server Responder\n17:50:29,911  INFO Server:2399 - Stopping server on 8033\n17:50:29,912  INFO Server:694 - Stopping IPC Server listener on 8033\n17:50:29,912  INFO ResourceManager:890 - Transitioning to standby state\n17:50:29,912  INFO Server:820 - Stopping IPC Server Responder\n17:50:29,913  INFO MetricsSystemImpl:200 - Stopping ResourceManager metrics system...\n17:50:29,915  INFO MetricsSystemImpl:206 - ResourceManager metrics system stopped.\n17:50:29,916  INFO MetricsSystemImpl:572 - ResourceManager metrics system shutdown complete.\n17:50:29,916  INFO AsyncDispatcher:138 - AsyncDispatcher is draining to stop, igonring any new events.\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonbringhurst","name":"jonbringhurst","key":"jonbringhurst","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jonbringhurst&avatarId=19323","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jonbringhurst&avatarId=19323","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jonbringhurst&avatarId=19323","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jonbringhurst&avatarId=19323"},"displayName":"Jon Bringhurst","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-07T18:15:35.974+0000","updated":"2014-05-07T18:15:35.974+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13992291","id":"13992291","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for your help, Hong, Wangda, and Jon! I think the reproducing flow pointed by Wangda is correct. Minor comments against the patch:\n\n{code}\n+import java.util.concurrent.atomic.AtomicBoolean;\n{code}\n\nWe can remove unused import.\n\n{code}\n+  public void testYARN1986() throws Exception {\n{code}\n\nShould we update the test name to proper one?(e.g. testNodeUpdateBeforeAttemptInit or something?)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-07T22:09:22.778+0000","updated":"2014-05-07T22:09:22.778+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13992489","id":"13992489","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"body":"Tsuyoshi, thanks for your suggestion. I uploaded a new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhiguohong","name":"zhiguohong","key":"zhiguohong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hong Zhiguo","active":true,"timeZone":"Asia/Chongqing"},"created":"2014-05-08T04:05:54.933+0000","updated":"2014-05-08T04:05:54.933+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13992511","id":"13992511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12643895/YARN-1986-3.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-YARN-Build/3716//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-YARN-Build/3716//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-08T05:11:22.484+0000","updated":"2014-05-08T05:11:22.484+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13992950","id":"13992950","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"body":"+1(non-binding). Let's wait for [~sandyr]'s comment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-08T17:38:11.401+0000","updated":"2014-05-08T17:38:11.401+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13994531","id":"13994531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"body":"[~vinodkv], can you check this JIRA? It looks serious problem to me. Should we do this as a blocker ticket of 2.4.1? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ozawa","name":"ozawa","key":"ozawa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ozawa&avatarId=21740","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ozawa&avatarId=21740","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ozawa&avatarId=21740","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ozawa&avatarId=21740"},"displayName":"Tsuyoshi Ozawa","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-11T11:44:27.835+0000","updated":"2014-05-11T11:44:27.835+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13997224","id":"13997224","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandyr","name":"sandyr","key":"sandyr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandy Ryza","active":true,"timeZone":"America/Los_Angeles"},"body":"Sorry for being so slow on this.\n\n+1 to the change.  I looked at the code for the fair and capacity schedulers and they don't seem to face the same issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandyr","name":"sandyr","key":"sandyr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandy Ryza","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-14T02:58:27.576+0000","updated":"2014-05-14T02:58:27.576+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13998060","id":"13998060","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #561 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/561/])\nYARN-1986. In Fifo Scheduler, node heartbeat in between creating app and attempt causes NPE (Hong Zhiguo via Sandy Ryza) (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1594476)\n* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fifo/FifoScheduler.java\n* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/TestFifoScheduler.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-14T21:19:05.031+0000","updated":"2014-05-14T21:19:05.031+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13998194","id":"13998194","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #1779 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1779/])\nYARN-1986. In Fifo Scheduler, node heartbeat in between creating app and attempt causes NPE (Hong Zhiguo via Sandy Ryza) (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1594476)\n* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fifo/FifoScheduler.java\n* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/TestFifoScheduler.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-14T22:44:16.543+0000","updated":"2014-05-14T22:44:16.543+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13998232","id":"13998232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #1753 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1753/])\nYARN-1986. In Fifo Scheduler, node heartbeat in between creating app and attempt causes NPE (Hong Zhiguo via Sandy Ryza) (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1594476)\n* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fifo/FifoScheduler.java\n* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/TestFifoScheduler.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-14T22:48:30.997+0000","updated":"2014-05-14T22:48:30.997+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710629/comment/13999022","id":"13999022","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-trunk-Commit #5605 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5605/])\nYARN-1986. In Fifo Scheduler, node heartbeat in between creating app and attempt causes NPE (Hong Zhiguo via Sandy Ryza) (sandy: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1594476)\n* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fifo/FifoScheduler.java\n* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/TestFifoScheduler.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-15T18:20:14.613+0000","updated":"2014-05-15T18:20:14.613+0000"}],"maxResults":23,"total":23,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-1986/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1uzxj:"}}