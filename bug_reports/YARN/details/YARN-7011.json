{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13094635","self":"https://issues.apache.org/jira/rest/api/2/issue/13094635","key":"YARN-7011","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2017-08-15T00:59:45.278+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Aug 29 01:14:24 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_184170054_*|*_4_*:*_1_*:*_605810961_*|*_5_*:*_2_*:*_7855587","customfield_12312321":null,"resolutiondate":"2017-08-24T04:57:32.508+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-7011/watchers","watchCount":6,"isWatching":false},"created":"2017-08-14T23:20:15.962+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-08-29T01:14:24.840+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12325004","id":"12325004","name":"yarn"}],"timeoriginalestimate":null,"description":"Steps to reproduce:\n1. Copy the conf to a temporary location /tmp/Conf\n2. Modify anything in yarn-site.xml under /tmp/Conf/. Ex: Give invalid RM address\n3. Restart the resourcemanager using yarn-daemon.sh using --config /tmp/Conf\n4. --config is not respected as the changes made in /tmp/Conf/yarn-site.xml is not taken in while restarting RM","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12338418","id":"12338418","description":"3.0.0-beta1 release","name":"3.0.0-beta1","archived":false,"released":true,"releaseDate":"2017-10-03"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"yarn-daemon.sh is not respecting --config option","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssathish%40hortonworks.com","name":"ssathish@hortonworks.com","key":"ssathish@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Sumana Sathish","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssathish%40hortonworks.com","name":"ssathish@hortonworks.com","key":"ssathish@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Sumana Sathish","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16126689","id":"16126689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"What does yarn-daemon.sh --debug say?  You can also run {{yarn-daemon.sh --debug start classpath}}.  The directory passed via --config should be the first entry.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-15T00:59:45.278+0000","updated":"2017-08-15T01:02:02.731+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16126692","id":"16126692","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"For completeness, with a fresh build:\n\n{code}\n$ sbin/yarn-daemon.sh --config /tmp/hadoop --debug start classpath 2>&1 | grep /tmp/hadoop\nDEBUG: HADOOP_CONF_DIR=/tmp/hadoop\nDEBUG: Profiles: importing /tmp/hadoop/shellprofile.d/example.sh\n/tmp/hadoop:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/common/lib/*:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/common/*:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/hdfs:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/hdfs/lib/*:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/hdfs/*:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/mapreduce/*:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/yarn:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/yarn/lib/*:/Users/aw/H/hadoop-3.0.0-beta1-SNAPSHOT/share/hadoop/yarn/*\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-15T01:04:42.642+0000","updated":"2017-08-15T01:04:42.642+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16128024","id":"16128024","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssathish%40hortonworks.com","name":"ssathish@hortonworks.com","key":"ssathish@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Sumana Sathish","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~aw],\n\nI could see \"DEBUG: HADOOP_CONF_DIR=/tmp/hadoop\" but not \"DEBUG: Profiles: importing /tmp/hadoop/\". But still i couldnt see the required config change in RM after the start of it\n{code}\n sudo su - -c \"hadoopInstall/hadoop-yarn-resourcemanager/sbin/yarn-daemon.sh --config /tmp/hadoopConf --debug start resourcemanager\" yarn | grep \"/tmp/hadoopConf\"\nDEBUG: hadoop_parse_args: processing start\nDEBUG: hadoop_parse: asking caller to skip 3\nDEBUG: HADOOP_CONF_DIR=/tmp/hadoopConf\nDEBUG: shellprofiles: hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-aliyun.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-archive-logs.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-archives.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-aws.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-azure-datalake.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-azure.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-distcp.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-extras.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-gridmix.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-hdfs.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-httpfs.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-kafka.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-kms.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-mapreduce.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-openstack.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-rumen.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-streaming.sh hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-yarn.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-aliyun.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-archive-logs.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-archives.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-aws.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-azure-datalake.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-azure.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-distcp.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-extras.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-gridmix.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-hdfs.sh\nDEBUG: HADOOP_SHELL_PROFILES accepted hdfs\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-httpfs.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-kafka.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-kms.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-mapreduce.sh\nDEBUG: HADOOP_SHELL_PROFILES accepted mapred\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-openstack.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-rumen.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-streaming.sh\nDEBUG: Profiles: importing hadoopInstall/hadoop-client/libexec/shellprofile.d/hadoop-yarn.sh\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssathish%40hortonworks.com","name":"ssathish@hortonworks.com","key":"ssathish@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Sumana Sathish","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-15T23:07:35.212+0000","updated":"2017-08-15T23:08:23.128+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16128105","id":"16128105","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"What happens if you run {{yarn --config foo --daemon start --debug resourcemanager}}?\n\nAre you setting HADOOP_CONF_DIR in one of the -env.sh files?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-15T23:53:13.791+0000","updated":"2017-08-15T23:53:13.791+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16128124","id":"16128124","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Also, please run the classpath command instead of resourcemanager.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-16T00:10:36.333+0000","updated":"2017-08-16T00:10:36.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129303","id":"16129303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssathish%40hortonworks.com","name":"ssathish@hortonworks.com","key":"ssathish@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Sumana Sathish","active":true,"timeZone":"Etc/UTC"},"body":"yarn --config /tmp/hadoopConf --daemon start --debug resourcemanager or yarn --config /tmp/hadoopConf --daemon start --debug classpath gives almost same output as sudo su - -c \"hadoopInstall/hadoop-yarn-resourcemanager/sbin/yarn-daemon.sh --config /tmp/hadoopConf --debug start resourcemanager\" yarn \n{code:title= yarn --config /tmp/hadoopConf --daemon start --debug resourcemanager/classpath}\nyarn --config /tmp/hadoopConf --daemon start --debug resourcemanager\nDEBUG: hadoop_parse_args: processing resourcemanager\nDEBUG: hadoop_parse: asking caller to skip 5\nDEBUG: HADOOP_CONF_DIR=/tmp/hadoopConf\nDEBUG: shellprofiles: hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-aliyun.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-archive-logs.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-archives.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-aws.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-azure-datalake.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-azure.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-distcp.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-extras.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-gridmix.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-hdfs.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-httpfs.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-kafka.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-kms.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-mapreduce.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-openstack.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-rumen.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-streaming.sh hadoopInstaller/hadoop-client/libexec/shellprofile.d/hadoop-yarn.sh\n{code}\n\n sudo su - -c \"/usr/hdp/current/hadoop-yarn-resourcemanager/sbin/yarn-daemon.sh --config /tmp/hadoopConf start classpath\" yarn does not have \"DEBUG: HADOOP_CONF_DIR=/tmp/hadoop\"  or \"DEBUG: Profiles: importing /tmp/hadoop/\"\n\n\nYes we set HADOOP_CONF_DIR in our env.sh file\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssathish%40hortonworks.com","name":"ssathish@hortonworks.com","key":"ssathish@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Sumana Sathish","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-16T19:34:34.909+0000","updated":"2017-08-16T19:35:40.694+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129323","id":"16129323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"The classpath output is important because one of the first entries should be the HADOOP_CONF_DIR.  We won't see that in the direct output of the resourcemanager subcommand.  (It might be in the daemon's .out file though.  I can't remember.)\n\nbq. \"DEBUG: Profiles: importing /tmp/hadoop/\"\n\nIf this is missing, then that likely means your copy of the config directory is incomplete.  Likely a result of cp -p * instead of cp -pr *.\n\nBut anyway...\n\nbq. Yes we set HADOOP_CONF_DIR in our env.sh file\n\nThere's the problem then.  Remove it.  Setting HADOOP_CONF_DIR in \\*-env.sh effectively resets the config directory back to wherever it is set. It acts as an *override* to the --config option in 3.x.\n\nOne other note.  The command you've provided for starting the resourcemanager is probably the hardest way to start the RM in 3.x . :)  You can set YARN_RESOURCEMANAGER_USER=yarn in hadoop-env/yarn-env.sh and then just use {{yarn --daemon start resourcemanager}} as root.  It will switch users for you prior to start.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-16T19:54:11.680+0000","updated":"2017-08-16T19:54:23.089+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129622","id":"16129622","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssathish%40hortonworks.com","name":"ssathish@hortonworks.com","key":"ssathish@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Sumana Sathish","active":true,"timeZone":"Etc/UTC"},"body":"bq. There's the problem then. Remove it. Setting HADOOP_CONF_DIR in *-env.sh effectively resets the config directory back to wherever it is set. It acts as an override to the --config option in 3.x.\nIn 2.x, --config takes precedence over the environment variables and -env.sh. Why did that have to change in 3.x?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssathish%40hortonworks.com","name":"ssathish@hortonworks.com","key":"ssathish@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34050","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"},"displayName":"Sumana Sathish","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-16T23:37:55.069+0000","updated":"2017-08-16T23:37:55.069+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129634","id":"16129634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"It's effectively a bug in 2.x and lower.\n\nLet's break this down to it's components:\n\netc/hadoop/x has a working config that includes HADOOP_CONF_DIR definition that points to etc/hadoop\n\nuser copies etc/hadoop to tmp/config and changes something else.  HADOOP_CONF_DIR remains etc/hadoop.  That's a problem because HADOOP_CONF_DIR isn't actually etc/hadoop anymore....\n\nThis is especially problematic for 3rd parties.  They might read hadoop-env.sh directly and not have the logic in 2.x's hadoop-config.sh to know that the HADOOP_CONF_DIR value is a lie.  In 3.x, users either need to a) make sure that they aren't lying to the system by keeping HADOOP_CONF_DIR truthful or b) not set it at all in the env files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-16T23:51:29.475+0000","updated":"2017-08-16T23:51:29.475+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129757","id":"16129757","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"body":"bq. There's the problem then. Remove it. Setting HADOOP_CONF_DIR in *-env.sh effectively resets the config directory back to wherever it is set. It acts as an override to the --config option in 3.x.\nWhy setting HADOOP_CONF_DIR in env is supposed to override --config specified in yarn or hadoop CLI? This will be a regression since 2.x as existing Hadoop user (and cluster management tools) will get affected.\n\nSet back to blocker for 3.0 beta.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"created":"2017-08-17T01:56:47.349+0000","updated":"2017-08-17T01:56:47.349+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129777","id":"16129777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"It's not a regression since the patch that changed the behavior was specifically marked as an incompatible change. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-17T02:28:13.017+0000","updated":"2017-08-17T02:28:13.017+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129779","id":"16129779","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Closing as not a bug. Working as designed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-17T02:29:46.007+0000","updated":"2017-08-17T02:29:46.007+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129796","id":"16129796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"I have, however, opened HADOOP-14781 to signify that we should clarify the documentation around this.  (Because setting HADOOP_CONF_DIR in hadoop-env.sh isn't productive in any version of Hadoop.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-17T02:43:02.439+0000","updated":"2017-08-17T02:43:02.439+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16129912","id":"16129912","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"body":"I am not sure if everyone would agree that it is by design at least I am not convinced yet. I tried to understand why we give up this old behavior and what trade-off we get in here as this significantly change the old behavior that work well in production. We shouldn't assume that this is a new major branch/release so we just break everything for free (or just marking as incompatible, and put a line of document). We should also ask why we break this for and also challenge if it deserves to break it. Otherwise, deploying/upgrading Hadoop 3 will be a nightmare for many of Hadoop users.\nLet's keep it open for discussion before we make an agreement. I also want to hear what others want to say.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"created":"2017-08-17T04:43:28.434+0000","updated":"2017-08-17T04:56:17.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16130744","id":"16130744","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"bq. I am not sure if everyone would agree that it is by design at least I am not convinced yet.\n\nAs the person who designed and wrote the code in trunk, yes, it is working as intended.  \n\nThe problem is one of consistency.  There are a ton of different ways that HADOOP_CONF_DIR can get set:  external vs. internal, --config vs. no option on CLI, HADOOP_CONF_DIR manual vs. auto-discovered (2-3 ways), present in hadoop-env.sh vs. not, present but correct vs. present and incorrect, etc ...  branch-2's behavior when going through this is matrix is wildly unpredictable.  (and let's ignore's YARN_CONF_DIR because it just makes things worse and gets us too far into the weeds)\n\nHere's a fun experiment to show my point.  Unpack a new 2.8.1 tar ball.  Set HADOOP_CONF_DIR in hadoop-2.8.1/etc/hadoop/hadoop-env.sh to something incorrect like /bin.  Now run hadoop classpath.\n\nYou'll find it starts out as \"/bin\".\n\nIs that an incorrect behavior? \n\nOn the one hand: yes, HADOOP_CONF_DIR is pointed to a wrong location.  But on the other:  no, the user explicitly told the system that it wanted /bin as the configuration directory.  branch-2 decided that in this instance /bin was correct and went forward.\n\nIs that example different than when --config is used to point to that exact same misconfigured directory? Yes. branch-2's code decided that it was going to ignore what was in the configuration directory as told to us by the user.\n\nShould that behavior be different?\n\nMy argument is no:  the system should not suddenly decide the user was incorrect in one instance vs. another. It absolutely must act predictably.  The user is expressly passing us a configuration directory that tells us our configuration is actually in a different directory--very much a misconfiguration.  The system accepts that as truth and moves on.\n\nIt's also worthwhile pointing out that 3.x adds a powerful wrinkle here:  .hadoop-env allows the user to specify a different HADOOP_CONF_DIR, overwriting the installed one.  Here, redirection is key.\n\nIf you don't like the current behavior, there are only two ways out.  (Let's be clear: I'll reject any patch that continues branch-2's inconsistent behavior.)\n\n* Option 1: always ignore HADOOP_CONF_DIR when set in hadoop-env.sh\n\nIf the code is reading hadoop-env.sh, then HADOOP_CONF_DIR is superfluous. It's only used at that point is to give a different set of directories to act as replacements for the files present in this one.\n\n* Option 2: throw a warning\n\nAfter reading hadoop-env.sh, detect if the value of HADOOP_CONF_DIR changed (after calculating the full path to deal with symbolic links, etc.).  If it did, throw a warning up and then either accept the new value (current behavior) or ignore it (see option 1).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-17T16:09:24.582+0000","updated":"2017-08-17T16:13:00.940+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16130924","id":"16130924","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"bq. Is that example different than when --config is used to point to that exact same misconfigured directory? Yes. branch-2's code decided that it was going to ignore what was in the configuration directory as told to us by the user.\n\n\nActually, I'm wrong.  branch-2 does exactly what trunk does:\n\n{code}\nhadoop-2.8.1 aw$ grep HADOOP_CONF_DIR etc/hadoop/hadoop-env.sh\nexport HADOOP_CONF_DIR=/bin\nhadoop-2.8.1 aw$ bin/hadoop --config etc/hadoop classpath\n/bin:/private/tmp/hadoop-2.8.1/share/hadoop/common/lib/*: \n...\n{code}\n\nSo the behavior is exactly the same...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-17T17:58:50.544+0000","updated":"2017-08-17T17:58:50.544+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16139553","id":"16139553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Closing this again given the behavior is actually the same given the same configs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-08-24T04:57:32.549+0000","updated":"2017-08-24T04:57:32.549+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13094635/comment/16144625","id":"16144625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"body":"I tried all 4 ways of config in HADOOP 2.7.3, 2.8.1 and 3.0.0-beta:\n1. export HADOOP_CONF_DIR=/tmp/hadoop-config-1\n2. In hadoop-env.sh: \"export HADOOP_CONF_DIR=/tmp/hadoop-config-2\"\n3. pass --config /tmp/hadoop-config-3 on command line.\n4. create a conf directory in HADOOP_HOME where bin/hadoop exists\n\nAnd here comes the results:\n\n||Scenario||Apache 2.7.3 result||Apache 2.8.1 result||Apache 3 result||\n|Only (1)|work|work|work|\n|Only (2)|work|work|work|\n|Only (3)|work|work|work|\n|Only (4)|work|work|work|\n|Both (1) and (2)|1 effective|1 effective|1 effective|\n|Both (2) and (3)|3 effective|3 effective|3 effective|\n|Both (1) and (3)|3 effective|3 effective|3 effective|\n|All (1), (2), (3)|3 effective|3 effective| 3 effective|\n|Any of (1) / (2) / (3) with (4)|(1)(3) is higher than (4), (2) is lowest|(1)(3) is higher than (4), (2) is lowest|(1)(3) is higher than (4), (2) is lowest|\n|All (1), (2), (3), (4)|(3)|(3)|(3)|\n\nBased on results above, I think this shouldn't be an issue for Hadoop 3 beta.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"created":"2017-08-29T01:14:24.840+0000","updated":"2017-08-29T01:14:24.840+0000"}],"maxResults":18,"total":18,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-7011/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3isa7:"}}