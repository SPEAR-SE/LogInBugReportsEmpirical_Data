{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12652517","self":"https://issues.apache.org/jira/rest/api/2/issue/12652517","key":"YARN-800","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2013-06-13T01:32:48.059+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Apr 04 02:57:48 UTC 2015","customfield_12310420":"332841","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_57038635367_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-04-04T02:58:12.704+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-800/watchers","watchCount":14,"isWatching":false},"created":"2013-06-12T22:54:17.411+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324029","id":"12324029","description":"2.1.0-beta release","name":"2.1.0-beta","archived":false,"released":true,"releaseDate":"2013-08-22"}],"issuelinks":[{"id":"12412890","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12412890","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12711064","key":"YARN-1994","self":"https://issues.apache.org/jira/rest/api/2/issue/12711064","fields":{"summary":"Expose YARN/MR endpoints on multiple interfaces","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12464352","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12464352","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12960308","key":"YARN-4970","self":"https://issues.apache.org/jira/rest/api/2/issue/12960308","fields":{"summary":"Difficult to trace \"Connection Refused\" in AM Proxying","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-04-21T08:23:01.311+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Clicking the AM link tries to open up a page with url like\n\nhttp://hostname:8088/proxy/application_1370886527995_0645/\n\nand this leads to an HTTP 500","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"333170","customfield_12312823":null,"summary":"Clicking on an AM link for a running app leads to a HTTP 500","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitgupta","name":"arpitgupta","key":"arpitgupta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Gupta","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitgupta","name":"arpitgupta","key":"arpitgupta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Gupta","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/13681723","id":"13681723","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitgupta","name":"arpitgupta","key":"arpitgupta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"Here is the stack trace\n\n{code}\nHTTP ERROR 500\n\nProblem accessing /proxy/application_1370886527995_0658/. Reason:\n\n    Connection refused\n\nCaused by:\n\njava.net.ConnectException: Connection refused\n\tat java.net.PlainSocketImpl.socketConnect(Native Method)\n\tat java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)\n\tat java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)\n\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)\n\tat java.net.Socket.connect(Socket.java:529)\n\tat java.net.Socket.connect(Socket.java:478)\n\tat java.net.Socket.<init>(Socket.java:375)\n\tat java.net.Socket.<init>(Socket.java:249)\n\tat org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:80)\n\tat org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:122)\n\tat org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)\n\tat org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)\n\tat org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\n\tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\n\tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:346)\n\tat org.apache.hadoop.yarn.server.webproxy.WebAppProxyServlet.proxyLink(WebAppProxyServlet.java:185)\n\tat org.apache.hadoop.yarn.server.webproxy.WebAppProxyServlet.doGet(WebAppProxyServlet.java:334)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n\tat org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)\n\tat com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:66)\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:900)\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:834)\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:795)\n\tat com.google.inject.servlet.FilterDefinition.doFilter(FilterDefinition.java:163)\n\tat com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:58)\n\tat com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)\n\tat com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.apache.hadoop.http.lib.StaticUserWebFilter$StaticUserFilter.doFilter(StaticUserWebFilter.java:109)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:1077)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45)\n\tat org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n\tat org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)\n\tat org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n\tat org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n\tat org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)\n\tat org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)\n\tat org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)\n\tat org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)\n\tat org.mortbay.jetty.Server.handle(Server.java:326)\n\tat org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)\n\tat org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)\n\tat org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)\n\tat org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)\n\tat org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)\n\tat org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)\n\tat org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)\n\nPowered by Jetty://\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitgupta","name":"arpitgupta","key":"arpitgupta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-12T22:54:51.277+0000","updated":"2013-06-12T22:54:51.277+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/13681727","id":"13681727","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitgupta","name":"arpitgupta","key":"arpitgupta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like we have to set the property yarn.resourcemanager.webapp.address to RMAddress:8088 which should not be the case. We should be defaulting the appropriate value in the system.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitgupta","name":"arpitgupta","key":"arpitgupta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-12T23:01:27.842+0000","updated":"2013-06-12T23:01:27.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/13681838","id":"13681838","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"Did a quick local test, and found the link was not broken. It seems that the default value has already been in yarn-default.xml\n{code}\n  <property>\n    <description>The hostname of the RM.</description>\n    <name>yarn.resourcemanager.hostname</name>\n    <value>0.0.0.0</value>\n  </property> \n{code}\n\n{code}\n  <property>\n    <description>The address of the RM web application.</description>\n    <name>yarn.resourcemanager.webapp.address</name>\n    <value>${yarn.resourcemanager.hostname}:8088</value>\n  </property>\n{code}\n\nand YarnConfiguration\n\n{code}\n  public static final String RM_WEBAPP_ADDRESS = \n    RM_PREFIX + \"webapp.address\";\n\n  public static final int DEFAULT_RM_WEBAPP_PORT = 8088;\n  public static final String DEFAULT_RM_WEBAPP_ADDRESS = \"0.0.0.0:\" +\n    DEFAULT_RM_WEBAPP_PORT;\n{code}\n\nLooked into the code, it seems to be related to \"yarn.web-proxy.address\". In WebAppProxyServlet,\n\n{code}\n      resp.setStatus(client.executeMethod(config, method));\n{code}\n\ntries to connect the proxy host to show the application webpage. If \"yarn.web-proxy.address\" is not set, RM will become the proxy, and its address will be $\\{yarn.resourcemanager.hostname\\}:8088 as well.\n\nMaybe it is good to check the configuration of \"yarn.web-proxy.address\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-13T01:32:48.059+0000","updated":"2013-06-13T01:32:48.059+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/13681954","id":"13681954","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"body":"The link is not broken in local cluster because by default local cluster use localhost(0.0.0.0) as RM Ip Address.\nThis problem occurs on real cluster where RM is using real IP address, and RM_WEBAPP_ADDRESS is still defaulting to '0.0.0.0', we should default RM_WEBAPP_ADDRESS to RM_ADDRESS.\nIf we specify RM_WEBAPP_ADDRESS explicitly, this problem will not occur","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-13T06:40:02.649+0000","updated":"2013-06-13T06:40:02.649+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/13686196","id":"13686196","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitgupta","name":"arpitgupta","key":"arpitgupta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"Changing it to minor. If i set yarn.resourcemanager.hostname webapp adress default gets picked up correctly. Leaving it open to see if we can have better default resolution once YARN-673 gets resolved. I think we could check the hostname property as well as the rm address property and pick one of those if only one of them is set.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitgupta","name":"arpitgupta","key":"arpitgupta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-17T23:52:47.135+0000","updated":"2013-06-17T23:52:47.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/14011420","id":"14011420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ddtd","name":"ddtd","key":"ddtd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ddtd&avatarId=24620","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ddtd&avatarId=24620","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ddtd&avatarId=24620","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ddtd&avatarId=24620"},"displayName":"Dave Disser","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm seeing this issue regardless of the status of yarn.resourcemanager.hostname and yarn.web-proxy.address.  I notice the following in my nodemanager log file:\n\n2014-05-28 14:06:20,478 INFO  webproxy.WebAppProxyServlet (WebAppProxyServlet.java:doGet(330)) - dr.who is accessing\nunchecked http://hdp003-3:59959/ which is the app master GUI of application_1401300304842_0001 owned by hdfs\n\nI can try to retrieve this URL directly:\n\nhdp003-2:~ # wget -O - http://hdp003-3:59959/\n--2014-05-28 14:06:47--  http://hdp003-3:59959/\nResolving hdp003-3... 39.64.24.3\nConnecting to hdp003-3|39.64.24.3|:59959... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: http://hdp003-3:59959/mapreduce [following]\n--2014-05-28 14:06:47--  http://hdp003-3:59959/mapreduce\nReusing existing connection to hdp003-3:59959.\nHTTP request sent, awaiting response... 302 Found\nLocation: http://hdp003-3:8088/proxy/application_1401300304842_0001/mapreduce [following]\n--2014-05-28 14:06:47--  http://hdp003-3:8088/proxy/application_1401300304842_0001/mapreduce\nConnecting to hdp003-3|39.64.24.3|:8088... failed: Connection refused.\nResolving hdp003-3... 39.64.24.3\nConnecting to hdp003-3|39.64.24.3|:8088... failed: Connection refused.\n\nThe node running the AM is proxying the request to itself, where there is no proxy running.  If I do the same on the node where AM is running, I get the proper result:\n\nhdp003-3:~ # wget -O - http://hdp003-3:59959/\n--2014-05-28 14:07:25--  http://hdp003-3:59959/\nResolving hdp003-3... 39.64.24.3\nConnecting to hdp003-3|39.64.24.3|:59959... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: http://hdp003-3:59959/mapreduce [following]\n--2014-05-28 14:07:25--  http://hdp003-3:59959/mapreduce\nReusing existing connection to hdp003-3:59959.\nHTTP request sent, awaiting response... 200 OK\nLength: 6224 (6.1K) [text/html]\nSaving to: `STDOUT'\n\n 0% [                                                                            ] 0           --.-K/s              <\n!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\n<html>\n  <meta http-equiv=\"Content-type\" content=\"text/html; charset=UTF-8\">\n  <style type=\"text/css\">\n...\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ddtd","name":"ddtd","key":"ddtd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ddtd&avatarId=24620","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ddtd&avatarId=24620","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ddtd&avatarId=24620","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ddtd&avatarId=24620"},"displayName":"Dave Disser","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-28T18:26:09.650+0000","updated":"2014-05-28T18:26:09.650+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/14013710","id":"14013710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ddtd","name":"ddtd","key":"ddtd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ddtd&avatarId=24620","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ddtd&avatarId=24620","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ddtd&avatarId=24620","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ddtd&avatarId=24620"},"displayName":"Dave Disser","active":true,"timeZone":"America/Los_Angeles"},"body":"As a follow-up, I also notice that the proxying works correctly while the tracking URL is \"UNASSIGNED\" (the first couple seconds after AM container launch), but then HTTP 500 occurs shortly after.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ddtd","name":"ddtd","key":"ddtd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ddtd&avatarId=24620","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ddtd&avatarId=24620","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ddtd&avatarId=24620","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ddtd&avatarId=24620"},"displayName":"Dave Disser","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-30T14:50:32.314+0000","updated":"2014-05-30T14:50:32.314+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/14112981","id":"14112981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"body":"[~cwelch] fixed this as part of YARN-1994.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-27T22:39:03.507+0000","updated":"2014-08-27T22:39:03.507+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/14112983","id":"14112983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"body":"[~arpitgupta], can you please mark it resolved?  I lack privs to do so in this project.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-27T22:41:25.832+0000","updated":"2014-08-27T22:41:25.832+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652517/comment/14395495","id":"14395495","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"body":"Agree with [~mattf]'s comments above, let's resolve this JIRA as duplicated with YARN-1994.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-04-04T02:57:48.158+0000","updated":"2015-04-04T02:57:48.158+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-800/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1lf27:"}}