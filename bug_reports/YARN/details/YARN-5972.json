{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13025987","self":"https://issues.apache.org/jira/rest/api/2/issue/13025987","key":"YARN-5972","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-12-06T15:40:07.382+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Sep 14 17:06:51 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5972/watchers","watchCount":20,"isWatching":false},"created":"2016-12-06T15:21:57.258+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":345600,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hrsharma","name":"hrsharma","key":"hrsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitesh Sharma","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-09-14T17:06:51.215+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"YARN-2877 introduced OPPORTUNISTIC containers, and YARN-5216 proposes to add capability to customize how OPPORTUNISTIC containers get preempted.\n\nIn this JIRA we propose introducing a PAUSED container state.\nInstead of preempting a running container, the container can be moved to a PAUSED state, where it remains until resources get freed up on the node then the preempted container can resume to the running state.\n\nNote that process freezing this is already supported by 'cgroups freezer' which is used internally by the docker pause functionality. Windows also has OS level support of a similar nature.\n\nOne scenario where this capability is useful is work preservation. How preemption is done, and whether the container supports it, is implementation specific.\n\nFor instance, if the container is a virtual machine, then preempt call would pause the VM and resume would restore it back to the running state.\nIf the container executor / runtime doesn't support preemption, then preempt would default to killing the container. \n ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12842362","id":"12842362","filename":"container-pause-resume.pdf","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-08T15:42:57.154+0000","size":323070,"mimeType":"application/pdf","content":"https://issues.apache.org/jira/secure/attachment/12842362/container-pause-resume.pdf"}],"aggregatetimeestimate":345600,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Support Pausing/Freezing of opportunistic containers","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[{"id":"12982533","key":"YARN-5292","self":"https://issues.apache.org/jira/rest/api/2/issue/12982533","fields":{"summary":"NM Container lifecycle and state transitions to support for PAUSED container state.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}},{"id":"12976943","key":"YARN-5216","self":"https://issues.apache.org/jira/rest/api/2/issue/12976943","fields":{"summary":"Expose configurable preemption policy for OPPORTUNISTIC containers running on the NM","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}},{"id":"13032385","key":"YARN-6059","self":"https://issues.apache.org/jira/rest/api/2/issue/13032385","fields":{"summary":"Update paused container state in the NM state store","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}},{"id":"13077449","key":"YARN-6692","self":"https://issues.apache.org/jira/rest/api/2/issue/13077449","fields":{"summary":"Delay pause when container is localizing","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hrsharma","name":"hrsharma","key":"hrsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitesh Sharma","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":345600,"percent":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/15725844","id":"15725844","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"body":"Created YARN-5972 branch for this work","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-06T15:40:07.382+0000","updated":"2016-12-06T15:40:14.203+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/15725848","id":"15725848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"body":"As per Subru's request in YARN-5292, I have moved this to an umbrella JIRA to foster further discussion as well as a place to post the design doc.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-06T15:41:36.889+0000","updated":"2016-12-06T15:41:36.889+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/15726913","id":"15726913","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"body":"[~subru], thanks for taking a look. w.r.t your ([comment|https://issues.apache.org/jira/browse/YARN-5292?focusedCommentId=15685939]) on YARN-5292, [~hrsharma], please feel free to chime in:\nBased on my understanding of MAPREDUCE-4584, I feel that feature is actually quite orthogonal to this, and I don't think one approach is necessarily better/worse than the other. They can possibly be mixed and matched based on the use case.\n\nWhile notifying an AM of containers that are about to be preempted does allow the AM to check-point work, it does imply, as you pointed out, that AMs be modified to act on this input and make some decisions based on it.\n\nContainer pausing/freezing on the other hand, given OS/VM level support (also exposed via Docker and LXC) to actually freeze a process (agreed, their definition of freeze might vary), is actually AM/application independent. This can be useful, for applications and deployments that do not really want to check-point on its own but at the same time like the idea of container preemption with work preservations.\n\nAlso, the NM container lifecycle and API changes in the Container Executor should not ideally take into account the execution type of the containers. The trigger can either be from the ContainerScheduler (in case of YARN-1011 and YARN-2877, when it decides resources are required for a guaranteed container) or from an AM (the AM wants to play nice and relinquish resources so that some opportunistic containers running on the node to run)\n\nEven though this is currently targeted for opportunistic containers, I don't really see any problems exposing this to AMs via the ContainerManagementProtocol (though the devil is in the details)\nbq. We cannot guarantee RESUME unless we block the allocation for the Container which IMHO defeats the purpose\nNot sure I completely agree. If an AM pauses a guaranteed container, yes, the allocation is blocked, but this is no different from an AM starting a container running never-ending sleep job, except this has the advantage that the NM is aware of it and can use the relinquished resources to start any queued opportunistic containers. Since the container is guaranteed, resume is ensured, since any opportunistic container that was running due to graciousness of the AM would immediately be preempted. I do agree though, in the case of opportunistic containers, if an AM explicitly asks to pause it, it cannot expect the container to be resumed as soon as it asks.\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-06T22:23:03.597+0000","updated":"2016-12-06T22:49:50.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/15727256","id":"15727256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hrsharma","name":"hrsharma","key":"hrsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitesh Sharma","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi folks, thanks for opening this JIRA and the feedback. Much appreciated. \n\n{quote}\nWhile notifying an AM of containers that are about to be preempted does allow the AM to check-point work, it does imply, as you pointed out, that AMs be modified to act on this input and make some decisions based on it.\n\nContainer pausing/freezing on the other hand, given OS/VM level support (also exposed via Docker and LXC) to actually freeze a process (agreed, their definition of freeze might vary), is actually AM/application independent. This can be useful, for applications and deployments that do not really want to check-point on its own but at the same time like the idea of container preemption with work preservations.\n{quote}\n\nAgree with [~asuresh] here. What container pausing/freezing offers is an ability to delegate to the underlying OS how the resources used by a container should be reclaimed and when resources free up again then restart the container. The gains of doing so will vary based on the container executor implementation. That said it doesn't make the PAUSE/RESUME functionality to be the perfect solution for work preservation or substitute AM specific checkpointing.\n\n[YARN-5292] adds PAUSE/RESUME for opportunistic containers and doesn't target guaranteed containers. I can think of scenarios where it is good to have this functionality in guaranteed containers but I would wait and see some need coming in the community.  \n\nAllowing the ContainerManager to initiate a pause/resume on an opportunistic container was considered but we decided not to have that functionality. There are some edge cases around what happens if the CM initiates a RESUME on a paused container and the NM tries to PAUSE it ([YARN-5216]). I think [~subru] is also touching towards these edge cases.\n\nOverall I feel that the current design of allowing PAUSE/RESUME on opportunistic containers is a good starting point and allows to PAUSE an opportunistic container in favor of a guaranteed one and when resources free up it gets RESUMED ([YARN-5216]). We should probably implement pauseContainer and resumeContainer for Docker based container executors as opportunistic containers running inside Docker containers can benefit from it. \n\nIf the community feels then we can extend the functionality towards guaranteed containers. I personally think that may become more relevant as YARN containers become virtualized via Docker or virtual machines, but I would love to hear some scenarios before we do that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hrsharma","name":"hrsharma","key":"hrsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitesh Sharma","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-07T00:58:29.442+0000","updated":"2016-12-07T00:58:29.442+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/15732551","id":"15732551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"body":"Moved design doc from YARN-5292 here..","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-08T15:42:57.167+0000","updated":"2016-12-08T15:42:57.167+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/15826339","id":"15826339","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"body":"My opinion is that PAUSED state should not be handled any differently from the current QUEUED state we already persist in the store, this implies YARN-6059 can probably be closed (We do need to fix the ContainerScheduler to populate it with the running containers though, but this is orthogonal to the paused/resume feature and should be handled as a separate JIRA).\n\nIf folks are fine, I was thinking of cherry-picking YARN-5292 and YARN-5216 to trunk. [~subru], [~kkaranasos], thoughts ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-17T16:26:03.879+0000","updated":"2017-01-17T16:26:03.879+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/15832683","id":"15832683","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. My opinion is that PAUSED state should not be handled any differently from the current QUEUED state we already persist in the store, this implies YARN-6059 can probably be closed (We do need to fix the ContainerScheduler to populate it with the running containers though, but this is orthogonal to the paused/resume feature and should be handled as a separate JIRA).\nRegarding this, I just had an offline chat with [~asuresh]. It seems that it would be better to add a separate entry at the StateStore for the PAUSED containers. This way we can decide what to do with them at node recovery. For example, we might want to kill them to release node resources that they might be holding.\n\nI will give a look at YARN-5292 and YARN-5216 next week.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkaranasos","name":"kkaranasos","key":"kkaranasos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kkaranasos&avatarId=21934","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kkaranasos&avatarId=21934","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kkaranasos&avatarId=21934","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kkaranasos&avatarId=21934"},"displayName":"Konstantinos Karanasos","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-21T00:50:56.762+0000","updated":"2017-01-21T00:50:56.762+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/16163703","id":"16163703","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"body":"I was not sure if we needed a formal merge vote for this - given that the scope for this has been slightly reduced. The 3 sub-tasks under this umbrella all deal with opening up the interfaces and adding methods (which default to \"feature not supported\" exceptions) to the abstract {{ContainerExecutor}}.\nMost of the changes are in the {{ContainerScheduler}} and some minor changes to the NM side Container state machines and the NM state store. The feature itself requires a ContainerExecutor implementation plugged in that can support Pausing and Thawing, and therefore is OFF by default. Support for the {{LinuxContainerExecutor}} is being tracked at YARN-6838 but I do not feel it should block merging this to trunk.\nGiven the above, I was wondering if it would be ok to just merge the 3 JIRAs into trunk and branch-2. Do let me know if anyone has any objections to doing so.\n(cc [~jlowe] / [~jianhe] / [~chris.douglas])","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-09-12T21:39:21.215+0000","updated":"2017-09-13T00:21:47.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/16166368","id":"16166368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"I'm OK with this being added to trunk as separate JIRAs.  The entire YARN-6838 branch is currently a less than 80K patch against trunk, and I've seen far larger and scarier stuff go into trunk via a single JIRA.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2017-09-14T14:28:29.922+0000","updated":"2017-09-14T14:28:29.922+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13025987/comment/16166607","id":"16166607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~jlowe], cherry-picked the 3 JIRAs and committed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asuresh","name":"asuresh","key":"asuresh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun Suresh","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-09-14T17:06:51.215+0000","updated":"2017-09-14T17:06:51.215+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5972/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i378bb:"}}