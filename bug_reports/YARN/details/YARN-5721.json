{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13011327","self":"https://issues.apache.org/jira/rest/api/2/issue/13011327","key":"YARN-5721","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2016-10-11T12:57:20.061+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Nov 03 12:00:04 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1905416603_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-11-02T14:00:54.131+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5721/watchers","watchCount":6,"isWatching":false},"created":"2016-10-11T12:43:58.396+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12485042","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12485042","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"13013608","key":"YARN-5753","self":"https://issues.apache.org/jira/rest/api/2/issue/13013608","fields":{"summary":"fix NPE in AMRMClientImpl.getMatchingRequests()","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-11-03T12:00:04.825+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319416","id":"12319416","name":"api"}],"timeoriginalestimate":null,"description":"The following NPE was thrown using a Spark 2.1.0-SNAPSHOT (as client) by changing Hadoop dependency to the latest (by the time the ERROR has been generated).\n\n{{2016-10-10 11:33:53,392 ERROR yarn.ApplicationMaster: Uncaught exception: \njava.lang.NullPointerException\n\tat org.apache.hadoop.yarn.client.api.impl.AMRMClientImpl.getMatchingRequests(AMRMClientImpl.java:668)\n        at org.apache.hadoop.yarn.client.api.impl.AMRMClientImpl.getMatchingRequests(AMRMClientImpl.java:651)\n\tat org.apache.spark.deploy.yarn.YarnAllocator.getPendingAtLocation(YarnAllocator.scala:210)\n\tat org.apache.spark.deploy.yarn.YarnAllocator.getPendingAllocate(YarnAllocator.scala:203)\n\tat org.apache.spark.deploy.yarn.YarnAllocator.updateResourceRequests(YarnAllocator.scala:318)\n\tat org.apache.spark.deploy.yarn.YarnAllocator.allocateResources(YarnAllocator.scala:278)\n\tat org.apache.spark.deploy.yarn.ApplicationMaster.registerAM(ApplicationMaster.scala:350)\n\tat org.apache.spark.deploy.yarn.ApplicationMaster.runExecutorLauncher(ApplicationMaster.scala:418)\n\tat org.apache.spark.deploy.yarn.ApplicationMaster.run(ApplicationMaster.scala:250)}}\n\nWe've also pulled the latest code (1 hour ago) from the repository, and ran a test for {{getMatchingRequests}}. Same NPE has been encountered.\n\n{{getMatchingRequests}} should never throw an NPE even if it has been called right after the client has been started.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"NPE at AMRMClientImpl.getMatchingRequests","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ehnalis","name":"Ehnalis","key":"ehnalis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zoltán Zvara","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ehnalis","name":"Ehnalis","key":"ehnalis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zoltán Zvara","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Tested on Windows 10, in Dockerized Linux containers & Ubuntu 16.04 with Java 7, Java 8.","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10431","value":"Important","id":"10431"}],"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13011327/comment/15565340","id":"15565340","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szape","name":"szape","key":"szape","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Péter Szabó","active":true,"timeZone":"Europe/Budapest"},"body":"I'm working on it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szape","name":"szape","key":"szape","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Péter Szabó","active":true,"timeZone":"Europe/Budapest"},"created":"2016-10-11T12:57:20.061+0000","updated":"2016-10-11T12:57:20.061+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13011327/comment/15565375","id":"15565375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szape","name":"szape","key":"szape","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Péter Szabó","active":true,"timeZone":"Europe/Budapest"},"body":"In AMRMClientImpl.java line 668, remoteRequestsTable can be null. Critical change was introduced with commit 19c743c1bbcaf3df8f1d63e557143c960a538c42.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szape","name":"szape","key":"szape","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Péter Szabó","active":true,"timeZone":"Europe/Budapest"},"created":"2016-10-11T13:13:35.519+0000","updated":"2016-10-11T13:13:35.519+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13011327/comment/15565431","id":"15565431","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user szape opened a pull request:\n\n    https://github.com/apache/hadoop/pull/139\n\n    YARN-5721. NPE at AMRMClientImpl.getMatchingRequests\n\n    The following NPE was thrown using a Spark 2.1.0-SNAPSHOT (as client) by changing Hadoop dependency to the latest (by the time the ERROR has been generated).\n    \n    {{2016-10-10 11:33:53,392 ERROR yarn.ApplicationMaster: Uncaught exception:\n    java.lang.NullPointerException\n    at org.apache.hadoop.yarn.client.api.impl.AMRMClientImpl.getMatchingRequests(AMRMClientImpl.java:668)\n    at org.apache.hadoop.yarn.client.api.impl.AMRMClientImpl.getMatchingRequests(AMRMClientImpl.java:651)\n    at org.apache.spark.deploy.yarn.YarnAllocator.getPendingAtLocation(YarnAllocator.scala:210)\n    at org.apache.spark.deploy.yarn.YarnAllocator.getPendingAllocate(YarnAllocator.scala:203)\n    at org.apache.spark.deploy.yarn.YarnAllocator.updateResourceRequests(YarnAllocator.scala:318)\n    at org.apache.spark.deploy.yarn.YarnAllocator.allocateResources(YarnAllocator.scala:278)\n    at org.apache.spark.deploy.yarn.ApplicationMaster.registerAM(ApplicationMaster.scala:350)\n    at org.apache.spark.deploy.yarn.ApplicationMaster.runExecutorLauncher(ApplicationMaster.scala:418)\n    at org.apache.spark.deploy.yarn.ApplicationMaster.run(ApplicationMaster.scala:250)}}\n    \n    We've also pulled the latest code (1 hour ago) from the repository, and ran a test for getMatchingRequests. Same NPE has been encountered.\n    \n    getMatchingRequests should never throw an NPE even if it has been called right after the client has been started.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/szape/hadoop YARN-5721\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/hadoop/pull/139.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #139\n    \n----\ncommit 6070305ff126ff947055e9c4ce4f624e08b09e03\nAuthor: szape <nemderogatorius@gmail.com>\nDate:   2016-10-11T13:19:29Z\n\n    YARN-5721. Fixed NullPointerException in AMRMClientImpl.getMatchingRequests\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-11T13:41:39.638+0000","updated":"2016-10-11T13:41:39.638+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13011327/comment/15582577","id":"15582577","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user zzvara commented on the issue:\n\n    https://github.com/apache/hadoop/pull/139\n  \n    Looks good and fixes the problem.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-17T15:45:17.706+0000","updated":"2016-10-17T15:45:17.706+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13011327/comment/15629059","id":"15629059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=templedf","name":"templedf","key":"templedf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=templedf&avatarId=24879","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=templedf&avatarId=24879","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=templedf&avatarId=24879","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=templedf&avatarId=24879"},"displayName":"Daniel Templeton","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the patch [~szape]! [~haibochen] already beat you to it in YARN-5753, though.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=templedf","name":"templedf","key":"templedf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=templedf&avatarId=24879","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=templedf&avatarId=24879","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=templedf&avatarId=24879","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=templedf&avatarId=24879"},"displayName":"Daniel Templeton","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-02T14:00:54.255+0000","updated":"2016-11-02T14:00:54.255+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13011327/comment/15632529","id":"15632529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ehnalis","name":"Ehnalis","key":"ehnalis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zoltán Zvara","active":true,"timeZone":"Etc/UTC"},"body":"Thanks [~templedf], great to see that JIRA & Github help us to duplicate efforts.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ehnalis","name":"Ehnalis","key":"ehnalis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zoltán Zvara","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-03T12:00:04.825+0000","updated":"2016-11-03T12:00:04.825+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5721/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i34pzj:"}}