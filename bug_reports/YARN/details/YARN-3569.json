{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12826666","self":"https://issues.apache.org/jira/rest/api/2/issue/12826666","key":"YARN-3569","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-05-27T18:24:18.168+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri May 29 21:35:32 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-3569/watchers","watchCount":5,"isWatching":false},"created":"2015-05-01T22:54:35.532+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329059","id":"12329059","description":"2.8.0 release","name":"2.8.0","archived":false,"released":true,"releaseDate":"2017-03-22"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-05-29T21:35:32.586+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319416","id":"12319416","name":"api"}],"timeoriginalestimate":null,"description":"YarnClient.getAllQueues() returns a list of queues. If we pick a queue from this list and call getApplications on it, we always get an empty list even-though applications are running on that queue.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12731637","id":"12731637","filename":"YARN-3569.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-08T22:41:05.361+0000","size":970,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12731637/YARN-3569.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"YarnClient.getAllQueues returns a list of queues that do not display running apps.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12826666/comment/14535796","id":"14535796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"body":"Tried to write a test case using the MiniYarnCluster but the app gets stuck in accepted state. I have filed the following issue for it [YARN-3608|https://issues.apache.org/jira/browse/YARN-3608].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-08T22:43:42.370+0000","updated":"2015-05-08T22:43:42.370+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12826666/comment/14561433","id":"14561433","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spandan], what is your use case ? If you want to get applications for the given queues, you can use below API in YarnClient.\n{code}\n  public abstract List<ApplicationReport> getApplications(Set<String> queues,\n      Set<String> users, Set<String> applicationTypes,\n      EnumSet<YarnApplicationState> applicationStates)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-27T18:24:18.168+0000","updated":"2015-05-27T18:24:18.168+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12826666/comment/14561580","id":"14561580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  17m 17s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   8m 48s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |   9m 47s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 25s | The applied patch does not increase the total number of release audit warnings. |\n| {color:green}+1{color} | checkstyle |   0m 34s | There were no new checkstyle issues. |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 34s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   0m 50s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:red}-1{color} | yarn tests |   6m 57s | Tests failed in hadoop-yarn-client. |\n| | |  46m 51s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Timed out tests | org.apache.hadoop.yarn.client.TestResourceTrackerOnHA |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12731637/YARN-3569.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / c46d4ba |\n| hadoop-yarn-client test log | https://builds.apache.org/job/PreCommit-YARN-Build/8101/artifact/patchprocess/testrun_hadoop-yarn-client.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/8101/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf903.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/8101/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-27T19:40:33.843+0000","updated":"2015-05-27T19:40:33.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12826666/comment/14565233","id":"14565233","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"body":"[~jianhe]. The use case I was thinking is as follows. Say for example if you have an instance of YarnClient and then you decide to find out what all queues does the RM currently have. So I do yarnClient.getAllQueues(). Now I decide to figure out what all applications are in each of these queues. For using the getApplications() function that you suggested, you have to iterate through the list of queueInfos returned and extract the name of each of the queues. It would be better and easier from the user perspective if he could just access a queue in the list and call queueinfo.getApplications() to get all the apps on the queue. Currently this always returns an empty list and patch provided should fix it.\n\nOn another note I have manually verified that if you do yanClient.getQueueInfo(queuename).getApplications() it does indeed returns the running apps in that queue. No reason as to why fixing the route from yarnClient.getAllQueues() should not be done.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-29T19:11:25.175+0000","updated":"2015-05-29T19:11:25.175+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12826666/comment/14565373","id":"14565373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spandan], the problem with returning applications in getAllQueues() / getRootQueueInfos() / getChildQueueInfos() APIs is that the number of applications can potentially become very large. It was a deliberate decision to only return apps for the case of getQueueInfo(String queueName).\n\nWe have two choices\n # add additional APIs corresponding to bulk-queue-info requests which also return the applications\n # Just document that users will have to manually get applications list after they get the list of queue-names and that queueInfo.getApplications() will be empty.\n\nI prefer we do #2. Thoughts?\n\nCanceling patch while we continue discussion.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-29T20:50:05.910+0000","updated":"2015-05-29T20:50:05.910+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12826666/comment/14565458","id":"14565458","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"body":"[~vinodkv]\nI think we should do both 1 and 2.\nFor doing 1 we can just have a overloaded function that takes a boolean parameter. getAllApplications(boolean). The boolean parameter would indicate whether we want the application list for a queue or not. This will cater to the use case that was pointed out in my previous comment.\n\nFor doing 2 we should inform people about this and point to the new api mentioned in point 1.\n\nAny thoughts on this ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spandan","name":"spandan","key":"spandan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Spandan Dutta","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-29T21:35:32.586+0000","updated":"2015-05-29T21:35:32.586+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-3569/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2e7a7:"}}