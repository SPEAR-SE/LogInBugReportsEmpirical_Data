{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13176095","self":"https://issues.apache.org/jira/rest/api/2/issue/13176095","key":"YARN-8609","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2018-08-01T15:43:13.605+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Aug 08 13:36:33 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_569273716_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2018-08-08T02:07:14.658+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-8609/watchers","watchCount":4,"isWatching":false},"created":"2018-08-01T11:59:20.972+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12540556","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12540556","type":{"id":"12310060","name":"Container","inward":"Is contained by","outward":"contains","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310060"},"inwardIssue":{"id":"12850276","key":"YARN-3998","self":"https://issues.apache.org/jira/rest/api/2/issue/12850276","fields":{"summary":"Add support in the NodeManager to re-launch containers","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-08-08T13:36:33.696+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319323","id":"12319323","name":"nodemanager"}],"timeoriginalestimate":null,"description":"Sometimes, NodeManger will send large container statuses to ResourceManager when NodeManger start with recovering, as a result , NodeManger will be failed to start because of oom.\r\n In my case, the large container statuses size is 135M, which contain 11 container statuses, and I find the diagnostics of 5 containers are very large(27M), so, I truncate the container diagnostics as the patch.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12933906","id":"12933906","filename":"contain_status.jpg","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-08-01T12:01:48.671+0000","size":370663,"mimeType":"image/jpeg","content":"https://issues.apache.org/jira/secure/attachment/12933906/contain_status.jpg"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12933907","id":"12933907","filename":"oom.jpeg","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-08-01T12:02:03.643+0000","size":229018,"mimeType":"image/jpeg","content":"https://issues.apache.org/jira/secure/attachment/12933907/oom.jpeg"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12934196","id":"12934196","filename":"YARN-8609.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-08-03T03:06:00.812+0000","size":2732,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12934196/YARN-8609.001.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"NM oom because of large container statuses","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13176095/comment/16565195","id":"16565195","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"body":"Seems to be related to https://issues.apache.org/jira/browse/YARN-2115,  [~jianhe] , Woud you like to review the patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-08-01T12:13:30.870+0000","updated":"2018-08-01T12:13:30.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13176095/comment/16565511","id":"16565511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Thanks for the report and patch!\r\n\r\nIMHO any truncation should not be tied to recovery, as the NM could OOM just tracking container diagnostics.  Recovery involves reloading what was already in memory before the crash/restart.  If the diagnostics of a container were 27M in the recovery file then that means it was 27M in the NM heap before it recovered as well.\r\n\r\nRecovery does take more memory to recover than normal operations, and YARN-8242 and the work there will help reduce that load.  Rather than forcing a rather draconian truncation (27M to 5000 bytes is rather extreme), this should be a configurable setting and applied when diagnostics are added to a container rather than upon recovery.  See ContainerImpl#addDiagnostics.  Otherwise reported container statuses will suddenly will change when the NM restarts and that is counter to the goals of the NM recovery feature.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2018-08-01T15:43:13.605+0000","updated":"2018-08-01T15:43:13.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13176095/comment/16567706","id":"16567706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"body":"Thanks for your comment.\r\nI have updated my patch according to your suggestion, but I find there is a same parameter(NM_CONTAINER_DIAGNOSTICS_MAXIMUM_SIZE) in YARN-3998.\r\nAs far as I know, there are two kinds of diagnostics info, one is fixed string, such as \"Container is killed before being launched.\\n\", the other is exception message which may be very large, so I think we should just truncate exception message rather than the entire string made by for loop.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-08-03T03:07:52.776+0000","updated":"2018-08-03T03:07:52.776+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13176095/comment/16570805","id":"16570805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"bq. As far as I know, there are two kinds of diagnostics info, one is fixed string, such as \"Container is killed before being launched.\\n\", the other is exception message which may be very large, so I think we should just truncate exception message rather than the entire string made by for loop.\r\n\r\nThere should be only one way to store/update a container's diagnostics for recovery, and that's NMStateStoreService#storeContainerDiagnostics.  That method does not append but replaces the diagnostics.  The only call to that method is ContainerImpl#addDiagnostics which after YARN-3998 trims the diagnostics to the maximum configured length, keeping the most recently added characters.  The for loop is just for adding all the messages since it's implemented with variable arguments.  The most memory this method could take is  diagnosticsMaxSize + size_of_new_diagnostics which is then truncated to diagnosticsMaxSize at the end.  It will not persist, either in memory or in the state store, diagnostics beyond diagnosticsMaxSize.\r\n\r\nIf you're not running with YARN-3998 in your build then it appears the necessary changes are already addressed by YARN-3998.  It certainly looks as if that JIRA should have addressed your issue if it's configured to the default or a reasonable limit.  Are you running on a version that contains that change?  If so then I'm wondering how you were able to get a 27MB diagnostic message into the state store.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2018-08-06T21:30:54.463+0000","updated":"2018-08-06T21:30:54.463+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13176095/comment/16571033","id":"16571033","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"body":"Thank you for your patience!\r\n I know what you say, and my hadoop version is 2.7.2 which don't contain the change in YARN-3998. Indeed, it would not take up too much memory if running with -YARN-3998.-\r\n However, for example, if the raw diagnostic is largeExceptionMessage + fixedString + fixedString + ... , all meaningful fixedString will be discarded when running with YARN-3998. So, if we do truncation in for loop, all kinds of diagnostic info will retain. This is what I want to say and it is a small improvement.\r\n\r\nBesides,  diagnosticsMaxSize in -YARN-3998- is also necessary, and, there is a small possibility to reach diagnosticsMaxSize with appropriate truncation in for loop.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-08-07T02:17:41.641+0000","updated":"2018-08-07T02:36:00.016+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13176095/comment/16571732","id":"16571732","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"bq. Indeed, it would not take up too much memory if running with YARN-3998.\r\n\r\nThen I propose this be closed as a duplicate.  Those looking for a JIRA and finding the summary matching their symptoms should be directed to YARN-3998 since that alone is sufficient to address that problem.\r\n\r\nbq. if we do truncation in for loop, all kinds of diagnostic info will retain. This is what I want to say and it is a small improvement.\r\n\r\nWe can add the ability to truncate individual diagnostic messages in a separate improvement JIRA.  However as I mentioned above, 5000 may be too small of a default since it could end up truncating a critical \"Caused by\" towards the end of a large stacktrace.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2018-08-07T14:16:47.761+0000","updated":"2018-08-07T14:16:47.761+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13176095/comment/16572565","id":"16572565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"body":"{quote}\r\n\r\nThose looking for a JIRA and finding the summary matching their symptoms should be directed to YARN-3998since that alone is sufficient to address that problem.\r\n\r\n{quote}\r\n\r\n\r\n-YARN-3998- did slove the problem. However,  I am worried that -YARN-3998- does not mention oom, too much diagnostic info, large container status, etc. in summary or description.\r\n\r\n Closed as a duplicate","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luxianghao","name":"luxianghao","key":"luxianghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=luxianghao&avatarId=33482","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=luxianghao&avatarId=33482","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=luxianghao&avatarId=33482","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=luxianghao&avatarId=33482"},"displayName":"Xianghao Lu","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-08-08T02:05:35.532+0000","updated":"2018-08-08T02:05:35.532+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13176095/comment/16573232","id":"16573232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"This JIRA does mention all those things, and now it points to YARN-3998 as the fix (I just linked the two JIRAs).  If we resolve it as fixed with a patch that only truncates individual diagnostic messages, that will not prevent an OOM if something adds a ton of separate diagnostic messages to a container.  It would be a partial fix to the OOM while YARN-3998 is a complete fix.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2018-08-08T13:36:33.696+0000","updated":"2018-08-08T13:36:33.696+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-8609/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3wke7:"}}