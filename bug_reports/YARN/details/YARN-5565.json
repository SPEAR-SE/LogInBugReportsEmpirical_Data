{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13000231","self":"https://issues.apache.org/jira/rest/api/2/issue/13000231","key":"YARN-5565","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2018-07-07T04:47:56.633+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jul 17 10:28:17 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_58769475061_*|*_3_*:*_1_*:*_866340754_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2018-07-17T05:27:51.517+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5565/watchers","watchCount":3,"isWatching":false},"created":"2016-08-25T23:57:35.740+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["capacity-scheduler","scheduler","yarn"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332791","id":"12332791","description":"2.7.2 release","name":"2.7.2","archived":false,"released":true,"releaseDate":"2016-01-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Zian+Chen","name":"Zian Chen","key":"zian chen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Zian Chen","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-07-17T10:28:17.621+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327621","id":"12327621","name":"capacity scheduler"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12325004","id":"12325004","name":"yarn"}],"timeoriginalestimate":null,"description":"Hi\n\nI was testing and found out that value assigned in the scheduler configuration is not consistent with what ResourceManager is assigning.\n\nIf i set the configuration as below and understand that it is java float, but the rounding is not correct.\n\ncapacity-sheduler.xml\n<property>\n  <name>yarn.scheduler.capacity.q1.capacity</name>\n  <value>7.142857142857143</value>\n</property>\n\nIn Java:  System.err.println((7.142857142857143f)) ===> 7.142587 \n\nBut, instead Resource Manager is assigning is 7.1428566\n\nTested this on hadoop 2.7.2","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Capacity Scheduler not assigning value correctly.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gurmukhd","name":"gurmukhd","key":"gurmukhd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"gurmukh singh","active":true,"timeZone":"Australia/Sydney"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gurmukhd","name":"gurmukhd","key":"gurmukhd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"gurmukh singh","active":true,"timeZone":"Australia/Sydney"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"hadoop 2.7.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000231/comment/16509115","id":"16509115","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gurmukhd","name":"gurmukhd","key":"gurmukhd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"gurmukh singh","active":true,"timeZone":"Australia/Sydney"},"body":"This behavior is still true for 2.7.6.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gurmukhd","name":"gurmukhd","key":"gurmukhd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"gurmukh singh","active":true,"timeZone":"Australia/Sydney"},"created":"2018-06-12T03:12:43.270+0000","updated":"2018-06-12T03:12:43.270+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000231/comment/16535622","id":"16535622","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Zian+Chen","name":"Zian Chen","key":"zian chen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Zian Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~gurmukhd] , After investigating this issue, I think is related to JAVA float precision. JAVA float has 32 bits (4 bytes) where 23 bits are used for the mantissa (about 7 decimal *digits*). which will result in some unexpected precision loss here. \r\n\r\nAlso, capacity value is a percentage based value, so it will be converted and cap into 0.0714286f. \r\n\r\nI tested in local, System.out.println(0.07142857142857143f) will be 0.071428575.\r\n\r\nSo to be safe, we suggest not setting capacity with precision which extends JAVA float precision.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Zian+Chen","name":"Zian Chen","key":"zian chen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Zian Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-07-07T04:47:56.633+0000","updated":"2018-07-07T04:48:32.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000231/comment/16542250","id":"16542250","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Zian+Chen","name":"Zian Chen","key":"zian chen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Zian Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~gurmukhd] , any comments on this? Can we close this issue as won't fix?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Zian+Chen","name":"Zian Chen","key":"zian chen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Zian Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-07-12T22:10:12.369+0000","updated":"2018-07-12T22:10:12.369+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000231/comment/16546041","id":"16546041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Zian+Chen","name":"Zian Chen","key":"zian chen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Zian Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"close this as won't fix as explained above.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Zian+Chen","name":"Zian Chen","key":"zian chen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Zian Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-07-17T05:27:42.279+0000","updated":"2018-07-17T05:27:42.279+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13000231/comment/16546333","id":"16546333","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gurmukhd","name":"gurmukhd","key":"gurmukhd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"gurmukh singh","active":true,"timeZone":"Australia/Sydney"},"body":"Thanks Zian, for looking into this","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gurmukhd","name":"gurmukhd","key":"gurmukhd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"gurmukh singh","active":true,"timeZone":"Australia/Sydney"},"created":"2018-07-17T10:28:17.621+0000","updated":"2018-07-17T10:28:17.621+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-5565/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i32tmf:"}}