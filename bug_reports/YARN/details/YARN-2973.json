{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12762178","self":"https://issues.apache.org/jira/rest/api/2/issue/12762178","key":"YARN-2973","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2014-12-17T03:52:46.571+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Sep 25 13:42:04 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_10217397060_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-04-14T08:21:53.789+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-2973/watchers","watchCount":4,"isWatching":false},"created":"2014-12-17T02:11:56.776+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["acl","capacity-scheduler","yarn"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326262","id":"12326262","description":"2.5.0 release","name":"2.5.0","archived":false,"released":true,"releaseDate":"2014-08-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-09-25T13:48:20.550+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319324","id":"12319324","name":"capacityscheduler"}],"timeoriginalestimate":null,"description":"I follow this page to configure yarn: http://archive.cloudera.com/cdh5/cdh/5/hadoop/hadoop-yarn/hadoop-yarn-site/CapacityScheduler.html. \nI configured YARN to use capacity scheduler in yarn-site.xml with yarn.resourcemanager.scheduler.class for org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler. Then modified capacity-scheduler.xml,\n___________________________________________________\n<?xml version=\"1.0\"?>\n<configuration>\n  <property>\n    <name>yarn.scheduler.capacity.root.queues</name>\n    <value>default,extract,report,tool</value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.state</name>\n    <value>RUNNING</value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.default.acl_submit_applications</name>\n    <value>jcsong2, y2 </value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.default.acl_administer_queue</name>\n    <value>jcsong2, y2 </value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.default.capacity</name>\n    <value>35</value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.extract.acl_submit_applications</name>\n    <value>jcsong2 </value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.extract.acl_administer_queue</name>\n    <value>jcsong2 </value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.extract.capacity</name>\n    <value>15</value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.report.acl_submit_applications</name>\n    <value>y2 </value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.report.acl_administer_queue</name>\n    <value>y2 </value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.report.capacity</name>\n    <value>35</value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.tool.acl_submit_applications</name>\n    <value> </value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.tool.acl_administer_queue</name>\n    <value> </value>\n  </property>\n  <property>\n    <name>yarn.scheduler.capacity.root.tool.capacity</name>\n    <value>15</value>\n  </property>\n</configuration>\n_______________________________________________\nI have enabled the acl in yarn-site.xml, but the user jcsong2 can submit applications to every queue. The queue acl does't work! And the queue used capacity more than it was configured! ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Capacity scheduler configuration ACLs not work.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rootsongjc","name":"rootsongjc","key":"rootsongjc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Jimmy Song","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rootsongjc","name":"rootsongjc","key":"rootsongjc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Jimmy Song","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"ubuntu 12.04, cloudera manager, cdh5.3.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12762178/comment/14249430","id":"14249430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"body":"Queue configurations works in intersection. If leaf queue does not have access check with parent. Since parent(root) has all access, you are able to submit job. .\n\nI feel it is problem because in reality, we can not restrict individual users across the child queue anytime unless parent has single user access.\nI am keeping open for more discussion with experts. I am open to be get convinced.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"created":"2014-12-17T03:52:46.571+0000","updated":"2014-12-17T03:52:46.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12762178/comment/14249543","id":"14249543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"body":"As per the description in the YARN documentation \n{quote}\n\"yarn.scheduler.capacity.root.<queue-path>.acl_submit_applications\" \n The ACL which controls who can submit applications to the given queue. If the given user/group has necessary ACLs on the given queue or one of the parent queues in the hierarchy they can submit applications. ACLs for this property are inherited from the parent queue if not specified.\n{quote}\nSo basically ACL is union of all ACL's in the queue hierarchy\nand there is a note : \n{quote}\nNote: An ACL is of the form user1, user2spacegroup1, group2. The special value of * implies anyone. The special value of space implies no one. The default is * for the root queue if not specified.\n{quote}\nSo jcsong2 can access all as by default root queue is * .\nBut i feel the default root queue permission should not be * and better to be taken as no rights (i.e. space) when acl's are enabled.\nMay be others can give opinion on this ...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-12-17T06:21:54.685+0000","updated":"2014-12-17T06:21:54.685+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12762178/comment/14249642","id":"14249642","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rootsongjc","name":"rootsongjc","key":"rootsongjc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Jimmy Song","active":true,"timeZone":"Asia/Shanghai"},"body":"The child queue inherits the ACL of  root queue In the capacity scheduler configuration. The child queues' ACL is the UNION of the root queue. So the configurations of child queue will not work if the root queue not configured, in other word, leave the root queue in default configuration which allow any user to submit applications.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rootsongjc","name":"rootsongjc","key":"rootsongjc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Jimmy Song","active":true,"timeZone":"Asia/Shanghai"},"created":"2014-12-17T09:16:04.084+0000","updated":"2014-12-17T09:16:04.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12762178/comment/14251171","id":"14251171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi [~rootsongjc] or [~rohithsharma]\nCan you set the title and description as per the latest discussions ... \"Capacity scheduler configuration ACLs for children queue/sub queues will not work if the root queue's default acl configurations are not modified\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Naganarasimha","name":"Naganarasimha","key":"naganarasimha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Naganarasimha G R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-12-18T04:45:24.670+0000","updated":"2014-12-18T04:45:24.670+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12762178/comment/14287301","id":"14287301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"body":"Going through queueACLs more deeper I believe as per design , it is expected to disable ACLs for root queue. ACLs disables can be done configuring \" \"(space) for the queue configuration.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"created":"2015-01-22T11:31:35.224+0000","updated":"2015-01-22T11:31:35.224+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12762178/comment/14493777","id":"14493777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"body":"Closing as Invalid. Feel free to discuss and reopen again.\nFor configuring queue level Acl's and woking properly, parent Acl's is supposed to be disabled using space \" \" explicitely.By default all users are allowed to submit jobs if parent does not disable the Acl's. For more information on CS , kindly refer [CapacityScheduler|http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/CapacityScheduler.html]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"created":"2015-04-14T08:21:53.816+0000","updated":"2015-04-14T08:21:53.816+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12762178/comment/14908046","id":"14908046","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apachehadoop","name":"apachehadoop","key":"apachehadoop","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"apachehadoop","active":true,"timeZone":"Asia/Shanghai"},"body":"I also met the same problem, can you tell me how do you solve this problem?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apachehadoop","name":"apachehadoop","key":"apachehadoop","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"apachehadoop","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-09-25T13:42:04.823+0000","updated":"2015-09-25T13:42:04.823+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-2973/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i23iaf:"}}