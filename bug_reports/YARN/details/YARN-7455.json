{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13116744","self":"https://issues.apache.org/jira/rest/api/2/issue/13116744","key":"YARN-7455","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341436","id":"12341436","description":"3.1.0 release","name":"3.1.0","archived":false,"released":true,"releaseDate":"2018-04-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12341684","id":"12341684","description":"2.10.0 release","name":"2.10.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12341762","id":"12341762","description":"2.9.1 release","name":"2.9.1","archived":false,"released":true,"releaseDate":"2018-05-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342130","id":"12342130","name":"3.0.1","archived":false,"released":true}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-11-07T17:06:08.947+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Dec 01 22:19:38 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1924477070_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_166885638","customfield_12312321":null,"resolutiondate":"2017-12-01T21:56:47.535+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-7455/watchers","watchCount":7,"isWatching":false},"created":"2017-11-07T17:00:44.904+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334216","id":"12334216","description":"2.9.0 release","name":"2.9.0","archived":false,"released":true,"releaseDate":"2017-11-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12341435","id":"12341435","description":"3.0.0 GA release","name":"3.0.0","archived":false,"released":true,"releaseDate":"2017-12-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-12-01T22:19:38.231+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319323","id":"12319323","name":"nodemanager"}],"timeoriginalestimate":null,"description":"While reviewing YARN-7197 I noticed that add_mounts in docker_util.c has a potential buffer overflow since tmp_buffer is only 1024 bytes which may not be sufficient to hold the specified mount path.\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341762","id":"12341762","description":"2.9.1 release","name":"2.9.1","archived":false,"released":true,"releaseDate":"2018-05-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342130","id":"12342130","name":"3.0.1","archived":false,"released":true}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12899899","id":"12899899","filename":"YARN-7455.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-11-29T23:04:57.081+0000","size":9336,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12899899/YARN-7455.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12900057","id":"12900057","filename":"YARN-7455.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-11-30T17:32:45.600+0000","size":9948,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12900057/YARN-7455.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12900243","id":"12900243","filename":"YARN-7455.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-12-01T15:45:56.174+0000","size":9754,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12900243/YARN-7455.003.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"quote_and_append_arg can overflow buffer","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16242410","id":"16242410","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eyang","name":"eyang","key":"eyang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"Default CentOS 7:\r\n\r\n{code}\r\n[root@host-1 ~]# xargs --show-limits\r\nYour environment variables take up 2396 bytes\r\nPOSIX upper limit on argument length (this system): 2092708\r\nPOSIX smallest allowable upper limit on argument length (all systems): 4096\r\nMaximum length of command we could actually use: 2090312\r\nSize of command buffer we are actually using: 131072\r\n{code}\r\n\r\nWe probably want to increase the size to 2MB to match the system limit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eyang","name":"eyang","key":"eyang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-07T17:06:08.947+0000","updated":"2017-11-07T17:06:08.947+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16244579","id":"16244579","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eyang","name":"eyang","key":"eyang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"There is a max size check in add_mounts to prevent buffer overflow.  The current size can contain source and target path of 510 characters deep.  Do we want to double it?  Given that we don't add black list into the tmp_buffer, do we still need this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eyang","name":"eyang","key":"eyang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-08T19:17:59.319+0000","updated":"2017-11-08T19:17:59.319+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16246037","id":"16246037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"The code always uses quote_and_append_arg which takes the dest buffer size as a limit and checks against it, so we'd be fine as long as quote_and_append_arg does its job.  However quote_and_append_arg doesn't check the sizes properly:\r\n{code}\r\nvoid quote_and_append_arg(char **str, size_t *size, const char* param, const char *arg) {\r\n  char *tmp = escape_single_quote(arg);\r\n  int alloc_block = 1024;\r\n  strcat(*str, param);\r\n  strcat(*str, \"'\");\r\n  if (strlen(*str) + strlen(tmp) > *size) {\r\n    *size = (strlen(*str) + strlen(tmp) + alloc_block) * sizeof(char);\r\n    *str = (char *) realloc(*str, *size);\r\n    if (*str == NULL) {\r\n      exit(OUT_OF_MEMORY);\r\n    }\r\n  }\r\n  strcat(*str, tmp);\r\n  strcat(*str, \"' \");\r\n{code}\r\n\r\nThere are a number of problem here:\r\n# The param argument is blindly appended to the destination buffer without checking if there's room in the buffer.\r\n# There's no buffer size accounting for the prefix and postfix quoting characters placed around the {{arg}} input string.\r\n# The {{strlen(*str) + strlen(tmp) > size}} has an off-by-one error since it doesn't account for the terminating NUL character.\r\n\r\nIn addition to fixing these problems, quote_and_append_arg should return the size of the destination buffer so callers can properly propagate the new buffer size when quote_and_append_arg resizes the buffer.\r\n\r\nBonus points for eliminating the many redundant, implicit strlen calls that are occurring in this function via all the strcat calls.  We should only have to compute the length of the input strings once, and the length of any computed string can be trivially derived once we know the length of the inputs.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2017-11-09T17:00:42.773+0000","updated":"2017-11-09T17:00:42.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16271741","id":"16271741","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"body":"I am attaching a patch that addresses the buffer overflow issues described in this Jira.  I've also updated the test cases for quote_and_append_arg to add cases that demonstrate the failure with the original code and pass with the new code.\r\nPlease review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-11-29T23:07:54.388+0000","updated":"2017-11-29T23:07:54.388+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16271785","id":"16271785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ebadger","name":"ebadger","key":"ebadger","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Badger","active":true,"timeZone":"America/Chicago"},"body":"Submitting the patch so that hadoopqa can run tests","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ebadger","name":"ebadger","key":"ebadger","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Badger","active":true,"timeZone":"America/Chicago"},"created":"2017-11-29T23:35:21.961+0000","updated":"2017-11-29T23:35:21.961+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16271904","id":"16271904","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 28s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 14m 59s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 49s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 30s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 24m 52s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 41s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} cc {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 26s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  9m 48s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 19m 24s{color} | {color:red} hadoop-yarn-server-nodemanager in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 17s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 57m  0s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.yarn.server.nodemanager.webapp.TestNMWebServices |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | YARN-7455 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12899899/YARN-7455.001.patch |\r\n| Optional Tests |  asflicense  compile  cc  mvnsite  javac  unit  |\r\n| uname | Linux 41a1baff9c1b 4.4.0-64-generic #85-Ubuntu SMP Mon Feb 20 11:50:30 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 333ef30 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_151 |\r\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/18726/artifact/out/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-nodemanager.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/18726/testReport/ |\r\n| Max. process+thread count | 440 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager |\r\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/18726/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-30T00:39:58.679+0000","updated":"2017-11-30T00:39:58.679+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16272902","id":"16272902","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"body":"The unit test failures do not appear to be related to my patch - OutofMemory failures on a node.  I have run the tests locally with no failures.\r\nWhile re-reviewing my changes, I did find a future proofing issue in my new test case, so I will be submitting a new patch shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-11-30T16:30:01.855+0000","updated":"2017-11-30T16:30:01.855+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16273009","id":"16273009","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"body":"Attaching a second patch with minor changes to my test (no functional change).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-11-30T17:33:52.533+0000","updated":"2017-11-30T17:33:52.533+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16273133","id":"16273133","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 19s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 14m 33s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 45s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 30s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 24m 39s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 30s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 41s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} cc {color} | {color:green}  0m 41s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 41s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 27s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green}  9m 26s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 17m 26s{color} | {color:red} hadoop-yarn-server-nodemanager in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 20s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 54m 13s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.yarn.server.nodemanager.webapp.TestNMWebServices |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | YARN-7455 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12900057/YARN-7455.002.patch |\r\n| Optional Tests |  asflicense  compile  cc  mvnsite  javac  unit  |\r\n| uname | Linux 1cb63f938fea 4.4.0-64-generic #85-Ubuntu SMP Mon Feb 20 11:50:30 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 75a3ab8 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_151 |\r\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/18739/artifact/out/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-nodemanager.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/18739/testReport/ |\r\n| Max. process+thread count | 410 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager |\r\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/18739/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-30T18:35:05.478+0000","updated":"2017-11-30T18:35:05.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16273206","id":"16273206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"body":"Another hadoop.yarn.server.nodemanager.webapp.TestNMWebServices that does not appear to be related to my patch.\r\nI've run these tests locally without failures.\r\n\r\nPlease review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-11-30T19:17:21.072+0000","updated":"2017-11-30T19:17:21.072+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16273582","id":"16273582","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Thanks for the patch!\r\n\r\nI'm wondering if it would be easier to maintain if we leveraged snprintf() to do the size calculations.  snprintf has a very useful return value that shows how many characters (without the terminating NUL) are needed for the output, so we can use it to query how much we need.  For example:\r\n{code}\r\n  const char* format = \"%s'%s' \";\r\n  size_t append_size = snprintf(NULL, 0, format, param, tmp);\r\n  append_size += 1; // for the terminating NUL\r\n  size_t len_str = strlen(*str);\r\n  size_t new_size = len_str + append_size;\r\n  [...]\r\n  char *cur_ptr = *str + len_str;\r\n  sprintf(cur_ptr, format, param, tmp);\r\n{code}\r\n\r\nThe advantage is that we don't have to manually manage the separate strlen calculations for param, arg, extra_chars, etc.  Not a must-fix, just a suggestion.\r\n\r\nNit: {{+ NULL}} should be {{+ NUL}} (NUL character vs. NULL pointer)\r\n\r\nNit: The code can just adjust new_size by the growth amount and use that to both call realloc and assign to {{*size}} so we don't have to remember to compute it twice.  As a bonus we then no longer have to track QUOTE_AND_APPEND_ARG_GROWTH in a separate variable.\r\n\r\nWhy is the following necessary?  sprintf will always terminate the string.\r\n{code}\r\n  (*str)[new_size - 1] = '\\0';\r\n{code}\r\n \r\nGreat work on the unit tests!\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2017-11-30T22:22:56.623+0000","updated":"2017-11-30T22:22:56.623+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16273622","id":"16273622","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"body":"Thanks for the suggestions.  Using snprintf to calculate the size is great idea - definitely more maintainable.  I will rework and submit a new patch.\r\nManually writing the NUL is just paranoia - I agree it is not necessary in this case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-11-30T23:01:37.348+0000","updated":"2017-11-30T23:01:37.348+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16274543","id":"16274543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"body":"Uploaded a new patch with changes as suggested by JLowe.\r\nReran tests locally.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-12-01T15:46:48.341+0000","updated":"2017-12-01T15:46:48.341+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16274639","id":"16274639","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 14m 43s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 16m 36s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 52s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 34s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 28m  8s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 33s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 52s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} cc {color} | {color:green}  0m 52s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 52s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  0m 34s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 21s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 17m 38s{color} | {color:red} hadoop-yarn-server-nodemanager in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 20s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 74m 33s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.yarn.server.nodemanager.webapp.TestNMWebServices |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:5b98639 |\r\n| JIRA Issue | YARN-7455 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12900243/YARN-7455.003.patch |\r\n| Optional Tests |  asflicense  compile  cc  mvnsite  javac  unit  |\r\n| uname | Linux 05416d09fd7f 3.13.0-129-generic #178-Ubuntu SMP Fri Aug 11 12:48:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 556aea3 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_151 |\r\n| unit | https://builds.apache.org/job/PreCommit-YARN-Build/18749/artifact/out/patch-unit-hadoop-yarn-project_hadoop-yarn_hadoop-yarn-server_hadoop-yarn-server-nodemanager.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/18749/testReport/ |\r\n| Max. process+thread count | 301 (vs. ulimit of 5000) |\r\n| modules | C: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager U: hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager |\r\n| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/18749/console |\r\n| Powered by | Apache Yetus 0.7.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-01T17:05:15.912+0000","updated":"2017-12-01T17:05:15.912+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16274788","id":"16274788","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"body":"The same hadoop.yarn.server.nodemanager.webapp.TestNMWebServices that does not appear to be related to my patch.\r\nI've run these tests locally without failures.\r\nPlease review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jim_Brennan","name":"Jim_Brennan","key":"jim_brennan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10440","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10440","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10440","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10440"},"displayName":"Jim Brennan","active":true,"timeZone":"America/Chicago"},"created":"2017-12-01T19:06:32.112+0000","updated":"2017-12-01T19:06:32.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16275037","id":"16275037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Thanks for updating the patch!  The test failure is unrelated and tracked by YARN-7594.\r\n\r\n+1 for the latest patch.  Committing this.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2017-12-01T21:46:12.904+0000","updated":"2017-12-01T21:46:12.904+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16275044","id":"16275044","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"body":"Thanks, [~Jim_Brennan]!  I committed this to trunk, branch-3.0, branch-2, and branch-2.9.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlowe","name":"jlowe","key":"jlowe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Lowe","active":true,"timeZone":"America/Chicago"},"created":"2017-12-01T21:56:47.585+0000","updated":"2017-12-01T21:56:47.585+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13116744/comment/16275084","id":"16275084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #13311 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/13311/])\nYARN-7455. quote_and_append_arg can overflow buffer. Contributed by Jim (jlowe: rev 60f95fb719f00a718b484c36a823ec5aa8b099f4)\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/util.h\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/impl/util.c\n* (edit) hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/native/container-executor/test/test_util.cc\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-01T22:19:38.231+0000","updated":"2017-12-01T22:19:38.231+0000"}],"maxResults":18,"total":18,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-7455/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3mi4n:"}}