{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12948025","self":"https://issues.apache.org/jira/rest/api/2/issue/12948025","key":"YARN-4772","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12313722","id":"12313722","key":"YARN","name":"Hadoop YARN","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 10 17:06:55 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-4772/watchers","watchCount":4,"isWatching":false},"created":"2016-03-08T14:36:10.354+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329059","id":"12329059","description":"2.8.0 release","name":"2.8.0","archived":false,"released":true,"releaseDate":"2017-03-22"}],"issuelinks":[{"id":"12459960","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12459960","type":{"id":"12310060","name":"Container","inward":"Is contained by","outward":"contains","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310060"},"inwardIssue":{"id":"12939508","key":"YARN-4696","self":"https://issues.apache.org/jira/rest/api/2/issue/12939508","fields":{"summary":"Improving EntityGroupFSTimelineStore on exception handling, test setup, and concurrency","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12459673","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12459673","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12903047","key":"YARN-4233","self":"https://issues.apache.org/jira/rest/api/2/issue/12903047","fields":{"summary":"YARN Timeline Service plugin: ATS v1.5","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-03-10T17:08:24.686+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12322904","id":"12322904","name":"timelineserver","description":"YARN Timeline Server"}],"timeoriginalestimate":null,"description":"while running scale tests with a few hundred thousand events attached to a single timeline entity, the JVM crashed\n{code}\npthread lock: Invalid argument\n/bin/sh: line 1:  8196 Abort trap: 6           \n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Overloaded leveljb can crash the ATS \"pthread lock: Invalid argument\"","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"OSX, scala history scale tests; Java 1.7.0_75-b13","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12948025/comment/15184976","id":"15184976","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"Linking to the ATS1-5 work, as this was in the new code","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2016-03-08T14:36:50.763+0000","updated":"2016-03-08T14:36:50.763+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12948025/comment/15184981","id":"15184981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"tail of the logs.\n\nLooking at the slf4j message, it may be that this has been happening in test teardown, so really it's that leveldb had been stopped while another thread was using it: a race condition on teardown.\n{code}\n2016-03-08 13:11:44,597 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:44,605 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:46,588 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:46,597 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:48,126 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:48,136 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:49,663 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:49,672 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:51,588 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:51,596 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:53,164 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:53,174 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:54,658 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:54,667 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:56,526 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:56,534 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:58,239 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:58,266 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:11:59,792 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:11:59,801 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:01,612 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:01,621 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:03,294 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:03,308 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:05,289 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:05,305 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:07,090 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:07,100 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:07,483 [ScalaTest-main-running-ScaleSuite] WARN  org.mortbay.log (Slf4jLog.java:warn(76)) - 4 threads could not be stopped\n2016-03-08 13:12:07,568 [ScalaTest-main-running-ScaleSuite] INFO  org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (EntityGroupFSTimelineStore.java:serviceStop(286)) - Stopping EntityGroupFSTimelineStore\n2016-03-08 13:12:07,573 [ScalaTest-main-running-ScaleSuite] INFO  org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (EntityGroupFSTimelineStore.java:serviceStop(290)) - Waiting for executor to terminate\n2016-03-08 13:12:08,661 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:08,672 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:10,248 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:10,257 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:12,027 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:12,035 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:13,575 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:13,588 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:15,578 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:15,589 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\n2016-03-08 13:12:17,576 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.security.TimelineACLsManager (TimelineACLsManager.java:checkAccess(106)) - Verifying the access of stevel on the timeline entity { id: appattempt_1111_0000_000000, type: spark_event_v01 }\n2016-03-08 13:12:17,576 [ScalaTest-main-running-ScaleSuite] WARN  org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (EntityGroupFSTimelineStore.java:serviceStop(295)) - Executor did not terminate\n2016-03-08 13:12:17,586 [EntityLogPluginWorker #0] DEBUG org.apache.hadoop.yarn.server.timeline.EntityGroupFSTimelineStore (LogInfo.java:doParse(198)) - Adding appattempt_1111_0000_000000(spark_event_v01) to store\npthread lock: Invalid argument\n/bin/sh: line 1:  8196 Abort trap: 6           java -Djava.awt.headless=true -Djava.io.tmpdir=/Users/stevel/Projects/Hortonworks/Projects/sparkwork/spark-timeline-integration/target/tmp -Dscale.test.jobs=100000 -Dspark.testing=1 -Dspark.ui.enabled=false -Dspark.ui.showConsoleProgress=false -Dspark.unsafe.exceptionOnMemoryLeak=true -Dbasedir=/Users/stevel/Projects/Hortonworks/Projects/sparkwork/spark-timeline-integration -ea -Xmx3g -Xss4096k -XX:MaxPermSize=512m -XX:ReservedCodeCacheSize=512m org.scalatest.tools.Runner -R '/Users/stevel/Projects/Hortonworks/Projects/sparkwork/spark-timeline-integration/target/classes /Users/stevel/Projects/Hortonworks/Projects/sparkwork/spark-timeline-integration/target/test-classes' -w org.apache.spark.deploy.history.yarn.integration.ScaleSuite -o -f /Users/stevel/Projects/Hortonworks/Projects/sparkwork/spark-timeline-integration/target/surefire-reports/SparkTestSuite.txt -u /Users/stevel/Projects/Hortonworks/Projects/sparkwork/spark-timeline-integration/target/surefire-reports/.\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2016-03-08T14:40:05.193+0000","updated":"2016-03-08T14:40:05.193+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12948025/comment/15185138","id":"15185138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"Assuming this is teardown, the root cause is that the executors only check for service stop after completing each scan of the FS, which is presumably {{O(active-apps) * O(fresh-data)}}, with the fresh data time being driven by cpu and memory requirements of parsing JSON.\n\nTeardown can be addressed by\n\n# having the iterator across files probe for the service being stopped on every iteration.\n# maybe: having the JSON parser check the status in {{LogInfo.doParse()}} between parsing each element. That could be hidden by having the inner input stream do the check and raise an EOF on the closure","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2016-03-08T16:02:32.957+0000","updated":"2016-03-08T16:02:32.957+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12948025/comment/15189551","id":"15189551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"With the latest patch in YARN-4772, I'm not seeing this any more. I'm going to mark this as incorporated","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2016-03-10T17:06:39.090+0000","updated":"2016-03-10T17:06:39.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12948025/comment/15189553","id":"15189553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"YARN-4696","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2016-03-10T17:06:55.330+0000","updated":"2016-03-10T17:06:55.330+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/YARN-4772/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2uc4v:"}}