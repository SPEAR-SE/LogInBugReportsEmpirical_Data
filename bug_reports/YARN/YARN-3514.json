{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [{
            "id": "12319323",
            "name": "nodemanager",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12319323"
        }],
        "created": "2015-04-20T20:43:23.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "john lilley",
            "key": "john.lilley@redpoint.net",
            "name": "john.lilley@redpoint.net",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=john.lilley%40redpoint.net",
            "timeZone": "America/Denver"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2015-04-20T21:20:59.221+0000",
        "customfield_12310222": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "2.0",
        "customfield_12310320": [{
            "archived": false,
            "id": "12342758",
            "name": "3.2.0",
            "released": false,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12342758"
        }],
        "customfield_12310420": "9223372036854775807",
        "customfield_12310920": "9223372036854775807",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i2dhzj:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Oct 11 23:48:20 UTC 2017",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "We have a 2.2.0 (Cloudera 5.3) cluster running on CentOS6 that is Kerberos-enabled and uses an external AD domain controller for the KDC.  We are able to authenticate, browse HDFS, etc.  However, YARN fails during localization because it seems to get confused by the presence of a \\ character in the local user name.\n\nOur AD authentication on the nodes goes through sssd and set configured to map AD users onto the form domain\\username.  For example, our test user has a Kerberos principal of hadoopuser@DOMAIN.COM and that maps onto a CentOS user \"domain\\hadoopuser\".  We have no problem validating that user with PAM, logging in as that user, su-ing to that user, etc.\n\nHowever, when we attempt to run a YARN application master, the localization step fails when setting up the local cache directory for the AM.  The error that comes out of the RM logs:\n2015-04-17 12:47:09 INFO net.redpoint.yarnapp.Client[0]: monitorApplication: ApplicationReport: appId=1, state=FAILED, progress=0.0, finalStatus=FAILED, diagnostics='Application application_1429295486450_0001 failed 1 times due to AM Container for appattempt_1429295486450_0001_000001 exited with  exitCode: -1000 due to: Application application_1429295486450_0001 initialization failed (exitCode=255) with output: main : command provided 0\nmain : user is DOMAIN\\hadoopuser\nmain : requested yarn user is domain\\hadoopuser\norg.apache.hadoop.util.DiskChecker$DiskErrorException: Cannot create directory: /data/yarn/nm/usercache/domain%5Chadoopuser/appcache/application_1429295486450_0001/filecache/10\n                at org.apache.hadoop.util.DiskChecker.checkDir(DiskChecker.java:105)\n                at org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer.download(ContainerLocalizer.java:199)\n                at org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer.localizeFiles(ContainerLocalizer.java:241)\n                at org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer.runLocalization(ContainerLocalizer.java:169)\n                at org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer.main(ContainerLocalizer.java:347)\n.Failing this attempt.. Failing the application.'\n\nHowever, when we look on the node launching the AM, we see this:\n[root@rpb-cdh-kerb-2 ~]# cd /data/yarn/nm/usercache\n[root@rpb-cdh-kerb-2 usercache]# ls -l\ndrwxr-s--- 4 DOMAIN\\hadoopuser yarn 4096 Apr 17 12:10 domain\\hadoopuser\n\nThere appears to be different treatment of the \\ character in different places.  Something creates the directory as \"domain\\hadoopuser\" but something else later attempts to use it as \"domain%5Chadoopuser\".  I\u2019m not sure where or why the URL escapement converts the \\ to %5C or why this is not consistent.\n\nI should also mention, for the sake of completeness, our auth_to_local rule is set up to map user@DOMAIN.COM to domain\\user:\nRULE:[1:$1@$0](^.*@DOMAIN\\.COM$)s/^(.*)@DOMAIN\\.COM$/domain\\\\$1/g\n",
        "duedate": null,
        "environment": "CentOS6",
        "fixVersions": [],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": ["oct16-easy"],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg",
            "id": "4",
            "name": "Minor",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/4"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12313722&avatarId=15135",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12313722&avatarId=15135",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12313722&avatarId=15135",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12313722&avatarId=15135"
            },
            "id": "12313722",
            "key": "YARN",
            "name": "Hadoop YARN",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12313722"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "john lilley",
            "key": "john.lilley@redpoint.net",
            "name": "john.lilley@redpoint.net",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=john.lilley%40redpoint.net",
            "timeZone": "America/Denver"
        },
        "resolution": null,
        "resolutiondate": null,
        "status": {
            "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
            "id": "10002",
            "name": "Patch Available",
            "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
            "statusCategory": {
                "colorName": "yellow",
                "id": 4,
                "key": "indeterminate",
                "name": "In Progress",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4"
            }
        },
        "subtasks": [],
        "summary": "Active directory usernames like domain\\login cause YARN failures",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2018-03-20T18:18:45.000+0000",
        "versions": [{
            "archived": false,
            "description": "2.2.0 release",
            "id": "12325051",
            "name": "2.2.0",
            "releaseDate": "2013-10-15",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12325051"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/YARN-3514/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/YARN-3514/watchers",
            "watchCount": 13
        },
        "workratio": -1
    },
    "id": "12822444",
    "key": "YARN-3514",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12822444"
}