[This patch allow other threads to run during synchronous c api calls which fixes this deadlock. ]