[Came across this when searching for solutions to my own deadlock issues using the same stack you describe (Net::ZooKeeper and Net::ZooKeeper::Lock v0.03)

My issue was caused by the race condition addressed in this open pull request on Net::ZooKeeper::Lock - https://github.com/tadam/Net-ZooKeeper-Lock/pull/2/files

Seems like this could also be your issue.

The pull request fixed the issue I had been encountering.  Hope this helps!]