[The problem above appears in the barrier java example (http://zookeeper.apache.org/doc/r3.1.2/zookeeperTutorial.html#sc_barriers).
The pseudocode (http://zookeeper.apache.org/doc/r3.1.2/recipes.html#sc_recipes_eventHandles) 
creates a special "ready" node to deal with the issue, but this doesn't appear in the java example for some reason.
]