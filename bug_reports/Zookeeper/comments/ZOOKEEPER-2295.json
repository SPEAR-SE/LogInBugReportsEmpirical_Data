[The Error message was: nextRefresh: Sat Oct 17 11:13:18 IST 2015 is in the past: exiting refresh thread. Check clock sync between this host and KDC - (KDC's clock is likely ahead of this host). Manual intervention will be required for this client to successfully authenticate. Exiting refresh thread., Submitting the fix, -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767197/ZOOKEEPER-2295-01.patch
  against trunk revision 1706631.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2921//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2921//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2921//console

This message is automatically generated., Thanks for the patch! I think the code becomes a bit easier to read if you move the LOG.info statement from line 158 to have:

{code}
  if (now == nextRefresh) {
    LOG.info("Refreshing now because expiry is before next scheduled refresh time");
  } else if (now < nextRefresh) {
     Date until = new Date(nextRefresh);
     LOG.info("TGT refresh sleeping until: {}", until.toString());
     try {
       Thread.sleep(nextRefresh - now);
      } catch (InterruptedException ie) {
         LOG.warn("TGT renewal thread has been interrupted and will exit.");
         break;
      }
  } else {
      LOG.error("nextRefresh:{} is in the past: exiting refresh thread. Check"
           + " clock sync between this host and KDC - (KDC's clock is likely ahead of this host)."
           + " Manual intervention will be required for this client to successfully authenticate."
           + " Exiting refresh thread.", nextRefreshDate);
      break;
  }
{code}

I think it makes the intent a bit more clear. Also note the use of break instead of return in the else block, for consistency.

What do you think [~arshad.mohammad]?, Absolutely correct :-) Thanks [~rgs]. Submitting new patch, -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12776363/ZOOKEEPER-2295-03.patch
  against trunk revision 1718511.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    -1 release audit.  The applied patch generated 1 release audit warnings (more than the trunk's current 0 warnings).

    -1 core tests.  The patch failed core unit tests.

    -1 contrib tests.  The patch failed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2985//testReport/
Release audit warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2985//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2985//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2985//console

This message is automatically generated., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12776363/ZOOKEEPER-2295-03.patch
  against trunk revision 1718511.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2986//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2986//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2986//console

This message is automatically generated., Hmm, Jenkins looks broken again. I filed INFRA-10919.

cc: [~suda], [~cnauroth], Applied:

https://github.com/apache/zookeeper/commit/9d48f709df70439f51a04cbc806e4b0c52cd6b90
https://github.com/apache/zookeeper/commit/b0a0e488c0bdd7a0cc7e47b1b2fef2b6ea1470bd
https://github.com/apache/zookeeper/commit/07e40d1df1e3af452a15a7ba3450cb230221383e

Thanks [~arshad.mohammad]!, FAILURE: Integrated in ZooKeeper-trunk #2825 (See [https://builds.apache.org/job/ZooKeeper-trunk/2825/])
ZOOKEEPER-2295: TGT refresh time logic is wrong
(Arshad Mohammad via rgs) (rgs: [http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1718758])
* trunk/CHANGES.txt
* trunk/src/java/main/org/apache/zookeeper/Login.java
]