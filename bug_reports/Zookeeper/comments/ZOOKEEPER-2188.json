[shuting down the cluster is just one case, another case is like in safe authentication failed, the clientCnxn just keeps trying to connect but no feed back., [~haitao-tony], IIUC {{zkclient#isAlive}} is used to see the client is dead or not. In your case, the cluster is down. Now, when a client tries to connect to the server it fails to get a socket connection and it will continue retrying infinitely to establish a connection. This means the client is alive to establish a connection once the ZK quorum is available. There is a way to get out of this infinite loop, but it should be implemented through an application thread, here this thread would do a connection time out logic using {{zk.getState().isConnected();}} status or a connection watcher event of {{Event#SyncConnected}}/{{Event#SaslAuthenticated}}. Does this satisfy your case?, [~haitao-tony], Can you please clarify why you think the behavior above is a bug?
Would not you expect that the client will retry to connect to ZooKeeper servers while the cluster is down?
Do I miss something here?, no, i get yourpoint, yes,that's right, yes,that's right]