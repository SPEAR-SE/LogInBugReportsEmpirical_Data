[Is this PB planed to be solved in 3.4.X???, This issue can be fixed by porting ZOOKEEPER-1366 to branch-3.5. If you are interested to resolve this feel free to send a pull request to branch-3.4 [~jiangjiafu]., OKã€‚, GitHub user JiangJiafu opened a pull request:

    https://github.com/apache/zookeeper/pull/253

    ZOOKEEPER-2774

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/JiangJiafu/zookeeper ZOOKEEPER-2774

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/zookeeper/pull/253.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #253
    
----
commit 3ac65ead39fad4f8d9f26365e1bc73f83889f11e
Author: Jiang Jiafu <jiangjiafu1989@gmail.com>
Date:   2017-05-13T03:41:52Z

    ZOOKEEPER-2774

----
, Github user JiangJiafu commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    Port the code from  ZOOKEEPER-1366 to branch3.4.
, -1 overall.  GitHub Pull Request  Build
      

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 28 new or modified tests.

    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 90 new Findbugs (version 3.0.1) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/684//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/684//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/684//console

This message is automatically generated., Github user afine commented on a diff in the pull request:

    https://github.com/apache/zookeeper/pull/253#discussion_r116588671
  
    --- Diff: src/java/main/org/apache/zookeeper/ZKUtil.java ---
    @@ -120,5 +120,4 @@ public static void deleteRecursive(ZooKeeper zk, final String pathRoot, VoidCall
             }
             return tree;
         }
    -    
    -}
    \ No newline at end of file
    +}
    --- End diff --
    
    unnecessary change
, Github user JiangJiafu commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    Thanks for your review work. @afine 
, -1 overall.  GitHub Pull Request  Build
      

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 28 new or modified tests.

    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 90 new Findbugs (version 3.0.1) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    -1 contrib tests.  The patch failed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/691//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/691//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/691//console

This message is automatically generated., -1 overall.  GitHub Pull Request  Build
      

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 28 new or modified tests.

    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.

    -1 javac.  The patch appears to cause tar ant target to fail.

    -1 findbugs.  The patch appears to introduce 90 new Findbugs (version 3.0.1) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/692//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/692//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/692//console

This message is automatically generated., -1 overall.  GitHub Pull Request  Build
      

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 28 new or modified tests.

    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 90 new Findbugs (version 3.0.1) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/690//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/690//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/690//console

This message is automatically generated., Github user hanm commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    * Missing changes to ClientBase.java and QuorumPeerMainTest.java.
    * File TimeTest.java is not missing.
, Github user JiangJiafu commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    @hanm, do you mean that all the test souce files code should be changed if they use System.currentTimeMillis()?
    Or do you mean that I should just change these two files: ClientBase.java and QuorumPeerMainTest.java?
    

, -1 overall.  GitHub Pull Request  Build
      

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 34 new or modified tests.

    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 90 new Findbugs (version 3.0.1) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/697//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/697//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/697//console

This message is automatically generated., -1 overall.  GitHub Pull Request  Build
      

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 37 new or modified tests.

    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 90 new Findbugs (version 3.0.1) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/698//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/698//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/698//console

This message is automatically generated., Github user JiangJiafu commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    Code has bee changed according to your advice. @hanm 
, Github user hanm commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    Patch lgtm, almost there!
    
    There is one test failure in pre-commit build (see 'All checks have failed' - Details)
    https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/698/testReport/
    org.apache.zookeeper.test.ReadOnlyModeTest.testConnectionEvents
    This test was not failing without this patch, and (consistently) failing with the patch on Apache Jenkins. Please investigate. Generally we'd like have a green pre-commit build before merging a PR.
, -1 overall.  GitHub Pull Request  Build
      

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 37 new or modified tests.

    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 90 new Findbugs (version 3.0.1) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/700//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/700//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/700//console

This message is automatically generated., Github user JiangJiafu commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    It seems like now the unit tests are ok.
    I don't know what is the problems now? @hanm 
, Github user hanm commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    LGTM - all unit test passed. The Jenkins check failed because it has findbug warnings and that is a known issue for branch-3.4. I will merge this to branch-3.4 soon.
    
    One suggestion, in future pull request, please provide a descriptive title and a brief description of what the pull request did.
, Issue resolved by pull request 253
[https://github.com/apache/zookeeper/pull/253], Github user hanm commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    Merged to branch-3.4. Please close this pull request, @JiangJiafu.
, Github user JiangJiafu commented on the issue:

    https://github.com/apache/zookeeper/pull/253
  
    Thanks for your work @hanm @afine .
, Github user JiangJiafu closed the pull request at:

    https://github.com/apache/zookeeper/pull/253
]