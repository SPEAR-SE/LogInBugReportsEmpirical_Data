[An example patch. Was unable to run the unit test I wrote (because my setup is being a jerk), but I'm more looking for input on the design.]