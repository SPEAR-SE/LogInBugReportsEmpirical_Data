[first, it is important to note that our limit of 1M for data is a sanity check. it is unwise to design your application to run on the edge of sanity. generally we talk about data in the kilobyte range 100 bytes - 64k. zookeeper stores meta-data not application data.

do you know how big the resulting data is? what is the size of a snapshot file?

1) perhaps you are hitting the memory error again when you try to rebuild your in-memory data structure. you may try increasing the memory limit using the -Xmx flag.
2) there is a configuration option to specify the number of requests in flight, globalOutstandingLimit, which defaults to 1000, but with 1000 1M requests you need 1G for just the inflight requests, in addition to the memory needed for the tree. if you want to handle such large requests you need to look at the amount of memory we have and possibly tune that parameter. also if you have a large in memory tree and you need to do a state transfer for followers that are behind, you will need some time to push a lot of data over the network, so you probably also need to adjust the syncLimit and initLimit.
3) if you want to reinitialize everything you need to remove the version-2 directory from all servers, otherwise, a server that still has the version-2 directory will get elected and the other servers will sync with it., I propose to close this issue. It has not been touched for two years, no response from the original reporter, old ZK version (3.2)., In addition to what Thomas mentioned, if the server is not configured with sufficient memory to support the use case (db size, in flight message queue sizes, etc...) it won't be able to start.]