[Attached an initial patch .
Please review., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12709186/ZOOKEEPER-2157.1.patch
  against trunk revision 1669825.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    -1 patch.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2602//console

This message is automatically generated., Updated the patch with latest trunk code., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12709188/ZOOKEEPER-2157.2.patch
  against trunk revision 1669825.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2603//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2603//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2603//console

This message is automatically generated., Hi J.Andreina ,

I can't assign to you because it couldn't find your account. Do you have one? Let me know or you can assign it to yourself. 

Thanks for the patch!, Hi [~hdeng],

Thanks for reviewing this jira. 
Can you please add me to the contributor's list , so that ill get assign permission for my future contributions. , You just need to create an account on ZooKeeper JIRA.
It's open to public. Then you can assign it to yourself., AFAIK one has to add her name to the ZK contributor list. Probably [~michim] can help us, could you please add her name to this list. Thanks!, Committed!

trunk
  svn: http://svn.apache.org/viewvc?view=revision&revision=1671891
  git: https://github.com/apache/zookeeper/commit/f5fb50ed2591ba9a24685a227bb5374759516828
branch-3.5: 
  svn: http://svn.apache.org/viewvc?view=revision&revision=1671891
  git: https://github.com/apache/zookeeper/commit/ed2f766dd1856df65f85d69094264343939a52d2, Thanks [~andreina], Thanks [~hdeng] for committing the patch.
Thanks [~michim] and [~rakeshr] for adding me to contributor's list., FAILURE: Integrated in ZooKeeper-trunk #2654 (See [https://builds.apache.org/job/ZooKeeper-trunk/2654/])
ZOOKEEPER-2157 Upgrade option should be removed from zkServer.sh usage
(J.Andreina via hdeng) (hdeng: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1671889)
* /zookeeper/trunk/CHANGES.txt
* /zookeeper/trunk/bin/zkServer.sh
]