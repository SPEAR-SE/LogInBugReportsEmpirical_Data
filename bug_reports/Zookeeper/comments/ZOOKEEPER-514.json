[here's the npe:

java.lang.NullPointerException
	at sun.nio.ch.Util.atBugLevel(Util.java:326)
	at sun.nio.ch.SelectorImpl.<init>(SelectorImpl.java:40)
	at sun.nio.ch.EPollSelectorImpl.<init>(EPollSelectorImpl.java:47)
	at sun.nio.ch.EPollSelectorProvider.openSelector(EPollSelectorProvider.java:18)
	at java.nio.channels.Selector.open(Selector.java:209)
	at org.apache.zookeeper.server.NIOServerCnxn$Factory.<init>(NIOServerCnxn.java:79)
	at org.apache.zookeeper.server.NIOServerCnxn$Factory.<init>(NIOServerCnxn.java:104)
	at org.apache.zookeeper.server.quorum.QuorumPeer.<init>(QuorumPeer.java:357)
	at org.apache.zookeeper.test.CnxManagerTest.testCnxManager(CnxManagerTest.java:158)
, looks like it's this known issue (not fixed until java 7 btw):

http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6427854
, turns out this is a bug in the jvm itself - no workaround and not fixed until java7.

closing as wont fix.
]