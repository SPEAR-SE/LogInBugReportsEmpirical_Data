[Attached patch, checking 'OpCode.Create2' in RORequestProcessor., I think we should consider this issue for 3.4.6 as well, do you agree [~rakeshr]?
 , Yeah [~fpj], In 3.4.6 'multi' is missing. Please have a look at the attached patch. Whether OpCode.check is necessary?, -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12601840/0001-ZOOKEEPER-1754-multitransaction-br-3_4.patch
  against trunk revision 1520436.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 3 new or modified tests.

    -1 patch.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1559//console

This message is automatically generated., +1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12601838/0001-ZOOKEEPER-1754.patch
  against trunk revision 1520436.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 3 new or modified tests.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1558//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1558//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1558//console

This message is automatically generated., This issue seems to be related to what got in with ZOOKEEPER-1297, so it only applies to 3.5.0., [~fpj], In 3.4 branch, I could see 'multi' request allows to do write operations. Could you please look at the 0001-ZOOKEEPER-1754-multitransaction-br-3_4.patch., I think you added to the patch:

{noformat}
+                case OpCode.multi:
{noformat}

multi is only available on trunk (for 3.5.0).
, IIRC, we committed the multiop support in 3.4.0 not 3.5.0. See https://issues.apache.org/jira/browse/ZOOKEEPER-965., You're right, I think I got wires crossed in my head. There is some other jira in which we were discussing 3.3 the other day, so I think I was thinking of 3.3 instead. I'm sorry for the confusion., A couple of comments about the patches:

# I was thinking that the test case should check that the state of the zk handle is CONNECTEDREADONLY before shooting the operation.
# The list of requests to filter should be the same for trunk and 3.4, except for reconfig, so if one has check, I think the other one needs to have it too, and trunk has it. But, I don't really see a reason for filtering check. It will most likely come with another write request in the multi call which falls in the switch case., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12601993/0002-ZOOKEEPER-1754-multitransaction-br-3_4.patch
  against trunk revision 1520436.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 3 new or modified tests.

    -1 patch.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1563//console

This message is automatically generated., Thanks [~fpj] for the review.
Updated patch addressing comments. I've included OpCode.check in 3.4 branch patch, and to be insync with the trunk version., +1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12601996/0002-ZOOKEEPER-1754-trunk-version.patch
  against trunk revision 1520436.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 3 new or modified tests.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1565//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1565//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1565//console

This message is automatically generated., +1, thanks, rakesh. branch 3.4: Committed revision 1524247., Trunk: Committed revision 1524252., SUCCESS: Integrated in ZooKeeper-trunk #2059 (See [https://builds.apache.org/job/ZooKeeper-trunk/2059/])
ZOOKEEPER-1754. Read-only server allows to create znode (Rakesh R via fpj) (fpj: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1524252)
* /zookeeper/trunk/CHANGES.txt
* /zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/ReadOnlyRequestProcessor.java
* /zookeeper/trunk/src/java/test/org/apache/zookeeper/test/ReadOnlyModeTest.java
, Closing issues after releasing 3.4.6.]