[But that's exactly what the do_io does! It check if the zhandle_t state is unrecoverable and terminates if it is., You're right. I was reading the code wrong.]