[[~davencool] Came across this issue while looking at options to set sync warning time. According to the current documentation and the QuorumPeerConfig.parseProperties ""fsync.warningthresholdms" property can be set only as a Java system property. Let me know if you see that the code also allows users to set this property in zoo.cfg. Thanks. , Here is the patch for this bug. It is really just a syntax error fix in the property name., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12791531/ZOOKEEPER-2195.patch
  against trunk revision 1733525.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3085//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3085//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3085//console

This message is automatically generated., The Findbugs concern seems to be valid, but it is completely unrelated to my change. It is in ZooKeeper client code in org.apache.zookeeper.client.ZooKeeperSaslClient.

As for the tests, as I said when submitting the patch this is just a syntax error fix, and it is in the code which is difficult to have tests for (static filed with its value set by a static initializer) without some refactoring. Refactoring this code for the sake of testing the fix for the property name string value is possible for sure, but I felt like that'd be overkill., [~dryabkov] the current code is in line with what is specified in the documentation for [fsync.warningthresholdms|https://zookeeper.apache.org/doc/r3.4.2/zookeeperAdmin.html#sc_advancedConfiguration]. But your change sets the property name to the standard followed for system properties i.e. prefix with {{zookeeper}}. The change looks good to me, but will need a change to the documentation so that they are in sync., Attaching the patch to modify the documentation for this change., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12791621/ZOOKEEPER-2195-DOC.patch
  against trunk revision 1733679.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3089//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3089//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3089//console

This message is automatically generated., [~gsbiju] Looks fine to me, as long as you don't modify the config file property name (which I think you don't). The config file property names get "zookeeper." appended in front of them in http://svn.apache.org/repos/asf/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java, parseProperties() method and then set as system properties. Now with these two patches everything looks in sync to me., Good find. I like this change, but I do have one concern - it's not backward compatible. I realize the current state is broken for people who try to put it into the config, however it currently works as documented for folks that just set the java system property.

My request is: can you update the patch so that it works for either case (seems like it should be simple). Basically in the java code, if the z.f.w is set use that, if not fall back to f.w system property in case that is set.

Does that make sense?, Sure. I'll look into this., [~dryabkov] [~phunt] attached a new patch. Please review., [~gsbiju] that looks right, but can we keep the static final by using a local variable instead of changing from final?, [~phunt] updated patch attached., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12793958/ZOOKEEPER-2195-2.patch
  against trunk revision 1735836.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3113//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3113//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3113//console

This message is automatically generated., Committed to 3.4.9/3.5.2/trunk. Thanks all!, SUCCESS: Integrated in ZooKeeper-trunk #2861 (See [https://builds.apache.org/job/ZooKeeper-trunk/2861/])
ZOOKEEPER-2195 fsync.warningthresholdms in zoo.cfg not working (Biju Nair via phunt) (phunt: [http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1735892])
* trunk/CHANGES.txt
* trunk/docs/index.pdf
* trunk/docs/javaExample.pdf
* trunk/docs/linkmap.pdf
* trunk/docs/recipes.pdf
* trunk/docs/releasenotes.pdf
* trunk/docs/zookeeperAdmin.html
* trunk/docs/zookeeperAdmin.pdf
* trunk/docs/zookeeperHierarchicalQuorums.pdf
* trunk/docs/zookeeperInternals.pdf
* trunk/docs/zookeeperJMX.pdf
* trunk/docs/zookeeperObservers.pdf
* trunk/docs/zookeeperOver.pdf
* trunk/docs/zookeeperProgrammers.pdf
* trunk/docs/zookeeperQuotas.pdf
* trunk/docs/zookeeperReconfig.pdf
* trunk/docs/zookeeperStarted.pdf
* trunk/docs/zookeeperTutorial.pdf
* trunk/src/docs/src/documentation/content/xdocs/zookeeperAdmin.xml
* trunk/src/java/main/org/apache/zookeeper/server/persistence/FileTxnLog.java
]