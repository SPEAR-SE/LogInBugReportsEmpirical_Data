[In v3.4.6 the corresponding code which can create the zero-length file is in FileTxnLog.java, lines 205 - 211. If line 205 is executed but the process crashes or exits with an exception before executing line 211 a txn log file without a header is created., One of the possible fixes would be to model FileTxnLog after FileSnap which skips over the "broken" files in its deserialize() method., Hello [~dryabkov].  Thank you for filing the bug report.  This issue is currently tracked in ZOOKEEPER-2332, so I'm resolving this one as a duplicate.  Please feel free to add yourself as a watcher on ZOOKEEPER-2332 if you're interested in tracking progress towards a fix.]