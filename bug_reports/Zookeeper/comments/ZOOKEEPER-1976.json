[Here's an example of the issues:

{noformat}
Dm  Found reliance on default encoding in org.apache.jute.compiler.CGenerator.genCode(): new java.io.FileWriter(File)
Dm	Found reliance on default encoding in org.apache.jute.compiler.CppGenerator.genCode(): new java.io.FileWriter(File)
Dm	Found reliance on default encoding in org.apache.jute.compiler.JRecord.genCsharpCode(File): new java.io.FileWriter(File)
Dm	Found reliance on default encoding in org.apache.jute.compiler.JRecord.genJavaCode(File): new java.io.FileWriter(File)
Dm	Found reliance on default encoding in new org.apache.jute.XmlOutputArchive(OutputStream): new java.io.PrintStream(OutputStream)
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.AddAuthCommand.exec(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.CreateCommand.exec(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.DelQuotaCommand.delQuota(ZooKeeper, String, boolean, boolean): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.DelQuotaCommand.delQuota(ZooKeeper, String, boolean, boolean): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.GetCommand.exec(): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.GetCommand.exec(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.GetConfigCommand.exec(): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.GetConfigCommand.exec(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.ListQuotaCommand.exec(): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.ReconfigCommand.exec(): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.SetCommand.exec(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.SetQuotaCommand.createQuota(ZooKeeper, String, long, int): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.cli.SetQuotaCommand.createQuota(ZooKeeper, String, long, int): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.client.FourLetterWordMain.send4LetterWord(String, int, String): new java.io.InputStreamReader(InputStream)
Dm	Found reliance on default encoding in org.apache.zookeeper.client.FourLetterWordMain.send4LetterWord(String, int, String): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ClientCnxn$SendThread.pingRwServer(): new java.io.InputStreamReader(InputStream)
Dm	Found reliance on default encoding in org.apache.zookeeper.ClientCnxn$SendThread.pingRwServer(): String.getBytes()
Dm	Found reliance on default encoding in new org.apache.zookeeper.common.AtomicFileWritingIdiom(File, AtomicFileWritingIdiom$OutputStreamStatement, AtomicFileWritingIdiom$WriterStatement): new java.io.OutputStreamWriter(OutputStream)
Dm	Found reliance on default encoding in org.apache.zookeeper.server.auth.DigestAuthenticationProvider.generateDigest(String): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.auth.DigestAuthenticationProvider.handleAuthentication(ServerCnxn, byte[]): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.DataTree.updateBytes(String, long): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.DataTree.updateBytes(String, long): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.DataTree.updateCount(String, int): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.DataTree.updateCount(String, int): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.DataTree.updateQuotaForPath(String): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.FinalRequestProcessor.processRequest(Request): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.NettyServerCnxn$SendBufferWriter.checkFlush(boolean): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.NIOServerCnxn$SendBufferWriter.checkFlush(boolean): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.persistence.FileSnap.<static initializer for FileSnap>(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.persistence.FileTxnLog.<static initializer for FileTxnLog>(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.PrepRequestProcessor.pRequest2Txn(int, long, Request, Record, boolean): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.FastLeaderElection.sendNotifications(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerReceiver.run(): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerReceiver.run(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.Follower.processPacket(QuorumPacket): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.Learner.syncWithLeader(long): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.LearnerHandler.run(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.Observer.processPacket(QuorumPacket): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.QuorumCnxManager.initiateConnection(Socket, Long): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.QuorumCnxManager.receiveConnection(Socket): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.QuorumPeer.readLongFromFile(String): new java.io.FileReader(File)
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.QuorumPeerConfig.checkValidity(): new java.io.FileReader(File)
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.QuorumPeerConfig$1.write(OutputStream): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.QuorumZooKeeperServer.dumpConf(PrintWriter): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.quorum.QuorumZooKeeperServer.dumpConf(PrintWriter): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.Request.toString(): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.ServerCnxn.<static initializer for ServerCnxn>(): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.server.TraceFormatter.main(String[]): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.server.util.OSMXBean.getMaxFileDescriptorCount(): new java.io.InputStreamReader(InputStream)
Dm	Found reliance on default encoding in org.apache.zookeeper.server.util.OSMXBean.getOpenFileDescriptorCount(): new java.io.InputStreamReader(InputStream)
Dm	Found reliance on default encoding in org.apache.zookeeper.server.ZKDatabase.initConfigInZKDatabase(QuorumVerifier): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.dump(String, int): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.dump(String, int): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.getTraceMask(String, int): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.kill(String, int): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.kill(String, int): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.ruok(String, int): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.ruok(String, int): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.setTraceMask(String, int, String): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.stat(String, int): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.ServerAdminClient.stat(String, int): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.Shell.runCommand(): new java.io.InputStreamReader(InputStream)
Dm	Found reliance on default encoding in org.apache.zookeeper.version.util.VerGen.generateFile(File, VerGen$Version, int, String): new java.io.FileWriter(File)
Dm	Found reliance on default encoding in org.apache.zookeeper.ZooKeeperMain.createQuota(ZooKeeper, String, long, int): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.ZooKeeperMain.createQuota(ZooKeeper, String, long, int): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ZooKeeperMain.delQuota(ZooKeeper, String, boolean, boolean): new String(byte[])
Dm	Found reliance on default encoding in org.apache.zookeeper.ZooKeeperMain.delQuota(ZooKeeper, String, boolean, boolean): String.getBytes()
Dm	Found reliance on default encoding in org.apache.zookeeper.ZooKeeperMain.run(): new java.io.InputStreamReader(InputStream)
{noformat}, These aren't so much "internationalization" issues as issues where Java doesn't know for sure how to convert characters into bytes or vice versa. In these cases Java uses the platform default encoding, which differs between Linux and Windows and Mac (yes, and different countries too). Despite all the complexities, usually the fix is just to specify UTF-8 everywhere. :)

{code}
import java.nio.charset.Charset;
private static final Charset UTF_8 = Charset.forName("UTF-8");
// or, in Java 7, just use StandardCharsets.UTF_8

String s = new String(bytes, UTF_8);
byte[] bs = s.getBytes(UTF_8);
{code}, It's a bit more complicated than that. Take a look at the warnings - e.g. FileWriter is being used and it doesn't have the ability to specify the encoding. As a result the impact is bigger (granted for simple stuff like strings it's not so bad).

Check out this tool used in lucene/solr: https://code.google.com/p/forbidden-apis/
also see: https://www.youtube.com/watch?v=PVRdLyQGUxE

See the note on FileReader here: http://blog.thetaphi.de/2012/07/default-locales-default-charsets-and.html
, Some of the operations do not accept the encoding parameter. However, supposed that we replace them with the one that do like described here: https://stackoverflow.com/questions/9852978/write-a-file-in-utf-8-using-filewriter-java , can we use UTF-8 universally everywhere? That should remove the dependency on default encoding. Theoretically this could fail for reading of e.g. file names with non UTF-8 characters on some non-UTF-8 compliant locales, but I believe most data that is written is generated by Zookeeper anyway. WDYT?]