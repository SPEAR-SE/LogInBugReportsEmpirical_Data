[A second problem under Solaris is that the following command
{code}
/bin/echo -n 999 > mypid.txt
{code}
will write "-n 999" into the "mypid.txt" file.

When issuing a "zkServer.sh stop", the following message is displayed :
{code}
Stopping zookeeper ... bin/zkServer.sh: line 145: kill: 24152: invalid signal specification
{code}
But fortunately the "stop" is performed anyway, it is only a warning.

The following code writes only the PID in the file : 
{code}
echo -n 999 > mypid.txt
{code}
, Sorry, my previous comment was wrong : the error "invalid signal specification" really prevents the "stop" command from being processed, and the Zookeeper instance is still running (altough its PID file is removed).
Also, a "zkServer.sh start" while the process is running does not detect that it is already running.
, [~metatech], thank you for filing the bug report.  I'm going to resolve this as a duplicate of ZOOKEEPER-1927.  I've added you as a watcher on that issue so that you'll continue to get status updates.  I'll post a patch on that issue shortly.
]