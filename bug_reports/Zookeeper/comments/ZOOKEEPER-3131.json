[I'm not sure I follow what you're proposing. Do you want to put up a pull request with your suggested changes and we can discuss there?, [~hw_wangchao] it was by design to leave it as is to improve the performance, since the watcher number is usually related with the connections on that server, and we can rely on the connection close to clean it up. 

The problem here is that, NettyServerCnxn didn't remove itself from ZK server as what we did in NIOServerCnxn, that's why it starts to leak slowly. I have a patch to make the behavior consistent with NIOServerCnxn, I can send it out today.

There are also other features missing comparing to NIO, for example, it's missing the maximum cnxns per IP limit support, doesn't have cnxn expirer, the NettyServerCnxnFactory.closeSession is not that efficient, etc. I'm recently working on get netty prod ready, I'll send out other patches as well., This one will be fixed if the ongoing optimized watch manager PR get landed: [https://github.com/apache/zookeeper/pull/590.] 

But that may take long time, I'll send a separate one just for this one.]