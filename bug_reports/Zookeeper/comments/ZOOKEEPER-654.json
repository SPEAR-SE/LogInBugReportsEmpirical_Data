[it's difficult to test this particular functionality (ie verifying we log something in certain cases) without this approach. 

Are you saying we should have a dedicated log4j configuration file as part of test, rather than relying on the one in conf?
That would be fine w/me.
, It seems like the code is retrieving a Layout object for log4j which it uses to format output to a custom appender. Is there a way of programmatically creating a Layout that will do the same thing? 

Something like this:

Layout layout = new SimpleLayout();

passes tests for me.

It depends, is the idea that we test that something is logged under the default log4j layout? Or that it gets logged at all (and using any layout that prints out messages will do)?

, "logged at all" should be sufficient, if that works great.

regardless we should also have a dedicated log4j config file to keep any changes in conf from effecting the tests and their output.
]