[for example,
we have 3 ZK (zk1, zk2, zk3), zk1 is down, zk2 is follower, zk3 is leader.  The currentEpoch and acceptEpoch of zk2 and zk3 is 6.   The currentEpoch and acceptEpoch of zk1 is 5.
Then,  zk1 is start. zk1 will setAcceptedEpoch to 6 when become follwer,  in the memory, acceptedEpoch is already 6, because run function setAcceptedEpoch. But writeLongToFile run failed, it will lead to in the file acceptedEpoch is already 5.  Then throw abnormal, return to LOOKING, this time zk1 will not run function setAcceptedEpoch, because his acceptedEpoch is the same as leader(zk3), zk1 do not know his acceptedEpoch in the file already 5.  If zk1 down again, zk1 will never start up. Because in the file, acceptedEpoch is 5, currentEpoch is 6., Thanks [~Yongcheng] for reporting this issue, though it is duplicate of ZOOKEEPER-2307. I am closing it as duplicate. Please feel free to reopen If you disagree.]