[
./configure --without-cppunit
make

...
aclocal:configure.ac:36: warning: macro `AM_PATH_CPPUNIT' not found in library
...
Makefile.am:68: wildcard tests/*.cc: non-POSIX variable name
Makefile.am:68: (probably a GNU make extension)
Makefile.am:68: wildcard tests/*.h: non-POSIX variable name
Makefile.am:68: (probably a GNU make extension)
Makefile.am:77: shell cat tests/wrappers.opt: non-POSIX variable name
Makefile.am:77: (probably a GNU make extension)
Makefile.am:90: shell cat tests/wrappers-mt.opt: non-POSIX variable name
Makefile.am:90: (probably a GNU make extension)
...
configure.ac:36: error: possibly undefined macro: AM_PATH_CPPUNIT
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
make: *** [configure] Error 1

here is the trace provided by chris.

, One step forward (not a complete solution) would be to add cppunit.m4 to svn.  For example, src/c/m4/cppunit.m4 can then be included when building from scratch with trunk using "aclocal -I m4".  That gets rid of the "undefined macro" error for AM_PATH_CPPUNIT if you don't have cppunit installed in a default location., cppunit is under GNU license so we cannot include the cppunit.m4. I am still finding my way throguh auto tools. Is their some other way we can do it ?, This patch makes sure CPPUNIT_CFLAGS isn't overwritten; if one has cppunit in a non-standard location it's important to have the -I flags passed into the compiler., I don't know about cppunit.m4, but AM_PATH_CPPUNIT isn't available without it -- maybe it's installed by default on some systems, but not any of mine, at least., I'm moving the patch file to ZOOKEEPER-469 because it's really a separate issue; sorry for any confusion.]