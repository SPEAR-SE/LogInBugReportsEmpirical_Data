[From a "how to fix it" point of view I don't think that I can really give valuable input, but from an outsider pov the quickest fix would obviously be to change the returned value of the IPAuthenticationProvider.isAuthenticated() method to true. 

However this is not really helpful when having more than one AuthenticationProvider - perhaps adding kind of ranking in between the reliability of them would help? Only the most trustworthy AuthenticationProvider applicable would then be taken into account to judge the client? However I did not look into the zookeeper philosophy of those things at all and hence don't know if it would fit.]