{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Patrick Hunt",
            "key": "phunt",
            "name": "phunt",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=phunt",
            "timeZone": "America/Los_Angeles"
        },
        "components": [{
            "description": "General issues with the ZooKeeper server.",
            "id": "12312382",
            "name": "server",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12312382"
        }],
        "created": "2012-03-12T09:13:24.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Botond Hejj",
            "key": "botond.hejj",
            "name": "botond.hejj",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=botond.hejj",
            "timeZone": "Europe/Berlin"
        },
        "customfield_10010": null,
        "customfield_12310191": [{
            "id": "10343",
            "self": "https://issues.apache.org/jira/rest/api/2/customFieldOption/10343",
            "value": "Reviewed"
        }],
        "customfield_12310192": null,
        "customfield_12310220": "2012-03-12T17:10:02.868+0000",
        "customfield_12310222": "10002_*:*_2_*:*_239596538_*|*_1_*:*_2_*:*_47973411_*|*_5_*:*_1_*:*_0",
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "6.0",
        "customfield_12310420": "231227",
        "customfield_12310920": "12510",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i02hyf:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Jun 04 23:33:58 UTC 2012",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "I've observed an inconsistent behavior in java client watches. The inconsistency relates to the behavior after the client reconnects to the zookeeper ensemble.\n\nAfter the client reconnects to the ensemble only those watches should trigger which should have been triggered also if the connections was not lost. This means if I watch for changes in node /foo and there is no change there than my watch should not be triggered on reconnecting to the ensemble.\nThis is not always the case in the java client.\n\nI've debugged the issues and I could locate the case when the watch is always triggered on reconnect. This is consistently happening if I connect to a follower in the ensemble and I don't do any operation which goes through the leader.\nLooking at the code I see that the client stores the lastzxid and sends that with its request. This is 0 on startup and will be updated everytime from the server replies. This lastzxid is also sent to the server after reconnect together with watches. The server decides which watch to trigger based on this lastzxid probably because that should mean the last known state of the client. If this lastzxid is 0 than all the watches are triggered.\nI've checked why is this lastzxid 0. I thought it shouldn't be since there was already a request to the server to set the watch and in the reply the server could have sent back the zxid but it turns out that it sends just 0. Looking at the server code I see that for requests which doesn't go through the leader the follower server just sends back the same zxid that the client sent.",
        "duedate": null,
        "environment": null,
        "fixVersions": [
            {
                "archived": false,
                "description": "Fix release against 3.3 branch",
                "id": "12319081",
                "name": "3.3.5",
                "releaseDate": "2012-03-20",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12319081"
            },
            {
                "archived": false,
                "description": "Fix release against 3.4 branch.",
                "id": "12319841",
                "name": "3.4.4",
                "releaseDate": "2012-09-23",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12319841"
            },
            {
                "archived": false,
                "description": "Dynamic Reconfig, Remove Watches, Local Session",
                "id": "12316644",
                "name": "3.5.0",
                "releaseDate": "2014-08-04",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12316644"
            }
        ],
        "issuelinks": [{
            "id": "12349323",
            "outwardIssue": {
                "fields": {
                    "issuetype": {
                        "avatarId": 21133,
                        "description": "A problem which impairs or prevents the functions of the product.",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                        "id": "1",
                        "name": "Bug",
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                        "subtask": false
                    },
                    "priority": {
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "id": "3",
                        "name": "Major",
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                    },
                    "status": {
                        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                        "id": "5",
                        "name": "Resolved",
                        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                        "statusCategory": {
                            "colorName": "green",
                            "id": 3,
                            "key": "done",
                            "name": "Done",
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                        }
                    },
                    "summary": "investigate differences in client last zxid handling btw c and java clients"
                },
                "id": "12546618",
                "key": "ZOOKEEPER-1417",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/12546618"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12349323",
            "type": {
                "id": "10030",
                "inward": "is related to",
                "name": "Reference",
                "outward": "relates to",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
            }
        }],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
            "id": "1",
            "name": "Blocker",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/1"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011"
            },
            "id": "12310801",
            "key": "ZOOKEEPER",
            "name": "ZooKeeper",
            "projectCategory": {
                "description": "Apache ZooKeeper related",
                "id": "10484",
                "name": "ZooKeeper",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10484"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310801"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Botond Hejj",
            "key": "botond.hejj",
            "name": "botond.hejj",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=botond.hejj",
            "timeZone": "Europe/Berlin"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2012-03-15T17:06:13.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "java client watches inconsistently triggered on reconnect",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2012-06-04T23:33:58.000+0000",
        "versions": [
            {
                "archived": false,
                "description": "Fix release against 3.3 branch",
                "id": "12315482",
                "name": "3.3.3",
                "releaseDate": "2011-02-27",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12315482"
            },
            {
                "archived": false,
                "description": "Fix release against 3.3 branch",
                "id": "12316276",
                "name": "3.3.4",
                "releaseDate": "2011-11-26",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12316276"
            },
            {
                "archived": false,
                "description": "Kerberos client auth, multi support, deb/rpm pkging.",
                "id": "12314469",
                "name": "3.4.0",
                "releaseDate": "2011-11-22",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12314469"
            },
            {
                "archived": false,
                "description": "Fix release against 3.4 branch.",
                "id": "12318650",
                "name": "3.4.1",
                "releaseDate": "2011-12-16",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12318650"
            },
            {
                "archived": false,
                "description": "Fix release against 3.4 branch.",
                "id": "12319196",
                "name": "3.4.2",
                "releaseDate": "2011-12-29",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12319196"
            },
            {
                "archived": false,
                "description": "Fix release against 3.4 branch",
                "id": "12319288",
                "name": "3.4.3",
                "releaseDate": "2012-02-13",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12319288"
            }
        ],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1412/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1412/watchers",
            "watchCount": 6
        },
        "workratio": -1
    },
    "id": "12546069",
    "key": "ZOOKEEPER-1412",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12546069"
}