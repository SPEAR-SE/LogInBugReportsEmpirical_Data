{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12691450","self":"https://issues.apache.org/jira/rest/api/2/issue/12691450","key":"ZOOKEEPER-1869","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/9","id":"9","description":"Unresolved","name":"Unresolved"},"customfield_12312322":null,"customfield_12310220":"2014-01-28T13:22:15.671+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 03 05:55:16 UTC 2016","customfield_12310420":"370195","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_66132698138_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-03-03T05:55:16.653+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1869/watchers","watchCount":15,"isWatching":false},"created":"2014-01-27T19:43:38.784+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316644","id":"12316644","description":"Dynamic Reconfig, Remove Watches, Local Session","name":"3.5.0","archived":false,"released":true,"releaseDate":"2014-08-04"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-03-03T05:55:16.918+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312379","id":"12312379","name":"quorum","description":"Quorum determination for ZooKeeper"}],"timeoriginalestimate":null,"description":"We have deployed zookeeper version 3.5.0.1515976, with 3 zk servers in the quorum.\nThe problem we are facing is that one zookeeper server in the quorum falls apart, and never becomes part of the cluster until we restart zookeeper server on that node.\n\nOur interpretation from zookeeper logs on all nodes is as follows: \n(For simplicity assume S1=> zk server1, S2 => zk server2, S3 => zk server 3)\nInitially S3 is the leader while S1 and S2 are followers.\n\nS2 hits 46 sec latency while fsyncing write ahead log and results in loss of connection with S3.\n S3 in turn prints following error message:\n\nUnexpected exception causing shutdown while sock still open\njava.net.SocketTimeoutException: Read timed out\nStack trace\n******* GOODBYE /169.254.1.2:47647(S2) ********\n\nS2 in this case closes connection with S3(leader) and shuts down follower with following log messages:\nClosing connection to leader, exception during packet send\njava.net.SocketException: Socket close\nFollower@194] - shutdown called\njava.lang.Exception: shutdown Follower\n\nAfter this point S3 could never reestablish connection with S2 and leader election mechanism keeps failing. S3 now keeps printing following message repeatedly:\nCannot open channel to 2 at election address /169.254.1.2:3888\njava.net.ConnectException: Connection refused.\n\nWhile S3 is in this state, S2 repeatedly keeps printing following message:\nINFO [NIOServerCxnFactory.AcceptThread:/0.0.0.0:2181:NIOServerCnxnFactory$AcceptThread@296] - Accepted socket connection from /127.0.0.1:60667\nException causing close of session 0x0: ZooKeeperServer not running\nClosed socket connection for client /127.0.0.1:60667 (no session established for client)\n\nLeader election never completes successfully and causing S2 to fall apart from the quorum.\nS2 was out of quorum for almost 1 week.\n\nWhile debugging this issue, we found out that both election and peer connection ports on S2  can't be telneted from any of the node (S1, S2, S3). Network connectivity is not the issue. Later, we restarted the ZK server S2 (service zookeeper-server restart) -- now we could telnet to both the ports and S2 joined the ensemble after a leader election attempt.\nAny idea what might be forcing S2 to get into a situation where it won't accept any connections on the leader election and peer connection ports?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"370497","customfield_12312823":null,"summary":"zk server falling apart from quorum due to connection loss and couldn't connect back","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Using CentOS6 for running these zookeeper servers","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13883307","id":"13883307","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"body":"Logs for all the servers have been uploaded to following dropbox link:\nhttps://dl.dropboxusercontent.com/u/36429721/zklog.tgz","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"created":"2014-01-27T21:07:04.495+0000","updated":"2014-01-27T21:07:04.495+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13884108","id":"13884108","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abranzyck","name":"abranzyck","key":"abranzyck","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"},"displayName":"Germán Blanco","active":true,"timeZone":"Europe/Berlin"},"body":"In the log of server 2, something happens here:\n{noformat}\n2014-01-05 20:04:37,651 [myid:2] - ERROR [/169.254.1.2:3888:QuorumCnxManager$Listener@567] - As I'm leaving the listener thread, I won't be able to participate in leader election any longer: /169.254.1.2:3888\n2014-01-05 20:04:37,675 [myid:2] - WARN  [WorkerSender[myid=2]:QuorumCnxManager@390] - Cannot open channel to 1 at election address /169.254.1.1:3888\njava.net.NoRouteToHostException: No route to host\n{noformat}\nThe first log message seems to indicate that server 2 won't be listening to FLE connections any more. Anybody knows if there is an automatic way to recover from this?\nThe \"No route to host\" message occurs a lot. Was there any problem with the network hardware?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abranzyck","name":"abranzyck","key":"abranzyck","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"},"displayName":"Germán Blanco","active":true,"timeZone":"Europe/Berlin"},"created":"2014-01-28T13:22:15.671+0000","updated":"2014-01-28T13:22:15.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13885694","id":"13885694","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"body":"Servers are in virtual machines hence they are using vswitch for network connectivity. \nHardware looks fine, since other network utilities scp and ssh are going fine. \nBut we could not telnet zookeeper leader election port 2888 and 3888.\nQuorum works fine after restarting server2, hence assuming network should not be the problem.\n\nPlease note that problem started from \"2014-01-07 10:34:01,114\" time on node 2.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"created":"2014-01-29T19:34:08.216+0000","updated":"2014-01-29T19:34:08.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13891501","id":"13891501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"body":"Hi German,\n\nDid you get a chance to look at the log? Any idea is this a zokeeper bug or\nany other configuration issue?\n\nThanks & Regards,\nDeepak","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"created":"2014-02-05T00:26:10.772+0000","updated":"2014-02-05T00:26:10.772+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13891894","id":"13891894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abranzyck","name":"abranzyck","key":"abranzyck","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"},"displayName":"Germán Blanco","active":true,"timeZone":"Europe/Berlin"},"body":"Hello Deepak,\n\nyes, I looked at the logs.\nIt could be a zookeeper bug, caused by network instability. As indicated in my previous post (see the second post in this JIRA), the code reaches a point that I haven´t seen until now in other logs, and the log indicates that the server will not be listening on FLE ports any longer. If we can verify that your problem happens when that log is produced, then we have located the bug. Maybe you could try to reproduce the situation of when the problem happened or maybe we could generate a zookeeper jar that jumps to that part of the code under some condition. If you then reach the same state as in your initial problem, we know what we have to fix. Do you think you could please do that?\nAs said, the root cause of the problem seems to be network instability. By looking at the logs, I can see a lot of indications of something that is not going nicely with connections, I can't tell if that is something that you can solve or not in your environment. But that doesn't change the fact that there might be something to correct in ZooKeeper.\n\nRegards,\n\nGerman.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abranzyck","name":"abranzyck","key":"abranzyck","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"},"displayName":"Germán Blanco","active":true,"timeZone":"Europe/Berlin"},"created":"2014-02-05T07:44:56.107+0000","updated":"2014-02-05T07:44:56.107+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13892790","id":"13892790","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"body":"Hi German,\n\nUnfortunately this issue occurred at customer site and hence difficult to reproduce it.\nIf we managed to reproduce this in the lab will update you with new set of logs.\n\nThanks & Regards,\nDeepak\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"created":"2014-02-06T00:08:17.517+0000","updated":"2014-02-06T00:08:17.517+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13898700","id":"13898700","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"body":"Hi German,\n\nI observed another instance where zookeeper cluster is falling apart.\nBut in this case leader election was happening in loop every couple of minutes.\nWhile in the previous case leader election never completed for almost 3-4 days.\nI am using bit older revision of zookeeper 3.5.0 (released some time in March),\nany idea if there any fixes related to these bugs.\n\nPlease find more description this issue:\nI have 3 node zookeeper 3.5.0.1458648 quorum on my setup.\nWe came across a situation where one of the zk server in the cluster went down due to bad disk.\nWe observed that leader election keeps running in loop (starts, completes and again starts). The loop repeats every couple of minutes. Even restarting zookeeper server on both nodes doesn't help recovering from this loop.\nNetwork connection looks fine though, as I could telnet leader election port and ssh from one node to other.\nzookeeper client on each node is using \"127.0.0.1:2181\" as quorum string for connecting to server, therefore if local zookeeper server is down client app is dead.\n\nI have uploaded zookeeper.log for both nodes at following link:\nhttps://dl.dropboxusercontent.com/u/36429721/zkSupportLog.tar.gz \n\nAny idea what might be wrong with the quorum? Please note that restarting  zookeeper server on both nodes doesn't help to recover from this situations.\n\nThanks & Regards,\nDeepak","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"created":"2014-02-12T02:33:48.265+0000","updated":"2014-02-12T02:33:48.265+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13905939","id":"13905939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"body":"These are some crazy logs. Unfortunately for the second case I think you're too far behind master for us to do much with it.\nAs far as I can tell, the two remaining servers attempt to form a quorum, but every time the follower gets UPTODATE, it fails to send the ACK packet so that the leader can read it (we see a broken pipe on the follower in writePacket, and a read time out on the leader when trying to deserialize the type of the packet). Is it possible that you were running with 2 different generated protocol definitions?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"created":"2014-02-19T19:36:08.767+0000","updated":"2014-02-19T19:36:08.767+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/13906416","id":"13906416","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"body":"All servers have identical zookeeper version running,  so most likely there shouldn't be mismatch in protocol definitions. Leader election goes though fine till sync stage so network connectivity is fine. Also verified that ssh and ping are fine among the nodes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djagtap","name":"djagtap","key":"djagtap","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepak Jagtap","active":true,"timeZone":"Etc/UTC"},"created":"2014-02-20T01:09:08.099+0000","updated":"2014-02-20T01:09:08.099+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/14288901","id":"14288901","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deniz","name":"deniz","key":"deniz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10442","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10442","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10442","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10442"},"displayName":"Deniz Durmus","active":true,"timeZone":"Asia/Shanghai"},"body":"any updates on this issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deniz","name":"deniz","key":"deniz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10442","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10442","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10442","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10442"},"displayName":"Deniz Durmus","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-01-23T07:26:56.512+0000","updated":"2015-01-23T07:26:56.512+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/14648894","id":"14648894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ztyx","name":"ztyx","key":"ztyx","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ztyx&avatarId=20268","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ztyx&avatarId=20268","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ztyx&avatarId=20268","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ztyx&avatarId=20268"},"displayName":"Jens Rantil","active":true,"timeZone":"Europe/Stockholm"},"body":"Hi. We, too, probably hit this issue yesterday. Suddenly, our entire Zookeeper ensemble was unresponsive and logs tells us a very similar scenario as described by Deepak. Restart of all servers did not bring the ensemble back. We had to stop all nodes, clean the data directory (we only use znodes for locks) and start them all again. Since our logs contains some keys that could be a little sensitive, I'm willing to e-mail logs by request.\n\nWe are running version 3.3.5.\n\nWhile I don't have any logs, I suspect this has happened to us once a couple of weeks back, too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ztyx","name":"ztyx","key":"ztyx","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ztyx&avatarId=20268","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ztyx&avatarId=20268","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ztyx&avatarId=20268","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ztyx&avatarId=20268"},"displayName":"Jens Rantil","active":true,"timeZone":"Europe/Stockholm"},"created":"2015-07-31T07:56:00.056+0000","updated":"2015-07-31T07:56:00.056+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/14648930","id":"14648930","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"The description of this jira is too general and when I've seen issues like this they are typically related to network issues. My read of the discussion here is that it has been inconclusive, so there is no progress to be made. Unless more information is provided, I suggest we close this jira.\n\n[~ztyx], I strongly suggest you upgrade to the 3.4 branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2015-07-31T08:35:44.594+0000","updated":"2015-07-31T08:35:44.594+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/14737084","id":"14737084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ztyx","name":"ztyx","key":"ztyx","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ztyx&avatarId=20268","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ztyx&avatarId=20268","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ztyx&avatarId=20268","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ztyx&avatarId=20268"},"displayName":"Jens Rantil","active":true,"timeZone":"Europe/Stockholm"},"body":"Thank you for your reply, Flavio. FYI, we've now upgraded to the 3.4. I'll post here if we can recreate the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ztyx","name":"ztyx","key":"ztyx","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ztyx&avatarId=20268","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ztyx&avatarId=20268","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ztyx&avatarId=20268","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ztyx&avatarId=20268"},"displayName":"Jens Rantil","active":true,"timeZone":"Europe/Stockholm"},"created":"2015-09-09T16:00:23.895+0000","updated":"2015-09-09T16:00:23.895+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/14737120","id":"14737120","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"Note the original report was against 3.5.0...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-09T16:19:55.461+0000","updated":"2015-09-09T16:19:55.461+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/14737123","id":"14737123","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"A few things were fixed around the FLE , I'd definitely give release 3.5.1 a try:\n\nhttp://zookeeper.apache.org/doc/r3.5.1-alpha/releasenotes.html\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-09T16:21:43.768+0000","updated":"2015-09-09T16:21:43.768+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/14737125","id":"14737125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"Also, 3.5.1 (though alpha, but being used by many) is now available as well:\n\nhttp://zookeeper.apache.org/doc/r3.5.1-alpha/releasenotes.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-09T16:22:41.251+0000","updated":"2015-09-09T16:22:41.251+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12691450/comment/15177270","id":"15177270","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Closing based on most recent comments/discussion. Please reopen/recreate if necessary. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-03T05:55:16.807+0000","updated":"2016-03-03T05:55:16.807+0000"}],"maxResults":17,"total":17,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1869/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1rsyf:"}}