{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12909478","self":"https://issues.apache.org/jira/rest/api/2/issue/12909478","key":"ZOOKEEPER-2310","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-11-01T09:17:44.700+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Sep 11 08:19:05 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2310/watchers","watchCount":6,"isWatching":false},"created":"2015-11-01T06:26:33.128+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323310","id":"12323310","description":"Fix release against 3.4 branch","name":"3.4.6","archived":false,"released":true,"releaseDate":"2014-03-10"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-09-11T08:19:05.970+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."}],"timeoriginalestimate":null,"description":"Today, Zookeeper server syncs transaction log files to disk by default, but does not sync snapshot files.  Consequently, an untimely crash may result in a lost or incomplete snapshot file.  During recovery, if the server finds a valid older snapshot file, it will load it and replay subsequent log(s), skipping the incomplete snapshot file.  It's possible that the skipped file had some transactions which are not present in the replayed transaction logs.  Since quorum synchronization is based on last transaction ID of each server, this will never get noticed, resulting in inconsistency between servers and possible data loss.\n\nFollowing sequence of events describes a sample scenario where this can happen:\n\n# Server F is a follower in a Zookeeper ensemble.\n# F's most recent valid snapshot file is named \"snapshot.10\" containing state up to zxid = 10.  F is currently writing to the transaction log file \"log.11\", with the most recent zxid = 20.\n# Fresh round of election.\n# F receives a few new transactions 21 to 30 from new leader L as the \"diff\".  Current server behavior is to dump current state plus diff to a new snapshot file, \"snapshot.30\".\n# F finalizes the snapshot file, but file contents are still buffered in OS caches.  Zookeeper does not sync snapshot file contents to disk.\n# F receives a new transaction 31 from the leader, which it appends to the existing transaction log file, \"log.11\" and syncs the file to disk.\n# Server machine crashes or is cold rebooted.\n# After recovery, snapshot file \"snapshot.30\" may not exist or may be empty.  See below for why that may happen.\n# In either case, F looks for the last finalized snapshot file, finds and loads \"snapshot.10\".  It then replays transactions from \"log.11\".  Ultimately, its last seen zxid will be 31, but it would not have replayed transactions 21 to 30 received via the \"diff\" from the leader.\n# Clients which are connected to F may see different data than clients connected to other members of the ensemble, violating single system image invariant.  Also, if F were to become a leader at some point, it could use its state to seed other servers, and they all could lose the writes in the missing interval above.\n\n*Notes:*\n- Reason why snapshot file may be missing or incomplete:\n-- Zookeeper does not sync the data directory after creating a snapshot file.  Even if a newly created file is synced to disk, if the corresponding directory entry is not, then the file will not be visible in the namespace.\n-- Zookeeper does not sync snapshot files.  So, they may be empty or incomplete during recovery from an untimely crash.\n- In step (6) above, the server could also have written the new transaction 31 to a new log file, \"log.31\".  The final outcome would still be the same.\n\nWe are able to deterministically reproduce this problem using the following steps:\n\n# Create a new Zookeeper ensemble on 3 hosts: A, B, and C.\n# Ensured each server has at least one snapshot file in its data dir.\n# Stop Zookeeper process on server A.\n# Slow down disk syncs on server A (see example script below). This ensures that snapshot files written by Zookeeper don't make it to disk spontaneously.  Log files will be written to disk as Zookeeper explicitly issues a sync call on such files.\n# Connect to server B and create a new znode /test1.\n# Start Zookeeper process on A, wait for it to write a new snapshot to its datadir.  This snapshot would contain /test1 but it won’t be synced to disk yet.\n# Connect to A and verify that /test1 is visible.\n# Connect to B and create another znode /test2.  This will cause A’s transaction log to grow further to receive /test2.\n# Cold reboot A.\n# A’s last snapshot is a zero-sized file or is missing altogether since it did not get synced to disk before reboot.  We have seen both in different runs.\n# Connect to A and verify that /test1 does not exist.  It exists on B and C.\n\nSlowing down disk syncs:\n{noformat}\necho 360000 | sudo tee /proc/sys/vm/dirty_writeback_centisecs\necho 360000 | sudo tee /proc/sys/vm/dirty_expire_centisecs\necho 99 | sudo tee /proc/sys/vm/dirty_background_ratio\necho 99 | sudo tee /proc/sys/vm/dirty_ratio\n{noformat}\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12827922","id":"12827922","filename":"ZOOKEEPER-2310.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-11T07:56:50.245+0000","size":3750,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12827922/ZOOKEEPER-2310.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12769978","id":"12769978","filename":"zookeeper-2310.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-01T06:32:28.850+0000","size":3512,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12769978/zookeeper-2310.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12802042","id":"12802042","filename":"zookeeper-2310-version-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-03T21:09:45.714+0000","size":4178,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12802042/zookeeper-2310-version-2.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Snapshot files must be synced to prevent inconsistency or data loss","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12909478/comment/14984286","id":"14984286","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch for above issue which:\n# Syncs snapshot file\n# Syncs snapshot directory\n# Debug log message about snapshot file once written.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-01T06:32:28.854+0000","updated":"2015-11-01T06:32:28.854+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12909478/comment/14984310","id":"14984310","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"Hi [~abhishekrai], Thanks for reporting this issue. I'm not sure what's causing what you're seeing, but some of the premises in your description don't seem right to me. If the snapshot is corrupted or missing altogether, then the server should be able to recover from the txn log using an older snapshot file if there is one. It should be loading txns 21-30 from the log in the case the snapshot isn't there. \n\nI suggest we have a look at the issues we have seen reported for branch 3.4 to see if there is anything that matches. Also, we may want to test with the head of branch 3.4 to see if this issue will be fixed in 3.4.7 already.\n\nThe bottom line is that I'm not convinced that we should be syncing the snapshots, but we need to track the bug you've spotted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2015-11-01T09:17:44.700+0000","updated":"2015-11-01T09:17:44.700+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12909478/comment/14984796","id":"14984796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for your response [~fpj].  I think my claim about the \"diff\" being present in the snapshot and not in the log looks incorrect.  When pushing a diff, leader (LearnerHandler) pushes individual transactions which the follower writes to its log (Learner.syncWithLeader).  Leader eventually sends a \"NEWLEADER\", in response, the follower snapshots.  Ultimately, the diff is visible in both the log and snapshot.\n\nBut consider the case of leader (LearnerHandler) pushing a full snapshot to the follower.  In this case, the follower does not receive the individual transactions contributing to that snapshot.  In fact, it's not practical to do so - by design, the snapshot is sent when the diff is too large.  Thus, the follower can have a snapshot which reflects some transactions that are not present in the log.  After writing the snapshot, the follower continues writing subsequent transactions to the log.\n\nImagine a crash + recovery is induced at this point, such that the latest snapshot file is incomplete or non-existent.  The follower would try to load the preceding healthy snapshot, and replay the log since then.  Since the log does not contain some transactions corresponding to the missing snapshot file, the follower would never find out about them.  This would cause the inconsistency scenario I described above.\n\nWithout syncing the snapshot file (and its parent directory) to disk, we cannot guarantee that the snapshot file exists during recovery.  And the loss of finalized snapshot files can result in data loss since all transactions may not be present in the log.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-02T06:32:38.937+0000","updated":"2015-11-02T06:32:38.937+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12909478/comment/15268170","id":"15268170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhangyongxyz","name":"zhangyongxyz","key":"zhangyongxyz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10441","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10441","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10441","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10441"},"displayName":"Yong Zhang","active":true,"timeZone":"Asia/Shanghai"},"body":"Hi [~abhishekrai], this patch not work on Windows because of FileChannel.open on a folder seems not support on Windows. \nWe do not always run zk server on Windows but have many code like hbase UT there.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhangyongxyz","name":"zhangyongxyz","key":"zhangyongxyz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10441","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10441","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10441","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10441"},"displayName":"Yong Zhang","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-05-03T06:14:20.385+0000","updated":"2016-05-03T06:14:20.385+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12909478/comment/15269602","id":"15269602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for bringing this up [~zhangyongxyz].  As you pointed out, FileChannel does not provide a way of accomplishing this in Windows.  There are conflicting opinions online about whether it's even necessary for Windows based on how it automatically handles updates to folders.\n\nI've provided a modified patch (zookeeper-2310-version-2.patch) which skips syncing of directory on Windows.  The pattern I used has been used elsewhere in Zookeeper source, so should be safe.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abhishekrai","name":"abhishekrai","key":"abhishekrai","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Abhishek Rai","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-03T21:12:39.852+0000","updated":"2016-05-03T21:12:39.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12909478/comment/15270004","id":"15270004","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhangyongxyz","name":"zhangyongxyz","key":"zhangyongxyz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10441","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10441","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10441","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10441"},"displayName":"Yong Zhang","active":true,"timeZone":"Asia/Shanghai"},"body":"I am not sure whether only Windows has different behavior, I prefer to only allow Linux to call this FileChannel.open.\nJust a suggestion.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhangyongxyz","name":"zhangyongxyz","key":"zhangyongxyz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10441","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10441","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10441","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10441"},"displayName":"Yong Zhang","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-05-04T01:57:33.902+0000","updated":"2016-05-04T01:57:33.902+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12909478/comment/15481300","id":"15481300","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12802042/zookeeper-2310-version-2.patch\n  against trunk revision 1759917.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3412//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-11T07:49:27.153+0000","updated":"2016-09-11T07:49:27.153+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12909478/comment/15481335","id":"15481335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12827922/ZOOKEEPER-2310.3.patch\n  against trunk revision 1759917.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3413//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3413//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3413//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-11T08:19:05.970+0000","updated":"2016-09-11T08:19:05.970+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2310/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2nsfb:"}}