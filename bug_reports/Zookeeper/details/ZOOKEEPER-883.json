{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12475489","self":"https://issues.apache.org/jira/rest/api/2/issue/12475489","key":"ZOOKEEPER-883","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/10","id":"10","description":"As the name suggests","name":"Implemented"},"customfield_12312322":null,"customfield_12310220":"2010-09-30T11:49:28.162+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Oct 10 00:33:16 UTC 2013","customfield_12310420":"36655","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_95529286783_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-10-10T00:33:16.317+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-883/watchers","watchCount":1,"isWatching":false},"created":"2010-09-30T08:38:29.608+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314846","id":"12314846","description":"Fix release against 3.3 branch","name":"3.3.1","archived":false,"released":true,"releaseDate":"2010-05-17"}],"issuelinks":[{"id":"12334769","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334769","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12480225","key":"ZOOKEEPER-934","self":"https://issues.apache.org/jira/rest/api/2/issue/12480225","fields":{"summary":"Add sanity check for server ID","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12334148","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334148","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12475256","key":"ZOOKEEPER-880","self":"https://issues.apache.org/jira/rest/api/2/issue/12475256","fields":{"summary":"QuorumCnxManager$SendWorker grows without bounds","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-10-10T00:33:16.387+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."}],"timeoriginalestimate":null,"description":"Monitoring the ZooKeeper nodes by polling the various ports using Nagios' open port checks seems to cause a substantial raise of CPU being used by the ZooKeeper daemons. Over the course of a week an idle cluster grew from a baseline 2% to >10% CPU usage. Attached is a stack dump and logs showing the occupied threads. At the end the daemon starts failing on \"too many open files\" errors as all handles are used up.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12455980","id":"12455980","filename":"Archive.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"created":"2010-09-30T08:45:26.854+0000","size":279294,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12455980/Archive.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"32831","customfield_12312823":null,"summary":"Idle cluster increasingly consumes CPU resources","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12916413","id":"12916413","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"body":"Here is the config, which is a modified CDH3 version, pretty much standard:\n\n{code}\n# The number of milliseconds of each tick\ntickTime=2000\n# The number of ticks that the initial\n# synchronization phase can take\ninitLimit=10\n# The number of ticks that can pass between\n# sending a request and getting an acknowledgement\nsyncLimit=5\n# the directory where the snapshot is stored.\ndataDir=/var/zookeeper\n# the port at which the clients will connect\nclientPort=2181\nserver.0=hadoop-primary.i.foobar.com:2888:3888\nserver.1=hadoop-a.i.foobar.com:2888:3888\nserver.2=hadoop-c.i.foobar.com:2888:3888\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"created":"2010-09-30T08:53:35.711+0000","updated":"2010-09-30T08:53:35.711+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12916446","id":"12916446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"I think this issue is related to ZOOKEEPER-880. It seems that the connections nagios creates start a RecvWorker and a SendWorker, and once they close, they kill RecvWorker but not SendWorker, so for every notification sent there is an orphan RecvWorker.\n\nI see two options:\n\n# Patch it so that it also kills the SendWorker instance;\n# Decline connection requests from unknown servers.\n\nI'm also curious to understand why you guys are monitoring the election port.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2010-09-30T11:49:28.162+0000","updated":"2010-09-30T11:49:28.162+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12916476","id":"12916476","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"I meant to say that there is an orphan SendWorker, not an orphan RecvWorker.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2010-09-30T13:47:07.931+0000","updated":"2010-09-30T13:47:07.931+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12916502","id":"12916502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"body":"This happened at a customer location, so no idea why they all were polled. After talking to Patrick I also advised switching to the appropriate 4-letter word check (like \"stat\" to check the node). Patrick suggested though we should issue the JIRA to capture the situation. If this is a dupe from ZOOKEEPER-880 then please close this one as such. Your call.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"created":"2010-09-30T14:59:34.480+0000","updated":"2010-09-30T14:59:34.480+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12916541","id":"12916541","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Let's keep them both open until we learn more.\n\nLars, can you have them turn off Nagios from pinging the ZK ensemble, then have them restart all the zk servers (the entire zk ensemble), then see if this problem still occurs and update this jira with the results? Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-30T16:28:27.279+0000","updated":"2010-09-30T16:28:27.279+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12916547","id":"12916547","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue sounds very similar to ZOOKEEPER-880 -- they are also using Nagios to monitor the election port in that case as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-30T16:40:56.273+0000","updated":"2010-09-30T16:40:56.273+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12916561","id":"12916561","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"body":"Yes, did request that and will update here as I get details.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=larsgeorge","name":"larsgeorge","key":"larsgeorge","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=larsgeorge&avatarId=23979","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=larsgeorge&avatarId=23979","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=larsgeorge&avatarId=23979","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=larsgeorge&avatarId=23979"},"displayName":"Lars George","active":true,"timeZone":"Europe/Berlin"},"created":"2010-09-30T17:09:12.178+0000","updated":"2010-09-30T17:09:12.178+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12916588","id":"12916588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=savu.andrei","name":"savu.andrei","key":"savu.andrei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=savu.andrei&avatarId=19587","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=savu.andrei&avatarId=19587","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=savu.andrei&avatarId=19587","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=savu.andrei&avatarId=19587"},"displayName":"Andrei Savu","active":true,"timeZone":"America/Los_Angeles"},"body":"The trunk contains a monitoring script (src/contrib/monitoring) useful for Nagios, Ganglia and  Cacti. For best results you need a version of ZooKeeper that has the 'mntr' 4letter word (see ZOOKEEPER-744) but it also works with 3.3.x.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=savu.andrei","name":"savu.andrei","key":"savu.andrei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=savu.andrei&avatarId=19587","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=savu.andrei&avatarId=19587","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=savu.andrei&avatarId=19587","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=savu.andrei&avatarId=19587"},"displayName":"Andrei Savu","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-30T18:17:20.208+0000","updated":"2010-09-30T18:17:20.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/12965374","id":"12965374","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishalmlst","name":"vishalmlst","key":"vishalmlst","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Kher","active":true,"timeZone":"Etc/UTC"},"body":"Hi,\n\nIf this problem is reproducible, can you try with the patch attached for ZOOKEEPER-880. Going through the logs, the patch for ZOOKEEPER-880 will only fix part of the problem - it will prevent leak of SendWorker thread.\n\nLogs show that there are 320 RecvWorker threads blocked in a read() from remote socket. 2 of these threads should be legitimate threads to remote servers. Very likely rest of them are from Nagios.\n\nThere are 2 cases I can think of that can lead to this situation:\n1. Nagios may not be closing a connection. If Nagios was closing connections, then the read() should have received an exception.\n2. Monitoring frequency set too high\n\n-Vishal\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishalmlst","name":"vishalmlst","key":"vishalmlst","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Kher","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-30T19:38:35.656+0000","updated":"2010-11-30T19:38:35.656+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12475489/comment/13791047","id":"13791047","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Sounds like this was resolved with ZOOKEEPER-880. Please reopen if it happens again. Thanks Lars.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-10T00:33:16.357+0000","updated":"2013-10-10T00:33:16.357+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-883/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i05zdr:"}}