{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12506765","self":"https://issues.apache.org/jira/rest/api/2/issue/12506765","key":"ZOOKEEPER-1061","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314469","id":"12314469","description":"Kerberos client auth, multi support, deb/rpm pkging.","name":"3.4.0","archived":false,"released":true,"releaseDate":"2011-11-22"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-05-10T21:33:42.958+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 30 14:27:23 UTC 2017","customfield_12310420":"37453","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_504399884_*|*_1_*:*_1_*:*_1652163_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-05-16T17:12:48.390+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1061/watchers","watchCount":3,"isWatching":false},"created":"2011-05-10T20:38:36.387+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315108","id":"12315108","description":"Fix release against 3.3 branch","name":"3.3.2","archived":false,"released":true,"releaseDate":"2010-11-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-03-30T14:27:23.455+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312384","id":"12312384","name":"scripts"}],"timeoriginalestimate":null,"description":"The zkServer.sh script doesn't check properly to see if a previously started\nserver is still running.  If you call start twice, the second invocation\nwill over-write the PID file with a process that then fails due to port\noccupancy.\n\nThis means that stop will subsequently fail.\n\nHere is a reference that describes how init scripts should normally work:\n\nhttp://refspecs.freestandards.org/LSB_3.1.0/LSB-Core-generic/LSB-Core-generic/iniscrptact.html\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12478734","id":"12478734","filename":"ZOOKEEPER-1061.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-10T21:05:42.752+0000","size":2411,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12478734/ZOOKEEPER-1061.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"32744","customfield_12312823":null,"summary":"Zookeeper stop fails if start called twice","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13031380","id":"13031380","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"body":"Here is a patch that handles the double start and fixes up some exit values.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-10T21:05:42.772+0000","updated":"2011-05-10T21:05:42.772+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13031393","id":"13031393","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12478734/ZOOKEEPER-1061.patch\n  against trunk revision 1099329.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/256//testReport/\nFindbugs warnings: https://builds.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/256//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/256//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-10T21:33:42.958+0000","updated":"2011-05-10T21:33:42.958+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13031401","id":"13031401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"body":"No unit tests are reasonably for these script-only changes.  Here is a manual\ntest.  Without the fix, we see this mal-behavior:\n\n{code}\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh start\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStarting zookeeper ... \nSTARTED\ntdunning@ted-desk:~/Apache/zookeeper$ sudo jps\n17610 QuorumPeerMain\n17646 Jps\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh start\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStarting zookeeper ... \nSTARTED\ntdunning@ted-desk:~/Apache/zookeeper$ sudo jps\n17685 Jps\n17610 QuorumPeerMain\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh stop\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStopping zookeeper ... \nkill: 160: No such process\n\nSTOPPED\ntdunning@ted-desk:~/Apache/zookeeper$ sudo jps\n17730 Jps\n17610 QuorumPeerMain\n{code}\n\nWith the fix, I get this.\n{code}\ntdunning@ted-desk:~/Apache/zookeeper$ patch < ZOOKEEPER-1061.patch \npatching file zkServer.sh\n\n# first start works\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh start\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStarting zookeeper ... STARTED\n\n# second start fails with good message\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh start\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStarting zookeeper ... already running as process 17928.\n\n# and this is persistent behavior\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh start\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStarting zookeeper ... already running as process 17928.\n\n# stop now works\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh stop\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStopping zookeeper ... STOPPED\n\n# repeated stop works correctly\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh stop\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStopping zookeeper ... error: could not find file /var/zookeeper/zookeeper_server.pid\n\n# and start works again\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh start\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStarting zookeeper ... STARTED\n\n# but can't be repeated\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh start\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStarting zookeeper ... already running as process 18155.\n\n# running without proper permissions gives a different error\ntdunning@ted-desk:~/Apache/zookeeper$ bin/zkServer.sh start\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStarting zookeeper ... bin/zkServer.sh: 169: cannot create /var/zookeeper/zookeeper_server.pid: Permission denied\nFAILED TO WRITE PID\ntdunning@ted-desk:~/Apache/zookeeper$ sudo bin/zkServer.sh stop\nJMX enabled by default\nUsing config: /etc/zookeeper/zoo.cfg\nStopping zookeeper ... STOPPED\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-10T21:46:29.314+0000","updated":"2011-05-10T21:46:29.314+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13032561","id":"13032561","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"thats good to have!\n\nlove this change though :) :\n\n{noformat}\n-dataDir=/export/crawlspace/mahadev/zookeeper/server1/data\n+dataDir=/home/tdunning/tmp\n{noformat}\n\nOther than that +1 for the change!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-12T18:19:05.921+0000","updated":"2011-05-12T18:19:05.921+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13032648","id":"13032648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"body":"Ouch.  Our internal review caught that after I pushed out the patch.\n\nI was kind of hoping nobody else would notice.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-12T20:25:25.438+0000","updated":"2011-05-12T20:25:25.438+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13033178","id":"13033178","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"body":"Any hope for a commit on this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","key":"tdunning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-13T18:24:20.194+0000","updated":"2011-05-13T18:24:20.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13033183","id":"13033183","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"ted, ill commit this tonight (latest over the weekend). Need to run some tests manually and will also fix the datadir conf change to point to just /tmp/zookeeper.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-13T18:30:41.345+0000","updated":"2011-05-13T18:30:41.345+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13034106","id":"13034106","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"I just pushed this with minor changes to conf/zoo_sample.cfg. \nThanks Ted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-16T17:12:48.400+0000","updated":"2011-05-16T17:12:48.400+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/13034704","id":"13034704","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in ZooKeeper-trunk #1185 (See [https://builds.apache.org/hudson/job/ZooKeeper-trunk/1185/])\n    ZOOKEEPER-1061. Zookeeper stop fails if start called twice. (Ted Dunning via mahadev)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-17T10:55:18.562+0000","updated":"2011-05-17T10:55:18.562+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12506765/comment/15949160","id":"15949160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkozkowski","name":"mkozkowski","key":"mkozkowski","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mark kozikowski","active":true,"timeZone":"Etc/UTC"},"body":"I believe there is a small error in the patch for the zookeeper start script.\nThe section in question relates to 'start'\n\n+        echo FAILED TO WRITE PID\n+        exit 1\n\nI would like to see the 'just started' zookeeper stopped if the pid file failed to write\nOtherwise, we lose the ability to stop it later, and we might have start issues again\nif we try to restart it.\n\nMark\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkozkowski","name":"mkozkowski","key":"mkozkowski","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mark kozikowski","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-30T14:27:23.455+0000","updated":"2017-03-30T14:27:23.455+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1061/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i05yuf:"}}