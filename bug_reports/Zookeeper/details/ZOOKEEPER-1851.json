{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12686229","self":"https://issues.apache.org/jira/rest/api/2/issue/12686229","key":"ZOOKEEPER-1851","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316644","id":"12316644","description":"Dynamic Reconfig, Remove Watches, Local Session","name":"3.5.0","archived":false,"released":true,"releaseDate":"2014-08-04"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-12-23T23:32:45.058+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Jul 19 11:24:16 UTC 2014","customfield_12310420":"365202","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_17864697304_*|*_1_*:*_1_*:*_74357_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-18T17:49:28.990+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1851/watchers","watchCount":6,"isWatching":false},"created":"2013-12-23T23:23:17.384+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":["patch"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316644","id":"12316644","description":"Dynamic Reconfig, Remove Watches, Local Session","name":"3.5.0","archived":false,"released":true,"releaseDate":"2014-08-04"}],"issuelinks":[{"id":"12380345","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12380345","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12531129","key":"ZOOKEEPER-1297","self":"https://issues.apache.org/jira/rest/api/2/issue/12531129","fields":{"summary":"Add stat information to create() call","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}},{"id":"12380344","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12380344","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12517954","key":"ZOOKEEPER-1147","self":"https://issues.apache.org/jira/rest/api/2/issue/12517954","fields":{"summary":"Add support for local sessions","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-07-19T11:24:16.887+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312379","id":"12312379","name":"quorum","description":"Quorum determination for ZooKeeper"}],"timeoriginalestimate":null,"description":"Recent changes to the Observer and Follower Request Processors switch on the request opcode, but create2 is left out. This leads to a condition where the create2 request is passed to the CommitProcessor, but the leader never gets the request, the CommitProcessor can't find a matching request, so the client gets disconnected.\n\nAdded tests as well.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12656415","id":"12656415","filename":"ZOOKEEPER-1851.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-07-18T02:04:33.635+0000","size":17205,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12656415/ZOOKEEPER-1851.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12653431","id":"12653431","filename":"ZOOKEEPER-1851.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-01T18:07:22.134+0000","size":17205,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12653431/ZOOKEEPER-1851.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12653240","id":"12653240","filename":"ZOOKEEPER-1851.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-30T21:21:14.414+0000","size":17181,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12653240/ZOOKEEPER-1851.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12620524","id":"12620524","filename":"ZOOKEEPER-1851.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-26T18:33:02.944+0000","size":15897,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12620524/ZOOKEEPER-1851.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12620284","id":"12620284","filename":"ZOOKEEPER-1851.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-23T23:26:44.833+0000","size":15943,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12620284/ZOOKEEPER-1851.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"365507","customfield_12312823":null,"summary":"Follower and Observer Request Processors Do Not Forward create2 Requests","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/13856015","id":"13856015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"diff --git a/src/java/main/org/apache/zookeeper/server/TraceFormatter.java b/src/java/main/org/apache/zookeeper/server/TraceFormatter.java\nindex 70a63d1..582383d 100644\n--- a/src/java/main/org/apache/zookeeper/server/TraceFormatter.java\n+++ b/src/java/main/org/apache/zookeeper/server/TraceFormatter.java\n@@ -35,6 +35,8 @@ public class TraceFormatter {\n             return \"notification\";\n         case OpCode.create:\n             return \"create\";\n+        case OpCode.create2:\n+            return \"create2\";\n         case OpCode.delete:\n             return \"delete\";\n         case OpCode.exists:\ndiff --git a/src/java/main/org/apache/zookeeper/server/quorum/CommitProcessor.java b/src/java/main/org/apache/zookeeper/server/quorum/CommitProcessor.java\nindex f45e871..04cb772 100644\n--- a/src/java/main/org/apache/zookeeper/server/quorum/CommitProcessor.java\n+++ b/src/java/main/org/apache/zookeeper/server/quorum/CommitProcessor.java\n@@ -129,6 +129,7 @@ public class CommitProcessor extends Thread implements RequestProcessor {\n     protected boolean needCommit(Request request) {\n         switch (request.type) {\n             case OpCode.create:\n+            case OpCode.create2:\n             case OpCode.delete:\n             case OpCode.setData:\n             case OpCode.reconfig:\ndiff --git a/src/java/main/org/apache/zookeeper/server/quorum/FollowerRequestProcessor.java b/src/java/main/org/apache/zookeeper/server/quorum/FollowerRequestProcessor.java\nindex 79b2b05..23cbb2b 100644\n--- a/src/java/main/org/apache/zookeeper/server/quorum/FollowerRequestProcessor.java\n+++ b/src/java/main/org/apache/zookeeper/server/quorum/FollowerRequestProcessor.java\n@@ -81,6 +81,7 @@ public class FollowerRequestProcessor extends Thread implements\n                     zks.getFollower().request(request);\n                     break;\n                 case OpCode.create:\n+                case OpCode.create2:\n                 case OpCode.delete:\n                 case OpCode.setData:\n                 case OpCode.reconfig:\ndiff --git a/src/java/main/org/apache/zookeeper/server/quorum/ObserverRequestProcessor.java b/src/java/main/org/apache/zookeeper/server/quorum/ObserverRequestProcessor.java\nindex a9857ca..ce421af 100644\n--- a/src/java/main/org/apache/zookeeper/server/quorum/ObserverRequestProcessor.java\n+++ b/src/java/main/org/apache/zookeeper/server/quorum/ObserverRequestProcessor.java\n@@ -90,6 +90,7 @@ public class ObserverRequestProcessor extends Thread implements\n                     zks.getObserver().request(request);\n                     break;\n                 case OpCode.create:\n+                case OpCode.create2:\n                 case OpCode.delete:\n                 case OpCode.setData:\n                 case OpCode.reconfig:\ndiff --git a/src/java/test/org/apache/zookeeper/server/quorum/QuorumRequestPipelineTest.java b/src/java/test/org/apache/zookeeper/server/quorum/QuorumRequestPipelineTest.java\nnew file mode 100644\nindex 0000000..0106cc9\n--- /dev/null\n+++ b/src/java/test/org/apache/zookeeper/server/quorum/QuorumRequestPipelineTest.java\n@@ -0,0 +1,173 @@\n+package org.apache.zookeeper.server.quorum;\n+\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.Set;\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+import org.junit.After;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+\n+import org.apache.zookeeper.AsyncCallback.VoidCallback;\n+import org.apache.zookeeper.CreateMode;\n+import org.apache.zookeeper.TestableZooKeeper;\n+import org.apache.zookeeper.ZooDefs.Ids;\n+import org.apache.zookeeper.data.Stat;\n+import org.apache.zookeeper.server.quorum.QuorumPeer.ServerState;\n+import org.apache.zookeeper.test.QuorumBase;\n+\n+@RunWith(Parameterized.class)\n+public class QuorumRequestPipelineTest extends QuorumBase {\n+  protected ServerState serverState;\n+  protected final CountDownLatch callComplete = new CountDownLatch(1);\n+  protected boolean complete = false;\n+  protected final static String PARENT_PATH = \"/foo\";\n+  protected final static Set<String> CHILDREN = new HashSet(Arrays.asList(\"1\", \"2\", \"3\"));\n+  protected final static String AUTH_PROVIDER = \"digest\";\n+  protected final static byte[] AUTH = \"hello\".getBytes();\n+  protected final static byte[] DATA = \"Hint Water\".getBytes();\n+\n+  protected TestableZooKeeper zkClient;\n+\n+  @Parameterized.Parameters\n+  public static Collection<Object[]> data() {\n+    return Arrays.asList(\n+        new Object[][] {\n+            {ServerState.LEADING},\n+            {ServerState.FOLLOWING},\n+            {ServerState.OBSERVING}});\n+  }\n+\n+  public QuorumRequestPipelineTest(ServerState state) {\n+    this.serverState = state;\n+  }\n+\n+  @Before\n+  public void setUp() throws Exception {\n+    CountdownWatcher clientWatch = new CountdownWatcher();\n+    super.setUp(true);\n+    zkClient = createClient(clientWatch, getPeersMatching(serverState));\n+    zkClient.addAuthInfo(AUTH_PROVIDER, AUTH);\n+    clientWatch.waitForConnected(CONNECTION_TIMEOUT);\n+  }\n+\n+  @After\n+  public void tearDown() throws Exception {\n+    zkClient.close();\n+    super.tearDown();\n+  }\n+\n+  private Stat create2EmptyNode(TestableZooKeeper zkClient, String path) throws Exception {\n+    Stat stat = new Stat();\n+    zkClient.create(path, null, Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT, stat);\n+    return stat;\n+  }\n+\n+  @Test\n+  public void testCreate() throws Exception {\n+    zkClient.create(PARENT_PATH, DATA, Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n+    Assert.assertArrayEquals(\n+        String.format(\"%s Node created (create) with expected value\", serverState),\n+        DATA,\n+        zkClient.getData(PARENT_PATH, false, null));\n+  }\n+\n+  @Test\n+  public void testCreate2() throws Exception {\n+    zkClient.create(PARENT_PATH, DATA, Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT, null);\n+    Assert.assertArrayEquals(\n+        String.format(\"%s Node created (create2) with expected value\", serverState),\n+        DATA,\n+        zkClient.getData(PARENT_PATH, false, null));\n+  }\n+\n+  @Test\n+  public void testDelete() throws Exception {\n+    create2EmptyNode(zkClient, PARENT_PATH);\n+    zkClient.delete(PARENT_PATH, -1);\n+    Assert.assertNull(\n+        String.format(\"%s Node no longer exists\", serverState),\n+        zkClient.exists(PARENT_PATH, false));\n+  }\n+\n+  @Test\n+  public void testExists() throws Exception {\n+    Stat stat = create2EmptyNode(zkClient, PARENT_PATH);\n+    Assert.assertEquals(\n+        String.format(\"%s Exists returns correct node stat\", serverState),\n+        stat,\n+        zkClient.exists(PARENT_PATH, false));\n+  }\n+\n+  @Test\n+  public void testSetAndGetData() throws Exception {\n+    create2EmptyNode(zkClient, PARENT_PATH);\n+    zkClient.setData(PARENT_PATH, DATA, -1);\n+    Assert.assertArrayEquals(\n+        String.format(\"%s Node updated with expected value\", serverState),\n+        DATA,\n+        zkClient.getData(PARENT_PATH, false, null));\n+  }\n+\n+  @Test\n+  public void testSetAndGetACL() throws Exception {\n+    create2EmptyNode(zkClient, PARENT_PATH);\n+    Assert.assertEquals(\n+        String.format(\"%s Node has open ACL\", serverState),\n+        Ids.OPEN_ACL_UNSAFE,\n+        zkClient.getACL(PARENT_PATH, new Stat()));\n+    zkClient.setACL(PARENT_PATH, Ids.READ_ACL_UNSAFE, -1);\n+    Assert.assertEquals(\n+        String.format(\"%s Node has world read-only ACL\", serverState),\n+        Ids.READ_ACL_UNSAFE,\n+        zkClient.getACL(PARENT_PATH, new Stat()));\n+  }\n+\n+  @Test\n+  public void testSetAndGetChildren() throws Exception {\n+    create2EmptyNode(zkClient, PARENT_PATH);\n+    for (String child : CHILDREN) {\n+      create2EmptyNode(zkClient, PARENT_PATH + \"/\" + child);\n+    }\n+    Assert.assertEquals(\n+        String.format(\"%s Parent has expected children\", serverState),\n+        CHILDREN,\n+        new HashSet(zkClient.getChildren(PARENT_PATH, false)));\n+  }\n+\n+  @Test\n+  public void testSetAndGetChildren2() throws Exception {\n+    create2EmptyNode(zkClient, PARENT_PATH);\n+    for (String child : CHILDREN) {\n+      create2EmptyNode(zkClient, PARENT_PATH + \"/\" + child);\n+    }\n+    Assert.assertEquals(\n+        String.format(\"%s Parent has expected children\", serverState),\n+        CHILDREN,\n+        new HashSet(zkClient.getChildren(PARENT_PATH, false, null)));\n+  }\n+\n+  @Test\n+  public void testSync() throws Exception {\n+    complete = false;\n+    create2EmptyNode(zkClient, PARENT_PATH);\n+    VoidCallback onSync = new VoidCallback() {\n+      @Override\n+      public void processResult(int rc, String path, Object ctx) {\n+        complete = true;\n+        callComplete.countDown();\n+      }\n+    };\n+    zkClient.sync(PARENT_PATH, onSync, null);\n+    callComplete.await(1, TimeUnit.SECONDS);\n+    Assert.assertTrue(\n+        String.format(\"%s Sync completed\", serverState),\n+        complete);\n+  }\n+}\ndiff --git a/src/java/test/org/apache/zookeeper/test/QuorumBase.java b/src/java/test/org/apache/zookeeper/test/QuorumBase.java\nindex c846c45..e32844f 100644\n--- a/src/java/test/org/apache/zookeeper/test/QuorumBase.java\n+++ b/src/java/test/org/apache/zookeeper/test/QuorumBase.java\n@@ -43,6 +43,8 @@ import org.junit.Test;\n public class QuorumBase extends ClientBase {\n     private static final Logger LOG = LoggerFactory.getLogger(QuorumBase.class);\n \n+    private static final String LOCALADDR = \"127.0.0.1\";\n+\n     File s1dir, s2dir, s3dir, s4dir, s5dir;\n     QuorumPeer s1, s2, s3, s4, s5;\n     protected int port1;\n@@ -136,29 +138,29 @@ public class QuorumBase extends ClientBase {\n         int syncLimit = 3;\n         HashMap<Long,QuorumServer> peers = new HashMap<Long,QuorumServer>();\n         peers.put(Long.valueOf(1), new QuorumServer(1, \n-                new InetSocketAddress(\"127.0.0.1\", port1 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE1 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient1),\n+                new InetSocketAddress(LOCALADDR, port1 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE1 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient1),\n                 LearnerType.PARTICIPANT));\n         peers.put(Long.valueOf(2), new QuorumServer(2, \n-                new InetSocketAddress(\"127.0.0.1\", port2 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE2 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient2),\n+                new InetSocketAddress(LOCALADDR, port2 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE2 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient2),\n                 LearnerType.PARTICIPANT));\n         peers.put(Long.valueOf(3), new QuorumServer(3, \n-                new InetSocketAddress(\"127.0.0.1\", port3 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE3 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient3),\n+                new InetSocketAddress(LOCALADDR, port3 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE3 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient3),\n                 LearnerType.PARTICIPANT));\n         peers.put(Long.valueOf(4), new QuorumServer(4, \n-                new InetSocketAddress(\"127.0.0.1\", port4 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE4 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient4),\n+                new InetSocketAddress(LOCALADDR, port4 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE4 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient4),\n                 LearnerType.PARTICIPANT));\n         peers.put(Long.valueOf(5), new QuorumServer(5, \n-                new InetSocketAddress(\"127.0.0.1\", port5 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE5 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient5),\n+                new InetSocketAddress(LOCALADDR, port5 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE5 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient5),\n                 LearnerType.PARTICIPANT));\n         \n         if (withObservers) {\n@@ -262,6 +264,17 @@ public class QuorumBase extends ClientBase {\n       return -1;\n     }\n \n+    public String getPeersMatching(ServerState state) {\n+      StringBuilder hosts = new StringBuilder();\n+      for (QuorumPeer p : getPeerList()) {\n+        if (p.getPeerState() == state) {\n+          hosts.append(String.format(\"%s:%d,\", LOCALADDR, p.getClientAddress().getPort()));\n+        }\n+      }\n+      LOG.info(\"getPeersMatching ports are {}\", hosts);\n+      return hosts.toString();\n+    }\n+\n     public ArrayList<QuorumPeer> getPeerList() {\n         ArrayList<QuorumPeer> peers = new ArrayList<QuorumPeer>();\n         peers.add(s1);\n@@ -290,29 +303,29 @@ public class QuorumBase extends ClientBase {\n             peers = new HashMap<Long,QuorumServer>();\n \n             peers.put(Long.valueOf(1), new QuorumServer(1, \n-                new InetSocketAddress(\"127.0.0.1\", port1 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE1 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient1),\n+                new InetSocketAddress(LOCALADDR, port1 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE1 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient1),\n                 LearnerType.PARTICIPANT));\n             peers.put(Long.valueOf(2), new QuorumServer(2, \n-                new InetSocketAddress(\"127.0.0.1\", port2 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE2 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient2),\n+                new InetSocketAddress(LOCALADDR, port2 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE2 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient2),\n                 LearnerType.PARTICIPANT));\n             peers.put(Long.valueOf(3), new QuorumServer(3, \n-                new InetSocketAddress(\"127.0.0.1\", port3 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE3 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient3),\n+                new InetSocketAddress(LOCALADDR, port3 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE3 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient3),\n                 LearnerType.PARTICIPANT));\n             peers.put(Long.valueOf(4), new QuorumServer(4, \n-                new InetSocketAddress(\"127.0.0.1\", port4 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE4 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient4),\n+                new InetSocketAddress(LOCALADDR, port4 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE4 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient4),\n                 LearnerType.PARTICIPANT));\n             peers.put(Long.valueOf(5), new QuorumServer(5, \n-                new InetSocketAddress(\"127.0.0.1\", port5 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portLE5 + 1000),\n-                new InetSocketAddress(\"127.0.0.1\", portClient5),\n+                new InetSocketAddress(LOCALADDR, port5 + 1000),\n+                new InetSocketAddress(LOCALADDR, portLE5 + 1000),\n+                new InetSocketAddress(LOCALADDR, portClient5),\n                 LearnerType.PARTICIPANT));\n         }\n         \n@@ -409,4 +422,9 @@ public class QuorumBase extends ClientBase {\n         CountdownWatcher watcher = new CountdownWatcher();\n         return createClient(watcher, hp);\n     }\n+\n+    protected TestableZooKeeper createClient(CountdownWatcher watcher, ServerState state)\n+        throws IOException, InterruptedException {\n+      return createClient(watcher, getPeersMatching(state));\n+    }\n }","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-23T23:24:31.730+0000","updated":"2013-12-23T23:24:31.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/13856019","id":"13856019","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12620284/ZOOKEEPER-1851.patch\n  against trunk revision 1552946.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 5 new or modified tests.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1861//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-12-23T23:32:45.058+0000","updated":"2013-12-23T23:32:45.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/13856989","id":"13856989","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Re-formatted. Apparently git diffs don't fly here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-26T18:33:02.949+0000","updated":"2013-12-26T18:33:02.949+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/13857011","id":"13857011","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12620524/ZOOKEEPER-1851.patch\n  against trunk revision 1552946.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 5 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1864//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1864//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1864//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-12-26T19:15:54.914+0000","updated":"2013-12-26T19:15:54.914+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/13881641","id":"13881641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thawan","name":"thawan","key":"thawan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thawan Kooburat","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the fix, this is my bad. I will take a look and commit it.  It is quite strange that none of the existing unit test catch this","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thawan","name":"thawan","key":"thawan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thawan Kooburat","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-01-25T03:43:00.336+0000","updated":"2014-01-25T03:43:00.336+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14043775","id":"14043775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"[~thawan], [~phunt], [~michim]: ping?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-25T17:21:16.095+0000","updated":"2014-06-25T17:21:16.095+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14043854","id":"14043854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12620524/ZOOKEEPER-1851.patch\n  against trunk revision 1605509.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 5 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2148//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2148//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2148//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-06-25T18:13:36.917+0000","updated":"2014-06-25T18:13:36.917+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14044455","id":"14044455","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi Chris Chen,\n\nNice test cases.\n\nJust few comments to improve  'QuorumRequestPipelineTest.java' test class.\n\n# Please add Apache License Header to it.\n# Indent should be four spaces per level, presently its with two spaces. Please refer [HowToContribute|https://cwiki.apache.org/confluence/display/ZOOKEEPER/HowToContribute]\n# Please use bigger value (30secs ?) allComplete.await(1, TimeUnit.SECONDS); to make it more reliable. If the h/w is slow still give the test a chance to pass.\n# Suggestion, please modify the HashSet usage by making it generic type HashSet<String>","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-06-26T08:22:48.134+0000","updated":"2014-06-26T08:22:48.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14048179","id":"14048179","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Updated tests, fixed formatting.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-30T21:21:14.431+0000","updated":"2014-06-30T21:21:14.431+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14048229","id":"14048229","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12653240/ZOOKEEPER-1851.patch\n  against trunk revision 1606841.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 5 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2166//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2166//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2166//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-06-30T22:04:38.588+0000","updated":"2014-06-30T22:04:38.588+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14048613","id":"14048613","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"body":"Chris Chen Thanks for the update, now it looks better.\n\nFor the Point-4, I was thinking to make HashSet generic. Following places we could use like,\n{code} \n protected final static HashSet<String> CHILDREN = new HashSet<String>(Arrays.asList(\"1\", \"2\", \"3\"));\n\n new HashSet<String>(zkClient.getChildren(PARENT_PATH, false))\n\n new HashSet<String>(zkClient.getChildren(PARENT_PATH, false, null))\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-07-01T08:01:44.113+0000","updated":"2014-07-01T08:01:44.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14049134","id":"14049134","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Change HashSet creation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-01T18:07:22.141+0000","updated":"2014-07-01T18:07:22.141+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14049241","id":"14049241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12653431/ZOOKEEPER-1851.patch\n  against trunk revision 1606841.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 5 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2168//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2168//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2168//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-01T19:49:23.840+0000","updated":"2014-07-01T19:49:23.840+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14052010","id":"14052010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"[~rakeshr] anything else you need?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cchen","name":"cchen","key":"cchen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cchen&avatarId=24995","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cchen&avatarId=24995","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cchen&avatarId=24995","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cchen&avatarId=24995"},"displayName":"Chris Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-03T23:45:21.392+0000","updated":"2014-07-03T23:45:21.392+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14052089","id":"14052089","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"body":"Thanks Chris Chen, +1 latest patch looks nice.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-07-04T02:03:53.625+0000","updated":"2014-07-04T02:03:53.625+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14065157","id":"14065157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi All, I'd like to get one more +1 to commit given the criticality of the bug. Anyone have a chance to see this. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-07-17T17:17:26.322+0000","updated":"2014-07-17T17:17:26.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14065223","id":"14065223","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"+1, patch lgtm plus we've had it in prod internally for quite some time. Thanks for the review, [~rakeshr].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-17T17:50:38.823+0000","updated":"2014-07-17T17:50:38.823+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14065899","id":"14065899","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"body":"Thanks [~rgs] for the feedback.\n\nAttaching the patch again to get latest QA report. I'll commit if there is no findbug problems related to this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-07-18T02:04:33.641+0000","updated":"2014-07-18T02:04:33.641+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14065937","id":"14065937","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12656415/ZOOKEEPER-1851.patch\n  against trunk revision 1611516.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 5 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    -1 findbugs.  The patch appears to introduce 87 new Findbugs (version 2.0.3) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2197//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2197//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2197//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-18T02:48:25.550+0000","updated":"2014-07-18T02:48:25.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14066622","id":"14066622","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"body":"Thanks [~cchen] for the patch.\n\nCommitted to trunk : http://svn.apache.org/viewvc?view=revision&revision=1611732","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rakeshr","name":"rakeshr","key":"rakeshr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rakeshr&avatarId=29267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rakeshr&avatarId=29267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rakeshr&avatarId=29267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rakeshr&avatarId=29267"},"displayName":"Rakesh R","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-07-18T17:50:47.503+0000","updated":"2014-07-18T17:50:47.503+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686229/comment/14067485","id":"14067485","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in ZooKeeper-trunk #2378 (See [https://builds.apache.org/job/ZooKeeper-trunk/2378/])\nZOOKEEPER-1851. Follower and Observer Request Processors Do Not Forward create2 Requests (Chris Chen via rakeshr) (rakeshr: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1611732)\n* /zookeeper/trunk/CHANGES.txt\n* /zookeeper/trunk/src/java/main/org/apache/zookeeper/server/TraceFormatter.java\n* /zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/CommitProcessor.java\n* /zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/FollowerRequestProcessor.java\n* /zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/ObserverRequestProcessor.java\n* /zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/QuorumRequestPipelineTest.java\n* /zookeeper/trunk/src/java/test/org/apache/zookeeper/test/QuorumBase.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-19T11:24:16.887+0000","updated":"2014-07-19T11:24:16.887+0000"}],"maxResults":21,"total":21,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1851/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1qy5j:"}}