{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12410220","self":"https://issues.apache.org/jira/rest/api/2/issue/12410220","key":"ZOOKEEPER-251","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313381","id":"12313381","description":"Focus on system test, operations documentation, and begin multi-tenancy investigation.","name":"3.1.0","archived":false,"released":true,"releaseDate":"2009-02-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2008-12-08T21:35:03.375+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Dec 11 11:06:41 UTC 2008","customfield_12310420":"47945","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_91729874_*|*_1_*:*_1_*:*_82676089_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_5613786508","customfield_12312321":null,"resolutiondate":"2008-12-10T21:55:46.963+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-251/watchers","watchCount":1,"isWatching":false},"created":"2008-12-08T21:29:01.013+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313216","id":"12313216","description":"","name":"3.0.0","archived":false,"released":true,"releaseDate":"2008-10-27"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313500","id":"12313500","description":"Fix release against 3.0 branch","name":"3.0.1","archived":false,"released":true,"releaseDate":"2008-12-04"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-02-13T21:18:53.470+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."}],"timeoriginalestimate":null,"description":"See the following thread for the original report:\nhttp://mail-archives.apache.org/mod_mbox/hadoop-zookeeper-user/200812.mbox/browser\nSteps to reproduce:\n1) Start a replicated zookeeper service consisting of 3 zookeeper (3.0.1) servers all running on the same host (of course, all using their own ports and log directories)\n2) Create one znode in this ensemble (using the zookeeper client console, I issued 'create /node1 node1data').\n3) Stop, then restart a single zookeeper server; moving onto the next one a few seconds later. \n4) Go back to 3. After 4-5 iterations, the following should occur, with the failing server exiting:\njava.lang.NullPointerException\n        at \norg.apache.zookeeper.server.persistence.FileTxnLog$FileTxnIterator.next(FileTxnLog.java:447)\n        at \norg.apache.zookeeper.server.persistence.FileTxnLog$FileTxnIterator.init(FileTxnLog.java:358)\n        at \norg.apache.zookeeper.server.persistence.FileTxnLog$FileTxnIterator.<init>(FileTxnLog.java:333)\n        at \norg.apache.zookeeper.server.persistence.FileTxnLog.read(FileTxnLog.java:250)\n        at \norg.apache.zookeeper.server.persistence.FileTxnSnapLog.restore(FileTxnSnapLog.java:102)\n        at \norg.apache.zookeeper.server.ZooKeeperServer.loadData(ZooKeeperServer.java:183)\n        at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:245)\n        at \norg.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:421)\n2008-12-08 14:14:24,880 - INFO  \n[QuorumPeer:/0:0:0:0:0:0:0:0:2183:Leader@336] - Shutdown called\njava.lang.Exception: shutdown Leader! reason: Forcing shutdown\n        at \norg.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:336)\n        at \norg.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:427)\nException in thread \"QuorumPeer:/0:0:0:0:0:0:0:0:2183\" \njava.lang.NullPointerException\n        at \norg.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:339)\n        at \norg.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:427)\n\nThe inputStream field is null, apparently because next is being called \nat line 358 even after next returns false. Having very little knowledge \nabout the implementation, I don't know if the existence of hdr.getZxid() \n >= zxid is supposed to be an invariant across all invocations of the \nserver; however the following change to FileTxnLog.java seems to make \nthe problem go away.\ndiff FileTxnLog.java /tmp/FileTxnLog.java\n358c358,359\n<                 next();\n---\n >               if (!next())\n >                   return;\n447c448,450\n<                 inputStream.close();\n---\n >               if (inputStream != null) {\n >                   inputStream.close();\n >               }\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12395675","id":"12395675","filename":"ZOOKEEPER-251.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T20:26:42.141+0000","size":5589,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12395675/ZOOKEEPER-251.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12395608","id":"12395608","filename":"ZOOKEEPER-251.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T00:24:06.042+0000","size":877,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12395608/ZOOKEEPER-251.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"33165","customfield_12312823":null,"summary":"NullPointerException stopping and starting Zookeeper servers","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodjohnson","name":"vinodjohnson","key":"vinodjohnson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Vinod Johnson","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodjohnson","name":"vinodjohnson","key":"vinodjohnson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Vinod Johnson","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Tested with JDK 1.5, Solaris, but I suspect it is not relevant in this case.","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12654583","id":"12654583","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks to me like the issue is in the while loop:\n\n            goToNextLog();\n            if (!next())\n                return;\n            while (hdr.getZxid() < zxid) {\n                next();  // ISSUE IS HERE\n            }\n\nwe aren't checking the next return value, we will call next again, which will fail if next previously returned false (ia will not be null but inputstream might be)\n\nThe question in my mind is what Thomas asked - why is hdr zxid < zxid and next returning false? Is this ok, or signalling a problem elsewhere?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-12-08T21:35:03.375+0000","updated":"2008-12-08T21:35:03.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12654617","id":"12654617","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"i found the problem. The problem occurs when the snapshots are well ahead of the logs. That would be the case when the server is brought up and down and there are not trasactions on it. So there are no new logs to be applied to the snapshot. This is due to the bug that\n{noformat}\nwhile (hdr.getZxid() < zxid) {\n               next()) \n{noformat}\ndoes not check the value of next() \n\nand also \n\nnext() itself does not keep ia and inputstream syncrhonous.\n\n{noformat}\n  } catch (EOFException e) {\n                LOG.info(\"EOF exception \", e);\n                inputStream.close();\n                inputStream = null;\n                // thsi means that the file has ended \n                // we shoud go to the next file\n{noformat}\n\nshould be \n\n{noformat}\n  } catch (EOFException e) {\n                LOG.info(\"EOF exception \", e);\n                inputStream.close();\n                inputStream = null;\n                ia = null;\n                // thsi means that the file has ended \n                // we shoud go to the next file\n{noformat}\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-08T22:45:13.939+0000","updated":"2008-12-08T22:45:13.939+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12654618","id":"12654618","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"ill file a patch shortly with a testcase.... thanks thomas","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-08T22:45:50.616+0000","updated":"2008-12-08T22:45:50.616+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12654627","id":"12654627","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"also  this does not seem to happen in a quorum... i think i know the reason why ... but will update the jira with my findings... ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-08T23:02:26.214+0000","updated":"2008-12-08T23:02:26.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12654664","id":"12654664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"can you try this patch out thomas?\nadding a test might be a little hard since the situation arises after switching from quorum to standalone. let me try and see if I can reproduce this as a junit test... ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T00:24:06.082+0000","updated":"2008-12-09T00:24:06.082+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12654811","id":"12654811","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodjohnson","name":"vinodjohnson","key":"vinodjohnson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Vinod Johnson","active":true,"timeZone":"Etc/UTC"},"body":"Thank you. Post patch, I don't see the exceptions. To clear up confusion on my part, when you say \"the situation arises after switching from quorum to standalone\", you are referring to the single server that is stopped and started, and not the ensemble as a whole? I believe that throughout the test, I was maintaining quorum by having at least 2 out of 3 servers running and communicating to each other.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodjohnson","name":"vinodjohnson","key":"vinodjohnson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Vinod Johnson","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T14:46:41.334+0000","updated":"2008-12-09T14:47:16.449+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12654870","id":"12654870","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"sorry i must have been confused. I though the servers were started as quorum and then one of them pulled out of quorum and started as a standalone server. This will actually create the problem quote easily. The 3 quorum servers and killing one at a time is another way to do it (now that i realize it).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T17:54:04.337+0000","updated":"2008-12-09T17:54:04.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12654947","id":"12654947","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"this patch adds a test. IT was difficult to create a test that can recreate the problem. The attaches test sometimes fails without the patch but passes the tests with the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T20:26:42.198+0000","updated":"2008-12-09T20:26:42.198+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12655379","id":"12655379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 - looks good, tests pass.\n\nCommitted revision 725454.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-12-10T21:55:46.959+0000","updated":"2008-12-10T21:55:46.959+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410220/comment/12655603","id":"12655603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in ZooKeeper-trunk #169 (See [http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/169/])\n    . NullPointerException stopping and starting Zookeeper servers\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-11T11:06:41.281+0000","updated":"2008-12-11T11:06:41.281+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-251/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i061fz:"}}