{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12462196","self":"https://issues.apache.org/jira/rest/api/2/issue/12462196","key":"ZOOKEEPER-742","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314846","id":"12314846","description":"Fix release against 3.3 branch","name":"3.3.1","archived":false,"released":true,"releaseDate":"2010-05-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314469","id":"12314469","description":"Kerberos client auth, multi support, deb/rpm pkging.","name":"3.4.0","archived":false,"released":true,"releaseDate":"2011-11-22"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-04-16T00:54:34.283+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Apr 22 06:44:04 UTC 2010","customfield_12310420":"47623","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_544976970_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-04-22T06:44:05.032+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-742/watchers","watchCount":0,"isWatching":false},"created":"2010-04-15T23:21:08.062+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314335","id":"12314335","description":"Fix release against 3.2 branch","name":"3.2.2","archived":false,"released":true,"releaseDate":"2009-12-14"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313976","id":"12313976","description":"Improved manageability and simplified client development process.","name":"3.3.0","archived":false,"released":true,"releaseDate":"2010-03-25"}],"issuelinks":[{"id":"12331531","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12331531","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"inwardIssue":{"id":"12443588","key":"ZOOKEEPER-631","self":"https://issues.apache.org/jira/rest/api/2/issue/12443588","fields":{"summary":"zkpython's C code could do with a style clean-up","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-11-23T19:22:47.255+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312380","id":"12312380","name":"c client","description":"The c client interface to ZooKeeper"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312700","id":"12312700","name":"contrib"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312860","id":"12312860","name":"contrib-bindings","description":"Client bindings contained within src/contrib"}],"timeoriginalestimate":null,"description":"On write operations, getting:\n\nFatal Python error: deallocating None\nAborted\n\nThis error happens on write operations only.  Here's the backtrace:\n\nFatal Python error: deallocating None\n\nProgram received signal SIGABRT, Aborted.\n0x000000383fc30215 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x000000383fc30215 in raise () from /lib64/libc.so.6\n#1  0x000000383fc31cc0 in abort () from /lib64/libc.so.6\n#2  0x00002adbd0be8189 in Py_FatalError () from /usr/lib64/libpython2.4.so.1.0\n#3  0x00002adbd0bc7493 in PyEval_EvalFrame () from /usr/lib64/libpython2.4.so.1.0\n#4  0x00002adbd0bcab66 in PyEval_EvalFrame () from /usr/lib64/libpython2.4.so.1.0\n#5  0x00002adbd0bcbfe5 in PyEval_EvalCodeEx () from /usr/lib64/libpython2.4.so.1.0\n#6  0x00002adbd0bcc032 in PyEval_EvalCode () from /usr/lib64/libpython2.4.so.1.0\n#7  0x00002adbd0be8729 in ?? () from /usr/lib64/libpython2.4.so.1.0\n#8  0x00002adbd0be9bd8 in PyRun_SimpleFileExFlags () from /usr/lib64/libpython2.4.so.1.0\n#9  0x00002adbd0bf000d in Py_Main () from /usr/lib64/libpython2.4.so.1.0\n#10 0x000000383fc1d974 in __libc_start_main () from /lib64/libc.so.6\n#11 0x0000000000400629 in _start ()\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441909","id":"12441909","filename":"ASF.LICENSE.NOT.GRANTED--commands.py","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T02:01:18.932+0000","size":1713,"mimeType":"text/x-python-script","content":"https://issues.apache.org/jira/secure/attachment/12441909/ASF.LICENSE.NOT.GRANTED--commands.py"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441902","id":"12441902","filename":"ASF.LICENSE.NOT.GRANTED--foo.p","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T01:05:54.382+0000","size":572,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12441902/ASF.LICENSE.NOT.GRANTED--foo.p"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441990","id":"12441990","filename":"ASF.LICENSE.NOT.GRANTED--ZOOKEEPER-742.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-16T18:36:05.619+0000","size":6780,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12441990/ASF.LICENSE.NOT.GRANTED--ZOOKEEPER-742.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441918","id":"12441918","filename":"ASF.LICENSE.NOT.GRANTED--ZOOKEEPER-742.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-16T04:48:59.852+0000","size":2173,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12441918/ASF.LICENSE.NOT.GRANTED--ZOOKEEPER-742.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"32892","customfield_12312823":null,"summary":"Deallocatng None on writes","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Redhat Enterprise 5.4 (python 2.4.3), Mac OS X 10.5.8 (python 2.5.1)","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857608","id":"12857608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"body":"Here's an strace of what's happening when we get the error:\n\npid  5468] futex(0x2aaaac00f7ac, FUTEX_CMP_REQUEUE_PRIVATE, 1, 2147483647, 0x2aaaac00f7d8, 2) = 1\n[pid  5467] <... futex resumed> )       = 0\n[pid  5468] poll([{fd=3, events=POLLIN}, {fd=5, events=POLLIN}], 2, 3332 <unfinished ...>\n[pid  5467] futex(0x2aaaac00f7d8, FUTEX_WAKE_PRIVATE, 1) = 0\n[pid  5467] write(1, \"('/audubon/group/datacenter/sjc1\"..., 68('/audubon/group/datacenter/sjc1/members/sjc1a250.twitter.com', '')\n) = 68\n[pid  5467] select(0, NULL, NULL, NULL, {1, 0}) = 0 (Timeout)\n[pid  5467] write(4, \"\\0\", 1)           = 1\n[pid  5468] <... poll resumed> )        = 1 ([{fd=3, revents=POLLIN}])\n[pid  5468] read(3,  <unfinished ...>\n[pid  5467] futex(0x2aaaac00f7ac, FUTEX_WAIT_PRIVATE, 1, NULL <unfinished ...>\n[pid  5468] <... read resumed> \"\\0\", 128) = 1\n[pid  5468] poll([{fd=3, events=POLLIN}, {fd=5, events=POLLIN|POLLOUT}], 2, 2331) = 1 ([{fd=5, revents=POLLOUT}])\n[pid  5468] sendto(5, \"\\0\\0\\0H\", 4, 0, NULL, 0) = 4\n[pid  5468] sendto(5, \"K\\307\\272\\300\\0\\0\\0\\3\\0\\0\\0;/audubon/group/datac\"..., 72, 0, NULL, 0) = 72\n[pid  5468] poll([{fd=3, events=POLLIN}, {fd=5, events=POLLIN}], 2, 3333) = 1 ([{fd=5, revents=POLLIN}])\n[pid  5468] recvfrom(5, \"\\0\\0\\0\\20\", 4, 0, NULL, NULL) = 4\n[pid  5468] recvfrom(5, \"K\\307\\272\\300\\0\\0\\0\\17\\0\\2\\244`\\377\\377\\377\\233\", 16, 0, NULL, NULL) = 16\n[pid  5468] futex(0x2aaaac00f7ac, FUTEX_CMP_REQUEUE_PRIVATE, 1, 2147483647, 0x2aaaac00f7d8, 2) = 1\n[pid  5467] <... futex resumed> )       = 0\n[pid  5468] poll([{fd=3, events=POLLIN}, {fd=5, events=POLLIN}], 2, 3333 <unfinished ...>\n[pid  5467] futex(0x2aaaac00f7d8, FUTEX_WAKE_PRIVATE, 1) = 0\n[pid  5467] write(2, \"Fatal Python error: deallocating\"..., 38Fatal Python error: deallocating None\n) = 38\n[pid  5467] rt_sigprocmask(SIG_UNBLOCK, [ABRT], NULL, 8) = 0\n[pid  5467] tgkill(5467, 5467, SIGABRT) = 0\n[pid  5467] --- SIGABRT (Aborted) @ 0 (0) ---\nupeek: ptrace(PTRACE_PEEKUSER,5468,120,0): No such process\nProcess 5468 detached\n[pid  5469] +++ killed by SIGABRT +++\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T00:08:11.843+0000","updated":"2010-04-16T00:08:11.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857628","id":"12857628","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Josh - can you share the portion of your script that is causing the problem?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-16T00:54:34.283+0000","updated":"2010-04-16T00:54:34.283+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857631","id":"12857631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"body":"Here's the script it its entirety.  I tried adding the sleep to see if it mattered how quickly the writes were occurring.\n\n#!/usr/bin/env python\n\nfrom zktools.commands import Commands\nimport time\n\ncmd = Commands()\n\nfor i in cmd.listNode('/audubon/group'):\n  group_type = ''\n  group_members = []\n  group_name = i.split('/')[-1]\n  try:\n    group_type = cmd.catNode('%s/type' % i)[0]\n    group_members = [ h.split('/')[-1] for h in cmd.listNode('%s/members' % i) ]\n    for member in group_members:\n      value = cmd.setNode('/audubon/group/%s/%s/members/%s' % (group_type, group_name, member), '')\n      print value\n      time.sleep(1)\n  except:\n    print \"group name: %s isn't happy\" % group_name\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T01:05:05.861+0000","updated":"2010-04-16T01:05:05.861+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857632","id":"12857632","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"body":"attached the file since pasting lost the formatting","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T01:05:54.426+0000","updated":"2010-04-16T01:05:54.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857638","id":"12857638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks very much for this - any chance you can share Commands as well, so that I can see the actual zookeeper API calls that are being made? Let me know if you're not comfortable posting it publicly. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-16T01:26:34.064+0000","updated":"2010-04-16T01:26:34.064+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857648","id":"12857648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"body":"Attached commands.py -- nothing private in the file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T02:01:18.962+0000","updated":"2010-04-16T02:01:18.962+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857667","id":"12857667","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"body":"The bad news is I can't recreate the error, but the good news is that there are only four call sites where this could be happening (the error is to decrease a reference to Py_None, which is a bad idea). \n\nI can have a patch for you to try up here shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-16T04:37:02.054+0000","updated":"2010-04-16T04:37:02.054+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857668","id":"12857668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"body":"Josh - are you able to apply this patch and try it out? It's not ready to be committed, but it adds a bit of defensive programming that should hopefully fix the error you're seeing. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-16T04:48:59.887+0000","updated":"2010-04-16T04:48:59.887+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857743","id":"12857743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"body":"#0  0x000000383fc30215 in raise () from /lib64/libc.so.6\n#1  0x000000383fc31cc0 in abort () from /lib64/libc.so.6\n#2  0x00002b55a4441189 in Py_FatalError () from /usr/lib64/libpython2.4.so.1.0\n#3  0x00002b55a4420493 in PyEval_EvalFrame ()\n   from /usr/lib64/libpython2.4.so.1.0\n#4  0x00002b55a4423b66 in PyEval_EvalFrame ()\n   from /usr/lib64/libpython2.4.so.1.0\n#5  0x00002b55a4424fe5 in PyEval_EvalCodeEx ()\n   from /usr/lib64/libpython2.4.so.1.0\n#6  0x00002b55a4425032 in PyEval_EvalCode ()\n   from /usr/lib64/libpython2.4.so.1.0\n#7  0x00002b55a4441729 in ?? () from /usr/lib64/libpython2.4.so.1.0\n#8  0x00002b55a4442bd8 in PyRun_SimpleFileExFlags ()\n   from /usr/lib64/libpython2.4.so.1.0\n#9  0x00002b55a444900d in Py_Main () from /usr/lib64/libpython2.4.so.1.0\n#10 0x000000383fc1d974 in __libc_start_main () from /lib64/libc.so.6\n#11 0x0000000000400629 in _start ()\n(gdb) \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T07:29:26.267+0000","updated":"2010-04-16T07:29:26.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857744","id":"12857744","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"body":"  4088] futex(0xdcc3e78, FUTEX_WAKE_PRIVATE, 1) = 0\n[pid  4088] write(1, \"('/audubon/group/pod/twitter1/me\"..., 65('/audubon/group/pod/twitter1/members/sjc1a003.twitter.com', '')\n) = 65\n[pid  4088] write(4, \"\\0\", 1)           = 1\n[pid  4089] <... poll resumed> )        = 1 ([{fd=3, revents=POLLIN}])\n[pid  4088] futex(0xdcc3e4c, FUTEX_WAIT_PRIVATE, 1, NULL <unfinished ...>\n[pid  4089] read(3, \"\\0\", 128)          = 1\n[pid  4089] poll([{fd=3, events=POLLIN}, {fd=5, events=POLLIN|POLLOUT}], 2, 3332) = 1 ([{fd=5, revents=POLLOUT}])\n[pid  4089] sendto(5, \"\\0\\0\\0E\", 4, 0, NULL, 0) = 4\n[pid  4089] sendto(5, \"K\\310=\\314\\0\\0\\0\\3\\0\\0\\0008/audubon/group/pod/t\"..., 69, 0, NULL, 0) = 69\n[pid  4089] poll([{fd=3, events=POLLIN}, {fd=5, events=POLLIN}], 2, 3333) = 1 ([{fd=5, revents=POLLIN}])\n[pid  4089] recvfrom(5, \"\\0\\0\\0\\20\", 4, 0, NULL, NULL) = 4\n[pid  4089] recvfrom(5, \"K\\310=\\314\\377\\377\\377\\377\\377\\377\\377\\377\\377\\377\\377\\233\", 16, 0, NULL, NULL) = 16\n[pid  4089] futex(0xdcc3e4c, FUTEX_CMP_REQUEUE_PRIVATE, 1, 2147483647, 0xdcc3e78, 2) = 1\n[pid  4088] <... futex resumed> )       = 0\n[pid  4089] poll([{fd=3, events=POLLIN}, {fd=5, events=POLLIN}], 2, 3333 <unfinished ...>\n[pid  4088] futex(0xdcc3e78, FUTEX_WAKE_PRIVATE, 1) = 0\n[pid  4088] write(2, \"Fatal Python error: deallocating\"..., 38Fatal Python error: deallocating None\n) = 38\n[pid  4088] rt_sigprocmask(SIG_UNBLOCK, [ABRT], NULL, 8) = 0\n[pid  4088] tgkill(4088, 4088, SIGABRT) = 0\n[pid  4088] --- SIGABRT (Aborted) @ 0 (0) ---\nupeek: ptrace(PTRACE_PEEKUSER,4089,120,0): No such process\nProcess 4089 detached\n[pid  4090] +++ killed by SIGABRT +++\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T07:30:50.808+0000","updated":"2010-04-16T07:30:50.808+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857745","id":"12857745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"body":"Added output from the latest attempts with the patched file","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T07:31:20.834+0000","updated":"2010-04-16T07:31:20.834+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857926","id":"12857926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"body":"This patch does a better job of handling references to Py_None - let me know if this helps.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-16T18:36:05.667+0000","updated":"2010-04-16T18:36:05.667+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12857947","id":"12857947","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS!  Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jfray","name":"jfray","key":"jfray","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Josh Fraser","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-16T19:27:42.620+0000","updated":"2010-04-16T19:27:42.620+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12858064","id":"12858064","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch to ZOOKEEPER-631 should fix this issue - when that is committed, we can close out this ticket. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-17T01:01:49.678+0000","updated":"2010-04-17T01:01:49.678+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12462196/comment/12859683","id":"12859683","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Closing issue as ZOOKEEPER-631 has landed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-22T06:44:04.999+0000","updated":"2010-04-22T06:44:04.999+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-742/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i05zrb:"}}