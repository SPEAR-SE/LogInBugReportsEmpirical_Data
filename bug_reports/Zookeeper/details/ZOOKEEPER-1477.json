{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12558999","self":"https://issues.apache.org/jira/rest/api/2/issue/12558999","key":"ZOOKEEPER-1477","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2012-06-04T22:18:07.047+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Aug 31 18:11:32 UTC 2013","customfield_12310420":"242222","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_39392353576_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-08-31T18:11:32.819+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1477/watchers","watchCount":20,"isWatching":false},"created":"2012-06-01T19:52:19.280+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319288","id":"12319288","description":"Fix release against 3.4 branch","name":"3.4.3","archived":false,"released":true,"releaseDate":"2012-02-13"}],"issuelinks":[{"id":"12358262","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12358262","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12609272","key":"ZOOKEEPER-1550","self":"https://issues.apache.org/jira/rest/api/2/issue/12609272","fields":{"summary":"ZooKeeperSaslClient does not finish anonymous login on OpenJDK","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12358209","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12358209","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12609096","key":"GIRAPH-344","self":"https://issues.apache.org/jira/rest/api/2/issue/12609096","fields":{"summary":"mvn test fails with java 1.7","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-10-08T16:10:18.820+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312427","id":"12312427","name":"tests","description":"For issues with test cases"}],"timeoriginalestimate":null,"description":"I downloaded ZK 3.4.3 sources and ran {{ant test}}. Many of the tests failed, including ZooKeeperTest. A common symptom was spurious {{ConnectionLossException}}:\n\n{code}\n2012-06-01 12:01:23,420 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testDeleteRecursiveAsync\norg.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /\n        at org.apache.zookeeper.KeeperException.create(KeeperException.java:99)\n        at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)\n        at org.apache.zookeeper.ZooKeeper.setData(ZooKeeper.java:1246)\n        at org.apache.zookeeper.ZooKeeperTest.testDeleteRecursiveAsync(ZooKeeperTest.java:77)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n... (snipped)\n{code}\n\nAs background, I was actually investigating some non-deterministic failures when using Netflix's Curator with Java 7 (see https://github.com/Netflix/curator/issues/79). After a while, I figured I should establish a clean ZK baseline first and realized it is actually a ZK issue, not a Curator issue.\n\nWe are trying to migrate to Java 7 but this is a blocking issue for us right now.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12546925","id":"12546925","filename":"with-ZK-1550.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T22:37:54.026+0000","size":13902,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12546925/with-ZK-1550.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"12769","customfield_12312823":null,"summary":"Test failures with Java 7 on Mac OS X","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Mac OS X Lion (10.7.4)\nJava version:\njava version \"1.7.0_04\"\nJava(TM) SE Runtime Environment (build 1.7.0_04-b21)\nJava HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode)","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13288958","id":"13288958","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"ZK runs pretty cleanly against java7 on Apache jenkins:\nhttps://builds.apache.org//view/S-Z/view/ZooKeeper/job/ZooKeeper-trunk-jdk7/\n\nWhat's different about your environment? Perhaps you don't have sufficient resources to run (e.g. overloaded system? over virtualized, etc...)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-04T22:18:07.047+0000","updated":"2012-06-04T22:18:07.047+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13288980","id":"13288980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"Patrick: I believe the jenkins job runs on Linux. I'm running Java7 on Mac natively. Resources are not an issue: my machine as 8G of memory, runs on SSDs and there's no virtualization in the picture.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-04T23:02:36.968+0000","updated":"2012-06-04T23:02:36.968+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13288981","id":"13288981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Ah. Likely java7 on mac then. I don't know if anyone's tried that (I run linux on my laptop for most jdk7 local tests). You'd have to look at the logs and such to nail down more about that's going wrong.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-04T23:05:55.513+0000","updated":"2012-06-04T23:05:55.513+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13289531","id":"13289531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=carterventures","name":"carterventures","key":"carterventures","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Carter","active":true,"timeZone":"Etc/UTC"},"body":"I've experienced this as well, as have a few other folks who use Curator.  Will attempt to drag more out of the logs, if possible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=carterventures","name":"carterventures","key":"carterventures","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Carter","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-05T16:58:04.707+0000","updated":"2012-06-05T16:58:04.707+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13291099","id":"13291099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lindner","name":"lindner","key":"lindner","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott Lindner","active":true,"timeZone":"Etc/UTC"},"body":"I have also hit this and it's not something global across all Macs.  I added details on the curator thread (https://github.com/Netflix/curator/issues/47#issuecomment-4706209) and admittedly this makes no sense to me but this seems to fail on all Mac laptops we have tried.  However when I attempt this on my iMac it passes.  Both environments are running the same MacOS and java version as well.\n\nDiwaker / Chris: what are your experiences?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lindner","name":"lindner","key":"lindner","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott Lindner","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-07T16:13:02.564+0000","updated":"2012-06-07T16:13:02.564+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13291911","id":"13291911","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"Scott: I've only tested this on my Mac and it happens fairly reliably. We have a few other Mac users who can also hit this.\n\nOn a related note, one of my colleagues also ran into some failures on Linux, but it's not clear if the root cause was the same.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-08T18:53:06.832+0000","updated":"2012-06-08T18:53:06.832+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13293875","id":"13293875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=carterventures","name":"carterventures","key":"carterventures","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Carter","active":true,"timeZone":"Etc/UTC"},"body":"I don't have access to any Macs other than my Macbook Pro, so can't comment on cross-hardware.  However, for awhile I was able to get an OpenJDK build to work properly under the conditions I was testing:\n\nopenjdk version \"1.7.0-b222\"\nOpenJDK Runtime Environment (build 1.7.0-b222-20111220)\nOpenJDK 64-Bit Server VM (build 21.0-b17, mixed mode)\n\nAll other Oracle and OpenJDK environments I've tried have failed.\n\nI'm running Lion 10.7.3 (had issues under 10.7.2 as well).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=carterventures","name":"carterventures","key":"carterventures","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Carter","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-12T19:45:16.122+0000","updated":"2012-06-12T19:45:16.122+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13295923","id":"13295923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"FWIW I upgraded to JDK 7u5 (from Oracle) and still have the exact same problem. Here are some of the tests that failed (within ZooKeeperTest):\n\n{noformat}\n2012-06-15 13:59:58,654 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testDeleteRecursive\n2012-06-15 13:59:59,852 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testDeleteRecursive\n2012-06-15 14:00:19,984 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testDeleteRecursiveAsync\n2012-06-15 14:00:21,097 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testDeleteRecursiveAsync\n2012-06-15 14:00:41,225 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testStatWhenPathDoesNotExist\n2012-06-15 14:00:42,362 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testStatWhenPathDoesNotExist\n2012-06-15 14:01:42,787 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testCreateNodeWithoutData\n2012-06-15 14:01:44,452 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testCreateNodeWithoutData\n2012-06-15 14:02:04,577 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testACLWithExtraAgruments\n2012-06-15 14:02:05,749 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testACLWithExtraAgruments\n2012-06-15 14:02:25,874 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testCreatePersistentNode\n2012-06-15 14:02:27,324 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testCreatePersistentNode\n2012-06-15 14:02:47,449 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testDelete\n2012-06-15 14:02:48,585 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testDelete\n2012-06-15 14:03:08,705 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testStatCommand\n2012-06-15 14:03:10,173 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testStatCommand\n2012-06-15 14:03:30,295 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testInvalidStatCommand\n2012-06-15 14:03:31,688 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testInvalidStatCommand\n2012-06-15 14:03:51,809 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testSetData\n2012-06-15 14:03:53,674 [myid:] - INFO  [main:ZKTestCase$1@66] - FAILED testSetData\n2012-06-15 14:04:13,836 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAILED testDeleteWithInvalidVersionNo\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-15T21:12:51.799+0000","updated":"2012-06-15T21:12:51.799+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13296046","id":"13296046","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"If you can attached logs from the failed test(s) that might give some insight. Compress it first though.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-16T00:38:41.119+0000","updated":"2012-06-16T00:38:41.119+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13404171","id":"13404171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pron","name":"pron","key":"pron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ron Pressler","active":true,"timeZone":"Etc/UTC"},"body":"I'm seeing the same problem with OS X and JDK 7. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pron","name":"pron","key":"pron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ron Pressler","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-29T20:22:32.214+0000","updated":"2012-06-29T20:22:32.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13404194","id":"13404194","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pron","name":"pron","key":"pron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ron Pressler","active":true,"timeZone":"Etc/UTC"},"body":"Forgot to add - also a Macbook Pro.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pron","name":"pron","key":"pron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ron Pressler","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-29T20:44:24.782+0000","updated":"2012-06-29T20:44:24.782+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13404216","id":"13404216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pron","name":"pron","key":"pron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ron Pressler","active":true,"timeZone":"Etc/UTC"},"body":"Running the server in Java 6 and the client in Java 7 seems to work fine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pron","name":"pron","key":"pron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ron Pressler","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-29T21:06:06.421+0000","updated":"2012-06-29T21:06:06.421+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13412526","id":"13412526","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diegooliveira","name":"diegooliveira","key":"diegooliveira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Oliveira","active":true,"timeZone":"America/Sao_Paulo"},"body":"I did some testing and it appears to be something time related. Running a test in debug mode (ZooKeeperTest.testDeleteRecursive) sometimes works. Going a little deeper it looks like the channel is going in a broken state and the client can not send the next package.\n\nMy tests was in ClientCnxnSocketNIO.doIO and NIOServerCnxn.doIO and it looks like they are going in silence. I'll do some more test tomorrow and report any discovery.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diegooliveira","name":"diegooliveira","key":"diegooliveira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Oliveira","active":true,"timeZone":"America/Sao_Paulo"},"created":"2012-07-12T05:23:15.058+0000","updated":"2012-07-12T05:23:15.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13413501","id":"13413501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diegooliveira","name":"diegooliveira","key":"diegooliveira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Oliveira","active":true,"timeZone":"America/Sao_Paulo"},"body":"I did some logging to look up what is happening. The idea was to log all bytes send from client to server and the other way back. Running in the working environment(jdk6) the math was just fine, all bytes send was read BUT with jdk7 in the middle of the communication the server stop to read the data.\n\nHere is the log from the good communication:\n{code}\n2012-07-13 01:41:32,542 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[4] values [java.nio.HeapByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:41:32,544 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@839] - Processing stat command from /127.0.0.1:57304\n2012-07-13 01:41:32,546 [myid:] - INFO  [Thread-4:NIOServerCnxn$StatCommand@673] - Stat command output\n2012-07-13 01:41:32,546 [myid:] - TRACE [Thread-4:NIOServerCnxn@189] - Writting to client, size[239] values [[90, 111, 111, 107, 101, 101, 112, 101, 114, 32, 118, 101, 114, 115, 105, 111, 110, 58, 32, 51, 46, 53, 46, 48, 45, 49, 51, 54, 49, 48, 51, 51, 44, 32, 98, 117, 105, 108, 116, 32, 111, 110, 32, 48, 55, 47, 49, 51, 47, 50, 48, 49, 50, 32, 48, 51, 58, 52, 50, 32, 71, 77, 84, 10, 67, 108, 105, 101, 110, 116, 115, 58, 10, 32, 47, 49, 50, 55, 46, 48, 46, 48, 46, 49, 58, 53, 55, 51, 48, 52, 91, 48, 93, 40, 113, 117, 101, 117, 101, 100, 61, 48, 44, 114, 101, 99, 118, 101, 100, 61, 49, 44, 115, 101, 110, 116, 61, 48, 41, 10, 10, 76, 97, 116, 101, 110, 99, 121, 32, 109, 105, 110, 47, 97, 118, 103, 47, 109, 97, 120, 58, 32, 48, 47, 48, 47, 48, 10, 82, 101, 99, 101, 105, 118, 101, 100, 58, 32, 49, 10, 83, 101, 110, 116, 58, 32, 48, 10, 67, 111, 110, 110, 101, 99, 116, 105, 111, 110, 115, 58, 32, 49, 10, 79, 117, 116, 115, 116, 97, 110, 100, 105, 110, 103, 58, 32, 48, 10, 90, 120, 105, 100, 58, 32, 48, 120, 48, 10, 77, 111, 100, 101, 58, 32, 115, 116, 97, 110, 100, 97, 108, 111, 110, 101, 10, 78, 111, 100, 101, 32, 99, 111, 117, 110, 116, 58, 32, 52, 10]]\n2012-07-13 01:41:32,548 [myid:] - INFO  [Thread-4:NIOServerCnxn@1019] - Closed socket connection for client /127.0.0.1:57304 (no session established for client)\n2012-07-13 01:41:32,549 [myid:] - DEBUG [Thread-4:NIOServerCnxn@1043] - ignoring exception during input shutdown\n2012-07-13 01:41:32,674 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@111] - Write to server, size[49] values [[0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 117, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]\n2012-07-13 01:41:32,775 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[4] values [java.nio.HeapByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:41:32,776 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[45] values [java.nio.HeapByteBuffer[pos=45 lim=45 cap=45]]\n2012-07-13 01:41:32,788 [myid:] - TRACE [SyncThread:0:NIOServerCnxn@189] - Writting to client, size[41] values [[0, 0, 0, 37, 0, 0, 0, 0, 0, 0, 117, 48, 1, 56, 126, -92, 74, 5, 0, 0, 0, 0, 0, 16, -47, -36, -106, 57, -118, -4, -32, -86, -105, 78, -24, 7, -29, 104, 91, 15, 0]]\n2012-07-13 01:41:32,977 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[4] values [java.nio.DirectByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:41:33,078 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[37] values [java.nio.HeapByteBuffer[pos=37 lim=37 cap=37]]\n2012-07-13 01:41:33,184 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@111] - Write to server, size[29] values [[0, 0, 0, 25, 0, 0, 0, 1, 0, 0, 0, 5, 0, 0, 0, 1, 47, 0, 0, 0, 4, 115, 111, 109, 101, -1, -1, -1, -1]]\n\n*** This is OK in the jdk6, in the jdk7 the communication hangs up.\n\n2012-07-13 01:41:33,285 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[4] values [java.nio.HeapByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:41:33,286 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[25] values [java.nio.HeapByteBuffer[pos=25 lim=25 cap=25]]\n2012-07-13 01:41:33,289 [myid:] - TRACE [SyncThread:0:NIOServerCnxn@189] - Writting to client, size[88] values [[0, 0, 0, 84, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 56, 126, -92, 77, 102, 0, 0, 0, 1, -1, -1, -1, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]]\n2012-07-13 01:41:33,391 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[4] values [java.nio.DirectByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:41:33,492 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[84] values [java.nio.HeapByteBuffer[pos=84 lim=84 cap=84]]\n2012-07-13 01:41:33,595 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@111] - Write to server, size[57] values [[0, 0, 0, 53, 0, 0, 0, 2, 0, 0, 0, 1, 0, 0, 0, 2, 47, 97, 0, 0, 0, 4, 115, 111, 109, 101, 0, 0, 0, 1, 0, 0, 0, 31, 0, 0, 0, 5, 119, 111, 114, 108, 100, 0, 0, 0, 6, 97, 110, 121, 111, 110, 101, 0, 0, 0, 0]]\n{code}\n\nJdk7 log.\n\n{code}\n2012-07-13 01:49:37,588 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[4] values [java.nio.HeapByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:49:37,591 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@839] - Processing stat command from /127.0.0.1:57445\n2012-07-13 01:49:37,594 [myid:] - INFO  [Thread-2:NIOServerCnxn$StatCommand@673] - Stat command output\n2012-07-13 01:49:37,595 [myid:] - TRACE [Thread-2:NIOServerCnxn@189] - Writting to client, size[239] values [[90, 111, 111, 107, 101, 101, 112, 101, 114, 32, 118, 101, 114, 115, 105, 111, 110, 58, 32, 51, 46, 53, 46, 48, 45, 49, 51, 54, 49, 48, 51, 51, 44, 32, 98, 117, 105, 108, 116, 32, 111, 110, 32, 48, 55, 47, 49, 51, 47, 50, 48, 49, 50, 32, 48, 51, 58, 52, 50, 32, 71, 77, 84, 10, 67, 108, 105, 101, 110, 116, 115, 58, 10, 32, 47, 49, 50, 55, 46, 48, 46, 48, 46, 49, 58, 53, 55, 52, 52, 53, 91, 48, 93, 40, 113, 117, 101, 117, 101, 100, 61, 48, 44, 114, 101, 99, 118, 101, 100, 61, 49, 44, 115, 101, 110, 116, 61, 48, 41, 10, 10, 76, 97, 116, 101, 110, 99, 121, 32, 109, 105, 110, 47, 97, 118, 103, 47, 109, 97, 120, 58, 32, 48, 47, 48, 47, 48, 10, 82, 101, 99, 101, 105, 118, 101, 100, 58, 32, 49, 10, 83, 101, 110, 116, 58, 32, 48, 10, 67, 111, 110, 110, 101, 99, 116, 105, 111, 110, 115, 58, 32, 49, 10, 79, 117, 116, 115, 116, 97, 110, 100, 105, 110, 103, 58, 32, 48, 10, 90, 120, 105, 100, 58, 32, 48, 120, 48, 10, 77, 111, 100, 101, 58, 32, 115, 116, 97, 110, 100, 97, 108, 111, 110, 101, 10, 78, 111, 100, 101, 32, 99, 111, 117, 110, 116, 58, 32, 52, 10]]\n2012-07-13 01:49:37,596 [myid:] - INFO  [Thread-2:NIOServerCnxn@1019] - Closed socket connection for client /127.0.0.1:57445 (no session established for client)\n2012-07-13 01:49:37,723 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@111] - Write to server, size[49] values [[0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 117, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]\n2012-07-13 01:49:37,824 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[4] values [java.nio.HeapByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:49:37,825 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[45] values [java.nio.HeapByteBuffer[pos=45 lim=45 cap=45]]\n2012-07-13 01:49:37,835 [myid:] - TRACE [SyncThread:0:NIOServerCnxn@189] - Writting to client, size[41] values [[0, 0, 0, 37, 0, 0, 0, 0, 0, 0, 117, 48, 1, 56, 126, -85, -80, -68, 0, 0, 0, 0, 0, 16, -122, 112, 53, -37, -101, 126, -10, 20, -44, -11, -105, 43, -36, 107, -94, 35, 0]]\n2012-07-13 01:49:38,025 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[4] values [java.nio.DirectByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:49:38,126 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[37] values [java.nio.HeapByteBuffer[pos=37 lim=37 cap=37]]\n2012-07-13 01:49:38,233 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@111] - Write to server, size[29] values [[0, 0, 0, 25, 0, 0, 0, 1, 0, 0, 0, 5, 0, 0, 0, 1, 47, 0, 0, 0, 4, 115, 111, 109, 101, -1, -1, -1, -1]]\n\n** Where is the read from the server side?\n\n2012-07-13 01:49:48,336 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@111] - Write to server, size[12] values [[0, 0, 0, 8, -1, -1, -1, -2, 0, 0, 0, 11]]\n2012-07-13 01:49:59,667 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@111] - Write to server, size[49] values [[0, 0, 0, 45, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 117, 48, 1, 56, 126, -85, -80, -68, 0, 0, 0, 0, 0, 16, -122, 112, 53, -37, -101, 126, -10, 20, -44, -11, -105, 43, -36, 107, -94, 35, 0]]\n2012-07-13 01:49:59,769 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@111] - Write to server, size[12] values [[0, 0, 0, 8, 0, 0, 0, 2, -1, -1, -1, -11]]\n2012-07-13 01:49:59,769 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[4] values [java.nio.HeapByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:49:59,770 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[45] values [java.nio.HeapByteBuffer[pos=45 lim=45 cap=45]]\n2012-07-13 01:49:59,770 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@1019] - Closed socket connection for client /127.0.0.1:57448 which had sessionid 0x1387eabb0bc0000\n2012-07-13 01:49:59,771 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@189] - Writting to client, size[41] values [[0, 0, 0, 37, 0, 0, 0, 0, 0, 0, 117, 48, 1, 56, 126, -85, -80, -68, 0, 0, 0, 0, 0, 16, -122, 112, 53, -37, -101, 126, -10, 20, -44, -11, -105, 43, -36, 107, -94, 35, 0]]\n2012-07-13 01:49:59,872 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[4] values [java.nio.HeapByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:49:59,873 [myid:] - TRACE [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:11221:NIOServerCnxn@378] - Readed from cleint, size[8] values [java.nio.HeapByteBuffer[pos=8 lim=8 cap=8]]\n2012-07-13 01:49:59,874 [myid:] - TRACE [SyncThread:0:NIOServerCnxn@189] - Writting to client, size[20] values [[0, 0, 0, 16, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0]]\n2012-07-13 01:49:59,874 [myid:] - TRACE [SyncThread:0:NIOServerCnxn@173] - Add a buffer to outgoingBuffers, sk sun.nio.ch.SelectionKeyImpl@64aedc96 is valid: true\n2012-07-13 01:49:59,971 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[4] values [java.nio.DirectByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:50:00,072 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[37] values [java.nio.HeapByteBuffer[pos=37 lim=37 cap=37]]\n2012-07-13 01:50:00,174 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[4] values [java.nio.DirectByteBuffer[pos=4 lim=4 cap=4]]\n2012-07-13 01:50:00,275 [myid:] - TRACE [main-SendThread(localhost:11221):ClientCnxnSocketNIO@133] - Readed from server, size[16] values [java.nio.HeapByteBuffer[pos=16 lim=16 cap=16]]\n2012-07-13 01:50:00,276 [myid:] - INFO  [main:NIOServerCnxn@1019] - Closed socket connection for client /127.0.0.1:57449 which had sessionid 0x1387eabb0bc0000\n\n{code}\n\n\nIn my search I sow some changes in minor issues in the jdk7 regarding socket channels, but I don't know if it is the root cause. Tomorrow I will go a little deeper.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diegooliveira","name":"diegooliveira","key":"diegooliveira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Oliveira","active":true,"timeZone":"America/Sao_Paulo"},"created":"2012-07-13T05:16:46.323+0000","updated":"2012-07-13T05:16:46.323+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13413691","id":"13413691","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diegooliveira","name":"diegooliveira","key":"diegooliveira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Oliveira","active":true,"timeZone":"America/Sao_Paulo"},"body":"It is a bug in the JDK7 macosx system call as described here http://www.oracle.com/technetwork/java/javase/7u4-relnotes-1575007.html as the bug says there is a workaround, add this to your test -Djava.nio.channels.spi.SelectorProvider=sun.nio.ch.KQueueSelectorProvider.\n\n*All my tests passed for org.apache.zookeeper.ZooKeeperTest*. Others are broken, I found that the log output is used as part of tests results and I change the root log level to find the communication problem, so some tests failed. I'm fixing the test to be a little less dependent of the system log level configuration, enforcing his own.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diegooliveira","name":"diegooliveira","key":"diegooliveira","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Oliveira","active":true,"timeZone":"America/Sao_Paulo"},"created":"2012-07-13T12:37:26.852+0000","updated":"2012-07-13T12:37:26.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13463222","id":"13463222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"Update:\n\n* With JDK 7u7 on Mac and ZK 3.4.3, I don't see the ConnectionLoss exceptions anymore (rather I haven't yet observed them)\n* With JDK 7u7 on Mac and ZK 3.4.4, I see even more ConnectionLoss exceptions than before :-/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-25T21:05:31.167+0000","updated":"2012-09-25T21:05:31.167+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13464897","id":"13464897","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch with ZOOKEEPER-1550 lets Java 7 on Linux. Have not tested with Mac OS X yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T17:31:39.375+0000","updated":"2012-09-27T17:31:39.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13464903","id":"13464903","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"Sorry, meant \"lets 'ant clean test' pass with Oracle Java 7 on Linux\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T17:37:02.873+0000","updated":"2012-09-27T17:37:02.873+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13464979","id":"13464979","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"I noted this in javac's output when using Oracle Java 7 on Linux:\n\n{code}\ncompile:\n    [javac] Compiling 164 source files to /home/ec2-user/zookeeper/build/classes\n    [javac] warning: [options] bootstrap class path not set in conjunction with -source 1.5\n    [javac] /home/ec2-user/zookeeper/src/java/main/org/apache/zookeeper/jmx/ManagedUtil.java:62: warning: [rawtypes] found raw type: Enumeration\n    [javac]         Enumeration enumer = r.getCurrentLoggers();\n    [javac]         ^\n    [javac]   missing type arguments for generic class Enumeration<E>\n    [javac]   where E is a type-variable:\n    [javac]     E extends Object declared in interface Enumeration\n    [javac] /home/ec2-user/zookeeper/src/java/main/org/apache/zookeeper/server/util/KerberosUtil.java:39: warning: [rawtypes] found raw type: Class\n    [javac]     getInstanceMethod = classRef.getMethod(\"getInstance\", new Class[0]);\n    [javac]                                                               ^\n    [javac]   missing type arguments for generic class Class<T>\n    [javac]   where T is a type-variable:\n    [javac]     T extends Object declared in class Class\n    [javac] /home/ec2-user/zookeeper/src/java/main/org/apache/zookeeper/server/util/KerberosUtil.java:42: warning: [rawtypes] found raw type: Class\n    [javac]          new Class[0]);\n    [javac]              ^\n    [javac]   missing type arguments for generic class Class<T>\n    [javac]   where T is a type-variable:\n    [javac]     T extends Object declared in class Class\n    [javac] 4 warnings\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T18:57:19.468+0000","updated":"2012-09-27T18:57:19.468+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13464981","id":"13464981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"(the above warnings do not appear with Oracle Java 6's javac).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T18:58:25.654+0000","updated":"2012-09-27T18:58:25.654+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465077","id":"13465077","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Diwaker, \n Would you be able to run the tests along with Eugenes patch on  ZOOKEEPER-1550 ? If not please let me know. I can go ahead and run it.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-27T20:52:44.577+0000","updated":"2012-09-27T20:52:44.577+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465090","id":"13465090","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~mahadev] Happy to test though I'm pretty sure this is unrelated to ZOOKEEPER-1550 -- recall that I'm using Oracle JDK (not OpenJDK) and I'm on Mac. I haven't been able to ever successfully run ZK tests on a Mac with JDK7 (starting with 7u3, now on 7u7). Things were broken with ZK 3.4.3 and have just become worse with 3.4.4. Will report back shortly with the patch in 1550.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T21:06:29.646+0000","updated":"2012-09-27T21:06:29.646+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465097","id":"13465097","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Thanks Diwaker. Could you please upload a summary of the tests failing and the logs as well?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-27T21:11:40.746+0000","updated":"2012-09-27T21:11:40.746+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465104","id":"13465104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"Will do. How long should the tests be expected to run for? The last time I ran ZK tests (few days ago), they didn't run to completion even after 30 minutes, at which point I killed the run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T21:17:11.278+0000","updated":"2012-09-27T21:17:11.278+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465105","id":"13465105","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Diwaker, I predict you will get fewer errors, at least, if not zero :) \n\nMay I ask, are you able to install JDK7 on Mac OS X and still be able to select JDK and JVM 6? I'd like to try to install JDK 7 but only if I can still select JDK/JVM 6 for testing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T21:17:14.313+0000","updated":"2012-09-27T21:17:14.313+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465108","id":"13465108","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Diwaker,\n The usual time on a linux box is around 40 mins or so.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-27T21:20:03.176+0000","updated":"2012-09-27T21:20:03.176+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465184","id":"13465184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~ekoontz] Good prediction -- your patch *significantly* improved things for me!\n\n[~mahadev] Even with Eugene's patch, some tests failed for me. I'm attaching summary as well as the logs. I also ran tests without his patch but they're still not done (45 min and counting) and many many of them have already failed (many of which passed with Eugene's patch). In summary, +2 for the patch! But we should still investigate the remaining failures.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T22:36:31.473+0000","updated":"2012-09-27T22:36:31.473+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465187","id":"13465187","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"body":"Arghh! I accidentally deleted all the logs from the run with the patch :-/ I can rerun if that'll help.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diwaker","name":"diwaker","key":"diwaker","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diwaker Gupta","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T22:37:54.027+0000","updated":"2012-09-27T22:37:54.027+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465243","id":"13465243","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Thats fine Diwaker. Ill downgrade this jira to a major and mark it for the next release. We can just ship 3.4.5 with fix for ZOOKEEPER-1550.\n \nItll be good to upload the tests logs for those that fail but its not urgent. We can do it later for 3.4.6.\n\nThanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-28T00:23:14.961+0000","updated":"2012-09-28T00:23:14.961+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13465713","id":"13465713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Downgrading to Major given the recent updates on this jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-28T16:29:44.297+0000","updated":"2012-09-28T16:29:44.297+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13471342","id":"13471342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chids","name":"chids","key":"chids","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mrten Gustafson","active":true,"timeZone":"Europe/Berlin"},"body":"FWIW:\n\nI ended up here trying to debug problems with running a local Storm cluster (which uses an embedded ZooKeeper) and followed the Curator errors and related bug reports to this issue. \n\nI just did somewhat of a bare minimum test case using the [storm-starter|https://github.com/nathanmarz/storm-starter/] project on _OS X 10.8.2_ using _Java 1.7.0_05_ and then switching to _Java 1.6.0_35_ (so yes, [~ekoontz] you can switch back and forth using the \"Java Prefernces\" app in OS X).\n\nWith _Java 1.6.0_35_ the storm-starter runs flawlessly whereas on _1.7.0_05_ it's stuck trying to connect to ZooKeeper. ZooKeeper version is _3.4.4_.\n\nI started trying to hack a build of Curator together with _ZK 3.5_ from source but have to cave and wrap this day up. If I manage to get a test run with _3.5_ I'll update here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chids","name":"chids","key":"chids","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mrten Gustafson","active":true,"timeZone":"Europe/Berlin"},"created":"2012-10-07T22:03:20.090+0000","updated":"2012-10-07T22:03:20.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13471377","id":"13471377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Martin, Good to know that multiple Java versions in OS X works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-08T02:39:31.450+0000","updated":"2012-10-08T02:39:31.450+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13471518","id":"13471518","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chids","name":"chids","key":"chids","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mrten Gustafson","active":true,"timeZone":"Europe/Berlin"},"body":"Again FWIW in this context: problem vanished when upgrading to _JDK 1.7.0_07_, ie the storm-starter scenario, and it's embedded ZooKeeper, runs fine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chids","name":"chids","key":"chids","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mrten Gustafson","active":true,"timeZone":"Europe/Berlin"},"created":"2012-10-08T12:33:05.896+0000","updated":"2012-10-08T12:33:05.896+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13490579","id":"13490579","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hwilliamson","name":"hwilliamson","key":"hwilliamson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Helen Williamson","active":true,"timeZone":"Etc/UTC"},"body":"I'm also experiencing a similar problem using the zkCli shell script. I've started up 5 zookeeper servers using QuorumPeerMain from the zookeeper jar.\n\nWith Java 1.6.0_37 I get the following output:\n\n{code}\nMC00635:bin helen.williamson$ ./zkCli.sh\nConnecting to localhost:2181\n2012-11-05 10:50:35,648 [myid:] - INFO  [main:Environment@100] - Client environment:zookeeper.version=3.4.4-1386507, built on 09/17/2012 08:33 GMT\n2012-11-05 10:50:35,651 [myid:] - INFO  [main:Environment@100] - Client environment:host.name=dhcp-192-168-101-135.tea.mindcandy.com\n2012-11-05 10:50:35,651 [myid:] - INFO  [main:Environment@100] - Client environment:java.version=1.6.0_37\n2012-11-05 10:50:35,651 [myid:] - INFO  [main:Environment@100] - Client environment:java.vendor=Apple Inc.\n2012-11-05 10:50:35,652 [myid:] - INFO  [main:Environment@100] - Client environment:java.home=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\n2012-11-05 10:50:35,652 [myid:] - INFO  [main:Environment@100] - Client environment:java.class.path=/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../build/classes:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../build/lib/*.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/slf4j-log4j12-1.6.1.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/slf4j-api-1.6.1.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/netty-3.2.2.Final.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/log4j-1.2.15.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/jline-0.9.94.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../zookeeper-3.4.4.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../src/java/lib/*.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../conf:\n2012-11-05 10:50:35,652 [myid:] - INFO  [main:Environment@100] - Client environment:java.library.path=.:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java\n2012-11-05 10:50:35,653 [myid:] - INFO  [main:Environment@100] - Client environment:java.io.tmpdir=/var/folders/4l/yzr37v6s3zz8hfsggnjmzbg00000gp/T/\n2012-11-05 10:50:35,653 [myid:] - INFO  [main:Environment@100] - Client environment:java.compiler=<NA>\n2012-11-05 10:50:35,653 [myid:] - INFO  [main:Environment@100] - Client environment:os.name=Mac OS X\n2012-11-05 10:50:35,654 [myid:] - INFO  [main:Environment@100] - Client environment:os.arch=x86_64\n2012-11-05 10:50:35,654 [myid:] - INFO  [main:Environment@100] - Client environment:os.version=10.7.5\n2012-11-05 10:50:35,654 [myid:] - INFO  [main:Environment@100] - Client environment:user.name=helen.williamson\n2012-11-05 10:50:35,655 [myid:] - INFO  [main:Environment@100] - Client environment:user.home=/Users/helen.williamson\n2012-11-05 10:50:35,655 [myid:] - INFO  [main:Environment@100] - Client environment:user.dir=/Users/helen.williamson/workspace/bartender/target/zookeeper-3.4.4/bin\n2012-11-05 10:50:35,656 [myid:] - INFO  [main:ZooKeeper@433] - Initiating client connection, connectString=localhost:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@6b4da8f4\nWelcome to ZooKeeper!\n2012-11-05 10:50:35,687 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@966] - Opening socket connection to server localhost/127.0.0.1:2181. Will not attempt to authenticate using SASL (Unable to locate a login configuration)\nJLine support is enabled\n2012-11-05 10:50:35,694 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@849] - Socket connection established to localhost/127.0.0.1:2181, initiating session\n2012-11-05 10:50:35,715 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1207] - Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x13ad009f0770002, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\n[zk: localhost:2181(CONNECTED) 0] ls /\n[zookeeper]\n{code}\n\nWith Java 1.7.0_09 I get:\n\n{code}\nMC00635:bin helen.williamson$ ./zkCli.sh\nConnecting to localhost:2181\n2012-11-05 10:45:44,634 [myid:] - INFO  [main:Environment@100] - Client environment:zookeeper.version=3.4.4-1386507, built on 09/17/2012 08:33 GMT\n2012-11-05 10:45:44,674 [myid:] - INFO  [main:Environment@100] - Client environment:host.name=<NA>\n2012-11-05 10:45:44,674 [myid:] - INFO  [main:Environment@100] - Client environment:java.version=1.7.0_09\n2012-11-05 10:45:44,675 [myid:] - INFO  [main:Environment@100] - Client environment:java.vendor=Oracle Corporation\n2012-11-05 10:45:44,676 [myid:] - INFO  [main:Environment@100] - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre\n2012-11-05 10:45:44,677 [myid:] - INFO  [main:Environment@100] - Client environment:java.class.path=/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../build/classes:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../build/lib/*.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/slf4j-log4j12-1.6.1.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/slf4j-api-1.6.1.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/netty-3.2.2.Final.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/log4j-1.2.15.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../lib/jline-0.9.94.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../zookeeper-3.4.4.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../src/java/lib/*.jar:/Users/helen.williamson/workspace/bartender/target/zookeeper/bin/../conf:\n2012-11-05 10:45:44,678 [myid:] - INFO  [main:Environment@100] - Client environment:java.library.path=/Users/helen.williamson/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.\n2012-11-05 10:45:44,678 [myid:] - INFO  [main:Environment@100] - Client environment:java.io.tmpdir=/var/folders/4l/yzr37v6s3zz8hfsggnjmzbg00000gp/T/\n2012-11-05 10:45:44,679 [myid:] - INFO  [main:Environment@100] - Client environment:java.compiler=<NA>\n2012-11-05 10:45:44,679 [myid:] - INFO  [main:Environment@100] - Client environment:os.name=Mac OS X\n2012-11-05 10:45:44,680 [myid:] - INFO  [main:Environment@100] - Client environment:os.arch=x86_64\n2012-11-05 10:45:44,680 [myid:] - INFO  [main:Environment@100] - Client environment:os.version=10.7.5\n2012-11-05 10:45:44,681 [myid:] - INFO  [main:Environment@100] - Client environment:user.name=helen.williamson\n2012-11-05 10:45:44,682 [myid:] - INFO  [main:Environment@100] - Client environment:user.home=/Users/helen.williamson\n2012-11-05 10:45:44,682 [myid:] - INFO  [main:Environment@100] - Client environment:user.dir=/Users/helen.williamson/workspace/bartender/target/zookeeper-3.4.4/bin\n2012-11-05 10:45:44,684 [myid:] - INFO  [main:ZooKeeper@433] - Initiating client connection, connectString=localhost:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@6ad5d980\nWelcome to ZooKeeper!\n2012-11-05 10:45:44,863 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@966] - Opening socket connection to server localhost/127.0.0.1:2181. Will not attempt to authenticate using SASL (unknown error)\nJLine support is enabled\n2012-11-05 10:45:44,973 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@849] - Socket connection established to localhost/127.0.0.1:2181, initiating session\n2012-11-05 10:45:45,011 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1207] - Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x13ad009f0770001, negotiated timeout = 30000\n\nWATCHER::\n\nWatchedEvent state:SyncConnected type:None path:null\n[zk: localhost:2181(CONNECTED) 0] \n[zk: localhost:2181(CONNECTED) 0] ls /\n2012-11-05 10:46:05,004 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1083] - Client session timed out, have not heard from server in 20001ms for sessionid 0x13ad009f0770001, closing socket connection and attempting reconnect\n\nWATCHER::\n\nWatchedEvent state:Disconnected type:None path:null\nException in thread \"main\" org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /\n\tat org.apache.zookeeper.KeeperException.create(KeeperException.java:99)\n\tat org.apache.zookeeper.KeeperException.create(KeeperException.java:51)\n\tat org.apache.zookeeper.ZooKeeper.getChildren(ZooKeeper.java:1463)\n\tat org.apache.zookeeper.ZooKeeper.getChildren(ZooKeeper.java:1491)\n\tat org.apache.zookeeper.ZooKeeperMain.processZKCmd(ZooKeeperMain.java:725)\n\tat org.apache.zookeeper.ZooKeeperMain.processCmd(ZooKeeperMain.java:593)\n\tat org.apache.zookeeper.ZooKeeperMain.executeLine(ZooKeeperMain.java:365)\n\tat org.apache.zookeeper.ZooKeeperMain.run(ZooKeeperMain.java:323)\n\tat org.apache.zookeeper.ZooKeeperMain.main(ZooKeeperMain.java:282)\n{code}\n\nThis can be reproduced by switching JAVA_HOME between 1.6 and 1.7.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hwilliamson","name":"hwilliamson","key":"hwilliamson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Helen Williamson","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-05T11:26:38.290+0000","updated":"2012-11-05T11:26:38.290+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13498378","id":"13498378","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dtertman","name":"dtertman","key":"dtertman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Ertman","active":true,"timeZone":"America/Chicago"},"body":"Second Helen's comments above - zkCli from Zookeeper 3.4.4 fails on Mac JDK 1.7.0_09 when you try to ls /.   I tried -Djava.nio.channels.spi.SelectorProvider=sun.nio.ch.KQueueSelectorProvider on both client and server, no effect.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dtertman","name":"dtertman","key":"dtertman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Ertman","active":true,"timeZone":"America/Chicago"},"created":"2012-11-15T21:58:59.939+0000","updated":"2012-11-15T21:58:59.939+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13499893","id":"13499893","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"FWIW I have the same issue with zkCli on Fedora 18 / JDK 1.7.0_09-icedtea.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-18T20:33:43.437+0000","updated":"2012-11-18T20:33:43.437+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13499895","id":"13499895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"(On 3.4.4)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-18T20:35:55.829+0000","updated":"2012-11-18T20:35:55.829+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13506057","id":"13506057","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"body":"Fedora 18 is not officially released yet, but over at Bigtop (http://bigtop.apache.org) we run regular tests with the OS supplied JDK and things have been really great on the following set of platforms: http://bigtop01.cloudera.org:8080/view/Bigtop-trunk/job/Bigtop-trunk-packagetest/\n\nFWIW: I believe that Fedora 17 comes with exactly the same version of JDK 1.7.0_09-icedtea.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-28T23:50:17.756+0000","updated":"2012-11-28T23:50:17.756+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13506227","id":"13506227","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Has anyone tried against 3.4.5? Do we have any insight whether this was also happening with the 3.3 branch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-29T05:28:42.026+0000","updated":"2012-11-29T05:28:42.026+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13506541","id":"13506541","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvital","name":"pvital","key":"pvital","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paulo Ricardo Paz Vital","active":true,"timeZone":"America/Sao_Paulo"},"body":"Patrick, I could build 3.4.5 using IBM Java 7 SR 3 and it's working with no problems (the environment is a x86_64 running RHEL6.3).\n\nFirst, I tried to build 3.4.4 with IBM Java 7 SR 3, and got the same problems as reported by Diwaker Gupta in the beginning of this thread. After checked the comments from Eugene Koontz regarding the ZOOKEEPER-1550, and the good results reported by Diwaker after applied the patch on 3.4.3, I decided to check the current version (3.4.5) and trunk. \n\nBoth versions (3.4.5 and trunk) are build with no problems with IBM (7 SR 3) and Oracle (7 update 9) JVMs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvital","name":"pvital","key":"pvital","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paulo Ricardo Paz Vital","active":true,"timeZone":"America/Sao_Paulo"},"created":"2012-11-29T15:38:18.072+0000","updated":"2012-11-29T15:38:18.072+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13510547","id":"13510547","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=makuk66","name":"makuk66","key":"makuk66","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=makuk66&avatarId=16264","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=makuk66&avatarId=16264","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=makuk66&avatarId=16264","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=makuk66&avatarId=16264"},"displayName":"Martijn Koster","active":true,"timeZone":"Etc/UTC"},"body":"Some more data points:\nI saw this problem with 3.4.4 on 2nd Oct 2012, on OSX 10.6. I worked around it then by using a nightly build.\nI'm now on OSX 10.8.2, tried 3.4.5, and saw it again. I then upgraded to java jdk 1.7.0_09-b05 (from _04 I believe), and it went away again.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=makuk66","name":"makuk66","key":"makuk66","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=makuk66&avatarId=16264","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=makuk66&avatarId=16264","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=makuk66&avatarId=16264","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=makuk66&avatarId=16264"},"displayName":"Martijn Koster","active":true,"timeZone":"Etc/UTC"},"created":"2012-12-05T15:58:12.051+0000","updated":"2012-12-05T15:58:12.051+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13665015","id":"13665015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielywoo","name":"danielywoo","key":"danielywoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Woo","active":true,"timeZone":"Etc/UTC"},"body":"I have exactly the same issue like Helen's one on Mac OSX 10.8. The client works with both jdk 1.6 and 1.7, but the server only works with 1.6.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielywoo","name":"danielywoo","key":"danielywoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Woo","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-23T09:06:16.745+0000","updated":"2013-05-23T09:06:16.745+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13739344","id":"13739344","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"Everything seems to work for me: tests pass and I can run both client and server. If there is a fix needed here, I'd like to include it in 3.4.6.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2013-08-14T07:16:20.520+0000","updated":"2013-08-14T07:16:20.520+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13753601","id":"13753601","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"I haven't heard anything back, so I'm moving it to 3.5.0. I'm not sure this is still an issue, though, everything seems to work for me on macos.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2013-08-29T13:15:33.821+0000","updated":"2013-08-29T13:15:33.821+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13755024","id":"13755024","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"[~fpj] are you saying that you tested the attached patch and it resolved the issue for you? Or that you normally don't see an issue and this patch is not needed? (I'm not on a mac so I can't help to test this)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-30T18:59:48.740+0000","updated":"2013-08-30T18:59:48.740+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13755096","id":"13755096","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"I normally don't see an issue. I run regularly on a mac and unit tests run fine. There is no patch attached, btw.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2013-08-30T20:27:47.477+0000","updated":"2013-08-30T20:27:47.477+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12558999/comment/13755566","id":"13755566","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"Resolving this issue, since I got no feedback and I'm not observing tests failing in my environment. I have been running often on a mac.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2013-08-31T18:11:32.852+0000","updated":"2013-08-31T18:11:32.852+0000"}],"maxResults":47,"total":47,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1477/votes","votes":8,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02jjz:"}}