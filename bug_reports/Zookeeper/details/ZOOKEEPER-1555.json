{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12610093","self":"https://issues.apache.org/jira/rest/api/2/issue/12610093","key":"ZOOKEEPER-1555","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 03 16:08:26 UTC 2012","customfield_12310420":"242158","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_555185_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-10-03T16:08:26.077+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1555/watchers","watchCount":1,"isWatching":false},"created":"2012-10-03T15:59:10.903+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319288","id":"12319288","description":"Fix release against 3.4 branch","name":"3.4.3","archived":false,"released":true,"releaseDate":"2012-02-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-10-03T16:08:26.087+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Any session can delete nodes with restricted ACLs.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"12705","customfield_12312823":null,"summary":"ACLs are not respected for node deletion","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","key":"gnt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnt&avatarId=35232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnt&avatarId=35232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnt&avatarId=35232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnt&avatarId=35232"},"displayName":"Guillaume Nodet","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","key":"gnt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnt&avatarId=35232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnt&avatarId=35232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnt&avatarId=35232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnt&avatarId=35232"},"displayName":"Guillaume Nodet","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12610093/comment/13468637","id":"13468637","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","key":"gnt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnt&avatarId=35232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnt&avatarId=35232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnt&avatarId=35232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnt&avatarId=35232"},"displayName":"Guillaume Nodet","active":true,"timeZone":"Europe/Berlin"},"body":"Simple test showing the problem.\n\n{code}\n    @Test\n    public void testDelete() throws Exception {\n        ServerConfig cfg = new ServerConfig();\n        cfg.parse(new String[]{\"8888\", \"data/zookeeper/\" + System.currentTimeMillis()});\n        ZooKeeperServer zkServer = new ZooKeeperServer();\n        FileTxnSnapLog ftxn = new FileTxnSnapLog(new File(cfg.getDataLogDir()), new File(cfg.getDataDir()));\n        zkServer.setTxnLogFactory(ftxn);\n        zkServer.setTickTime(cfg.getTickTime());\n        zkServer.setMinSessionTimeout(cfg.getMinSessionTimeout());\n        zkServer.setMaxSessionTimeout(cfg.getMaxSessionTimeout());\n        NIOServerCnxnFactory cnxnFactory = new NIOServerCnxnFactory();\n        cnxnFactory.configure(cfg.getClientPortAddress(), cfg.getMaxClientCnxns());\n        cnxnFactory.startup(zkServer);\n\n        ZooKeeper zk1 = new ZooKeeper(\"localhost:8888\", 30000, new Watcher() {\n            @Override\n            public void process(WatchedEvent event) {\n                System.out.println(\"Event: \" + event);\n            }\n        });\n        zk1.create(\"/foo\",\n                   \"data\".getBytes(),\n                   Collections.singletonList(new ACL(ZooDefs.Perms.ALL, new Id(\"digest\", DigestAuthenticationProvider.generateDigest(\"user:password\")))),\n                   CreateMode.PERSISTENT);\n        try {\n            zk1.delete(\"/foo\", -1);\n            fail(\"Expected failure due to session not authenticated\");\n        } catch (KeeperException.NoAuthException e) {\n            // Expected\n        }\n    }\n{code}\n\nAnd the corresponding log:\n\n{code}\n/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/bin/java -Didea.launcher.port=7539 \"-Didea.launcher.bin.path=/Applications/IntelliJ IDEA 11 CE.app/bin\" -Dfile.encoding=MacRoman -classpath \"/Applications/IntelliJ IDEA 11 CE.app/lib/idea_rt.jar:/Applications/IntelliJ IDEA 11 CE.app/plugins/junit/lib/junit-rt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/tools.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/JObjC.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/rhino.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-zookeeper/target/test-classes:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-zookeeper/target/classes:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-linkedin-zookeeper/target/classes:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.zookeeper-impl/1.4.0/org.linkedin.zookeeper-impl-1.4.0.jar:/Users/gnodet/.m2/repository/org/apache/zookeeper/zookeeper/3.4.3/zookeeper-3.4.3.jar:/Users/gnodet/.m2/repository/org/slf4j/slf4j-api/1.6.1/slf4j-api-1.6.1.jar:/Users/gnodet/.m2/repository/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.jar:/Users/gnodet/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar:/Users/gnodet/.m2/repository/jline/jline/0.9.94/jline-0.9.94.jar:/Users/gnodet/.m2/repository/junit/junit/4.10/junit-4.10.jar:/Users/gnodet/.m2/repository/org/jboss/netty/netty/3.2.2.Final/netty-3.2.2.Final.jar:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.util-core/1.4.0/org.linkedin.util-core-1.4.0.jar:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.util-groovy/1.7.1/org.linkedin.util-groovy-1.7.1.jar:/Users/gnodet/.m2/repository/org/slf4j/jul-to-slf4j/1.5.8/jul-to-slf4j-1.5.8.jar:/Users/gnodet/.m2/repository/org/apache/ant/ant/1.8.1/ant-1.8.1.jar:/Users/gnodet/.m2/repository/org/apache/ant/ant-launcher/1.8.1/ant-launcher-1.8.1.jar:/Users/gnodet/.m2/repository/org/json/json/20090211/json-20090211.jar:/Users/gnodet/.m2/repository/org/jasypt/jasypt/1.7/jasypt-1.7.jar:/Users/gnodet/.m2/repository/com/jcraft/jsch/0.1.42/jsch-0.1.42.jar:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-utils/target/classes:/Users/gnodet/.m2/repository/org/osgi/org.osgi.core/4.2.0/org.osgi.core-4.2.0.jar:/Users/gnodet/.m2/repository/org/osgi/org.osgi.compendium/4.2.0/org.osgi.compendium-4.2.0.jar:/Users/gnodet/.m2/repository/commons-logging/commons-logging-api/1.1/commons-logging-api-1.1.jar:/Users/gnodet/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.5/jackson-mapper-asl-1.9.5.jar:/Users/gnodet/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.5/jackson-core-asl-1.9.5.jar:/Users/gnodet/.m2/repository/org/easymock/easymock/2.4/easymock-2.4.jar:/Users/gnodet/.m2/repository/org/hamcrest/hamcrest-core/1.1/hamcrest-core-1.1.jar\" com.intellij.rt.execution.application.AppMain com.intellij.rt.execution.junit.JUnitStarter -ideVersion5 org.fusesource.fabric.zookeeper.internal.ZooKeeperAclTest,testDelete\nINFO  | main | Server environment:zookeeper.version=3.4.3-1240972, built on 02/06/2012 10:48 GMT\nINFO  | main | Server environment:host.name=192.168.0.133\nINFO  | main | Server environment:java.version=1.7.0-jdk7u6-b20\nINFO  | main | Server environment:java.vendor=Oracle Corporation\nINFO  | main | Server environment:java.home=/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre\nINFO  | main | Server environment:java.class.path=/Applications/IntelliJ IDEA 11 CE.app/lib/idea_rt.jar:/Applications/IntelliJ IDEA 11 CE.app/plugins/junit/lib/junit-rt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/tools.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/JObjC.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/rhino.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-zookeeper/target/test-classes:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-zookeeper/target/classes:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-linkedin-zookeeper/target/classes:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.zookeeper-impl/1.4.0/org.linkedin.zookeeper-impl-1.4.0.jar:/Users/gnodet/.m2/repository/org/apache/zookeeper/zookeeper/3.4.3/zookeeper-3.4.3.jar:/Users/gnodet/.m2/repository/org/slf4j/slf4j-api/1.6.1/slf4j-api-1.6.1.jar:/Users/gnodet/.m2/repository/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.jar:/Users/gnodet/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar:/Users/gnodet/.m2/repository/jline/jline/0.9.94/jline-0.9.94.jar:/Users/gnodet/.m2/repository/junit/junit/4.10/junit-4.10.jar:/Users/gnodet/.m2/repository/org/jboss/netty/netty/3.2.2.Final/netty-3.2.2.Final.jar:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.util-core/1.4.0/org.linkedin.util-core-1.4.0.jar:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.util-groovy/1.7.1/org.linkedin.util-groovy-1.7.1.jar:/Users/gnodet/.m2/repository/org/slf4j/jul-to-slf4j/1.5.8/jul-to-slf4j-1.5.8.jar:/Users/gnodet/.m2/repository/org/apache/ant/ant/1.8.1/ant-1.8.1.jar:/Users/gnodet/.m2/repository/org/apache/ant/ant-launcher/1.8.1/ant-launcher-1.8.1.jar:/Users/gnodet/.m2/repository/org/json/json/20090211/json-20090211.jar:/Users/gnodet/.m2/repository/org/jasypt/jasypt/1.7/jasypt-1.7.jar:/Users/gnodet/.m2/repository/com/jcraft/jsch/0.1.42/jsch-0.1.42.jar:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-utils/target/classes:/Users/gnodet/.m2/repository/org/osgi/org.osgi.core/4.2.0/org.osgi.core-4.2.0.jar:/Users/gnodet/.m2/repository/org/osgi/org.osgi.compendium/4.2.0/org.osgi.compendium-4.2.0.jar:/Users/gnodet/.m2/repository/commons-logging/commons-logging-api/1.1/commons-logging-api-1.1.jar:/Users/gnodet/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.5/jackson-mapper-asl-1.9.5.jar:/Users/gnodet/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.5/jackson-core-asl-1.9.5.jar:/Users/gnodet/.m2/repository/org/easymock/easymock/2.4/easymock-2.4.jar:/Users/gnodet/.m2/repository/org/hamcrest/hamcrest-core/1.1/hamcrest-core-1.1.jar\nINFO  | main | Server environment:java.library.path=/Applications/IntelliJ IDEA 11 CE.app/Contents/Resources/Java:/System/Library/PrivateFrameworks/JavaApplicationLauncher.framework/Resources:/Users/gnodet/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.\nINFO  | main | Server environment:java.io.tmpdir=/var/folders/y8/5k0p4jvs33538phm7v5f30940000gn/T/\nINFO  | main | Server environment:java.compiler=<NA>\nINFO  | main | Server environment:os.name=Mac OS X\nINFO  | main | Server environment:os.arch=x86_64\nINFO  | main | Server environment:os.version=10.7.5\nINFO  | main | Server environment:user.name=gnodet\nINFO  | main | Server environment:user.home=/Users/gnodet\nINFO  | main | Server environment:user.dir=/Users/gnodet/work/git/fuseenterprise\nINFO  | main | tickTime set to 3000\nINFO  | main | minSessionTimeout set to -1\nINFO  | main | maxSessionTimeout set to -1\nINFO  | main | binding to port 0.0.0.0/0.0.0.0:8888\nINFO  | main | Snapshotting: 0x0 to data/zookeeper/1349279995482/version-2/snapshot.0\nINFO  | main | Client environment:zookeeper.version=3.4.3-1240972, built on 02/06/2012 10:48 GMT\nINFO  | main | Client environment:host.name=192.168.0.133\nINFO  | main | Client environment:java.version=1.7.0-jdk7u6-b20\nINFO  | main | Client environment:java.vendor=Oracle Corporation\nINFO  | main | Client environment:java.home=/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre\nINFO  | main | Client environment:java.class.path=/Applications/IntelliJ IDEA 11 CE.app/lib/idea_rt.jar:/Applications/IntelliJ IDEA 11 CE.app/plugins/junit/lib/junit-rt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/lib/tools.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/JObjC.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/rhino.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/1.7.0u6.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-zookeeper/target/test-classes:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-zookeeper/target/classes:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-linkedin-zookeeper/target/classes:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.zookeeper-impl/1.4.0/org.linkedin.zookeeper-impl-1.4.0.jar:/Users/gnodet/.m2/repository/org/apache/zookeeper/zookeeper/3.4.3/zookeeper-3.4.3.jar:/Users/gnodet/.m2/repository/org/slf4j/slf4j-api/1.6.1/slf4j-api-1.6.1.jar:/Users/gnodet/.m2/repository/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.jar:/Users/gnodet/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar:/Users/gnodet/.m2/repository/jline/jline/0.9.94/jline-0.9.94.jar:/Users/gnodet/.m2/repository/junit/junit/4.10/junit-4.10.jar:/Users/gnodet/.m2/repository/org/jboss/netty/netty/3.2.2.Final/netty-3.2.2.Final.jar:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.util-core/1.4.0/org.linkedin.util-core-1.4.0.jar:/Users/gnodet/.m2/repository/org/linkedin/org.linkedin.util-groovy/1.7.1/org.linkedin.util-groovy-1.7.1.jar:/Users/gnodet/.m2/repository/org/slf4j/jul-to-slf4j/1.5.8/jul-to-slf4j-1.5.8.jar:/Users/gnodet/.m2/repository/org/apache/ant/ant/1.8.1/ant-1.8.1.jar:/Users/gnodet/.m2/repository/org/apache/ant/ant-launcher/1.8.1/ant-launcher-1.8.1.jar:/Users/gnodet/.m2/repository/org/json/json/20090211/json-20090211.jar:/Users/gnodet/.m2/repository/org/jasypt/jasypt/1.7/jasypt-1.7.jar:/Users/gnodet/.m2/repository/com/jcraft/jsch/0.1.42/jsch-0.1.42.jar:/Users/gnodet/work/git/fuseenterprise/fabric/fabric-utils/target/classes:/Users/gnodet/.m2/repository/org/osgi/org.osgi.core/4.2.0/org.osgi.core-4.2.0.jar:/Users/gnodet/.m2/repository/org/osgi/org.osgi.compendium/4.2.0/org.osgi.compendium-4.2.0.jar:/Users/gnodet/.m2/repository/commons-logging/commons-logging-api/1.1/commons-logging-api-1.1.jar:/Users/gnodet/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.5/jackson-mapper-asl-1.9.5.jar:/Users/gnodet/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.5/jackson-core-asl-1.9.5.jar:/Users/gnodet/.m2/repository/org/easymock/easymock/2.4/easymock-2.4.jar:/Users/gnodet/.m2/repository/org/hamcrest/hamcrest-core/1.1/hamcrest-core-1.1.jar\nINFO  | main | Client environment:java.library.path=/Applications/IntelliJ IDEA 11 CE.app/Contents/Resources/Java:/System/Library/PrivateFrameworks/JavaApplicationLauncher.framework/Resources:/Users/gnodet/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.\nINFO  | main | Client environment:java.io.tmpdir=/var/folders/y8/5k0p4jvs33538phm7v5f30940000gn/T/\nINFO  | main | Client environment:java.compiler=<NA>\nINFO  | main | Client environment:os.name=Mac OS X\nINFO  | main | Client environment:os.arch=x86_64\nINFO  | main | Client environment:os.version=10.7.5\nINFO  | main | Client environment:user.name=gnodet\nINFO  | main | Client environment:user.home=/Users/gnodet\nINFO  | main | Client environment:user.dir=/Users/gnodet/work/git/fuseenterprise\nINFO  | main | Initiating client connection, connectString=localhost:8888 sessionTimeout=30000 watcher=org.fusesource.fabric.zookeeper.internal.ZooKeeperAclTest$2@2f2ffd81\nDEBUG | main | zookeeper.disableAutoWatchReset is false\nINFO  | main-SendThread() | Opening socket connection to server /0:0:0:0:0:0:0:1:8888\nINFO  | main-SendThread(localhost:8888) | Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.\nINFO  | main-SendThread(localhost:8888) | Socket connection established to localhost/0:0:0:0:0:0:0:1:8888, initiating session\nINFO  | NIOServerCxn.Factory:0.0.0.0/0.0.0.0:8888 | Accepted socket connection from /0:0:0:0:0:0:0:1:65455\nDEBUG | main-SendThread(localhost:8888) | Session establishment request sent on localhost/0:0:0:0:0:0:0:1:8888\nDEBUG | NIOServerCxn.Factory:0.0.0.0/0.0.0.0:8888 | Session establishment request from client /0:0:0:0:0:0:0:1:65455 client's lastZxid is 0x0\nINFO  | NIOServerCxn.Factory:0.0.0.0/0.0.0.0:8888 | Client attempting to establish new session at /0:0:0:0:0:0:0:1:65455\nTRACE | NIOServerCxn.Factory:0.0.0.0/0.0.0.0:8888 | SessionTrackerImpl --- Adding session 0x13a275ad7df0000 30000\nTRACE | ProcessThread(sid:0 cport:-1): | :Psessionid:0x13a275ad7df0000 type:createSession cxid:0x0 zxid:0xfffffffffffffffe txntype:unknown reqpath:n/a\nTRACE | ProcessThread(sid:0 cport:-1): | SessionTrackerImpl --- Existing session 0x13a275ad7df0000 30000\nINFO  | SyncThread:0 | Creating new log file: log.1\nDEBUG | SyncThread:0 | Processing request:: sessionid:0x13a275ad7df0000 type:createSession cxid:0x0 zxid:0x1 txntype:-10 reqpath:n/a\nTRACE | SyncThread:0 | :Esessionid:0x13a275ad7df0000 type:createSession cxid:0x0 zxid:0x1 txntype:-10 reqpath:n/a\nTRACE | SyncThread:0 | SessionTrackerImpl --- Existing session 0x13a275ad7df0000 30000\nDEBUG | SyncThread:0 | sessionid:0x13a275ad7df0000 type:createSession cxid:0x0 zxid:0x1 txntype:-10 reqpath:n/a\nINFO  | SyncThread:0 | Established session 0x13a275ad7df0000 with negotiated timeout 30000 for client /0:0:0:0:0:0:0:1:65455\nTRACE | main-SendThread(localhost:8888) | readConnectResult 37 0x[0,0,0,0,0,0,75,30,1,3a,27,5a,ffffffd7,ffffffdf,0,0,0,0,0,10,ffffffd3,ffffffd8,ffffffd4,ffffffc8,64,15,ffffff87,66,69,ffffffbf,ffffffec,1c,4d,1e,34,1d,0,]\nINFO  | main-SendThread(localhost:8888) | Session establishment complete on server localhost/0:0:0:0:0:0:0:1:8888, sessionid = 0x13a275ad7df0000, negotiated timeout = 30000\nEvent: WatchedEvent state:SyncConnected type:None path:null\nTRACE | ProcessThread(sid:0 cport:-1): | :Psessionid:0x13a275ad7df0000 type:create cxid:0x1 zxid:0xfffffffffffffffe txntype:unknown reqpath:/foo\nDEBUG | SyncThread:0 | Processing request:: sessionid:0x13a275ad7df0000 type:create cxid:0x1 zxid:0x2 txntype:1 reqpath:n/a\nTRACE | SyncThread:0 | :Esessionid:0x13a275ad7df0000 type:create cxid:0x1 zxid:0x2 txntype:1 reqpath:n/a\nDEBUG | SyncThread:0 | sessionid:0x13a275ad7df0000 type:create cxid:0x1 zxid:0x2 txntype:1 reqpath:n/a\nDEBUG | main-SendThread(localhost:8888) | Reading reply sessionid:0x13a275ad7df0000, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,2,0  request:: '/foo,#64617461,v{s{31,s{'digest,'user:tpUq/4Pn5A64fVZyQ0gOJ8ZWqkY=}}},0  response:: '/foo \nTRACE | ProcessThread(sid:0 cport:-1): | :Psessionid:0x13a275ad7df0000 type:delete cxid:0x2 zxid:0xfffffffffffffffe txntype:unknown reqpath:/foo\nDEBUG | SyncThread:0 | Processing request:: sessionid:0x13a275ad7df0000 type:delete cxid:0x2 zxid:0x3 txntype:2 reqpath:n/a\nTRACE | SyncThread:0 | :Esessionid:0x13a275ad7df0000 type:delete cxid:0x2 zxid:0x3 txntype:2 reqpath:n/a\nDEBUG | SyncThread:0 | sessionid:0x13a275ad7df0000 type:delete cxid:0x2 zxid:0x3 txntype:2 reqpath:n/a\nDEBUG | main-SendThread(localhost:8888) | Reading reply sessionid:0x13a275ad7df0000, packet:: clientPath:null serverPath:null finished:false header:: 2,2  replyHeader:: 2,3,0  request:: '/foo,-1  response:: null\n\njava.lang.AssertionError: Expected failure due to session not authenticated\n\tat org.junit.Assert.fail(Assert.java:93)\n\tat org.fusesource.fabric.zookeeper.internal.ZooKeeperAclTest.testDelete(ZooKeeperAclTest.java:109)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:300)\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:157)\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)\n\n\nProcess finished with exit code 255\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","key":"gnt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnt&avatarId=35232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnt&avatarId=35232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnt&avatarId=35232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnt&avatarId=35232"},"displayName":"Guillaume Nodet","active":true,"timeZone":"Europe/Berlin"},"created":"2012-10-03T16:00:32.024+0000","updated":"2012-10-03T16:00:32.024+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12610093/comment/13468641","id":"13468641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","key":"gnt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnt&avatarId=35232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnt&avatarId=35232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnt&avatarId=35232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnt&avatarId=35232"},"displayName":"Guillaume Nodet","active":true,"timeZone":"Europe/Berlin"},"body":"Actually, it seems the DELETE permission apply to children, so in my case, the ACLs for the root node are used.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","key":"gnt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnt&avatarId=35232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnt&avatarId=35232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnt&avatarId=35232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnt&avatarId=35232"},"displayName":"Guillaume Nodet","active":true,"timeZone":"Europe/Berlin"},"created":"2012-10-03T16:08:26.086+0000","updated":"2012-10-03T16:08:26.086+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1555/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02j5r:"}}