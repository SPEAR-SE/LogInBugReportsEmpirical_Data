{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12403118","self":"https://issues.apache.org/jira/rest/api/2/issue/12403118","key":"ZOOKEEPER-126","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2008-10-23T23:16:35.979+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jan 10 01:29:47 UTC 2012","customfield_12310420":"2179","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-126/watchers","watchCount":4,"isWatching":false},"created":"2008-08-26T21:25:00.557+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12346492","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12346492","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"12524367","key":"ZOOKEEPER-1202","self":"https://issues.apache.org/jira/rest/api/2/issue/12524367","fields":{"summary":"Prevent certain state transitions in Java client on close(); improve exception handling and enhance client testability","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12333802","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12333802","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12471442","key":"ZOOKEEPER-846","self":"https://issues.apache.org/jira/rest/api/2/issue/12471442","fields":{"summary":"zookeeper client doesn't shut down cleanly on the close call","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12321454","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12321454","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12399322","key":"ZOOKEEPER-63","self":"https://issues.apache.org/jira/rest/api/2/issue/12399322","fields":{"summary":"Race condition in client close() operation","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-04-23T21:57:30.069+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312381","id":"12312381","name":"java client","description":"The java client interface for ZooKeeper"}],"timeoriginalestimate":null,"description":"Moving the hang issue from ZOOKEEPER-63 to here. See 63 for background and potential patch (patch_ZOOKEEPER-63.patch).\n\nspecifically (from James): \n\n\"I'm thinking the close() method should not wait() forever on the disconnect packet, just a closeTimeout length - say a few seconds. Afterall blocking and forcing a reconnect just to redeliver the disconnect packet seems a bit silly - when the server has to deal with clients which just have their sockets fail anyway\"","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12494819","id":"12494819","filename":"ZOOKEEPER-126.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mspycher","name":"mspycher","key":"mspycher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Spycher","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-16T16:45:49.851+0000","size":10045,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12494819/ZOOKEEPER-126.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12388954","id":"12388954","filename":"ZOOKEEPER-126.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-08-26T21:30:48.739+0000","size":2559,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12388954/ZOOKEEPER-126.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"33221","customfield_12312823":null,"summary":"zookeeper client close operation may block indefinitely","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/12625878","id":"12625878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Moved this patch from ZOOKEEPER-63 to here.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-08-26T21:30:48.779+0000","updated":"2008-08-26T21:30:48.779+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/12642338","id":"12642338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"was this problem fixed with fixes to the client code in 3.0?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-23T23:16:35.979+0000","updated":"2008-10-23T23:16:35.979+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/12842109","id":"12842109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Not a blocker, pushing to 3.4.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-03-05T23:23:26.411+0000","updated":"2010-03-05T23:23:26.411+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/13106583","id":"13106583","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mspycher","name":"mspycher","key":"mspycher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Spycher","active":true,"timeZone":"America/Los_Angeles"},"body":"The latest attachment works for 3.4. It uses a latch and timeout to prevent blocking -- not sure if we require ZK to work on JREs without concurrency utils.\n\nIt includes a test that introduces an awaitTermination() method to join send and event threads. This functionality is not exposed in the public API though users could subclass ZooKeeper and use it as this patch does for testing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mspycher","name":"mspycher","key":"mspycher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Spycher","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-16T16:45:49.900+0000","updated":"2011-09-16T16:45:49.900+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/13114934","id":"13114934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlord","name":"dlord","key":"dlord","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Lord","active":true,"timeZone":"Etc/UTC"},"body":"Hey guys, I just ran in to a cascading failure that ended up settling on this.  The issue was my SendThread was killed by an NPE when trying to log some unknown exception.  The line that caused the SendThread to die was: \n\nat org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1161)\n\nThis is using zookeeper 3.3.2.  The NPE from the logging ends up killing the SendThread by an uncaught exception.  Eventually the lack of a send thread causes the client to disconnect/expire.  At this point the zookeeper client is close()'d.  The close call will hang forever because the final packet is never sent so it is never ACK'd or notify()'d and we stall out forever. \n\nShould this NPE be filed as a new issue or are you all content that this timed close will solve the problem?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlord","name":"dlord","key":"dlord","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Lord","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-26T21:09:24.945+0000","updated":"2011-09-26T21:09:24.945+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/13174126","id":"13174126","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owulff","name":"owulff","key":"owulff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oliver Wulff","active":true,"timeZone":"Europe/Berlin"},"body":"Why is this issue pushed to 3.5.0?\n\nI think I saw the same issue here with 3.3.3:\njava.lang.Object.wait(Native Method)\njava.lang.Object.wait(Object.java:485)\norg.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1317)\norg.apache.zookeeper.ClientCnxn.close(ClientCnxn.java:1295)\norg.apache.zookeeper.ZooKeeper.close(ZooKeeper.java:531)\n   - locked org.apache.zookeeper.ZooKeeper@26827e\n\nThe thread is blocked which impacts other threads then.\n\nMy guess is that the network here is not very reliable and therefore we run into this blocking issue.\n\nIMHO, it makes perfect sense to *not* wait for unlimited time if closing the connection blocks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owulff","name":"owulff","key":"owulff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oliver Wulff","active":true,"timeZone":"Europe/Berlin"},"created":"2011-12-21T14:57:40.587+0000","updated":"2011-12-21T14:57:40.587+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/13174219","id":"13174219","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mspycher","name":"mspycher","key":"mspycher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Spycher","active":true,"timeZone":"America/Los_Angeles"},"body":"Incorporates the same fix and more","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mspycher","name":"mspycher","key":"mspycher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Spycher","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-21T17:04:28.999+0000","updated":"2011-12-21T17:04:28.999+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/13174222","id":"13174222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mspycher","name":"mspycher","key":"mspycher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Spycher","active":true,"timeZone":"America/Los_Angeles"},"body":"1202 incorporates the fix for 126 and more","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mspycher","name":"mspycher","key":"mspycher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Spycher","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-21T17:06:37.464+0000","updated":"2011-12-21T17:06:37.464+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/13174267","id":"13174267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"@oliver I think the issue is that limiting the wait time would change the semantics of the close call. Not something we typically do in a minor release.\n\nHowever I could see us adding a close(timeout) method which provides this capability. (probably would have been better to start with that, hindsight is always 20/20)\n\n@daniel I think you should open a jira on that NPE issue you mentioned (if you haven't already - although I don't see it \"linked\" to this jira)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-21T18:12:32.371+0000","updated":"2011-12-21T18:12:32.371+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/13182461","id":"13182461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owulff","name":"owulff","key":"owulff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oliver Wulff","active":true,"timeZone":"Europe/Berlin"},"body":"I understand your concern. Any chance to get this into 3.3.5?\n\nIt would be great if the closeTimeout could be configured in Zookeeper config file (ex. zoo.cfg).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owulff","name":"owulff","key":"owulff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oliver Wulff","active":true,"timeZone":"Europe/Berlin"},"created":"2012-01-09T11:40:33.045+0000","updated":"2012-01-09T11:40:33.045+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403118/comment/13182987","id":"13182987","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Oliver - a system property would be less invasive. However there is then the issue of supporting backward compatibility. (3.3.5 to 3.4 to 3.5/...)\n\nIt seems to me that we need to address the underlying cause of the problem otherwise unexpected/bad behavior might happen that we don't handle. Say the SendThread exited case, if the EventThread is still running it's likely that we'll start leaking threads. Shouldn't we fix the root issue rather than papering over it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-01-10T01:29:47.847+0000","updated":"2012-01-10T01:29:47.847+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-126/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i061sf:"}}