{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12685075","self":"https://issues.apache.org/jira/rest/api/2/issue/12685075","key":"ZOOKEEPER-1846","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2015-02-25T02:42:53.076+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jan 16 06:40:45 UTC 2017","customfield_12310420":"364152","customfield_12312320":null,"customfield_12310222":"1_*:*_2_*:*_63119805014_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_34185960237","customfield_12312321":null,"resolutiondate":"2017-01-16T06:40:45.218+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1846/watchers","watchCount":12,"isWatching":false},"created":"2013-12-17T01:18:00.072+0000","customfield_12310192":"Forces the re-resolve, on error, of the Peers' Hostname to IP address, which is an issue in virtual/cloud environments where IPs are assigned dynamically upon every container startup.\nIf the Hostname is unresolvable or the connection fails (IP change), this DNS refresh process is immediately triggered.","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["patch"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323310","id":"12323310","description":"Fix release against 3.4 branch","name":"3.4.6","archived":false,"released":true,"releaseDate":"2014-03-10"}],"issuelinks":[{"id":"12491246","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12491246","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12597797","key":"ZOOKEEPER-1506","self":"https://issues.apache.org/jira/rest/api/2/issue/12597797","fields":{"summary":"Re-try DNS hostname -> IP resolution if node connection fails","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-01-16T06:40:45.288+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312379","id":"12312379","name":"quorum","description":"Quorum determination for ZooKeeper"}],"timeoriginalestimate":null,"description":"The class QuorumPeer maintains a Map<Long, QuorumServer> quorumPeers.\nEach QuorumServer is created with an instance of InetSocketAddress electionAddr, and holds it forever.\n\nI believe this is why the ZooKeeper servers can't resolve each other dynamically: If a ZooKeeper in the ensemble cannot be resolved at startup, it will never be resolved (until restart of the JVM), constantly failing with an UnknownHostException, even when the node is back up and reachable.\n\nI would suggest to recreate an InetSocketAddress every time we retry the connection.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12700668","id":"12700668","filename":"DynamicIP.java.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T04:34:44.160+0000","size":2769,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12700668/DynamicIP.java.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12700661","id":"12700661","filename":"Learner.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T02:47:30.711+0000","size":22680,"mimeType":"text/x-java","content":"https://issues.apache.org/jira/secure/attachment/12700661/Learner.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12700663","id":"12700663","filename":"QuorumCnxManager.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T02:47:30.721+0000","size":31493,"mimeType":"text/x-java","content":"https://issues.apache.org/jira/secure/attachment/12700663/QuorumCnxManager.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12700662","id":"12700662","filename":"QuorumPeer.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T02:47:30.716+0000","size":41718,"mimeType":"text/x-java","content":"https://issues.apache.org/jira/secure/attachment/12700662/QuorumPeer.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"364452","customfield_12312823":null,"summary":"Cached InetSocketAddresses prevent proper dynamic DNS resolution","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjamin.jaton","name":"benjamin.jaton","key":"benjamin.jaton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Jaton","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjamin.jaton","name":"benjamin.jaton","key":"benjamin.jaton","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Jaton","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14335904","id":"14335904","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"body":"I had the same issue but thanks to the log messages I was able to find and fix at the source, the situation when a IP address is still unavailable or changes all the sudden is actually VERY common in most major cloud solutions nowadays, what actually makes this bug SEVERE for the high availability does not work at all in such DNS changes, even overriding the DNS caching setting in Java is useless.\n\nThis issue affects, at least, the following methods:\norg.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:71)\nconnectOne(QuorumCnxManager.java:369)\n\nAnd the solution was to add a call to a new method located in:\norg.apache.zookeeper.server.quorum.QuorumPeer.QuorumServer.refreshDNS()\n\nAnd call it upon a IOException on the methods listed above, now I can start nodes anytime (even saving my DNS container for last), restart them (IPs are always different) and the negotiation works like a charm.\n\nTo say this issue is \"Minor\" is not understandable for nowadays all sorts of systems are virtualized and, most the time, IPs  address are dynamically assigned upon system startup and when multiple nodes start as the same time it is likely that a few moments will be needed for the IPs to be assigned... that is exactly what I go through with docker and Zookeeper.\n\nThis is the new method added (org.apache.zookeeper.server.quorum.QuorumPeer.QuorumServer.refreshDNS()):\n        /**\n         * Forces the resolution of the hostname to IP address, for this can be dynamic and on some\n         * occasions even not available by the time the service starts\n         */\n        public void refreshDNS() {\n        \tLOG.debug(\"Refreshing DNS for Quorum Peer \" + electionAddr);\n        \t\n        \tif (electionAddr != null) {\n        \t\telectionAddr = new InetSocketAddress(electionAddr.getHostName(), electionAddr.getPort());\n        \t}\n        \t\n        \tif (addr != null) {\n        \t\taddr = new InetSocketAddress(addr.getHostName(), addr.getPort());\n        \t}\n\nThis is how the catch clauses of the affected methods look like now:\n} catch (IOException e) {\n                //This code corrects a negative or out-dated cache hits avoid the servers from communicating, by forcing it to resolve again of the Hostname to a IP Address\n                self.getView().get(sid).refreshDNS();\n                self.quorumPeers.get(sid).refreshDNS();\n                \n                LOG.warn(\"Cannot open channel to \" + sid\n                        + \" at election address \" + electionAddr,\n                        e);\n            }","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T02:42:53.076+0000","updated":"2015-02-25T02:42:53.076+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14335905","id":"14335905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"body":"I had the same issue but thanks to the log messages I was able to find and fix at the source, the situation when a IP address is still unavailable or changes all the sudden is actually VERY common in most major cloud solutions nowadays, what actually makes this bug SEVERE for the high availability does not work at all in such DNS changes, even overriding the DNS caching setting in Java is useless.\n\nThis issue affects, at least, the following methods:\norg.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:71)\nconnectOne(QuorumCnxManager.java:369)\n\nAnd the solution was to add a call to a new method located in:\norg.apache.zookeeper.server.quorum.QuorumPeer.QuorumServer.refreshDNS()\n\nAnd call it upon a IOException on the methods listed above, now I can start nodes anytime (even saving my DNS container for last), restart them (IPs are always different) and the negotiation works like a charm.\n\nTo say this issue is \"Minor\" is not understandable for nowadays all sorts of systems are virtualized and, most the time, IPs  address are dynamically assigned upon system startup and when multiple nodes start as the same time it is likely that a few moments will be needed for the IPs to be assigned... that is exactly what I go through with docker and Zookeeper.\n\nThis is the new method added (org.apache.zookeeper.server.quorum.QuorumPeer.QuorumServer.refreshDNS()):\n        /**\n         * Forces the resolution of the hostname to IP address, for this can be dynamic and on some\n         * occasions even not available by the time the service starts\n         */\n        public void refreshDNS() {\n        \tLOG.debug(\"Refreshing DNS for Quorum Peer \" + electionAddr);\n        \t\n        \tif (electionAddr != null) {\n        \t\telectionAddr = new InetSocketAddress(electionAddr.getHostName(), electionAddr.getPort());\n        \t}\n        \t\n        \tif (addr != null) {\n        \t\taddr = new InetSocketAddress(addr.getHostName(), addr.getPort());\n        \t}\n\nThis is how the catch clauses of the affected methods look like now:\n} catch (IOException e) {\n                //This code corrects a negative or out-dated cache hits avoid the servers from communicating, by forcing it to resolve again of the Hostname to a IP Address\n                self.getView().get(sid).refreshDNS();\n                self.quorumPeers.get(sid).refreshDNS();\n                \n                LOG.warn(\"Cannot open channel to \" + sid\n                        + \" at election address \" + electionAddr,\n                        e);\n            }","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T02:46:25.522+0000","updated":"2015-02-25T02:46:25.522+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14335906","id":"14335906","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"body":"Forces the re-resolve, on error, of the Peers' Hostname to IP address, which is an issue in virtual/cloud environments where IPs are assigned dynamically upon every container startup.\nIf the Hostname is unresolvable or the connection fails (IP change), this DNS refresh process is immediately triggered.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T02:47:30.726+0000","updated":"2015-02-25T02:47:30.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14335911","id":"14335911","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12700663/QuorumCnxManager.java\n  against trunk revision 1662055.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2532//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-25T02:51:01.871+0000","updated":"2015-02-25T02:51:01.871+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14335974","id":"14335974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"body":"Forces the re-resolve, on error, of the Peers' Hostname to IP address, which is an issue in virtual/cloud environments where IPs are assigned dynamically upon every container startup.\nIf the Hostname is unresolvable or the connection fails (IP change), this DNS refresh process is immediately triggered.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T04:24:06.165+0000","updated":"2015-02-25T04:24:06.165+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14335981","id":"14335981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12700667/DynamicIP.java.patch\n  against trunk revision 1662055.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2533//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-25T04:31:05.455+0000","updated":"2015-02-25T04:31:05.455+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14335985","id":"14335985","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"body":"Forces the re-resolve, on error, of the Peers' Hostname to IP address, which is an issue in virtual/cloud environments where IPs are assigned dynamically upon every container startup.\nIf the Hostname is unresolvable or the connection fails (IP change), this DNS refresh process is immediately triggered.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitsrael","name":"mitsrael","key":"mitsrael","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Duske","active":true,"timeZone":"America/New_York"},"created":"2015-02-25T04:34:44.168+0000","updated":"2015-02-25T04:34:44.168+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14335990","id":"14335990","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12700668/DynamicIP.java.patch\n  against trunk revision 1662055.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2534//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-25T04:40:58.667+0000","updated":"2015-02-25T04:40:58.667+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14616025","id":"14616025","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user yongtang opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/37\n\n    ZOOKEEPER-1846: Always recreate socket addresses for any DNS change.\n\n    This pull is also related to ZOOKEEPER-1506. The fix allows DNS changes to be applied when ZooKeeper is running. ZOOKEEPER-1506 partially solves this issue, which has already been\n    applied to ZooKeeper 3.5.1 (RC3). This pull request allows ZOOKEEPER-1846 to be fixed as well.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/yongtang/zookeeper branch-3.5\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/37.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #37\n    \n----\ncommit 92a55a764f54521d3cd745a26f2fedfa7b5804ac\nAuthor: yongtang <yongtang@users.noreply.github.com>\nDate:   2015-07-07T01:15:50Z\n\n    ZOOKEEPER-1846: Always recreate socket addresses for any DNS change. This fix is also related to ZOOKEEPER-1506.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-07-07T01:20:35.333+0000","updated":"2015-07-07T01:20:35.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14616094","id":"14616094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12700668/DynamicIP.java.patch\n  against trunk revision 1689211.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2807//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-07-07T02:47:14.109+0000","updated":"2015-07-07T02:47:14.109+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14616128","id":"14616128","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"body":"Is this a duplicate of ZOOKEEPER-1506?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-07T03:43:31.722+0000","updated":"2015-07-07T03:43:31.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/14720231","id":"14720231","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rthille","name":"rthille","key":"rthille","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rthille&avatarId=22121","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rthille&avatarId=22121","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rthille&avatarId=22121","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rthille&avatarId=22121"},"displayName":"Robert P. Thille","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like a duplicate of [Zookeeper-1506|https://issues.apache.org/jira/browse/ZOOKEEPER-1506] to me.  The patch on this one looks  nice and small too...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rthille","name":"rthille","key":"rthille","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rthille&avatarId=22121","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rthille&avatarId=22121","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rthille&avatarId=22121","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rthille&avatarId=22121"},"displayName":"Robert P. Thille","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-28T16:59:29.214+0000","updated":"2015-08-28T16:59:29.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/15211386","id":"15211386","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"[~benjamin.jaton] can you confirm that this is resolved by ZOOKEEPER-1506 ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-25T03:51:04.342+0000","updated":"2016-03-25T03:51:04.342+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/15211555","id":"15211555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12700668/DynamicIP.java.patch\n  against trunk revision 1736259.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3119//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-03-25T07:32:35.991+0000","updated":"2016-03-25T07:32:35.991+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/15213155","id":"15213155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Moving out of PA given we're waiting on feedback (see recent comments) on whether this is already fixed by ZOOKEEPER-1506","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-26T18:52:25.770+0000","updated":"2016-03-26T18:52:25.770+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12685075/comment/15823530","id":"15823530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"I am pretty sure this is a duplicate of ZOOKEEPER-1506; resolve as dup.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-01-16T06:40:45.273+0000","updated":"2017-01-16T06:40:45.273+0000"}],"maxResults":16,"total":16,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1846/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1qrnr:"}}