{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12920127","self":"https://issues.apache.org/jira/rest/api/2/issue/12920127","key":"ZOOKEEPER-2338","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340141","id":"12340141","description":"Beta release against 3.5 branch","name":"3.5.4","archived":false,"released":true,"releaseDate":"2018-05-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-10-25T19:29:50.654+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 19 00:38:43 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_63007333271_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-12-06T22:59:39.848+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2338/watchers","watchCount":4,"isWatching":false},"created":"2015-12-08T16:57:26.634+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335444","id":"12335444","description":"Beta release against 3.5 branch","name":"3.5.3","archived":false,"released":true,"releaseDate":"2017-04-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12339207","id":"12339207","description":"Fix release against 3.4 branch","name":"3.4.11","archived":false,"released":true,"releaseDate":"2017-11-09"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false}],"issuelinks":[{"id":"12516016","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12516016","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12918151","key":"MESOS-4065","self":"https://issues.apache.org/jira/rest/api/2/issue/12918151","fields":{"summary":"slave FD for ZK tcp connection leaked to executor process","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10020","description":"","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/generic.png","name":"Accepted","id":"10020","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fr0stbyte","name":"fr0stbyte","key":"fr0stbyte","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Radu Brumariu","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-01-19T00:38:43.077+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312380","id":"12312380","name":"c client","description":"The c client interface to ZooKeeper"}],"timeoriginalestimate":null,"description":"I've observed socket FD leaks in Apache Mesos when using ZK to coordinate master leadership: https://issues.apache.org/jira/browse/MESOS-4065","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"c bindings should create socket's with SOCK_CLOEXEC to avoid fd leaks on fork/exec","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdef","name":"jdef","key":"jdef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jdef&avatarId=34776","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jdef&avatarId=34776","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jdef&avatarId=34776","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jdef&avatarId=34776"},"displayName":"James DeFelice","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdef","name":"jdef","key":"jdef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jdef&avatarId=34776","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jdef&avatarId=34776","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jdef&avatarId=34776","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jdef&avatarId=34776"},"displayName":"James DeFelice","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16219361","id":"16219361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user fr0stbyte opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/407\n\n    [ZOOKEEPER-2338] - set SOCK_CLOEXEC on socket if defined\n\n    This addresses the issue in https://issues.apache.org/jira/browse/ZOOKEEPER-2338 preventing the sockets to leak into the forked children \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/fr0stbyte/zookeeper radu/cloexec_on_c_client\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/407.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #407\n    \n----\ncommit 431742cd8f1726c17e3afdedf553b79663294177\nAuthor: Radu Brumariu <radu@groupon.com>\nDate:   2017-10-25T18:24:17Z\n\n    [ZOOKEEPER-2338] - set SOCK_CLOEXEC on socket if defined\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-25T19:29:50.654+0000","updated":"2017-10-25T19:29:50.654+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16219985","id":"16219985","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +0 tests included.  The patch appears to be a documentation patch that doesn't require tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1120//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1120//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1120//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-26T05:24:41.620+0000","updated":"2017-10-26T05:24:41.620+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16221002","id":"16221002","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +0 tests included.  The patch appears to be a documentation patch that doesn't require tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1122//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1122//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1122//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-26T18:47:38.502+0000","updated":"2017-10-26T18:47:38.502+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16222514","id":"16222514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte closed the pull request at:\n\n    https://github.com/apache/zookeeper/pull/407\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-27T15:03:19.542+0000","updated":"2017-10-27T15:03:19.542+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16222516","id":"16222516","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user fr0stbyte opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/410\n\n    [ZOOKEEPER-2338] - set SOCK_CLOEXEC on socket if defined\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/fr0stbyte/zookeeper ZOOKEEPER-2338\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/410.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #410\n    \n----\ncommit e7fb9fc9fb0140c35869af255d39e643597b517c\nAuthor: Radu Brumariu <radu@groupon.com>\nDate:   2017-10-25T18:24:17Z\n\n    [ZOOKEEPER-2338] - set SOCK_CLOEXEC on socket if defined\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-27T15:04:05.002+0000","updated":"2017-10-27T15:04:05.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16222534","id":"16222534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +0 tests included.  The patch appears to be a documentation patch that doesn't require tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1125//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1125//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1125//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-27T15:17:40.079+0000","updated":"2017-10-27T15:17:40.079+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16222786","id":"16222786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user afine commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    Hi @fr0stbyte \r\n    \r\n    I see in the JIRA that this ticked arises from an issue related to running ZooKeeper Mesos. Would you be able to explain exactly why this is needed?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-27T20:47:38.032+0000","updated":"2017-10-27T20:47:38.032+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16235179","id":"16235179","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    @afine Thanks for looking at the PR\r\n    Here is the bug tracked on Mesos side : https://issues.apache.org/jira/browse/MESOS-4065\r\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-02T04:58:14.270+0000","updated":"2017-11-02T04:58:14.270+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16236559","id":"16236559","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user afine commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    @fr0stbyte Thanks for linking to the Mesos bug. Unfortunately, I am not familiar with the way Mesos handles processes and I think it is possible that other members of the community share my ignorance.\r\n    \r\n    Would you mind describing the conditions that are necessary to reproduce this bug?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-02T20:42:23.417+0000","updated":"2017-11-02T20:42:23.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16238782","id":"16238782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user anmolnar commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    @fr0stbyte Reading some Stackoverflow about the flag (https://stackoverflow.com/questions/22304631/what-is-the-purpose-to-set-sock-cloexec-flag-with-accept4-same-as-o-cloexec), the change looks reasonable to me. However it would be beneficial to shed some light on how it's related to your scenario.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-04T05:11:23.550+0000","updated":"2017-11-04T05:11:23.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16254198","id":"16254198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    This looks like a non-backward compatible change to me. That said I'm not sure how many clients would rely on this behavior. thoughts?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-15T21:11:48.417+0000","updated":"2017-11-15T21:11:48.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16254592","id":"16254592","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    @phunt I'd have no problem making in backward compatible, but I am not sure how. Can you offer some guidance here ?\r\n    @anmolnar In the description of MESOS-4065 you can see 2 processes that share the same open file descriptor. In Linux ( Unix in general ) upon forking, the child inherits all the open files of the parent, unless the O_CLOEXEC option has been set on the file descriptor. My change uses the SOCK_CLOEXEC which is an atomic set of that flag. The alternative is to open it and then use `fcntl` to set the flag, but that leaves space for a race as a process could fork before.\r\n    Since the child process does not need / makes use of the open file descriptor it is proper to close it before exec'ing. I wouldn't say it's a functional bug, but rather good housekeeping ( afaict ).\r\n    @afine I think in order to reproduce it, you need a process that uses the C client, then that forks and execs something else. To verify, look at the open file descriptors for the 2 processes and verify that the open socket to zookeeper is not available in the child.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-16T01:20:58.769+0000","updated":"2017-11-16T01:20:58.769+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16256282","id":"16256282","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    > I am not sure how\r\n    \r\n    Yea, same here I'm afraid.\r\n    \r\n    In thinking about it a bit perhaps what we could do is one of the following two option (might be more):\r\n    \r\n    1)  add it with some extra tooling in autoconf (and probably now cmake since it was recently introduced). Basically: add a new flag that the user (person compiling the library) could use to enable/disable SOCK_CLOEXEC when running ./configure.\r\n    \r\n    In 3.5 the default behavior would be to not use SOCK_CLOEXEC regardless whether it's supported or not (user can override default with the option). In 3.6 and later we'd make SOCK_CLOEXEC the default and call it out as a potential issue as part of the release notes (disable with the option in this case).\r\n    \r\n    2) it seems like we could do similar with a runtime property that the user could set in code prior to running zookeeper_init that would be global in nature. e.g. zoo_deterministic_conn_order\r\n    \r\n    Again the defaults would be as specified in 1) above.\r\n    \r\n    Thoughts?\r\n    \r\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-17T01:29:23.041+0000","updated":"2017-11-17T01:29:23.041+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16261485","id":"16261485","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    @phunt both options seem fine to me. I think would prefer the first one, that way if the library remains ABI compatible, the clients won't need to recompile.\r\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-21T21:10:24.275+0000","updated":"2017-11-21T21:10:24.275+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16267799","id":"16267799","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    @phunt Let me know if the changes are inline with what you've had in mind. Once we clear that, I will add the changes for 3.6\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-27T23:35:58.048+0000","updated":"2017-11-27T23:35:58.048+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16267818","id":"16267818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +0 tests included.  The patch appears to be a documentation patch that doesn't require tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1314//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1314//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1314//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-27T23:54:22.368+0000","updated":"2017-11-27T23:54:22.368+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16278977","id":"16278977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    @phunt @anmolnar any suggestion on changes or does this look good ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-05T18:10:29.391+0000","updated":"2017-12-05T18:10:29.391+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16280249","id":"16280249","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user anmolnar commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    @fr0stbyte According to my tiny C knowledge, it looks good to me.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-06T14:39:59.137+0000","updated":"2017-12-06T14:39:59.137+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16281053","id":"16281053","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    I tested it with cmake and autotools based generation and the command lines work properly with agreed upon defaults. LGTM. +1.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-06T22:45:04.090+0000","updated":"2017-12-06T22:45:04.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16281069","id":"16281069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/zookeeper/pull/410\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-06T22:55:29.173+0000","updated":"2017-12-06T22:55:29.173+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16281076","id":"16281076","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/410\n  \n    Committed to branch-3.5 and master. I tried applying to branch-3.4 but it wouldn't apply cleanly. Please submit another pull request for 3.4 and I'll review/commit that as well. Thanks @fr0stbyte !\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-06T22:59:13.420+0000","updated":"2017-12-06T22:59:13.420+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16281125","id":"16281125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build ZooKeeper-trunk #3646 (See [https://builds.apache.org/job/ZooKeeper-trunk/3646/])\nZOOKEEPER-2338: set SOCK_CLOEXEC on socket if defined (phunt: rev 665038e0698cd471a25b7ead4c8a50f767a3e7ed)\n* (edit) src/c/configure.ac\n* (edit) src/c/cmake_config.h.in\n* (edit) src/c/CMakeLists.txt\n* (edit) src/c/src/zookeeper.c\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-06T23:31:50.983+0000","updated":"2017-12-06T23:31:50.983+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16283077","id":"16283077","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user fr0stbyte opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/427\n\n    [ZOOKEEPER-2338] - set SOCK_CLOEXEC on socket if defined\n\n    @phunt @anmolnar \r\n    PR for 3.4 branch.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/fr0stbyte/zookeeper fr0stbyte/ZOOKEEPER-2338-3.4\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/427.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #427\n    \n----\ncommit 025142999b3fee596d6f41d63e0076582cca539f\nAuthor: Radu Brumariu <radu@groupon.com>\nDate:   2017-10-25T18:24:17Z\n\n    [ZOOKEEPER-2338] - set SOCK_CLOEXEC on socket if defined\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-08T05:22:09.256+0000","updated":"2017-12-08T05:22:09.256+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16283094","id":"16283094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +0 tests included.  The patch appears to be a documentation patch that doesn't require tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1336//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1336//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1336//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-08T05:59:04.444+0000","updated":"2017-12-08T05:59:04.444+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16284832","id":"16284832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/427\n  \n    @anmolnar sorry, my editor is configured to strip the trailing white spaces . Do you need me to disable that?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-09T17:01:01.930+0000","updated":"2017-12-09T17:01:01.930+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16285514","id":"16285514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user anmolnar commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/427\n  \n    @fr0stbyte no thanks, that's fine, I've dug it out already.\r\n    Going forward I suggest to make linter / indentation / whitespace changes in a commit separate from the code changes.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-11T05:14:29.090+0000","updated":"2017-12-11T05:14:29.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16285693","id":"16285693","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user mfenes commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/427\n  \n    @fr0stbyte could you please add a description to your PR so that everybody could understand the purpose of this change?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-11T09:55:21.965+0000","updated":"2017-12-11T09:55:21.965+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16288006","id":"16288006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/427\n  \n    For this one I'm fine with the whitespace as it also got into the trunk/3.5 commit.\r\n    \r\n    It's unfortunate that github doesn't have an option to remove whitespace changes from the diff they show but you can get around this by diffing the commit locally. (which is what I typically do)\r\n    \r\n    Agree with @mfenes 's comment - even though this is a backport it's still nice to have. \r\n    \r\n    Thanks @fr0stbyte !\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-12T18:16:52.693+0000","updated":"2017-12-12T18:16:52.693+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16288045","id":"16288045","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/427\n  \n    @phunt @mfenes updated the initial comment of this PR. Let me know if you need me to move it into a separate comment\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-12T18:42:01.003+0000","updated":"2017-12-12T18:42:01.003+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16288071","id":"16288071","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/427\n  \n    @fr0stbyte in future I believe you need to update the commit message, that doesn't seem to be updated along with the PR description I'm afraid. (something to consider for future changes, I'll commit this as-is for now, esp as it matches what went into trunk...)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-12T18:55:40.286+0000","updated":"2017-12-12T18:55:40.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16288266","id":"16288266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/427\n  \n    @phunt thanks, will keep that in mind.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-12T21:02:03.311+0000","updated":"2017-12-12T21:02:03.311+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16290016","id":"16290016","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/427#discussion_r156800318\n  \n    --- Diff: src/c/configure.ac ---\n    @@ -130,18 +130,66 @@ main()\n      else\n        exit(0);\n     }\n    -], AC_MSG_RESULT(yes) \n    -   ipv6=yes, \n    -   AC_MSG_RESULT(no) \n    -   ipv6=no, \n    -   AC_MSG_RESULT(no) \n    +], AC_MSG_RESULT(yes)\n    +   ipv6=yes,\n    +   AC_MSG_RESULT(no)\n    +   ipv6=no,\n    +   AC_MSG_RESULT(no)\n        ipv6=no)\n     \n     if test x\"$ipv6\" = xyes; then\n       USEIPV6=\"-DZOO_IPV6_ENABLED\"\n       AC_SUBST(USEIPV6)\n     fi\n     \n    +# use SOCK_CLOEXEC if available and wanted\n    +AC_ARG_WITH([sock_cloexec],\n    +[AS_HELP_STRING([--with-sock-cloexec],[build with SOCK_CLOEXEC flag set on the connections])],\n    +[],[with_sock_cloexec=no])\n    +\n    +AC_MSG_CHECKING([whether SOCK_CLOEXEC is available])\n    +\n    +AC_TRY_RUN([ /* is SOCK_CLOEXEC available ? */\n    +#include <sys/types.h>\n    +#include <sys/socket.h>\n    +#include <stdlib.h>\n    +main()\n    +{\n    +#ifdef SOCK_CLOEXEC\n    +  exit(0);\n    +#else\n    +  exit(1);\n    +#endif\n    +}\n    +], AC_MSG_RESULT(yes)\n    +   has_sock_cloexec=yes,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no)\n    +\n    +if test \"x$with_sock_cloexec\" != xno && test \"x$has_sock_cloexec\" = xno; then\n    +  AC_MSG_WARN([cannot use SOCK_CLOEXEC -- SOCK_CLOEXEC undefined on this platform])\n    +  with_sock_cloexec=no\n    +fi\n    +\n    +if test \"x$with_sock_cloexec\" != xno; then\n    +AC_MSG_NOTICE([building with SOCK_CLOEXEC])\n    +else\n    +AC_MSG_NOTICE([building without SOCK_CLOEXEC])\n    +fi\n    +\n    +AS_IF([test x\"$with_sock_cloexec\" != xno], [AC_DEFINE([SOCK_CLOEXEC_ENABLED], [1], [Define to 1, if SOCK_CLOEXEC is defined and wanted])])\n    +AM_CONDITIONAL([SOCK_CLOEXEC_ENABLED],[test \"x$with_sock_cloexec\" != xno])\n    +\n    +# Determine which libraries we need to use clock_gettime\n    --- End diff --\n    \n    I believe you may have pulled this in by accident? It's not part of the 3.5/trunk patch. Please remove this section (if I read that right).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-13T22:09:04.935+0000","updated":"2017-12-13T22:09:04.935+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16290026","id":"16290026","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/427#discussion_r156801636\n  \n    --- Diff: src/c/configure.ac ---\n    @@ -130,18 +130,66 @@ main()\n      else\n        exit(0);\n     }\n    -], AC_MSG_RESULT(yes) \n    -   ipv6=yes, \n    -   AC_MSG_RESULT(no) \n    -   ipv6=no, \n    -   AC_MSG_RESULT(no) \n    +], AC_MSG_RESULT(yes)\n    +   ipv6=yes,\n    +   AC_MSG_RESULT(no)\n    +   ipv6=no,\n    +   AC_MSG_RESULT(no)\n        ipv6=no)\n     \n     if test x\"$ipv6\" = xyes; then\n       USEIPV6=\"-DZOO_IPV6_ENABLED\"\n       AC_SUBST(USEIPV6)\n     fi\n     \n    +# use SOCK_CLOEXEC if available and wanted\n    +AC_ARG_WITH([sock_cloexec],\n    +[AS_HELP_STRING([--with-sock-cloexec],[build with SOCK_CLOEXEC flag set on the connections])],\n    +[],[with_sock_cloexec=no])\n    +\n    +AC_MSG_CHECKING([whether SOCK_CLOEXEC is available])\n    +\n    +AC_TRY_RUN([ /* is SOCK_CLOEXEC available ? */\n    +#include <sys/types.h>\n    +#include <sys/socket.h>\n    +#include <stdlib.h>\n    +main()\n    +{\n    +#ifdef SOCK_CLOEXEC\n    +  exit(0);\n    +#else\n    +  exit(1);\n    +#endif\n    +}\n    +], AC_MSG_RESULT(yes)\n    +   has_sock_cloexec=yes,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no)\n    +\n    +if test \"x$with_sock_cloexec\" != xno && test \"x$has_sock_cloexec\" = xno; then\n    +  AC_MSG_WARN([cannot use SOCK_CLOEXEC -- SOCK_CLOEXEC undefined on this platform])\n    +  with_sock_cloexec=no\n    +fi\n    +\n    +if test \"x$with_sock_cloexec\" != xno; then\n    +AC_MSG_NOTICE([building with SOCK_CLOEXEC])\n    +else\n    +AC_MSG_NOTICE([building without SOCK_CLOEXEC])\n    +fi\n    +\n    +AS_IF([test x\"$with_sock_cloexec\" != xno], [AC_DEFINE([SOCK_CLOEXEC_ENABLED], [1], [Define to 1, if SOCK_CLOEXEC is defined and wanted])])\n    +AM_CONDITIONAL([SOCK_CLOEXEC_ENABLED],[test \"x$with_sock_cloexec\" != xno])\n    +\n    +# Determine which libraries we need to use clock_gettime\n    --- End diff --\n    \n    Aside from the the rest looks ok. Ready to commit once this item is addressed.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-13T22:14:49.977+0000","updated":"2017-12-13T22:14:49.977+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16290385","id":"16290385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user fr0stbyte commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/427#discussion_r156860284\n  \n    --- Diff: src/c/configure.ac ---\n    @@ -130,18 +130,66 @@ main()\n      else\n        exit(0);\n     }\n    -], AC_MSG_RESULT(yes) \n    -   ipv6=yes, \n    -   AC_MSG_RESULT(no) \n    -   ipv6=no, \n    -   AC_MSG_RESULT(no) \n    +], AC_MSG_RESULT(yes)\n    +   ipv6=yes,\n    +   AC_MSG_RESULT(no)\n    +   ipv6=no,\n    +   AC_MSG_RESULT(no)\n        ipv6=no)\n     \n     if test x\"$ipv6\" = xyes; then\n       USEIPV6=\"-DZOO_IPV6_ENABLED\"\n       AC_SUBST(USEIPV6)\n     fi\n     \n    +# use SOCK_CLOEXEC if available and wanted\n    +AC_ARG_WITH([sock_cloexec],\n    +[AS_HELP_STRING([--with-sock-cloexec],[build with SOCK_CLOEXEC flag set on the connections])],\n    +[],[with_sock_cloexec=no])\n    +\n    +AC_MSG_CHECKING([whether SOCK_CLOEXEC is available])\n    +\n    +AC_TRY_RUN([ /* is SOCK_CLOEXEC available ? */\n    +#include <sys/types.h>\n    +#include <sys/socket.h>\n    +#include <stdlib.h>\n    +main()\n    +{\n    +#ifdef SOCK_CLOEXEC\n    +  exit(0);\n    +#else\n    +  exit(1);\n    +#endif\n    +}\n    +], AC_MSG_RESULT(yes)\n    +   has_sock_cloexec=yes,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no)\n    +\n    +if test \"x$with_sock_cloexec\" != xno && test \"x$has_sock_cloexec\" = xno; then\n    +  AC_MSG_WARN([cannot use SOCK_CLOEXEC -- SOCK_CLOEXEC undefined on this platform])\n    +  with_sock_cloexec=no\n    +fi\n    +\n    +if test \"x$with_sock_cloexec\" != xno; then\n    +AC_MSG_NOTICE([building with SOCK_CLOEXEC])\n    +else\n    +AC_MSG_NOTICE([building without SOCK_CLOEXEC])\n    +fi\n    +\n    +AS_IF([test x\"$with_sock_cloexec\" != xno], [AC_DEFINE([SOCK_CLOEXEC_ENABLED], [1], [Define to 1, if SOCK_CLOEXEC is defined and wanted])])\n    +AM_CONDITIONAL([SOCK_CLOEXEC_ENABLED],[test \"x$with_sock_cloexec\" != xno])\n    +\n    +# Determine which libraries we need to use clock_gettime\n    --- End diff --\n    \n    @phunt I think it was : https://github.com/apache/zookeeper/pull/410/files#diff-79599273360e5b5ede514927c8033356R182\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-14T06:00:02.845+0000","updated":"2017-12-14T06:00:02.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16293461","id":"16293461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/427#discussion_r157325096\n  \n    --- Diff: src/c/configure.ac ---\n    @@ -130,18 +130,66 @@ main()\n      else\n        exit(0);\n     }\n    -], AC_MSG_RESULT(yes) \n    -   ipv6=yes, \n    -   AC_MSG_RESULT(no) \n    -   ipv6=no, \n    -   AC_MSG_RESULT(no) \n    +], AC_MSG_RESULT(yes)\n    +   ipv6=yes,\n    +   AC_MSG_RESULT(no)\n    +   ipv6=no,\n    +   AC_MSG_RESULT(no)\n        ipv6=no)\n     \n     if test x\"$ipv6\" = xyes; then\n       USEIPV6=\"-DZOO_IPV6_ENABLED\"\n       AC_SUBST(USEIPV6)\n     fi\n     \n    +# use SOCK_CLOEXEC if available and wanted\n    +AC_ARG_WITH([sock_cloexec],\n    +[AS_HELP_STRING([--with-sock-cloexec],[build with SOCK_CLOEXEC flag set on the connections])],\n    +[],[with_sock_cloexec=no])\n    +\n    +AC_MSG_CHECKING([whether SOCK_CLOEXEC is available])\n    +\n    +AC_TRY_RUN([ /* is SOCK_CLOEXEC available ? */\n    +#include <sys/types.h>\n    +#include <sys/socket.h>\n    +#include <stdlib.h>\n    +main()\n    +{\n    +#ifdef SOCK_CLOEXEC\n    +  exit(0);\n    +#else\n    +  exit(1);\n    +#endif\n    +}\n    +], AC_MSG_RESULT(yes)\n    +   has_sock_cloexec=yes,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no)\n    +\n    +if test \"x$with_sock_cloexec\" != xno && test \"x$has_sock_cloexec\" = xno; then\n    +  AC_MSG_WARN([cannot use SOCK_CLOEXEC -- SOCK_CLOEXEC undefined on this platform])\n    +  with_sock_cloexec=no\n    +fi\n    +\n    +if test \"x$with_sock_cloexec\" != xno; then\n    +AC_MSG_NOTICE([building with SOCK_CLOEXEC])\n    +else\n    +AC_MSG_NOTICE([building without SOCK_CLOEXEC])\n    +fi\n    +\n    +AS_IF([test x\"$with_sock_cloexec\" != xno], [AC_DEFINE([SOCK_CLOEXEC_ENABLED], [1], [Define to 1, if SOCK_CLOEXEC is defined and wanted])])\n    +AM_CONDITIONAL([SOCK_CLOEXEC_ENABLED],[test \"x$with_sock_cloexec\" != xno])\n    +\n    +# Determine which libraries we need to use clock_gettime\n    --- End diff --\n    \n    Sorry I was unclear @fr0stbyte - I meant the following:\r\n    \r\n    +# Determine which libraries we need to use clock_gettime\r\n    +saved_LIBS=\"$LIBS\"\r\n    +LIBS=\"\"\r\n    +AC_CHECK_LIB(rt, clock_gettime)\r\n    +CLOCK_GETTIME_LIBS=$LIBS\r\n    +AC_SUBST(CLOCK_GETTIME_LIBS)\r\n    +LIBS=\"$saved_LIBS\"\r\n    \r\n    those lines are included in this patch, but not #410 \r\n    \r\n    Could you remove them? Or am I totally missing something?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-16T00:19:36.509+0000","updated":"2017-12-16T00:19:36.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12920127/comment/16331511","id":"16331511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user phunt commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/427#discussion_r162510701\n  \n    --- Diff: src/c/configure.ac ---\n    @@ -130,18 +130,66 @@ main()\n      else\n        exit(0);\n     }\n    -], AC_MSG_RESULT(yes) \n    -   ipv6=yes, \n    -   AC_MSG_RESULT(no) \n    -   ipv6=no, \n    -   AC_MSG_RESULT(no) \n    +], AC_MSG_RESULT(yes)\n    +   ipv6=yes,\n    +   AC_MSG_RESULT(no)\n    +   ipv6=no,\n    +   AC_MSG_RESULT(no)\n        ipv6=no)\n     \n     if test x\"$ipv6\" = xyes; then\n       USEIPV6=\"-DZOO_IPV6_ENABLED\"\n       AC_SUBST(USEIPV6)\n     fi\n     \n    +# use SOCK_CLOEXEC if available and wanted\n    +AC_ARG_WITH([sock_cloexec],\n    +[AS_HELP_STRING([--with-sock-cloexec],[build with SOCK_CLOEXEC flag set on the connections])],\n    +[],[with_sock_cloexec=no])\n    +\n    +AC_MSG_CHECKING([whether SOCK_CLOEXEC is available])\n    +\n    +AC_TRY_RUN([ /* is SOCK_CLOEXEC available ? */\n    +#include <sys/types.h>\n    +#include <sys/socket.h>\n    +#include <stdlib.h>\n    +main()\n    +{\n    +#ifdef SOCK_CLOEXEC\n    +  exit(0);\n    +#else\n    +  exit(1);\n    +#endif\n    +}\n    +], AC_MSG_RESULT(yes)\n    +   has_sock_cloexec=yes,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no,\n    +   AC_MSG_RESULT(no)\n    +   has_sock_cloexec=no)\n    +\n    +if test \"x$with_sock_cloexec\" != xno && test \"x$has_sock_cloexec\" = xno; then\n    +  AC_MSG_WARN([cannot use SOCK_CLOEXEC -- SOCK_CLOEXEC undefined on this platform])\n    +  with_sock_cloexec=no\n    +fi\n    +\n    +if test \"x$with_sock_cloexec\" != xno; then\n    +AC_MSG_NOTICE([building with SOCK_CLOEXEC])\n    +else\n    +AC_MSG_NOTICE([building without SOCK_CLOEXEC])\n    +fi\n    +\n    +AS_IF([test x\"$with_sock_cloexec\" != xno], [AC_DEFINE([SOCK_CLOEXEC_ENABLED], [1], [Define to 1, if SOCK_CLOEXEC is defined and wanted])])\n    +AM_CONDITIONAL([SOCK_CLOEXEC_ENABLED],[test \"x$with_sock_cloexec\" != xno])\n    +\n    +# Determine which libraries we need to use clock_gettime\n    --- End diff --\n    \n    @fr0stbyte I'd still like to get this committed - does my most recent comment make sense or am I missing something?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2018-01-19T00:38:43.077+0000","updated":"2018-01-19T00:38:43.077+0000"}],"maxResults":36,"total":36,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2338/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2plxb:"}}