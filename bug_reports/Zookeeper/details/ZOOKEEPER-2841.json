{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13085619","self":"https://issues.apache.org/jira/rest/api/2/issue/13085619","key":"ZOOKEEPER-2841","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12339207","id":"12339207","description":"Fix release against 3.4 branch","name":"3.4.11","archived":false,"released":true,"releaseDate":"2017-11-09"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12340141","id":"12340141","description":"Beta release against 3.5 branch","name":"3.5.4","archived":false,"released":true,"releaseDate":"2018-05-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-07-07T22:56:17.827+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Aug 01 17:34:19 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2134823052_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-08-01T15:48:53.963+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2841/watchers","watchCount":3,"isWatching":false},"created":"2017-07-07T22:48:30.989+0000","customfield_12310192":"cmake is added to replace the existing hardcoded (and outdated) visual studio solutions for windows platform.","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["windows"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12510462","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12510462","type":{"id":"12310051","name":"Supercedes","inward":"is superceded by","outward":"supercedes","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310051"},"outwardIssue":{"id":"12993119","key":"ZOOKEEPER-2491","self":"https://issues.apache.org/jira/rest/api/2/issue/12993119","fields":{"summary":"C client build error in vs 2015 ","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12508675","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12508675","type":{"id":"12310051","name":"Supercedes","inward":"is superceded by","outward":"supercedes","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310051"},"outwardIssue":{"id":"13063941","key":"ZOOKEEPER-2756","self":"https://issues.apache.org/jira/rest/api/2/issue/13063941","fields":{"summary":"Add CMake build system for better cross-platform support","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andschwa","name":"andschwa","key":"andschwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andschwa&avatarId=29804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andschwa&avatarId=29804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andschwa&avatarId=29804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andschwa&avatarId=29804"},"displayName":"Andrew Schwartzmeyer","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-08-01T17:34:19.111+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312380","id":"12312380","name":"c client","description":"The c client interface to ZooKeeper"}],"timeoriginalestimate":null,"description":"The fundamental problem is that the port of the C client to Windows is now close to six years old, with very few updates. This port leaks a lot of changes that should be internal to ZooKeeper, and many of those changes are simply no longer relevant. The correct thing to do is attempt to refactor the Windows port for new versions of ZooKeeper, removing dead/unneeded porting code, and moving dangerous porting code to C files instead of public headers.\n\nTwo primary examples of this problem are [ZOOKEEPER-2491|https://issues.apache.org/jira/browse/ZOOKEEPER-2491] and [MESOS-7541|https://issues.apache.org/jira/browse/MESOS-7541].\n\nThe first issue stems from this ancient porting code:\n{noformat}\n#define snprintf _snprintf\n{noformat}\n in [winconfig.h|https://github.com/apache/zookeeper/blob/ddf0364903bf7ac7cd25b2e1927f0d9d3c7203c4/src/c/include/winconfig.h#L179]. Newer versions of Windows C libraries define {{snprintf}} as a function, and so it cannot be redefined.\n\nThe second issue comes from this undocumented change:\n\n{noformat}\n#undef AF_INET6\n{noformat}\n\nagain in [winconfig.h|https://github.com/apache/zookeeper/blob/ddf0364903bf7ac7cd25b2e1927f0d9d3c7203c4/src/c/include/winconfig.h#L169] which breaks any library that uses IPv6 and {{winsock2.h}}.\n\nFurthermore, the inclusion of the following defines and headers causes terrible problems for consuming libraries, as they leak into ZooKeeper's public headers:\n\n{noformat}\n#define _CRT_SECURE_NO_WARNINGS\n#define WIN32_LEAN_AND_MEAN\n#include <Windows.h>\n#include <Winsock2.h>\n#include <winstdint.h>\n#include <process.h>\n#include <ws2tcpip.h>\n{noformat}\n\nDepending on the order that a project includes or compiles files, this may or may not cause {{WIN32_LEAN_AND_MEAN}} to become unexpectedly defined, and {{windows.h}} to be unexpectedly included. This problem is exacberated by the fact that the {{winsock2.h}} and {{windows.h}} headers are order-dependent (if you read up on this, you'll see that defining {{WIN32_LEAN_AND_MEAN}} was meant to work-around this).\n\nGoing forward, porting changes should live next to where they are used, preferably in source files, not header files, so they remain contained.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"ZooKeeper public include files leak porting changes","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andschwa","name":"andschwa","key":"andschwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andschwa&avatarId=29804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andschwa&avatarId=29804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andschwa&avatarId=29804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andschwa&avatarId=29804"},"displayName":"Andrew Schwartzmeyer","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andschwa","name":"andschwa","key":"andschwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andschwa&avatarId=29804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andschwa&avatarId=29804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andschwa&avatarId=29804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andschwa&avatarId=29804"},"displayName":"Andrew Schwartzmeyer","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows 10 with Visual Studio 2017","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16078807","id":"16078807","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user andschwa opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/306\n\n    ZOOKEEPER-2841: ZooKeeper public include files leak porting changes\n\n    This PR includes the patches [ZOOKEEPER-2756](https://issues.apache.org/jira/browse/ZOOKEEPER-2756) and [ZOOKEEPER-2841](https://issues.apache.org/jira/browse/ZOOKEEPER-2841), and can supplant PR #255.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/andschwa/zookeeper ZOOKEEPER-2841\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/306.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #306\n    \n----\ncommit 187ce8acc1707a0dd20752b624a3fa5648706f97\nAuthor: Andrew Schwartzmeyer <andrew@schwartzmeyer.com>\nDate:   2017-04-10T23:12:40Z\n\n    ZOOKEEPER-2756: Add CMake build system for better cross-platform support\n    \n    This notably lacks Solaris and libtool support.\n    \n    Almost everything else from Autotools has been ported,\n    including header/function/library checks, and all targets\n    (zookeeper, hashtable, cli, load_gen, and tests).\n    \n    Both Linux and Windows are supported.\n    \n    The primary work involved (other than the writing of `CMakeLists.txt`)\n    was transitioning the hand-written `winconfig.h` to an\n    auto-generated `config.h` file, and guarding code with `#ifdef\n    HAVE_FEATURE`. The `cmake_config.h.in` template was modeled after\n    the Autotools config file so that the feature guards share the same\n    names.\n    \n    While `load_gen.c` looks at first glance as if it were ported to Windows,\n    it never actually was, so the erroneous `#include \"win32port.h\"` was\n    removed, and the target is not built on Windows.\n    \n    There are existent warnings which this patch did not attempt to fix.\n    \n    A guard was placed around `#define snprintf` in order to enable\n    compiling with modern versions of MSVC.\n    \n    Fixed DLL_EXPORT and USE_STATIC_LIB redefinition.\n    \n    As this commit deprecates (and breaks) the previously existing Visual\n    Studio solutions and projects, they've been removed.\n    \n    Building tests on Windows is still not supported.\n\ncommit 22a378ae2a7c30657326b6a602b62116ab7c050a\nAuthor: Andrew Schwartzmeyer <andrew@schwartzmeyer.com>\nDate:   2017-07-07T22:35:37Z\n\n    ZOOKEEPER-2841: ZooKeeper public include files leak porting changes\n    \n    This patch refactors the Windows port of the C client. Notably, it moves\n    as much porting code as possible out of the publicly included\n    `winconfig.h` header and into the relevant source files. This also\n    removes `winstdint.h` as it has been replaced by `<stdint.h>`. It fixes\n    problems for upstream libraries by removing `#undef AF_INET6` and\n    `#include <windows.h>`.\n    \n    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially\n    remove `include/winconfig.h` altogether.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-07T22:56:17.827+0000","updated":"2017-07-07T22:56:17.827+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16078814","id":"16078814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 12 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-07T23:08:32.137+0000","updated":"2017-07-07T23:08:32.137+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16078885","id":"16078885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    Is this [failing test](https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870/testReport/org.apache.zookeeper.server.quorum/ReconfigDuringLeaderSyncTest/testDuringLeaderSync/) my fault? It's... odd.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T01:19:32.093+0000","updated":"2017-07-08T01:19:32.093+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16078937","id":"16078937","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @hanm I'm not sure how you guys like to do dependent patches. ZOOKEEPER-2756 and ZOOKEEPER-2841 should both be taken to resolve problems using the C client in other projects (e.g. Mesos \uD83D\uDE09), and the latter depends on the former. I've confirmed that 2756 (first commit) allows us to build with Visual Studio 2017 (and on Linux, because CMake!), and that 2841 (second commit) resolves [MESOS-7541](https://issues.apache.org/jira/browse/MESOS-7541), and should eliminate a lot of problems that projects which include ZooKeeper headers can encounter on Windows. That said, the two patches are clearly two very separate pieces of work.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T03:58:40.245+0000","updated":"2017-07-08T03:58:40.245+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079321","id":"16079321","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    >> Is this failing test my fault? It's... odd.\n    \n    No it's not your fault. This is a known flaky test, and I will have a patch for this soon.\n    \n    >> I'm not sure how you guys like to do dependent patches. \n    \n    It's OK to include ZOOKEEPER-2841  in ZOOKEEPER-2756; otherwise it might take years to get the improvement in because the lack of love on the C client. While we are at this, let's get both in. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T21:26:59.372+0000","updated":"2017-07-08T21:26:59.372+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079334","id":"16079334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/306#discussion_r126290847\n  \n    --- Diff: src/c/CMakeLists.txt ---\n    @@ -0,0 +1,220 @@\n    +# Licensed to the Apache Software Foundation (ASF) under one\n    +# or more contributor license agreements.  See the NOTICE file\n    +# distributed with this work for additional information\n    +# regarding copyright ownership.  The ASF licenses this file\n    +# to you under the Apache License, Version 2.0 (the\n    +# \"License\"); you may not use this file except in compliance\n    +# with the License.  You may obtain a copy of the License at\n    +#\n    +#     http://www.apache.org/licenses/LICENSE-2.0\n    +#\n    +# Unless required by applicable law or agreed to in writing, software\n    +# distributed under the License is distributed on an \"AS IS\" BASIS,\n    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    +# See the License for the specific language governing permissions and\n    +# limitations under the License.\n    +\n    +cmake_minimum_required(VERSION 3.6)\n    +\n    +project(zookeeper VERSION 3.5.2)\n    --- End diff --\n    \n    The version here should be 3.5.3. I think you got 3.5.2 because when you start working on this, 3.5.3 was not released. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T21:50:25.049+0000","updated":"2017-07-08T21:50:25.049+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079336","id":"16079336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @hanm Awesome! The patches seem to be working well, and I think we don't need to worry about maintaining compatibility with, say, Visual Studio 2008, in new versions of the ZooKeeper client. Old versions of the client are still available for those in need, and it's more important that current versions of VS/MSVC are supported.\n    \n    Thanks for your help in this!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T21:52:57.783+0000","updated":"2017-07-08T21:52:57.783+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079338","id":"16079338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/306#discussion_r126290881\n  \n    --- Diff: src/c/include/winconfig.h ---\n    @@ -1,196 +1,15 @@\n    -/* Define to 1 if you have the <arpa/inet.h> header file. */\n    -#undef HAVE_ARPA_INET_H\n    -\n    -/* Define to 1 if you have the <dlfcn.h> header file. */\n    -#undef HAVE_DLFCN_H\n    -\n    -/* Define to 1 if you have the <fcntl.h> header file. */\n    -#undef HAVE_FCNTL_H\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.c'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.h'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1\n    -\n    -/* Define to 1 if you have the `getcwd' function. */\n    -#undef HAVE_GETCWD\n    -\n    -/* Define to 1 if you have the `gethostbyname' function. */\n    -#undef HAVE_GETHOSTBYNAME\n    -\n    -/* Define to 1 if you have the `gethostname' function. */\n    -#define HAVE_GETHOSTNAME 1\n    -\n    -/* Define to 1 if you have the `getlogin' function. */\n    -#undef HAVE_GETLOGIN\n    -\n    -/* Define to 1 if you have the `getpwuid_r' function. */\n    -#undef HAVE_GETPWUID_R\n    -\n    -/* Define to 1 if you have the `gettimeofday' function. */\n    -#undef HAVE_GETTIMEOFDAY\n    -\n    -/* Define to 1 if you have the `getuid' function. */\n    -#undef HAVE_GETUID\n    -\n    -/* Define to 1 if you have the <inttypes.h> header file. */\n    -#undef HAVE_INTTYPES_H\n    -\n    -/* Define to 1 if you have the `memmove' function. */\n    -#undef HAVE_MEMMOVE\n    -\n    -/* Define to 1 if you have the <memory.h> header file. */\n    -#undef HAVE_MEMORY_H\n    -\n    -/* Define to 1 if you have the `memset' function. */\n    -#undef HAVE_MEMSET\n    -\n    -/* Define to 1 if you have the <netdb.h> header file. */\n    -#undef HAVE_NETDB_H\n    -\n    -/* Define to 1 if you have the <netinet/in.h> header file. */\n    -#undef HAVE_NETINET_IN_H\n    -\n    -/* Define to 1 if you have the `poll' function. */\n    -#undef HAVE_POLL\n    -\n    -/* Define to 1 if you have the `socket' function. */\n    -#undef HAVE_SOCKET\n    -\n    -/* Define to 1 if you have the <stdint.h> header file. */\n    -#undef HAVE_STDINT_H\n    -\n    -/* Define to 1 if you have the <stdlib.h> header file. */\n    -#define HAVE_STDLIB_H 1\n    -\n    -/* Define to 1 if you have the `strchr' function. */\n    -#define HAVE_STRCHR 1\n    -\n    -/* Define to 1 if you have the `strdup' function. */\n    -#define HAVE_STRDUP 1\n    -\n    -/* Define to 1 if you have the `strerror' function. */\n    -#define HAVE_STRERROR 1\n    -\n    -/* Define to 1 if you have the <strings.h> header file. */\n    -#undef HAVE_STRINGS_H\n    -\n    -/* Define to 1 if you have the <string.h> header file. */\n    -#undef HAVE_STRING_H\n    -\n    -/* Define to 1 if you have the `strtol' function. */\n    -#undef HAVE_STRTOL\n    -\n    -/* Define to 1 if you have the <sys/socket.h> header file. */\n    -#undef HAVE_SYS_SOCKET_H\n    -\n    -/* Define to 1 if you have the <sys/stat.h> header file. */\n    -#undef HAVE_SYS_STAT_H\n    -\n    -/* Define to 1 if you have the <sys/time.h> header file. */\n    -#undef HAVE_SYS_TIME_H\n    -\n    -/* Define to 1 if you have the <sys/types.h> header file. */\n    -#undef HAVE_SYS_TYPES_H\n    -\n    -/* Define to 1 if you have the <sys/utsname.h> header file. */\n    -#undef HAVE_SYS_UTSNAME_H\n    -\n    -/* Define to 1 if you have the <unistd.h> header file. */\n    -#undef HAVE_UNISTD_H\n    -\n    -/* Define to the sub-directory in which libtool stores uninstalled libraries.\n    -   */\n    -#define LT_OBJDIR\n    -\n    -/* Define to 1 if your C compiler doesn't accept -c and -o together. */\n    -/* #undef NO_MINUS_C_MINUS_O */\n    -\n    -/* Name of package */\n    -#define PACKAGE \"c-client-src\"\n    -\n    -/* Define to the address where bug reports for this package should be sent. */\n    -#define PACKAGE_BUGREPORT \"user@zookeeper.apache.org\"\n    -\n    -/* Define to the full name of this package. */\n    -#define PACKAGE_NAME \"zookeeper C client\"\n    -\n    -/* Define to the full name and version of this package. */\n    -#define PACKAGE_STRING \"zookeeper C client 3.5.0 win32\"\n    -\n    -/* Define to the one symbol short name of this package. */\n    -#define PACKAGE_TARNAME \"c-client-src\"\n    -\n    -/* Define to the home page for this package. */\n    -#define PACKAGE_URL \"\"\n    -\n    -/* Define to the version of this package. */\n    -#define PACKAGE_VERSION \"3.5.0\"\n    --- End diff --\n    \n    This 3.5.0 indicates the base version of this file you were using when start the patch is pretty old. Could you rebase the pull request on latest master? \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T21:53:27.226+0000","updated":"2017-07-08T21:53:27.226+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079342","id":"16079342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/306#discussion_r126291131\n  \n    --- Diff: src/c/include/winconfig.h ---\n    @@ -1,196 +1,15 @@\n    -/* Define to 1 if you have the <arpa/inet.h> header file. */\n    -#undef HAVE_ARPA_INET_H\n    -\n    -/* Define to 1 if you have the <dlfcn.h> header file. */\n    -#undef HAVE_DLFCN_H\n    -\n    -/* Define to 1 if you have the <fcntl.h> header file. */\n    -#undef HAVE_FCNTL_H\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.c'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.h'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1\n    -\n    -/* Define to 1 if you have the `getcwd' function. */\n    -#undef HAVE_GETCWD\n    -\n    -/* Define to 1 if you have the `gethostbyname' function. */\n    -#undef HAVE_GETHOSTBYNAME\n    -\n    -/* Define to 1 if you have the `gethostname' function. */\n    -#define HAVE_GETHOSTNAME 1\n    -\n    -/* Define to 1 if you have the `getlogin' function. */\n    -#undef HAVE_GETLOGIN\n    -\n    -/* Define to 1 if you have the `getpwuid_r' function. */\n    -#undef HAVE_GETPWUID_R\n    -\n    -/* Define to 1 if you have the `gettimeofday' function. */\n    -#undef HAVE_GETTIMEOFDAY\n    -\n    -/* Define to 1 if you have the `getuid' function. */\n    -#undef HAVE_GETUID\n    -\n    -/* Define to 1 if you have the <inttypes.h> header file. */\n    -#undef HAVE_INTTYPES_H\n    -\n    -/* Define to 1 if you have the `memmove' function. */\n    -#undef HAVE_MEMMOVE\n    -\n    -/* Define to 1 if you have the <memory.h> header file. */\n    -#undef HAVE_MEMORY_H\n    -\n    -/* Define to 1 if you have the `memset' function. */\n    -#undef HAVE_MEMSET\n    -\n    -/* Define to 1 if you have the <netdb.h> header file. */\n    -#undef HAVE_NETDB_H\n    -\n    -/* Define to 1 if you have the <netinet/in.h> header file. */\n    -#undef HAVE_NETINET_IN_H\n    -\n    -/* Define to 1 if you have the `poll' function. */\n    -#undef HAVE_POLL\n    -\n    -/* Define to 1 if you have the `socket' function. */\n    -#undef HAVE_SOCKET\n    -\n    -/* Define to 1 if you have the <stdint.h> header file. */\n    -#undef HAVE_STDINT_H\n    -\n    -/* Define to 1 if you have the <stdlib.h> header file. */\n    -#define HAVE_STDLIB_H 1\n    -\n    -/* Define to 1 if you have the `strchr' function. */\n    -#define HAVE_STRCHR 1\n    -\n    -/* Define to 1 if you have the `strdup' function. */\n    -#define HAVE_STRDUP 1\n    -\n    -/* Define to 1 if you have the `strerror' function. */\n    -#define HAVE_STRERROR 1\n    -\n    -/* Define to 1 if you have the <strings.h> header file. */\n    -#undef HAVE_STRINGS_H\n    -\n    -/* Define to 1 if you have the <string.h> header file. */\n    -#undef HAVE_STRING_H\n    -\n    -/* Define to 1 if you have the `strtol' function. */\n    -#undef HAVE_STRTOL\n    -\n    -/* Define to 1 if you have the <sys/socket.h> header file. */\n    -#undef HAVE_SYS_SOCKET_H\n    -\n    -/* Define to 1 if you have the <sys/stat.h> header file. */\n    -#undef HAVE_SYS_STAT_H\n    -\n    -/* Define to 1 if you have the <sys/time.h> header file. */\n    -#undef HAVE_SYS_TIME_H\n    -\n    -/* Define to 1 if you have the <sys/types.h> header file. */\n    -#undef HAVE_SYS_TYPES_H\n    -\n    -/* Define to 1 if you have the <sys/utsname.h> header file. */\n    -#undef HAVE_SYS_UTSNAME_H\n    -\n    -/* Define to 1 if you have the <unistd.h> header file. */\n    -#undef HAVE_UNISTD_H\n    -\n    -/* Define to the sub-directory in which libtool stores uninstalled libraries.\n    -   */\n    -#define LT_OBJDIR\n    -\n    -/* Define to 1 if your C compiler doesn't accept -c and -o together. */\n    -/* #undef NO_MINUS_C_MINUS_O */\n    -\n    -/* Name of package */\n    -#define PACKAGE \"c-client-src\"\n    -\n    -/* Define to the address where bug reports for this package should be sent. */\n    -#define PACKAGE_BUGREPORT \"user@zookeeper.apache.org\"\n    -\n    -/* Define to the full name of this package. */\n    -#define PACKAGE_NAME \"zookeeper C client\"\n    -\n    -/* Define to the full name and version of this package. */\n    -#define PACKAGE_STRING \"zookeeper C client 3.5.0 win32\"\n    -\n    -/* Define to the one symbol short name of this package. */\n    -#define PACKAGE_TARNAME \"c-client-src\"\n    -\n    -/* Define to the home page for this package. */\n    -#define PACKAGE_URL \"\"\n    -\n    -/* Define to the version of this package. */\n    -#define PACKAGE_VERSION \"3.5.0\"\n    --- End diff --\n    \n    It should be freshly rebased as of yesterday, but yeah I didn't catch the version update.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T22:10:47.530+0000","updated":"2017-07-08T22:10:47.530+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079343","id":"16079343","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    Should we put the CMake files in a dedicated folder called \"windows\" or something like that? Otherwise we will have the CMakeList file, and the existing makefile and config files (which are not touched by this pull request) coexisting under the C client folder. This might create confusions for user because makefile can be generated from the CMakeList file, so the question of which makefile is the source of truth and so on... \n    \n    Ultimately we might drop existing makefiles in favor of the CMake so build files across every platform are generated by a single source of truth (cmakelist), but that's more scope of work (the ant build file has to be modified and the system requirements of ZK has to be updated to make cmake a dependency for source installations etc to avoid break existing workflows), so for now I think it's good to scope cmake so it only impact windows C client builds.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T22:11:08.319+0000","updated":"2017-07-08T22:11:08.319+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079344","id":"16079344","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/306#discussion_r126291135\n  \n    --- Diff: src/c/CMakeLists.txt ---\n    @@ -0,0 +1,220 @@\n    +# Licensed to the Apache Software Foundation (ASF) under one\n    +# or more contributor license agreements.  See the NOTICE file\n    +# distributed with this work for additional information\n    +# regarding copyright ownership.  The ASF licenses this file\n    +# to you under the Apache License, Version 2.0 (the\n    +# \"License\"); you may not use this file except in compliance\n    +# with the License.  You may obtain a copy of the License at\n    +#\n    +#     http://www.apache.org/licenses/LICENSE-2.0\n    +#\n    +# Unless required by applicable law or agreed to in writing, software\n    +# distributed under the License is distributed on an \"AS IS\" BASIS,\n    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    +# See the License for the specific language governing permissions and\n    +# limitations under the License.\n    +\n    +cmake_minimum_required(VERSION 3.6)\n    +\n    +project(zookeeper VERSION 3.5.2)\n    --- End diff --\n    \n    I can fix it up in a few minutes here.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T22:11:21.498+0000","updated":"2017-07-08T22:11:21.498+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079356","id":"16079356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 12 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T23:01:53.813+0000","updated":"2017-07-08T23:01:53.813+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079362","id":"16079362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/306#discussion_r126292294\n  \n    --- Diff: src/c/include/winconfig.h ---\n    @@ -1,196 +1,15 @@\n    -/* Define to 1 if you have the <arpa/inet.h> header file. */\n    -#undef HAVE_ARPA_INET_H\n    -\n    -/* Define to 1 if you have the <dlfcn.h> header file. */\n    -#undef HAVE_DLFCN_H\n    -\n    -/* Define to 1 if you have the <fcntl.h> header file. */\n    -#undef HAVE_FCNTL_H\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.c'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.h'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1\n    -\n    -/* Define to 1 if you have the `getcwd' function. */\n    -#undef HAVE_GETCWD\n    -\n    -/* Define to 1 if you have the `gethostbyname' function. */\n    -#undef HAVE_GETHOSTBYNAME\n    -\n    -/* Define to 1 if you have the `gethostname' function. */\n    -#define HAVE_GETHOSTNAME 1\n    -\n    -/* Define to 1 if you have the `getlogin' function. */\n    -#undef HAVE_GETLOGIN\n    -\n    -/* Define to 1 if you have the `getpwuid_r' function. */\n    -#undef HAVE_GETPWUID_R\n    -\n    -/* Define to 1 if you have the `gettimeofday' function. */\n    -#undef HAVE_GETTIMEOFDAY\n    -\n    -/* Define to 1 if you have the `getuid' function. */\n    -#undef HAVE_GETUID\n    -\n    -/* Define to 1 if you have the <inttypes.h> header file. */\n    -#undef HAVE_INTTYPES_H\n    -\n    -/* Define to 1 if you have the `memmove' function. */\n    -#undef HAVE_MEMMOVE\n    -\n    -/* Define to 1 if you have the <memory.h> header file. */\n    -#undef HAVE_MEMORY_H\n    -\n    -/* Define to 1 if you have the `memset' function. */\n    -#undef HAVE_MEMSET\n    -\n    -/* Define to 1 if you have the <netdb.h> header file. */\n    -#undef HAVE_NETDB_H\n    -\n    -/* Define to 1 if you have the <netinet/in.h> header file. */\n    -#undef HAVE_NETINET_IN_H\n    -\n    -/* Define to 1 if you have the `poll' function. */\n    -#undef HAVE_POLL\n    -\n    -/* Define to 1 if you have the `socket' function. */\n    -#undef HAVE_SOCKET\n    -\n    -/* Define to 1 if you have the <stdint.h> header file. */\n    -#undef HAVE_STDINT_H\n    -\n    -/* Define to 1 if you have the <stdlib.h> header file. */\n    -#define HAVE_STDLIB_H 1\n    -\n    -/* Define to 1 if you have the `strchr' function. */\n    -#define HAVE_STRCHR 1\n    -\n    -/* Define to 1 if you have the `strdup' function. */\n    -#define HAVE_STRDUP 1\n    -\n    -/* Define to 1 if you have the `strerror' function. */\n    -#define HAVE_STRERROR 1\n    -\n    -/* Define to 1 if you have the <strings.h> header file. */\n    -#undef HAVE_STRINGS_H\n    -\n    -/* Define to 1 if you have the <string.h> header file. */\n    -#undef HAVE_STRING_H\n    -\n    -/* Define to 1 if you have the `strtol' function. */\n    -#undef HAVE_STRTOL\n    -\n    -/* Define to 1 if you have the <sys/socket.h> header file. */\n    -#undef HAVE_SYS_SOCKET_H\n    -\n    -/* Define to 1 if you have the <sys/stat.h> header file. */\n    -#undef HAVE_SYS_STAT_H\n    -\n    -/* Define to 1 if you have the <sys/time.h> header file. */\n    -#undef HAVE_SYS_TIME_H\n    -\n    -/* Define to 1 if you have the <sys/types.h> header file. */\n    -#undef HAVE_SYS_TYPES_H\n    -\n    -/* Define to 1 if you have the <sys/utsname.h> header file. */\n    -#undef HAVE_SYS_UTSNAME_H\n    -\n    -/* Define to 1 if you have the <unistd.h> header file. */\n    -#undef HAVE_UNISTD_H\n    -\n    -/* Define to the sub-directory in which libtool stores uninstalled libraries.\n    -   */\n    -#define LT_OBJDIR\n    -\n    -/* Define to 1 if your C compiler doesn't accept -c and -o together. */\n    -/* #undef NO_MINUS_C_MINUS_O */\n    -\n    -/* Name of package */\n    -#define PACKAGE \"c-client-src\"\n    -\n    -/* Define to the address where bug reports for this package should be sent. */\n    -#define PACKAGE_BUGREPORT \"user@zookeeper.apache.org\"\n    -\n    -/* Define to the full name of this package. */\n    -#define PACKAGE_NAME \"zookeeper C client\"\n    -\n    -/* Define to the full name and version of this package. */\n    -#define PACKAGE_STRING \"zookeeper C client 3.5.0 win32\"\n    -\n    -/* Define to the one symbol short name of this package. */\n    -#define PACKAGE_TARNAME \"c-client-src\"\n    -\n    -/* Define to the home page for this package. */\n    -#define PACKAGE_URL \"\"\n    -\n    -/* Define to the version of this package. */\n    -#define PACKAGE_VERSION \"3.5.0\"\n    --- End diff --\n    \n    (Actually, this is old because `winconfig.h` is unmaintained. I just checked the tip of `master`, it's still 3.5.0 in this file. My changes make the set based off the single version variable in the CMake build file instead.)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T23:15:33.570+0000","updated":"2017-07-08T23:15:33.570+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079363","id":"16079363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @hanm the PR is rebased, retested, and has some extra notes in it now for some weird CMake things.\n    \n    I would not put the CMake files in a separate folder. There are couple of reasons for this:\n    \n    \n    * It is a very strong convention with CMake that the top level `CMakeLists.txt` file exists at the top level of the source directory (thus making variables like `CMAKE_SOURCE_DIR` make sense). This is also necessary for the macro `ExternalProject_Add` to be used with older (pre 3.8) versions of CMake, when it didn't have the `SOURCE_SUBDIR` option. (This macro is often used by other projects, e.g. Mesos, to download and build a dependency.)\n    * The CMake system can also be used on Linux platforms (in fact, it's even setup to build and run the tests with `ctest`). If `cmake` has not been invoked, or if `autoconf`/`configure` have not been invoked, they will not interfere with each other (so the source files themselves can co-exist). It's only the generated files, and only on systems that use `make`, that may become confusing. But this confusion is easily cleared up by asking: which configure system did you invoke? So I don't think it'll be much of a problem. (We have both Autotools and CMake concurrently in Mesos, with the eventual plan of deprecating the former with the latter. Developers still using Autotools have been just fine ignoring CMake.)\n    * CMake can easily build out-of-tree. I've tested this, as I usually build with `mkdir build; cd build; cmake ..; cmake --build .`. So you can use the Autotools and CMake systems concurrently, if you're, say, testing both systems.\n    \n    > Ultimately we might drop existing makefiles in favor of the CMake\n    \n    That would be fantastic :smile:\n    \n    The only annoying thing is that, until that day, there are now two systems to maintain. I'd posit that this is better than the previous situation where there was the Linux system, and then at least, what, three? Windows systems being (not) maintained. If (when) CMake does get broken on Linux because a change was made to Autotools and not replicated to CMake, it won't be the end of the world. You'll have one working system, and someone (like me) will end up fixing the other system. Not the greatest situation, but not the worst.\n    \n    So all that said, leaving CMake available for both operating systems I think is the right thing to do. The scope of impact is still only on Windows, as we're deprecating (deleting) the previous build files, and we're adding a choice for Linux developers. (When ZooKeeper 3.5.3 is released, I'll replace Mesos's if/else code to build ZK on Linux and Windows with a _single_ piece of code, using CMake. It'll be awesome.)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T23:16:32.127+0000","updated":"2017-07-08T23:16:32.127+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079364","id":"16079364","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    Just to give you an idea of what we currently have to do in order to use the ZooKeeper C Client in Mesos, we have [this](https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/cmake/Mesos3rdpartyConfigure.cmake#L51) and [this](https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/zookeeper-3.5.2-alpha.patch) and [this](https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/CMakeLists.txt#L394), all to work around the current state of the client build system.\n    \n    My goal is that, with these changes, almost everything can be replaced with just this [one piece of code](https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/CMakeLists.txt#L424).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T23:20:43.640+0000","updated":"2017-07-08T23:20:43.640+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079369","id":"16079369","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/306#discussion_r126292628\n  \n    --- Diff: src/c/include/winconfig.h ---\n    @@ -1,196 +1,15 @@\n    -/* Define to 1 if you have the <arpa/inet.h> header file. */\n    -#undef HAVE_ARPA_INET_H\n    -\n    -/* Define to 1 if you have the <dlfcn.h> header file. */\n    -#undef HAVE_DLFCN_H\n    -\n    -/* Define to 1 if you have the <fcntl.h> header file. */\n    -#undef HAVE_FCNTL_H\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.c'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.h'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1\n    -\n    -/* Define to 1 if you have the `getcwd' function. */\n    -#undef HAVE_GETCWD\n    -\n    -/* Define to 1 if you have the `gethostbyname' function. */\n    -#undef HAVE_GETHOSTBYNAME\n    -\n    -/* Define to 1 if you have the `gethostname' function. */\n    -#define HAVE_GETHOSTNAME 1\n    -\n    -/* Define to 1 if you have the `getlogin' function. */\n    -#undef HAVE_GETLOGIN\n    -\n    -/* Define to 1 if you have the `getpwuid_r' function. */\n    -#undef HAVE_GETPWUID_R\n    -\n    -/* Define to 1 if you have the `gettimeofday' function. */\n    -#undef HAVE_GETTIMEOFDAY\n    -\n    -/* Define to 1 if you have the `getuid' function. */\n    -#undef HAVE_GETUID\n    -\n    -/* Define to 1 if you have the <inttypes.h> header file. */\n    -#undef HAVE_INTTYPES_H\n    -\n    -/* Define to 1 if you have the `memmove' function. */\n    -#undef HAVE_MEMMOVE\n    -\n    -/* Define to 1 if you have the <memory.h> header file. */\n    -#undef HAVE_MEMORY_H\n    -\n    -/* Define to 1 if you have the `memset' function. */\n    -#undef HAVE_MEMSET\n    -\n    -/* Define to 1 if you have the <netdb.h> header file. */\n    -#undef HAVE_NETDB_H\n    -\n    -/* Define to 1 if you have the <netinet/in.h> header file. */\n    -#undef HAVE_NETINET_IN_H\n    -\n    -/* Define to 1 if you have the `poll' function. */\n    -#undef HAVE_POLL\n    -\n    -/* Define to 1 if you have the `socket' function. */\n    -#undef HAVE_SOCKET\n    -\n    -/* Define to 1 if you have the <stdint.h> header file. */\n    -#undef HAVE_STDINT_H\n    -\n    -/* Define to 1 if you have the <stdlib.h> header file. */\n    -#define HAVE_STDLIB_H 1\n    -\n    -/* Define to 1 if you have the `strchr' function. */\n    -#define HAVE_STRCHR 1\n    -\n    -/* Define to 1 if you have the `strdup' function. */\n    -#define HAVE_STRDUP 1\n    -\n    -/* Define to 1 if you have the `strerror' function. */\n    -#define HAVE_STRERROR 1\n    -\n    -/* Define to 1 if you have the <strings.h> header file. */\n    -#undef HAVE_STRINGS_H\n    -\n    -/* Define to 1 if you have the <string.h> header file. */\n    -#undef HAVE_STRING_H\n    -\n    -/* Define to 1 if you have the `strtol' function. */\n    -#undef HAVE_STRTOL\n    -\n    -/* Define to 1 if you have the <sys/socket.h> header file. */\n    -#undef HAVE_SYS_SOCKET_H\n    -\n    -/* Define to 1 if you have the <sys/stat.h> header file. */\n    -#undef HAVE_SYS_STAT_H\n    -\n    -/* Define to 1 if you have the <sys/time.h> header file. */\n    -#undef HAVE_SYS_TIME_H\n    -\n    -/* Define to 1 if you have the <sys/types.h> header file. */\n    -#undef HAVE_SYS_TYPES_H\n    -\n    -/* Define to 1 if you have the <sys/utsname.h> header file. */\n    -#undef HAVE_SYS_UTSNAME_H\n    -\n    -/* Define to 1 if you have the <unistd.h> header file. */\n    -#undef HAVE_UNISTD_H\n    -\n    -/* Define to the sub-directory in which libtool stores uninstalled libraries.\n    -   */\n    -#define LT_OBJDIR\n    -\n    -/* Define to 1 if your C compiler doesn't accept -c and -o together. */\n    -/* #undef NO_MINUS_C_MINUS_O */\n    -\n    -/* Name of package */\n    -#define PACKAGE \"c-client-src\"\n    -\n    -/* Define to the address where bug reports for this package should be sent. */\n    -#define PACKAGE_BUGREPORT \"user@zookeeper.apache.org\"\n    -\n    -/* Define to the full name of this package. */\n    -#define PACKAGE_NAME \"zookeeper C client\"\n    -\n    -/* Define to the full name and version of this package. */\n    -#define PACKAGE_STRING \"zookeeper C client 3.5.0 win32\"\n    -\n    -/* Define to the one symbol short name of this package. */\n    -#define PACKAGE_TARNAME \"c-client-src\"\n    -\n    -/* Define to the home page for this package. */\n    -#define PACKAGE_URL \"\"\n    -\n    -/* Define to the version of this package. */\n    -#define PACKAGE_VERSION \"3.5.0\"\n    --- End diff --\n    \n    Yes, your observation is correct. We only bump versions encoded in this file of master branch when we do a major release (e.g. from 3.4.x to 3.5.0). The same file in branch-3.5 contains more up to date version number for previous release (3.5.3 for 3.5, and 3.4.10 for 3.4). So this issue is not a problem.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T23:37:59.749+0000","updated":"2017-07-08T23:37:59.749+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079373","id":"16079373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @andschwa Thanks for clarification regarding the coexisting of CMake and makefile. I agree and let's keep the current folder structure, but I think some documentations would be good to help clarify the case. How about document the build toolchain for windows in the README file under the same folder? \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-08T23:45:46.956+0000","updated":"2017-07-08T23:45:46.956+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079423","id":"16079423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/306#discussion_r126294494\n  \n    --- Diff: src/c/include/winconfig.h ---\n    @@ -1,196 +1,15 @@\n    -/* Define to 1 if you have the <arpa/inet.h> header file. */\n    -#undef HAVE_ARPA_INET_H\n    -\n    -/* Define to 1 if you have the <dlfcn.h> header file. */\n    -#undef HAVE_DLFCN_H\n    -\n    -/* Define to 1 if you have the <fcntl.h> header file. */\n    -#undef HAVE_FCNTL_H\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.c'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1\n    -\n    -/* Define to 1 if you have the file `generated/zookeeper.jute.h'. */\n    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1\n    -\n    -/* Define to 1 if you have the `getcwd' function. */\n    -#undef HAVE_GETCWD\n    -\n    -/* Define to 1 if you have the `gethostbyname' function. */\n    -#undef HAVE_GETHOSTBYNAME\n    -\n    -/* Define to 1 if you have the `gethostname' function. */\n    -#define HAVE_GETHOSTNAME 1\n    -\n    -/* Define to 1 if you have the `getlogin' function. */\n    -#undef HAVE_GETLOGIN\n    -\n    -/* Define to 1 if you have the `getpwuid_r' function. */\n    -#undef HAVE_GETPWUID_R\n    -\n    -/* Define to 1 if you have the `gettimeofday' function. */\n    -#undef HAVE_GETTIMEOFDAY\n    -\n    -/* Define to 1 if you have the `getuid' function. */\n    -#undef HAVE_GETUID\n    -\n    -/* Define to 1 if you have the <inttypes.h> header file. */\n    -#undef HAVE_INTTYPES_H\n    -\n    -/* Define to 1 if you have the `memmove' function. */\n    -#undef HAVE_MEMMOVE\n    -\n    -/* Define to 1 if you have the <memory.h> header file. */\n    -#undef HAVE_MEMORY_H\n    -\n    -/* Define to 1 if you have the `memset' function. */\n    -#undef HAVE_MEMSET\n    -\n    -/* Define to 1 if you have the <netdb.h> header file. */\n    -#undef HAVE_NETDB_H\n    -\n    -/* Define to 1 if you have the <netinet/in.h> header file. */\n    -#undef HAVE_NETINET_IN_H\n    -\n    -/* Define to 1 if you have the `poll' function. */\n    -#undef HAVE_POLL\n    -\n    -/* Define to 1 if you have the `socket' function. */\n    -#undef HAVE_SOCKET\n    -\n    -/* Define to 1 if you have the <stdint.h> header file. */\n    -#undef HAVE_STDINT_H\n    -\n    -/* Define to 1 if you have the <stdlib.h> header file. */\n    -#define HAVE_STDLIB_H 1\n    -\n    -/* Define to 1 if you have the `strchr' function. */\n    -#define HAVE_STRCHR 1\n    -\n    -/* Define to 1 if you have the `strdup' function. */\n    -#define HAVE_STRDUP 1\n    -\n    -/* Define to 1 if you have the `strerror' function. */\n    -#define HAVE_STRERROR 1\n    -\n    -/* Define to 1 if you have the <strings.h> header file. */\n    -#undef HAVE_STRINGS_H\n    -\n    -/* Define to 1 if you have the <string.h> header file. */\n    -#undef HAVE_STRING_H\n    -\n    -/* Define to 1 if you have the `strtol' function. */\n    -#undef HAVE_STRTOL\n    -\n    -/* Define to 1 if you have the <sys/socket.h> header file. */\n    -#undef HAVE_SYS_SOCKET_H\n    -\n    -/* Define to 1 if you have the <sys/stat.h> header file. */\n    -#undef HAVE_SYS_STAT_H\n    -\n    -/* Define to 1 if you have the <sys/time.h> header file. */\n    -#undef HAVE_SYS_TIME_H\n    -\n    -/* Define to 1 if you have the <sys/types.h> header file. */\n    -#undef HAVE_SYS_TYPES_H\n    -\n    -/* Define to 1 if you have the <sys/utsname.h> header file. */\n    -#undef HAVE_SYS_UTSNAME_H\n    -\n    -/* Define to 1 if you have the <unistd.h> header file. */\n    -#undef HAVE_UNISTD_H\n    -\n    -/* Define to the sub-directory in which libtool stores uninstalled libraries.\n    -   */\n    -#define LT_OBJDIR\n    -\n    -/* Define to 1 if your C compiler doesn't accept -c and -o together. */\n    -/* #undef NO_MINUS_C_MINUS_O */\n    -\n    -/* Name of package */\n    -#define PACKAGE \"c-client-src\"\n    -\n    -/* Define to the address where bug reports for this package should be sent. */\n    -#define PACKAGE_BUGREPORT \"user@zookeeper.apache.org\"\n    -\n    -/* Define to the full name of this package. */\n    -#define PACKAGE_NAME \"zookeeper C client\"\n    -\n    -/* Define to the full name and version of this package. */\n    -#define PACKAGE_STRING \"zookeeper C client 3.5.0 win32\"\n    -\n    -/* Define to the one symbol short name of this package. */\n    -#define PACKAGE_TARNAME \"c-client-src\"\n    -\n    -/* Define to the home page for this package. */\n    -#define PACKAGE_URL \"\"\n    -\n    -/* Define to the version of this package. */\n    -#define PACKAGE_VERSION \"3.5.0\"\n    --- End diff --\n    \n    Ah, that makes more sense!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-09T02:39:00.727+0000","updated":"2017-07-09T02:39:00.727+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16079426","id":"16079426","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @hanm ah, documentation for it would indeed be good! Can do. Anything else you need for this? If not, I'll get the readme fixed up Monday morning and ping you afterward.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-09T02:55:51.836+0000","updated":"2017-07-09T02:55:51.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16080754","id":"16080754","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @hanm I ended up just adding it [straight to the src/c/README](https://github.com/apache/zookeeper/pull/306/files#diff-a722fe5ba032cb8da6c78d0e929f4ac5R74), let me know if you think it should have more/less etc.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-10T18:00:37.188+0000","updated":"2017-07-10T18:00:37.188+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16080780","id":"16080780","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 12 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-10T18:09:31.539+0000","updated":"2017-07-10T18:09:31.539+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16080793","id":"16080793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 12 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-10T18:19:50.608+0000","updated":"2017-07-10T18:19:50.608+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16080812","id":"16080812","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    Hey, yay, Jenkins passed!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-10T18:30:42.741+0000","updated":"2017-07-10T18:30:42.741+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16081625","id":"16081625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @andschwa \n    Patch looks good to me. The readme update looks good too. \n    \n    I also verified Linux and Mac c client builds with the patch. Unfortunately I don't have a windows box to test. Can you please describe what kinds of test / integration test you did on windows? \n    \n    There are two remaining issues:\n    * Can you please update the pull request description by adding a brief description on what this patch is for and how it did it. The pull request description will be part of commit message, and it's good to have a informative commit message.\n    \n    * This pull request is targeting master, which is not going to be released soon. branch-3.5 and branch-3.4 are branches for next releases, are you going to send separate pull requests to those branches, or you are fine just with this merged into master?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-11T04:10:48.163+0000","updated":"2017-07-11T04:10:48.163+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16081634","id":"16081634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    > Can you please describe what kinds of test / integration test you did on windows?\n    \n    Unfortunately, we don't have the unit tests building on Windows (under any tools). So I ensured I could reliably build the project with CMake and get the expected outputs. Moreover, I have a [zk-test branch](https://github.com/andschwa/mesos/tree/zk-test) in Mesos where I updated our system to apply these patches to the 3.5.2 release, and build with them (verifying that the second patch resolved [MESOS-7541](https://issues.apache.org/jira/browse/MESOS-7541)). I verified I could link to the libraries as expected, and ran some tests (though I'd like to give a full `mesos-test` pass of our entire suite).\n    \n    Furthermore, we have been building and using the first patch (the addition of the CMake build, but not the re-port changes) since [April 25](https://github.com/apache/mesos/commit/6e64ffaca365ed1e28256d7cb87bf9e1af626a75) with no problems; so I'd say the CMake system is thoroughly tested for Windows (at least in its previous form, but only some cosmetics, e.g. TODOs/comments/default option for building unit tests, were changed when I updated this PR).\n    \n    > Can you please update the pull request description by adding a brief description on what this patch is for and how it did it. The pull request description will be part of commit message, and it's good to have a informative commit message.\n    \n    Wouldn't you rather use the two commit messages, a58a5a95aef9cafc267a1b4a2bdb37f9e9e26363 and c550a3e3babcaa3b3891280ac2d61b89fd294d06 as-is (those should be two links to the commits with their respective messages, but the ASF bot might not copy them since they're automatic from GitHub)? These are the patches as I'd commit them (as in, I wouldn't squash them into one, since they're resolving two bugs).\n    \n    > This pull request is targeting master, which is not going to be released soon. branch-3.5 and branch-3.4 are branches for next releases, are you going to send separate pull requests to those branches, or you are fine just with this merged into master?\n    \n    I would be happy to provide backports of these two patches, especially for branch-3.5, so that I can remove the manual patch step in Mesos's build process as soon as possible :D. But first, let's figure out the patch messages. I could copy them into the PR description, but then I'm afraid it's going to be squashed as one patch instead of the two logical patches. I could replace this PR with two separate PRs, one for each patch, and then repeat that for the two branches; but I'm not sure you want that either.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-11T04:26:34.471+0000","updated":"2017-07-11T04:26:34.471+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16081645","id":"16081645","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    If we want two commits, then we need two pull requests. Two (or more ) commits appertain to a single pull request will be squashed to a single commit at commit time by our commit script. I think it's fine to have this pull request resolve both issue with a single commit.\n    \n    I can massage the commit message at commit time to include the messages from both commit, or you could update the pull request description with both message, I am ok with either way.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-11T04:38:31.581+0000","updated":"2017-07-11T04:38:31.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16081666","id":"16081666","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @hanm ah, I see! That is no problem. I have taken the two messages, improved them a bit as one message, and updated the description. It will be easier to backport it this way.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-11T05:02:01.865+0000","updated":"2017-07-11T05:02:01.865+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16081670","id":"16081670","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @hanm I'm going to let you take care of the title, maybe it should be:\n    \n    > ZOOKEEPER-2756 and ZOOKEEPER-2841: Improve cross-platform support with CMake and refactor\n    \n    But I don't know.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-11T05:10:09.528+0000","updated":"2017-07-11T05:10:09.528+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16083421","id":"16083421","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    Thanks for update. LGTM. Will merge by end of this week. Give a few more days in case someone has additional feedback for this.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-12T04:21:59.987+0000","updated":"2017-07-12T04:21:59.987+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16084856","id":"16084856","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @hanm I'm likewise giving this some more testing too. I'm integrating the patch into Mesos on the Linux side (where we were building with Autotools), and porting our ZooKeeper-explicit unit tests to Windows (because apparently they weren't). We do have tests that I've run that indirectly tested the ZooKeeper client, but I want certain tests. Expect a small update by the end of the week.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-12T22:43:00.710+0000","updated":"2017-07-12T22:43:00.710+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16086210","id":"16086210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    This [here](https://github.com/apache/zookeeper/pull/306/files#diff-1ea258ac6b9efc24b67d2c2a704cfe5fR145) is all I changed; it ensures that the `config.h` file is always put into the source `include` directory, which is what upstream projects include. This was needed because `zookeeper.h` includes the file, so this makes sure it exists next to it (instead of in the binary directory, which works for the ZK build, but if it's out-of-tree, is misplaced for upstream consumption).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-13T18:51:00.462+0000","updated":"2017-07-13T18:51:00.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16086234","id":"16086234","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 12 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-13T19:01:23.537+0000","updated":"2017-07-13T19:01:23.537+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16086418","id":"16086418","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    looks good. test failures are irrelevant (we should really get the flaky tests fixed soon.).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-13T21:07:50.129+0000","updated":"2017-07-13T21:07:50.129+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16090446","id":"16090446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    I managed to get the Mesos unit tests for ZooKeeper ported to our CMake system, which much more thoroughly exercises the C client. I've integrated this patch and the CMake system with the Mesos build on Linux, and all our tests passed:\n    \n    ```\n    [----------] 7 tests from ZooKeeperTest\n    [ RUN      ] ZooKeeperTest.Auth\n    [       OK ] ZooKeeperTest.Auth (6923 ms)\n    [ RUN      ] ZooKeeperTest.SessionTimeoutNegotiation\n    [       OK ] ZooKeeperTest.SessionTimeoutNegotiation (46 ms)\n    [ RUN      ] ZooKeeperTest.Create\n    [       OK ] ZooKeeperTest.Create (6770 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetector\n    [       OK ] ZooKeeperTest.LeaderDetector (57 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetectorTimeoutHandling\n    2017-07-14 15:23:18,510:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2409: Socket [127.0.0.1:43434] zk retcode=-4, errno=112(Host is down): failed while receiving a server response\n    2017-07-14 15:23:18,510:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2384: Socket [127.0.0.1:43434] zk retcode=-4, errno=111(Connection refused): server refused to accept the client\n    2017-07-14 15:23:18,514:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2384: Socket [127.0.0.1:43434] zk retcode=-4, errno=111(Connection refused): server refused to accept the client\n    2017-07-14 15:23:18,514:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2384: Socket [127.0.0.1:43434] zk retcode=-4, errno=111(Connection refused): server refused to accept the client\n    [       OK ] ZooKeeperTest.LeaderDetectorTimeoutHandling (50 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetectorCancellationHandling\n    [       OK ] ZooKeeperTest.LeaderDetectorCancellationHandling (54 ms)\n    [ RUN      ] ZooKeeperTest.LeaderContender\n    2017-07-14 15:23:18,630:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2409: Socket [127.0.0.1:38085] zk retcode=-4, errno=112(Host is down): failed while receiving a server response\n    2017-07-14 15:23:18,632:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2428: Socket [127.0.0.1:38085] zk retcode=-112, errno=116(Stale file handle): sessionId=0x10000305fd80000 has expired.\n    2017-07-14 15:23:18,655:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2409: Socket [127.0.0.1:38085] zk retcode=-4, errno=112(Host is down): failed while receiving a server response\n    2017-07-14 15:23:18,657:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2428: Socket [127.0.0.1:38085] zk retcode=-112, errno=116(Stale file handle): sessionId=0x10000305fd80001 has expired.\n    2017-07-14 15:23:18,676:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2409: Socket [127.0.0.1:38085] zk retcode=-4, errno=112(Host is down): failed while receiving a server response\n    2017-07-14 15:23:18,677:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2384: Socket [127.0.0.1:38085] zk retcode=-4, errno=111(Connection refused): server refused to accept the client\n    2017-07-14 15:23:18,688:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2384: Socket [127.0.0.1:38085] zk retcode=-4, errno=111(Connection refused): server refused to accept the client\n    2017-07-14 15:23:18,688:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2384: Socket [127.0.0.1:38085] zk retcode=-4, errno=111(Connection refused): server refused to accept the client\n    [       OK ] ZooKeeperTest.LeaderContender (304 ms)\n    [----------] 7 tests from ZooKeeperTest (14204 ms total)\n    \n    [----------] Global test environment tear-down\n    [==========] 7 tests from 1 test case ran. (14376 ms total)\n    [  PASSED  ] 7 tests.\n    ```\n    \n    And then I brought these changes over to Windows too, and while it's currently building with ~some~ a lot of irrelevant-to-this-patch hacks, they pass:\n    \n    ```\n    [----------] 7 tests from ZooKeeperTest\n    [ RUN      ] ZooKeeperTest.Auth\n    [       OK ] ZooKeeperTest.Auth (7101 ms)\n    [ RUN      ] ZooKeeperTest.SessionTimeoutNegotiation\n    [       OK ] ZooKeeperTest.SessionTimeoutNegotiation (737 ms)\n    [ RUN      ] ZooKeeperTest.Create\n    [       OK ] ZooKeeperTest.Create (6752 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetector\n    [       OK ] ZooKeeperTest.LeaderDetector (107 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetectorTimeoutHandling\n    2017-07-17 12:52:08,546:15936(0x3334):ZOO_ERROR@handle_socket_error_msg@2409: Socket [127.0.0.1:54312] zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response\n    [       OK ] ZooKeeperTest.LeaderDetectorTimeoutHandling (68 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetectorCancellationHandling\n    [       OK ] ZooKeeperTest.LeaderDetectorCancellationHandling (72 ms)\n    [ RUN      ] ZooKeeperTest.LeaderContender\n    2017-07-17 12:52:08,709:15936(0x47c8):ZOO_ERROR@handle_socket_error_msg@2409: Socket [127.0.0.1:54336] zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response\n    2017-07-17 12:52:08,714:15936(0x47c8):ZOO_ERROR@handle_socket_error_msg@2428: Socket [127.0.0.1:54336] zk retcode=-112, errno=19(No such device): sessionId=0x1001b9dddba0000 has expired.\n    2017-07-17 12:52:08,749:15936(0x39b8):ZOO_ERROR@handle_socket_error_msg@2409: Socket [127.0.0.1:54336] zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response\n    2017-07-17 12:52:08,754:15936(0x39b8):ZOO_ERROR@handle_socket_error_msg@2428: Socket [127.0.0.1:54336] zk retcode=-112, errno=19(No such device): sessionId=0x1001b9dddba0001 has expired.\n    2017-07-17 12:52:08,788:15936(0xb94):ZOO_ERROR@handle_socket_error_msg@2409: Socket [127.0.0.1:54336] zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response\n    [       OK ] ZooKeeperTest.LeaderContender (701 ms)\n    [----------] 7 tests from ZooKeeperTest (15548 ms total)\n    \n    [----------] Global test environment tear-down\n    [==========] 7 tests from 1 test case ran. (16724 ms total)\n    [  PASSED  ] 7 tests.\n    ```\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-17T19:53:11.225+0000","updated":"2017-07-17T19:53:11.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16090704","id":"16090704","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user andschwa opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/311\n\n    ZOOKEEPER-2841: ZooKeeper public include files leak porting change\n\n    This patch primarily adds a cross-platform CMake build system. This is in\n    addition to the Autotools system on Linux, until it can be deprecated, and this\n    replaces the existing committed Visual Studio Solutions for Windows.\n    \n    As this commit deprecates (and breaks) the previously existing Visual Studio\n    solutions and projects, they've been removed. Building on Windows now requires\n    CMake, but this enables the support of any code-supported Visual Studio version.\n    Support for Visual Studio 2017 was explicitly added by this patch, and support\n    for future versions, barring software bugs, should be available automatically\n    through CMake.\n    \n    The notable features lacking in comparison to Autotools are Solaris support,\n    shared library builds, whitelisted symbol exports, libtool integration, and\n    doxygen document generation. Almost everything else from Autotools has been\n    ported, including header/function/library checks, and all targets (zookeeper,\n    hashtable, cli, load_gen, and tests).\n    \n    The primary work involved for CMake (other than the writing of `CMakeLists.txt`)\n    was transitioning the hand-written `winconfig.h` to an auto-generated `config.h`\n    file, and guarding code with `#ifdef HAVE_FEATURE`. The `cmake_config.h.in`\n    template was modeled after the Autotools config file so that the feature guards\n    share the same names.\n    \n    This patch also refactors the Windows port of the C client. Notably, it moves as\n    much porting code as possible out of the publicly included `winconfig.h` header\n    and into the relevant source files, or the private `winport.h` header.\n    \n    While `load_gen.c` looks at first glance as if it were ported to Windows, it\n    never actually was, so the erroneous `#include \"win32port.h\"` was removed, and\n    the target is not built on Windows.\n    \n    The `include/winstdint.h` header was removed as it has been replaced by\n    `<stdint.h>`. This might break very old versions of Visual Studio; but in those\n    cases, previous versions of the client are available.\n    \n    A bug for upstream libraries including the ZooKeeper headers was fixed by\n    removing `#undef AF_INET6` entirely, and removing `#include <windows.h>`, as it\n    \"pulls in the world\" and should not be included publicly.\n    \n    A guard was placed around `#define snprintf` in order to enable compiling with\n    modern versions of MSVC, including Visual Studio 2015.\n    \n    A problem with `DLL_EXPORT` and `USE_STATIC_LIB` being redefined was fixed.\n    \n    There are existent warnings which this patch did not attempt to fix.\n    \n    Building tests on Windows is not supported, but was not previously supported.\n    The tests need to be ported.\n    \n    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially remove\n    `include/winconfig.h` altogether.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/andschwa/zookeeper cmake-backport-3.5\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/311.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #311\n    \n----\ncommit 081833e9899afd4937075038f78bb4faff446ef4\nAuthor: Andrew Schwartzmeyer <andrew@schwartzmeyer.com>\nDate:   2017-04-10T23:12:40Z\n\n    ZOOKEEPER-2756: Add CMake build system for better cross-platform support\n    \n    This notably lacks Solaris and libtool support.\n    \n    Almost everything else from Autotools has been ported,\n    including header/function/library checks, and all targets\n    (zookeeper, hashtable, cli, load_gen, and tests).\n    \n    Both Linux and Windows are supported.\n    \n    The primary work involved (other than the writing of `CMakeLists.txt`)\n    was transitioning the hand-written `winconfig.h` to an\n    auto-generated `config.h` file, and guarding code with `#ifdef\n    HAVE_FEATURE`. The `cmake_config.h.in` template was modeled after\n    the Autotools config file so that the feature guards share the same\n    names.\n    \n    While `load_gen.c` looks at first glance as if it were ported to Windows,\n    it never actually was, so the erroneous `#include \"win32port.h\"` was\n    removed, and the target is not built on Windows.\n    \n    There are existent warnings which this patch did not attempt to fix.\n    \n    A guard was placed around `#define snprintf` in order to enable\n    compiling with modern versions of MSVC.\n    \n    Fixed DLL_EXPORT and USE_STATIC_LIB redefinition.\n    \n    As this commit deprecates (and breaks) the previously existing Visual\n    Studio solutions and projects, they've been removed.\n    \n    Building tests on Windows is still not supported.\n\ncommit 49f9558dea6504e5f082edd0d4d5191503c54235\nAuthor: Andrew Schwartzmeyer <andrew@schwartzmeyer.com>\nDate:   2017-07-07T22:35:37Z\n\n    ZOOKEEPER-2841: ZooKeeper public include files leak porting changes\n    \n    This patch refactors the Windows port of the C client. Notably, it moves\n    as much porting code as possible out of the publicly included\n    `winconfig.h` header and into the relevant source files. This also\n    removes `winstdint.h` as it has been replaced by `<stdint.h>`. It fixes\n    problems for upstream libraries by removing `#undef AF_INET6` and\n    `#include <windows.h>`.\n    \n    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially\n    remove `include/winconfig.h` altogether.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-17T22:31:48.659+0000","updated":"2017-07-17T22:31:48.659+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16090709","id":"16090709","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/311\n  \n    @hanm this backports #306 to `branch-3.5`. I rebuilt and retested, all looks good. Since original branch came from `master` the version was already what I believe to be correct at `3.5.3`.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-17T22:32:54.002+0000","updated":"2017-07-17T22:32:54.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16090756","id":"16090756","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/311\n  \n    Hm... it might not backport so easily to `branch-3.4`. Let me know how badly it's wanted.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-17T22:58:47.360+0000","updated":"2017-07-17T22:58:47.360+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16090919","id":"16090919","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 12 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T01:08:58.844+0000","updated":"2017-07-18T01:08:58.844+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091116","id":"16091116","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    Thanks for the extra efforts on integration testing, @andschwa. I'll commit this tomorrow.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T05:10:43.095+0000","updated":"2017-07-18T05:10:43.095+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091117","id":"16091117","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/311\n  \n    @andschwa branch-3.4 is the stable branch that we actually ship - I assume your use case (Mesos on windows?) will integrate with that version as well. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T05:13:06.572+0000","updated":"2017-07-18T05:13:06.572+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091779","id":"16091779","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/311\n  \n    @hanm oh..  good to know! Okay I'll give it another whack, thanks :)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T16:17:59.153+0000","updated":"2017-07-18T16:17:59.153+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091877","id":"16091877","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/zookeeper/pull/306\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T17:42:49.574+0000","updated":"2017-07-18T17:42:49.574+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091881","id":"16091881","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"Committed to master. https://github.com/apache/zookeeper/commit/f60928787a908f358a64763f802a6d0371ad4404. Will resolve JIRA after committing ported patch to branch-3.4 and 3.5.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-07-18T17:45:48.119+0000","updated":"2017-07-18T17:45:48.119+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091885","id":"16091885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    @andschwa This patch just landed on master. Thanks for your contribution. I'll review the branch-3.5 port and commit it later this week if it looks good.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T17:48:35.738+0000","updated":"2017-07-18T17:48:35.738+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091894","id":"16091894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user andschwa opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/313\n\n    ZOOKEEPER-2841: ZooKeeper public include files leak porting changes\n\n    This patch primarily adds a cross-platform CMake build system. This is in\n    addition to the Autotools system on Linux, until it can be deprecated, and this\n    replaces the existing committed Visual Studio Solutions for Windows.\n    \n    As this commit deprecates (and breaks) the previously existing Visual Studio\n    solutions and projects, they've been removed. Building on Windows now requires\n    CMake, but this enables the support of any code-supported Visual Studio version.\n    Support for Visual Studio 2017 was explicitly added by this patch, and support\n    for future versions, barring software bugs, should be available automatically\n    through CMake.\n    \n    The notable features lacking in comparison to Autotools are Solaris support,\n    shared library builds, whitelisted symbol exports, libtool integration, and\n    doxygen document generation. Almost everything else from Autotools has been\n    ported, including header/function/library checks, and all targets (zookeeper,\n    hashtable, cli, load_gen, and tests).\n    \n    The primary work involved for CMake (other than the writing of `CMakeLists.txt`)\n    was transitioning the hand-written `winconfig.h` to an auto-generated `config.h`\n    file, and guarding code with `#ifdef HAVE_FEATURE`. The `cmake_config.h.in`\n    template was modeled after the Autotools config file so that the feature guards\n    share the same names.\n    \n    This patch also refactors the Windows port of the C client. Notably, it moves as\n    much porting code as possible out of the publicly included `winconfig.h` header\n    and into the relevant source files, or the private `winport.h` header.\n    \n    While `load_gen.c` looks at first glance as if it were ported to Windows, it\n    never actually was, so the erroneous `#include \"win32port.h\"` was removed, and\n    the target is not built on Windows.\n    \n    The `include/winstdint.h` header was removed as it has been replaced by\n    `<stdint.h>`. This might break very old versions of Visual Studio; but in those\n    cases, previous versions of the client are available.\n    \n    A bug for upstream libraries including the ZooKeeper headers was fixed by\n    removing `#undef AF_INET6` entirely, and removing `#include <windows.h>`, as it\n    \"pulls in the world\" and should not be included publicly.\n    \n    A guard was placed around `#define snprintf` in order to enable compiling with\n    modern versions of MSVC, including Visual Studio 2015.\n    \n    A problem with `DLL_EXPORT` and `USE_STATIC_LIB` being redefined was fixed.\n    \n    There are existent warnings which this patch did not attempt to fix.\n    \n    Building tests on Windows is not supported, but was not previously supported.\n    The tests need to be ported.\n    \n    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially remove\n    `include/winconfig.h` altogether.\n\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/andschwa/zookeeper cmake-backport-3.4\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/313.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #313\n    \n----\ncommit 8b903e3089a575bbead03275c7d1e8591245cca0\nAuthor: Andrew Schwartzmeyer <andrew@schwartzmeyer.com>\nDate:   2017-04-10T23:12:40Z\n\n    ZOOKEEPER-2756: Add CMake build system for better cross-platform support\n    \n    This notably lacks Solaris and libtool support.\n    \n    Almost everything else from Autotools has been ported,\n    including header/function/library checks, and all targets\n    (zookeeper, hashtable, cli, load_gen, and tests).\n    \n    Both Linux and Windows are supported.\n    \n    The primary work involved (other than the writing of `CMakeLists.txt`)\n    was transitioning the hand-written `winconfig.h` to an\n    auto-generated `config.h` file, and guarding code with `#ifdef\n    HAVE_FEATURE`. The `cmake_config.h.in` template was modeled after\n    the Autotools config file so that the feature guards share the same\n    names.\n    \n    While `load_gen.c` looks at first glance as if it were ported to Windows,\n    it never actually was, so the erroneous `#include \"win32port.h\"` was\n    removed, and the target is not built on Windows.\n    \n    There are existent warnings which this patch did not attempt to fix.\n    \n    A guard was placed around `#define snprintf` in order to enable\n    compiling with modern versions of MSVC.\n    \n    Fixed DLL_EXPORT and USE_STATIC_LIB redefinition.\n    \n    As this commit deprecates (and breaks) the previously existing Visual\n    Studio solutions and projects, they've been removed.\n    \n    Building tests on Windows is still not supported.\n\ncommit bf53c535bcda4a92728140770482919055573ba0\nAuthor: Andrew Schwartzmeyer <andrew@schwartzmeyer.com>\nDate:   2017-07-07T22:35:37Z\n\n    ZOOKEEPER-2841: ZooKeeper public include files leak porting changes\n    \n    This patch refactors the Windows port of the C client. Notably, it moves\n    as much porting code as possible out of the publicly included\n    `winconfig.h` header and into the relevant source files. This also\n    removes `winstdint.h` as it has been replaced by `<stdint.h>`. It fixes\n    problems for upstream libraries by removing `#undef AF_INET6` and\n    `#include <windows.h>`.\n    \n    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially\n    remove `include/winconfig.h` altogether.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T17:52:38.214+0000","updated":"2017-07-18T17:52:38.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091905","id":"16091905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    @hanm this backports #306 to `branch-3.4`. I think I caught everything, but do give it a review. The build changed a bit between 3.4 and 3.5, so I had to remove some files from `CMakeLists.txt`, and I set the version to `3.4.10`. Then there were some fixes I had to do a bit differently (moved the `#define random` into `zookeeper.c` since `addrvec.c` wasn't created yet, reapply the changes I made to `zookeeper_interest` by hand, and one trivial merge conflict in `recordio.h`).\n    \n    I build and ran the tests on Linux, all passing save:\n    \n    ```\n    1: Zookeeper_simpleSystem::testAsyncWatcherAutoResetterminate called after throwing an instance of 'CppUnit::Exception'\n    1:   what():  equality assertion failed\n    1: - Expected: -101\n    1: - Actual  : -4\n    ```\n    \n    which is odd. Is it a flaky test, or very machine dependent?\n    \n    I built on Windows, and it all compiled and linked successfully. If you want, I can integration test it. I probably should anyway so I can move Mesos on Windows back to down to ZK 3.4 instead of 3.5.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T17:58:00.585+0000","updated":"2017-07-18T17:58:00.585+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091907","id":"16091907","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/306\n  \n    Thanks for all your help @hanm! I added a PR for the `branch-3.4` port too.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T17:58:51.909+0000","updated":"2017-07-18T17:58:51.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16091965","id":"16091965","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 9 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-18T18:29:36.484+0000","updated":"2017-07-18T18:29:36.484+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16092563","id":"16092563","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    @andschwa Thanks for update. I will review this later this week in detail. Regarding the \"flaky\" test, AFAIK, this one is not particularly flaky (and in general, there are a lot less flaky tests in C client tests comparing to Java tests). The pre-commit build is green though. Did you observe fairly consistent failures for this `Zookeeper_simpleSystem::testAsyncWatcherAutoResetterminate`? One thing we can try is to run this test with and without your patch and see if there are any difference. Re integration tests - if you have time yeah please go ahead and try it.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-19T04:51:17.738+0000","updated":"2017-07-19T04:51:17.738+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16093648","id":"16093648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    @hanm While the Windows version of Mesos had been using ZooKeeper 3.5.2, the Linux version was using ZooKeeper 3.4.8. I took this patch and cherry-picked back to 3.4.8, and changed the Windows version of Mesos to use 3.4.8 with this patch. However, I also needed 97e598b6c (ZOOKEEPER-1643) in order to build, which is not in `branch-3.4`. Would you be willing to backport ZOOKEEPER-1643 too? If so, then we can switch to the next 3.4 release without any patches at all.\n    \n    As for `Zookeeper_simpleSystem::testAsyncWatcherAutoReset`, I observed it failing consistently even on `branch-3.4` built with Autotools (i.e. none of my changes at all). I'm inferring that it's a machine issue, and since it didn't fail on Jenkins, I don't think we need to worry about it.\n    \n    Furthermore, with this patch _and_ ZOOKEEPER-1643 (currently in this branch), I was able to integration test with Mesos on Windows and Linux successfully.\n    \n    CentOS 7:\n    ```\n    [==========] Running 7 tests from 1 test case.\n    [----------] Global test environment set-up.\n    [----------] 7 tests from ZooKeeperTest\n    [ RUN      ] ZooKeeperTest.Auth\n    [       OK ] ZooKeeperTest.Auth (6898 ms)\n    [ RUN      ] ZooKeeperTest.SessionTimeoutNegotiation\n    [       OK ] ZooKeeperTest.SessionTimeoutNegotiation (46 ms)\n    [ RUN      ] ZooKeeperTest.Create\n    [       OK ] ZooKeeperTest.Create (6728 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetector\n    [       OK ] ZooKeeperTest.LeaderDetector (70 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetectorTimeoutHandling\n    2017-07-19 12:13:30,626:200313(0x7fd99cb08700):ZOO_ERROR@handle_socket_error_msg@1781: Socket [127.0.0.1:45292] zk retcode=-4, errno=112(Host is down): failed while receiving a server response\n    2017-07-19 12:13:30,642:200313(0x7fd96cfff700):ZOO_ERROR@handle_socket_error_msg@1757: Socket [127.0.0.1:45292] zk retcode=-4, errno=111(Connection refused): server refused to accept the client\n    [       OK ] ZooKeeperTest.LeaderDetectorTimeoutHandling (51 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetectorCancellationHandling\n    [       OK ] ZooKeeperTest.LeaderDetectorCancellationHandling (74 ms)\n    [ RUN      ] ZooKeeperTest.LeaderContender\n    2017-07-19 12:13:30,759:200313(0x7fd96cfff700):ZOO_ERROR@handle_socket_error_msg@1781: Socket [127.0.0.1:44849] zk retcode=-4, errno=112(Host is down): failed while receiving a server response\n    2017-07-19 12:13:34,096:200313(0x7fd96cfff700):ZOO_ERROR@handle_socket_error_msg@1799: Socket [127.0.0.1:44849] zk retcode=-112, errno=116(Stale file handle): sessionId=0x15d5c44fa610000 has expired.\n    2017-07-19 12:13:34,119:200313(0x7fd99cb08700):ZOO_ERROR@handle_socket_error_msg@1781: Socket [127.0.0.1:44849] zk retcode=-4, errno=112(Host is down): failed while receiving a server response\n    2017-07-19 12:13:34,121:200313(0x7fd99cb08700):ZOO_ERROR@handle_socket_error_msg@1799: Socket [127.0.0.1:44849] zk retcode=-112, errno=116(Stale file handle): sessionId=0x15d5c44fa610001 has expired.\n    2017-07-19 12:13:34,142:200313(0x7fd96cfff700):ZOO_ERROR@handle_socket_error_msg@1781: Socket [127.0.0.1:44849] zk retcode=-4, errno=112(Host is down): failed while receiving a server response\n    2017-07-19 12:13:34,153:200313(0x7fd99cb08700):ZOO_ERROR@handle_socket_error_msg@1757: Socket [127.0.0.1:44849] zk retcode=-4, errno=111(Connection refused): server refused to accept the client\n    [       OK ] ZooKeeperTest.LeaderContender (6787 ms)\n    [----------] 7 tests from ZooKeeperTest (20654 ms total)\n    \n    [----------] Global test environment tear-down\n    [==========] 7 tests from 1 test case ran. (20795 ms total)\n    [  PASSED  ] 7 tests.\n    ```\n    \n    Windows 10:\n    ```\n    [==========] Running 7 tests from 1 test case.\n    [----------] Global test environment set-up.\n    [----------] 7 tests from ZooKeeperTest\n    [ RUN      ] ZooKeeperTest.Auth\n    [       OK ] ZooKeeperTest.Auth (7641 ms)\n    [ RUN      ] ZooKeeperTest.SessionTimeoutNegotiation\n    [       OK ] ZooKeeperTest.SessionTimeoutNegotiation (71 ms)\n    [ RUN      ] ZooKeeperTest.Create\n    [       OK ] ZooKeeperTest.Create (7018 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetector\n    [       OK ] ZooKeeperTest.LeaderDetector (93 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetectorTimeoutHandling\n    2017-07-19 12:13:55,269:18232(0x53d8):ZOO_ERROR@handle_socket_error_msg@1781: Socket [127.0.0.1:57541] zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response\n    2017-07-19 12:13:55,271:18232(0x53d8):ZOO_ERROR@handle_socket_error_msg@1519: Socket [127.0.0.1:57541] zk retcode=-4, errno=140(Unknown error): failed to send a handshake packet: Unknown error\n    [       OK ] ZooKeeperTest.LeaderDetectorTimeoutHandling (76 ms)\n    [ RUN      ] ZooKeeperTest.LeaderDetectorCancellationHandling\n    [       OK ] ZooKeeperTest.LeaderDetectorCancellationHandling (66 ms)\n    [ RUN      ] ZooKeeperTest.LeaderContender\n    2017-07-19 12:13:55,470:18232(0xaf4):ZOO_ERROR@handle_socket_error_msg@1781: Socket [127.0.0.1:57557] zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response\n    2017-07-19 12:13:55,473:18232(0xaf4):ZOO_ERROR@handle_socket_error_msg@1799: Socket [127.0.0.1:57557] zk retcode=-112, errno=19(No such device): sessionId=0x15d5c455ad70000 has expired.\n    2017-07-19 12:13:55,519:18232(0x4dfc):ZOO_ERROR@handle_socket_error_msg@1781: Socket [127.0.0.1:57557] zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response\n    2017-07-19 12:13:55,523:18232(0x4dfc):ZOO_ERROR@handle_socket_error_msg@1799: Socket [127.0.0.1:57557] zk retcode=-112, errno=19(No such device): sessionId=0x15d5c455ad70001 has expired.\n    2017-07-19 12:13:55,562:18232(0xc0c):ZOO_ERROR@handle_socket_error_msg@1781: Socket [127.0.0.1:57557] zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response\n    2017-07-19 12:13:55,564:18232(0xc0c):ZOO_ERROR@handle_socket_error_msg@1519: Socket [127.0.0.1:57557] zk retcode=-4, errno=140(Unknown error): failed to send a handshake packet: Unknown error\n    [       OK ] ZooKeeperTest.LeaderContender (714 ms)\n    [----------] 7 tests from ZooKeeperTest (15727 ms total)\n    \n    [----------] Global test environment tear-down\n    [==========] 7 tests from 1 test case ran. (16802 ms total)\n    [  PASSED  ] 7 tests.\n    ```\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-19T19:26:11.245+0000","updated":"2017-07-19T19:26:11.245+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16093653","id":"16093653","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/311\n  \n    `branch-3.5` has ZOOKEEPER-1643, so this patch should just be good to go. It was integration tested.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-19T19:29:15.208+0000","updated":"2017-07-19T19:29:15.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16093654","id":"16093654","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 12 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    -1 contrib tests.  The patch failed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-19T19:30:02.035+0000","updated":"2017-07-19T19:30:02.035+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16093655","id":"16093655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 9 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-19T19:30:02.772+0000","updated":"2017-07-19T19:30:02.772+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16093656","id":"16093656","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    [This tree](https://github.com/andschwa/zookeeper/tree/cmake-backport-3.4.8) is the exact patch I tested on Windows with the 3.4.8 tarball.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-19T19:30:21.622+0000","updated":"2017-07-19T19:30:21.622+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16093709","id":"16093709","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 9 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-19T20:00:23.466+0000","updated":"2017-07-19T20:00:23.466+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16094172","id":"16094172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    >> Would you be willing to backport ZOOKEEPER-1643 too? \n    \n    Sounds good to me. I don't see why this change should not be part of 3.4 release.\n    \n    >> I observed it failing consistently even on branch-3.4 built with Autotools\n    \n    Hmm, that is interesting. I did not remember this test was ever on radar. I'll try run it on my env and see what i got.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-20T04:52:36.408+0000","updated":"2017-07-20T04:52:36.408+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16104045","id":"16104045","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    Regarding `testAsyncWatcherAutoResetterminate`:\n    I ran c tests on linux and don't observe consistent failure of  with this patch.  \n    \n    Otherwise lgtm, I am merging this in 3.4.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-27T22:50:15.510+0000","updated":"2017-07-27T22:50:15.510+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16104050","id":"16104050","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    Actually, @andschwa Can you please update the PR to remove the port of ZOOKEEPER-1643 (https://github.com/apache/zookeeper/pull/313/commits/7776bd61c625c8b363655ab7244fa9f33e5f2198)? I will do a separate commit to pick that up into branch-3.4 after this PR being merged. \n    \n    Doing it separately avoid messing up two different credentials associated with two separate commits - that is  a limitation of current commit script we have. Plus back port of ZOOKEEPER-1643 deserves its separate commit for the record.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-27T22:55:36.670+0000","updated":"2017-07-27T22:55:36.670+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16104054","id":"16104054","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/311\n  \n    LGTM. The failing precommit test is not relevant to this patch and should already be fixed by commit 837b37636201ee9aca4cbbb962d18a7883e14c1b. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-27T22:58:40.592+0000","updated":"2017-07-27T22:58:40.592+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16104056","id":"16104056","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/311\n  \n    Committed to 3.5. Thanks for the work, and please close the pull request. @andschwa \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-27T23:02:57.154+0000","updated":"2017-07-27T23:02:57.154+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16104083","id":"16104083","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/311\n  \n    Thank you!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-27T23:34:18.752+0000","updated":"2017-07-27T23:34:18.752+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16104084","id":"16104084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa closed the pull request at:\n\n    https://github.com/apache/zookeeper/pull/311\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-27T23:34:19.435+0000","updated":"2017-07-27T23:34:19.435+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16105682","id":"16105682","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    @hanm I figured you'd probably need that given your commit scripts. Fixing.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-28T21:11:02.415+0000","updated":"2017-07-28T21:11:02.415+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16105685","id":"16105685","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    It's fixed now.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-28T21:11:56.236+0000","updated":"2017-07-28T21:11:56.236+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16105687","id":"16105687","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 9 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    -1 contrib tests.  The patch failed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-28T21:15:10.965+0000","updated":"2017-07-28T21:15:10.965+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16109131","id":"16109131","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"Resolving issue after committing to 3.5 and 3.4:\n3.5: https://github.com/apache/zookeeper/commit/2c08d794dfd89408aff3c853f68753555ed6acea\n3.4: https://github.com/apache/zookeeper/commit/ce67fdd46fdc2eba8f4d546739dc486a5cd2dbb4","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-08-01T15:48:54.028+0000","updated":"2017-08-01T15:48:54.028+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16109135","id":"16109135","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    @andschwa merged, please close this pull request.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-01T15:49:47.493+0000","updated":"2017-08-01T15:49:47.493+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16109370","id":"16109370","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/313\n  \n    Huzzah!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-01T17:34:18.797+0000","updated":"2017-08-01T17:34:18.797+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13085619/comment/16109371","id":"16109371","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user andschwa closed the pull request at:\n\n    https://github.com/apache/zookeeper/pull/313\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-01T17:34:19.111+0000","updated":"2017-08-01T17:34:19.111+0000"}],"maxResults":69,"total":69,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2841/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3h9hj:"}}