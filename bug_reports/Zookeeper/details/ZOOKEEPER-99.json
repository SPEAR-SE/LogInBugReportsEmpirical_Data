{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12401029","self":"https://issues.apache.org/jira/rest/api/2/issue/12401029","key":"ZOOKEEPER-99","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2009-02-27T11:43:29.526+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Nov 23 12:10:22 UTC 2009","customfield_12310420":"214048","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-99/watchers","watchCount":2,"isWatching":false},"created":"2008-07-25T16:55:14.933+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-11-23T12:10:22.435+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312451","id":"12312451","name":"jmx","description":"JMX Support"}],"timeoriginalestimate":null,"description":"All the MXBean interfaces that I've looked at are standard MBean interfaces.  The interface names should get renamed to MBean instaead of MXBean. That way the server can also run on a the Java 1.5 Platform.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12401104","id":"12401104","filename":"ZOOKEEPER-99.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ebowman","name":"ebowman","key":"ebowman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Bowman","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-27T11:43:29.482+0000","size":18834,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12401104/ZOOKEEPER-99.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"33236","customfield_12312823":null,"summary":"All MXBeans interfaces that don't use complex paramters need to be renamed as MBean interaces. ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401029/comment/12677330","id":"12677330","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ebowman","name":"ebowman","key":"ebowman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Bowman","active":true,"timeZone":"Etc/UTC"},"body":"Here's a patch against r748487.\n\nThis problem is quite an obstacle to embedding Zookeeper in JBoss, so it would be great if you could roll it into 3.2.\n\nThe JMX convention (as implemented by JBoss, anyhow) requires that the MBean interfaces be named XXXMBean, and the implementing classes XXX.\n\nSo I have renamed, for example, ZooKeeperServerMXBean to ZooKeeperServerBeanMBean, so that ZooKeeperServerBean can remain.\n\nI also made all the MBean interfaces extend ZKInfoMBean (formerly ZKMBeanInfo), instead of having each implementation implement it as well.  I suppose that might controversial, but I couldn't see a good reason to have ZKInfoMBean references scattered around the implementation.\n\nHope this is useful -- it's necessary for us to use ZooKeeper, so we will be working off a patched version of the trunk until this or something equivalent makes its way into a release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ebowman","name":"ebowman","key":"ebowman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Bowman","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-27T11:43:29.526+0000","updated":"2009-02-27T11:43:29.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401029/comment/12677437","id":"12677437","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Eric, I'm not an expert on jmx, but I believe the original contributors of this code used mxbeans for a reason. In particular:\n\nSee this blog post by one of the authors of mxbeans:\nhttp://weblogs.java.net/blog/emcmanus/archive/2006/02/what_is_an_mxbe.html\n\"Going forward, it will generally be a good idea to write an MXBean wherever you would write a Standard MBean today.\"\n\nhttp://java.sun.com/javase/6/docs/api/javax/management/MXBean.html\n\"The MXBean concept provides a simple way to code an MBean that only references a predefined set of types, the ones defined by javax.management.openmbean. In this way, you can be sure that your MBean will be usable by any client, including remote clients, without any requirement that the client have access to model-specific classes representing the types of your MBeans.\"\n\nhttp://marxsoftware.blogspot.com/2008/06/jmx-mxbean.html\n\"MXBeans in Java SE 6: Bundling Values without Special JMX Client Configurations recommends using MXBeans in any Java SE 6 application where Standard MBeans may have been used before moving to Java SE 6.\"\nThis blog post also shows that in some cases JMX UIs render the bean fields better with mxbeans than with std mbeans\n\nCan you explain a bit about why ZooKeeper cannot be embedded into JBoss currently? Doesn't JBoss support MXBeans? This was standardized in java6, no? (that mxbeans are included in 1.6).\n\nFrom what I read it seems like moving from mx -> standard mbeans is a step back. But I'd like to understand the problems seen with JBoss. If you can include some code/config that I could easily deploy into JBoss I'd be happy to try it out myself - perhaps we could include this in our testing regime so that we maintain compatibility going forward.\n\nps. we dropped java5 support in 3.1, we now only support java6, so the original description of the jira is stale. See ZOOKEEPER-210\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-02-27T17:58:34.512+0000","updated":"2009-02-27T17:58:34.512+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401029/comment/12677444","id":"12677444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ebowman","name":"ebowman","key":"ebowman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Bowman","active":true,"timeZone":"Etc/UTC"},"body":"I'm certainly no expert on JMX; these are just changes that were necessary to make this work with JBoss 4.2.2.GA, which has code which explicitly looks for an interface on a class XXX named XXXMBean, at least for static MBeans.\n\nIt does seem that embedding Zookeeper isn't much of a priority, so maybe it's not worth the effort; I do find it pretty handy to do so, though, and the MXBean approach doesn't work for me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ebowman","name":"ebowman","key":"ebowman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Bowman","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-27T18:21:31.068+0000","updated":"2009-02-27T18:21:31.068+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401029/comment/12677452","id":"12677452","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"I'd still like to try this out regardless of priority. Can you attach the basic configuration (ear file?) that I would need to try this out? I'd do it myself but I'm not familiar with JBoss and it would take some time to reproduce what you've already done.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-02-27T18:35:30.124+0000","updated":"2009-02-27T18:35:30.124+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401029/comment/12781376","id":"12781376","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Hi Patrick, if it runs fine on java 1.5, then it should run fine in JBoss.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2009-11-23T12:10:22.401+0000","updated":"2009-11-23T12:10:22.401+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-99/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i061vr:"}}