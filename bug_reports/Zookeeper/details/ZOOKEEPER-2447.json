{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12979354","self":"https://issues.apache.org/jira/rest/api/2/issue/12979354","key":"ZOOKEEPER-2447","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334700","id":"12334700","description":"Fix release against 3.4 branch","name":"3.4.9","archived":false,"released":true,"releaseDate":"2016-09-03"}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-06-20T12:49:15.209+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Nov 11 07:30:19 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2447/watchers","watchCount":7,"isWatching":false},"created":"2016-06-15T12:56:26.125+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334700","id":"12334700","description":"Fix release against 3.4 branch","name":"3.4.9","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[{"id":"12470942","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12470942","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12980839","key":"ZOOKEEPER-2449","self":"https://issues.apache.org/jira/rest/api/2/issue/12980839","fields":{"summary":"Refresh the invalid host which got unknownhostexception during connection in StaticHostProvider","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-11-11T07:30:19.517+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[],"timeoriginalestimate":null,"description":"StaticHostProvider --> resolveAndShuffle method adds all of the address which are valid in the quorum to the list, shuffles them and sends back to client connection class. If after shuffling if first node appear to be the one which is not reachable, Clientcnx.SendThread.run will keep on connecting to the failure till a timeout and the moves to a different node. This adds up random delay in zookeeper connection in case a host is down. Rather we could check if host is reachable in StaticHostProvider and ignore isReachable is false. Same as we do for UnknownHostException Exception.\n\nThis can tested using following test code by providing a valid host which is not reachable. for quick test comment Collections.shuffle(tmpList, sourceOfRandomness); in StaticHostProvider.resolveAndShuffle\n\n{code}\n @Test\n  public void test() throws Exception {\n    EventsWatcher watcher = new EventsWatcher();\n    QuorumUtil qu = new QuorumUtil(1);\n    qu.startAll();\n    \n    ZooKeeper zk =\n        new ZooKeeper(\"<hostnamet:2181,\" + qu.getConnString(), 180 * 1000, watcher);\n    \n    watcher.waitForConnected(CONNECTION_TIMEOUT * 5);\n    Assert.assertTrue(\"connection Established\", watcher.isConnected());\n    zk.close();    \n  }\n{code}\n\nFollowing fix can be added to StaticHostProvider.resolveAndShuffle\n{code}\n if(taddr.isReachable(4000 // can be some value)) {\n                      tmpList.add(new InetSocketAddress(taddr, address.getPort()));\n                    } \n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12810836","id":"12810836","filename":"withfix.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-06-15T13:00:48.929+0000","size":53307,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12810836/withfix.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12810837","id":"12810837","filename":"withoutFix.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-06-15T13:00:48.935+0000","size":54566,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12810837/withoutFix.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12811807","id":"12811807","filename":"ZOOKEEPER-2447.3.5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-06-20T12:45:14.910+0000","size":1697,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12811807/ZOOKEEPER-2447.3.5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12832837","id":"12832837","filename":"ZOOKEEPER-2447.branch-3.4.00.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-12T07:11:58.653+0000","size":8611,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12832837/ZOOKEEPER-2447.branch-3.4.00.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12832853","id":"12832853","filename":"ZOOKEEPER-2447.branch-3.4.01.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-12T09:04:17.596+0000","size":8531,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12832853/ZOOKEEPER-2447.branch-3.4.01.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12817185","id":"12817185","filename":"ZOOKEEPER-2447-MinConnectTimeoutOnly.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-11T15:32:41.863+0000","size":2382,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12817185/ZOOKEEPER-2447-MinConnectTimeoutOnly.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Zookeeper adds  good delay when one of the quorum host is not reachable","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15331678","id":"15331678","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"Attaching the logs for more debugging with change and without change. i have the patch ready and submit it whenever required.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-06-15T12:59:18.849+0000","updated":"2016-06-15T12:59:18.849+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15339433","id":"15339433","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12811807/ZOOKEEPER-2447.3.5.patch\n  against trunk revision 1748630.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3192//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-06-20T12:49:15.209+0000","updated":"2016-06-20T12:49:15.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15352366","id":"15352366","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"Can someone please look into the bug and provide their comment ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-06-28T05:05:14.578+0000","updated":"2016-06-28T05:05:14.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15354417","id":"15354417","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"body":"Hi [~vishk], a couple of comments below.\n\n{code}\nif (taddr.isReachable(3000) {\n   tmpList.add(new InetSocketAddress(taddr, address.getPort()));\n} \n{code}\n\nWhat could be a reasonable value? I mean, 3 or 4 seconds can be nice for a LAN but cannot be enough to a cloud environment, I guess. In other words, I think this value should be configurable.\n\nAlso, looking at InetAddress API docs, it looks like {{InetAddress#isReachable}} we see this:\n\n{quote}\nBest effort is made by the implementation to try to reach the host, but firewalls and server configuration may block requests resulting in a unreachable status while some specific ports may be accessible. A typical implementation will use ICMP ECHO REQUESTs if the privilege can be obtained, otherwise it will try to establish a TCP connection on port 7 (Echo) of the destination host.\n{quote}\n\nThat is, {{isReachable}} implementation is platform dependent and can be very brittle even when all machines are on the same network. A quick Google search for \"Inetaddress + isreachable + problems\" shows that sometimes it can return false even when the machine is accessible via ping (see \"firewalls and server configuration may block requests resulting in a unreachable status while some specific ports may be accessible\" above).\n\nwdyt?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"created":"2016-06-29T02:40:51.252+0000","updated":"2016-06-29T02:40:51.252+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15354624","id":"15354624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"I think this is an optimization and my question is does this optimization worth the effort :-) does introduce another timeout at a higher level of the stack help reduce the delay? I am curious to see if there is any product scenario / data that could back up this change, because it seems to me that the time savings would depend on the values of current connection timeout and the value this patch fed into isReachable. Also, as Edward pointed out, the timeout value should be configurable instead of hardcoded (and documentation needs updated as well.).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2016-06-29T06:13:09.303+0000","updated":"2016-06-29T06:13:09.303+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15355582","id":"15355582","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apurtell","name":"apurtell","key":"apurtell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apurtell&avatarId=20553","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apurtell&avatarId=20553","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apurtell&avatarId=20553","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apurtell&avatarId=20553"},"displayName":"Andrew Purtell","active":true,"timeZone":"America/Los_Angeles"},"body":"From my point of view this isn't an optimization, it's a fix for a multi second stall for low latency use cases. Waiting for the combined connection timeouts and retries blows out low latency SLAs on our production HBase clusters, for example. This behavior should be configurable. \n\nAgreed with the comment that the hardcoded value in the patch isn't what we want. It should be configurable. And I'd want to set it smaller than the current value. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apurtell","name":"apurtell","key":"apurtell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apurtell&avatarId=20553","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apurtell&avatarId=20553","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apurtell&avatarId=20553","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apurtell&avatarId=20553"},"displayName":"Andrew Purtell","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-29T18:33:11.900+0000","updated":"2016-06-29T18:33:11.900+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15355703","id":"15355703","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"body":"Hi [~andrew.purtell@gmail.com], my concern is not the feature itself -- it is cool --, but the use of {{InetAddress#isReachable()}} because it seems to have had caused some problems in the past, that is, always returning false or true in spite of the real reachability, as seen below:\n\nhttp://stackoverflow.com/questions/4779367/problem-with-isreachable-in-inetaddress-class\n\nOf course, the SO threads that relate similar problems are usually old (five to ten years old!), so this could not be a problem anymore, but we must acknowledge this possible limitation. An alternative would be to roll out our own equivalent of {{InetAddress#isReachable()}} as I scribbled below? Wdyt?\n\n{code}\n    private boolean isReachable(InetAddress address, int port, int timeout) {\n        if (timeout < 0)\n           IllegalArgumentException(\"Timeout cannot be less than zero\");\n\n        Socket socket = new Socket();\n        try {\n            socket.connect(new InetSocketAddress(address, port), timeout);\n        }\n        catch (IOException e) {\n            return false;\n        }\n        finally {\n            try {\n                socket.close();\n            } catch (IOException e) {\n                // Ignore any errors\n            }\n        }\n        return true;\n    }\n}\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"created":"2016-06-29T19:23:50.376+0000","updated":"2016-06-29T19:23:50.376+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15355708","id":"15355708","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apurtell","name":"apurtell","key":"apurtell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apurtell&avatarId=20553","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apurtell&avatarId=20553","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apurtell&avatarId=20553","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apurtell&avatarId=20553"},"displayName":"Andrew Purtell","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. An alternative would be to roll out our own equivalent of {{InetAddress#isReachable()}} as I scribbled below? \nMakes sense. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apurtell","name":"apurtell","key":"apurtell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apurtell&avatarId=20553","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apurtell&avatarId=20553","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apurtell&avatarId=20553","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apurtell&avatarId=20553"},"displayName":"Andrew Purtell","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-29T19:26:43.274+0000","updated":"2016-06-29T19:26:43.274+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15355843","id":"15355843","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"body":"Given that the goal is to open a socket, implementing an isReachable() method which is just opening a socket with a timeout seems wasteful. It will add unnecessary additional latency (the RTT latency for TCP handshake) and overhead to every connection, even successful ones where the ensemble isn't suffering due to a down host; it'll also put a little extra load on the servers, not just clients. Would it make sense to make ClientCnxnSocket.open() implementations apply the timeout directly?\n\nAs far as choosing the connection timeout to use, I would suggest just using the time-sliced session timeout (I thought this was already done, but perhaps it's only applied later in the connection handshake?) but applying some reasonable lower bound (say, default of 1 second and overridable by a Java system property). We actually have a fork of the ZK code which has that minimum bound for connection timeout logic in the Java client, and I'd be happy to prepare a patch for that part. It's pretty trivial code, but it's important if you start using a combination of large ZK clusters and very small session timeouts, which we have in some of our ensembles.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-29T21:39:26.536+0000","updated":"2016-06-29T21:39:26.536+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15355922","id":"15355922","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"body":"{quote}\n It will add unnecessary additional latency (the RTT latency for TCP handshake) and overhead to every connection, even successful ones where the ensemble isn't suffering due to a down host; it'll also put a little extra load on the servers, not just clients.\n{quote}\n\nHi [~dbenediktson], \n\nYeah... I was aware of the extra pressure on the servers and, to some degree, the cost of opening a ephemeral TCP connection on each server of my proposed workaround. :( OTOH, {{InetAddress#isReachable()}} (quoting javadocs) will: {quote} (try to) use ICMP ECHO REQUESTs if the privilege can be obtained, otherwise it will try to establish a TCP connection on port 7 {quote}\n\nIf [~vishk] don't oppose, I am more than happy to see your patch for that part. :) In the meanwhile, I will dig {{ClientCnxnSocket}} further more following your guidelines.\n\nCheers,\nEd","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"created":"2016-06-29T22:33:40.665+0000","updated":"2016-06-29T22:33:40.665+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15356207","id":"15356207","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"I see, thanks for pointing out this use case. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2016-06-29T23:51:37.908+0000","updated":"2016-06-29T23:51:37.908+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15358757","id":"15358757","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"[~eribeiro] : did you tey this solution when a host is valid but it is shutdown. because in method \"ClientCnxnSocketNIO.registerAndConnect\" makes a call to SocketChannel.connect and it always passes whether the host is reachable or not. If it would have worked then we did not have to wait for host timeout incase shutdown hsot scenario.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-07-01T10:25:05.581+0000","updated":"2016-07-01T10:25:05.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15358775","id":"15358775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"[~eribeiro] : I will also be happy to look at the fix. It's always good to fix the problem in the right fashion. I also got the limitation of  \"InetAddress#isReachable()\" method wrt firewall but could not find a better solution for that. even with socket connect in my case did not work :(.\n\nThere would additional requirement of changing the design little as there is not provision to add the failed host back into the list yet. I opened JIRA here but did not get time to work on that :  ZOOKEEPER-2449 May be [~dbenediktson] fix will help to get rid of \"ZOOKEEPER-2449\" as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-07-01T10:44:14.797+0000","updated":"2016-07-01T10:44:14.797+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15363322","id":"15363322","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"body":"I have a patch file for the minConnectTimeout enforcement ready, but I don't seem to be able to attach it to this issue - should I create a separate issue assigned to myself for that one part? Sorry for the novice questions, my first time attempting to contribute.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-05T21:49:49.785+0000","updated":"2016-07-05T21:49:49.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15363473","id":"15363473","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"[~dbenediktson], seems you are not in a 'contributor' role so you can't be assigned to this issue (I tried to assign this issue to you but your id was not in the list). One of the committers should have permission to assign role 'Contributor' to your ID and then you can assign this issue to yourself and after that you can submit patches.\n\nSome context info on Apache JIRA permission workflow:\n- For a given JIRA issue, only *reporter*, or *assignee*, or *committer* can attach file.\n- A contributor can only attach files to issues that's assigned and/or reporting to the contributor.\n- A workaround for a contributor to attach files to any issue is to first change assignee to the contributor, then attach files, then change the assignee back.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2016-07-05T23:38:11.066+0000","updated":"2016-07-05T23:38:11.066+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15370983","id":"15370983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching patch for the MinConnectTimeout feature (kind of an auxiliary for the overall problem here)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-11T15:32:41.867+0000","updated":"2016-07-11T15:32:41.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15370985","id":"15370985","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching patch for \"MinConnectTimeout\" enforcement - kind of an auxiliary for this issue. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-11T15:33:36.944+0000","updated":"2016-07-11T15:33:36.944+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15371100","id":"15371100","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12817185/ZOOKEEPER-2447-MinConnectTimeoutOnly.patch\n  against trunk revision 1750739.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3270//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3270//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3270//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-07-11T16:25:57.538+0000","updated":"2016-07-11T16:25:57.538+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15371209","id":"15371209","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"body":"The failures appear to be unrelated to the changes:\n\njunit.framework.AssertionFailedError: Unexpected bean exists! expected:<0> but was:<1>\n\tat org.apache.zookeeper.test.ClientBase.verifyUnexpectedBeans(ClientBase.java:498)\n\tat org.apache.zookeeper.test.ClientBase.startServer(ClientBase.java:477)\n\tat org.apache.zookeeper.test.ClientBase.setUp(ClientBase.java:460)\n\tat org.apache.zookeeper.test.WatcherTest.setUp(WatcherTest.java:73)\n\nAnd the same tests are passing locally for me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-11T17:25:52.764+0000","updated":"2016-07-11T17:25:52.764+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15406224","id":"15406224","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"[~dbenediktson] [~vishk] [~hanm] [~eribeiro] thank you all for working on a patch and reviewing. I'm a bit confused about the state of this issue. The initial patch by Vishal proposed to check if the host is reachable in {{StaticHostProvider.resolveAndShuffle}}. That is supposed to avoid servers that are down at the time we execute {{resolveAndShuffle}}.\n\nUnless I'm missing something, the latest patch does not seem to be addressing the issue described here. It doesn't reduce the delay to connect to some server. Instead, it sets a lower bound for the connection timeout.\n\nI don't think the approach of testing that server is reachable is bad because we don't have to do it often, only in the beginning and as we hit unavailable servers. We also need to be careful to not exclude unavailable servers permanently from the list of servers, you might and will probably come back eventually.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2016-08-03T17:02:57.446+0000","updated":"2016-08-03T17:02:57.446+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15406225","id":"15406225","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"Canceling patch to address issues. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2016-08-03T17:03:22.586+0000","updated":"2016-08-03T17:03:22.586+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15406240","id":"15406240","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"body":"Correct, I don't think there is a patch in a completed state.\n\nThe patch I provided was just to avoid a specific problem during the most recent proposed solution: the problem where you try to connect using only a slice of the connection time, but the chosen slice is too small to reasonably expect a connection to succeed. I think [~eribeiro] offered to look at a comprehensive solution, so I'm assigning over to him for the time being.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbenediktson","name":"dbenediktson","key":"dbenediktson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Benediktson","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-08-03T17:12:12.818+0000","updated":"2016-08-03T17:12:12.818+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15406241","id":"15406241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"Yeah I also looked into patch. The problem i described in the JIRA and fix in patch are totally different. The way i would like to solve the problem is reducing the connectTimeout to a lower Value as compared to sessionTimeout/quorum size. That is place when I was debugging I found the delay. I agree with folks that \"taddr.isReachable\" might not work in every situation. We observe that in our environment as well. Where server in not pingable but zookeeper connection can work. I tried to fix by reducing the connecttiemout to a lower or fixed value.so bad host can be caught quickly and also it is not removed part of the list. In net iteration it will checked for conenction again. I would submit the patch tomorrow on this if people agree. Tried it already on our clusters.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-08-03T17:12:28.033+0000","updated":"2016-08-03T17:12:28.033+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15406347","id":"15406347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apurtell","name":"apurtell","key":"apurtell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apurtell&avatarId=20553","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apurtell&avatarId=20553","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apurtell&avatarId=20553","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apurtell&avatarId=20553"},"displayName":"Andrew Purtell","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~vishk].  As Vishal is actively working on a fix for the issue we reported, can we have this assigned back to him? Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apurtell","name":"apurtell","key":"apurtell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apurtell&avatarId=20553","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apurtell&avatarId=20553","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apurtell&avatarId=20553","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apurtell&avatarId=20553"},"displayName":"Andrew Purtell","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-08-03T18:18:40.421+0000","updated":"2016-08-03T18:18:40.421+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15406516","id":"15406516","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"Done. Is that ok with you [~eribeiro]? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2016-08-03T19:51:16.698+0000","updated":"2016-08-03T19:51:16.698+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15406524","id":"15406524","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"body":"Hey [~fpj], no problem at all! :) Feel free to work on it [~vishk].\n\nPS: I was absent last month (surgery & vacation), but getting back now. Still catching up with the latest ZK issues. :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"created":"2016-08-03T19:56:15.155+0000","updated":"2016-08-03T19:57:29.674+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15406536","id":"15406536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"body":"Cool, looking forward to it. :) *thumbs up*","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"created":"2016-08-03T20:03:28.196+0000","updated":"2016-08-03T20:03:28.196+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15558207","id":"15558207","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"are we still planning on a fix for this issue? cc [~eribeiro] [~vishk]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2016-10-08T15:56:50.014+0000","updated":"2016-10-08T15:56:50.014+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15561797","id":"15561797","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"I have already provided the changes to our internal fork and validate the same. I shall updated the changes here too","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-10T09:34:31.851+0000","updated":"2016-10-10T09:34:31.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15567836","id":"15567836","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"Submitted the patch for fixed timeout for zookeeper connection","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-12T06:57:17.806+0000","updated":"2016-10-12T06:57:17.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15567865","id":"15567865","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12832829/ZOOKEEPER-2447.branch-3.4.00.patch\n  against trunk revision f78061aafb19b102c37cb6d744ec6258d5f5b66e.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3484//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-12T07:09:17.508+0000","updated":"2016-10-12T07:09:17.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15567884","id":"15567884","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12832837/ZOOKEEPER-2447.branch-3.4.00.patch\n  against trunk revision f78061aafb19b102c37cb6d744ec6258d5f5b66e.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3486//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-12T07:19:03.334+0000","updated":"2016-10-12T07:19:03.334+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15568116","id":"15568116","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"This failed during merging to master. not sure how to restrict build to run only 3.4 branch. I did follow the naming convention as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-12T09:03:12.581+0000","updated":"2016-10-12T09:03:12.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15568119","id":"15568119","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"Fixing the indenatation. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-12T09:04:17.600+0000","updated":"2016-10-12T09:04:17.600+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15568137","id":"15568137","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12832853/ZOOKEEPER-2447.branch-3.4.01.patch\n  against trunk revision f78061aafb19b102c37cb6d744ec6258d5f5b66e.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3487//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-12T09:11:11.634+0000","updated":"2016-10-12T09:11:11.634+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15656339","id":"15656339","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"body":"[~fpj] [~eribeiro]. Can you look at the patch.\nThanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishk","name":"vishk","key":"vishk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Khandelwal","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-11T06:53:59.237+0000","updated":"2016-11-11T06:53:59.237+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12979354/comment/15656400","id":"15656400","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"[~vishk] will do, thanks for the heads up.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2016-11-11T07:30:19.517+0000","updated":"2016-11-11T07:30:19.517+0000"}],"maxResults":37,"total":37,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2447/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2zhtz:"}}