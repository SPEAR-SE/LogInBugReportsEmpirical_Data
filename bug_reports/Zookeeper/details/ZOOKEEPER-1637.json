{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12630436","self":"https://issues.apache.org/jira/rest/api/2/issue/12630436","key":"ZOOKEEPER-1637","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2013-02-03T07:32:11.521+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Feb 03 07:32:11 UTC 2013","customfield_12310420":"310930","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1637/watchers","watchCount":1,"isWatching":false},"created":"2013-02-01T20:29:21.827+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319288","id":"12319288","description":"Fix release against 3.4 branch","name":"3.4.3","archived":false,"released":true,"releaseDate":"2012-02-13"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319841","id":"12319841","description":"Fix release against 3.4 branch.","name":"3.4.4","archived":false,"released":true,"releaseDate":"2012-09-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321883","id":"12321883","description":"Fix release against 3.4 branch","name":"3.4.5","archived":false,"released":true,"releaseDate":"2012-11-18"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-02-03T07:32:11.521+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"We are getting an intermittent segfault.  This is OSX, zookeeper compiled using brew.  I've tried 3.4.3 - 3.4.5.\n\nI used GDB to get the following backtrace:\n\n{code}\nProgram received signal EXC_BAD_ACCESS, Could not access memory. \nReason: 13 at address: 0x0000000000000000 \n[Switching to process 10366 thread 0x1d03] \n0x00007fff8e0984f0 in strlen () \n(gdb) backtrace \n#0 0x00007fff8e0984f0 in strlen () \n#1 0x00000001004983cc in prepend_string () \n#2 0x0000000100498451 in Request_path_init () \n#3 0x0000000100499e94 in zoo_awexists () \n#4 0x000000010049a036 in zoo_wexists () \n#5 0x000000010048170b in pyzoo_exists () \n#6 0x000000010008c5d8 in PyEval_EvalFrameEx () \n#7 0x000000010008ecd8 in PyEval_EvalCodeEx () \n#8 0x000000010008ee6c in PyEval_EvalCode () \n#9 0x000000010008be0a in PyEval_EvalFrameEx () \n#10 0x000000010008ecd8 in PyEval_EvalCodeEx () \n#11 0x000000010008ee6c in PyEval_EvalCode () \n#12 0x000000010008be0a in PyEval_EvalFrameEx () \n#13 0x000000010008ecd8 in PyEval_EvalCodeEx () \n#14 0x000000010002cabf in PyClassMethod_New () \n#15 0x000000010000bd32 in PyObject_Call () \n#16 0x000000010008c5ec in PyEval_EvalFrameEx () \n#17 0x000000010008ecd8 in PyEval_EvalCodeEx () \n#18 0x000000010002cabf in PyClassMethod_New () \n#19 0x000000010000bd32 in PyObject_Call () \n#20 0x000000010001a6e9 in PyInstance_New () \n#21 0x000000010000bd32 in PyObject_Call () \n#22 0x0000000100055c5d in _PyObject_SlotCompare () \n#23 0x000000010000bd32 in PyObject_Call () \n#24 0x000000010008bf63 in PyEval_EvalFrameEx () \n#25 0x000000010008ecd8 in PyEval_EvalCodeEx () \n#26 0x000000010008ee6c in PyEval_EvalCode () \n#27 0x000000010008be0a in PyEval_EvalFrameEx () \n#28 0x000000010008edf7 in PyEval_EvalCode () \n#29 0x000000010008be0a in PyEval_EvalFrameEx () \n#30 0x000000010008ecd8 in PyEval_EvalCodeEx () \n#31 0x000000010002cabf in PyClassMethod_New () \n#32 0x000000010000bd32 in PyObject_Call () \n#33 0x000000010001a6e9 in PyInstance_New () \n#34 0x000000010000bd32 in PyObject_Call () \n#35 0x0000000100087c40 in PyEval_CallObjectWithKeywords () \n#36 0x00000001000b940d in initthread () \n#37 0x00007fff8e0448bf in _pthread_start () \n#38 0x00007fff8e047b75 in thread_start () \n{code}\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"311275","customfield_12312823":null,"summary":"Intermittent Segfault with zkpython in pyzoo_exists  ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sporkinvetor","name":"sporkinvetor","key":"sporkinvetor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Schultheis","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sporkinvetor","name":"sporkinvetor","key":"sporkinvetor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Schultheis","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630436/comment/13569728","id":"13569728","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Robert, looking at the trace it looks like \"path\" is parsed in pyzoo_exists\n\nbq.   if (!PyArg_ParseTuple(args, \"is|O\", &zkhid, &path, &watcherfn)) {\n\nand then passed down to prepend_string untouched, where prepend_string finally runs strlen(path), which blows up with null deref.\n\nAny chance your script is somehow passing a null path? What's odd though is that the parse format string is \"is|O\", meaning the path is a required parameter. I don't see how path could be null per this parse spec.\n\nPerhaps you can check the args passed by your script when this error occurs? Is path specified and what's it's value? Possible to use GDB to examine the parameters in the call to \"pyzoo_exists\" when it fails?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-03T07:32:11.521+0000","updated":"2013-02-03T07:32:11.521+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1637/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1hnr3:"}}