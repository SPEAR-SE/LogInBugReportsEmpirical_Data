{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13004713","self":"https://issues.apache.org/jira/rest/api/2/issue/13004713","key":"ZOOKEEPER-2578","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-09-13T20:55:08.923+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Sep 21 15:37:17 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2578/watchers","watchCount":3,"isWatching":false},"created":"2016-09-13T20:30:32.179+0000","customfield_12310192":"zkEnv no longer erroneously overwrites ZOOCFG","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313491","id":"12313491","description":"Bindings: Perl, Python, REST & Flexible Quorum & chroot support & Fixes, etc...","name":"3.2.0","archived":false,"released":true,"releaseDate":"2009-07-08"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314068","id":"12314068","description":"Fix release against 3.2 branch","name":"3.2.1","archived":false,"released":true,"releaseDate":"2009-09-04"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314335","id":"12314335","description":"Fix release against 3.2 branch","name":"3.2.2","archived":false,"released":true,"releaseDate":"2009-12-14"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314847","id":"12314847","description":"Fix release against 3.2 branch","name":"3.2.3","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313976","id":"12313976","description":"Improved manageability and simplified client development process.","name":"3.3.0","archived":false,"released":true,"releaseDate":"2010-03-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314846","id":"12314846","description":"Fix release against 3.3 branch","name":"3.3.1","archived":false,"released":true,"releaseDate":"2010-05-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315108","id":"12315108","description":"Fix release against 3.3 branch","name":"3.3.2","archived":false,"released":true,"releaseDate":"2010-11-11"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315482","id":"12315482","description":"Fix release against 3.3 branch","name":"3.3.3","archived":false,"released":true,"releaseDate":"2011-02-27"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316276","id":"12316276","description":"Fix release against 3.3 branch","name":"3.3.4","archived":false,"released":true,"releaseDate":"2011-11-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314469","id":"12314469","description":"Kerberos client auth, multi support, deb/rpm pkging.","name":"3.4.0","archived":false,"released":true,"releaseDate":"2011-11-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12318650","id":"12318650","description":"Fix release against 3.4 branch.","name":"3.4.1","archived":false,"released":true,"releaseDate":"2011-12-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319196","id":"12319196","description":"Fix release against 3.4 branch.","name":"3.4.2","archived":false,"released":true,"releaseDate":"2011-12-29"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319288","id":"12319288","description":"Fix release against 3.4 branch","name":"3.4.3","archived":false,"released":true,"releaseDate":"2012-02-13"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319081","id":"12319081","description":"Fix release against 3.3 branch","name":"3.3.5","archived":false,"released":true,"releaseDate":"2012-03-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12320172","id":"12320172","description":"Fix release against 3.3 branch","name":"3.3.6","archived":false,"released":true,"releaseDate":"2012-08-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319841","id":"12319841","description":"Fix release against 3.4 branch.","name":"3.4.4","archived":false,"released":true,"releaseDate":"2012-09-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321883","id":"12321883","description":"Fix release against 3.4 branch","name":"3.4.5","archived":false,"released":true,"releaseDate":"2012-11-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12323310","id":"12323310","description":"Fix release against 3.4 branch","name":"3.4.6","archived":false,"released":true,"releaseDate":"2014-03-10"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325149","id":"12325149","description":"Fix release against 3.4 branch","name":"3.4.7","archived":false,"released":true,"releaseDate":"2015-12-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326517","id":"12326517","description":"Fix release against 3.4 branch","name":"3.4.8","archived":false,"released":true,"releaseDate":"2016-02-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12334700","id":"12334700","description":"Fix release against 3.4 branch","name":"3.4.9","archived":false,"released":true,"releaseDate":"2016-09-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12338036","id":"12338036","description":"Fix release against 3.4 branch","name":"3.4.10","archived":false,"released":true,"releaseDate":"2017-03-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316644","id":"12316644","description":"Dynamic Reconfig, Remove Watches, Local Session","name":"3.5.0","archived":false,"released":true,"releaseDate":"2014-08-04"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326786","id":"12326786","description":"Alpha release against 3.5 branch","name":"3.5.1","archived":false,"released":true,"releaseDate":"2015-09-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12331981","id":"12331981","description":"Alpha release against 3.5 branch","name":"3.5.2","archived":false,"released":true,"releaseDate":"2016-07-21"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-09-21T15:37:17.227+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"In bin/zkEnv.sh The ZOOCFG variable is duplicated over itself if already set. For example, in my use case it was being set in zookeeper-env.sh. The problem seems to arise from this line (line 61 on the master branch at the time of this submission): ZOOCFG=\"$ZOOCFGDIR/$ZOOCFG\". This overwrites the value of ZOOCFG by appending the old value to the value of ZOOCFGDIR, which is problematic if it was already initialized as the absolute path to a file. The behavior of overwriting the value of the variable in this way seems to be specific to the case where ZOOCFG is not initialized. The final state of ZOOCFG seemingly is the absolute path to the zookeeper configuration file. This behavior assumes that it is the filename only, which is where the bug arises. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12828323","id":"12828323","filename":"ZOOKEEPER-2578.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"created":"2016-09-13T20:36:53.896+0000","size":526,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12828323/ZOOKEEPER-2578.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"zkEnv.sh does not set $ZOOCFG properly if already set ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10430","value":"Patch","id":"10430"}],"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15488342","id":"15488342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"body":"Proposal patch file for ZOOKEEPER-2578 bug report","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"created":"2016-09-13T20:36:53.900+0000","updated":"2016-09-13T20:36:53.900+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15488351","id":"15488351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"body":"I was using Zookeeper 3.4.6 to test this and encountered it by using a zookeeper-env.sh that set the value of ZOOCFG to /opt/zookeeper/zookeeper-3.4.6/conf/zoo.cfg. The final value of ZOOCFG after zkEnv.sh was evaluated was /opt/zookeeper/zookeeper-3.4.6/conf//opt/zookeeper/zookeeper-3.4.6/conf/zoo.cfg. This led me to report this bug and propose the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"created":"2016-09-13T20:39:25.784+0000","updated":"2016-09-13T20:39:25.784+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15488355","id":"15488355","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"body":"I will await code review and further comments before submitting this as a patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"created":"2016-09-13T20:41:08.948+0000","updated":"2016-09-13T20:41:08.948+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15488395","id":"15488395","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user Bjorn248 opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/80\n\n    ZOOKEEPER-2578: Fixed zkEnv.sh to not overwrite ZOOCFG with itself\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/Bjorn248/zookeeper ZOOKEEPER-2578\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/80.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #80\n    \n----\ncommit eb4c2b42278a75944011c19bf50b60b9d3efacf3\nAuthor: Bjorn Stange <bjorn248@gmail.com>\nDate:   2016-09-13T20:34:57Z\n\n    ZOOKEEPER-2578: Fixed zkEnv.sh to not overwrite ZOOCFG with itself\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-13T20:55:08.923+0000","updated":"2016-09-13T20:55:08.923+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15501736","id":"15501736","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~bjorn248@gmail.com] - perhaps I'm missing something but I believe the intent was for the user to provide (if they want to override either/both) ZOOCFGDIR and ZOOCFG. Where ZOOCFGDIR is the location of the cfg file, and ZOOCFG is the name of the config file at ZOOCFGDIR. As such the current logic seems right to me. What limitation/issue do you see with this? Other than the obvious - you might need to specify both ZOOCFGDIR and ZOOCFG rather than just specifying ZOOCFG as an absolute path, including the cfg file name.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-18T22:15:54.588+0000","updated":"2016-09-18T22:15:54.588+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15501786","id":"15501786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"body":"The issue is that ZOOCFG changes to become the absolute path to the config file and that is what the scripts expect it to be but it starts out (if left empty) as just the filename. I find that confusing because it has drastically different starting and ending states. Is it supposed to be the absolute path? Is it supposed to be the filename? \n\nOtherwise, I do see your point. I was trying to override the final state of ZOOCFG in zookeeper-env.sh and not the intermediate state, and doing what you suggest would indeed work. Perhaps using a third variable for the absolute path to the config file would reduce ambiguity here as well? I was just confused by the way this variable was being handled and thought I'd open a discussion around it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"created":"2016-09-18T22:56:17.445+0000","updated":"2016-09-18T22:56:17.445+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15510185","id":"15510185","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"I agree it's not as clear as it could be - took me a bit to figure out what the script was trying to do in order to respond to this JIRA. I would say if you are interested to address then what you are saying would make sense - a third variable of some kind. Mainly we don't want to change the existing functionality, i.e. the changes should be b/w compat from a user perspective. I'd also recommend updating (adding) the comments in the file to be more clear (for the next person that comes along and has similar questions....). Thanks Bjorn!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-21T14:51:55.441+0000","updated":"2016-09-21T14:51:55.441+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15510232","id":"15510232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"body":"Thanks [~phunt], should I add some comments to the original code and submit a new patch? Now that I think of it, I don't think using a third variable would work because ZOOCFG is the variable that is directly referenced by other scripts both before and after this script is run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"created":"2016-09-21T15:10:16.595+0000","updated":"2016-09-21T15:10:16.595+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15510244","id":"15510244","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Yes, adding comments would be great. You should modify the original patch though, as it is not b/w compat (hopefully you can figure out a way around it that works for everyone, e.g. third variable if possible?)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-21T15:13:48.351+0000","updated":"2016-09-21T15:13:48.351+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15510278","id":"15510278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user Bjorn248 closed the pull request at:\n\n    https://github.com/apache/zookeeper/pull/80\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-21T15:22:59.226+0000","updated":"2016-09-21T15:22:59.226+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13004713/comment/15510316","id":"15510316","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"body":"I can't seem to find any official documentation on actually setting ZOOCFG or any of the variables used by the init scripts for zookeeper. Perhaps that should be modified instead? I can imagine a section titled \"Using a non-default configuration filename\" or something along those lines.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjorn248%40gmail.com","name":"bjorn248@gmail.com","key":"bjorn248@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bjorn248%40gmail.com&avatarId=29434","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bjorn248%40gmail.com&avatarId=29434","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bjorn248%40gmail.com&avatarId=29434","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bjorn248%40gmail.com&avatarId=29434"},"displayName":"Bjorn Stange","active":true,"timeZone":"America/New_York"},"created":"2016-09-21T15:37:17.227+0000","updated":"2016-09-21T15:37:17.227+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2578/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i33l8v:"}}