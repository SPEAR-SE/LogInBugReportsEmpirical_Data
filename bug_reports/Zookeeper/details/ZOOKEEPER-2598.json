{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13006588","self":"https://issues.apache.org/jira/rest/api/2/issue/13006588","key":"ZOOKEEPER-2598","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-10-17T10:46:22.326+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Oct 17 10:46:22 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2598/watchers","watchCount":4,"isWatching":false},"created":"2016-09-21T18:01:09.344+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326786","id":"12326786","description":"Alpha release against 3.5 branch","name":"3.5.1","archived":false,"released":true,"releaseDate":"2015-09-02"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-10-17T10:46:22.326+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312379","id":"12312379","name":"quorum","description":"Quorum determination for ZooKeeper"}],"timeoriginalestimate":null,"description":"Steps to reproduce:\n1. Create a three node cluster: Node1, Node2 and Node3.\n    Each node is a VM that runs:\n    1. ZK in a docker container\n    2. Two clients, A and B that use ZK for group membership and leader election. The clients create sequential ephemeral nodes when they come up. \n2. The three ZK's running in the containers form an ensemble.\n3. Power off/on Node 2 and Node 3 in a loop\n4. After a few times, the ephemeral nodes seen by the three nodes are different.\n\nHere is the output of some four letter commands with the ensemble in the state:\n\n1. conf:\n\nZK 1:\n\n# echo conf| nc 10.0.0.1 1300\nclientPort=1300\nsecureClientPort=-1\ndataDir=/moot/persistentStore/zkWorkspace/version-2\ndataDirSize=67293721\ndataLogDir=/moot/persistentStore/zkWorkspace/version-2\ndataLogSize=67293721\ntickTime=2000\nmaxClientCnxns=60\nminSessionTimeout=4000\nmaxSessionTimeout=40000\nserverId=1\ninitLimit=100\nsyncLimit=20\nelectionAlg=3\nelectionPort=1200\nquorumPort=1100\npeerType=0\nmembership: \nserver.1=10.0.0.1:1100:1200:participant;10.0.0.1:1300;8e64c644-d0fa-414f-bab2-3c8c80364410\nserver.2=10.0.0.2:1100:1200:participant;10.0.0.2:1300;38bf19b8-d4cb-4dac-b328-7bbf0ee1e2c4\nserver.3=10.0.0.3:1100:1200:participant;10.0.0.3:1300;e1415d59-e857-43e6-ba9b-01daeb31a434\n\n\nZK 2:\n\n# echo conf| nc 10.0.0.2 1300\nclientPort=1300\nsecureClientPort=-1\ndataDir=/moot/persistentStore/zkWorkspace/version-2\ndataDirSize=1409480873\ndataLogDir=/moot/persistentStore/zkWorkspace/version-2\ndataLogSize=1409480873\ntickTime=2000\nmaxClientCnxns=60\nminSessionTimeout=4000\nmaxSessionTimeout=40000\nserverId=2\ninitLimit=100\nsyncLimit=20\nelectionAlg=3\nelectionPort=1200\nquorumPort=1100\npeerType=0\nmembership: \nserver.1=10.0.0.1:1100:1200:participant;10.0.0.1:1300;8e64c644-d0fa-414f-bab2-3c8c80364410\nserver.2=10.0.0.2:1100:1200:participant;10.0.0.2:1300;38bf19b8-d4cb-4dac-b328-7bbf0ee1e2c4\nserver.3=10.0.0.3:1100:1200:participant;10.0.0.3:1300;e1415d59-e857-43e6-ba9b-01daeb31a434\n\nZK 3:\n\n# echo conf| nc 10.0.0.3 1300\nclientPort=1300\nsecureClientPort=-1\ndataDir=/moot/persistentStore/zkWorkspace/version-2\ndataDirSize=1409505467\ndataLogDir=/moot/persistentStore/zkWorkspace/version-2\ndataLogSize=1409505467\ntickTime=2000\nmaxClientCnxns=60\nminSessionTimeout=4000\nmaxSessionTimeout=40000\nserverId=3\ninitLimit=100\nsyncLimit=20\nelectionAlg=3\nelectionPort=1200\nquorumPort=1100\npeerType=0\nmembership: \nserver.1=10.0.0.1:1100:1200:participant;10.0.0.1:1300;8e64c644-d0fa-414f-bab2-3c8c80364410\nserver.2=10.0.0.2:1100:1200:participant;10.0.0.2:1300;38bf19b8-d4cb-4dac-b328-7bbf0ee1e2c4\nserver.3=10.0.0.3:1100:1200:participant;10.0.0.3:1300;e1415d59-e857-43e6-ba9b-01daeb31a434\n\n\n2. mntr:\n\nZK 1:\n\n# echo mntr| nc 10.0.0.1 1300\nzk_version 3.5.1-alpha--1, built on 09/07/2016 00:34 GMT\nzk_avg_latency 0\nzk_max_latency 471\nzk_min_latency 0\nzk_packets_received 32556\nzk_packets_sent 32564\nzk_num_alive_connections 7\nzk_outstanding_requests 0\nzk_server_state leader\nzk_znode_count 58\nzk_watch_count 51\nzk_ephemerals_count 5\nzk_approximate_data_size 5251\nzk_open_file_descriptor_count 52\nzk_max_file_descriptor_count 1048576\nzk_followers 2\nzk_synced_followers 2\nzk_pending_syncs 0\n\nZK 2:\n\n# echo mntr| nc 10.0.0.2 1300\nzk_version 3.5.1-alpha--1, built on 09/07/2016 00:34 GMT\nzk_avg_latency 1\nzk_max_latency 227\nzk_min_latency 0\nzk_packets_received 30905\nzk_packets_sent 30936\nzk_num_alive_connections 6\nzk_outstanding_requests 0\nzk_server_state follower\nzk_znode_count 58\nzk_watch_count 82\nzk_ephemerals_count 5\nzk_approximate_data_size 5251\nzk_open_file_descriptor_count 49\nzk_max_file_descriptor_count 1048576\n\nZK 3:\n\n# echo mntr| nc 10.0.0.3 1300\nzk_version 3.5.1-alpha--1, built on 09/07/2016 00:34 GMT\nzk_avg_latency 4\nzk_max_latency 590\nzk_min_latency 0\nzk_packets_received 6192\nzk_packets_sent 6191\nzk_num_alive_connections 2\nzk_outstanding_requests 0\nzk_server_state follower\nzk_znode_count 64\nzk_watch_count 17\nzk_ephemerals_count 11\nzk_approximate_data_size 5806\nzk_open_file_descriptor_count 45\nzk_max_file_descriptor_count 1048576\n\n\n3. dump showing the inconsistency:\n\nZK 1:\n\n# echo dump| nc 10.0.0.1 1300\nSessionTracker dump:\nSession Sets (17)/(12):\n0 expire at Tue Sep 20 18:22:35 UTC 2016:\n0 expire at Tue Sep 20 18:22:37 UTC 2016:\n0 expire at Tue Sep 20 18:22:39 UTC 2016:\n0 expire at Tue Sep 20 18:22:41 UTC 2016:\n0 expire at Tue Sep 20 18:22:43 UTC 2016:\n0 expire at Tue Sep 20 18:22:45 UTC 2016:\n0 expire at Tue Sep 20 18:22:49 UTC 2016:\n0 expire at Tue Sep 20 18:22:51 UTC 2016:\n0 expire at Tue Sep 20 18:22:53 UTC 2016:\n0 expire at Tue Sep 20 18:22:55 UTC 2016:\n0 expire at Tue Sep 20 18:22:57 UTC 2016:\n4 expire at Tue Sep 20 18:22:59 UTC 2016:\n 0x100061435f7000d\n 0x10000d9e4460004\n 0x100061435f70002\n 0x10000d9e4460003\n4 expire at Tue Sep 20 18:23:03 UTC 2016:\n 0x2000001141a0002\n 0x2000001141a0000\n 0x2000001141a0005\n 0x100061435f70010\n1 expire at Tue Sep 20 18:23:07 UTC 2016:\n 0x2000001141a0001\n1 expire at Tue Sep 20 18:23:09 UTC 2016:\n 0x100061435f70000\n1 expire at Tue Sep 20 18:23:11 UTC 2016:\n 0x2000001141a000f\n1 expire at Tue Sep 20 18:23:13 UTC 2016:\n 0x300000188c30001\nephemeral nodes dump:\nSessions with Ephemerals (5):\n0x100061435f70000:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000064\n0x2000001141a000f:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000066\n0x2000001141a0001:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000065\n0x2000001141a0000:\n /moot/gmle/ActiveControllerCluster/member0000000065\n0x2000001141a0005:\n /moot/gmle/ActiveControllerCluster/member0000000066\nConnections dump:\nConnections Sets (5)/(10):\n0 expire at Tue Sep 20 18:22:35 UTC 2016:\n1 expire at Tue Sep 20 18:22:45 UTC 2016:\n ip: /10.0.0.1:45591 sessionId: 0x0\n0 expire at Tue Sep 20 18:22:55 UTC 2016:\n5 expire at Tue Sep 20 18:23:05 UTC 2016:\n ip: /10.0.0.3:34734 sessionId: 0x100061435f7000d\n ip: /10.0.0.1:42963 sessionId: 0x10000d9e4460003\n ip: /10.0.0.3:34739 sessionId: 0x100061435f70010\n ip: /10.0.0.2:45750 sessionId: 0x100061435f70002\n ip: /10.0.0.1:42961 sessionId: 0x10000d9e4460004\n1 expire at Tue Sep 20 18:23:15 UTC 2016:\n ip: /10.0.0.1:42964 sessionId: 0x100061435f70000\n\nZK 2:\n\n# echo dump| nc 10.0.0.2 1300\nSessionTracker dump:\nGlobal Sessions(13):\n0x10000d9e4460003 30000ms\n0x10000d9e4460004 30000ms\n0x100061435f70000 40000ms\n0x100061435f70002 30000ms\n0x100061435f7000d 30000ms\n0x100061435f70010 30000ms\n0x100061435f70584 4000ms\n0x2000001141a0000 40000ms\n0x2000001141a0001 40000ms\n0x2000001141a0002 30000ms\n0x2000001141a0005 40000ms\n0x2000001141a000f 40000ms\n0x300000188c30001 40000ms\nephemeral nodes dump:\nSessions with Ephemerals (5):\n0x100061435f70000:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000064\n0x2000001141a000f:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000066\n0x2000001141a0001:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000065\n0x2000001141a0000:\n /moot/gmle/ActiveControllerCluster/member0000000065\n0x2000001141a0005:\n /moot/gmle/ActiveControllerCluster/member0000000066\nConnections dump:\nConnections Sets (4)/(6):\n0 expire at Tue Sep 20 18:25:13 UTC 2016:\n1 expire at Tue Sep 20 18:25:23 UTC 2016:\n ip: /10.0.0.2:38021 sessionId: 0x0\n1 expire at Tue Sep 20 18:25:33 UTC 2016:\n ip: /10.0.0.2:35422 sessionId: 0x2000001141a0002\n4 expire at Tue Sep 20 18:25:43 UTC 2016:\n ip: /10.0.0.2:35419 sessionId: 0x2000001141a0001\n ip: /10.0.0.1:59025 sessionId: 0x2000001141a0000\n ip: /10.0.0.2:35427 sessionId: 0x2000001141a0005\n ip: /10.0.0.3:56967 sessionId: 0x2000001141a000f\n\nZK 3:\n\n# echo dump| nc 10.0.0.3 1300\nSessionTracker dump:\nGlobal Sessions(23):\n0x10000d9e4460003 30000ms\n0x10000d9e4460004 30000ms\n0x100055a50b00001 30000ms\n0x100055a50b00003 40000ms\n0x100055a50b0000c 40000ms\n0x100061435f70000 40000ms\n0x100061435f70002 30000ms\n0x100061435f7000d 30000ms\n0x100061435f70010 30000ms\n0x100061435f70585 4000ms\n0x2000001141a0000 40000ms\n0x2000001141a0001 40000ms\n0x2000001141a0002 30000ms\n0x2000001141a0005 40000ms\n0x2000001141a000f 40000ms\n0x200000130750000 40000ms\n0x200000130750001 40000ms\n0x200000130750002 30000ms\n0x200000130750004 40000ms\n0x20000013075000d 30000ms\n0x3000000e4860000 30000ms\n0x3000000e4860002 40000ms\n0x300000188c30001 40000ms\nephemeral nodes dump:\nSessions with Ephemerals (11):\n0x100061435f70000:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000064\n0x3000000e4860002:\n /moot/gmle/ActiveControllerCluster/member0000000027\n0x100055a50b0000c:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000027\n0x100055a50b00003:\n /moot/gmle/ActiveControllerCluster/member0000000025\n0x200000130750004:\n /moot/gmle/ActiveControllerCluster/member0000000026\n0x200000130750000:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000026\n0x2000001141a000f:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000066\n0x200000130750001:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000025\n0x2000001141a0001:\n /moot/gmle/ServiceDirectory/ActiveNodes/member0000000065\n0x2000001141a0000:\n /moot/gmle/ActiveControllerCluster/member0000000065\n0x2000001141a0005:\n /moot/gmle/ActiveControllerCluster/member0000000066\nConnections dump:\nConnections Sets (4)/(2):\n0 expire at Tue Sep 20 18:25:40 UTC 2016:\n1 expire at Tue Sep 20 18:25:50 UTC 2016:\n ip: /10.0.0.3:52784 sessionId: 0x0\n0 expire at Tue Sep 20 18:26:10 UTC 2016:\n1 expire at Tue Sep 20 18:26:20 UTC 2016:\n ip: /10.0.0.3:50222 sessionId: 0x300000188c30001","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12829635","id":"12829635","filename":"zk1.tgz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-21T18:03:25.264+0000","size":1713022,"mimeType":"application/x-compressed","content":"https://issues.apache.org/jira/secure/attachment/12829635/zk1.tgz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12829636","id":"12829636","filename":"zk2.tgz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-21T18:03:25.271+0000","size":2630023,"mimeType":"application/x-compressed","content":"https://issues.apache.org/jira/secure/attachment/12829636/zk2.tgz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12829637","id":"12829637","filename":"zk3.tgz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-21T18:03:25.278+0000","size":2503307,"mimeType":"application/x-compressed","content":"https://issues.apache.org/jira/secure/attachment/12829637/zk3.tgz"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Data Inconsistency after power off/on of some nodes","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"ZK is running in a docker container on a Ubuntu 14.04 VM","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13006588/comment/15510691","id":"15510691","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"body":"Attaching tar gz of the zookeeper config and datadir.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-21T18:03:25.286+0000","updated":"2016-09-21T18:03:25.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13006588/comment/15514087","id":"15514087","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"body":"Once the ensemble is in this state:\n1. Running \"sync /moot/gmle/ActiveControllerCluster\"  or \"sync  /moot/gmle/ActiveControllerCluster/member0000000025\" via zkCli.sh on ZK3 does not help.\n2. ZKNodes created on ZK1 or ZK2 show up on ZK3. ZNodes create on ZK3 show up on ZK1 and 2. \n3. Ephemeral ZKNodes created on ZK3 show up on ZK1 and 2.\n\nNode of the above got rid of the following stale ephemeral nodes still showing on ZK3:\n/moot/gmle/ActiveControllerCluster/member0000000025\n/moot/gmle/ActiveControllerCluster/member0000000026\n/moot/gmle/ActiveControllerCluster/member0000000027\n/moot/gmle/ServiceDirectory/ActiveNodes/member0000000025\n/moot/gmle/ServiceDirectory/ActiveNodes/member0000000026\n/moot/gmle/ServiceDirectory/ActiveNodes/member0000000027\n\n\nEphemeral node created on ZK 3:\n\n[zk: 10.0.0.3:1300(CONNECTED) 11] create -e /testEphemeral \ncreate -e /testEphemeral\nCreated /testEphemeral\n[zk: 10.0.0.3:1300(CONNECTED) 12] ls /\nls /\n[bar, f, foo, moot, testEphemeral, transport-nodes, vmware, vnet-sharding, zookeeper]\n[zk: 10.0.0.3:1300(CONNECTED) 13] ls /moot/gmle/ActiveControllerCluster\nls /moot/gmle/ActiveControllerCluster\n[member0000000025, member0000000026, member0000000027, member0000000065, member0000000067]\n[zk: 10.0.0.3:1300(CONNECTED) 14] \n\nShows up on ZK1 and ZK2:\n\n[zk: 10.0.0.1:1300(CONNECTED) 9] ls /\nls /\n[bar, f, foo, moot, testEphemeral, transport-nodes, vmware, vnet-sharding, zookeeper]\n[zk: 10.0.0.1:1300(CONNECTED) 10] ls /moot/gmle/ActiveControllerCluster\nls /moot/gmle/ActiveControllerCluster\n[member0000000065, member0000000067]\n\n[zk: 10.0.0.2:1300(CONNECTED) 3] ls /\nls /\n[bar, f, foo, moot, testEphemeral, transport-nodes, vmware, vnet-sharding, zookeeper]\n[zk: 10.0.0.2:1300(CONNECTED) 4] ls /moot/gmle/ActiveControllerCluster\nls /moot/gmle/ActiveControllerCluster\n[member0000000065, member0000000067]\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssneginhal","name":"ssneginhal","key":"ssneginhal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas Neginhal","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-22T18:26:27.491+0000","updated":"2016-09-22T18:26:27.491+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13006588/comment/15581870","id":"15581870","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"I wonder if this is an instance of ZOOKEEPER-1549.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2016-10-17T10:46:22.326+0000","updated":"2016-10-17T10:46:22.326+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2598/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i33wsv:"}}