{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12511320","self":"https://issues.apache.org/jira/rest/api/2/issue/12511320","key":"ZOOKEEPER-1105","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343268","id":"12343268","description":"Beta release against 3.5 branch","name":"3.5.5","archived":false,"released":false}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-12-07T02:56:31.923+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Apr 01 00:25:13 UTC 2014","customfield_12310420":"2422","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1105/watchers","watchCount":13,"isWatching":false},"created":"2011-06-23T06:05:56.994+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315108","id":"12315108","description":"Fix release against 3.3 branch","name":"3.3.2","archived":false,"released":true,"releaseDate":"2010-11-11"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319288","id":"12319288","description":"Fix release against 3.4 branch","name":"3.4.3","archived":false,"released":true,"releaseDate":"2012-02-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-05-10T20:09:06.502+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312380","id":"12312380","name":"c client","description":"The c client interface to ZooKeeper"}],"timeoriginalestimate":null,"description":"in zookeeper_close function,  do adaptor_finish before send CLOSE_OP request to server\nso the CLOSE_OP request can not be sent to server\n\nin server zookeeper.log have many\n2011-06-22 00:23:02,323 - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@634] - EndOfStreamException: Unable to read additional data from client sessionid 0x1305970d66d2224, likely client has closed socket\n2011-06-22 00:23:02,324 - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@1435] - Closed socket connection for client /10.250.8.123:60257 which had sessionid 0x1305970d66d2224\n2011-06-22 00:23:02,325 - ERROR [CommitProcessor:1:NIOServerCnxn@445] - Unexpected Exception:\njava.nio.channels.CancelledKeyException\n        at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:55)\n        at sun.nio.ch.SelectionKeyImpl.interestOps(SelectionKeyImpl.java:59)\n        at org.apache.zookeeper.server.NIOServerCnxn.sendBuffer(NIOServerCnxn.java:418)\n        at org.apache.zookeeper.server.NIOServerCnxn.sendResponse(NIOServerCnxn.java:1509)\n        at org.apache.zookeeper.server.FinalRequestProcessor.processRequest(FinalRequestProcessor.java:367)\n        at org.apache.zookeeper.server.quorum.CommitProcessor.run(CommitProcessor.java:73)\n\nand java client not have this problem","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12506385","id":"12506385","filename":"zklog.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-07T02:59:17.186+0000","size":13096,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12506385/zklog.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12506384","id":"12506384","filename":"zktest.c","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-07T02:57:30.805+0000","size":1601,"mimeType":"text/x-csrc","content":"https://issues.apache.org/jira/secure/attachment/12506384/zktest.c"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12506383","id":"12506383","filename":"zktest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-07T02:56:31.811+0000","size":1788,"mimeType":"text/x-java","content":"https://issues.apache.org/jira/secure/attachment/12506383/zktest.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12533279","id":"12533279","filename":"ZOOKEEPER-1105.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-06-25T11:03:32.541+0000","size":1181,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12533279/ZOOKEEPER-1105.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12546985","id":"12546985","filename":"ZOOKEEPER-1105v1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-09-28T12:33:04.030+0000","size":1365,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12546985/ZOOKEEPER-1105v1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"2377","customfield_12312823":null,"summary":"c client zookeeper_close not send CLOSE_OP request to server","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rpggpr","name":"rpggpr","key":"rpggpr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiang guangran","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rpggpr","name":"rpggpr","key":"rpggpr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiang guangran","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13164092","id":"13164092","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"body":"Test program in Java (showing correct behavior).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-07T02:56:31.923+0000","updated":"2011-12-07T02:56:31.923+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13164094","id":"13164094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"body":"Test program in C (showing incorrect behavior).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-07T02:57:30.928+0000","updated":"2011-12-07T02:57:30.928+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13164095","id":"13164095","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"body":"Server log file containing snippets from running both the Java client and the C client.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-07T02:59:17.342+0000","updated":"2011-12-07T02:59:17.342+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13164098","id":"13164098","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"body":"I think I've encountered a client-visible manifestation of this issue.\n\nThe ZooKeeper FAQ entry [1] titled \"Is there an easy way to expire a session for testing?\" explains that when one client closes a session, all other sessions using that same session ID will be expired. This feature appears to work with Java clients but not with C clients.\n\nI've attached a C and a Java version of the test case. The basic idea is this:\n\n1) Connect to ZooKeeper.\n2) Create a test znode (\"/test\") if it doesn't exist.\n3) Write to the znode.\n4) Connect to ZooKeeper with the first connection's session ID and password.\n5) Close this new connection.\n6) Try to write to the znode again on the first connection.\n\nThe write in (6) should never succeed. Using the Java client, the write first returns a ConnectionLossException. Retrying it then returns a SessionExpiredException, as expected. However, when using the C client, the write returns ZOK; this is the wrong behavior.\n\nI've also attached the relevant parts of the server's log file when running against both the Java client and the C client. They diverge in the way jiang guangran originally reported. The key thing to see in these logs is that, in the C client, the session is not terminated cleanly. The client library transparently reconnects a new socket using the same session ID, and the server accepts the session ID that should have been expired.\n\nBased on this behavior, I think there may be two issues with the C client library:\n* First, it does not cleanly close its sessions. This prevents C clients from forcefully closing each others' sessions.\n* Second, it attempts to reconnect over a new socket without returning a ZCONNECTIONLOSS to the client. This doesn't matter much to me, but could it affect correctness for some applications?\n\nIf you need more info or clarification, feel free to ask by commenting on this issue. I'm also on IRC as 'ongardie'.\n\nCheers,\nDiego\n\n[1] http://wiki.apache.org/hadoop/ZooKeeper/FAQ#A4","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-07T03:01:08.457+0000","updated":"2011-12-07T03:01:08.457+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13206678","id":"13206678","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Diego, can you submit this in the form of a patch?\nhttps://cwiki.apache.org/confluence/display/ZOOKEEPER/HowToContribute\n\nI'm afraid we missed this originally, when you have something you'd like us to review please advance the workflow by clicking on the \"submit\" link. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-02-13T05:03:13.882+0000","updated":"2012-02-13T05:03:13.882+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13208260","id":"13208260","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"body":"Patrick, I don't have a patch. My attachments help explain the issue but do not fix it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ongardie","name":"ongardie","key":"ongardie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diego Ongaro","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-02-15T07:43:04.909+0000","updated":"2012-02-15T07:43:04.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13295515","id":"13295515","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"body":"resolution for avoid  WARN & ERROR logs on zookeeper server when client calls close method","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-06-15T08:03:57.868+0000","updated":"2012-06-15T08:03:57.868+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13295516","id":"13295516","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"body":"Diego, I've also encountered java.nio.channels.CancelledKeyException in server's log when a python client calls close method, but I found client had sent CLOSE_OP request to server but exit before server can read the request completely，\n \nsrc/c/src/zookeeper.c\n@@ -2522,6 +2522,22 @@\n/* make sure the close request is sent; we set timeout to an arbitrary\n  * (but reasonable) number of milliseconds since we want the call to block*/\n rc=adaptor_send_queue(zh, 3000); // here actually call send(s, buf, len, MSG_NOSIGNAL)\n\nwe can simply sleep one second after call send_buffer in flush_send_queue method of src/c/src/zookeeper.c\n  rc = send_buffer(zh->fd, zh->to_send.head);\n+ if (timeout>0)sleep(1);\n  if(rc==0 && timeout==0){\n\nor add a little more lines as the ZOOKEEPER-1105.patch attached （against trunk）","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-06-15T08:04:34.840+0000","updated":"2012-06-15T08:04:34.840+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13400412","id":"13400412","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"body":"fix spelling of comments","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-06-25T11:03:32.573+0000","updated":"2012-06-25T11:03:32.573+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13400931","id":"13400931","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Lincoln, if you think the patch is ready for review please \"submit patch\" above, thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-25T21:44:44.780+0000","updated":"2012-06-25T21:44:44.780+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13405501","id":"13405501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"body":"Hi Patrick, the patch is ready for review, sorry for response so late.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-07-03T02:34:35.563+0000","updated":"2012-07-03T02:34:35.563+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13405504","id":"13405504","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"body":"patch for avoid WARN & ERROR logs on zookeeper server when client calls close method","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-07-03T02:38:32.696+0000","updated":"2012-07-03T02:38:32.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13448168","id":"13448168","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"body":"+1.\n\nI'll check this in to trunk and the 3.4 branch.\n\nThanks!\n--Michi","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-04T23:16:19.809+0000","updated":"2012-09-04T23:16:19.809+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13448634","id":"13448634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in ZooKeeper-trunk #1670 (See [https://builds.apache.org/job/ZooKeeper-trunk/1670/])\n    ZOOKEEPER-1105 c client zookeeper_close not send CLOSE_OP request to server (lincoln.lee via michim) (Revision 1380931)\n\n     Result = SUCCESS\nmichim : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1380931\nFiles : \n* /zookeeper/trunk/CHANGES.txt\n* /zookeeper/trunk/src/c/src/zookeeper.c\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-05T11:01:36.842+0000","updated":"2012-09-05T11:01:36.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13456526","id":"13456526","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"body":"It looks like this patch broke the windows build. The pollfd struct is not available in windows, so we need to check \"#ifdef WIN32\" and do something else for windows.\n\nhttps://builds.apache.org/job/ZooKeeper-trunk-WinVS2008/513/console","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-16T03:06:53.118+0000","updated":"2012-09-16T03:06:53.118+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13456681","id":"13456681","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Nice catch Michi. I think Ill revert the patch for 3.4 and trunk and we can fix it later. I dont think this looks like a blocker for 3.4 release. Mitchi what do you think?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-16T21:33:37.528+0000","updated":"2012-09-16T21:33:37.528+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13456682","id":"13456682","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Michi looks like you reverted the patch for trunk. Can you do that for 3.4 branch as well? If not let me know. I can do it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-16T21:36:27.979+0000","updated":"2012-09-16T21:36:27.979+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13456683","id":"13456683","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"body":"I just reverted the change in both trunk and 3.4 branch. I'll move the target version to 3.5.\n\nThanks!\n--Michi","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-16T21:37:41.663+0000","updated":"2012-09-16T21:37:41.663+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13456684","id":"13456684","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Thanks Michi!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-16T21:39:46.525+0000","updated":"2012-09-16T21:39:46.525+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13456940","id":"13456940","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in ZooKeeper-trunk #1682 (See [https://builds.apache.org/job/ZooKeeper-trunk/1682/])\n    Revert 1380931: ZOOKEEPER-1105 c client zookeeper_close not send CLOSE_OP\nrequest to server (lincoln.lee via michim) (Revision 1385378)\n\n     Result = SUCCESS\nmichim : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1385378\nFiles : \n* /zookeeper/trunk/CHANGES.txt\n* /zookeeper/trunk/src/c/src/zookeeper.c\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-17T11:02:06.851+0000","updated":"2012-09-17T11:02:06.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13465567","id":"13465567","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"body":"check \"#ifndef WIN32\" use select() for windows","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-09-28T12:33:04.039+0000","updated":"2012-09-28T12:33:04.039+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13465569","id":"13465569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"body":"use select() for windows","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lincoln.86xy","name":"lincoln.86xy","key":"lincoln.86xy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lincoln.lee","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-09-28T12:35:35.588+0000","updated":"2012-09-28T12:35:35.588+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13465589","id":"13465589","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12546985/ZOOKEEPER-1105v1.patch\n  against trunk revision 1389711.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1193//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1193//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1193//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-28T13:10:05.610+0000","updated":"2012-09-28T13:10:05.610+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13789368","id":"13789368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12546985/ZOOKEEPER-1105v1.patch\n  against trunk revision 1530166.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1657//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1657//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1657//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-08T16:42:32.303+0000","updated":"2013-10-08T16:42:32.303+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12511320/comment/13955933","id":"13955933","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"body":"The C client doesn't compile with this patch anymore because of the logging macro change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-01T00:25:13.597+0000","updated":"2014-04-01T00:25:13.597+0000"}],"maxResults":25,"total":25,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1105/votes","votes":4,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i00rfr:"}}