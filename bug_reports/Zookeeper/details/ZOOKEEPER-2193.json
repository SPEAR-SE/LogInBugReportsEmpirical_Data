{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12831323","self":"https://issues.apache.org/jira/rest/api/2/issue/12831323","key":"ZOOKEEPER-2193","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326786","id":"12326786","description":"Alpha release against 3.5 branch","name":"3.5.1","archived":false,"released":true,"releaseDate":"2015-09-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-05-20T15:37:23.535+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jun 29 08:11:55 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_496504749_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_2752352137","customfield_12312321":null,"resolutiondate":"2015-06-27T00:06:00.226+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2193/watchers","watchCount":8,"isWatching":false},"created":"2015-05-20T09:38:23.390+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316644","id":"12316644","description":"Dynamic Reconfig, Remove Watches, Local Session","name":"3.5.0","archived":false,"released":true,"releaseDate":"2014-08-04"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-07-28T06:49:10.692+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312378","id":"12312378","name":"leaderElection","description":"Leader election algorithm for ZooKeeper"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."}],"timeoriginalestimate":null,"description":"Even if reconfig parameter is wrong, it was confirmed to complete.\nrefer to the following.\n\n- Ensemble consists of four nodes\n\n{noformat}\n[zk: vm-101:2181(CONNECTED) 0] config\nserver.1=192.168.100.101:2888:3888:participant\nserver.2=192.168.100.102:2888:3888:participant\nserver.3=192.168.100.103:2888:3888:participant\nserver.4=192.168.100.104:2888:3888:participant\nversion=100000000\n{noformat}\n\n- add node by reconfig command\n\n{noformat}\n[zk: vm-101:2181(CONNECTED) 9] reconfig -add server.5=192.168.100.104:2888:3888:participant;0.0.0.0:2181\nCommitted new configuration:\nserver.1=192.168.100.101:2888:3888:participant\nserver.2=192.168.100.102:2888:3888:participant\nserver.3=192.168.100.103:2888:3888:participant\nserver.4=192.168.100.104:2888:3888:participant\nserver.5=192.168.100.104:2888:3888:participant;0.0.0.0:2181\nversion=300000007\n{noformat}\n\nserver.4 and server.5 of the IP address is a duplicate.\n\nIn this state, reader election will not work properly.\nBesides, it is assumed an ensemble will be undesirable state.\nI think that need a parameter validation when reconfig.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12735107","id":"12735107","filename":"ZOOKEEPER-2193.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-05-25T03:40:36.054+0000","size":1604,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12735107/ZOOKEEPER-2193.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12735241","id":"12735241","filename":"ZOOKEEPER-2193-v2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-05-26T02:47:38.206+0000","size":3592,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12735241/ZOOKEEPER-2193-v2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12735261","id":"12735261","filename":"ZOOKEEPER-2193-v3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-05-26T07:02:08.472+0000","size":3797,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12735261/ZOOKEEPER-2193-v3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12739012","id":"12739012","filename":"ZOOKEEPER-2193-v4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-11T08:10:58.039+0000","size":3992,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12739012/ZOOKEEPER-2193-v4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12739013","id":"12739013","filename":"ZOOKEEPER-2193-v5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-11T08:10:58.045+0000","size":6414,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12739013/ZOOKEEPER-2193-v5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12739014","id":"12739014","filename":"ZOOKEEPER-2193-v6.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-11T08:10:58.049+0000","size":6926,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12739014/ZOOKEEPER-2193-v6.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740593","id":"12740593","filename":"ZOOKEEPER-2193-v7.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-19T07:29:05.193+0000","size":7005,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740593/ZOOKEEPER-2193-v7.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12741214","id":"12741214","filename":"ZOOKEEPER-2193-v8.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-23T04:40:07.678+0000","size":6902,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12741214/ZOOKEEPER-2193-v8.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"reconfig command completes even if parameter is wrong obviously","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"CentOS7 + Java7","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14552502","id":"14552502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~Yasuhito Fukuda]. Would be great if you could suggest a patch.\nBTW, I'm not sure that uniqueness of servers in the config is being checked during initial server boot either, not only in reconfig.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-20T15:37:23.535+0000","updated":"2015-05-20T15:37:23.535+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14557948","id":"14557948","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"I've created a patch for this issue.\nWhen hostname and port are duplicate in joined ensemble node, it will be raised an exception.\nThis patch add validation for reconfig -add parameters, but it may not be exhaustive in other config processes.\n\nYour comments would be appreciated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-05-25T03:41:11.874+0000","updated":"2015-05-25T03:41:11.874+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14557955","id":"14557955","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitake","name":"mitake","key":"mitake","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitoshi Mitake","active":true,"timeZone":"Asia/Tokyo"},"body":"Hi [~Yasuhito Fukuda],\n\nIIUC, there is a possibility of duplicated addresses for different purposes e.g. clientAddr of new node == electionAddr of existing node.\n\nFor checking duplication, 9 comparison per node pair would be required, I think.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mitake","name":"mitake","key":"mitake","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitoshi Mitake","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-05-25T03:56:34.561+0000","updated":"2015-05-25T03:56:34.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14558599","id":"14558599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the patch! here are some comments:\n\nOne can use reconfig -add to change the ports of a server dynamically, basically adding a server that is already in the system, with different ports. In that case it is possible that all the ports will be the same but one. To do this \"nextServers.remove(qs.id);\" removes the old spec of a server and the following line adds the new spec. To avoid checking a server against its old self,  I think that nextServers.remove(qs.id); should go before your checks.\n\nAlso, why do you need joinedServers, isn't nextServers defined above your code sufficient ?\n\n[~michim], can you take a look as well ? do you know if the same address:port can be shared by different servers ? (please see comment above by [~Yasuhito Fukuda])","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-26T00:36:15.744+0000","updated":"2015-05-26T00:36:15.744+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14558634","id":"14558634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"Hi [~shralex], [~mitake], thanks for your comments.\nI have recreated patch to reflect your comments.\nplease see patch v2. \nloopback address(localhost/127.0.0.1) and wildCard address(0.0.0.0) may be same address:port by different servers, i think. So, I added the code to exclude them in validation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-05-26T02:53:43.402+0000","updated":"2015-05-26T02:53:43.402+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14558642","id":"14558642","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks! I'll take a closer look tomorrow, but as I mentioned, the line \" nextServers.remove(qs.id);\" should probably go before your changes, not after, otherwise we won't be able to change a server's port.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-26T03:08:36.489+0000","updated":"2015-05-26T03:08:36.489+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14558665","id":"14558665","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12735241/ZOOKEEPER-2193-v2.patch\n  against trunk revision 1680994.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2711//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2711//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2711//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T03:48:26.268+0000","updated":"2015-05-26T03:48:26.268+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14558763","id":"14558763","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"Hi [~shralex], Thank you for comment and submitting test run.\nI've added \"if statement\" for validation skip, in the case of configuration changes on the same server(ex. change port number).\nPlease see patch v3.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-05-26T07:03:32.551+0000","updated":"2015-05-26T07:03:32.551+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14558773","id":"14558773","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12735261/ZOOKEEPER-2193-v3.patch\n  against trunk revision 1680994.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2712//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2712//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2712//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T07:18:50.574+0000","updated":"2015-05-26T07:18:50.574+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14566303","id":"14566303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"body":"[~Yasuhito Fukuda] thank you for the patch! Could you post the patch to the reviewboard? https://reviews.apache.org/r/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-31T02:25:04.017+0000","updated":"2015-05-31T02:25:04.017+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14566329","id":"14566329","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"body":"3 more minor comments:\n\n1) I'm not sure that my == null can ever happen both because of the checks in the calling function and because the exclude... function also excludes null. \n\n2) Perhaps rename \"existing\" to something else since its not only existing its also the joiners that were processed before. For example if someone is adding multiple servers with the same command. Similarly the message in the thrown exception shouldn't say that the conflict is with one of the existing servers because it may be with one of the new ones. \n\n3) Consider making the message in the exception more specific - such as \"port x of server #y conflicts with port x of server #z\". ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-31T03:56:52.581+0000","updated":"2015-05-31T03:56:52.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14576840","id":"14576840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"Hi [~michim], [~shralex], thanks for your comments.\nI have created new patch reflected comments from Alexander, and posted on reviewboard.\nPlease see the review https://reviews.apache.org/r/35204/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-08T09:45:03.680+0000","updated":"2015-06-08T09:45:03.680+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14578151","id":"14578151","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the patch [~Yasuhito Fukuda], commented on a few issues/nits on the reviewboard. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-09T01:12:56.559+0000","updated":"2015-06-09T01:12:56.559+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14578441","id":"14578441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"[~rgs] thanks for your review.\nI posted new diff on the reviewboard.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-09T06:52:25.940+0000","updated":"2015-06-09T06:52:25.940+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14579875","id":"14579875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"thanks [~Yasuhito Fukuda] - added some more comments. do you mind uploading the patch here as well, besides updating the reviewboard after you've updated the patch? that way CI can run and we can see if all passes and we can merge the patch. thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-10T02:19:22.938+0000","updated":"2015-06-10T02:19:22.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14581651","id":"14581651","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"thanks for your comment and review.\nI posted Rev3 on the reviewboard.\nhttps://reviews.apache.org/r/35204/\n\nIn addition, I attached three patches in JIRA now.\nv4 and v5 are old patches only was posted on the reviewboard.\nv6 is newest a patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-11T08:12:10.729+0000","updated":"2015-06-11T08:12:10.729+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14581652","id":"14581652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"thanks for your comment and review.\nI posted Rev3 on the reviewboard.\nhttps://reviews.apache.org/r/35204/\n\nIn addition, I attached three patches in JIRA now.\nv4 and v5 are old patches only was posted on the reviewboard.\nv6 is newest a patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-11T08:12:12.998+0000","updated":"2015-06-11T08:12:12.998+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14581673","id":"14581673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12739014/ZOOKEEPER-2193-v6.patch\n  against trunk revision 1683878.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2761//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2761//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2761//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-11T08:28:52.221+0000","updated":"2015-06-11T08:28:52.221+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14592274","id":"14592274","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~Yasuhito Fukuda] - do you get this failure when running the tests locally:\n\n{code}\n2015-06-11 08:24:41,482 [myid:] - INFO  [main:ZKTestCase$1@70] - FAILED testBadPeerAddressInQuorum\njava.lang.AssertionError: complains about host\n{code}\n\n?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-18T18:34:07.439+0000","updated":"2015-06-18T18:34:07.439+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14592280","id":"14592280","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"The 3 failures actually look related to the patch (and not general flakiness in CI):\n\n{code}\norg.apache.zookeeper.server.quorum.QuorumPeerMainTest.testBadPeerAddressInQuorum\norg.apache.zookeeper.test.CnxManagerTest.testCnxManagerTimeout\norg.apache.zookeeper.test.ReconfigTest.testUnspecifiedClientAddress\n{code}\n\nDo these pass locally for you [~Yasuhito Fukuda]?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-18T18:36:38.343+0000","updated":"2015-06-18T18:36:38.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14593142","id":"14593142","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"I am sorry. I did not check the unit-test result carefully.\ncause of the 3 failures were returned null by getAddress() in excludedSpecialAddress() when a hostname wasn't lookup by dns or an address is wrong.\nI've attached the new patch. and, I've posted new diff on the reviewboard.\nhttps://reviews.apache.org/r/35204/diff/3-4/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-19T07:34:03.577+0000","updated":"2015-06-19T07:34:03.577+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14594269","id":"14594269","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12740593/ZOOKEEPER-2193-v7.patch\n  against trunk revision 1686296.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2773//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2773//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2773//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-20T01:43:06.333+0000","updated":"2015-06-20T01:43:06.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14595272","id":"14595272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch lgtm, +1. A few more nits though (but I wouldn't block merging on them):\n\nIn:\n\n{code}\n+                        throw new KeeperException.BadArgumentsException(String.format(\"%s of server.%d conflicts %s of server.%d\", my, this.id, other, s.id));\n{code}\n\nthe line is too long, maybe use an intermediate assignment to make it more readable:\n\n{code}\n       String error = String.format(\"%s of server.%d conflicts %s of server.%d\", my, this.id, other, s.id);\n       throw new BadArgumentsException(error);\n{code}\n\n(also, you can just use BadArgumentsException without KeeperException. since it's imported).\n\nIn:\n\n{code}\n+        private List<InetSocketAddress> excludedSpecialAddress(List<InetSocketAddress> addrs) {\n{code}\n\nhow about we call the method excludeSpecialAddresses given it's an action?\n\n[~michim], [~shralex]: could you take another look as well?\n\nThanks [~Yasuhito Fukuda]!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-22T01:01:57.328+0000","updated":"2015-06-22T01:01:57.328+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14595276","id":"14595276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"One last nit, in:\n\n{code}\n+                if (inetaddr == null) {\n+                    continue;\n+                // wildCard address(0.0.0.0)\n+                } else if (inetaddr.equals(wcAddr)) {\n+                    continue;\n+                // loopback address(localhost/127.0.0.1)\n+                } else if (inetaddr.isLoopbackAddress()) {\n+                    continue;\n+                } else {\n+                    included.add(addr);\n+                }\n{code}\n\nyou could simplify things a bit by having:\n\n{code}\n                if (inetaddr == null ||\n                    inetaddr.equals(wcAddr) ||\n                    inetaddr.isLoopbackAddress()) {\n                      continue;\n                }\n\n                included.add(addr);\n{code}\n\nThanks again!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-22T01:07:24.715+0000","updated":"2015-06-22T01:07:24.715+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14597155","id":"14597155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"Thank you for your review. I attached v8 patch based on your comments.\nand, I posted a new diff on the reviewboard.\nhttps://reviews.apache.org/r/35204/diff/4-5/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-23T04:42:06.263+0000","updated":"2015-06-23T04:42:06.263+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14597216","id":"14597216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12741214/ZOOKEEPER-2193-v8.patch\n  against trunk revision 1686767.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2775//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2775//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2775//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-23T06:00:37.058+0000","updated":"2015-06-23T06:00:37.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14597232","id":"14597232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch lgtm, +1. Thanks [~Yasuhito Fukuda]! Will wait for a final ack from [~shralex] since he is more familiar with these bits.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T06:12:30.299+0000","updated":"2015-06-23T06:12:30.299+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14597274","id":"14597274","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 \nthanks for the patch [~Yasuhito Fukuda]! and thanks [~rgs] for reviewing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T07:10:05.471+0000","updated":"2015-06-23T07:10:05.471+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14597834","id":"14597834","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"[~shralex], [~Yasuhito Fukuda]: Sorry, one last thing. I think there might be an issue in assuming unique IDs:\n\n{code}\n+                               // check duplication of addresses and ports\n+                               for (QuorumServer nqs: nextServers.values()) {\n+                                   if (qs.id == nqs.id) {\n+                                       continue;\n+                                   }\n+                                   qs.checkAddressDuplicate(nqs);\n+                               }\n{code}\n\nIs in it valid for Observers to have their id set to -1? In that case, the check wouldn't be performed. Could we add a test case for that?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T15:41:23.978+0000","updated":"2015-06-23T15:41:23.978+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14598743","id":"14598743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"A few more more nits since a test case will probably be needed, in:\n\n{code}\n+import org.apache.zookeeper.KeeperException;\n+import org.apache.zookeeper.KeeperException.BadArgumentsException;\n{code}\n\nthere's no need to import KeeperException, only BadArgumentsException is needed. And in:\n\n{code}\n-        \n+        public List<InetSocketAddress> myAddrs;\n+\n{code}\n\nmyAddrs doesn't need to be public, it should be private.\n\nFinally, if you are updating the patch one more time you might as well rename excludedSpecialAddresses to removeSpecialAddresses for clarity. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-24T02:17:10.505+0000","updated":"2015-06-24T02:17:10.505+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14600800","id":"14600800","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"Hi [~rgs].\nSorry, I don't understand. Why do observers's ids have -1 ?\nPlease tell me the details.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-25T07:10:19.036+0000","updated":"2015-06-25T07:10:19.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14602296","id":"14602296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"body":"I don't think reconfiguration will work with non-unique ids. I'm actually not sure that such observers would be in the config files. If I remember correctly an observer connects with -1 and then assigned an id by the system, but I'm not sure about the details, can someone explain ? not sure someone is using this mode. [~fpj][~phunt]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-26T02:33:39.237+0000","updated":"2015-06-26T02:33:39.237+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14602999","id":"14602999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"I remember that we wired QCM so that we could assign ids to observers automatically, but frankly I can't remember having finished the feature. I believe we still require observers to have unique ids in the config, but I can do some investigation to be sure.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2015-06-26T14:58:23.751+0000","updated":"2015-06-26T14:58:23.751+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14603650","id":"14603650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"We have added code to QCM so that observers could connect without providing a unique id, but I don't think the way we process configuration supports this feature currently. For example, we check if a peer is observing by checking the server id. The intent was to support this feature, though, to be able connect observers without having to change configuration.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2015-06-26T21:48:46.876+0000","updated":"2015-06-26T21:48:46.876+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14603689","id":"14603689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm not sure it would work with reconfig either. In any case, this should be discussed in a separate Jira (in case this is important to support)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shralex","name":"shralex","key":"shralex","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Shraer","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-26T22:11:29.632+0000","updated":"2015-06-26T22:11:29.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14603793","id":"14603793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"Ok - thanks for checking [~shralex] and [~fpj]. I'll go ahead and merge then. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-26T23:49:12.369+0000","updated":"2015-06-26T23:49:12.369+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14603795","id":"14603795","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"I think it's been clarified below by [~fpj] and [~shralex] - we can ignore observers using non-unique (i.e.: -1) ids for now. I'll go ahead and merge. Thanks [~Yasuhito Fukuda]!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-26T23:50:47.815+0000","updated":"2015-06-26T23:50:47.815+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14603812","id":"14603812","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"body":"Merged:\n\nhttps://github.com/apache/zookeeper/commit/86d9061bbd28e8230350146f64366f7e81519387\nhttps://github.com/apache/zookeeper/commit/cca2a67578159a127c571a4b0abb4926e76a4dea\n\nThanks [~Yasuhito Fukuda]!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rgs","name":"rgs","key":"rgs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"},"displayName":"Raul Gutierrez Segales","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-27T00:06:00.264+0000","updated":"2015-06-27T00:06:00.264+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14604118","id":"14604118","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in ZooKeeper-trunk #2739 (See [https://builds.apache.org/job/ZooKeeper-trunk/2739/])\nZOOKEEPER-2193: reconfig command completes even if parameter is wrong obviously\n(Yasuhito Fukuda via rgs) (rgs: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1687876)\n* /zookeeper/trunk/CHANGES.txt\n* /zookeeper/trunk/src/java/main/org/apache/zookeeper/server/PrepRequestProcessor.java\n* /zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-27T10:46:36.656+0000","updated":"2015-06-27T10:46:36.656+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12831323/comment/14605255","id":"14605255","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"body":"[~fpj], [~shralex], [~rgs], Thanks to you I was able to understand the feature and the current status of the feature.\nThanks for merge, [~rgs]!!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Yasuhito+Fukuda","name":"Yasuhito Fukuda","key":"yasuhito fukuda","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yasuhito Fukuda","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-29T08:11:55.569+0000","updated":"2015-06-29T08:11:55.569+0000"}],"maxResults":40,"total":40,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2193/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ez9j:"}}