{
  "expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations",
  "id": "12676539",
  "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539",
  "key": "ZOOKEEPER-1805",
  "fields": {
    "issuetype": {
      "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
      "id": "1",
      "description": "A problem which impairs or prevents the functions of the product.",
      "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
      "name": "Bug",
      "subtask": false,
      "avatarId": 21133
    },
    "timespent": null,
    "project": {
      "self": "https://issues.apache.org/jira/rest/api/2/project/12310801",
      "id": "12310801",
      "key": "ZOOKEEPER",
      "name": "ZooKeeper",
      "avatarUrls": {
        "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011",
        "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011",
        "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011",
        "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"
      },
      "projectCategory": {
        "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10484",
        "id": "10484",
        "description": "Apache ZooKeeper related",
        "name": "ZooKeeper"
      }
    },
    "fixVersions": [
      {
        "self": "https://issues.apache.org/jira/rest/api/2/version/12323310",
        "id": "12323310",
        "description": "Fix release against 3.4 branch",
        "name": "3.4.6",
        "archived": false,
        "released": true,
        "releaseDate": "2014-03-10"
      }
    ],
    "aggregatetimespent": null,
    "resolution": {
      "self": "https://issues.apache.org/jira/rest/api/2/resolution/1",
      "id": "1",
      "description": "A fix for this issue is checked into the tree and tested.",
      "name": "Fixed"
    },
    "customfield_12312322": null,
    "customfield_12310220": "2013-10-30T13:57:47.013+0000",
    "customfield_12312520": null,
    "customfield_12312323": null,
    "customfield_12312521": "Thu Mar 13 18:31:49 UTC 2014",
    "customfield_12310420": "355971",
    "customfield_12312320": null,
    "customfield_12310222": "10002_*:*_7_*:*_384304867_*|*_1_*:*_8_*:*_11247734360_*|*_5_*:*_1_*:*_0",
    "customfield_12312321": null,
    "resolutiondate": "2014-03-13T18:25:33.163+0000",
    "workratio": -1,
    "customfield_12312328": null,
    "customfield_12312329": null,
    "customfield_12312923": null,
    "customfield_12312326": null,
    "customfield_12312920": null,
    "customfield_12310300": null,
    "customfield_12312327": null,
    "customfield_12312921": null,
    "customfield_12312324": null,
    "customfield_12312720": null,
    "customfield_12312325": null,
    "lastViewed": null,
    "watches": {
      "self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1805/watchers",
      "watchCount": 8,
      "isWatching": false
    },
    "created": "2013-10-30T03:18:13.969+0000",
    "customfield_12310192": null,
    "customfield_12310191": null,
    "priority": {
      "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
      "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
      "name": "Blocker",
      "id": "1"
    },
    "labels": [],
    "customfield_12312333": null,
    "customfield_12310230": null,
    "customfield_12312334": null,
    "customfield_12313422": "false",
    "customfield_12310310": "11.0",
    "customfield_12312331": null,
    "customfield_12312332": null,
    "timeestimate": null,
    "aggregatetimeoriginalestimate": null,
    "customfield_12311120": null,
    "customfield_12312330": null,
    "versions": [],
    "issuelinks": [
      {
        "id": "12377711",
        "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12377711",
        "type": {
          "id": "10030",
          "name": "Reference",
          "inward": "is related to",
          "outward": "relates to",
          "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
        },
        "inwardIssue": {
          "id": "12658778",
          "key": "ZOOKEEPER-1732",
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12658778",
          "fields": {
            "summary": "ZooKeeper server unable to join established ensemble",
            "status": {
              "self": "https://issues.apache.org/jira/rest/api/2/status/6",
              "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
              "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
              "name": "Closed",
              "id": "6",
              "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
              }
            },
            "priority": {
              "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
              "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
              "name": "Blocker",
              "id": "1"
            },
            "issuetype": {
              "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
              "id": "1",
              "description": "A problem which impairs or prevents the functions of the product.",
              "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
              "name": "Bug",
              "subtask": false,
              "avatarId": 21133
            }
          }
        }
      },
      {
        "id": "12384507",
        "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12384507",
        "type": {
          "id": "12310050",
          "name": "Regression",
          "inward": "is broken by",
          "outward": "breaks",
          "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"
        },
        "outwardIssue": {
          "id": "12691695",
          "key": "ZOOKEEPER-1870",
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12691695",
          "fields": {
            "summary": "flakey test in StandaloneDisabledTest.startSingleServerTest",
            "status": {
              "self": "https://issues.apache.org/jira/rest/api/2/status/5",
              "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
              "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
              "name": "Resolved",
              "id": "5",
              "statusCategory": {
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
              }
            },
            "priority": {
              "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
              "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
              "name": "Blocker",
              "id": "1"
            },
            "issuetype": {
              "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
              "id": "1",
              "description": "A problem which impairs or prevents the functions of the product.",
              "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
              "name": "Bug",
              "subtask": false,
              "avatarId": 21133
            }
          }
        }
      }
    ],
    "customfield_12312339": null,
    "assignee": {
      "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
      "name": "fpj",
      "key": "fpj",
      "avatarUrls": {
        "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
        "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
        "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
        "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
      },
      "displayName": "Flavio Junqueira",
      "active": true,
      "timeZone": "Europe/Berlin"
    },
    "customfield_12312337": null,
    "customfield_12312338": null,
    "updated": "2014-03-13T18:31:49.082+0000",
    "customfield_12312335": null,
    "customfield_12312336": null,
    "status": {
      "self": "https://issues.apache.org/jira/rest/api/2/status/6",
      "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
      "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
      "name": "Closed",
      "id": "6",
      "statusCategory": {
        "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
        "id": 3,
        "key": "done",
        "colorName": "green",
        "name": "Done"
      }
    },
    "components": [],
    "timeoriginalestimate": null,
    "description": "This is an issue that has been originally reported in ZOOKEEPER-1732.",
    "customfield_10010": null,
    "timetracking": {},
    "customfield_12312026": null,
    "customfield_12312023": null,
    "customfield_12312024": null,
    "customfield_12312340": null,
    "attachment": [
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611860",
        "id": "12611860",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-11-04T03:53:27.957+0000",
        "size": 10404,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611860/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611853",
        "id": "12611853",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-11-04T01:49:11.170+0000",
        "size": 5247,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611853/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611846",
        "id": "12611846",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-11-04T00:35:14.557+0000",
        "size": 5800,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611846/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611551",
        "id": "12611551",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-11-01T04:56:16.312+0000",
        "size": 9118,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611551/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611541",
        "id": "12611541",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-11-01T02:47:32.168+0000",
        "size": 9145,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611541/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611390",
        "id": "12611390",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-10-31T14:09:43.239+0000",
        "size": 9458,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611390/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611251",
        "id": "12611251",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-10-31T04:52:00.150+0000",
        "size": 8828,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611251/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611110",
        "id": "12611110",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-10-30T16:51:28.969+0000",
        "size": 4203,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611110/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611067",
        "id": "12611067",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
          "name": "abranzyck",
          "key": "abranzyck",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
          },
          "displayName": "Germán Blanco",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-10-30T13:57:47.011+0000",
        "size": 1849,
        "mimeType": "text/plain",
        "content": "https://issues.apache.org/jira/secure/attachment/12611067/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12610979",
        "id": "12610979",
        "filename": "ZOOKEEPER-1805.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-10-30T03:19:38.310+0000",
        "size": 3395,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12610979/ZOOKEEPER-1805.patch"
      },
      {
        "self": "https://issues.apache.org/jira/rest/api/2/attachment/12611550",
        "id": "12611550",
        "filename": "ZOOKEEPER-1805-b3.4.patch",
        "author": {
          "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
          "name": "fpj",
          "key": "fpj",
          "avatarUrls": {
            "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
            "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
            "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
            "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
          },
          "displayName": "Flavio Junqueira",
          "active": true,
          "timeZone": "Europe/Berlin"
        },
        "created": "2013-11-01T04:52:11.369+0000",
        "size": 9052,
        "mimeType": "text/x-patch",
        "content": "https://issues.apache.org/jira/secure/attachment/12611550/ZOOKEEPER-1805-b3.4.patch"
      }
    ],
    "aggregatetimeestimate": null,
    "customfield_12312341": null,
    "customfield_12312220": null,
    "customfield_12312022": null,
    "customfield_12310921": null,
    "customfield_12310920": "356259",
    "customfield_12312823": null,
    "summary": "\"Don't care\" value in ZooKeeper election breaks rolling upgrades",
    "creator": {
      "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
      "name": "fpj",
      "key": "fpj",
      "avatarUrls": {
        "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
        "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
        "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
        "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
      },
      "displayName": "Flavio Junqueira",
      "active": true,
      "timeZone": "Europe/Berlin"
    },
    "subtasks": [
      {
        "id": "12677608",
        "key": "ZOOKEEPER-1808",
        "self": "https://issues.apache.org/jira/rest/api/2/issue/12677608",
        "fields": {
          "summary": "Add version to FLE notifications for 3.4 branch",
          "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "name": "Closed",
            "id": "6",
            "statusCategory": {
              "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
              "id": 3,
              "key": "done",
              "colorName": "green",
              "name": "Done"
            }
          },
          "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
            "name": "Blocker",
            "id": "1"
          },
          "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
            "id": "7",
            "description": "The sub-task of the issue",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
            "name": "Sub-task",
            "subtask": true,
            "avatarId": 21146
          }
        }
      },
      {
        "id": "12679563",
        "key": "ZOOKEEPER-1817",
        "self": "https://issues.apache.org/jira/rest/api/2/issue/12679563",
        "fields": {
          "summary": "Fix don't care for b3.4",
          "status": {
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "name": "Closed",
            "id": "6",
            "statusCategory": {
              "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3",
              "id": 3,
              "key": "done",
              "colorName": "green",
              "name": "Done"
            }
          },
          "priority": {
            "self": "https://issues.apache.org/jira/rest/api/2/priority/1",
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
            "name": "Blocker",
            "id": "1"
          },
          "issuetype": {
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/7",
            "id": "7",
            "description": "The sub-task of the issue",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype",
            "name": "Sub-task",
            "subtask": true,
            "avatarId": 21146
          }
        }
      }
    ],
    "customfield_12310291": null,
    "reporter": {
      "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
      "name": "fpj",
      "key": "fpj",
      "avatarUrls": {
        "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
        "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
        "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
        "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
      },
      "displayName": "Flavio Junqueira",
      "active": true,
      "timeZone": "Europe/Berlin"
    },
    "customfield_12310290": null,
    "aggregateprogress": {
      "progress": 0,
      "total": 0
    },
    "customfield_12311024": null,
    "environment": null,
    "customfield_12313520": null,
    "customfield_12311020": null,
    "duedate": null,
    "customfield_12310250": null,
    "progress": {
      "progress": 0,
      "total": 0
    },
    "comment": {
      "comments": [
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13808708",
          "id": "13808708",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "This patch is missing a test case, but this is actually how I think we should be fixing this.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T03:19:38.313+0000",
          "updated": "2013-10-30T03:19:38.313+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809040",
          "id": "13809040",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "I forgot to mention that it would be nice if [~abranzyck] and [~rgs] could comment and test this fix.\n\n",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T12:49:39.749+0000",
          "updated": "2013-10-30T12:49:39.749+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809097",
          "id": "13809097",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Sorry but, according to my tests, your changes do not work. When doing a rolling upgrade of zookeeper 3.4.5 to the trunk with this patch applied, the third server fails to join the quorum after restart.\nSince I had the setup ready, I tested this other patch and it seems to work.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T13:57:47.013+0000",
          "updated": "2013-10-30T13:57:47.013+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809108",
          "id": "13809108",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "The \"third\" server is the third server in a quorum of 5.\nThere is a bit of crap in the end of the patch, but I think it doesn't do any harm. ",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T14:07:10.027+0000",
          "updated": "2013-10-30T14:07:10.027+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809193",
          "id": "13809193",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "I don't understand why it needs to be epoch - 1 for the rolling upgrade to work. I also don't understand why my changes didn't work in your setting (not that I have had time to test exhaustively). Could you post the logs please? ",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T15:06:15.182+0000",
          "updated": "2013-10-30T15:06:15.182+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809271",
          "id": "13809271",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "I think I get it now, in ZOOKEEPER-1732 we have made two fields \"don't care\" and we update the epoch value. The epoch value is causing the comparison to fail, but I think that the \"don't care\" values also have to be updated in the way I propose, otherwise the comparison will fail too, no? \n\n\"newEpoch - 1\" sounds like a hack to me, not a principled solution. I need to think a bit more about this one.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T16:08:33.608+0000",
          "updated": "2013-10-30T16:08:33.608+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809325",
          "id": "13809325",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "What about this, [~abranzyck]?",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T16:51:28.972+0000",
          "updated": "2013-10-30T16:51:28.972+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809326",
          "id": "13809326",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "I want to see what QA says (other than complaining about the absence of a test case).",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T16:52:13.637+0000",
          "updated": "2013-10-30T16:52:13.637+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809381",
          "id": "13809381",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "body": "-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12611110/ZOOKEEPER-1805.patch\n  against trunk revision 1535491.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1728//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1728//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1728//console\n\nThis message is automatically generated.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "created": "2013-10-30T17:35:05.139+0000",
          "updated": "2013-10-30T17:35:05.139+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809386",
          "id": "13809386",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "body": "Testing this now - thanks for the patch [~fpj].",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "created": "2013-10-30T17:37:04.860+0000",
          "updated": "2013-10-30T17:37:04.860+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809419",
          "id": "13809419",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "body": "[~fpj]: did a quick test and followers joined nicely - thanks!",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "created": "2013-10-30T18:00:51.153+0000",
          "updated": "2013-10-30T18:00:51.153+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809421",
          "id": "13809421",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "body": "Though a test case is still needed ;-)",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "created": "2013-10-30T18:01:31.214+0000",
          "updated": "2013-10-30T18:01:31.214+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809461",
          "id": "13809461",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "The reason why the changes in Vote are not required is because all the Votes inserted in \"outofelection\" have the same values for zxid and election epoch. So the comparison is already based only in the other fields of Vote.\n\nThe value \"newEpoch - 1\" works because we want to get back to the last accepted epoch of the leader, and the leader is sending the last accepted epoch plus one. The newEpoch that is sent from the Leader to all learners is calculated in \"getEpochToPropose\" in Leader.java. My interpretation of that method is that the new epoch will always be lastAcceptedEpoch plus one.\n\nThere are at least these other alternatives, but they look worse:\n- ignoring also peerEpoch in the comparison. Which will have the risk of taking into account left-over votes of ensembles established before the current one.\n- setting peerEpoch to any other value. Has the same problem that we are trying to fix.\n- changing the protocol in order to send lastAcceptedEpoch (and maybe zxid and election epoch, since the protocol is changed anyway) instead of the new epoch.\n\nI will provide the logs tomorrow.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T18:40:35.999+0000",
          "updated": "2013-10-30T18:40:35.999+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809483",
          "id": "13809483",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "I sent that last comment without refreshing the page.\nIt seems the logs are not needed any longer, since the last patch fixes the problem.\nMy interpretation of your last patch is that you are not taking peerEpoch in the comparison. For outofelection all zxids equal Vote.DONTCARE, so the condition results in not using peerEpoch. That is the first option in my previous comment.\n",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-30T18:57:00.288+0000",
          "updated": "2013-10-30T18:57:00.288+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809929",
          "id": "13809929",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Added unit tests. Thanks for having a look, guys.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-31T04:52:00.153+0000",
          "updated": "2013-10-31T04:52:00.153+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809947",
          "id": "13809947",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "body": "+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12611251/ZOOKEEPER-1805.patch\n  against trunk revision 1535491.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1729//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1729//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1729//console\n\nThis message is automatically generated.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "created": "2013-10-31T05:35:15.647+0000",
          "updated": "2013-10-31T05:35:15.647+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13809981",
          "id": "13809981",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "body": "Patch looks correct to me - thanks for the swift response [~fpj].",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "created": "2013-10-31T06:27:37.995+0000",
          "updated": "2013-10-31T06:27:37.995+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13810269",
          "id": "13810269",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Added one more test case.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-10-31T14:09:43.243+0000",
          "updated": "2013-10-31T14:09:43.243+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13810305",
          "id": "13810305",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "body": "+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12611390/ZOOKEEPER-1805.patch\n  against trunk revision 1535491.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1730//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1730//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1730//console\n\nThis message is automatically generated.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "created": "2013-10-31T14:45:12.988+0000",
          "updated": "2013-10-31T14:45:12.988+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13810441",
          "id": "13810441",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "body": "2nd test looks fine to me as well. I guess you could DRY it up a bit by having:\n\n{noformat}\nHashMap<Long, Vote> getVotes(long a, long b) {\n    \tHashMap<Long, Vote> votes = new HashMap<Long, Vote>();\n    \tvotes.put(0L, new Vote(4L, Vote.DONTCARE, Vote.DONTCARE, a, ServerState.FOLLOWING));\n    \tvotes.put(1L, new Vote(4L, Vote.DONTCARE, Vote.DONTCARE, a, ServerState.FOLLOWING));\n    \tvotes.put(3L, new Vote(4L, 10L, 10L, b, ServerState.FOLLOWING));\n    \tvotes.put(4L, new Vote(4L, 10L, 10L, b, ServerState.LEADING));\n        return votes;\n}\n{noformat}\n\nbut I guess copy/pasta is alright in test cases for readability (though I rather DRY it).  Thanks [~fpj].",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "created": "2013-10-31T17:10:29.380+0000",
          "updated": "2013-10-31T17:10:29.380+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13810992",
          "id": "13810992",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "yeah, I shouldn't have been lazy, thanks for pushing.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-01T02:47:32.172+0000",
          "updated": "2013-11-01T02:47:32.172+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13811006",
          "id": "13811006",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "body": "+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12611541/ZOOKEEPER-1805.patch\n  against trunk revision 1535491.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1731//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1731//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1731//console\n\nThis message is automatically generated.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "created": "2013-11-01T03:25:56.748+0000",
          "updated": "2013-11-01T03:25:56.748+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13811030",
          "id": "13811030",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "[~abranzyck], are you ok with the patch too? could you both +1 it, please?",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-01T04:24:49.249+0000",
          "updated": "2013-11-01T04:24:49.249+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13811041",
          "id": "13811041",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Uploading 3.4 patch.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-01T04:52:11.373+0000",
          "updated": "2013-11-01T04:52:11.373+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13811044",
          "id": "13811044",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Small formatting change to the patch.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-01T04:56:16.316+0000",
          "updated": "2013-11-01T04:56:16.316+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13811053",
          "id": "13811053",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "body": "+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12611551/ZOOKEEPER-1805.patch\n  against trunk revision 1535491.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1732//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1732//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1732//console\n\nThis message is automatically generated.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "created": "2013-11-01T05:35:27.856+0000",
          "updated": "2013-11-01T05:35:27.856+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13811060",
          "id": "13811060",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "+1\nThank you [~rgs] and [~fpj] for spotting this and the quick fix before release of 3.4.6.\nOnly a very mild suggestion, if you wish you could remove the changes introduced by ZOOKEEPER-1732 in Leader.java, Learner.java and QuorumPeer.java. I think they don't do anything significant anymore. Of course I might also be wrong, and the change would require testing things again, so ...",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-01T05:42:41.849+0000",
          "updated": "2013-11-01T05:42:41.849+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13811092",
          "id": "13811092",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "body": "+1. ",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rgs",
            "name": "rgs",
            "key": "rgs",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rgs&avatarId=18469",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rgs&avatarId=18469",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rgs&avatarId=18469",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rgs&avatarId=18469"
            },
            "displayName": "Raul Gutierrez Segales",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "created": "2013-11-01T06:54:24.838+0000",
          "updated": "2013-11-01T06:54:24.838+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13811263",
          "id": "13811263",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Thanks, guys.\n\nbq. Only a very mild suggestion, if you wish you could remove the changes introduced by ZOOKEEPER-1732 in Leader.java, Learner.java and QuorumPeer.java.\n\nI don't understand this comment. The change here simply detects that there is a mix of messages with and without don't care values, which must correspond to a rolling upgrade, so it ignores the corresponding fields and simply verifies that the epoch is greater. If this is right, then the changes of ZOOKEEPER-1732 are still required when everyone is sending don't care values. Am I missing anything? ",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-01T14:05:09.113+0000",
          "updated": "2013-11-01T14:05:09.113+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812455",
          "id": "13812455",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "As far as I can see, there is never a mix of messages with and without don't care values.\nThe don't care values never get sent over the network ... or at least that was not intentional.\nI have noticed that the current value (-1) happens to be the same that was being used by default in Vote.java for some of the incomplete constructors, and this is why the value does appear in the traces sent by Raúl for the epoch (note that the epoch was not set to don't care value in this case). But it has nothing to do with the patch for ZOOKEEPER-1732. You can see that e.g. zxid does not have a don't care value in these traces.\nWhat your change is doing is that if there is a don't care value, then it checks if the epoch is greater or equal between the vote with the don't care value and the other. All votes in the outofelection collection have don't care values, so the result is that the comparison for the epochs ignores the value of the epochs in all cases. Epoch may be greater of equal or smaller or equal for the comparison to be succesful when both votes being compared have don't care values.\nThe same result would have been achieved by setting the epoch to the don't care value when inserting the vote in the outofelection collection (and in the call to termPredicate) and not making any changes at all in the comparisons in Vote.java. And in that case also, the changes in learner.java leader.java and QuorumPeer.java are not good for anything any more, since all they do is setting the value of the epoch to a common value in Learners and Leader and that value is going to be ignored. That would be the approach that I would be taking to implement your proposal. For a test case, it would be enough to modify the test case added in ZOOKEEPER-1732 and just set the peerEpoch to any value, so that it is clear that this value is also ignored in the comparison. But as far as I can see, the current patch has the same behaviour, and the last decision of how to code behaviours is yours, so both solutions to this problem are fine for me.\nIf the decision was mine, I would go for setting epoch to newEpoch-1. Which might be (arguably) a bit hacky, but the hackery is actually only covering the case of the upgrade and it doesn't have any effect in other cases. Ignoring the epoch applies to all cases in which a new server joins an established ensemble and it might have (at least) the problem of votes of ensembles established with different epochs to be taken into account as if they belonged to the same ensemble. I don't like that too much, but failures don't seem likely and they might not cause problems, since even if the new server joins the wrong leader, this leader will not process any transaction unless it has acks from sufficient followers. So the potential problem seems to be only an small possibility of a delay when joining the right ensemble. That means both (newEpoch-1 and ignoring epoch) look to me as working solutions.\nSorry if that was too long, but I think it summarises all corners of my personal view of this issue. The short summary is \"I am ok with this solution\". If you want a patch with my alternative implementation of the option of ignoring the epoch, I can also prepare that.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-03T19:14:53.279+0000",
          "updated": "2013-11-03T19:14:53.279+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812456",
          "id": "13812456",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "One mistake above: Epoch in the third paragraph is the election epoch (n.round), and this did happen to be set to don't care value both in the patch code and in the constructor in Vote.java. But that was only by chance anyway.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-03T19:22:31.845+0000",
          "updated": "2013-11-03T19:22:31.845+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812480",
          "id": "13812480",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "bq. The don't care values never get sent over the network\n\nHow do you think we prevent don't care values to go over the network? I think they get inserted in election notifications and sent just the same.\n\nbq.  All votes in the outofelection collection have don't care values\n\nThis is not necessarily the case when performing a rolling upgrade because we can have a mix of servers with and without ZOOKEEPER-1732.\n\nbq. The same result would have been achieved by setting the epoch to the don't care value\n\nThe patch I proposed should only allow different epoch values if the there is a mix of don't care and regular values. Also, when two notifications n and n' are being compared (Vote.equals), n has don't care values and n' doesn't, it also makes sure that the epoch in n is at least as large as the one in n'. It doesn't sound like this achieves the same effect as your proposal, no?\n\n",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-03T20:43:27.045+0000",
          "updated": "2013-11-03T20:43:27.045+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812537",
          "id": "13812537",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Something went wrong when I generated the previous patch, so I deleted it. This one seems fine.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-04T00:35:14.560+0000",
          "updated": "2013-11-04T00:35:14.560+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812538",
          "id": "13812538",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Don't care values don't go over the network because they are never sent. The only vote that gets sent over the network in the block where don't care values are used, is the one returned by the function lookForLeader, and that one doesn't have any don't care value:\n{noformat}\n                            Vote endVote = new Vote(n.leader, n.zxid, n.peerEpoch);\n                            leaveInstance(endVote);\n                            return endVote;\n{noformat}\nAll votes in the outofelection collection of a server with the ZOOKEEPER-1732 patch applied have don't care values. None of the votes in the outofelection collection of servers without the ZOOKEEPER-1732 patch applied have don't care values. I was talking about the first case, in any case, there is never a mixture of the two *in a single zookeeper server* which is where they get compared. As you can see in the line where votes are inserted in the outofelection collection (patch applied), all votes inserted there have the don't care value (first sentence below):\n{noformat}\n                        outofelection.put(n.sid, new Vote(n.leader, \n                                IGNOREVALUE, IGNOREVALUE, n.peerEpoch, n.state));\n                        if (termPredicate(outofelection, new Vote(n.leader,\n                                IGNOREVALUE, IGNOREVALUE, n.peerEpoch, n.state))\n                                && checkLeader(outofelection, n.leader, IGNOREVALUE)) {\n{noformat}",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-04T00:37:31.671+0000",
          "updated": "2013-11-04T00:37:31.671+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812542",
          "id": "13812542",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Thanks for the insight, [~abranzyck]. I´m trying out a few things.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-04T00:43:17.532+0000",
          "updated": "2013-11-04T00:43:17.532+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812548",
          "id": "13812548",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "body": "-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12611846/ZOOKEEPER-1805.patch\n  against trunk revision 1535491.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1736//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1736//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1736//console\n\nThis message is automatically generated.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "created": "2013-11-04T01:11:15.414+0000",
          "updated": "2013-11-04T01:11:15.414+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812566",
          "id": "13812566",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Another attempt.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-04T01:49:11.174+0000",
          "updated": "2013-11-04T01:49:11.174+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812580",
          "id": "13812580",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "body": "-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12611853/ZOOKEEPER-1805.patch\n  against trunk revision 1535491.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1737//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1737//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1737//console\n\nThis message is automatically generated.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa",
            "name": "hadoopqa",
            "key": "hadoopqa",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"
            },
            "displayName": "Hadoop QA",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "created": "2013-11-04T02:32:51.414+0000",
          "updated": "2013-11-04T02:32:51.414+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812599",
          "id": "13812599",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Here is a new patch after some thinking and feedback from German. It ignores the epoch in the comparison when the votes come from servers that are not looking, but I have done now in a way that we don't need to define a don't care value any longer. I'm not entirely happy with the test case, though.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-04T03:53:27.964+0000",
          "updated": "2013-11-04T03:53:27.964+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812694",
          "id": "13812694",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Thank you for considering my comments. Here are a few more ...\nPersonally, I would check that both Votes are out of the election before ignoring the fields in Vote.java. And I believe peerEpoch should be taken into account for normal votes:\n{noformat}\n>> +        if ((state != ServerState.LOOKING) && (other.state != ServerState.LOOKING)) {^M\n +           return (id == other.id);^M\n +        } else {^M\n +           return (id == other.id^M\n +                   && (zxid == other.zxid) ^M\n +                   && (electionEpoch == other.electionEpoch)\n>> +               && (peerEpoch == other.peerEpoch));^M\n +        }^M\n{noformat}\nI think that the previous test case (testJoinInconsistentEnsemble in FLETest.java) would look better if we now change also the peerEpoch:\n{noformat}\n +        Vote newVote = new Vote(leaderSid, zxid+100, electionEpoch+100, peerEpoch+100, state);\n{noformat}\nIn this way, this test case also verifies the new changes.\nAs indicated before, I would also remove the method updateElectionVote in QuorumPeer.java and the line under the comment for ZOOKEEPER-1732 in Leader.java and Learner.java. The value of peerEpoch will be ignored, so updating it looks like a waste of time to me.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-04T09:20:26.258+0000",
          "updated": "2013-11-04T09:20:26.258+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13812776",
          "id": "13812776",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "It still bothers me that we can't distinguish between old and new notification messages. I was thinking about introducing a format version field so that we can get around this problem and make the check in the way proposed instead of working around it.\n\nI have a patch mostly ready, but I'd like to know if this a direction that is ok to pursue. If this ok, then I can add a sub-task here so that we can work this out separately, before fixing this issue.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-04T11:43:28.308+0000",
          "updated": "2013-11-04T11:43:28.308+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13813720",
          "id": "13813720",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "I understand that you want to add a version field to notifications in order to know which come from a server that ignores zxid and electionEpoch for an established ensemble and which come from a server without this change, corrrect?\nOnce that is done, then it would be possible to make the correct comparison for the epoch when joining an ensemble with a mixture of updated and not-updated servers.\nThat sounds good for me. Having a version field will help in the future if any other change is required in notifications for fast leader election. For this problem, it means that the comparison between votes only needs to be different for the special case in which there is a mixture of servers, and it doesn't need to be modified at all for the rest of the cases, which seems to be a safer approach.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=abranzyck",
            "name": "abranzyck",
            "key": "abranzyck",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=abranzyck&avatarId=16792",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abranzyck&avatarId=16792",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abranzyck&avatarId=16792",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abranzyck&avatarId=16792"
            },
            "displayName": "Germán Blanco",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2013-11-05T07:33:47.305+0000",
          "updated": "2013-11-05T07:33:47.305+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13865777",
          "id": "13865777",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fournc",
            "name": "fournc",
            "key": "fournc",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Camille Fournier",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "body": "Is this still a blocker for 3.4.6? Any updates?",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fournc",
            "name": "fournc",
            "key": "fournc",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Camille Fournier",
            "active": true,
            "timeZone": "Etc/UTC"
          },
          "created": "2014-01-08T19:29:14.441+0000",
          "updated": "2014-01-08T19:29:14.441+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13866476",
          "id": "13866476",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "This is not a blocker for 3.4.6 any longer, the sub-tasks for 3.4.6 have been checked in. The reason why this issue is still open is that we haven't got the trunk changes in yet. ",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2014-01-09T09:37:42.946+0000",
          "updated": "2014-01-09T09:37:42.946+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13899452",
          "id": "13899452",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=michim",
            "name": "michim",
            "key": "michim",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Michi Mutsuzaki",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "body": "Flavio, can we move this to 3.4.7? This looks like the last remaining 3.4.6 issue. Yay!",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=michim",
            "name": "michim",
            "key": "michim",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Michi Mutsuzaki",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "created": "2014-02-12T19:17:23.327+0000",
          "updated": "2014-02-12T19:17:23.327+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13899765",
          "id": "13899765",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Check my previous comments, this is not an issue for the 3.4 branch any longer. The fix version is 3.4.6 for the 3.4 branch. We simply need to get the trunk version done. ;-)",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2014-02-12T23:43:07.075+0000",
          "updated": "2014-02-12T23:43:07.075+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13899767",
          "id": "13899767",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=michim",
            "name": "michim",
            "key": "michim",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Michi Mutsuzaki",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "body": "Oh I see. That's even better!",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=michim",
            "name": "michim",
            "key": "michim",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"
            },
            "displayName": "Michi Mutsuzaki",
            "active": true,
            "timeZone": "America/Los_Angeles"
          },
          "created": "2014-02-12T23:45:04.995+0000",
          "updated": "2014-02-12T23:45:04.995+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13933814",
          "id": "13933814",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "I have promoted the sub-tasks for 3.5.0 to issues so that I can resolve and close this one.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2014-03-13T18:25:33.191+0000",
          "updated": "2014-03-13T18:25:33.191+0000"
        },
        {
          "self": "https://issues.apache.org/jira/rest/api/2/issue/12676539/comment/13933839",
          "id": "13933839",
          "author": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "body": "Missed one issue when closing issues for release 3.4.6.",
          "updateAuthor": {
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fpj",
            "name": "fpj",
            "key": "fpj",
            "avatarUrls": {
              "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030",
              "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030",
              "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030",
              "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"
            },
            "displayName": "Flavio Junqueira",
            "active": true,
            "timeZone": "Europe/Berlin"
          },
          "created": "2014-03-13T18:31:49.078+0000",
          "updated": "2014-03-13T18:31:49.078+0000"
        }
      ],
      "maxResults": 49,
      "total": 49,
      "startAt": 0
    },
    "votes": {
      "self": "https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1805/votes",
      "votes": 1,
      "hasVoted": false
    },
    "worklog": {
      "startAt": 0,
      "maxResults": 20,
      "total": 0,
      "worklogs": []
    },
    "customfield_12311820": "0|i1pd93:"
  }
}