{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13017215","self":"https://issues.apache.org/jira/rest/api/2/issue/13017215","key":"ZOOKEEPER-2625","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-11-02T13:39:57.278+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Nov 12 20:48:12 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2625/watchers","watchCount":4,"isWatching":false},"created":"2016-11-02T12:59:02.475+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["build"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331981","id":"12331981","description":"Alpha release against 3.5 branch","name":"3.5.2","archived":false,"released":true,"releaseDate":"2016-07-21"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-11-12T20:48:12.118+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312384","id":"12312384","name":"scripts"}],"timeoriginalestimate":null,"description":"I provision a vagrant vm that installs zookeeper into /home/vagrant/zk and adjusts all owner and read/write rights.\nWith the vagrant user, I start zookeeper as bin/zkServer.sh start /vagrant/data/zoo.cfg\nHowever, the folder data? (or data^M) gets created with the PID inside, instead of putting it into the data folder, which contains the version-2 folder.\nSince I'm using the official start scripts, I'm at a loss.\nAlso, the data? folder comes with root:root ownership, which is strange, as zKServer.sh is executed from the vagrant user.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"zkServer.sh creates PID file in the folder data?/ instead of data/","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ABchmn","name":"ABchmn","key":"abchmn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arne Bachmann","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ABchmn","name":"ABchmn","key":"abchmn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arne Bachmann","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux vagrant-ubuntu-trusty-32 3.13.0-100-generic #147-Ubuntu SMP Tue Oct 18 16:49:53 UTC 2016 i686 i686 i686 GNU/Linux","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13017215/comment/15629000","id":"15629000","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"Thanks for reporting this issue, [~ABchmn]. Do you want to give it a shot at patching the script?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2016-11-02T13:39:57.278+0000","updated":"2016-11-02T13:39:57.278+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13017215/comment/15629271","id":"15629271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ABchmn","name":"ABchmn","key":"abchmn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arne Bachmann","active":true,"timeZone":"Etc/UTC"},"body":"Sorry, I have no idea where the problem is coming from, that's why I seek help here.. What character is ^M in Linux? Why does the script not write into data/ instead? The script looks fine syntactically, although I have the feeling that many environment variables are not defined that it relies on.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ABchmn","name":"ABchmn","key":"abchmn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arne Bachmann","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-02T15:19:53.185+0000","updated":"2016-11-02T15:19:53.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13017215/comment/15647827","id":"15647827","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ABchmn","name":"ABchmn","key":"abchmn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arne Bachmann","active":true,"timeZone":"Etc/UTC"},"body":"I found the issue. As I suspected, the reason for data? is actually a data^M which translates into a \\r character.\n\nThe following code executed in the bin/ folder resolved the issue:\nperl -p -i -e \"s/\\r//g\" *.sh\n\nThis converts line endings from Windows mode into Linux mode, which one would expect to find in the zk.tar.gz anyway.\nI'm not sure if I should create a pull request or patch, as this seems to be more of a problem with the developer's build chain, rather a simple code fix.\n\nIf anybody is interested, I can zip my Vagrant code that sets up distributed zookeeper instances inside Virtualbox containers (which may be a bad practice, as there is only ephemeral disk storage).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ABchmn","name":"ABchmn","key":"abchmn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arne Bachmann","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-08T15:19:09.430+0000","updated":"2016-11-08T15:19:09.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13017215/comment/15660263","id":"15660263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user ArneBachmann opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/105\n\n    Fix ZOOKEEPER-2625: Introduce explicit end-of-line setting for shell scripts\n\n    I added a .gitattributes file into the bin/ folder with the startup scripts.\n    It seems the official build servers build the ZK packages on a Windows machine (?), because even the Bash Shell scripts have CRLF line endings (extracted from the downloaded archive, not from a git checkout), which caused bug ZK-2625, as reported by me.\n    Since I don't have a build server myself and would build under Linux, I cannot check if this PR fixes the bug, please advise.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/ArneBachmann/zookeeper master\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/105.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #105\n    \n----\ncommit 6b58447a5da859736cb019ff1c4e41d9dcb5bbe1\nAuthor: Arne Bachmann <arne.bachmann@gmx.de>\nDate:   2016-11-12T20:32:27Z\n\n    Introduce explicit end-of-line setting for shell scripts.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-12T20:48:12.118+0000","updated":"2016-11-12T20:48:12.118+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2625/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i35q67:"}}