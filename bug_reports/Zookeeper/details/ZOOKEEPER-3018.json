{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13150132","self":"https://issues.apache.org/jira/rest/api/2/issue/13150132","key":"ZOOKEEPER-3018","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-04-05T06:14:25.876+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Apr 19 18:28:27 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-3018/watchers","watchCount":4,"isWatching":false},"created":"2018-04-04T20:09:26.483+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323310","id":"12323310","description":"Fix release against 3.4 branch","name":"3.4.6","archived":false,"released":true,"releaseDate":"2014-03-10"}],"issuelinks":[{"id":"12531828","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12531828","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"13109823","key":"ZOOKEEPER-2919","self":"https://issues.apache.org/jira/rest/api/2/issue/13109823","fields":{"summary":"expired ephemeral node reappears after ZK leader change","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-04-19T18:28:27.071+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."}],"timeoriginalestimate":null,"description":"We have a live Zookeeper environment (quorum size is 2) and observed a strange behavior:\r\n * Kafka created 2 ephemeral nodes /brokers/ids/822712429 and /brokers/ids/707577499 on 2018-03-12 03:30:36.933\r\n * The Kafka clients were long gone but as of today (20+ days after), the two ephemeral nodes are still present\r\n\r\n \r\n\r\nTroubleshooting:\r\n\r\n1) Lists the outstanding sessions and ephemeral nodes\r\n\r\n \r\n{noformat}\r\n$ echo dump | nc $SERVER1 2181\r\nSessionTracker dump:\r\norg.apache.zookeeper.server.quorum.LearnerSessionTracker@6d7fd863\r\nephemeral nodes dump:\r\nSessions with Ephemerals (2):\r\n0x162183ea9f70003:\r\n               /brokers/ids/822712429\r\n0x162183ea9f70002:\r\n               /brokers/ids/707577499\r\n               /controller\r\n{noformat}\r\n \r\n\r\n \r\n\r\n2) stat on /brokers/ids/822712429\r\n\r\n \r\n{noformat}\r\nzk> stat /brokers/ids/822712429\r\nczxid: 4294967344\r\nmzxid: 4294967344\r\npzxid: 4294967344\r\nctime: 1520825436933 (2018-03-11T20:30:36.933-0700)\r\nmtime: 1520825436933 (2018-03-11T20:30:36.933-0700)\r\nversion: 0\r\ncversion: 0\r\naversion: 0\r\nowner: 99668799174148099\r\ndatalen: 102\r\nchildren: 0\r\n{noformat}\r\n \r\n\r\n \r\n\r\n3) List full connection/session details for all clients connected\r\n\r\n \r\n{noformat}\r\n$ echo cons | nc $SERVER1 2181\r\n /10.247.114.70:30401[0](queued=0,recved=1,sent=0)\r\n /10.248.88.235:40430[1](queued=0,recved=345,sent=345,sid=0x162183ea9f70c22,lop=PING,est=1522713395028,to=40000,lcxid=0x12,lzxid=0xffffffffffffffff,lresp=1522717802117,llat=0,minlat=0,avglat=0,maxlat=31)\r\n{noformat}\r\n \r\n\r\n \r\n\r\n \r\n{noformat}\r\n$ echo cons | nc $SERVER2 2181\r\n /10.196.18.61:28173[0](queued=0,recved=1,sent=0)\r\n /10.247.114.69:42679[1](queued=0,recved=73800,sent=73800,sid=0x262183eaa21da96,lop=PING,est=1522651352906,to=9000,lcxid=0xe49f,lzxid=0x10004683d,lresp=1522717854847,llat=0,minlat=0,avglat=0,maxlat=1235)\r\n{noformat}\r\n \r\n\r\n \r\n\r\n4) health\r\n\r\n \r\n{noformat}\r\n$ echo mntr | nc $SERVER1 2181\r\nzk_version           3.4.6-1569965, built on 02/20/2014 09:09 GMT\r\nzk_avg_latency  0\r\nzk_max_latency 443\r\nzk_min_latency  0\r\nzk_packets_received       11158019\r\nzk_packets_sent               11158244\r\nzk_num_alive_connections           2\r\nzk_outstanding_requests              0\r\nzk_server_state follower\r\nzk_znode_count               344\r\nzk_watch_count               0\r\nzk_ephemerals_count     3\r\nzk_approximate_data_size          36654\r\nzk_open_file_descriptor_count   33\r\nzk_max_file_descriptor_count     65536\r\n{noformat}\r\n \r\n\r\n \r\n\r\n5) Server logs with related sessions:\r\n{noformat}\r\nOnly found these logs from Server1 related to the sessions (0x162183ea9f70002 and 0x162183ea9f70003):\r\n\r\n2018-03-12 03:28:35,127 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@197] - Accepted socket connection from /10.196.18.60:26775\r\n\r\n2018-03-12 03:28:35,131 [myid:1] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@822] - Connection request from old client /10.196.18.60:26775; will be dropped if server is in r-o mode\r\n\r\n2018-03-12 03:28:35,131 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@868] - Client attempting to establish new session at /10.196.18.60:26775\r\n\r\n2018-03-12 03:28:35,137 [myid:1] - INFO  [CommitProcessor:1:ZooKeeperServer@617] - Established session 0x162183ea9f70002 with negotiated timeout 9000 for client /10.196.18.60:26775\r\n\r\n \r\n2018-03-12 03:30:36,415 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@197] - Accepted socket connection from /10.247.114.70:39260\r\n\r\n2018-03-12 03:30:36,422 [myid:1] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@822] - Connection request from old client /10.247.114.70:39260; will be dropped if server is in r-o mode\r\n\r\n2018-03-12 03:30:36,423 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@868] - Client attempting to establish new session at /10.247.114.70:39260\r\n\r\n2018-03-12 03:30:36,428 [myid:1] - INFO  [CommitProcessor:1:ZooKeeperServer@617] - Established session 0x162183ea9f70003 with negotiated timeout 9000 for client /10.247.114.70:39260\r\n\r\n \r\n2018-03-31 01:29:58,865 [myid:1] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@1007] - Closed socket connection for client /10.247.114.70:39260 which had sessionid 0x162183ea9f70003{noformat}\r\n6) Txn logs on the two ephemeral nodes /brokers/ids/707577499 and /brokers/ids/822712429:\r\n{noformat}\r\n3/11/18 8:28:35 PM PDT session 0x162183ea9f70002 cxid 0x6 zxid 0x10000001b create '/brokers/ids,,v{s{31,s{'world,'anyone}}},F,1\r\n\r\n3/11/18 8:28:35 PM PDT session 0x162183ea9f70002 cxid 0x2c zxid 0x100000028 create '/brokers/ids/707577499,#7b226a6d785f706f7274223a31303130332c2274696d657374616d70223a2231353230383235333135363931222c22686f7374223a22736c6331336e79692e75732e6f7261636c652e636f6d222c2276657273696f6e223a312c22706f7274223a393039327d,v{s{31,s{'world,'anyone}}},T,1\r\n\r\n3/11/18 8:30:36 PM PDT session 0x162183ea9f70003 cxid 0x14 zxid 0x100000030 create '/brokers/ids/822712429,#7b226a6d785f706f7274223a31303130332c2274696d657374616d70223a2231353230383235343336393139222c22686f7374223a22736c6331336e796a2e75732e6f7261636c652e636f6d222c2276657273696f6e223a312c22706f7274223a393039327d,v{s{31,s{'world,'anyone}}},T,2{noformat}\r\n \r\n\r\n7) Additional questions from [~andorm]\r\n{noformat}\r\n1) Why is the session closed, the client closed it or the cluster expired it?\r\n\r\n[Daniel Chan] in this case, the client got killed and we expect the session would be expired by the cluster\r\n\r\n \r\n2) which server was the session attached to - the first (44sec max\r\n\r\nlat) or one of the others? Which server was the leader?\r\n\r\n[Daniel Chan] The sessions creating the ephemeral nodes were attached to Server1 (443 max latency) while Server2 is the leader\r\n\r\n \r\n3) the znode exists on all 4 servers, is that right?\r\n\r\n[Daniel Chan] The cluster has 2 members not 4, and the ephemeral nodes are present on both servers\r\n\r\n {noformat}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12919855","id":"12919855","filename":"zk-3018.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-04-19T18:25:22.448+0000","size":22394758,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12919855/zk-3018.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Ephemeral node not deleted after session is gone","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux 4.1.12-112.14.10.el6uek.x86_64 #2 SMP x86_64 GNU/Linux","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150132/comment/16426516","id":"16426516","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andorm","name":"andorm","key":"andorm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"},"displayName":"Andor Molnar","active":true,"timeZone":"Europe/Budapest"},"body":"[~danielchan] Thanks for opening this jira. It's better to track the investigation here.\r\n\r\nAre you able to verify the issue with the latest stable version (3.4.11 or 3.4.12) by any chance?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andorm","name":"andorm","key":"andorm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"},"displayName":"Andor Molnar","active":true,"timeZone":"Europe/Budapest"},"created":"2018-04-05T06:14:25.876+0000","updated":"2018-04-05T06:14:25.876+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150132/comment/16427576","id":"16427576","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"body":"No, we haven't tried those versions yet.\r\n\r\nWe got two more same issue reported today. \r\n\r\nIs there someone looking into this issue yet? I think it is critical as many developers in the community are using ephemeral nodes in their projects.\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-04-05T20:56:17.593+0000","updated":"2018-04-05T20:56:17.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150132/comment/16438140","id":"16438140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"body":"We have another incident of same issue reported.\r\n\r\nThis session owns this ephemeral node:\r\n\r\n0x162a60381242e0c:\r\n        /consumers/cosStepExecutors/ids/cosStepExecutors_1523203806120_den01fkd.us.oracle.com-1523203806187-7327e8bb\r\n\r\n \r\n\r\nDoing \"stat /consumers/cosStepExecutors/ids/cosStepExecutors_1523203806120_den01fkd.us.oracle.com-1523203806187-7327e8bb\":\r\n\r\nczxid: 40609\r\nmzxid: 40609\r\npzxid: 40609\r\nctime: 1523536225711 (2018-04-12T05:30:25.711-0700)\r\nmtime: 1523536225711 (2018-04-12T05:30:25.711-0700)\r\nversion: 0\r\ncversion: 0\r\naversion: 0\r\nowner: 99824675737316876\r\ndatalen: 123\r\nchildren: 0\r\n\r\n \r\n\r\n\"cons\" indicated the session is still there:\r\n\r\necho cons | nc den01fkd 2181 | grep 162a60381242e0c\r\n /10.196.42.142:22166[1](queued=0,recved=549,sent=549,sid=0x162a60381242e0c,lop=PING,est=1523536225314,to=9000,lcxid=0x8f8c,lzxid=0xd8ed,lresp=1523665779797,llat=0,minlat=0,avglat=0,maxlat=1)\r\n\r\n \r\n\r\nHowever, SessionTracker \"dump\" indicated the session is already expired:\r\n\r\n10 expire at Sat Apr 14 00:15:08 UTC 2018:\r\n        .....\r\n        .....\r\n        0x162a60381242e0c\r\n\r\n \r\n\r\nIt seems session states are not consistent in Zookeeper causing the issue.\r\n\r\n[~andorm], could you please have someone to take a look as zookeeper breaks the ephemeral node behavior?\r\n\r\n \r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-04-14T00:43:53.547+0000","updated":"2018-04-14T00:43:53.547+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150132/comment/16438979","id":"16438979","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"might related to ZOOKEEPER-2919","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2018-04-16T04:41:05.409+0000","updated":"2018-04-16T04:41:05.409+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150132/comment/16443067","id":"16443067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andorm","name":"andorm","key":"andorm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"},"displayName":"Andor Molnar","active":true,"timeZone":"Europe/Budapest"},"body":"[~danielchan]\r\n\r\nDo you see the same behaviour on your servers? e.g. new leader election around session expiration\r\n\r\n...or there's no sign of session expiration in the logs at all?\r\n\r\nIf possible, would you please attach the log files of all your Zk servers?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andorm","name":"andorm","key":"andorm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andorm&avatarId=32935","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andorm&avatarId=32935","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andorm&avatarId=32935","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andorm&avatarId=32935"},"displayName":"Andor Molnar","active":true,"timeZone":"Europe/Budapest"},"created":"2018-04-18T19:24:34.468+0000","updated":"2018-04-18T19:27:09.768+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150132/comment/16444463","id":"16444463","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"body":"[~andorm]\r\n\r\nFor the 2nd incident, it was just a standalone config and so no leader election will occur.\r\n\r\nYes, there was no session expiration in the logs at all for session 0x162a60381242e0c.\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-04-19T17:53:12.759+0000","updated":"2018-04-19T17:53:12.759+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150132/comment/16444568","id":"16444568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"body":"[~andorm]\r\n\r\nUploaded ZK logs (2 servers cluster) for the first incident: [^zk-3018.zip]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danielchan","name":"danielchan","key":"danielchan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel C","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-04-19T18:28:27.071+0000","updated":"2018-04-19T18:28:27.071+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-3018/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3s5of:"}}