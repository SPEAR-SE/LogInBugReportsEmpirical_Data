{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12522975","self":"https://issues.apache.org/jira/rest/api/2/issue/12522975","key":"ZOOKEEPER-1181","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314469","id":"12314469","description":"Kerberos client auth, multi support, deb/rpm pkging.","name":"3.4.0","archived":false,"released":true,"releaseDate":"2011-11-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316644","id":"12316644","description":"Dynamic Reconfig, Remove Watches, Local Session","name":"3.5.0","archived":false,"released":true,"releaseDate":"2014-08-04"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-09-14T00:17:00.493+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Oct 24 10:53:12 UTC 2011","customfield_12310420":"29","customfield_12312320":null,"customfield_12310222":"10002_*:*_3_*:*_3466363289_*|*_1_*:*_3_*:*_15344772_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-10-24T06:47:23.157+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1181/watchers","watchCount":2,"isWatching":false},"created":"2011-09-13T23:38:55.229+0000","customfield_12310192":"-Fixes two findbugs warnings related to holding a lock while sleeping.\n-Addresses Camille's point: merge two almost-identical retry methods into a single retry method.","customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["kerberos","security"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314469","id":"12314469","description":"Kerberos client auth, multi support, deb/rpm pkging.","name":"3.4.0","archived":false,"released":true,"releaseDate":"2011-11-22"}],"issuelinks":[{"id":"12343601","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12343601","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12524795","key":"ZOOKEEPER-1205","self":"https://issues.apache.org/jira/rest/api/2/issue/12524795","fields":{"summary":"Add a unit test for Kerberos Ticket-Granting Ticket (TGT) renewal","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12343105","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12343105","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"12480698","key":"ZOOKEEPER-938","self":"https://issues.apache.org/jira/rest/api/2/issue/12480698","fields":{"summary":"Support Kerberos authentication of clients.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:44.696+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312381","id":"12312381","name":"java client","description":"The java client interface for ZooKeeper"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."}],"timeoriginalestimate":null,"description":"Currently, in Zookeeper trunk, there are two problems with Kerberos TGT renewal:\n\n1. TGTs obtained from a keytab are not refreshed periodically. They should be, just as those from ticket cache are refreshed.\n\n2. Ticket renewal should be retried if it fails. Ticket renewal might fail if two or more separate processes (different JVMs) running as the same user try to renew Kerberos credentials at the same time. \n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12499644","id":"12499644","filename":"ZOOKEEPER-1181.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-19T07:05:26.497+0000","size":25323,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12499644/ZOOKEEPER-1181.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12494526","id":"12494526","filename":"ZOOKEEPER-1181.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-14T21:24:59.312+0000","size":25323,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12494526/ZOOKEEPER-1181.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12494346","id":"12494346","filename":"ZOOKEEPER-1181.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-13T23:49:57.571+0000","size":25747,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12494346/ZOOKEEPER-1181.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"32677","customfield_12312823":null,"summary":"Fix problems with Kerberos TGT renewal","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13104092","id":"13104092","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12494346/ZOOKEEPER-1181.patch\n  against trunk revision 1170365.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/531//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/531//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/531//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-14T00:17:00.493+0000","updated":"2011-09-14T00:17:00.493+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13104517","id":"13104517","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"body":"I wish this was a touch cleaner... aren't reloginFromKeytab and reloginFromTicketCache almost the same method? Can we refactor the retry logic into one place? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-14T14:22:27.266+0000","updated":"2011-09-14T14:22:27.266+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13104680","id":"13104680","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"also qa bot found some findbugs issues. Canceling for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-14T17:20:07.989+0000","updated":"2011-09-14T17:20:07.989+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13104916","id":"13104916","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12494526/ZOOKEEPER-1181.patch\n  against trunk revision 1170458.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/538//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/538//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/538//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-14T21:50:46.636+0000","updated":"2011-09-14T21:50:46.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13105008","id":"13105008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. -1 tests included. The patch doesn't appear to include any new or modified tests.\nbq. Please justify why no new tests are needed for this patch.\nbq. Also please list what manual steps were performed to verify this patch.\n\nHave tested this with a Kerberized HBase/Hadoop cluster on Amazon EC2. Tested with a short Kerberos ticket life (modprinc -maxlife \"5 minutes\") for zookeeper server and clients. Tested with zookeeper server using a keytab and zookeeper client with ticket cache. Ran YCSB on HBase successfully.\n\nI think I might be able to learn Mockito and mock up a Kerberos server for adding additional tests, but would rather defer that to later.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-14T23:44:33.785+0000","updated":"2011-09-14T23:44:33.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13105010","id":"13105010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"This was a one master, 3 regionserver cluster, where the master and 2 of the regionservers ran Quorum Peers.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-14T23:45:56.329+0000","updated":"2011-09-14T23:45:56.329+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13108059","id":"13108059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thkoch","name":"thkoch","key":"thkoch","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thkoch&avatarId=11540","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thkoch&avatarId=11540","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thkoch&avatarId=11540","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thkoch&avatarId=11540"},"displayName":"Thomas Koch","active":true,"timeZone":"Etc/UTC"},"body":"Could you please upload the patch to https://reviews.apache.org/r/new/ for review?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thkoch","name":"thkoch","key":"thkoch","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thkoch&avatarId=11540","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thkoch&avatarId=11540","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thkoch&avatarId=11540","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thkoch&avatarId=11540"},"displayName":"Thomas Koch","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-19T19:00:00.107+0000","updated":"2011-09-19T19:00:00.107+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13108098","id":"13108098","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Thomas, Thanks for your interest! Please see the review here:\n\nhttps://reviews.apache.org/r/1958\n\n-Eugene","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-19T20:04:27.754+0000","updated":"2011-09-19T20:04:27.754+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13112253","id":"13112253","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Patrick, \nI'd like to push for this to be included in 3.4.0. It fixes significant problems with the currently-available Kerberos support in the 3.4.0 branch and trunk.\nThanks for considering it,\nEugene","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-22T00:14:06.291+0000","updated":"2011-09-22T00:14:06.291+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13112813","id":"13112813","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1958/\n-----------------------------------------------------------\n\n(Updated 2011-09-22 18:39:22.010877)\n\n\nReview request for zookeeper.\n\n\nChanges\n-------\n\nAdd link to JIRA.\n\n\nSummary\n-------\n\nCurrently, in Zookeeper trunk, there are two problems with Kerberos TGT renewal:\n\n1. TGTs obtained from a keytab are not refreshed periodically. They should be, just as those from ticket cache are refreshed.\n\n2. Ticket renewal should be retried if it fails. Ticket renewal might fail if two or more separate processes (different JVMs) running as the same user try to renew Kerberos credentials at the same time.\n\n\nThis addresses bug ZOOKEEPER-1181.\n    https://issues.apache.org/jira/browse/ZOOKEEPER-1181\n\n\nDiffs\n-----\n\n  src/java/main/org/apache/zookeeper/Login.java de64d0d \n\nDiff: https://reviews.apache.org/r/1958/diff\n\n\nTesting\n-------\n\nHave tested this with a Kerberized HBase/Hadoop cluster on Amazon EC2. Tested with a short Kerberos ticket life (modprinc -maxlife \"5 minutes\") for zookeeper server and clients. Tested with zookeeper server using a keytab and zookeeper client with ticket cache. Ran YCSB on HBase successfully on a one master, 3 regionserver cluster, where the master and 2 of the regionservers ran Quorum Peers.\n\n\nThanks,\n\nEugene\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T18:39:26.486+0000","updated":"2011-09-22T18:39:26.486+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13115144","id":"13115144","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Eugene,\n We should write some unit tests for this. I am fine checking this into 3.4 for now. Can you please create a ticket to add a unit test for this? Mockito would be very helpful here.\n\nMight make some changes to the patch to get this in ASAP.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-27T02:36:24.477+0000","updated":"2011-09-27T02:36:24.477+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13115218","id":"13115218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Mahadev, good idea; I added ZOOKEEPER-1205 for unit tests for this bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-09-27T05:06:48.173+0000","updated":"2011-09-27T05:06:48.173+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13130420","id":"13130420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Reuploading the same patch to run thorugh hudson.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-19T07:05:26.594+0000","updated":"2011-10-19T07:05:26.594+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13130436","id":"13130436","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12499644/ZOOKEEPER-1181.patch\n  against trunk revision 1185994.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/625//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/625//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/625//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-19T07:33:27.861+0000","updated":"2011-10-19T07:33:27.861+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13133857","id":"13133857","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"Just committed this. Hope to see test cases soon for these classes. Thanks Eugene!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-24T06:47:23.248+0000","updated":"2011-10-24T06:47:23.248+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12522975/comment/13133974","id":"13133974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in ZooKeeper-trunk #1342 (See [https://builds.apache.org/job/ZooKeeper-trunk/1342/])\n    ZOOKEEPER-1181. Fix problems with Kerberos TGT renewal. (Eugene Koontz via mahadev)\n\nmahadev : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1188033\nFiles : \n* /zookeeper/trunk/CHANGES.txt\n* /zookeeper/trunk/src/java/main/org/apache/zookeeper/Login.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-24T10:53:12.642+0000","updated":"2011-10-24T10:53:12.642+0000"}],"maxResults":16,"total":16,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1181/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i05yfj:"}}