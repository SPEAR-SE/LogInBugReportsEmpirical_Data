{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13012249","self":"https://issues.apache.org/jira/rest/api/2/issue/13012249","key":"ZOOKEEPER-2615","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343268","id":"12343268","description":"Beta release against 3.5 branch","name":"3.5.5","archived":false,"released":false}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-10-14T16:50:57.108+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Oct 28 13:26:29 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2615/watchers","watchCount":7,"isWatching":false},"created":"2016-10-14T04:59:03.651+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323310","id":"12323310","description":"Fix release against 3.4 branch","name":"3.4.6","archived":false,"released":true,"releaseDate":"2014-03-10"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-05-10T20:09:12.526+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."}],"timeoriginalestimate":null,"description":"The same issue (https://issues.apache.org/jira/browse/ZOOKEEPER-1382) still can be found even with zookeeper 3.4.6.\n\nthis issue cause our production zookeeper cluster leak about 1 million watchs, after restart the server one by one, the watch count decrease to only about 40000.\n\nI can reproduce the issue on my mac,here it is:\n------------------------------------------------------------------------\n\npguodeMacBook-Air:bin pguo$ echo srvr | nc localhost 6181\nZookeeper version: 3.4.6-1569965, built on 02/20/2014 09:09 GMT\nLatency min/avg/max: 0/1156/128513\nReceived: 539\nSent: 531\nConnections: 1\nOutstanding: 0\nZxid: 0x100000037\nMode: follower\nNode count: 5\n------------------------\npguodeMacBook-Air:bin pguo$ echo cons | nc localhost 6181\n /127.0.0.1:55759[1](queued=0,recved=5,sent=5,sid=0x157be2732d0000e,lop=PING,est=1476372631116,to=15000,lcxid=0x1,lzxid=0xffffffffffffffff,lresp=1476372646260,llat=8,minlat=0,avglat=6,maxlat=17)\n /0:0:0:0:0:0:0:1:55767[0](queued=0,recved=1,sent=0)\n\n------------------------\npguodeMacBook-Air:bin pguo$ echo wchp | nc localhost 6181\n/curator_exists_watch\n       \t0x357be48e4d90007\n       \t0x357be48e4d90009\n       \t0x157be2732d0000e\n\n\nas above 4-letter's report shows, \t0x357be48e4d90007 and 0x357be48e4d90009 are leaked after the two sessions expired ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Zookeeper server holds onto dead/expired session ids in the watch data structures","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guoping.gp","name":"guoping.gp","key":"guoping.gp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guoping.gp","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guoping.gp","name":"guoping.gp","key":"guoping.gp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guoping.gp","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15574296","id":"15574296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guoping.gp","name":"guoping.gp","key":"guoping.gp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guoping.gp","active":true,"timeZone":"Etc/UTC"},"body":"REPRODUCE TEST CASE STEP BY STEP\n====================================\n1).  start zookeeper cluster, says server1(localhost:6181), server2(localhost:4181), server3(localhost:2181)\n    let's assume now server2 is the LEADER.\n\n2). use zkCli.sh create a persistence node /curator_exists_watch\n\n3). use Curator Framework2.9.1 to create a simple Java Client Application,  as following:\n\n*****\n\nimport org.apache.curator.framework.CuratorFramework;\nimport org.apache.curator.framework.CuratorFrameworkFactory;\nimport org.apache.curator.framework.api.CuratorWatcher;\nimport org.apache.curator.retry.ExponentialBackoffRetry;\nimport org.apache.zookeeper.WatchedEvent;\n\npublic class ExistingWatchDemo {\n\n\tpublic static void main(String[] args) throws Exception {\n\n\t\tCuratorFrameworkFactory.Builder builder = CuratorFrameworkFactory.builder();\n\t\tbuilder = builder.connectString(\"localhost:2181,localhost:6181\")\n                                         .sessionTimeoutMs(15000)\n\t\t\t\t         .connectionTimeoutMs(10000)\n                                        .retryPolicy(new ExponentialBackoffRetry(5000, Integer.MAX_VALUE));\n\t\t\n\t\tfinal CuratorFramework zkClient = builder.build();\n\n\t\tzkClient.start();\n\n\t\tCuratorWatcher watcher = new CuratorWatcher() {\n\n\t\t\tpublic void process(WatchedEvent event) throws Exception {\n                                 System.out.println(\"received event \" + event);\n                                 System.out.println(\"watch again ...\");\n                                zkClient.checkExists().usingWatcher(this).forPath(\"/curator_exists_watch\");\n\t\t\t}\n\t\t\t\n\t\t};\n\t\t\n\t\tzkClient.checkExists().usingWatcher(watcher).forPath(\"/curator_exists_watch\");\n\n\t\tThread.sleep(600 * 1000);\n\n\t}\n\n}\n\n*****\n\nto stay us to reproduce in more convenience, here we provide only 2 servers in the connection string instead of 3 both, says as server1(FOLLOWING) server3(FOLLOWING)\n\n4).  breakpoint at 2 places: \n \n    FinalRequestProcessor.java: line 303 :         zks.getZKDatabase().setWatches(relativeZxid, \n    NIOServerCnxn.java: line 966:                     synchronized(factory.cnxns){\n\n\n5).  running the client app ExistingWatchDemo.java, let say the client application connection to server3(2181)\n\n6). use the IDE make a remote debug session connect to another server of the connection string which we provided, here server1(6181)\n\n7). now kill -STOP server3(2181), the client app will find the server hang and reconnect to  server1(6181), we can confirm the reconnect in\nthe client's log:\n\n---------\n016-10-14 13:31:21,505 [myid:] - INFO  [main-SendThread(localhost:2181):ClientCnxn$SendThread@1096] - Client session timed out, have not heard from server in 3754ms for sessionid 0x357c1a4462b000e, closing socket connection and attempting reconnect\n2016-10-14 13:31:22,389 [myid:] - INFO  [main-SendThread(localhost:6181):ClientCnxn$SendThread@975] - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:6181. Will not attempt to authenticate using SASL (unknown error)\n2016-10-14 13:31:22,392 [myid:] - INFO  [main-SendThread(localhost:6181):ClientCnxn$SendThread@852] - Socket connection established to localhost/0:0:0:0:0:0:0:1:6181, initiating session\n2016-10-14 13:31:22,392 [myid:] - DEBUG [main-SendThread(localhost:6181):ClientCnxn$SendThread@892] - Session establishment request sent on localhost/0:0:0:0:0:0:0:1:6181\n2016-10-14 13:31:22,407 [myid:] - INFO  [main-SendThread(localhost:6181):ClientCnxn$SendThread@1235] - Session establishment complete on server localhost/0:0:0:0:0:0:0:1:6181, sessionid = 0x357c1a4462b000e, negotiated timeout = 15000\n---------\n\nthe reconnect will hit the breakpoint FinalRequestProcessor.java: line 303 as following:\n\nThread [CommitProcessor:1] (Suspended (breakpoint at line 303 in FinalRequestProcessor))\t\n\tFinalRequestProcessor.processRequest(Request) line: 303\t\n\tCommitProcessor.run() line: 74\t\n\n8). now kill the process of  the client app, kill -9 <pid of client app>, this will let us another breakpoint hit, as following\n \nDaemon Thread [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:6181] (Suspended (breakpoint at line 966 in NIOServerCnxn))\t\n\tNIOServerCnxn.close() line: 966\t\n\tNIOServerCnxn.doIO(SelectionKey) line: 360\t\n\tNIOServerCnxnFactory.run() line: 208\t\n\tThread.run() line: 745\t\n\n9).  now resume the breakpoint(NIOServerCnxn:966) in step 8, after that, then resume the breakpoint (FinalRequestProcessor:303) in step 7\n\n10). now use wchp and cons to check the leak watch, as following shows\n\npguodeMacBook-Air:bin pguo$ echo wchp | nc localhost 6181\n/curator_exists_watch\n       \t0x357c1a4462b000e\n\npguodeMacBook-Air:bin pguo$ echo cons | nc localhost 6181\n /0:0:0:0:0:0:0:1:61702[0](queued=0,recved=1,sent=0)\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guoping.gp","name":"guoping.gp","key":"guoping.gp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guoping.gp","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-14T05:39:39.084+0000","updated":"2016-10-14T05:41:40.989+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15575840","id":"15575840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"body":"Looking","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-14T16:50:57.108+0000","updated":"2016-10-14T16:50:57.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15575936","id":"15575936","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"body":"OK yup. This is a different race than what we fixed in ZOOKEEPER-1382. Because we don't check to see if the watch we're setting is still on a live connection when we set it, we can totally race to set a watch vs deleting watches from a connection.\n\nThinking.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-14T17:27:55.449+0000","updated":"2016-10-14T17:27:55.449+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15576271","id":"15576271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"body":"So it looks like all of the watches (not just the watches resent by the client) can suffer from a race between closing the client and clearing the watches for that connection and actually storing the watches in the data structure. This is also a bug in trunk. I'm playing around with it (and have the world's ugliest hacks to repro in tests + judicious thread.sleeps) but heads-up to folks ([~phunt] [~fpj] etc)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-14T19:31:41.634+0000","updated":"2016-10-14T19:31:41.634+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15580083","id":"15580083","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"body":"Thanks for having a look, [~fournc]. I think you're right about the race between closing the connection and setting new watches. When we expire the session, that race goes away because the {{closeSession} and {{setWatches}} are serialized in the request processor pipeline, but not for closing connections.\n\nThere is one related point I'm unsure about. When I was looking at the code, I noticed that only NIO close invokes {{ZooKeeperServer.removeCnxn}} -> {{ZKDatabase.removeCnxn}} -> {{DataTree.removeCnxn}}, which remove the watches. I'm wondering what that's the case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fpj","name":"fpj","key":"fpj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fpj&avatarId=16030","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fpj&avatarId=16030","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fpj&avatarId=16030","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fpj&avatarId=16030"},"displayName":"Flavio Junqueira","active":true,"timeZone":"Europe/Berlin"},"created":"2016-10-16T14:48:47.603+0000","updated":"2016-10-16T14:48:47.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15580096","id":"15580096","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"body":"I noticed that as well. Does anyone actually use the Netty implementations in production?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-16T14:58:43.285+0000","updated":"2016-10-16T14:58:43.285+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15580107","id":"15580107","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"body":"https://issues.apache.org/jira/plugins/servlet/mobile#issue/ZOOKEEPER-2358\n\nThe issue above addresses Netty issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eribeiro","name":"eribeiro","key":"eribeiro","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eribeiro&avatarId=16169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eribeiro&avatarId=16169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eribeiro&avatarId=16169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eribeiro&avatarId=16169"},"displayName":"Edward Ribeiro","active":true,"timeZone":"America/Sao_Paulo"},"created":"2016-10-16T15:08:20.292+0000","updated":"2016-10-16T15:08:20.292+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15615182","id":"15615182","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guoping.gp","name":"guoping.gp","key":"guoping.gp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guoping.gp","active":true,"timeZone":"Etc/UTC"},"body":"Is there any recommended fix option on this issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guoping.gp","name":"guoping.gp","key":"guoping.gp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guoping.gp","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-28T11:52:37.288+0000","updated":"2016-10-28T11:52:37.288+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13012249/comment/15615399","id":"15615399","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"body":"Because watches are one-time triggers, you could try triggering the watch by removing, adding, or changing the data in the watched nodes. I believe that should remove all set watches. But there's no easy fix that I can see.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fournc","name":"fournc","key":"fournc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Camille Fournier","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-28T13:26:29.975+0000","updated":"2016-10-28T13:26:29.975+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2615/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i34vnr:"}}