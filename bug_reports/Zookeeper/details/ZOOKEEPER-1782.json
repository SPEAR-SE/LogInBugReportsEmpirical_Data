{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12672385","self":"https://issues.apache.org/jira/rest/api/2/issue/12672385","key":"ZOOKEEPER-1782","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340141","id":"12340141","description":"Beta release against 3.5 branch","name":"3.5.4","archived":false,"released":true,"releaseDate":"2018-05-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-10-04T20:11:15.595+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 23 17:45:43 UTC 2017","customfield_12310420":"352012","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1015016_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_117323954031","customfield_12312321":null,"resolutiondate":"2017-06-23T16:40:16.554+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1782/watchers","watchCount":6,"isWatching":false},"created":"2013-10-04T18:24:07.577+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321883","id":"12321883","description":"Fix release against 3.4 branch","name":"3.4.5","archived":false,"released":true,"releaseDate":"2012-11-18"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-06-23T17:45:43.113+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"The zookeeper.superUser system property does not fully grant super user privileges, like zookeeper.DigestAuthenticationProvider.superDigest does.\n\nzookeeper.superUser only has as many privileges as the sasl ACLs on the znode being accessed.  This means that if a znode only has digest ACLs zookeeper.superUser is ignored.  Or if a znode has a single sasl ACL that only has read privileges zookeeper.superUser only has read privileges.\n\nThe reason for this is that SASLAuthenticationProvider implements the superUser check in the matches method, instead of having the super user include a new Id(\"super\",\"\") as Digest does.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12606872","id":"12606872","filename":"zk-1782.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2013-10-04T19:39:19.229+0000","size":6898,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12606872/zk-1782.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12606855","id":"12606855","filename":"zk-1782.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2013-10-04T18:27:36.925+0000","size":1818,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12606855/zk-1782.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"352300","customfield_12312823":null,"summary":"zookeeper.superUser is not as super as superDigest","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/13786456","id":"13786456","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"This is a simple patch that should fix the issue.  I still need to add in some unit tests, but I am not super familiar with the code so I thought I would throw this up first to get feedback on it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2013-10-04T18:27:36.929+0000","updated":"2013-10-04T18:27:36.929+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/13786543","id":"13786543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"This version includes a unit test.  The test fails without the update and works with it.\n\nI have run all of the java unit tests and they all pass.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2013-10-04T19:39:19.233+0000","updated":"2013-10-04T19:39:19.233+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/13786568","id":"13786568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12606872/zk-1782.patch\n  against trunk revision 1529013.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 2 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1640//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1640//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1640//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-04T20:11:15.595+0000","updated":"2013-10-04T20:11:15.595+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/13788796","id":"13788796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12606872/zk-1782.patch\n  against trunk revision 1530110.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 2 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1650//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1650//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1650//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-08T01:13:08.115+0000","updated":"2013-10-08T01:13:08.115+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16049222","id":"16049222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user revans2 opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/282\n\n    ZOOKEEPER-1782: Let a SASL super user be super\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/revans2/zookeeper ZOOKEEPER-1782\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/282.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #282\n    \n----\ncommit 62ee0bcedbbbf34b6baf6effac24765d714928cc\nAuthor: Robert Evans <evans@yahoo-inc.com>\nDate:   2017-06-14T14:13:03Z\n\n    ZOOKEEPER-1782: Let a SASL super user be super\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-14T14:14:24.111+0000","updated":"2017-06-14T14:14:24.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16049236","id":"16049236","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 2 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/788//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/788//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/788//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-14T14:34:53.412+0000","updated":"2017-06-14T14:34:53.412+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16050855","id":"16050855","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r122267787\n  \n    --- Diff: src/java/test/org/apache/zookeeper/test/SaslSuperUserTest.java ---\n    @@ -0,0 +1,118 @@\n    +/**\n    + * Licensed to the Apache Software Foundation (ASF) under one\n    + * or more contributor license agreements.  See the NOTICE file\n    + * distributed with this work for additional information\n    + * regarding copyright ownership.  The ASF licenses this file\n    + * to you under the Apache License, Version 2.0 (the\n    + * \"License\"); you may not use this file except in compliance\n    + * with the License.  You may obtain a copy of the License at\n    + *\n    + *     http://www.apache.org/licenses/LICENSE-2.0\n    + *\n    + * Unless required by applicable law or agreed to in writing, software\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    + * See the License for the specific language governing permissions and\n    + * limitations under the License.\n    + */\n    +\n    +package org.apache.zookeeper.test;\n    +\n    +import java.io.File;\n    +import java.io.FileWriter;\n    +import java.io.IOException;\n    +import java.util.ArrayList;\n    +import java.util.Arrays;\n    +import java.util.List;\n    +import java.util.concurrent.atomic.AtomicInteger;\n    +\n    +import org.apache.zookeeper.CreateMode;\n    +import org.apache.zookeeper.KeeperException;\n    +import org.apache.zookeeper.TestableZooKeeper;\n    +import org.apache.zookeeper.WatchedEvent;\n    +import org.apache.zookeeper.ZooKeeper;\n    +import org.apache.zookeeper.Watcher.Event.KeeperState;\n    +import org.apache.zookeeper.ZooDefs.Ids;\n    +import org.apache.zookeeper.ZooDefs.Perms;\n    +import org.apache.zookeeper.data.ACL;\n    +import org.apache.zookeeper.data.Id;\n    +import org.apache.zookeeper.server.auth.DigestAuthenticationProvider;\n    +import org.junit.Assert;\n    +import org.junit.Test;\n    +\n    +public class SaslSuperUserTest extends ClientBase {\n    +    private static Id otherSaslUser = new Id (\"sasl\", \"joe\");\n    +    private static Id otherDigestUser;\n    + \n    +    static {\n    +        System.setProperty(\"zookeeper.authProvider.1\",\"org.apache.zookeeper.server.auth.SASLAuthenticationProvider\");\n    +\n    +        try {\n    +            File tmpDir = createTmpDir();\n    +            File saslConfFile = new File(tmpDir, \"jaas.conf\");\n    +            FileWriter fwriter = new FileWriter(saslConfFile);\n    +\n    +            fwriter.write(\"\" +\n    +                    \"Server {\\n\" +\n    +                    \"          org.apache.zookeeper.server.auth.DigestLoginModule required\\n\" +\n    +                    \"          user_super_duper=\\\"test\\\";\\n\" +\n    +                    \"};\\n\" +\n    +                    \"Client {\\n\" +\n    +                    \"       org.apache.zookeeper.server.auth.DigestLoginModule required\\n\" +\n    +                    \"       username=\\\"super_duper\\\"\\n\" +\n    +                    \"       password=\\\"test\\\";\\n\" +\n    +                    \"};\" + \"\\n\");\n    +            fwriter.close();\n    +            System.setProperty(\"java.security.auth.login.config\",saslConfFile.getAbsolutePath());\n    +            System.setProperty(\"zookeeper.superUser\",\"super_duper\");\n    +            otherDigestUser = new Id (\"digest\", DigestAuthenticationProvider.generateDigest(\"jack:jack\"));\n    +        }\n    +        catch (IOException e) {\n    +            // could not create tmp directory to hold JAAS conf file : test will fail now.\n    +        }\n    +        catch (Exception e) {\n    +           throw new RuntimeException(e); //This should never happen, but if it does we still blow up\n    +        }\n    +    }\n    +\n    +    private AtomicInteger authFailed = new AtomicInteger(0);\n    --- End diff --\n    \n    Do we need this? Seems it's not used anywhere.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-15T17:49:23.853+0000","updated":"2017-06-15T17:49:23.853+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16050858","id":"16050858","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r122268144\n  \n    --- Diff: src/java/test/org/apache/zookeeper/test/SaslSuperUserTest.java ---\n    @@ -0,0 +1,118 @@\n    +/**\n    + * Licensed to the Apache Software Foundation (ASF) under one\n    + * or more contributor license agreements.  See the NOTICE file\n    + * distributed with this work for additional information\n    + * regarding copyright ownership.  The ASF licenses this file\n    + * to you under the Apache License, Version 2.0 (the\n    + * \"License\"); you may not use this file except in compliance\n    + * with the License.  You may obtain a copy of the License at\n    + *\n    + *     http://www.apache.org/licenses/LICENSE-2.0\n    + *\n    + * Unless required by applicable law or agreed to in writing, software\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    + * See the License for the specific language governing permissions and\n    + * limitations under the License.\n    + */\n    +\n    +package org.apache.zookeeper.test;\n    +\n    +import java.io.File;\n    +import java.io.FileWriter;\n    +import java.io.IOException;\n    +import java.util.ArrayList;\n    +import java.util.Arrays;\n    +import java.util.List;\n    +import java.util.concurrent.atomic.AtomicInteger;\n    +\n    +import org.apache.zookeeper.CreateMode;\n    +import org.apache.zookeeper.KeeperException;\n    +import org.apache.zookeeper.TestableZooKeeper;\n    +import org.apache.zookeeper.WatchedEvent;\n    +import org.apache.zookeeper.ZooKeeper;\n    +import org.apache.zookeeper.Watcher.Event.KeeperState;\n    +import org.apache.zookeeper.ZooDefs.Ids;\n    +import org.apache.zookeeper.ZooDefs.Perms;\n    +import org.apache.zookeeper.data.ACL;\n    +import org.apache.zookeeper.data.Id;\n    +import org.apache.zookeeper.server.auth.DigestAuthenticationProvider;\n    +import org.junit.Assert;\n    +import org.junit.Test;\n    +\n    +public class SaslSuperUserTest extends ClientBase {\n    +    private static Id otherSaslUser = new Id (\"sasl\", \"joe\");\n    +    private static Id otherDigestUser;\n    + \n    +    static {\n    +        System.setProperty(\"zookeeper.authProvider.1\",\"org.apache.zookeeper.server.auth.SASLAuthenticationProvider\");\n    +\n    +        try {\n    +            File tmpDir = createTmpDir();\n    +            File saslConfFile = new File(tmpDir, \"jaas.conf\");\n    +            FileWriter fwriter = new FileWriter(saslConfFile);\n    +\n    +            fwriter.write(\"\" +\n    +                    \"Server {\\n\" +\n    +                    \"          org.apache.zookeeper.server.auth.DigestLoginModule required\\n\" +\n    +                    \"          user_super_duper=\\\"test\\\";\\n\" +\n    +                    \"};\\n\" +\n    +                    \"Client {\\n\" +\n    +                    \"       org.apache.zookeeper.server.auth.DigestLoginModule required\\n\" +\n    +                    \"       username=\\\"super_duper\\\"\\n\" +\n    +                    \"       password=\\\"test\\\";\\n\" +\n    +                    \"};\" + \"\\n\");\n    +            fwriter.close();\n    +            System.setProperty(\"java.security.auth.login.config\",saslConfFile.getAbsolutePath());\n    +            System.setProperty(\"zookeeper.superUser\",\"super_duper\");\n    +            otherDigestUser = new Id (\"digest\", DigestAuthenticationProvider.generateDigest(\"jack:jack\"));\n    +        }\n    +        catch (IOException e) {\n    +            // could not create tmp directory to hold JAAS conf file : test will fail now.\n    +        }\n    +        catch (Exception e) {\n    +           throw new RuntimeException(e); //This should never happen, but if it does we still blow up\n    +        }\n    +    }\n    +\n    +    private AtomicInteger authFailed = new AtomicInteger(0);\n    +   \n    +    @Override\n    +    protected TestableZooKeeper createClient(String hp)\n    +    throws IOException, InterruptedException\n    +    {\n    +        MyWatcher watcher = new MyWatcher();\n    +        return createClient(watcher, hp);\n    +    }\n    +\n    +    private class MyWatcher extends CountdownWatcher {\n    +        @Override\n    +        public synchronized void process(WatchedEvent event) {\n    +            if (event.getState() == KeeperState.AuthFailed) {\n    +                authFailed.incrementAndGet();\n    +            }\n    +            else {\n    +                super.process(event);\n    +            }\n    +        }\n    +    }\n    +\n    +    @Test\n    +    public void testSuperIsSuper() throws Exception {\n    --- End diff --\n    \n    This test does not verify anything. Maybe put an assert in a catch block to indicate no auth error should happen during these operations?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-15T17:50:44.737+0000","updated":"2017-06-15T17:50:44.737+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16050859","id":"16050859","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r122268277\n  \n    --- Diff: src/java/test/org/apache/zookeeper/test/SaslSuperUserTest.java ---\n    @@ -0,0 +1,118 @@\n    +/**\n    + * Licensed to the Apache Software Foundation (ASF) under one\n    + * or more contributor license agreements.  See the NOTICE file\n    + * distributed with this work for additional information\n    + * regarding copyright ownership.  The ASF licenses this file\n    + * to you under the Apache License, Version 2.0 (the\n    + * \"License\"); you may not use this file except in compliance\n    + * with the License.  You may obtain a copy of the License at\n    + *\n    + *     http://www.apache.org/licenses/LICENSE-2.0\n    + *\n    + * Unless required by applicable law or agreed to in writing, software\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    + * See the License for the specific language governing permissions and\n    + * limitations under the License.\n    + */\n    +\n    +package org.apache.zookeeper.test;\n    +\n    +import java.io.File;\n    +import java.io.FileWriter;\n    +import java.io.IOException;\n    +import java.util.ArrayList;\n    +import java.util.Arrays;\n    +import java.util.List;\n    +import java.util.concurrent.atomic.AtomicInteger;\n    +\n    +import org.apache.zookeeper.CreateMode;\n    +import org.apache.zookeeper.KeeperException;\n    +import org.apache.zookeeper.TestableZooKeeper;\n    +import org.apache.zookeeper.WatchedEvent;\n    +import org.apache.zookeeper.ZooKeeper;\n    +import org.apache.zookeeper.Watcher.Event.KeeperState;\n    +import org.apache.zookeeper.ZooDefs.Ids;\n    +import org.apache.zookeeper.ZooDefs.Perms;\n    +import org.apache.zookeeper.data.ACL;\n    +import org.apache.zookeeper.data.Id;\n    +import org.apache.zookeeper.server.auth.DigestAuthenticationProvider;\n    +import org.junit.Assert;\n    +import org.junit.Test;\n    +\n    +public class SaslSuperUserTest extends ClientBase {\n    +    private static Id otherSaslUser = new Id (\"sasl\", \"joe\");\n    +    private static Id otherDigestUser;\n    + \n    +    static {\n    +        System.setProperty(\"zookeeper.authProvider.1\",\"org.apache.zookeeper.server.auth.SASLAuthenticationProvider\");\n    +\n    +        try {\n    +            File tmpDir = createTmpDir();\n    +            File saslConfFile = new File(tmpDir, \"jaas.conf\");\n    +            FileWriter fwriter = new FileWriter(saslConfFile);\n    +\n    +            fwriter.write(\"\" +\n    +                    \"Server {\\n\" +\n    +                    \"          org.apache.zookeeper.server.auth.DigestLoginModule required\\n\" +\n    +                    \"          user_super_duper=\\\"test\\\";\\n\" +\n    +                    \"};\\n\" +\n    +                    \"Client {\\n\" +\n    +                    \"       org.apache.zookeeper.server.auth.DigestLoginModule required\\n\" +\n    +                    \"       username=\\\"super_duper\\\"\\n\" +\n    +                    \"       password=\\\"test\\\";\\n\" +\n    +                    \"};\" + \"\\n\");\n    +            fwriter.close();\n    +            System.setProperty(\"java.security.auth.login.config\",saslConfFile.getAbsolutePath());\n    +            System.setProperty(\"zookeeper.superUser\",\"super_duper\");\n    +            otherDigestUser = new Id (\"digest\", DigestAuthenticationProvider.generateDigest(\"jack:jack\"));\n    +        }\n    +        catch (IOException e) {\n    +            // could not create tmp directory to hold JAAS conf file : test will fail now.\n    +        }\n    +        catch (Exception e) {\n    +           throw new RuntimeException(e); //This should never happen, but if it does we still blow up\n    +        }\n    +    }\n    +\n    +    private AtomicInteger authFailed = new AtomicInteger(0);\n    +   \n    +    @Override\n    +    protected TestableZooKeeper createClient(String hp)\n    +    throws IOException, InterruptedException\n    +    {\n    +        MyWatcher watcher = new MyWatcher();\n    +        return createClient(watcher, hp);\n    +    }\n    +\n    +    private class MyWatcher extends CountdownWatcher {\n    +        @Override\n    +        public synchronized void process(WatchedEvent event) {\n    +            if (event.getState() == KeeperState.AuthFailed) {\n    +                authFailed.incrementAndGet();\n    +            }\n    +            else {\n    +                super.process(event);\n    +            }\n    +        }\n    +    }\n    +\n    +    @Test\n    +    public void testSuperIsSuper() throws Exception {\n    +        ZooKeeper zk = createClient();\n    +        try {\n    +            zk.create(\"/digest_read\", null, Arrays.asList(new ACL(Perms.READ, otherDigestUser)), CreateMode.PERSISTENT);\n    +            zk.create(\"/digest_read/sub\", null, Arrays.asList(new ACL(Perms.READ, otherDigestUser)), CreateMode.PERSISTENT);\n    +            zk.create(\"/sasl_read\", null, Arrays.asList(new ACL(Perms.READ, otherSaslUser)), CreateMode.PERSISTENT);\n    +            zk.create(\"/sasl_read/sub\", null, Arrays.asList(new ACL(Perms.READ, otherSaslUser)), CreateMode.PERSISTENT);\n    +            zk.delete(\"/digest_read/sub\", -1);\n    +            zk.delete(\"/digest_read\", -1);\n    +            zk.delete(\"/sasl_read/sub\", -1);\n    +            zk.delete(\"/sasl_read\", -1);\n    +            Thread.sleep(1000);\n    --- End diff --\n    \n    Can this sleep be removed?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-15T17:51:21.013+0000","updated":"2017-06-15T17:51:21.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16052818","id":"16052818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/282\n  \n    @hanm Thanks for the review.  I think I have addressed all of your review comments.  I originally put the patch up in 2013 and I have not touched it since so I honestly don't remember a lot about why I made the test that way to begin with.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-17T12:57:13.197+0000","updated":"2017-06-17T12:57:13.197+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16052823","id":"16052823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 2 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/797//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/797//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/797//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-17T13:06:56.560+0000","updated":"2017-06-17T13:06:56.560+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16053136","id":"16053136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arshadmohammad commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r122586367\n  \n    --- Diff: src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java ---\n    @@ -38,11 +38,6 @@ public String getScheme() {\n         }\n     \n         public boolean matches(String id,String aclExpr) {\n    -        if (System.getProperty(\"zookeeper.superUser\") != null) {\n    -            if (id.equals(System.getProperty(\"zookeeper.superUser\")) || id.equals(aclExpr)) {\n    -              return true;\n    -            }\n    -        }\n             if ((id.equals(\"super\") || id.equals(aclExpr))) {\n    --- End diff --\n    \n    I think we should remove (id.equals(\"super\") also. Lets have only one way being super user.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-18T09:30:42.938+0000","updated":"2017-06-18T09:30:42.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16053137","id":"16053137","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arshadmohammad commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r122586398\n  \n    --- Diff: src/java/test/org/apache/zookeeper/test/SaslSuperUserTest.java ---\n    @@ -0,0 +1,118 @@\n    +/**\n    + * Licensed to the Apache Software Foundation (ASF) under one\n    + * or more contributor license agreements.  See the NOTICE file\n    + * distributed with this work for additional information\n    + * regarding copyright ownership.  The ASF licenses this file\n    + * to you under the Apache License, Version 2.0 (the\n    + * \"License\"); you may not use this file except in compliance\n    + * with the License.  You may obtain a copy of the License at\n    + *\n    + *     http://www.apache.org/licenses/LICENSE-2.0\n    + *\n    + * Unless required by applicable law or agreed to in writing, software\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    + * See the License for the specific language governing permissions and\n    + * limitations under the License.\n    + */\n    +\n    +package org.apache.zookeeper.test;\n    +\n    +import java.io.File;\n    +import java.io.FileWriter;\n    +import java.io.IOException;\n    +import java.util.ArrayList;\n    +import java.util.Arrays;\n    +import java.util.List;\n    +import java.util.concurrent.atomic.AtomicInteger;\n    +\n    +import org.apache.zookeeper.CreateMode;\n    +import org.apache.zookeeper.KeeperException;\n    +import org.apache.zookeeper.TestableZooKeeper;\n    +import org.apache.zookeeper.WatchedEvent;\n    +import org.apache.zookeeper.ZooKeeper;\n    +import org.apache.zookeeper.Watcher.Event.KeeperState;\n    +import org.apache.zookeeper.ZooDefs.Ids;\n    --- End diff --\n    \n    The import org.apache.zookeeper.ZooDefs.Ids is never used.\n    There are many other unused imports as well\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-18T09:32:12.682+0000","updated":"2017-06-18T09:32:12.682+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16053139","id":"16053139","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arshadmohammad commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r122586475\n  \n    --- Diff: src/java/test/org/apache/zookeeper/test/SaslSuperUserTest.java ---\n    @@ -0,0 +1,118 @@\n    +/**\n    + * Licensed to the Apache Software Foundation (ASF) under one\n    + * or more contributor license agreements.  See the NOTICE file\n    + * distributed with this work for additional information\n    + * regarding copyright ownership.  The ASF licenses this file\n    + * to you under the Apache License, Version 2.0 (the\n    + * \"License\"); you may not use this file except in compliance\n    + * with the License.  You may obtain a copy of the License at\n    + *\n    + *     http://www.apache.org/licenses/LICENSE-2.0\n    + *\n    + * Unless required by applicable law or agreed to in writing, software\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    + * See the License for the specific language governing permissions and\n    + * limitations under the License.\n    + */\n    +\n    +package org.apache.zookeeper.test;\n    +\n    +import java.io.File;\n    +import java.io.FileWriter;\n    +import java.io.IOException;\n    +import java.util.ArrayList;\n    +import java.util.Arrays;\n    +import java.util.List;\n    +import java.util.concurrent.atomic.AtomicInteger;\n    +\n    +import org.apache.zookeeper.CreateMode;\n    +import org.apache.zookeeper.KeeperException;\n    +import org.apache.zookeeper.TestableZooKeeper;\n    +import org.apache.zookeeper.WatchedEvent;\n    +import org.apache.zookeeper.ZooKeeper;\n    +import org.apache.zookeeper.Watcher.Event.KeeperState;\n    +import org.apache.zookeeper.ZooDefs.Ids;\n    +import org.apache.zookeeper.ZooDefs.Perms;\n    +import org.apache.zookeeper.data.ACL;\n    +import org.apache.zookeeper.data.Id;\n    +import org.apache.zookeeper.server.auth.DigestAuthenticationProvider;\n    +import org.junit.Assert;\n    +import org.junit.Test;\n    +\n    +public class SaslSuperUserTest extends ClientBase {\n    +    private static Id otherSaslUser = new Id (\"sasl\", \"joe\");\n    +    private static Id otherDigestUser;\n    + \n    +    static {\n    +        System.setProperty(\"zookeeper.authProvider.1\",\"org.apache.zookeeper.server.auth.SASLAuthenticationProvider\");\n    --- End diff --\n    \n    Whatever the system properties are set in this class should be cleared at the end of the class. \n    Similar test class  org.apache.zookeeper.SaslAuthTest could be referred.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-18T09:34:57.505+0000","updated":"2017-06-18T09:34:57.505+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16053940","id":"16053940","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r122698936\n  \n    --- Diff: src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java ---\n    @@ -38,11 +38,6 @@ public String getScheme() {\n         }\n     \n         public boolean matches(String id,String aclExpr) {\n    -        if (System.getProperty(\"zookeeper.superUser\") != null) {\n    -            if (id.equals(System.getProperty(\"zookeeper.superUser\")) || id.equals(aclExpr)) {\n    -              return true;\n    -            }\n    -        }\n             if ((id.equals(\"super\") || id.equals(aclExpr))) {\n    --- End diff --\n    \n    Sure.  It looks like I am going to have to pull out the \"super\" user SASL Login too.\n    \n    https://github.com/apache/zookeeper/blob/master/src/java/main/org/apache/zookeeper/server/auth/SaslServerCallbackHandler.java#L42\n    https://github.com/apache/zookeeper/blob/master/src/java/main/org/apache/zookeeper/server/auth/SaslServerCallbackHandler.java#L99-L101\n    \n    Do you know where the source for the documentation at https://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html is? Under the section \"Authentication & Authorization Options\" it talks about how to use the \"super\" user. \n    \n    I also found docs for this in a few other places on the open internet and because this is a backwards incompatible change I get a little nervous, so is there anything else I need to do to document a breaking change like this?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-19T12:58:27.783+0000","updated":"2017-06-19T12:58:27.783+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16054573","id":"16054573","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/282\n  \n    @arshadmohammad I think I have addressed your review comments\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-19T18:47:51.628+0000","updated":"2017-06-19T18:47:51.628+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16054595","id":"16054595","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 2 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/804//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/804//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/804//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-19T19:00:49.854+0000","updated":"2017-06-19T19:00:49.854+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16057980","id":"16057980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user arshadmohammad commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r123329247\n  \n    --- Diff: src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java ---\n    @@ -38,11 +38,6 @@ public String getScheme() {\n         }\n     \n         public boolean matches(String id,String aclExpr) {\n    -        if (System.getProperty(\"zookeeper.superUser\") != null) {\n    -            if (id.equals(System.getProperty(\"zookeeper.superUser\")) || id.equals(aclExpr)) {\n    -              return true;\n    -            }\n    -        }\n             if ((id.equals(\"super\") || id.equals(aclExpr))) {\n    --- End diff --\n    \n    Thanks @revans2 for the details.\n    On second thought, it would not be appropriate to break the backward compatibility. So can you please revert changes done for this comment. Rest all looks good to me.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-21T18:27:17.135+0000","updated":"2017-06-21T18:27:17.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16057989","id":"16057989","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/282#discussion_r123330561\n  \n    --- Diff: src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java ---\n    @@ -38,11 +38,6 @@ public String getScheme() {\n         }\n     \n         public boolean matches(String id,String aclExpr) {\n    -        if (System.getProperty(\"zookeeper.superUser\") != null) {\n    -            if (id.equals(System.getProperty(\"zookeeper.superUser\")) || id.equals(aclExpr)) {\n    -              return true;\n    -            }\n    -        }\n             if ((id.equals(\"super\") || id.equals(aclExpr))) {\n    --- End diff --\n    \n    done\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-21T18:32:20.727+0000","updated":"2017-06-21T18:32:20.727+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16057992","id":"16057992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/282\n  \n    @arshadmohammad if everything looks good I will squash my commits\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-21T18:32:56.024+0000","updated":"2017-06-21T18:32:56.024+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16058089","id":"16058089","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 2 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/817//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/817//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/817//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-21T19:47:32.605+0000","updated":"2017-06-21T19:47:32.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16058373","id":"16058373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/282\n  \n    One more thing here. Looks like we don't have an existing configuration option or system property called \"superUser\" (or zookeeper.superUser). So this `zookeeper.superUser` should be documented.\n    \n    The existing approach of how superuser is defined under various auth provider:\n    * For digest, it's `zookeeper.DigestAuthenticationProvider.superDigest`.\n    * For ssl, it's `zookeeper.X509AuthenticationProvider.superUser`.\n    \n    So maybe for SASL we name it `zookeeper.SASLAuthenticationProvider.superUser`, rather than `zookeeper.superUser` given it's only applicable to SASL?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-21T22:28:03.649+0000","updated":"2017-06-21T22:28:03.649+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16059832","id":"16059832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/282\n  \n    @hanm I didn't add in `zookeeper.superUser`.  I am happy to document it if you tell me where to make that change.  I don't know where the documentation source is stored.  I am happy to add in an additional `zookeeper.SASLAuthenticationProvider.superUser` config and document it instead, but removing `zookeeper.superUser` will technically break backwards compatibility.  If that is what you want I can do it, I just want to be sure like on the other breaking change that was suggested.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-22T18:34:15.370+0000","updated":"2017-06-22T18:34:15.370+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16059864","id":"16059864","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/282\n  \n    `zookeeper.superUser` was added in ZOOKEEPER-938 and it was never documented. I doubt people even know about this property without looking into source code and/or the description of ZOOKEEPER-938, but I agree compatibility concern here is very reasonable. \n    \n    So let's stick to `zookeeper.superUser` for this patch. We can give it a shinny name later. The only remaining work is to document this `zookeeper.superUser`. The doc source is located https://github.com/apache/zookeeper/blob/master/src/docs/src/documentation/content/xdocs/zookeeperAdmin.xml, search `zookeeper.DigestAuthenticationProvider.superDigest` or `X509AuthenticationProvider.superUser` as references of existing superuser documents.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-22T18:59:35.959+0000","updated":"2017-06-22T18:59:35.959+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16061082","id":"16061082","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user revans2 commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/282\n  \n    @hanm I added in the docs.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-23T15:02:08.335+0000","updated":"2017-06-23T15:02:08.335+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16061116","id":"16061116","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 2 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/823//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/823//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/823//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-23T15:23:52.148+0000","updated":"2017-06-23T15:23:52.148+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16061194","id":"16061194","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/zookeeper/pull/282\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-23T16:39:30.004+0000","updated":"2017-06-23T16:39:30.004+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16061197","id":"16061197","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"Issue resolved by pull request 282\n[https://github.com/apache/zookeeper/pull/282]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-06-23T16:40:16.603+0000","updated":"2017-06-23T16:40:16.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16061211","id":"16061211","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"Committed to master: fb267672d219c73c0cf2527fafebc1a0b17d3bee\nbranch-3.5: 822e51a01201fc56e810aacf36f828cf226c45e3\n\nNot sure if this should be in 3.4 though - if needed, the patch needs a little rework on the doc because it references something (x509 auth) that does not exist in br-3.4.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-06-23T16:50:00.177+0000","updated":"2017-06-23T16:50:00.177+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16061212","id":"16061212","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/282\n  \n    merged, thanks for the work @revans2 !\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-23T16:50:24.851+0000","updated":"2017-06-23T16:50:24.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12672385/comment/16061289","id":"16061289","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Jenkins build ZooKeeper-trunk #3439 (See [https://builds.apache.org/job/ZooKeeper-trunk/3439/])\nZOOKEEPER-1782: Let a SASL super user be super (hanm: rev fb267672d219c73c0cf2527fafebc1a0b17d3bee)\n* (edit) src/docs/src/documentation/content/xdocs/zookeeperAdmin.xml\n* (edit) src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java\n* (edit) src/java/main/org/apache/zookeeper/server/ZooKeeperServer.java\n* (add) src/java/test/org/apache/zookeeper/test/SaslSuperUserTest.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-23T17:45:43.113+0000","updated":"2017-06-23T17:45:43.113+0000"}],"maxResults":31,"total":31,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-1782/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1oown:"}}