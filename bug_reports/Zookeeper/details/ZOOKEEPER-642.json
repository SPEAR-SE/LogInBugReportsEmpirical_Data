{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12445368","self":"https://issues.apache.org/jira/rest/api/2/issue/12445368","key":"ZOOKEEPER-642","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316644","id":"12316644","description":"Dynamic Reconfig, Remove Watches, Local Session","name":"3.5.0","archived":false,"released":true,"releaseDate":"2014-08-04"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-01-14T17:55:45.518+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri May 11 11:00:44 UTC 2012","customfield_12310420":"44","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_19988598280_*|*_1_*:*_1_*:*_53379555513_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-05-11T05:55:15.643+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-642/watchers","watchCount":5,"isWatching":false},"created":"2010-01-13T01:52:42.146+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["patch"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314068","id":"12314068","description":"Fix release against 3.2 branch","name":"3.2.1","archived":false,"released":true,"releaseDate":"2009-09-04"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-05-11T11:00:44.276+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312380","id":"12312380","name":"c client","description":"The c client interface to ZooKeeper"}],"timeoriginalestimate":null,"description":"More important zookeeper warnings are drown out by the following several times per minute:\n\n2010-01-12 17:39:57,227:22317(0x4147eb90):ZOO_WARN@zookeeper_interest@1335: Exceeded deadline by 13ms\n\nPerhaps this is an issue with the way virtualized systems manage gettimeofday results?\n\nMaybe the current 10ms threshold could be pushed up a bit.  I notice that 95% of the messages are below 50ms.\n\nIs there an obvious configuration change that I can make to fix this?\n\nconfig file below:\n\n# The number of milliseconds of each tick\ntickTime=2000\n# The number of ticks that the initial\n# synchronization phase can take\ninitLimit=10\n# The number of ticks that can pass between\n# sending a request and getting an acknowledgement\nsyncLimit=5\n# the directory where the snapshot is stored.\ndataDir=/mnt/zookeeper\n# the port at which the clients will connect\nclientPort=2181\n\nserver.1=hbase.1:2888:3888\nserver.2=hbase.2:2888:3888\nserver.3=hbase.3:2888:3888\nserver.4=hbase.4:2888:3888\nserver.5=hbase.5:2888:3888\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12496185","id":"12496185","filename":"ZOOKEEPER-642.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T21:29:53.854+0000","size":659,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12496185/ZOOKEEPER-642.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"32951","customfield_12312823":null,"summary":"\"exceeded deadline by N ms\" floods logs","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dale6john","name":"dale6john","key":"dale6john","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dale Johnson","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dale6john","name":"dale6john","key":"dale6john","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dale Johnson","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"virtualized linux - ec2 - ubuntu","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/12800277","id":"12800277","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"unfortunately it's not configurable & I'm not sure why 10 was chosen (nothing in the\nsrc to indicate. \n\nWhat type of ec2 instance is this, small? Is this at all correlated with the\nclient/clienthost having increased workload?\n\nI think we should make some sort of change here, not sure what. Perhaps this \nshould be a % of timeout rather than fixed. Or perhaps made configurable. Alternately\nwe might make this debug (or switch to debug if > some number output in a period of\ntime, etc...)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-01-14T17:55:45.518+0000","updated":"2010-01-14T17:55:45.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/12800301","id":"12800301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dale6john","name":"dale6john","key":"dale6john","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dale Johnson","active":true,"timeZone":"Etc/UTC"},"body":"It is a small instance.\n\nWhen the machine becomes heavily loaded, the times go up quite a bit on\nthese messages, some into the thousands of milliseconds.  But the\nsmaller values appear on a pretty regular basis.\n\nDoes the warning mean that it's not responded within a single tick?\n\nThe message as it is has a fairly low diagnostic value.  I guess if they\nhappened with enough frequency and that was a signal to get more\nzookeeper servers, or that the client hosts were too overloaded, it\ncould be more helpful.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dale6john","name":"dale6john","key":"dale6john","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dale Johnson","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-14T18:50:58.218+0000","updated":"2010-01-14T18:50:58.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/12804802","id":"12804802","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"@dale basically we are asking to be woken up in a certain amount of time (in ms), and we are woken up later than we asked for. This is \nto be expected on heavily loaded system, we are logging in order to provide some insight (say you see a bunch of these, then\nsome session timeout, it might be useful). I agree though, in general not particularly useful, bit then in some cases it might be.\n\nThe selection of 10ms is a mistake though (esp as some systems don't have very good resolution on timing). It should be larger, perhaps \nscaled relative to the timeout. We could output as debug, but then it would essentially never be avail when you wanted it. We could\nlatch (only output the first N logs of this type) but then it would get lost over time. Perhaps we could do something where we output\na max of once every minute (as warn, debug the rest of the time). Might be a good tradeoff (increase the check from 10ms at the same\ntime).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-01-26T00:04:30.084+0000","updated":"2010-01-26T00:04:30.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/12837457","id":"12837457","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=voyager","name":"voyager","key":"voyager","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lei Zhang","active":true,"timeZone":"Etc/UTC"},"body":"I have taken over Dale's responsibility of zookeeper. We have bumped up tickTime to 20000 per Patrick's suggestion in another thread. Now we see these \"Exceeded deadline by 769ms\" message every 10 seconds - I'm testing using 'cli_st localhost:<port>', on a VMware Linux machine that is mostly idle . I echo Dale's comment:\n\nThe message as it is has a fairly low diagnostic value.\n\nSince this message is at WARN level, I feel we need to do something. But what:\n  o bump up priority of zookeeper daemon\n  o check bug in client library\n  o check bug in zookeeper server\n\nSomehow this doesn't smell like a real \"Exceeded timeline\" issue to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=voyager","name":"voyager","key":"voyager","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lei Zhang","active":true,"timeZone":"Etc/UTC"},"created":"2010-02-23T21:33:13.659+0000","updated":"2010-02-23T21:33:13.659+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/12837493","id":"12837493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"> We have bumped up tickTime to 20000 per Patrick's suggestion in another thread.\n\nHm, I'm not sure which thread you are referring to but tickTime has no impact on this particular issue.\n\n>  \"Exceeded deadline by 769ms\" \n> ... The message as it is has a fairly low diagnostic value.\n\nI don't think that's the case here. Nearly 800ms is a pretty significant issue, esp as the vm is unloaded as you mentioned.\n\nCan you try using cli_mt instead of cli_st and see if you notice any difference?\n\nThis message  \"Exceeded deadline by 769ms\" is saying that the ZK _client_ asked the operating system, via the \"select(..., timeout) call, to either select something or wakeup after the specified timeout. From the select man page: \n\n\"timeout  is an upper bound on the amount of time elapsed before select() returns.\"\n\nWe are printing this message because select woke up 769ms later than what we asked, which is pretty significant. Notice this has nothing to do with the server, server settings/config or server performance, it's all local to the client/select call.  This tells me that something is up on your client, prolly due to use of vmware. Perhaps Swapping at the host (non-virt) level? Try the cli_mt, you might also try running w/o VMware and see what happens, it will give you a baseline.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-02-23T22:50:10.553+0000","updated":"2010-02-23T22:50:10.553+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/12837506","id":"12837506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=voyager","name":"voyager","key":"voyager","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lei Zhang","active":true,"timeZone":"Etc/UTC"},"body":"\n\nMaybe I had misinterpreted what you meant by \"timeout\" - I was referring to\nhttp://mail-archives.apache.org/mod_mbox/hadoop-zookeeper-user/200908.mbox/%253C4A8D7B4B.5020701@apache.org%253E\n.\n\n\"typically we suggest timeouts in the 20-30 second range\"\n\n\n\n\nSame. Still seeing same message every 10 seconds.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=voyager","name":"voyager","key":"voyager","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lei Zhang","active":true,"timeZone":"Etc/UTC"},"created":"2010-02-23T23:14:29.757+0000","updated":"2010-02-23T23:14:29.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/12837543","id":"12837543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Lei,\n\ntickTime is used by the servers, not really impacts the clients\n\nthe clients have a \"timeout\" value they use when connecting to the servers, this establishes the session timeout.\n\nWhat I was suggesting on the link you listed was changing the timeout, not the tickTime. 2 sec is pretty low for timeout.\n\nHowever in your case none of this matters. The \"deadline exceeded\" message you are seeing is purely an OS issue.\n\n1) we select(..., deadline)\n2) when we wake up from select we check how close we are to the deadline, if this is exceeded by > 10ms then we log a warning.\n\nIn your case the deadline is being exceeded by a significant amount, this is a warning because it could impact the ability\nof the client to maintain connectivity with the server.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phunt","name":"phunt","key":"phunt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hunt","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-02-24T00:20:09.688+0000","updated":"2010-02-24T00:20:09.688+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13072101","id":"13072101","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishal.k","name":"vishal.k","key":"vishal.k","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Kathuria","active":true,"timeZone":"Etc/UTC"},"body":"I have run into this issue as well, while trying to do some scale testing on ZooKeeper. I usually see it when the client machine is under heavy load, but the message doesn't have much diagnostic value unless we miss by a large time. \n\nWe could change it to min(timeout/10, 200) instead of 10. In my experience, I was routinely seeing delays of less than 200 without any connection loss, hence the suggestion of that value.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishal.k","name":"vishal.k","key":"vishal.k","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Kathuria","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-27T23:35:05.046+0000","updated":"2011-07-27T23:35:05.046+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13072109","id":"13072109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashm","name":"ashm","key":"ashm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Mishra","active":true,"timeZone":"Etc/UTC"},"body":"I'll work on the fix suggested by Vishal.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashm","name":"ashm","key":"ashm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Mishra","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-27T23:53:50.263+0000","updated":"2011-07-27T23:53:50.263+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13112170","id":"13112170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"body":"This patch makes the change that vishal offered to reduce the amount of meaningless log messages.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-21T22:28:12.244+0000","updated":"2011-09-21T22:28:12.244+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13112174","id":"13112174","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"body":"I'm not sure how to go about doing this, but I'd like to have the patch I just attached code reviewed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-21T22:32:24.040+0000","updated":"2011-09-21T22:32:24.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13112323","id":"13112323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishal.k","name":"vishal.k","key":"vishal.k","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Kathuria","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for submitting this patch Marc.\nOne comment:\n+int max_exceed = zh->recv_timeout / 10 > 200 ? 200 : \n+                         zh->recv_timeout;\n\nshould be\n+int max_exceed = zh->recv_timeout / 10 > 200 ? 200 : \n+                         (zh->recv_timeout/10);\n\nYour patch missed the /10. Looks good otherwise.\n\nAlso, you need to click on submit patch and that will kick off the unit tests as well as notify the committers fo this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishal.k","name":"vishal.k","key":"vishal.k","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vishal Kathuria","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T04:43:45.159+0000","updated":"2011-09-22T04:43:45.159+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13112929","id":"13112929","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"body":"This patch alters the max amount of time that a deadline can be exceeded from 10ms to 200ms or 10% of the recv timeout in zookeeper.c.  This reduces the amount of meaningless log messages.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T21:31:57.562+0000","updated":"2011-09-22T21:31:57.562+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13112952","id":"13112952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12496185/ZOOKEEPER-642.patch\n  against trunk revision 1173949.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/584//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/584//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/584//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T22:03:32.733+0000","updated":"2011-09-22T22:03:32.733+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13112957","id":"13112957","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"body":"No test included because this only affects logging, and there isn't a clear way of testing anyway, as the logs were generated due to delays in waking up by OS.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marccelani","name":"marccelani","key":"marccelani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marc Celani","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T22:11:20.722+0000","updated":"2011-09-22T22:11:20.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13169888","id":"13169888","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12496185/ZOOKEEPER-642.patch\n  against trunk revision 1214571.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/832//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/832//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/832//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-12-15T00:41:07.316+0000","updated":"2011-12-15T00:41:07.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13273061","id":"13273061","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"body":"+1.\n\nMarc, thank you for the patch, and sorry it took me this long to get to this.\n\n--Michi","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michim","name":"michim","key":"michim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michi Mutsuzaki","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-11T05:54:10.960+0000","updated":"2012-05-11T05:54:10.960+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12445368/comment/13273167","id":"13273167","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in ZooKeeper-trunk #1552 (See [https://builds.apache.org/job/ZooKeeper-trunk/1552/])\n    ZOOKEEPER-642. \"exceeded deadline by N ms\" floods logs (Marc Celani via michim) (Revision 1337029)\n\n     Result = SUCCESS\nmichim : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1337029\nFiles : \n* /zookeeper/trunk/CHANGES.txt\n* /zookeeper/trunk/src/c/src/zookeeper.c\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-11T11:00:44.276+0000","updated":"2012-05-11T11:00:44.276+0000"}],"maxResults":18,"total":18,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-642/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0604f:"}}