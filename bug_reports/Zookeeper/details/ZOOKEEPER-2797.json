{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13076023","self":"https://issues.apache.org/jira/rest/api/2/issue/13076023","key":"ZOOKEEPER-2797","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310801","id":"12310801","key":"ZOOKEEPER","name":"ZooKeeper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310801&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310801&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310801&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310801&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10484","id":"10484","description":"Apache ZooKeeper related","name":"ZooKeeper"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340141","id":"12340141","description":"Beta release against 3.5 branch","name":"3.5.4","archived":false,"released":true,"releaseDate":"2018-05-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-05-30T23:35:31.169+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jun 01 16:29:46 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_101638085_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-06-01T03:46:18.751+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2797/watchers","watchCount":5,"isWatching":false},"created":"2017-05-30T23:32:20.709+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326518","id":"12326518","name":"3.6.0","archived":false,"released":false}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrickwhite","name":"patrickwhite","key":"patrickwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=patrickwhite&avatarId=21650","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=patrickwhite&avatarId=21650","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=patrickwhite&avatarId=21650","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=patrickwhite&avatarId=21650"},"displayName":"Patrick White","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-06-01T16:29:46.513+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12329414","id":"12329414","name":"security"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312382","id":"12312382","name":"server","description":"General issues with the ZooKeeper server."}],"timeoriginalestimate":null,"description":"I was adding container and TTL support to kazoo, and managed to screw something up which set the TTL to a negative value. This invalid TTL blew up the commit processor, and got written to the log, preventing the zookeepers from starting back up.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Invalid TTL from misbehaving client nukes zookeeper","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrickwhite","name":"patrickwhite","key":"patrickwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=patrickwhite&avatarId=21650","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=patrickwhite&avatarId=21650","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=patrickwhite&avatarId=21650","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=patrickwhite&avatarId=21650"},"displayName":"Patrick White","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrickwhite","name":"patrickwhite","key":"patrickwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=patrickwhite&avatarId=21650","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=patrickwhite&avatarId=21650","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=patrickwhite&avatarId=21650","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=patrickwhite&avatarId=21650"},"displayName":"Patrick White","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16030363","id":"16030363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user packysauce opened a pull request:\n\n    https://github.com/apache/zookeeper/pull/267\n\n    ZOOKEEPER-2797 Defend against bad TTLs from misbehaving clients\n\n    Validate the TTL before it makes it to the commit processor to prevent blowing up ZK\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/packysauce/zookeeper protect_from_bad_ttl\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/zookeeper/pull/267.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #267\n    \n----\ncommit 00541acbbffcd6c3d4267078f1644e554e1200f8\nAuthor: Patrick White <patrick@patrickwhite.org>\nDate:   2017-05-30T20:22:41Z\n\n    ZOOKEEPER-2797 Defend against bad TTLs from misbehaving clients\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-05-30T23:35:31.169+0000","updated":"2017-05-30T23:35:31.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16030438","id":"16030438","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/751//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/751//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/751//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-05-31T00:47:37.778+0000","updated":"2017-05-31T00:47:37.778+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16030514","id":"16030514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user packysauce commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/267\n  \n    The failed test in jenkins runs fine for me locally, and the logs indicated succeeded (if I'm interpreting that correctly)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-05-31T02:28:12.098+0000","updated":"2017-05-31T02:28:12.098+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16030624","id":"16030624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user afine commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/267#discussion_r119269582\n  \n    --- Diff: src/java/test/org/apache/zookeeper/server/CreateTTLTest.java ---\n    @@ -69,6 +75,23 @@ public void testCreate()\n         }\n     \n         @Test\n    +    public void testBadTTLs()\n    +            throws IOException, KeeperException, InterruptedException {\n    +        Stat stat = new Stat();\n    --- End diff --\n    \n    nit: is this needed?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-05-31T04:46:18.071+0000","updated":"2017-05-31T04:46:18.071+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16030625","id":"16030625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user packysauce commented on a diff in the pull request:\n\n    https://github.com/apache/zookeeper/pull/267#discussion_r119270375\n  \n    --- Diff: src/java/test/org/apache/zookeeper/server/CreateTTLTest.java ---\n    @@ -69,6 +75,23 @@ public void testCreate()\n         }\n     \n         @Test\n    +    public void testBadTTLs()\n    +            throws IOException, KeeperException, InterruptedException {\n    +        Stat stat = new Stat();\n    --- End diff --\n    \n    Ah! the first version of this went through the zk client-ish interface, so probably not needed anymore\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-05-31T04:49:00.338+0000","updated":"2017-05-31T04:49:00.338+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16030677","id":"16030677","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  GitHub Pull Request  Build\n      \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/753//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/753//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/753//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-05-31T05:46:09.069+0000","updated":"2017-05-31T05:46:09.069+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032389","id":"16032389","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user hanm commented on the issue:\n\n    https://github.com/apache/zookeeper/pull/267\n  \n    lgtm, merging.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-01T03:43:33.158+0000","updated":"2017-06-01T03:43:33.158+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032393","id":"16032393","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/zookeeper/pull/267\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-01T03:46:13.491+0000","updated":"2017-06-01T03:46:13.491+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032394","id":"16032394","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"Issue resolved by pull request 267\n[https://github.com/apache/zookeeper/pull/267]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-06-01T03:46:18.780+0000","updated":"2017-06-01T03:46:18.780+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032396","id":"16032396","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"Committed to master: https://github.com/apache/zookeeper/commit/3824da0b649c6a6a698cfe6c79ca3d44a9e94f29\nCommitted to branch-3.5:\nhttps://github.com/apache/zookeeper/commit/90495d96131cc4cf6a8f2533c06b796136234c35","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-06-01T03:47:42.959+0000","updated":"2017-06-01T03:47:42.959+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032397","id":"16032397","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"[~phunt] / [~rakeshr]: please add [~patrickwhite] to contributor list and assign this issue to him.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-06-01T03:48:21.564+0000","updated":"2017-06-01T03:48:21.564+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032399","id":"16032399","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"Side note: I think it's good to have the ttl validation on server side anyway, but it would also be good to have same validation on client side so invalid ttl value will be caught earlier before sending over to server. I believe the Java client does ttl validation, so kazoo client should do something similar.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-06-01T03:50:46.306+0000","updated":"2017-06-01T03:50:46.306+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032415","id":"16032415","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrickwhite","name":"patrickwhite","key":"patrickwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=patrickwhite&avatarId=21650","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=patrickwhite&avatarId=21650","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=patrickwhite&avatarId=21650","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=patrickwhite&avatarId=21650"},"displayName":"Patrick White","active":true,"timeZone":"America/Los_Angeles"},"body":"The client doing it is nice, but the server should always be validating all fields of all requests.\n\nKazoo doesn't support TTL and containers at the moment. I'll have a diff up soon. I also validate client side. Guess how I figured out how to kill ZK via TTLs :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrickwhite","name":"patrickwhite","key":"patrickwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=patrickwhite&avatarId=21650","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=patrickwhite&avatarId=21650","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=patrickwhite&avatarId=21650","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=patrickwhite&avatarId=21650"},"displayName":"Patrick White","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-01T04:24:33.885+0000","updated":"2017-06-01T04:24:33.885+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032421","id":"16032421","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrickwhite","name":"patrickwhite","key":"patrickwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=patrickwhite&avatarId=21650","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=patrickwhite&avatarId=21650","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=patrickwhite&avatarId=21650","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=patrickwhite&avatarId=21650"},"displayName":"Patrick White","active":true,"timeZone":"America/Los_Angeles"},"body":"As an aside, any insight into why create flags moved from being bitfield-like to an enum?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrickwhite","name":"patrickwhite","key":"patrickwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=patrickwhite&avatarId=21650","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=patrickwhite&avatarId=21650","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=patrickwhite&avatarId=21650","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=patrickwhite&avatarId=21650"},"displayName":"Patrick White","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-01T04:30:50.961+0000","updated":"2017-06-01T04:30:50.961+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16032435","id":"16032435","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build ZooKeeper-trunk #3410 (See [https://builds.apache.org/job/ZooKeeper-trunk/3410/])\nZOOKEEPER-2797: Defend against bad TTLs from misbehaving clients (hanm: rev 3824da0b649c6a6a698cfe6c79ca3d44a9e94f29)\n* (edit) src/java/main/org/apache/zookeeper/server/PrepRequestProcessor.java\n* (edit) src/java/test/org/apache/zookeeper/server/CreateTTLTest.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2017-06-01T04:39:02.760+0000","updated":"2017-06-01T04:39:02.760+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13076023/comment/16033254","id":"16033254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"body":"bq. the server should always be validating all fields of all requests.\nAbsolutely, to prevent bad clients. I mentioned client side check because if we control the clients, then doing client side check is more efficient as it prevents unnecessary round trips.\n\nbq. any insight into why create flags moved from being bitfield-like to an enum?\nIf you are referring to the EphemeralType as the enum, my guess would be for readability. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hanm","name":"hanm","key":"hanm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hanm&avatarId=26946","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hanm&avatarId=26946","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hanm&avatarId=26946","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hanm&avatarId=26946"},"displayName":"Michael Han","active":true,"timeZone":"America/Vancouver"},"created":"2017-06-01T16:29:46.513+0000","updated":"2017-06-01T16:29:46.513+0000"}],"maxResults":16,"total":16,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ZOOKEEPER-2797/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3fo0v:"}}