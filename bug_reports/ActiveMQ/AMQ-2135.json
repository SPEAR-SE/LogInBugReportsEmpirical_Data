{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Gary Tully",
            "key": "gtully",
            "name": "gtully",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=gtully",
            "timeZone": "Etc/UTC"
        },
        "components": [{
            "id": "12313892",
            "name": "Broker",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12313892"
        }],
        "created": "2009-02-21T01:47:28.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Don Hoffman",
            "key": "dhoffman",
            "name": "dhoffman",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dhoffman",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310041": null,
        "customfield_12310080": null,
        "customfield_12310220": "2009-03-03T16:50:10.310+0000",
        "customfield_12310222": "1_*:*_1_*:*_38327696905_*|*_5_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "7.0",
        "customfield_12310420": "75060",
        "customfield_12310920": "161706",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0s1f3:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon May 10 16:22:25 UTC 2010",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "using only the example code, the 5.2.0 release can be made to distribute messages to brokers with no consumers, which remain at those brokers and are never consumed, unless a consumer later connects specifically to those brokers.\nthis bug is not reproducible in 5.1.0.\n\nto reproduce:\nrun 3 brokers.  connect a consumer to brokers 1 and 2.  connect a producer to broker 1.  not all messages produced will be received by the 2 consumers.  note that the specific brokers connected to matters for the 3-broker case.  for example, on my machine, if the producer connects to broker 2 instead of broker 1, all messages are received.  you may need to try various combinations of consumer/producer connections to reproduce the problem, but this specific setup breaks reliably for me.\n\nthis problem becomes more pronounced and easier to reproduce as the number of brokers increases.\n\nspecific configuration used to reproduce:\n\n3 broker config xml files:\ntestamq1.xml\n<beans\n  xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:amq=\"http://activemq.apache.org/schema/core\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\n  http://activemq.apache.org/camel/schema/spring http://activemq.apache.org/camel/schema/spring/camel-spring.xsd\">\n\n  <broker brokerName=\"b1\" xmlns=\"http://activemq.apache.org/schema/core\" useJmx=\"false\" advisorySupport=\"true\">\n\n    <persistenceAdapter>\n      <amqPersistenceAdapter directory=\"activemq-data1\" maxFileLength=\"32mb\"/>\n    <\/persistenceAdapter>\n\n    <transportConnectors>\n      <transportConnector uri=\"tcp://localhost:61616\"/>\n    <\/transportConnectors>\n\n    <networkConnectors>\n      <networkConnector uri=\"static://(tcp://localhost:61617,tcp://localhost:61618)\" dynamicOnly=\"true\" networkTTL=\"5\"/>\n    <\/networkConnectors>\n\n  <\/broker>\n<\/beans>\n\ntestamq2.xml\n<beans\n  xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:amq=\"http://activemq.apache.org/schema/core\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\n  http://activemq.apache.org/camel/schema/spring http://activemq.apache.org/camel/schema/spring/camel-spring.xsd\">\n\n  <broker brokerName=\"b2\" xmlns=\"http://activemq.apache.org/schema/core\" useJmx=\"false\" advisorySupport=\"true\">\n\n    <persistenceAdapter>\n      <amqPersistenceAdapter directory=\"activemq-data2\" maxFileLength=\"32mb\"/>\n    <\/persistenceAdapter>\n\n    <transportConnectors>\n      <transportConnector uri=\"tcp://localhost:61617\"/>\n    <\/transportConnectors>\n\n    <networkConnectors>\n      <networkConnector uri=\"static://(tcp://localhost:61616,tcp://localhost:61618)\" dynamicOnly=\"true\" networkTTL=\"5\"/>\n    <\/networkConnectors>\n\n  <\/broker>\n<\/beans>\n\ntestamq3.xml\n<beans\n  xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:amq=\"http://activemq.apache.org/schema/core\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\n  http://activemq.apache.org/camel/schema/spring http://activemq.apache.org/camel/schema/spring/camel-spring.xsd\">\n\n  <broker brokerName=\"b3\" xmlns=\"http://activemq.apache.org/schema/core\" useJmx=\"false\" advisorySupport=\"true\">\n\n\n    <persistenceAdapter>\n      <amqPersistenceAdapter directory=\"activemq-data3\" maxFileLength=\"32mb\"/>\n    <\/persistenceAdapter>\n\n    <transportConnectors>\n      <transportConnector uri=\"tcp://localhost:61618\"/>\n    <\/transportConnectors>\n\n    <networkConnectors>\n      <networkConnector uri=\"static://(tcp://localhost:61616,tcp://localhost:61617)\" dynamicOnly=\"true\" networkTTL=\"5\"/>\n    <\/networkConnectors>\n\n  <\/broker>\n<\/beans>\n\n\nrun 3 brokers:\nbin/activemq xbean:testamq1.xml\nbin/activemq xbean:testamq2.xml\nbin/activemq xbean:testamq3.xml\n\nrun 2 consumers (from examples directory):\nant consumer -Durl=\"failover:(tcp://localhost:61616)\" -Dsubject=\"test.queue\" -Dmax=100 -DsleepTime=3\nant consumer -Durl=\"failover:(tcp://localhost:61617)\" -Dsubject=\"test.queue\" -Dmax=100 -DsleepTime=3\n\nrun 1 producer (from examples directory) with 10 messages:\nant producer -Durl=\"failover:(tcp://localhost:61616)\" -Dsubject=\"test.queue\" -Dmax=10\n\nconsumers will not receive all messages.",
        "duedate": null,
        "environment": "linux (centos 4.6) using ActiveMQ 5.2.0 binary distribution",
        "fixVersions": [{
            "archived": false,
            "description": "",
            "id": "12315621",
            "name": "5.3.1",
            "releaseDate": "2010-03-23",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315621"
        }],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011"
            },
            "id": "12311210",
            "key": "AMQ",
            "name": "ActiveMQ",
            "projectCategory": {
                "description": "ActiveMQ",
                "id": "11160",
                "name": "ActiveMQ",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/11160"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12311210"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Don Hoffman",
            "key": "dhoffman",
            "name": "dhoffman",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dhoffman",
            "timeZone": "Etc/UTC"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2010-05-10T16:22:25.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "network of brokers distributes messages to brokers with 0 consumers with dynamicOnly=true set",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2010-05-10T16:22:25.000+0000",
        "versions": [{
            "archived": false,
            "description": "",
            "id": "12315619",
            "name": "5.2.0",
            "releaseDate": "2008-11-20",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315619"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-2135/votes",
            "votes": 4
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-2135/watchers",
            "watchCount": 6
        },
        "workratio": -1
    },
    "id": "12483286",
    "key": "AMQ-2135",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12483286"
}