{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [{
            "description": "The JMX support in ActiveMQ",
            "id": "12313904",
            "name": "JMX",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12313904"
        }],
        "created": "2010-05-19T15:03:38.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Benjamin Geißelmeier",
            "key": "geissebn",
            "name": "geissebn",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=geissebn",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310041": null,
        "customfield_12310080": null,
        "customfield_12310220": "2010-05-19T15:11:22.770+0000",
        "customfield_12310222": "1_*:*_1_*:*_54112304768_*|*_6_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310420": "43763",
        "customfield_12310920": "172243",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0tugf:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Sat Feb 04 22:15:23 UTC 2012",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "I have the following situation:\nA static network of brokers, working on hostA:61619 and hostB:61619, both with JMX enabled as shown in this Spring configuration:\n\n{noformat}\n<amq:broker xmlns=\"http://activemq.apache.org/schema/core\" id=\"broker\" persistent=\"false\" useJmx=\"true\"\n\tbrokerName=\"${hostname}:61619\" useShutdownHook=\"false\">\n\t\n\t<amq:destinationPolicy>\n\t\t<amq:policyMap>\n\t\t\t<amq:defaultEntry>\n\t\t\t\t<amq:policyEntry queue=\"${queue-name}\">\n\t\t\t\t\t<amq:dispatchPolicy>\n\t\t\t\t\t\t<amq:roundRobinDispatchPolicy />\n\t\t\t\t\t<\/amq:dispatchPolicy>\n\t\t\t\t<\/amq:policyEntry>\n\t\t\t<\/amq:defaultEntry>\n\t\t<\/amq:policyMap>\n\t<\/amq:destinationPolicy> \n\n\t<!-- Use the default JVM JMX connector -->\n\t<amq:managementContext>\n\t\t<amq:managementContext createConnector=\"false\" />\n\t<\/amq:managementContext>\n\n\t<amq:networkConnectors>\n\t<!--  Cluster configuration: build a static network of brokers -->\n\t  <amq:networkConnector uri=\"static:(tcp://${HOSTNAME_OF_OTHER_INSTANCE}:61619)\" />\n\t<\/amq:networkConnectors>\n\n\t<amq:transportConnectors>\n\t  <!-- \"listen\" on the in-VM transport -->\n\t  <amq:transportConnector uri=\"vm://my-server\" />\n\t  \n\t  <!-- listen on a statically chosen tcp port which is announced for discovery -->\n\t  <amq:transportConnector uri=\"tcp://0.0.0.0:61619\"\n\t\tdiscoveryUri=\"multicast://default?group=${activemq-group}\" />\n\t<\/amq:transportConnectors>\n<\/amq:broker>\n{noformat}\n\nMy application looks like this:\n\n # Both host instances are connected via VM transport to the broker and wait for new messages in $queue-name\n # Clients send messages to this shared queue with a TempQueue to which the hosts shall reply:\n {code}\n\tQueueConnectionFactory factory = new ActiveMQConnectionFactory(\"failover:(...)\");\n\tQueueConnection connection = factory.createQueueConnection();\n    Queue session = connection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\n    final QueueSender producer = session.createSender(session.createQueue($queue-name));\n\tTemporaryQueue rxQueue = session.createTemporaryQueue();\n\tObjectMessage initMessage = session.createObjectMessage(...);\n\tinitMessage.setJMSReplyTo(rxQueue);\n\tproducer.send(initMessage, DeliveryMode.NON_PERSISTENT, Message.DEFAULT_PRIORITY, 100000);\n\t// When the host takes this initMessage from the queue, it creates a 2nd temp queue for further client messages\n\t// Do some work...\n\t// Close everything: connection, session, producer and in particular:\n\trxQueue.delete();\n\t// Host closes 2nd temp queue, too\n{code}\n\nSay a client connects to hostA (e.g. via tcp://hostA:616169) and hostA takes the client request from the queue. Now I can see a non-durable subscription for the temporary queue the client has created in the JMX consoles of both host instances. But after the temp queue was deleted the subscription still exists on hostB.\nAfter several requests there are a lot of subscriptions for deleted queues in the JMX console which looks like a potential memory leak. (-> screenshot)\n\t\nI've seen this effect in ActiveMQ version 5.3.0 and 5.3.2\n",
        "duedate": null,
        "environment": "seen on Win XP, Win 7, Server 2003 and 2008",
        "fixVersions": [],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011"
            },
            "id": "12311210",
            "key": "AMQ",
            "name": "ActiveMQ",
            "projectCategory": {
                "description": "ActiveMQ",
                "id": "11160",
                "name": "ActiveMQ",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/11160"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12311210"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Benjamin Geißelmeier",
            "key": "geissebn",
            "name": "geissebn",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=geissebn",
            "timeZone": "Etc/UTC"
        },
        "resolution": {
            "description": "The problem is not completely described.",
            "id": "4",
            "name": "Incomplete",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/4"
        },
        "resolutiondate": "2012-02-04T22:15:23.000+0000",
        "status": {
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "id": "6",
            "name": "Closed",
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [{
            "fields": {
                "issuetype": {
                    "avatarId": 21133,
                    "description": "A problem which impairs or prevents the functions of the product.",
                    "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                    "id": "1",
                    "name": "Bug",
                    "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                    "subtask": false
                },
                "priority": {
                    "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                    "id": "3",
                    "name": "Major",
                    "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                },
                "status": {
                    "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                    "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                    "id": "5",
                    "name": "Resolved",
                    "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                    "statusCategory": {
                        "colorName": "green",
                        "id": 3,
                        "key": "done",
                        "name": "Done",
                        "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                    }
                },
                "summary": "Memory leak & huge thread count in broker"
            },
            "id": "12483291",
            "key": "AMQ-2706",
            "self": "https://issues.apache.org/jira/rest/api/2/issue/12483291"
        }],
        "summary": "Subscription on TempQueues in Network-Of-Brokers not deleted",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2012-02-04T22:15:23.000+0000",
        "versions": [
            {
                "archived": false,
                "description": "",
                "id": "12315620",
                "name": "5.3.0",
                "releaseDate": "2009-10-13",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12315620"
            },
            {
                "archived": false,
                "description": "",
                "id": "12315622",
                "name": "5.3.2",
                "releaseDate": "2010-05-11",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12315622"
            }
        ],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-2742/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-2742/watchers",
            "watchCount": 1
        },
        "workratio": -1
    },
    "id": "12483633",
    "key": "AMQ-2742",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12483633"
}