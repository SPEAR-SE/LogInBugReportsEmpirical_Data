{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942"
            },
            "displayName": "Rob Davies",
            "key": "rajdavies",
            "name": "rajdavies",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rajdavies",
            "timeZone": "Etc/UTC"
        },
        "components": [],
        "created": "2008-04-01T15:13:51.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Sam Walton",
            "key": "samwalton",
            "name": "samwalton",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=samwalton",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310041": null,
        "customfield_12310080": null,
        "customfield_12310220": null,
        "customfield_12310222": "1_*:*_1_*:*_702717470_*|*_5_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310420": "84627",
        "customfield_12310920": "161441",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0rzs7:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "2008-04-01 15:13:51.0",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "I have two brokers, on two different machines.\n\nBroker A opens a duplex connection to Broker B, by having the following in its config:\n\n<networkConnectors>\n      <networkConnector name=\"hostfora\" uri=\"static://(tcp://hostforB:5675)\" duplex=\"true\" networkTTL=\"5\" dynamicOnly=\"true\"/>\n<\/networkConnectors>\n\nWe have producers and consumers on both brokers, but the majority of the message flow is from the producers on A to the consumers on B.  After a while, messages stop flowing.  Thread dumps on both brokers reveal the following.\n\n\n==================\nBroker A Thread Dump\n==================\n\n\"ActiveMQ Transport Status Monitor: openwire\" daemon prio=10 tid=0xcdfc5000 nid=0x130f waiting on condition [0xcdab5000..0xcdab56f0]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n      at java.lang.Thread.sleep(Native Method)\n      at org.apache.activemq.broker.TransportStatusDetector.run(TransportStatusDetector.java:102)\n      at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ Transport Server: tcp://localhost:5675\" daemon prio=10 tid=0xcdfc4800 nid=0x130e runnable [0xcdcff000..0xcdcff670]\n   java.lang.Thread.State: RUNNABLE\n      at java.net.PlainSocketImpl.socketAccept(Native Method)\n      at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:384)\n      - locked <0xd34062c8> (a java.net.SocksSocketImpl)\n      at java.net.ServerSocket.implAccept(ServerSocket.java:450)\n      at java.net.ServerSocket.accept(ServerSocket.java:421)\n      at org.apache.activemq.transport.tcp.TcpTransportServer.run(TcpTransportServer.java:197)\n      at java.lang.Thread.run(Thread.java:619)\n\n\nINACTIVITY MONITORS\n--------------------------------\n\n\"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@34a2a5\" daemon prio=10 tid=0x081c3800 nid=0x2ac8 waiting on condition [0xca55d000..0xca55d570]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n      at sun.misc.Unsafe.park(Native Method)\n      - parking to wait for  <0xd34050c8> (a java.util.concurrent.SynchronousQueue$TransferStack)\n      at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n      at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:424)\n      at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:323)\n      at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:874)\n      at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:944)\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:906)\n      at java.lang.Thread.run(Thread.java:619)\n\n\"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@12875ac\" daemon prio=10 tid=0x08495000 nid=0x2ac7 waiting on condition [0xca3ff000..0xca3ff4f0]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n      at sun.misc.Unsafe.park(Native Method)\n      - parking to wait for  <0xd34050c8> (a java.util.concurrent.SynchronousQueue$TransferStack)\n      at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n      at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:424)\n      at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:323)\n      at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:874)\n      at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:944)\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:906)\n      at java.lang.Thread.run(Thread.java:619)\n\n\"InactivityMonitor WriteCheck\" prio=10 tid=0x0846ec00 nid=0x1311 in Object.wait() [0xcda13000..0xcda137f0]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n      at java.lang.Object.wait(Native Method)\n      at java.util.TimerThread.mainLoop(Timer.java:509)\n      - locked <0xd3408638> (a java.util.TaskQueue)\n      at java.util.TimerThread.run(Timer.java:462)\n\n\"InactivityMonitor ReadCheck\" prio=10 tid=0x08425800 nid=0x1310 in Object.wait() [0xcda64000..0xcda64770]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n      at java.lang.Object.wait(Native Method)\n      at java.util.TimerThread.mainLoop(Timer.java:509)\n      - locked <0xd3408a30> (a java.util.TaskQueue)\n      at java.util.TimerThread.run(Timer.java:462)\n\nBroker A - B CONNECTIONS\n----------------------------------------\n\n\"ActiveMQ Transport: tcp://hostforB:5675\" prio=10 tid=0x083d1000 nid=0x2696 runnable [0xca3ae000..0xca3ae770]\n   java.lang.Thread.State: RUNNABLE\n      at java.net.SocketInputStream.socketRead0(Native Method)\n      at java.net.SocketInputStream.read(SocketInputStream.java:129)\n      at org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill(TcpBufferedInputStream.java:50)\n      at org.apache.activemq.transport.tcp.TcpBufferedInputStream.read(TcpBufferedInputStream.java:58)\n      at java.io.DataInputStream.readInt(DataInputStream.java:370)\n      at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:268)\n      at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:192)\n      at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:184)\n      at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:172)\n      at java.lang.Thread.run(Thread.java:619)\n\n====>\n====> Blocked on write to broker A because broker A isn't reading?\n====>\n\"ActiveMQ Connection Dispatcher: vm://localhost#18\" daemon prio=10 tid=0x0849a800 nid=0x2695 runnable [0xcbaa8000..0xcbaa86f0]\n   java.lang.Thread.State: RUNNABLE\n      at java.net.SocketOutputStream.socketWrite0(Native Method)\n      at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n      at java.net.SocketOutputStream.write(SocketOutputStream.java:136)\n      at org.apache.activemq.transport.tcp.TcpBufferedOutputStream.flush(TcpBufferedOutputStream.java:105)\n      at java.io.DataOutputStream.flush(DataOutputStream.java:106)\n      at org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:154)\n      at org.apache.activemq.transport.InactivityMonitor.oneway(InactivityMonitor.java:189)\n      - locked <0xd42a6548> (a org.apache.activemq.transport.InactivityMonitor$2)\n      at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:82)\n      at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:91)\n      at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)\n      - locked <0xd42a6028> (a java.lang.Object)\n      at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:59)\n      at org.apache.activemq.network.DemandForwardingBridgeSupport.serviceLocalCommand(DemandForwardingBridgeSupport.java:578)\n      at org.apache.activemq.network.DemandForwardingBridgeSupport$1.onCommand(DemandForwardingBridgeSupport.java:138)\n      at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:100)\n      at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:67)\n      at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:98)\n      at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)\n      - locked <0xd4252740> (a java.lang.Object)\n      at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:59)\n      at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1151)\n      at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:766)\n      at org.apache.activemq.broker.TransportConnection.iterate(TransportConnection.java:801)\n      at org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:98)\n      at org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:36)\n\n\"VMTransport: vm://localhost#19\" daemon prio=10 tid=0x08499000 nid=0x2694 in Object.wait() [0xca5ae000..0xca5ae670]\n   java.lang.Thread.State: WAITING (on object monitor)\n      at java.lang.Object.wait(Native Method)\n      at java.lang.Object.wait(Object.java:485)\n      at org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:105)\n      - locked <0xd4252468> (a java.lang.Object)\n      at org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:36)\n\n\nPRODUCER CONNECTIONS\n----------------------------------------\n\n\"ActiveMQ Connection Dispatcher: /producer1:36897\" daemon prio=10 tid=0x083e0800 nid=0x131c in Object.wait() [0xcd6e9000..0xcd6e9570]\n   java.lang.Thread.State: WAITING (on object monitor)\n      at java.lang.Object.wait(Native Method)\n      - waiting on <0xd34574b8> (a java.lang.Object)\n      at java.lang.Object.wait(Object.java:485)\n      at org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:105)\n      - locked <0xd34574b8> (a java.lang.Object)\n      at org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:36)\n\n\"ActiveMQ Transport: tcp:///producer1:36897\" daemon prio=10 tid=0x0846bc00 nid=0x131a runnable [0xcd78b000..0xcd78b470]\n   java.lang.Thread.State: RUNNABLE\n      at java.net.SocketInputStream.socketRead0(Native Method)\n      at java.net.SocketInputStream.read(SocketInputStream.java:129)\n      at org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill(TcpBufferedInputStream.java:50)\n      at org.apache.activemq.transport.tcp.TcpBufferedInputStream.read(TcpBufferedInputStream.java:58)\n      at java.io.DataInputStream.readInt(DataInputStream.java:370)\n      at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:268)\n      at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:192)\n      at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:184)\n      at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:172)\n      at java.lang.Thread.run(Thread.java:619)\n\n\n\n===================\nBroker B Thread Dump\n===================\n\n\"ActiveMQ Transport Status Monitor: ssl\" daemon prio=10 tid=0x0836e000 nid=0x61b9 waiting on condition [0xcd9ae000..0xcd9ae5f0]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n      at java.lang.Thread.sleep(Native Method)\n      at org.apache.activemq.broker.TransportStatusDetector.run(TransportStatusDetector.java:102)\n      at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ Transport Server: ssl://localhost:443\" daemon prio=10 tid=0x08537c00 nid=0x61b8 runnable [0xcd9ff000..0xcd9ff570]\n   java.lang.Thread.State: RUNNABLE\n      at java.net.PlainSocketImpl.socketAccept(Native Method)\n      at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:384)\n      - locked <0xd37acfb0> (a java.net.SocksSocketImpl)\n      at java.net.ServerSocket.implAccept(ServerSocket.java:450)\n      at com.sun.net.ssl.internal.ssl.SSLServerSocketImpl.accept(SSLServerSocketImpl.java:259)\n      at org.apache.activemq.transport.tcp.TcpTransportServer.run(TcpTransportServer.java:197)\n      at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ Transport Status Monitor: openwire\" daemon prio=10 tid=0xce21fc00 nid=0x61b7 waiting on condition [0xcdb56000..0xcdb566f0]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n      at java.lang.Thread.sleep(Native Method)\n      at org.apache.activemq.broker.TransportStatusDetector.run(TransportStatusDetector.java:102)\n      at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ Transport Server: tcp://localhost:5675\" daemon prio=10 tid=0xcdeffc00 nid=0x61b6 runnable [0xcddff000..0xcddff670]\n   java.lang.Thread.State: RUNNABLE\n      at java.net.PlainSocketImpl.socketAccept(Native Method)\n      at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:384)\n      - locked <0xd37aca78> (a java.net.SocksSocketImpl)\n      at java.net.ServerSocket.implAccept(ServerSocket.java:450)\n      at java.net.ServerSocket.accept(ServerSocket.java:421)\n      at org.apache.activemq.transport.tcp.TcpTransportServer.run(TcpTransportServer.java:197)\n      at java.lang.Thread.run(Thread.java:619)\n\n\nINACTIVITY MONITORS\n--------------------------------\n\n\"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@704cf5\" daemon prio=10 tid=0x081af400 nid=0x6498 waiting on condition [0xcba92000..0xcba926f0]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n      at sun.misc.Unsafe.park(Native Method)\n      - parking to wait for  <0xd346d318> (a java.util.concurrent.SynchronousQueue$TransferStack)\n      at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n      at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:424)\n      at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:323)\n      at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:874)\n      at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:944)\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:906)\n      at java.lang.Thread.run(Thread.java:619)\n\n\"InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@b8d09d\" daemon prio=10 tid=0x081aec00 nid=0x6452 waiting for monitor entry [0xcd70b000..0xcd70c570]\n   java.lang.Thread.State: BLOCKED (on object monitor)\n      at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:661)\n      - waiting to lock <0xd3791d18> (a java.lang.Object)\n      at com.sun.net.ssl.internal.ssl.SSLSocketImpl.sendAlert(SSLSocketImpl.java:1624)\n      at com.sun.net.ssl.internal.ssl.SSLSocketImpl.warning(SSLSocketImpl.java:1477)\n      at com.sun.net.ssl.internal.ssl.SSLSocketImpl.closeInternal(SSLSocketImpl.java:1279)\n      - locked <0xd3791408> (a com.sun.net.ssl.internal.ssl.SSLSocketImpl)\n      at com.sun.net.ssl.internal.ssl.SSLSocketImpl.close(SSLSocketImpl.java:1218)\n      at org.apache.activemq.transport.tcp.TcpTransport.doStop(TcpTransport.java:430)\n      at org.apache.activemq.util.ServiceSupport.stop(ServiceSupport.java:57)\n      at org.apache.activemq.transport.tcp.TcpTransport.stop(TcpTransport.java:439)\n      at org.apache.activemq.transport.InactivityMonitor.stop(InactivityMonitor.java:90)\n      at org.apache.activemq.transport.TransportFilter.stop(TransportFilter.java:63)\n      at org.apache.activemq.transport.WireFormatNegotiator.stop(WireFormatNegotiator.java:78)\n      at org.apache.activemq.transport.TransportFilter.stop(TransportFilter.java:63)\n      at org.apache.activemq.broker.TransportConnection.disposeTransport(TransportConnection.java:1239)\n      at org.apache.activemq.broker.TransportConnection.doStop(TransportConnection.java:917)\n      at org.apache.activemq.broker.jmx.ManagedTransportConnection.doStop(ManagedTransportConnection.java:74)\n      at org.apache.activemq.broker.TransportConnection.stop(TransportConnection.java:876)\n      at org.apache.activemq.util.ServiceSupport.dispose(ServiceSupport.java:40)\n      at org.apache.activemq.broker.TransportConnection.serviceTransportException(TransportConnection.java:206)\n      at org.apache.activemq.broker.TransportConnection$1.onException(TransportConnection.java:185)\n      at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:98)\n      at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:98)\n      at org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:143)\n      at org.apache.activemq.transport.InactivityMonitor.onException(InactivityMonitor.java:201)\n      at org.apache.activemq.transport.InactivityMonitor$5.run(InactivityMonitor.java:139)\n      at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n      at java.lang.Thread.run(Thread.java:619)\n\n\"InactivityMonitor WriteCheck\" daemon prio=10 tid=0x083c3c00 nid=0x61bb in Object.wait() [0xcd7ff000..0xcd7ff4f0]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n      at java.lang.Object.wait(Native Method)\n      - waiting on <0xd37d1e58> (a java.util.TaskQueue)\n      at java.util.TimerThread.mainLoop(Timer.java:509)\n      - locked <0xd37d1e58> (a java.util.TaskQueue)\n      at java.util.TimerThread.run(Timer.java:462)\n\n\"InactivityMonitor ReadCheck\" daemon prio=10 tid=0x083c4800 nid=0x61ba in Object.wait() [0xcd95d000..0xcd95d470]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n      at java.lang.Object.wait(Native Method)\n      - waiting on <0xd37ae218> (a java.util.TaskQueue)\n      at java.util.TimerThread.mainLoop(Timer.java:509)\n      - locked <0xd37ae218> (a java.util.TaskQueue)\n      at java.util.TimerThread.run(Timer.java:462)\n\nBroker A - B CONNECTIONS\n---------------------------------------\n\n\"ActiveMQ Connection Dispatcher: vm://localhost#0\" daemon prio=10 tid=0x082f5000 nid=0x61e8 waiting for monitor entry [0xccb57000..0xccb57570]\n   java.lang.Thread.State: BLOCKED (on object monitor)\n      at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:39)\n      - waiting to lock <0xd3782640> (a java.lang.Object)\n      at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:59)\n      at org.apache.activemq.network.DemandForwardingBridgeSupport.serviceLocalCommand(DemandForwardingBridgeSupport.java:579)\n      at org.apache.activemq.network.DemandForwardingBridgeSupport$1.onCommand(DemandForwardingBridgeSupport.java:138)\n      at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:100)\n      at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:67)\n      at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:98)\n      at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)\n      - locked <0xd3782a58> (a java.lang.Object)\n      at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:59)\n      at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1151)\n      at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:766)\n      at org.apache.activemq.broker.TransportConnection.iterate(TransportConnection.java:801)\n      at org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:98)\n      at org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:36)\n\n\"VMTransport: vm://localhost#1\" daemon prio=10 tid=0x082f4000 nid=0x61e7 runnable [0xccba7000..0xccba86f0]\n   java.lang.Thread.State: RUNNABLE\n      at java.net.SocketOutputStream.socketWrite0(Native Method)\n      at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n      at java.net.SocketOutputStream.write(SocketOutputStream.java:136)\n      at com.sun.net.ssl.internal.ssl.OutputRecord.writeBuffer(OutputRecord.java:283)\n      at com.sun.net.ssl.internal.ssl.OutputRecord.write(OutputRecord.java:272)\n      at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:665)\n      - locked <0xd3791d18> (a java.lang.Object)\n      at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59)\n      - locked <0xd3793090> (a com.sun.net.ssl.internal.ssl.AppOutputStream)\n      at org.apache.activemq.transport.tcp.TcpBufferedOutputStream.flush(TcpBufferedOutputStream.java:105)\n      at java.io.DataOutputStream.flush(DataOutputStream.java:106)\n      at org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:154)\n      at org.apache.activemq.transport.InactivityMonitor.oneway(InactivityMonitor.java:189)\n      - locked <0xd3793868> (a org.apache.activemq.transport.InactivityMonitor$2)\n      at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:82)\n      at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:91)\n      at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)\n      - locked <0xd3793958> (a java.lang.Object)\n      at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1151)\n      at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:766)\n      at org.apache.activemq.broker.TransportConnection.dispatchSync(TransportConnection.java:727)\n      at org.apache.activemq.broker.region.TopicSubscription.dispatch(TopicSubscription.java:427)\n      at org.apache.activemq.broker.region.TopicSubscription.add(TopicSubscription.java:93)\n      at org.apache.activemq.broker.region.policy.SimpleDispatchPolicy.dispatch(SimpleDispatchPolicy.java:48)\n      at org.apache.activemq.broker.region.Topic.dispatch(Topic.java:601)\n      at org.apache.activemq.broker.region.Topic.doMessageSend(Topic.java:427)\n      - locked <0xd3609748> (a org.apache.activemq.broker.region.Topic)\n      at org.apache.activemq.broker.region.Topic.send(Topic.java:371)\n      at org.apache.activemq.broker.region.AbstractRegion.send(AbstractRegion.java:328)\n      at org.apache.activemq.broker.region.RegionBroker.send(RegionBroker.java:402)\n      at org.apache.activemq.broker.TransactionBroker.send(TransactionBroker.java:224)\n      at org.apache.activemq.broker.BrokerFilter.send(BrokerFilter.java:125)\n      at org.apache.activemq.broker.CompositeDestinationBroker.send(CompositeDestinationBroker.java:95)\n      at org.apache.activemq.broker.BrokerFilter.send(BrokerFilter.java:125)\n      at org.apache.activemq.broker.MutableBrokerFilter.send(MutableBrokerFilter.java:135)\n      at org.apache.activemq.broker.TransportConnection.processMessage(TransportConnection.java:434)\n      at org.apache.activemq.command.ActiveMQMessage.visit(ActiveMQMessage.java:623)\n      at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:281)\n      at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:178)\n      at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:100)\n      at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:67)\n      at org.apache.activemq.transport.vm.VMTransport.iterate(VMTransport.java:202)\n      at org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:98)\n      at org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:36)\n\n\n====>\n====> Nothing to dispatch from broker B\n====>\n\"ActiveMQ Connection Dispatcher: /hostforA:50665\" daemon prio=10 tid=0x08431800 nid=0x61e4 in Object.wait() [0xccc4a000..0xccc4a770]\n   java.lang.Thread.State: WAITING (on object monitor)\n      at java.lang.Object.wait(Native Method)\n      - waiting on <0xd37a6010> (a java.lang.Object)\n      at java.lang.Object.wait(Object.java:485)\n      at org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:105)\n      - locked <0xd37a6010> (a java.lang.Object)\n      at org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:36)\n\n====>\n====> Queue of traffic to broker A is full - and because this is the reading thread it also stops reading....\n====>\n\"ActiveMQ Transport: tcp:///hostforA:50665\" daemon prio=10 tid=0x08430400 nid=0x61e3 waiting on condition [0xccc9b000..0xccc9b4f0]\n   java.lang.Thread.State: WAITING (parking)\n      at sun.misc.Unsafe.park(Native Method)\n      - parking to wait for  <0xd37827e8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n      at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n      at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1889)\n      at java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:254)\n      at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:92)\n      at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)\n      - locked <0xd3782640> (a java.lang.Object)\n      at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:59)\n      at org.apache.activemq.network.DemandForwardingBridgeSupport.serviceRemoteCommand(DemandForwardingBridgeSupport.java:403)\n      at org.apache.activemq.network.DemandForwardingBridgeSupport$2.onCommand(DemandForwardingBridgeSupport.java:149)\n      at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:100)\n      at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:67)\n      at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:134)\n      at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:170)\n      - locked <0xd3779350> (a org.apache.activemq.transport.InactivityMonitor$1)\n      at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)\n      at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:185)\n      at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:172)\n      at java.lang.Thread.run(Thread.java:619)\n\n\nCONSUMER CONNECTIONS\n----------------------------------------\n\n\"ActiveMQ Connection Dispatcher: /consumer1:2556\" daemon prio=10 tid=0x085b9000 nid=0x61c8 in Object.wait() [0xcd484000..0xcd484570]\n   java.lang.Thread.State: WAITING (on object monitor)\n      at java.lang.Object.wait(Native Method)\n      - waiting on <0xd37bfd00> (a java.lang.Object)\n      at java.lang.Object.wait(Object.java:485)\n      at org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:105)\n      - locked <0xd37bfd00> (a java.lang.Object)\n      at org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:36)\n\n\"ActiveMQ Transport: ssl:///consumer1:2556\" daemon prio=10 tid=0x085be000 nid=0x61c2 runnable [0xcd66a000..0xcd66a470]\n   java.lang.Thread.State: RUNNABLE\n      at java.net.SocketInputStream.socketRead0(Native Method)\n      at java.net.SocketInputStream.read(SocketInputStream.java:129)\n      at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)\n      at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)\n      at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:722)\n      - locked <0xd37c0af0> (a java.lang.Object)\n      at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:679)\n      at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)\n      - locked <0xd37c0e30> (a com.sun.net.ssl.internal.ssl.AppInputStream)\n      at org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill(TcpBufferedInputStream.java:50)\n      at org.apache.activemq.transport.tcp.TcpBufferedInputStream.read(TcpBufferedInputStream.java:58)\n      at java.io.DataInputStream.readInt(DataInputStream.java:370)\n      at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:268)\n      at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:192)\n      at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:184)\n      at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:172)\n      at java.lang.Thread.run(Thread.java:619)\n\n\n\nIt seems that B gets stuck because the queue in the VMTransport fills up.  The thread in B that stops, both blocks removal of items from the queue, and also is responsible for reading data from the A to B socket.  Therefore, all comms between A & B stops.",
        "duedate": null,
        "environment": "Linux",
        "fixVersions": [{
            "archived": false,
            "description": "",
            "id": "12315618",
            "name": "5.1.0",
            "releaseDate": "2008-05-06",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315618"
        }],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
            "id": "1",
            "name": "Blocker",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/1"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011"
            },
            "id": "12311210",
            "key": "AMQ",
            "name": "ActiveMQ",
            "projectCategory": {
                "description": "ActiveMQ",
                "id": "11160",
                "name": "ActiveMQ",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/11160"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12311210"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Sam Walton",
            "key": "samwalton",
            "name": "samwalton",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=samwalton",
            "timeZone": "Etc/UTC"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2008-04-09T18:25:48.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "Broker Network Deadlocking",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2008-04-09T18:25:48.000+0000",
        "versions": [{
            "archived": false,
            "description": "",
            "id": "12315617",
            "name": "5.0.0",
            "releaseDate": "2007-12-17",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315617"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-1641/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-1641/watchers",
            "watchCount": 0
        },
        "workratio": -1
    },
    "id": "12482321",
    "key": "AMQ-1641",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12482321"
}