{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [],
        "created": "2009-11-18T13:25:20.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Matthias Strolz",
            "key": "matthias.strolz@movilitas.com",
            "name": "matthias.strolz@movilitas.com",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=matthias.strolz%40movilitas.com",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310041": null,
        "customfield_12310080": [{
            "id": "10091",
            "self": "https://issues.apache.org/jira/rest/api/2/customFieldOption/10091",
            "value": "Regression"
        }],
        "customfield_12310220": "2009-11-18T14:12:00.743+0000",
        "customfield_12310222": "1_*:*_1_*:*_528829972_*|*_5_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "2.0",
        "customfield_12310420": "74918",
        "customfield_12310920": "161705",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0s1ev:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Nov 24 16:19:10 UTC 2009",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "The following test-programm reads and writes messages into the same queue (testQueue). After Reading several messages the class starts two threads that are writing messages in the same queue. After writing several messages the producer hangs on:\n\nproducer.send()\n\nand doesn't recover even if the reader continues reading messages from the queue. Even stopping the clients (via kill) doesn't change the broker's behaviour. In this state further connections opened from other clients hang on the same method call (producer.send()). The client's connections will remain open as you can see in the jconsole-screenshot, that has been taken after the producer in the example hung. Althogh the consumer may continue reading new producer can only continue writing messages into the queue after activeMQ has been restarted. \n\nThe following two snippets show the difference between the first (127.0.0.1:49372) and the second (127.0.0.1:49385) message producer: The first producer works as expected and adds it's messages to the queue. The second producer stops with the following log-entry: 2009-11-13 09:41:45,639 [127.0.0.1:49385] DEBUG AbstractRegion                 - Adding consumer: ID:JoergsPC-49370-1258101701975-0:14:-1:1\n\n...\n2009-11-13 09:41:42,376 [eue://testQueue] DEBUG Queue                          - queue://testQueue - Recovery - Message pushed '21290107 - Message ID:JoergsPC-50687-1258047095293-0:2810:1:1:1 dropped=false locked=false' to subscription: 'QueueSubscription: consumer=ID:JoergsPC-49370-1258101701975-0:0:1:1, destinations=1, dispatched=197, delivered=0, pending=0'\n2009-11-13 09:41:42,376 [eue://testQueue] DEBUG Queue                          - queue://testQueue - Recovery - Message pushed '31931917 - Message ID:JoergsPC-50687-1258047095293-0:2811:1:1:1 dropped=false locked=false' to subscription: 'QueueSubscription: consumer=ID:JoergsPC-49370-1258101701975-0:0:1:1, destinations=1, dispatched=198, delivered=0, pending=0'\n2009-11-13 09:41:42,376 [eue://testQueue] DEBUG Queue                          - queue://testQueue - Recovery - Message pushed '10144386 - Message ID:JoergsPC-50687-1258047095293-0:2812:1:1:1 dropped=false locked=false' to subscription: 'QueueSubscription: consumer=ID:JoergsPC-49370-1258101701975-0:0:1:1, destinations=1, dispatched=199, delivered=0, pending=0'\n2009-11-13 09:41:42,381 [127.0.0.1:49372] DEBUG WireFormatNegotiator           - Received WireFormat: WireFormatInfo { version=3, properties={CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}\n2009-11-13 09:41:42,381 [127.0.0.1:49372] DEBUG WireFormatNegotiator           - Sending: WireFormatInfo { version=3, properties={CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}\n2009-11-13 09:41:42,382 [127.0.0.1:49372] DEBUG WireFormatNegotiator           - tcp:///127.0.0.1:49372 before negotiation: OpenWireFormat{version=3, cacheEnabled=false, stackTraceEnabled=false, tightEncodingEnabled=false, sizePrefixDisabled=false}\n2009-11-13 09:41:42,394 [127.0.0.1:49372] DEBUG WireFormatNegotiator           - tcp:///127.0.0.1:49372 after negotiation: OpenWireFormat{version=3, cacheEnabled=true, stackTraceEnabled=true, tightEncodingEnabled=true, sizePrefixDisabled=false}\n2009-11-13 09:41:42,395 [127.0.0.1:49372] DEBUG TransportConnection            - Setting up new connection: /127.0.0.1:49372\n2009-11-13 09:41:42,409 [127.0.0.1:49372] DEBUG AbstractRegion                 - Adding consumer: ID:JoergsPC-49370-1258101701975-0:1:-1:1\n2009-11-13 09:41:42,414 [127.0.0.1:49372] DEBUG AbstractRegion                 - Adding destination: topic://ActiveMQ.Advisory.Producer.Queue.testQueue\n2009-11-13 09:41:42,416 [127.0.0.1:49372] DEBUG AMQMessageStore                - Journalled message add for: ID:JoergsPC-49370-1258101701975-0:1:1:1:1, at: offset = 10684963, file = 4, size = 270, type = 1\n2009-11-13 09:41:42,416 [eue://testQueue] DEBUG AMQMessageStore                - Doing batch update... adding: 1 removing: 0 \n2009-11-13 09:41:42,417 [eue://testQueue] DEBUG AMQMessageStore                - Batch update done.\n2009-11-13 09:41:42,418 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 7, to: 8\n2009-11-13 09:41:42,418 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 1, to: 2\n2009-11-13 09:41:42,425 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 8, to: 9\n2009-11-13 09:41:42,433 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 9, to: 10\n2009-11-13 09:41:42,440 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 10, to: 11\n2009-11-13 09:41:42,470 [127.0.0.1:49371] DEBUG AbstractRegion                 - Removing consumer: ID:JoergsPC-49370-1258101701975-0:0:1:1\n2009-11-13 09:41:42,474 [127.0.0.1:49371] DEBUG AMQMessageStore                - flush starting ...\n2009-11-13 09:41:42,474 [127.0.0.1:49371] DEBUG AbstractRegion                 - Removing consumer: ID:JoergsPC-49370-1258101701975-0:0:-1:1\n2009-11-13 09:41:42,477 [127.0.0.1:49371] DEBUG TransportConnection            - Stopping connection: /127.0.0.1:49371\n...\n\n\n...\n2009-11-13 09:41:45,319 [eue://testQueue] DEBUG Queue                          - queue://testQueue - Recovery - Message pushed '21569784 - Message ID:JoergsPC-50687-1258047095293-0:3422:1:1:1 dropped=false locked=false' to subscription: 'QueueSubscription: consumer=ID:JoergsPC-49370-1258101701975-0:13:1:1, destinations=1, dispatched=797, delivered=0, pending=0'\n2009-11-13 09:41:45,320 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 181, to: 182\n2009-11-13 09:41:45,327 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 182, to: 183\n2009-11-13 09:41:45,331 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 183, to: 184\n2009-11-13 09:41:45,332 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 45, to: 46\n2009-11-13 09:41:45,338 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 184, to: 185\n2009-11-13 09:41:45,344 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 185, to: 186\n2009-11-13 09:41:45,349 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 186, to: 187\n2009-11-13 09:41:45,356 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 187, to: 188\n2009-11-13 09:41:45,356 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 46, to: 47\n2009-11-13 09:41:45,442 [127.0.0.1:49384] DEBUG AbstractRegion                 - Removing consumer: ID:JoergsPC-49370-1258101701975-0:13:1:1\n2009-11-13 09:41:45,445 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 188, to: 189\n2009-11-13 09:41:45,443 [127.0.0.1:49372] DEBUG AbstractRegion                 - Removing consumer: ID:JoergsPC-49370-1258101701975-0:1:-1:1\n2009-11-13 09:41:45,632 [127.0.0.1:49372] DEBUG TransportConnection            - Stopping connection: /127.0.0.1:49372\n2009-11-13 09:41:45,632 [127.0.0.1:49372] DEBUG TcpTransport                   - Stopping transport tcp:///127.0.0.1:49372\n2009-11-13 09:41:45,632 [127.0.0.1:49372] DEBUG TransportConnection            - Stopped transport: /127.0.0.1:49372\n2009-11-13 09:41:45,632 [127.0.0.1:49372] DEBUG TransportConnection            - Connection Stopped: /127.0.0.1:49372\n2009-11-13 09:41:45,636 [127.0.0.1:49385] DEBUG WireFormatNegotiator           - Sending: WireFormatInfo { version=3, properties={CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}\n2009-11-13 09:41:45,638 [127.0.0.1:49385] DEBUG WireFormatNegotiator           - Received WireFormat: WireFormatInfo { version=3, properties={CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}\n2009-11-13 09:41:45,638 [127.0.0.1:49385] DEBUG WireFormatNegotiator           - tcp:///127.0.0.1:49385 before negotiation: OpenWireFormat{version=3, cacheEnabled=false, stackTraceEnabled=false, tightEncodingEnabled=false, sizePrefixDisabled=false}\n2009-11-13 09:41:45,638 [127.0.0.1:49385] DEBUG WireFormatNegotiator           - tcp:///127.0.0.1:49385 after negotiation: OpenWireFormat{version=3, cacheEnabled=true, stackTraceEnabled=true, tightEncodingEnabled=true, sizePrefixDisabled=false}\n2009-11-13 09:41:45,638 [127.0.0.1:49385] DEBUG TransportConnection            - Setting up new connection: /127.0.0.1:49385\n2009-11-13 09:41:45,639 [127.0.0.1:49385] DEBUG AbstractRegion                 - Adding consumer: ID:JoergsPC-49370-1258101701975-0:14:-1:1\n2009-11-13 09:41:45,641 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 189, to: 190\n2009-11-13 09:41:45,647 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 190, to: 191\n2009-11-13 09:41:45,653 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 191, to: 192\n2009-11-13 09:41:45,653 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 47, to: 48\n2009-11-13 09:41:45,658 [eue://testQueue] DEBUG Usage                          - Memory usage change.  from: 192, to: 193\n2009-11-13 09:41:45,663 [127.0.0.1:49384] DEBUG Usage                          - Memory usage change.  from: 193, to: 192\n2009-11-13 09:41:45,663 [127.0.0.1:49384] DEBUG Usage                          - Memory usage change.  from: 192, to: 191\n2009-11-13 09:41:45,663 [127.0.0.1:49384] DEBUG Usage                          - Memory usage change.  from: 48, to: 47\n2009-11-13 09:41:45,663 [127.0.0.1:49384] DEBUG Usage                          - Memory usage change.  from: 191, to: 190\n2009-11-13 09:41:45,664 [127.0.0.1:49384] DEBUG Usage                          - Memory usage change.  from: 190, to: 189\n2009-11-13 09:41:45,664 [127.0.0.1:49384] DEBUG AMQMessageStore                - flush starting ...\n2009-11-13 09:41:45,664 [127.0.0.1:49384] DEBUG AbstractRegion                 - Removing consumer: ID:JoergsPC-49370-1258101701975-0:13:-1:1\n2009-11-13 09:41:45,665 [127.0.0.1:49384] DEBUG TransportConnection            - Stopping connection: /127.0.0.1:49384\n...\n\n\n",
        "duedate": null,
        "environment": "JDK 1.6.0.x, Windows XP and Vista, ActiveMQ Default-configurations",
        "fixVersions": [{
            "archived": false,
            "description": "",
            "id": "12315620",
            "name": "5.3.0",
            "releaseDate": "2009-10-13",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315620"
        }],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011"
            },
            "id": "12311210",
            "key": "AMQ",
            "name": "ActiveMQ",
            "projectCategory": {
                "description": "ActiveMQ",
                "id": "11160",
                "name": "ActiveMQ",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/11160"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12311210"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Matthias Strolz",
            "key": "matthias.strolz@movilitas.com",
            "name": "matthias.strolz@movilitas.com",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=matthias.strolz%40movilitas.com",
            "timeZone": "Etc/UTC"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2009-11-24T16:19:10.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "Active MQ Blocks when sending and receiving messages and doesn't release resources even after queue is empty",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2009-11-24T16:19:10.000+0000",
        "versions": [{
            "archived": false,
            "description": "",
            "id": "12315619",
            "name": "5.2.0",
            "releaseDate": "2008-11-20",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315619"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-2500/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-2500/watchers",
            "watchCount": 1
        },
        "workratio": -1
    },
    "id": "12483169",
    "key": "AMQ-2500",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12483169"
}