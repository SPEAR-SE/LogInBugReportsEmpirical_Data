{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [{
            "description": "LevelDB based message store",
            "id": "12320200",
            "name": "activemq-leveldb-store",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12320200"
        }],
        "created": "2014-06-19T13:37:52.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "anselme dewavrin",
            "key": "adewavrin",
            "name": "adewavrin",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=adewavrin",
            "timeZone": "Europe/Berlin"
        },
        "customfield_10010": null,
        "customfield_12310041": null,
        "customfield_12310080": null,
        "customfield_12310220": "2014-06-19T13:55:27.279+0000",
        "customfield_12310222": "1_*:*_1_*:*_82978111303_*|*_6_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310420": "400691",
        "customfield_12310920": "400785",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i1wz3j:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Fri Feb 03 23:06:23 UTC 2017",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "Dear all,\n\nWe have an activemq 5.9 configured with 1GB of tempUsage allowed. Just by security because we only use persistent messages (about 6000 messages per day). After severall days of use, the temp usage increases, and even shows values that are above the total amount of the data on disk. Here it shows 45% of its 1GB limit for the following files :\n\nfind activemq-data -ls\n76809801    4 drwxr-xr-x   5 anselme  anselme      4096 Jun 19 10:24 activemq-data\n76809813    4 -rw-r--r--   1 anselme  anselme        24 Jun 16 16:13 activemq-data/store-version.txt\n76809817    4 drwxr-xr-x   2 anselme  anselme      4096 Jun 16 16:13 activemq-data/dirty.index\n76809811    4 -rw-r--r--   2 anselme  anselme      2437 Jun 16 12:06 activemq-data/dirty.index/000008.sst\n76809820    4 -rw-r--r--   1 anselme  anselme        16 Jun 16 16:13 activemq-data/dirty.index/CURRENT\n76809819   80 -rw-r--r--   1 anselme  anselme     80313 Jun 16 16:13 activemq-data/dirty.index/000011.sst\n76809822    0 -rw-r--r--   1 anselme  anselme         0 Jun 16 16:13 activemq-data/dirty.index/LOCK\n76809810  300 -rw-r--r--   2 anselme  anselme    305206 Jun 16 11:51 activemq-data/dirty.index/000005.sst\n76809821 2048 -rw-r--r--   1 anselme  anselme   2097152 Jun 19 11:30 activemq-data/dirty.index/000012.log\n76809818 1024 -rw-r--r--   1 anselme  anselme   1048576 Jun 16 16:13 activemq-data/dirty.index/MANIFEST-000010\n76809816    0 -rw-r--r--   1 anselme  anselme         0 Jun 16 16:13 activemq-data/lock\n76809815 102400 -rw-r--r--   1 anselme  anselme  104857600 Jun 19 11:30 activemq-data/0000000000f0faaf.log\n76809823 102400 -rw-r--r--   1 anselme  anselme  104857600 Jun 16 11:50 activemq-data/0000000000385f46.log\n76809807    4 drwxr-xr-x   2 anselme  anselme      4096 Jun 16 16:13 activemq-data/0000000000f0faaf.index\n76809808  420 -rw-r--r--   1 anselme  anselme    429264 Jun 16 16:13 activemq-data/0000000000f0faaf.index/000009.log\n76809811    4 -rw-r--r--   2 anselme  anselme      2437 Jun 16 12:06 activemq-data/0000000000f0faaf.index/000008.sst\n76809812    4 -rw-r--r--   1 anselme  anselme       165 Jun 16 16:13 activemq-data/0000000000f0faaf.index/MANIFEST-000007\n76809809    4 -rw-r--r--   1 anselme  anselme        16 Jun 16 16:13 activemq-data/0000000000f0faaf.index/CURRENT\n76809810  300 -rw-r--r--   2 anselme  anselme    305206 Jun 16 11:51 activemq-data/0000000000f0faaf.index/000005.sst\n76809814 102400 -rw-r--r--   1 anselme  anselme  104857600 Jun 12 21:06 activemq-data/0000000000000000.log\n76809802    4 drwxr-xr-x   2 anselme  anselme      4096 Jun 16 16:13 activemq-data/plist.index\n76809803    4 -rw-r--r--   1 anselme  anselme        16 Jun 16 16:13 activemq-data/plist.index/CURRENT\n76809806    0 -rw-r--r--   1 anselme  anselme         0 Jun 16 16:13 activemq-data/plist.index/LOCK\n76809805 1024 -rw-r--r--   1 anselme  anselme   1048576 Jun 16 16:13 activemq-data/plist.index/000003.log\n76809804 1024 -rw-r--r--   1 anselme  anselme   1048576 Jun 16 16:13 activemq-data/plist.index/MANIFEST-000002\n\n\nThe problem is that in our production system it once blocked producers with a tempusage at 122%, even if the disk was empty.\n\nSo we invesigated and executed the broker in a debugger, and found how the usage is calculated. If it in the scala leveldb files : It is not based on what  is on disk, but on what it thinks is on the disk. It multiplies the size of one log by the number of logs known by a certain hashmap.\n\nI think the entries of  the hashmap are not removed when the log files are purged.\n\nCould you confirm ?\n\nThanks in advance \nAnselme",
        "duedate": null,
        "environment": "debian (quality testing and production)",
        "fixVersions": [],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011"
            },
            "id": "12311210",
            "key": "AMQ",
            "name": "ActiveMQ",
            "projectCategory": {
                "description": "ActiveMQ",
                "id": "11160",
                "name": "ActiveMQ",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/11160"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12311210"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "anselme dewavrin",
            "key": "adewavrin",
            "name": "adewavrin",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=adewavrin",
            "timeZone": "Europe/Berlin"
        },
        "resolution": {
            "description": "The problem described is an issue which will never be fixed.",
            "id": "2",
            "name": "Won't Fix",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/2"
        },
        "resolutiondate": "2017-02-03T23:06:23.000+0000",
        "status": {
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "id": "6",
            "name": "Closed",
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "erroneous temp percent used",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2017-02-03T23:06:23.000+0000",
        "versions": [{
            "archived": false,
            "id": "12323932",
            "name": "5.9.0",
            "releaseDate": "2013-10-21",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12323932"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-5235/votes",
            "votes": 1
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-5235/watchers",
            "watchCount": 4
        },
        "workratio": -1
    },
    "id": "12722500",
    "key": "AMQ-5235",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12722500"
}