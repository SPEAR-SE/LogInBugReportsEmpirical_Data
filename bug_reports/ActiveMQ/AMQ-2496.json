{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Gary Tully",
            "key": "gtully",
            "name": "gtully",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=gtully",
            "timeZone": "Etc/UTC"
        },
        "components": [{
            "id": "12313892",
            "name": "Broker",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12313892"
        }],
        "created": "2009-11-16T18:15:29.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "hiskill",
            "key": "hiskill",
            "name": "hiskill",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hiskill",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310041": null,
        "customfield_12310080": null,
        "customfield_12310220": "2009-11-19T10:24:18.051+0000",
        "customfield_12310222": "1_*:*_1_*:*_42504812806_*|*_5_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310420": "46507",
        "customfield_12310920": "255256",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i182sv:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Mar 23 17:29:05 UTC 2011",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "Env:\n- ActiveMQ 5.3.0\n- deployed as RAR on JBoss\n- database : MS SQL 2008\n\nWhen the broker starts up for the first time, table ACTIVEMQ_MSGS  is not getting created automatically which throws the below exception and the broker never comes up.\n\nReason: java.io.IOException: Failed to get last broker message id: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'ACTIVEMQ_MSGS'.\njava.io.IOException: Failed to get last broker message id: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'ACTIVEMQ_MSGS'.\nat org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:33)\nat org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.getLastMessageBrokerSequenceId(JDBCPersistenceAdapter.java:170)\nat org.apache.activemq.store.journal.JournalPersistenceAdapter.getLastMessageBrokerSequenceId(JournalPersistenceAdapter.java:212)\nat org.apache.activemq.broker.region.DestinationFactoryImpl.getLastMessageBrokerSequenceId(DestinationFactoryImpl.java:140)\nat org.apache.activemq.broker.region.RegionBroker.<init>(RegionBroker.java:106)\nat org.apache.activemq.broker.jmx.ManagedRegionBroker.<init>(ManagedRegionBroker.java:94)\nat org.apache.activemq.broker.BrokerService.createRegionBroker(BrokerService.java:1695)\nat org.apache.activemq.broker.BrokerService.createRegionBroker(BrokerService.java:1689)\nat org.apache.activemq.broker.BrokerService.createBroker(BrokerService.java:1649)\nat org.apache.activemq.broker.BrokerService.getBroker(BrokerService.java:667)\nat org.apache.activemq.broker.BrokerService.getAdminConnectionContext(BrokerService.java:1866)\nat org.apache.activemq.broker.BrokerService.startDestinations(BrokerService.java:1853)\nat org.apache.activemq.broker.BrokerService.start(BrokerService.java:450)\nat org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:56)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)\n\nOnly workaround is to create the table ACTIVEMQ_MSGS manually and restart the broker.\n\nHere is my broker-config.xml :\n\n<beans xmlns=\"http://activemq.apache.org/schema/core\">\n\n  <bean xmlns=\"\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"/>\n    \n  <bean xmlns=\"\" id=\"my-ds\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\">\n       <property name=\"driverClassName\" value=\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"/>\n       <property name=\"url\" value=\"jdbc:sqlserver://mydb:1433;databaseName=myds\"/>\n       <property name=\"username\" value=\"sql\"/>\n       <property name=\"password\" value=\"sql\"/>\n       <property name=\"initialSize\" value=\"10\"/>\n       <property name=\"poolPreparedStatements\" value=\"true\"/>\n  <\/bean>\n  \n  <!--  shutdown hook is disabled as RAR classloader may be gone at shutdown -->\n  <broker useJmx=\"true\" brokerName=\"sample.broker1\" useShutdownHook=\"false\">\n\n     <destinations>\n\t    <topic physicalName=\"pocket\" />\n     <\/destinations>\n    \n     <managementContext>\n       <!-- use appserver provided context instead of creating one,\n            for jboss use: -Djboss.platform.mbeanserver -->\n       <managementContext createConnector=\"false\"/>\n     <\/managementContext>\n\n    <persistenceAdapter>\n      \t<!-- <amqPersistenceAdapter syncOnWrite=\"false\" directory=\"${jboss.server.data.dir}/activemq\" maxFileLength=\"20 mb\"/>  -->\n        <!-- <journaledJDBC journalLogFiles=\"5\" dataDirectory=\"${jboss.server.data.dir}/activemq\"/> -->\n        <!-- To use a different datasource, use th following syntax : -->\n            \n        <!-- <kahaPersistenceAdapter directory=\"${jboss.server.data.dir}/activemq\" maxDataFileLength=\"33554432\"/> -->\n      \n     \t<journaledJDBC journalLogFiles=\"5\" dataDirectory=\"${jboss.server.data.dir}/activemq\" dataSource=\"#my-ds\" useDatabaseLock=\"false\" />\n     \t\n    <\/persistenceAdapter>\n    \n    <transportConnectors>\n      \t<transportConnector name=\"sample.broker1\" uri=\"tcp://localhost:3030\" discoveryUri=\"multicast://default\"/>\n    <\/transportConnectors>\n    \n  <\/broker>\n<\/beans>\n\n\nNote that I don't see the issue with MSSQL 2000 2005, not sure whats the problem with 2008 version.\nLet me know if there is any cofiguration missing which would resolve the issue with MS SQL 2008 and any other databases which could have the sample problem.\n",
        "duedate": null,
        "environment": "MS SQL 2008",
        "fixVersions": [{
            "archived": false,
            "description": "",
            "id": "12315626",
            "name": "5.5.0",
            "releaseDate": "2011-04-01",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315626"
        }],
        "issuelinks": [{
            "id": "12338222",
            "outwardIssue": {
                "fields": {
                    "issuetype": {
                        "avatarId": 21140,
                        "description": "An improvement or enhancement to an existing feature or task.",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                        "id": "4",
                        "name": "Improvement",
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                        "subtask": false
                    },
                    "priority": {
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "id": "3",
                        "name": "Major",
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                    },
                    "status": {
                        "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
                        "id": "5",
                        "name": "Resolved",
                        "self": "https://issues.apache.org/jira/rest/api/2/status/5",
                        "statusCategory": {
                            "colorName": "green",
                            "id": 3,
                            "key": "done",
                            "name": "Done",
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                        }
                    },
                    "summary": "Add support of MS SQL JDBC driver (version 3.0)"
                },
                "id": "12495487",
                "key": "AMQ-3134",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/12495487"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12338222",
            "type": {
                "id": "10001",
                "inward": "is depended upon by",
                "name": "dependent",
                "outward": "depends upon",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"
            }
        }],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011"
            },
            "id": "12311210",
            "key": "AMQ",
            "name": "ActiveMQ",
            "projectCategory": {
                "description": "ActiveMQ",
                "id": "11160",
                "name": "ActiveMQ",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/11160"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12311210"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "hiskill",
            "key": "hiskill",
            "name": "hiskill",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hiskill",
            "timeZone": "Etc/UTC"
        },
        "resolution": {
            "description": "The problem is a duplicate of an existing issue.",
            "id": "3",
            "name": "Duplicate",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/3"
        },
        "resolutiondate": "2011-03-23T17:09:02.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "journaledJDBC not creating ACTIVEMQ_MSGS with MS SQL 2008",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2013-05-02T02:29:37.000+0000",
        "versions": [{
            "archived": false,
            "description": "",
            "id": "12315620",
            "name": "5.3.0",
            "releaseDate": "2009-10-13",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315620"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-2496/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-2496/watchers",
            "watchCount": 2
        },
        "workratio": -1
    },
    "id": "12483603",
    "key": "AMQ-2496",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12483603"
}