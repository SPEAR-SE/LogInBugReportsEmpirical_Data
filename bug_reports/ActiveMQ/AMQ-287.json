{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Ramzi Saba",
            "key": "rsaba",
            "name": "rsaba",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rsaba",
            "timeZone": "Etc/UTC"
        },
        "components": [{
            "id": "12313892",
            "name": "Broker",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12313892"
        }],
        "created": "2005-07-05T15:09:26.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Ramzi Saba",
            "key": "rsaba",
            "name": "rsaba",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rsaba",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310041": null,
        "customfield_12310080": null,
        "customfield_12310220": null,
        "customfield_12310222": "3_*:*_1_*:*_86572000_*|*_1_*:*_1_*:*_8000_*|*_5_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310420": "49006",
        "customfield_12310920": "161674",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0s17z:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Jul 06 15:12:26 UTC 2005",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "Per Christopher Kingsbury:\n\nHi Ramzi,\n\nI just tested against the latest in SVN, and it seems to have fixed the 80 megs of log messages.  However, the brokers don't seem to reconnect properly.   Here is how I was able to reproduce this problem.\n\n   1. Remove all contents of the var directories in alpha and beta\n   2. Startup Alpha, and wait until it logs \"ActiveMQ JMS Message Broker (alpha) has started\"\n   3. Startup Beta, and wait until it logs \"Started NetworkChannel to tcp://localhost:61616\"\n   4. Startup example consumer, pointed to alpha \"ant consumer -Durl=tcp://localhost:61616\"\n   5. Startup producer, pointed at beta \"ant producer  -Durl= tcp://localhost:61617\".  Messages are successfully delivered\n   6. Kill beta via kill command\n   7. Restart beta, and wait for \"Started NetworkChannel to tcp://localhost:61616\"\n   8. Startup example consumer, pointed to alpha.  It doesn't log any, however the Alpha broker then logs the following error\n\n    00:57:20 ERROR Failed to start NetworkMessageBridge for destination: TEST.FOO\n    org.activemq.ConnectionClosedException: The connection is already closed\n            at org.activemq.ActiveMQConnection.checkClosed(ActiveMQConnection.java:811)\n            at org.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:446)\n            at org.activemq.transport.NetworkChannel.createBridge(NetworkChannel.java:416)\n            at org.activemq.transport.NetworkChannel.addConsumerInfo(NetworkChannel.java:385)\n            at org.activemq.transport.NetworkChannel.addConsumerInfo(NetworkChannel.java:379)\n            at org.activemq.transport.NetworkChannel.access$200(NetworkChannel.java:53)\n            at org.activemq.transport.NetworkChannel$2.run(NetworkChannel.java:237)\n            at EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(Unknown Source)\n            at java.lang.Thread.run(Thread.java:595)\n\n   9. Startup example producer, pointed to beta.  Messages are not delivered to the consumer\n\nInteresting thing is that if I kill and restart alpha instead of beta (in the both test case), the producer/consumer works fine after the restart.  I've attached the logfiles and config files.\n\nThanks for your help.\nChris\n\n\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE beans PUBLIC  \"-//ACTIVEMQ//DTD//EN\" \"http://activemq.org/dtd/activemq.dtd\">\n<beans>\n  \n  <!-- ==================================================================== -->\n  <!-- ActiveMQ Broker Configuration -->\n  <!-- ==================================================================== -->\n  <broker name=\"alpha\">\n    <connector>\n      <tcpServerTransport uri=\"tcp://localhost:61616\" backlog=\"1000\" useAsyncSend=\"true\" maxOutstandingMessages=\"50\"/>\n    <\/connector>\n\n    <discoveryAgent>\n      <zeroconfDiscovery type=\"_activemq.broker.development.\"/>\n    <\/discoveryAgent>\n    <discoveryNetworkConnector/>\n\n    <persistence>\n      <cachePersistence>\n        <journalPersistence directory=\"../var/journal\">\n          <jdbcPersistence dataSourceRef=\"derby-ds\"/>\n\n          <!-- Choose one of the following three configurationss to work with mysql-ds-->\n          <!--\n          <jdbcPersistence dataSourceRef=\"mysql-ds\"\n                         adapterClass=\"org.activemq.store.jdbc.adapter.BytesJDBCAdaptor\"/>\n          <jdbcPersistence dataSourceRef=\"mysql-ds\"\n                         adapterClass=\"org.activemq.store.jdbc.adapter.BlobJDBCAdaptor\"/>\n          <jdbcPersistence dataSourceRef=\"mysql-ds\"\n                         adapterClass=\"org.activemq.store.jdbc.adapter.StreamJDBCAdaptor\"/>\n          -->\n        <\/journalPersistence>\n      <\/cachePersistence>\n    <\/persistence>\n  <\/broker>\n\n  <!-- ==================================================================== -->\n  <!-- JDBC DataSource Configurations -->\n  <!-- ==================================================================== -->\n\n  <!-- The Derby Datasource that will be used by the Broker -->\n  <bean id=\"derby-ds\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\">\n    <property name=\"driverClassName\">\n      <value>org.apache.derby.jdbc.EmbeddedDriver<\/value>\n    <\/property>\n    <property name=\"url\">\n      <!-- Use a URL like 'jdbc:hsqldb:hsql://localhost:9001' if you want to connect to a remote hsqldb -->\n      <value>jdbc:derby:derbydb;create=true<\/value>\n    <\/property>\n    <property name=\"username\">\n      <value><\/value>\n    <\/property>\n    <property name=\"password\">\n      <value><\/value>\n    <\/property>\n    <property name=\"poolPreparedStatements\">\n      <value>true<\/value>\n    <\/property>\n  <\/bean>\n\n  <!-- The MYSQL Datasource that will be used by the Broker -->\n  <bean id=\"mysql-ds\"\n    class=\"org.apache.commons.dbcp.BasicDataSource\"\n    destroy-method=\"close\">\n    <property name=\"driverClassName\">\n      <value>com.mysql.jdbc.Driver<\/value>\n    <\/property>\n    <property name=\"url\">\n      <value>jdbc:mysql://localhost/activemq<\/value>\n    <\/property>\n    <property name=\"username\">\n      <value>myname<\/value>\n    <\/property>\n    <property name=\"password\">\n      <value>mypassword<\/value>\n    <\/property>\n    <property name=\"poolPreparedStatements\">\n      <value>true<\/value>\n    <\/property>\n  <\/bean>\n\n\n<\/beans>\n\n\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE beans PUBLIC  \"-//ACTIVEMQ//DTD//EN\" \"http://activemq.org/dtd/activemq.dtd\">\n<beans>\n  \n  <!-- ==================================================================== -->\n  <!-- ActiveMQ Broker Configuration -->\n  <!-- ==================================================================== -->\n  <broker name=\"beta\">\n    <connector>\n      <tcpServerTransport uri=\"tcp://localhost:61617\" backlog=\"1000\" useAsyncSend=\"true\" maxOutstandingMessages=\"50\"/>\n    <\/connector>\n\n    <discoveryAgent>\n      <zeroconfDiscovery type=\"_activemq.broker.development.\"/>\n    <\/discoveryAgent>\n    <discoveryNetworkConnector/>\n\n    <persistence>\n      <cachePersistence>\n        <journalPersistence directory=\"../var/journal\">\n          <jdbcPersistence dataSourceRef=\"derby-ds\"/>\n\n          <!-- Choose one of the following three configurationss to work with mysql-ds-->\n          <!--\n          <jdbcPersistence dataSourceRef=\"mysql-ds\"\n                         adapterClass=\"org.activemq.store.jdbc.adapter.BytesJDBCAdaptor\"/>\n          <jdbcPersistence dataSourceRef=\"mysql-ds\"\n                         adapterClass=\"org.activemq.store.jdbc.adapter.BlobJDBCAdaptor\"/>\n          <jdbcPersistence dataSourceRef=\"mysql-ds\"\n                         adapterClass=\"org.activemq.store.jdbc.adapter.StreamJDBCAdaptor\"/>\n          -->\n        <\/journalPersistence>\n      <\/cachePersistence>\n    <\/persistence>\n  <\/broker>\n\n  <!-- ==================================================================== -->\n  <!-- JDBC DataSource Configurations -->\n  <!-- ==================================================================== -->\n\n  <!-- The Derby Datasource that will be used by the Broker -->\n  <bean id=\"derby-ds\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\">\n    <property name=\"driverClassName\">\n      <value>org.apache.derby.jdbc.EmbeddedDriver<\/value>\n    <\/property>\n    <property name=\"url\">\n      <!-- Use a URL like 'jdbc:hsqldb:hsql://localhost:9001' if you want to connect to a remote hsqldb -->\n      <value>jdbc:derby:derbydb;create=true<\/value>\n    <\/property>\n    <property name=\"username\">\n      <value><\/value>\n    <\/property>\n    <property name=\"password\">\n      <value><\/value>\n    <\/property>\n    <property name=\"poolPreparedStatements\">\n      <value>true<\/value>\n    <\/property>\n  <\/bean>\n\n  <!-- The MYSQL Datasource that will be used by the Broker -->\n  <bean id=\"mysql-ds\"\n    class=\"org.apache.commons.dbcp.BasicDataSource\"\n    destroy-method=\"close\">\n    <property name=\"driverClassName\">\n      <value>com.mysql.jdbc.Driver<\/value>\n    <\/property>\n    <property name=\"url\">\n      <value>jdbc:mysql://localhost/activemq<\/value>\n    <\/property>\n    <property name=\"username\">\n      <value>myname<\/value>\n    <\/property>\n    <property name=\"password\">\n      <value>mypassword<\/value>\n    <\/property>\n    <property name=\"poolPreparedStatements\">\n      <value>true<\/value>\n    <\/property>\n  <\/bean>\n\n\n<\/beans>\n\n",
        "duedate": null,
        "environment": null,
        "fixVersions": [{
            "archived": false,
            "id": "12315601",
            "name": "3.1",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315601"
        }],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011"
            },
            "id": "12311210",
            "key": "AMQ",
            "name": "ActiveMQ",
            "projectCategory": {
                "description": "ActiveMQ",
                "id": "11160",
                "name": "ActiveMQ",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/11160"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12311210"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Ramzi Saba",
            "key": "rsaba",
            "name": "rsaba",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=rsaba",
            "timeZone": "Etc/UTC"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2005-07-06T15:12:26.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "zeroconfDiscovery fails to restore disconnect channel",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2005-07-06T15:12:26.000+0000",
        "versions": [{
            "archived": false,
            "id": "12315600",
            "name": "3.0",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12315600"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-287/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-287/watchers",
            "watchCount": 0
        },
        "workratio": -1
    },
    "id": "12481045",
    "key": "AMQ-287",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12481045"
}