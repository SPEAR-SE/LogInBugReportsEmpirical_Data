{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [{
            "description": "AcitveMQ's AMQP Transport",
            "id": "12321807",
            "name": "AMQP",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12321807"
        }],
        "created": "2016-12-07T21:49:50.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Patrick Vansevenant",
            "key": "patrickv",
            "name": "patrickv",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=patrickv",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310041": null,
        "customfield_12310080": null,
        "customfield_12310220": "2016-12-07T22:34:02.253+0000",
        "customfield_12310222": "1_*:*_1_*:*_2746542_*|*_6_*:*_1_*:*_0",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "4.0",
        "customfield_12310420": "9223372036854775807",
        "customfield_12310920": "9223372036854775807",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i37bev:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Wed Dec 07 22:35:37 UTC 2016",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "I'm talking about queues with a low message volume and high processing time. In such a setup is it important that messages are not \"heaping up\" in the dispatch queue. The queueprefetch must be one in order to keep it workable. \n\nI have done a test with an ActiveMQ 5.14.1 broker and an AMQP consumer with a brokerURL configured with a queuePrefetch of one (jms.prefetchPolicy.queuePrefetch=1). \n\nI have the impression that the Dispatched Queue contains two messages during the period that a message is received and the time the acknowledgement is sent (clientacknowlegde mode). \n\nThe consumer details in the ActiveMQ Web Console tells me that the \"Dispatched Queue\" contains indeed two messages at that moment in time what should maximum be one with a defined queuePrefetch of one. \n\n!5.14.1 - queueprefetch of one -  max dispatched queue is two.png!\n\nWhen I do the same test with an ActiveMQ 5.13.3 broker then the Dispatched Queue contains maximum one message at any point in time, what is more correct in my opinion.\n\n!5.13.3 - queueprefetch of one -  max dispatched queue is one.png!\n\nI have created a unit test that shows the difference between ActiveMQ 5.13.3 and 5.14.1. The test consists of two asynchronous consumers and one sender. When the first consumer receives a first message then the onMessage thread will block before the message is acked. The second consumer should consume all the other messages.\n\nThe unit test sends four messages. With ActiveMQ 5.13.3 are all the four messages consumed (unit test passes). With ActiveMQ 5.14.1 are only three of the four messages consumed (unit test fails) because one of the messages stays in the Dispatched Queue. \n\nPlease find below my unit test and the corresponding activemq config :\n* [^JmsClientUnitTest.java] \n* [^activemq.xml]\n",
        "duedate": null,
        "environment": null,
        "fixVersions": [],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011"
            },
            "id": "12311210",
            "key": "AMQ",
            "name": "ActiveMQ",
            "projectCategory": {
                "description": "ActiveMQ",
                "id": "11160",
                "name": "ActiveMQ",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/11160"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12311210"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Patrick Vansevenant",
            "key": "patrickv",
            "name": "patrickv",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=patrickv",
            "timeZone": "Etc/UTC"
        },
        "resolution": {
            "description": "The described issue is not actually a problem - it is as designed.",
            "id": "8",
            "name": "Not A Problem",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/8"
        },
        "resolutiondate": "2016-12-07T22:35:35.000+0000",
        "status": {
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "id": "6",
            "name": "Closed",
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "A configured queuePrefetch of one in ActiveMQ 5.14.1 with AMQP 1.0 behaves like a queuePrefetch of two.",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2016-12-07T22:35:37.000+0000",
        "versions": [{
            "archived": false,
            "id": "12338124",
            "name": "5.14.1",
            "releaseDate": "2016-09-30",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12338124"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-6530/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/AMQ-6530/watchers",
            "watchCount": 2
        },
        "workratio": -1
    },
    "id": "13026489",
    "key": "AMQ-6530",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13026489"
}