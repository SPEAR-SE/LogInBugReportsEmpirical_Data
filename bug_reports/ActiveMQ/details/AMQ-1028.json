{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481870","self":"https://issues.apache.org/jira/rest/api/2/issue/12481870","key":"AMQ-1028","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315612","id":"12315612","description":"","name":"4.0.2","archived":false,"released":true,"releaseDate":"2006-07-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2006-11-09T20:30:34.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Nov 10 13:08:57 UTC 2006","customfield_12310420":"84426","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_268230000_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2006-11-10T10:22:29.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1028/watchers","watchCount":1,"isWatching":false},"created":"2006-11-07T07:51:59.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315612","id":"12315612","description":"","name":"4.0.2","archived":false,"released":true,"releaseDate":"2006-07-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-11-10T13:08:57.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"The ActiveMQ stand alone server seems to stop dispatching messages to topics after a period of time. \n\nNew clients can connect... new subscriptions to topics can be made... no errors are shown... messages are just not sent... including to and from the new clients...\n\nNo errors or warnings can be found in the ActiveMQ.log (even in debug mode)\n\nJConsole doesn't show the new messages coming in (EnqueueCount doesn't change)\n\nStomp Protocol is used exclusively","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172234","customfield_12312823":null,"summary":"AMQ Stops dispatching messages after a period of time without errors/warnings","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vanbeek","name":"vanbeek","key":"vanbeek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bas van Beek","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vanbeek","name":"vanbeek","key":"vanbeek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bas van Beek","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Os: Ubuntu Linux i386 - Java: J2RE SE 1.5.0_08-b03","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481870/comment/12938478","id":"12938478","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aco","name":"aco","key":"aco","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adrian Co","active":true,"timeZone":"Etc/UTC"},"body":"Could you provide more details of the setup?\n\nAre you using a cluster of brokers or a standalone broker?\n\nAre you using the default persistence adapter?\n\nAre you sending persistent messages or non-persistent messages?\n\nDo you have durable subscribers or non-durable subscribers?\n\nAre your subscribers connected all the time and is consuming messages every time?\n\nIf you can provide a small test case to replicate this issue, it will make it easier to fix. :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aco","name":"aco","key":"aco","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adrian Co","active":true,"timeZone":"Etc/UTC"},"created":"2006-11-09T20:30:34.000+0000","updated":"2006-11-09T20:30:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481870/comment/12938467","id":"12938467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vanbeek","name":"vanbeek","key":"vanbeek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bas van Beek","active":true,"timeZone":"Etc/UTC"},"body":"major oops...\n\nI set  \"ack:client \" in the stomp subscription header and acknowlegded incorrect message id's... \n\nReason I didn't see anything in the logs was because of a filesystem error... after a reboot and filesystem fix\nthe log informed me of used memory getting full...\n\nI do think it's a problem that a consumer behaving badly can bring the entire messaging system down...\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vanbeek","name":"vanbeek","key":"vanbeek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bas van Beek","active":true,"timeZone":"Etc/UTC"},"created":"2006-11-10T10:22:29.000+0000","updated":"2006-11-10T10:22:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481870/comment/12938625","id":"12938625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"A badly behaved consumer can't bring the entire messaging system down. Dealing with slow consumers on non-persistent messaging is a common problem though - either increase the RAM, enforce persistence or use slow consumer handling...\n\nhttp://incubator.apache.org/activemq/slow-consumer-handling.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2006-11-10T10:25:44.000+0000","updated":"2006-11-10T10:25:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481870/comment/12938645","id":"12938645","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vanbeek","name":"vanbeek","key":"vanbeek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bas van Beek","active":true,"timeZone":"Etc/UTC"},"body":"\nWell at the moment it does bring the system \"down\" in a way...\n\none consumer subscribed (with ack:client) on topic FOO behaves badly by not correctly consuming it's messages (not acknowledging them).\n\nEffect... the messaging system's RAM usage is increasing until it's depleted of available space and all subscribers (also the ones on topic BAR) stop\nreceiving messages. \n\nNow imagine the badly behaving consumer being killed without closing the TCP transport like it should and the effect is the system is still not processing\nmessages until that subscription times out (I'm not sure if it even does this... I have the distinct feeling I saw lingering subscriptions even when the connection was\nclosed correctly... but I'll check that next week when back at the office again...\n\nin my opinion it should never be possible to let a consumer lock up the system like this... ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vanbeek","name":"vanbeek","key":"vanbeek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bas van Beek","active":true,"timeZone":"Etc/UTC"},"created":"2006-11-10T13:08:57.000+0000","updated":"2006-11-10T13:08:57.000+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1028/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tuef:"}}