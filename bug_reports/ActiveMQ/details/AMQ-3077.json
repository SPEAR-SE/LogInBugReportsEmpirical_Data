{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12492805","self":"https://issues.apache.org/jira/rest/api/2/issue/12492805","key":"AMQ-3077","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315626","id":"12315626","description":"","name":"5.5.0","archived":false,"released":true,"releaseDate":"2011-04-01"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-12-09T10:16:49.213+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Mar 15 08:02:09 UTC 2011","customfield_12310420":"14705","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3044017200_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-01-13T14:26:12.699+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3077/watchers","watchCount":3,"isWatching":false},"created":"2010-12-09T08:52:35.499+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315624","id":"12315624","description":"Maintenance release for 5.4.0","name":"5.4.1","archived":false,"released":true,"releaseDate":"2010-09-21"}],"issuelinks":[{"id":"12336884","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12336884","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"12483854","key":"AMQ-2632","self":"https://issues.apache.org/jira/rest/api/2/issue/12483854","fields":{"summary":"Update client connections with information about a cluster of networked brokers","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-03-15T08:02:09.856+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Exception in thread \"BrokerService[SUP-tterdp31v] Task\" java.lang.ArrayIndexOutOfBoundsException: -32767\n        at org.apache.activemq.openwire.BooleanStream.writeBoolean(BooleanStream.java:54)\n        at org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:377)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n        at org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:397)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n        at org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:397)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n        at org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:397)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n        at org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:397)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n        at org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:397)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n        at org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:397)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n        at org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:397)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n        at org.apache.activemq.openwire.OpenWireFormat.marshal(OpenWireFormat.java:228)\n        at org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:181)\n        at org.apache.activemq.transport.InactivityMonitor.oneway(InactivityMonitor.java:255)\n        at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:85)\n        at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:104)\n        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)\n        at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1249)\n        at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:810)\n        at org.apache.activemq.broker.TransportConnection.iterate(TransportConnection.java:846)\n        at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)\n        at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:619)\n\nToday this exception is not written in ActiveMQ logs but on the standard output. \nIt seems that happens when network of brokers connections are stopped, but I'm not sure at all. (the number of \"bridge to ... stopped\" seems to be the same as the number of Exceptions detected)\n\nSo I need to dig into this problem to be more precise.\n\nEric-AWL","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466452","id":"12466452","filename":"activemq_Serveur.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T09:21:49.170+0000","size":3641,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12466452/activemq_Serveur.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466453","id":"12466453","filename":"activemq_SIBBusModule.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T09:21:49.233+0000","size":4739,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12466453/activemq_SIBBusModule.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466454","id":"12466454","filename":"activemq_SIBBusSupervisor.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T09:21:49.257+0000","size":13781,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12466454/activemq_SIBBusSupervisor.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466389","id":"12466389","filename":"bsm.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-16T15:45:21.347+0000","size":23277,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12466389/bsm.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466628","id":"12466628","filename":"NetworkOfTwentyBrokersTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T13:23:14.529+0000","size":4581,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12466628/NetworkOfTwentyBrokersTest.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466626","id":"12466626","filename":"TransportConnection.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T13:23:14.446+0000","size":58047,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12466626/TransportConnection.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466627","id":"12466627","filename":"TransportConnector.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T13:23:14.505+0000","size":18357,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12466627/TransportConnector.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"59016","customfield_12312823":null,"summary":"ArraysIndexOutOfBoundsException : -32768 in \"BrokerService[xxx] Task\" thread","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux, Java 6, Fuse Message Brokers 5.4.0-1 or 5.4.1-1","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12969680","id":"12969680","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elisa41","name":"elisa41","key":"elisa41","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Frey Jean-Marcel","active":true,"timeZone":"Etc/UTC"},"body":"I confirm that, into each broker experiencing java.lang.ArrayIndexOutOfBoundsException, there is as much number of exceptions as number of \"bridge to ... stopped\" messages.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elisa41","name":"elisa41","key":"elisa41","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Frey Jean-Marcel","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-09T10:16:49.213+0000","updated":"2010-12-09T10:16:49.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12970108","id":"12970108","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Since I see a lot of \"imbrications\" of \n\nat org.apache.activemq.openwire.OpenWireFormat.tightMarshalNestedObject1(OpenWireFormat.java:397)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalNestedObject1(BaseDataStreamMarshaller.java:131)\n        at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.tightMarshalObjectArray1(BaseDataStreamMarshaller.java:357)\n        at org.apache.activemq.openwire.v6.BrokerInfoMarshaller.tightMarshal1(BrokerInfoMarshaller.java:106)\n\nperhaps a \"short\" usage in the BooleanStream.writeBoolean is not enough to manage complexity of the message sent ?\n\npublic void writeBoolean(boolean value) throws IOException {\n        if (bytePos == 0) {\n            arrayLimit++;\n            if (arrayLimit >= data.length) {\n                // re-grow the array.\n                byte d[] = new byte[data.length * 2];\n                System.arraycopy(data, 0, d, 0, data.length);\n                data = d;\n            }\n        }\n        if (value) {\n            data[arrayPos] |= 0x01 << bytePos;\n        }\n        bytePos++;\n        if (bytePos >= 8) {\n            bytePos = 0;\n            arrayPos++;\n        }\n    }\n\n\n            data[arrayPos] |= 0x01 << bytePos;\n\narrayPos would become too big and reached 32768 limit of the \"short usage\" into the BooleanStream object ? (8 * 32768 bits => 262144 individual informations to send)\n\nWe are in a complex network of brokers situation  (that will have to be far, far more complex for our needs in the future with more than 1000 servers and 4 imbricated networks of brokers)\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-10T09:22:03.649+0000","updated":"2010-12-10T09:22:03.649+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12970745","id":"12970745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Here is a Gary Tully's comment added on User discussion forum :\n\nThat looks like some concurrent access to the brokerInfos. Can you \nopen a jira issue and attach as much relevant info about your setup as \npossible. \n\nI think the problem is in the \norg.apache.activemq.command.BrokerInfo#copy() method, it does not deep \ncopy the brokerInfo array. \n\nGary, what happened with \"peerBrokerInfo\" and BrokerInfoMarshaller if one broker A is \"network connected\" on broker B and broker B is connected on broker A  too ? It's our configuration.\n\neric-AWL\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-13T08:41:15.757+0000","updated":"2010-12-13T08:41:15.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12970765","id":"12970765","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"TransportConnection.java \n\nstart() in 5.4.1\n\npublic void start() throws Exception {\n        starting = true;\n        try {\n            synchronized (this) {\n                if (taskRunnerFactory != null) {\n                    taskRunner = taskRunnerFactory.createTaskRunner(this, \"ActiveMQ Connection Dispatcher: \"\n                            + getRemoteAddress());\n                } else {\n                    taskRunner = null;\n                }\n                transport.start();\n                active = true;\n                BrokerInfo info = connector.getBrokerInfo().copy();\n                info.setPeerBrokerInfos(this.broker.getPeerBrokerInfos());\n                dispatchAsync(info);\n                \n                connector.onStarted(this);\n            }\n        } catch (Exception e) {\n            // Force clean up on an error starting up.\n            stop();\n            throw e;\n        } finally {\n            // stop() can be called from within the above block,\n            // but we want to be sure start() completes before\n            // stop() runs, so queue the stop until right now:\n            starting = false;\n            if (pendingStop) {\n                LOG.debug(\"Calling the delayed stop()\");\n                stop();\n            }\n        }\n    }\n\n\nand start() in 5.3.2\n\npublic void start() throws Exception {\n        starting = true;\n        try {\n            synchronized (this) {\n                if (taskRunnerFactory != null) {\n                    taskRunner = taskRunnerFactory.createTaskRunner(this, \"ActiveMQ Connection Dispatcher: \"\n                            + getRemoteAddress());\n                } else {\n                    taskRunner = null;\n                }\n                transport.start();\n                active = true;\n                dispatchAsync(connector.getBrokerInfo());\n                connector.onStarted(this);\n            }\n        } catch (Exception e) {\n            // Force clean up on an error starting up.\n            stop();\n            throw e;\n        } finally {\n            // stop() can be called from within the above block,\n            // but we want to be sure start() completes before\n            // stop() runs, so queue the stop until right now:\n            starting = false;\n            if (pendingStop) {\n                LOG.debug(\"Calling the delayed stop()\");\n                stop();\n            }\n        }\n    }\n\n\nBrokerInfo info = connector.getBrokerInfo().copy();\ninfo.setPeerBrokerInfos(this.broker.getPeerBrokerInfos());\ndispatchAsync(info);\n\nvs\n\ndispatchAsync(connector.getBrokerInfo());\n\n\nI suspect the difference with what happened in 5.3.2 is here ...        \nWe are in a configuration with \"no duplex connectors\" where A is connected to B and B is connected to A.\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-13T10:04:30.047+0000","updated":"2010-12-13T10:04:30.047+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12971206","id":"12971206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":" public Response processBrokerInfo(BrokerInfo info) {\n        if (info.isSlaveBroker()) {\n            BrokerService bService = connector.getBrokerService();\n            // Do we only support passive slaves - or does the slave want to be\n            // passive ?\n            boolean passive = bService.isPassiveSlave() || info.isPassiveSlave();\n            if (passive == false) {\n                \n                // stream messages from this broker (the master) to\n                // the slave\n                MutableBrokerFilter parent = (MutableBrokerFilter) broker.getAdaptor(MutableBrokerFilter.class);\n                masterBroker = new MasterBroker(parent, transport);\n                masterBroker.startProcessing();\n            }\n            LOG.info((passive?\"Passive\":\"Active\")+\" Slave Broker \" + info.getBrokerName() + \" is attached\");\n            bService.slaveConnectionEstablished();\n        } else if (info.isNetworkConnection() && info.isDuplexConnection()) {\n            // so this TransportConnection is the rear end of a network bridge\n            // We have been requested to create a two way pipe ...\n            try {\n                // We first look if existing network connection already exists for the same broker Id\n                // It's possible in case of brief network fault to have this transport connector side of the connection always active\n                // and the duplex network connector side wanting to open a new one\n                // In this case, the old connection must be broken\n                BrokerId\tremoteBrokerId = info.getBrokerId();\n                setDuplexRemoteBrokerId(remoteBrokerId);\n                CopyOnWriteArrayList<TransportConnection> connections = this.connector.getConnections();\n                for (Iterator<TransportConnection> iter = connections.iterator(); iter.hasNext();) {\n            \t\tTransportConnection c = iter.next();\n                    if ((c != this) && (remoteBrokerId.equals(c.getDuplexRemoteBrokerId()))) {\n                        LOG.warn(\"An existing duplex active connection already exists for this broker (\" + remoteBrokerId + \"). Stopping it.\");\n                        c.stop();\n                    }\n                }\n                Properties properties = MarshallingSupport.stringToProperties(info.getNetworkProperties());\n                Map<String, String> props = createMap(properties);\n                NetworkBridgeConfiguration config = new NetworkBridgeConfiguration();\n                IntrospectionSupport.setProperties(config, props, \"\");\n                config.setBrokerName(broker.getBrokerName());\n                URI uri = broker.getVmConnectorURI();\n                HashMap<String, String> map = new HashMap<String, String>(URISupport.parseParameters(uri));\n                map.put(\"network\", \"true\");\n                map.put(\"async\", \"false\");\n                uri = URISupport.createURIWithQuery(uri, URISupport.createQueryString(map));\n                Transport localTransport = TransportFactory.connect(uri);\n                Transport remoteBridgeTransport = new ResponseCorrelator(transport);\n                duplexBridge = NetworkBridgeFactory.createBridge(config, localTransport, remoteBridgeTransport);\n                duplexBridge.setBrokerService(broker.getBrokerService());\n                // now turn duplex off this side\n                info.setDuplexConnection(false);\n                duplexBridge.setCreatedByDuplex(true);\n                duplexBridge.duplexStart(this, brokerInfo, info);\n                LOG.info(\"Created Duplex Bridge back to \" + info.getBrokerName());\n                return null;\n            } catch (TransportDisposedIOException e) {\n                LOG.warn(\"Duplex Bridge back to \" + info.getBrokerName() + \" was correctly stopped before it was correctly started.\");\n                return null;\n            } catch (Exception e) {\n                LOG.error(\"Creating duplex network bridge\", e);\n            }\n        }\n        // We only expect to get one broker info command per connection\n        if (this.brokerInfo != null) {\n            LOG.warn(\"Unexpected extra broker info command received: \" + info);\n        }\n        this.brokerInfo = info;\n        broker.addBroker(this, info);\n        networkConnection = true;\n        List<TransportConnectionState> connectionStates = listConnectionStates();\n        for (TransportConnectionState cs : connectionStates) {\n            cs.getContext().setNetworkConnection(true);\n        }\n        return null;\n    }\n\n\n=> broker.addBroker(this, info)\n\n\"info\" object seems to become very big in the case of a lot of brokers with a lot of network connections between them . (That's our case !)\n\nWhy is it now necessary (since 5.4) for a \"transport connector side\" broker to export already established peer connections to each new \"initator side (network connector)\" broker ?\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-14T09:17:22.185+0000","updated":"2010-12-14T09:17:22.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12971568","id":"12971568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"TransportConnection.java \n\nBrokerInfo info = connector.getBrokerInfo().copy();\ninfo.setPeerBrokerInfos(this.broker.getPeerBrokerInfos());\ndispatchAsync(info);\n\n\nI think it is useful for Openwire v6 ConnectionControl (connectedBrokers). I don't find that ActiveMQ internal process need to know that broker A is connected to B that is connected to C, that is connected to D, that is connected to A .........\n\ninfo.setPeerBrokerInfos(this.broker.getPeerBrokerInfos()) => Don't we need to break the BrokerInfo recursivity here, and only keep the first level of peerBrokers before sending it to the network connector side ????\n\nWe have a lot of brokers that are all connected together in the two ways with not duplex network connection.\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-15T08:03:48.281+0000","updated":"2010-12-15T08:03:48.281+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12971673","id":"12971673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"yea, at a minimum there should be duplicate detection, only add one that is not already present.\n\nIf this is the root of your problem, it should be easy to create a test case that trys to serialize X brokerInfos, this should blow the boolean output stream.\n\nAlso, I think the propagation of peer broker infos should be configurable, it is used to let the clients know about the list of alternative brokers, so it should only be gathered if necessary. https://issues.apache.org/jira/browse/AMQ-2632\n\nWe need to get some test cases that can demonstrate this problem and can validate and protect the changes when it is fixed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-15T13:08:57.641+0000","updated":"2010-12-15T13:08:57.641+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12971735","id":"12971735","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"If I add an algorithm that \n- adds only the first level of peerbrokers in  TransportConnection.start() instead of \"info.setPeerBrokerInfos(this.broker.getPeerBrokerInfos());\"\n- detects that a peerbroker = current broker in TransportConnection.processBrokerInfo(....) before \"broker.addBroker(this, info);\"\n\nIs it always compatible with \"Automatic cluster update and rebalance\" new 5.4 feature ?\n\n(If it is the case, I will try to create specific test case too).\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-15T16:47:56.806+0000","updated":"2010-12-15T16:47:56.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12971742","id":"12971742","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"not sure on the first part, the first level restriction, I think that should be configurable because it is topology dependent.\n\ngreat, patches with tests are always most welcome. There are a few update rebalance feature tests in activemq-core that will protect that feature with your changes. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-15T17:19:18.159+0000","updated":"2010-12-15T17:19:18.159+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972117","id":"12972117","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"mmmhhh.\n\nI just added this into openwire/v6/BrokerInfoMarshaller.java\n\n    public void tightUnmarshal(OpenWireFormat wireFormat, Object o, DataInput dataIn, BooleanStream bs) throws IOException {\n        super.tightUnmarshal(wireFormat, o, dataIn, bs);\n\n        BrokerInfo info = (BrokerInfo)o;\n        info.setBrokerId((org.apache.activemq.command.BrokerId) tightUnmarsalCachedObject(wireFormat, dataIn, bs));\n        info.setBrokerURL(tightUnmarshalString(dataIn, bs));\n\n        if (bs.readBoolean()) {\n            short size = dataIn.readShort();\n            org.apache.activemq.command.BrokerInfo value[] = new org.apache.activemq.command.BrokerInfo[size];\n            for( int i=0; i < size; i++ ) {\n\n\n                System.out.println(\"Nouveau sous-niveau : i = \" + (i+1) +  \"/(size = \" + size + \")\");\n\n                value[i] = (org.apache.activemq.command.BrokerInfo) tightUnmarsalNestedObject(wireFormat,dataIn, bs);\n\n                System.out.println(\"Fin du sous-niveau : i = \" + (i+1) +  \"/(size = \" + size + \")\");\n            }\n            info.setPeerBrokerInfos(value);\n        }\n        else {\n            info.setPeerBrokerInfos(null);\n        }\n\n/* Eric Vincent remplacement 3 lignes a la place de la ligne suivante */\n        String brokerName = tightUnmarshalString(dataIn, bs);\n        System.out.println(\"BrokerInfo / BrokerName = \" + brokerName);\n        info.setBrokerName(brokerName);\n\n/* Eric Vincent\n        info.setBrokerName(tightUnmarshalString(dataIn, bs));\n*/\n        info.setSlaveBroker(bs.readBoolean());\n        info.setMasterBroker(bs.readBoolean());\n        info.setFaultTolerantConfiguration(bs.readBoolean());\n        info.setDuplexConnection(bs.readBoolean());\n        info.setNetworkConnection(bs.readBoolean());\n        info.setConnectionId(tightUnmarshalLong(wireFormat, dataIn, bs));\n        info.setBrokerUploadUrl(tightUnmarshalString(dataIn, bs));\n        info.setNetworkProperties(tightUnmarshalString(dataIn, bs));\n\n    }\n\nAnd you will find in the log file I put into this thread, what I get with no more than 9 embedded brokers (4 sibBusModule, 1 busSupervisor, 2 servers) on 4 servers (td0sib[01,02][s,v] that are connected togethers with different network of brokers or direct connections.\n\nI think that the current algorithm (without any level constraint) is not good at all for ActiveMQ global scalability.\n\nI will try to change something, but I don't know exactly why it is necessary that each broker knows the global connection hierarchy beyond the first level... And when there are loops, I don't know what could happen ....\n\nEric-AWL\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-16T15:42:46.518+0000","updated":"2010-12-16T15:42:46.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972120","id":"12972120","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"the result of the launch of an embedded broker (sibBusModule-TestDeCharge-td0sib01s) \n\nwhen \"busModule is alive\", the jms connect to the embedded broker is OK ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-16T15:45:21.445+0000","updated":"2010-12-16T15:45:21.445+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972404","id":"12972404","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"I forgot to say that all these brokers are not in the same network of brokers.\n\nSIBBusModules brokers have similar activemq.xml configurations\nServeur brokers have similar activemq.xml configurations\nSibBusSupervisor broker has a specific activemq.xml configuration.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T09:16:37.253+0000","updated":"2010-12-17T09:16:37.253+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972406","id":"12972406","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"3 activemq.xml attached.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T09:21:49.295+0000","updated":"2010-12-17T09:21:49.295+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972415","id":"12972415","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"If this important change was made only to provide the \"automatic dynamic failover\" capability, it seems that a new concept (failover brokers with a specific discovery process) should be implemented instead of using standard network of brokers implementation....\n\nPerhaps, it should be better to add a parameter in network of brokers definition, that specify that a network of brokers is dedicated for failover capability, and use a \"ConcurrentHashMap<String, BrokerInfo[]> peerBrokers\" in brokerInfo structure (String = the name of the network of broker) instead of a simple peerBrokers[] array ????\n\nThe problem is then completely different....\n\nbsm.log shows us that on a small environment, we can receive a very big \"BrokerInfo\" message with doubles and potential loops. Our production environment is far more complex than this.  I'm quite convinced that it's why we get this \"ArrayOutOfBoundsException\" issue. (We have more than 262000 boolean values to code in the same BrokerInfo structure).\n\nUnfortunately, I will be forced to indicate to production environment that we can not use the 5.4 version. It's a big problem for us, since I already added a patch for duplex network of brokers in 5.3.2 that is now integrated in 5.4 .\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T09:39:02.847+0000","updated":"2010-12-17T09:39:02.847+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972475","id":"12972475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Is this an acceptable workaround, if I add in TransportConnection.java the condition below :\n\n\nBrokerInfo info = connector.getBrokerInfo().copy();\n\nif (this.connector.isUpdateClusterClients())\n              info.setPeerBrokerInfos(this.broker.getPeerBrokerInfos());\n\ndispatchAsync(info);\n\nand tests it with Maven Tests to verify regressions ?\n\nBy this way, if the transport connector is not used for automatic failover purpose (this is the default), it will not export its own peer brokers.\n\nSince I don't use this 5.4 new failover function, I think it will resolve our problem on our complex network of brokers architecture (with exchanges of too big brokerInfo objects), without changing anything for those who now want to use it ...\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T13:06:26.416+0000","updated":"2010-12-17T13:06:26.416+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972482","id":"12972482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"yes, I think the behavior should be conditional on isUpdateClusterClients, the other place that that condition should be checked is in org.apache.activemq.broker.TransportConnector#getConnectionControl() before the peer brokers are added to the connectedBrokers string, such that the info is only passed to clients if needed.\n\nSee previous comment and related issue ref: https://issues.apache.org/jira/browse/AMQ-3077?focusedCommentId=12971673&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12971673\n\nA patch, validated with mvn clean test in activemq-core would be great.\n\nWhen that feature is enabled, we need to weed out duplicates from the list to ensure the list does not grow in cyclic networks. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T13:46:32.748+0000","updated":"2010-12-17T13:46:32.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972495","id":"12972495","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Ok. \n\nI just changed the 2 places by adding the condition (isUpdateClusterClients()) and did a small test with my own traces. There are no longer a hierarchy of brokerInfo daughter structures, just the connected broker brokerInfo structure brokerName is written on standard output.\n\nI will ask Jean-Marcel to patch our \"big qualify environment\" to validate that there is no longer ArrayOutOfBoundsException .\n\nIf maven tests are OK with these 2 small changes, do you consider that these 2 additional conditions will be integrated into future versions without any needs to program a specific new test to demonstrate anymore the problem ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T14:39:06.101+0000","updated":"2010-12-17T14:39:06.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972528","id":"12972528","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"a test is the only way to protect your changes into the future. So I think a test is necessary. Think of it as an insurance policy to protect your use case, worth the premium of time that it takes to write.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T15:49:00.055+0000","updated":"2010-12-17T15:49:00.055+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972529","id":"12972529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"What is the simplest way to simulate a complex network of brokers situation in a small test ? (one JVM that launches X embedded brokers with one transport connector and the corresponding multicast network connector ?)\n\nIs there an existing JUnit test that I can use as an initial pattern ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T15:55:42.051+0000","updated":"2010-12-17T15:55:42.051+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12972589","id":"12972589","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"something like org.apache.activemq.usecases.ThreeBrokerQueueNetworkTest is what you need. There are a bunch of tests that extend org.apache.activemq.JmsMultipleBrokersTestSupport to do that sort of thing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T18:46:40.613+0000","updated":"2010-12-17T18:46:40.613+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12973191","id":"12973191","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Patch (TransportConnection.java + TransportConnector.java) + test (20 brokers with specific stop/start)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T13:23:14.562+0000","updated":"2010-12-20T13:23:14.562+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12973192","id":"12973192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"The patch consists in adding 2 conditions (isUpdateClusterClient()) on the BrokerInfo structure sent.\n\nThe test consists in\n- starting 20 brokers with a transport connector and a network connector in a way all brokers are connected to the 19 other ones.\n- stopping the 10 first ones\n- restarting the 10 first ones.\n\nWithout the patch, the \"arrayOutOfBoundsException\" is raised during the 10 first ones are restarted  (loop ?).\n\nThis patch is just a workaround to be compatible with 5.3 version usage, and not a final solution of the identified problem\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T13:27:09.756+0000","updated":"2010-12-20T13:27:09.756+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12974601","id":"12974601","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Hi Gary\n\nDo you have some news for me about this problem after I provided a patch and a JUnit Test ? \n\nThank you\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-23T11:03:55.550+0000","updated":"2010-12-23T11:03:55.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12977669","id":"12977669","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Hi Gary\n\nI wish you an happy new year. How can we progress together on this particular subject ? We use this patch on our test environment, and don't get anymore exceptions.\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-05T08:02:36.863+0000","updated":"2011-01-05T08:02:36.863+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12977710","id":"12977710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"hny to you too. next step is to review your changes and test, then integrate them. I will hopefully get some time to do this in the next few days.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-05T10:09:00.207+0000","updated":"2011-01-05T10:09:00.207+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12980787","id":"12980787","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Hi Gary\n\nNo news ?\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-12T16:34:17.946+0000","updated":"2011-01-12T16:34:17.946+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12980806","id":"12980806","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"I was able to reproduce the issue from your test, thanks. I am working on the fix. Part of the problem is that the peer broker info is duplicated on each networked broker. The other issue is that the peerBrokerInfo needs to be cleared before a list of peer brokers is created for propagation to a client or to a peer, as the second level information is not relevant at the moment.\nSome of my tests are showing blocking with duplex network connector start and I want to get to the bottom of that before progressing further.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-12T16:56:48.284+0000","updated":"2011-01-12T16:56:48.284+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12980819","id":"12980819","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Thank you for your information. I think this will be difficult to fully resolve since automatic failover cluster group concept is ambitious in architecture that is complex as ours  (with loops and a lot of connected brokers in duplex and non duplex).\n\nDon't you think a specific new \"dedicated failover network of brokers\" (with discover mechanism) concept different from \"duplex/non duplex network of brokers\" used for scalability and role isolation, wouldn't be more easier to manage and program (instead of propagating the full network of brokers topology to each broker and associate them all, a role as potential failover broker)  ? So, failover and scalability/isolation problems would be totally distinguished.\n\nAll my brokers connected in my different network of brokers, have not the same role. So, in my architecture with a lot of brokers, even if I wanted to use failover, it should be good for me that I could decide by a dedicated discovery rule, what brokers in the global network of brokers, can be chosen as failover broker,and this, for each specific client to broker connection.\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-12T17:31:28.514+0000","updated":"2011-01-12T17:31:28.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12980828","id":"12980828","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"I agree. There is a bunch of relevant configuration around the cluster update feature, filters etc and it is configurable per transport connector. Also, the fact that currently the entire topology is propagated is wrong, part of the fix will limit the information to a single level.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-12T17:50:12.195+0000","updated":"2011-01-12T17:50:12.195+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12981258","id":"12981258","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"fix in r1058577\n\nFixed issue with duplication and size of collected peer broker info that was propagated around a network.\nIn a network a peer is the other end of a network bridge, such that a consumer can connect to it to get a chance at the same destinations. It is not a real peer ( as in a two way association) unless the network is duplex or there is another bridge in the opposite direction.\nThis is relevant for https://issues.apache.org/jira/browse/AMQ-2632","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-13T14:26:12.605+0000","updated":"2011-01-13T14:26:12.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12981261","id":"12981261","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"RE: Link as part of AMQ-2632: These fixes ensure that transport connector config (setRebalanceClusterClients, setUpdateClusterClients) is respected for cluster updates.\nAlso of note is the fact that the cluster members respect the oneway nature of a network connector (demand forwarding bridge). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-13T14:28:50.444+0000","updated":"2011-01-13T14:31:28.828+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12981295","id":"12981295","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Hi Gary\n\nThank you very much.\n\nI don't fully understand. Do you mean, that there is a risk that problems appear with network of brokers with Duplex connections ?\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-13T15:50:35.996+0000","updated":"2011-01-13T15:50:35.996+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12981296","id":"12981296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"no, what do u not understand?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-13T15:54:10.961+0000","updated":"2011-01-13T15:54:10.961+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12981314","id":"12981314","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"We use ActiveMQ brokers with complex configuration (now we have around 50 brokers in production on 2 sites for a french electricity provider smart-meter project. Our final goal is between 100 and 1000 brokers on several sites, connected by several different network of brokers).\n\nIn some cases, we want to use duplex configuration : when there is an identified \"client broker\" that connects to an \"applicative service provider broker\" (example an \"SMS gateway\" that sends SMS to SMS operator and asynchronously send SMS corresponding notifications to client application) \n\nAnd in some other cases, we want to use two single half-duplex configurations (when the two brokers are simultaneously client and provider for some parts of a global applicative service).\n\nMy original test only showed that 20 brokers with 2 half-duplex configurations didn't work. The original test didn't try with duplex connections : a loop in peers configuration was created with 2 half-duplex connections, and this loop was the easier way to generate such exception for the test.\n\nIn production environment now, we only use 2 half-duplex connections everywhere (for our 50 brokers) with 5.3.2 version. \n\nWe want to be able to use duplex connections, but a bug was discovered with duplex connections and \"not straight\" network outages (we corrected this bug together some months ago). So we looked for a stable 5.4 version ...\n\nWe won't use at all failover mechanism since (and to resume), all application has its own embedded broker.\n\nThank you.\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-13T16:23:24.990+0000","updated":"2011-01-13T16:23:24.990+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12981365","id":"12981365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"Try a test with duplex connections to be sure, but I think you will be fine now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-13T16:55:20.265+0000","updated":"2011-01-13T16:55:20.265+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12981675","id":"12981675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Does the 5.5-SNAPSHOT (download page) compiled today (January 14th), include the correction ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-14T08:32:45.195+0000","updated":"2011-01-14T08:32:45.195+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12981695","id":"12981695","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"yes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-14T09:58:54.854+0000","updated":"2011-01-14T09:58:54.854+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/12988536","id":"12988536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnkidd","name":"johnkidd","key":"johnkidd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Kidd","active":true,"timeZone":"Etc/UTC"},"body":"we are seeing this issue in production with 5.4.2. We have a network of brokers consisting of about 20 broker instances. What is the side effect of this issue? Lost data? Brokers dropped out of the broker network permanently?\n\nThanks for any comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnkidd","name":"johnkidd","key":"johnkidd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Kidd","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-30T03:46:56.187+0000","updated":"2011-01-30T03:46:56.187+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/13006454","id":"13006454","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ratman","name":"ratman","key":"ratman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luca Cianci","active":true,"timeZone":"Etc/UTC"},"body":"Hi guys,\nI have the same problem using AMQ 5.4.2 on my production environment.\nIs this problem critical? What are the side effects?\nI can't use AMQ RC 5.5 in production.\nAny suggestions?\n\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ratman","name":"ratman","key":"ratman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luca Cianci","active":true,"timeZone":"Etc/UTC"},"created":"2011-03-14T15:06:55.559+0000","updated":"2011-03-14T15:06:55.559+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492805/comment/13006826","id":"13006826","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"body":"Hi\n\nThe problem could appear if you have a loop in your network of brokers topology. If it is not the case, it is likely that you won't be impacted at all.\n\nEric-AWL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eric-awl","name":"eric-awl","key":"eric-awl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric","active":true,"timeZone":"Etc/UTC"},"created":"2011-03-15T08:02:09.826+0000","updated":"2011-03-15T08:02:09.826+0000"}],"maxResults":40,"total":40,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3077/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0agxj:"}}