{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12774176","self":"https://issues.apache.org/jira/rest/api/2/issue/12774176","key":"AMQ-5576","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315631","id":"12315631","description":"Issues that are getting ready to be kicked - review 'em once more if you like","name":"AGING_TO_DIE","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12327149","id":"12327149","description":"Issues that lack any sort of test to validate.","name":"WAITING_FOR_TEST","archived":false,"released":false}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-05-20T20:55:32.152+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Apr 13 10:05:30 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5576/watchers","watchCount":5,"isWatching":false},"created":"2015-02-11T11:41:14.252+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324950","id":"12324950","name":"5.10.0","archived":false,"released":true,"releaseDate":"2014-06-10"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-04-13T10:05:30.494+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/4","description":"This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/reopened.png","name":"Reopened","id":"4","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"Web console, JMX MBeans and Hawtio/Jolokia all reports wrong size for queues in many cases. See my comments for AMQ-1940 issue - looks like it was never fixed.\n\nI have this camel route deployed:\n\n{code:xml}\n        <route id=\"log-messages\">\n            <from uri=\"broker:queue:highwayQueue\"/>\n            <to uri=\"broker:queue:algo250a\"/>\n            <to uri=\"broker:queue:algo250b\"/>\n        </route>\n{code}\n\nand looks like size/counters for all queues involved are always wrong. \n\nExternal client sending messages to highwayQueue, but its enqueued/dequeued counters are always displayed as 0, for two other queues I can observe negative numbers of pending messages, and different number of enqueued (when expected always the same).","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Reported queue sizes and counters are wrong in many cases","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774176/comment/14316132","id":"14316132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"body":"BTW, on *clean 5.11.0* installation, with sample route deployed, if I send 1 message into inbound, I see counters 1 for both out queues, but if I try to browse - there is nothing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"created":"2015-02-11T12:18:51.442+0000","updated":"2015-02-11T12:18:51.442+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774176/comment/14322697","id":"14322697","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"body":"Enqueued/Dequeued counters for inbound queue are always zero.\n\nNote that there is no producers for it also on web console (only one on Connections page).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"created":"2015-02-16T12:15:15.756+0000","updated":"2015-02-17T14:36:27.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774176/comment/14359992","id":"14359992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"body":"I can also reproduce OutOfMemory when trying to browse (should be empty) queue from web console in case described.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"created":"2015-03-13T06:05:47.701+0000","updated":"2015-03-13T06:05:47.701+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774176/comment/15294184","id":"15294184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"No test case submitted to allow this to be reproduced.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2016-05-20T20:55:32.152+0000","updated":"2016-05-20T20:55:32.152+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774176/comment/15295963","id":"15295963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"body":"What? No test case? Did you ever tried to run supplied camel route?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"created":"2016-05-23T06:16:02.162+0000","updated":"2016-05-23T06:16:02.162+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774176/comment/15295964","id":"15295964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"body":"No any activyty for 2 years, no questions, and when just close? Are you kidding? I have provided camel route, and in my case its enough to reproduce this issue in 100% cases. Did you ever tried it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cp123","name":"cp123","key":"cp123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey ","active":true,"timeZone":"Europe/Moscow"},"created":"2016-05-23T06:18:58.551+0000","updated":"2016-05-23T06:18:58.551+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774176/comment/15307648","id":"15307648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gniebel","name":"gniebel","key":"gniebel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guido","active":true,"timeZone":"Etc/UTC"},"body":"I am also a little bit surprised that this issues was closed, because we have the same problems by using JMX and Hawtio/Jolokia: We receive wrong information about queues and messages. It would be nice to know, if this can be fixed or not, or how it can be done. Perhaps it would be better to throw exceptions instead of returning wrong information?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gniebel","name":"gniebel","key":"gniebel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guido","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-31T12:26:13.113+0000","updated":"2016-05-31T12:36:02.004+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774176/comment/15967370","id":"15967370","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jjatzkowski","name":"jjatzkowski","key":"jjatzkowski","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jjatzkowski&avatarId=31392","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jjatzkowski&avatarId=31392","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jjatzkowski&avatarId=31392","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jjatzkowski&avatarId=31392"},"displayName":"Jürgen Jatzkowski","active":true,"timeZone":"Etc/UTC"},"body":"The issue is still causing problems for me. It would be really helpful to fix this behaviour. Any plans to improve the situation?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jjatzkowski","name":"jjatzkowski","key":"jjatzkowski","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jjatzkowski&avatarId=31392","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jjatzkowski&avatarId=31392","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jjatzkowski&avatarId=31392","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jjatzkowski&avatarId=31392"},"displayName":"Jürgen Jatzkowski","active":true,"timeZone":"Etc/UTC"},"created":"2017-04-13T10:05:30.494+0000","updated":"2017-04-13T10:05:30.494+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5576/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i25h73:"}}