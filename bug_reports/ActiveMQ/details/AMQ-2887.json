{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483512","self":"https://issues.apache.org/jira/rest/api/2/issue/12483512","key":"AMQ-2887","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2010-11-09T13:53:18.259+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Sep 27 20:44:12 UTC 2011","customfield_12310420":"33652","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_33935283036_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-09-27T20:44:12.363+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2887/watchers","watchCount":3,"isWatching":false},"created":"2010-08-31T02:16:09.392+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-09-27T20:44:12.424+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Seeing negative numbers in the \"Number Of Pending Messages\" column in the web console:\n\nibsys.content.publication\t-9771\t262\t1192568\t1202339","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461819","id":"12461819","filename":"activemq_broker1.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"created":"2010-09-08T21:46:26.582+0000","size":6742,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12461819/activemq_broker1.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461783","id":"12461783","filename":"pubd-amq3_negative_counts.pdf","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"created":"2010-08-31T02:19:28.491+0000","size":90199,"mimeType":"application/pdf","content":"https://issues.apache.org/jira/secure/attachment/12461783/pubd-amq3_negative_counts.pdf"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172300","customfield_12312823":null,"summary":"Seeing negative numbers in the \"Number Of Pending Messages\" column in the web console","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux 2.6.18-128.1.10.el5.xs5.5.0.51xen #1 SMP Wed Nov 11 07:38:08 EST 2009 i686 i686 i386 GNU/Linux\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483512/comment/12942770","id":"12942770","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"body":"Screenshot of webconsole.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"created":"2010-08-31T02:19:28.549+0000","updated":"2010-08-31T02:19:28.549+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483512/comment/12942820","id":"12942820","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"body":"I have upgraded to the *5.4.0* release of ActiveMQ which was supposed to fix this issue, but it is still occurring.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"created":"2010-09-01T12:29:01.801+0000","updated":"2010-09-01T12:29:01.801+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483512/comment/12942887","id":"12942887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"body":"I can also see the negative queue counts in JConsole as well.\n\nHaven't been able to reproduce a test case with this using JMeter, however,\nI have been able to reproduce this via using an in-house test script which\nputs large #'s of our application-specific messages on the application queues,\nwhich are then pulled off by application consumers which also do database work.\n\n+Scenario:+\n            • Producers: 3\n            • Brokers (network of brokers): 2\n            • Consumers (application consumers w/ connection pooling): 2\n\nOur message sizes are small - all of them under 1k.\n\n----\n\n+To reproduce:+\n* start up multiple Producers, both of which are throwing 80,000+ messages at two brokers (which are networked together) \n* have the two consumers running on separate servers pulling items off of the application queue.\n\n----\n\n+NetworkConnector snippet:+\n{code}\n        <networkConnector name=\"ActiveMQ Cluster\" uri=\"static:(tcp://broker1:61616,tcp://broker2:61616,tcp://broker3:61616)\" \\\nconduitSubscriptions=\"false\" \\\ndynamicOnly=\"true\" \\\ndecreaseNetworkConsumerPriority=\"false\" \\\nsuppressDuplicateQueueSubscriptions=\"true\" \\\nduplex=\"true\" \\\nnetworkTTL=\"5\"/>\n        </networkConnectors>\n{code}\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cvelo","name":"cvelo","key":"cvelo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"C Velo","active":true,"timeZone":"America/Chicago"},"created":"2010-09-08T20:29:32.502+0000","updated":"2010-09-09T00:37:31.300+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483512/comment/12943176","id":"12943176","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=alsoloplan","name":"alsoloplan","key":"alsoloplan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Ländle","active":true,"timeZone":"Europe/Berlin"},"body":"We also recognized this strange behavior - with broker version 5.4.1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=alsoloplan","name":"alsoloplan","key":"alsoloplan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Ländle","active":true,"timeZone":"Europe/Berlin"},"created":"2010-11-09T13:53:18.259+0000","updated":"2010-11-09T13:53:18.259+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483512/comment/13115901","id":"13115901","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"This may not be an issue or could be normal, see this article for some further insight.\n\nhttp://blog.garytully.com/2010/01/activemq-prefetch-and-asyncdispatch.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-09-27T20:44:12.392+0000","updated":"2011-09-27T20:44:12.392+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2887/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tut3:"}}