{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483482","self":"https://issues.apache.org/jira/rest/api/2/issue/12483482","key":"AMQ-2761","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"parent":{"id":"12483687","key":"AMQ-2758","self":"https://issues.apache.org/jira/rest/api/2/issue/12483687","fields":{"summary":"rollback does not work on topic","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315624","id":"12315624","description":"Maintenance release for 5.4.0","name":"5.4.1","archived":false,"released":true,"releaseDate":"2010-09-21"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2010-06-03T03:12:53.552+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Aug 26 13:41:14 UTC 2010","customfield_12310420":"96172","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7955650750_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-09-02T20:05:15.311+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2761/watchers","watchCount":2,"isWatching":false},"created":"2010-06-02T18:11:04.561+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315622","id":"12315622","description":"","name":"5.3.2","archived":false,"released":true,"releaseDate":"2010-05-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-09-02T20:05:15.304+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We are seeing an issue with ActiveMQ Topic subscription when there is an uncaught exception.\n\nIt appears to be related to an old report (but who knows) :\nhttp://mail-archives.apache.org/mod_mbox/activemq-users/200805.mbox/<17189972.post@talk.nabble.com> \n\nBasically, what happens is our Consumer (onMessage) was throwing an NPE. After that happens, the consumer no longer receives any more messages.\n\nFollowing it through in the debugger - when the exception is thrown, what we see is the the \"ActiveMQ Session Task\" thread completes... \nAfter that, it never seems to execute again. Seems some state in the PooledTaskRunner gets borked? Investigating further - but at first glance it appears it thinks the connection is shutting down...\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461724","id":"12461724","filename":"TestMessageSenderer.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ffffff","name":"ffffff","key":"ffffff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ffffff ffffff","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-02T18:12:22.069+0000","size":2402,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461724/TestMessageSenderer.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"159777","customfield_12312823":null,"summary":"Uncaught exception in subscriber ends subscription","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ffffff","name":"ffffff","key":"ffffff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ffffff ffffff","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ffffff","name":"ffffff","key":"ffffff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ffffff ffffff","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483482/comment/12942759","id":"12942759","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stephane.nicoll","name":"stephane.nicoll","key":"stephane.nicoll","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephane Nicoll","active":true,"timeZone":"Etc/UTC"},"body":"AMQ-2758 might also be related. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stephane.nicoll","name":"stephane.nicoll","key":"stephane.nicoll","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephane Nicoll","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-03T03:12:53.552+0000","updated":"2010-06-03T03:12:53.552+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483482/comment/12940337","id":"12940337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Your client should be catching all exceptions in the onMessage method.\n\nFrom the JMS 1.1 spec...\n\n4.5.2 Asynchronous Delivery\n\nA client can register an object that implements the JMS MessageListener interface with a MessageConsumer. As messages arrive for the consumer, the provider delivers them by calling the listener's onMessage method.\n\nIt is possible for a listener to throw a RuntimeException; however, this is considered a client programming error. Well-behaved listeners should catch such exceptions and attempt to divert messages causing them to some form of application-specific 'unprocessable message' destination.\n\nThe result of a listener throwing a RuntimeException depends on the session's acknowledgment mode.\n\n    * AUTO_ACKNOWLEDGE or DUPS_OK_ACKNOWLEDGE - the message will be immediately redelivered. The number of times a JMS provider will redeliver the same message before giving up is provider-dependent. The JMSRedelivered message header field will be set for a message redelivered under these circumstances.\n    * CLIENT_ACKNOWLEDGE - the next message for the listener is delivered. If a client wishes to have the previous unacknowledged message redelivered, it must manually recover the session.\n    * Transacted Session - the next message for the listener is delivered. The client can either commit or roll back the session (in other words, a RuntimeException does not automatically rollback the session).\n\nJMS providers should flag clients with message listeners that are throwing RuntimeExceptions as possibly malfunctioning.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2010-08-09T19:52:40.620+0000","updated":"2010-08-09T19:52:40.620+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483482/comment/12939278","id":"12939278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ffffff","name":"ffffff","key":"ffffff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ffffff ffffff","active":true,"timeZone":"Etc/UTC"},"body":"Regardless, an uncaught RuntimeException from a client should not have the effect of ending that clients subscription.\n\nNothing in the spec (or even the section you quoted) would suggest this issue is expected behaviour, would it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ffffff","name":"ffffff","key":"ffffff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ffffff ffffff","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-09T22:55:15.480+0000","updated":"2010-08-09T22:55:15.480+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483482/comment/12936662","id":"12936662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"See this article for an explanation on why an uncaught exception can end the subscription\nhttp://effectivemessaging.blogspot.com/2009/01/messagelistener-exception-handling.html\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2010-08-24T22:53:38.210+0000","updated":"2010-08-24T22:53:38.210+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483482/comment/12936462","id":"12936462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stephane.nicoll","name":"stephane.nicoll","key":"stephane.nicoll","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephane Nicoll","active":true,"timeZone":"Etc/UTC"},"body":"I am out of the office until Monday, September 6th and have limited access to my emails. I will answer your email ASAP.\n\nPlease contact Nicolas Lejeune for urgent matters.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stephane.nicoll","name":"stephane.nicoll","key":"stephane.nicoll","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stephane Nicoll","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-24T23:22:44.237+0000","updated":"2010-08-24T23:22:44.237+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483482/comment/12942767","id":"12942767","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ffffff","name":"ffffff","key":"ffffff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ffffff ffffff","active":true,"timeZone":"Etc/UTC"},"body":"I guess if the behaviour is undefined ... we cant rule out System.exit() as unexpected behaviour.... ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ffffff","name":"ffffff","key":"ffffff","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ffffff ffffff","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-26T13:41:14.974+0000","updated":"2010-08-26T13:41:14.974+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2761/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rpif:"}}