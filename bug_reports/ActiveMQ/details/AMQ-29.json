{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481344","self":"https://issues.apache.org/jira/rest/api/2/issue/12481344","key":"AMQ-29","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315598","id":"12315598","name":"2.0","archived":false,"released":true}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2004-06-19T00:15:26.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Jun 19 00:15:26 UTC 2004","customfield_12310420":"48777","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1205706000_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2004-06-19T00:15:26.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-29/watchers","watchCount":1,"isWatching":false},"created":"2004-06-05T01:20:20.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315592","id":"12315592","name":"1.0","archived":false,"released":true}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2005-02-03T10:45:49.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I am trying to get a serverless setup using multicast or JRMP as transport.\n\nI verified that Multicast works in my environment using this util: http://www.mikkle.dk/multicasttest/index.html\n\nBut I am unable to get ActiveMQ to work between 2 JVM on the same box or on different boxes.  Both producer and consumer runs without any error except that Consumer is not getting any message at all.  Furthermore, no multicast traffic can be detected on the network.\n\nI have tried activemq-1.0-M1.jar and activemq-1.0-SNAPSHOT.jar as listed on http://dist.codehaus.org/activemq/jars and also several interim builds.\n\nAttached are my 2 simple test program.  Note that I am able to get tcp protocol to work with these 2 program if I start a server.\n\n::::::::::::::::::::::::::::::::::::\n    Producer tester\n::::::::::::::::::::::::::::::::::::\n\nimport java.util.Properties;\n\nimport javax.jms.Connection;\nimport javax.jms.ConnectionFactory;\nimport javax.jms.Destination;\nimport javax.jms.Message;\nimport javax.jms.MessageProducer;\nimport javax.jms.Session;\nimport javax.naming.Context;\nimport javax.naming.InitialContext;\nimport javax.naming.Reference;\n\nimport org.codehaus.activemq.ActiveMQConnectionFactory;\nimport org.codehaus.activemq.jndi.JNDIReferenceFactory;\n\n\n/**\n * Class to test ActiveMQ Publisher\n *\n * @author $author$\n * @version $Revision$\n */\npublic class TestActiveMQProducer\n{\n    protected ConnectionFactory connFactory;\n    protected Connection sndConn;\n    protected Session sndSess;\n    protected MessageProducer producer;\n    protected Destination dest;\n\n    /**\n     * main logic\n     *\n     * @param args .\n     *\n     * @throws Exception !\n     */\n    public static void main(String[] args) throws Exception\n    {\n        TestActiveMQProducer tester = new TestActiveMQProducer();\n\n        tester.setUp();\n\n        for (int i = 0; i < 100; i++) {\n            Message msg = tester.sndSess.createTextMessage(\"Hello World!\");\n            tester.producer.send(tester.dest, msg);\n            System.out.println(\"Sent msg: \" + msg);\n            Thread.sleep(1000);\n        }\n        \n        tester.tearDown();\n    }\n\n    protected void setUp() throws Exception\n    {\n        connFactory = new ActiveMQConnectionFactory(\"multicast://224.0.0.1:8000\");     \n        //connFactory = new ActiveMQConnectionFactory(\"tcp://127.0.0.1:61616\");       \n        System.out.println(\"Created conn factory: \" + connFactory);\n        \n        sndConn = connFactory.createConnection();\n        System.out.println(\"Created conn: \" + sndConn);\n        \n        sndSess = sndConn.createSession(false, Session.AUTO_ACKNOWLEDGE);\n        System.out.println(\"Created receiveSession: \" + sndSess);\n        \n        dest = sndSess.createTopic(\"FOO\");\n        System.out.println( \"Created destination: \" + dest + \" of type: \" + dest.getClass() );\n\n        producer = sndSess.createProducer(dest);\n        sndConn.start();\n        \n        System.out.println(\"Started connections\");\n    }\n\n    protected void tearDown() throws Exception\n    {\n        sndSess.close();\n        sndConn.close();\n    }\n}\n\n\n::::::::::::::::::::::::::::::::::::\n    Consumer tester\n::::::::::::::::::::::::::::::::::::\n\nimport java.util.Properties;\n\nimport javax.jms.Connection;\nimport javax.jms.ConnectionFactory;\nimport javax.jms.Destination;\nimport javax.jms.Message;\nimport javax.jms.MessageConsumer;\nimport javax.jms.MessageListener;\nimport javax.jms.Session;\nimport javax.naming.Context;\nimport javax.naming.InitialContext;\nimport javax.naming.Reference;\n\nimport org.codehaus.activemq.ActiveMQConnectionFactory;\nimport org.codehaus.activemq.jndi.JNDIReferenceFactory;\n\n\n/**\n * Class to test ActiveMQ Subscriber\n *\n * @author $author$\n * @version $Revision$\n */\npublic class TestActiveMQConsumer implements MessageListener\n{\n    protected ConnectionFactory connFactory;\n    protected Connection rcvConn;\n    protected Session rcvSess;\n    protected MessageConsumer consumer;\n    protected Destination dest;\n\n    /**\n     * main logic\n     *\n     * @param args .\n     *\n     * @throws Exception !\n     */\n    public static void main(String[] args) throws Exception\n    {\n        TestActiveMQConsumer tester = new TestActiveMQConsumer();\n\n        tester.setUp();\n\n        // tester.tearDown();\n    }\n\n    protected void setUp() throws Exception\n    {\n        connFactory = new ActiveMQConnectionFactory(\"multicast://224.0.0.1:8000\");     \n        //connFactory = new ActiveMQConnectionFactory(\"tcp://127.0.0.1:61616\");     \n        System.out.println(\"Created conn factory: \" + connFactory);\n   \n        rcvConn = connFactory.createConnection();\n        System.out.println(\"Created conn: \" + rcvConn);\n        \n        rcvSess = rcvConn.createSession(false, Session.AUTO_ACKNOWLEDGE);\n        System.out.println(\"Created receiveSession: \" + rcvSess);\n        \n        dest = rcvSess.createTopic(\"FOO\");\n        System.out.println( \"Created destination: \" + dest + \" of type: \" + dest.getClass() );\n            \n        consumer = rcvSess.createConsumer(dest);\n        consumer.setMessageListener(this);\n        rcvConn.start();\n        \n        System.out.println(\"Started connections\");\n    }\n\n    protected void tearDown() throws Exception\n    {\n        rcvSess.close();\n        rcvConn.close();\n    }\n\n    /**\n     * Got a message!\n     *\n     * @param message .\n     */\n    public void onMessage(Message message)\n    {\n        System.out.println(\"Received message: \" + message);\n    }\n}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"171965","customfield_12312823":null,"summary":"Unable to get multicast to work in severless environment","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bguan","name":"bguan","key":"bguan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brian Guan","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bguan","name":"bguan","key":"bguan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brian Guan","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Tested on both W2K/JDK1.4.2_04 and Linux/JDK1.4.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481344/comment/12936871","id":"12936871","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"Should be fixed now in CVS - sorry about that","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2004-06-19T00:15:26.000+0000","updated":"2004-06-19T00:15:26.000+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-29/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tsqn:"}}