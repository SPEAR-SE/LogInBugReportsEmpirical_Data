{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483865","self":"https://issues.apache.org/jira/rest/api/2/issue/12483865","key":"AMQ-2939","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315625","id":"12315625","description":"","name":"5.4.2","archived":false,"released":true,"releaseDate":"2010-12-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12317974","id":"12317974","description":"Next v5 maintenance release","name":"5.6.0","archived":false,"released":true,"releaseDate":"2012-05-07"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2010-10-28T09:37:08.830+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Apr 18 09:52:48 UTC 2012","customfield_12310420":"14665","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_4241208443_*|*_5_*:*_2_*:*_2485937805_*|*_4_*:*_1_*:*_42755833335","customfield_12312321":null,"resolutiondate":"2012-04-18T09:52:47.997+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2939/watchers","watchCount":2,"isWatching":false},"created":"2010-09-23T16:36:28.738+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315624","id":"12315624","description":"Maintenance release for 5.4.0","name":"5.4.1","archived":false,"released":true,"releaseDate":"2010-09-21"}],"issuelinks":[{"id":"12350685","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12350685","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12483639","key":"AMQ-2709","self":"https://issues.apache.org/jira/rest/api/2/issue/12483639","fields":{"summary":"Refactor core XML schema to use xs:all types in place of xs:sequence","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12350684","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12350684","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12529046","key":"AMQ-3570","self":"https://issues.apache.org/jira/rest/api/2/issue/12529046","fields":{"summary":"Improve ActiveMQ's XSD to allow elements to appear in any order","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-04-18T09:55:05.425+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"With Activemq 5.3.2, I had this in my activemq.xml:\n \n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n\txmlns:amq=\"http://activemq.apache.org/schema/core\" \n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txsi:schemaLocation=\"\n    http://activemq.apache.org/schema/core\n        http://activemq.apache.org/schema/core/activemq-core-5.4.1.xsd\n    http://camel.apache.org/schema/spring\n    http://camel.apache.org/schema/spring/camel-spring.xsd\n    http://www.springframework.org/schema/beans\n\thttp://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n\t\">\n\n<bean id=\"myPlugin\" class=\"com.yahoo.MyPlugin\">\n\t<property name=\"disabled\">\n\t\t<value>false</value>\n\t</property>\n</bean>\n\n<broker xmlns=\"http://activemq.apache.org/schema/core\"\n\tbrokerName=\"broker1\" dataDirectory=\"${activemq.base}/data\" plugins=\"#myPlugin\">\n\t<transportConnectors>\n\t\t<transportConnector name=\"openwire\" uri=\"tcp://0.0.0.0:61616\" />\n\t</transportConnectors>\n</broker>\n</beans>\n\nRelevant email thread.\n\n-----Original Message-----\nFrom: chubrilo@gmail.com [mailto:chubrilo@gmail.com] On Behalf Of Dejan Bosanac\nSent: Thursday, September 23, 2010 4:19 AM\nTo: users@activemq.apache.org\nSubject: Re: configuring plugins with activemq 5.4.1\n\nHi Allen,\n\ncan you raise an issue for this, as it is an obvious regression? It's probably due the fact that in 5.4 we're back to autogenerating schema.\n\nCheers\n--\nDejan Bosanac - http://twitter.com/dejanb\n\nOpen Source Integration - http://fusesource.com/ ActiveMQ in Action - http://www.manning.com/snyder/ Blog - http://www.nighttale.net\n\n\n\nOn Wed, Sep 22, 2010 at 10:58 PM, Allen Reese <areese@yahoo-inc.com> wrote:\n> The problem is plugins as an attribute of broker seems to be removed in the 5.4.1 xsd.\n>\n> I want to configure the plugin once outside of the brokers, the reason is, I use an <import resource=\"brokers.xml\">, and want to allow other people to reuse the plugin configuration without having to have it as part of their broker definition.\n>\n> I guess I'll keep playing around as I have some other ideas of how to do this, but I'm still confused if I setup my own xsd with an element for the plugin, how do I tie that to the plugin bean?\n>\n> --Allen\n>\n>\n> -----Original Message-----\n> From: Stan Lewis [mailto:slewis@fusesource.com]\n> Sent: Wednesday, September 22, 2010 3:10 PM\n> To: users@activemq.apache.org\n> Subject: Re: configuring plugins with activemq 5.4.1\n>\n> Should be able to do something like:\n>\n> <plugins>\n>   <bean xmlns=\"http://www.springframework.org/schema/beans\"\n> id=\"myPlugin\" class=\"com.yahoo.MyPlugin\">\n>        <property name=\"disabled\">\n>                <value>false</value>\n>        </property>\n>   </bean>\n> </plugins>\n>\n> for this, there's some other examples here:\n>\n> http://activemq.apache.org/developing-plugins.html#DevelopingPlugins-C\n> onfiguringpluginswithoutcustomXML\n>\n> On Wed, Sep 22, 2010 at 3:48 PM, Allen Reese <areese@yahoo-inc.com> wrote:\n>> With Activemq 5.3.2, I had this in my activemq.xml:\n>>\n>> <beans xmlns=\"http://www.springframework.org/schema/beans\"\n>>        xmlns:amq=\"http://activemq.apache.org/schema/core\"\n>>        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n>>        xsi:schemaLocation=\"\n>>    http://activemq.apache.org/schema/core\n>>        http://activemq.apache.org/schema/core/activemq-core-5.4.1.xsd\n>>    http://camel.apache.org/schema/spring\n>>    http://camel.apache.org/schema/spring/camel-spring.xsd\n>>    http://www.springframework.org/schema/beans\n>>\n>> http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n>>        \">\n>>\n>> <bean id=\"myPlugin\" class=\"com.yahoo.MyPlugin\">\n>>        <property name=\"disabled\">\n>>                <value>false</value>\n>>        </property>\n>> </bean>\n>>\n>> <broker xmlns=\"http://activemq.apache.org/schema/core\"\n>>        brokerName=\"broker1\" dataDirectory=\"${activemq.base}/data\"\n>> plugins=\"#myPlugin\">\n>>        <transportConnectors>\n>>                <transportConnector name=\"openwire\"\n>> uri=\"tcp://0.0.0.0:61616\" />\n>>        </transportConnectors>\n>> </broker>\n>> </beans>\n>>\n>> However, when I upgrade to 5.4.1, this no longer works as plugins is no longer supported as an attribute of the broker element.\n>>\n>> I'm not really certain how to wire in a custom plugin any more, can anyone provide some information on how to do this with the 5.4.1 schema?\n>>\n>> Here was my first shot at it, but I know I'm missing how to tie the bean to the namespace.\n>>\n>> <beans xmlns=\"http://www.springframework.org/schema/beans\"\n>>        xmlns:amq=\"http://activemq.apache.org/schema/core\"\n>>        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n>>        xsi:schemaLocation=\"\n>>    http://activemq.apache.org/schema/core\n>>        http://activemq.apache.org/schema/core/activemq-core-5.4.1.xsd\n>>    http://camel.apache.org/schema/spring\n>>    http://camel.apache.org/schema/spring/camel-spring.xsd\n>>    http://www.springframework.org/schema/beans\n>>        http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\"\n>>      >\n>>\n>> <bean id=\"myPlugin\" class=\"com.yahoo.MyPlugin\">\n>>        <property name=\"disabled\">\n>>                <value>false</value>\n>>        </property>\n>> </bean>\n>>\n>>        <broker xmlns=\"http://activemq.apache.org/schema/core\"\n>>                brokerName=\"broker1\"\n>> dataDirectory=\"${activemq.base}/data\">\n>>        <plugins><myPlugin\n>> xmlns=\"http://yahoo.com/schema/java\"/></plugins>\n>>                <transportConnectors>\n>>                        <transportConnector name=\"stomp\"\n>> uri=\"tcp://0.0.0.0:61616\" />\n>>                </transportConnectors>\n>>        </broker>\n>> </beans>\n>>\n>> Thanks.\n>>\n>> --Allen Reese\n>\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461861","id":"12461861","filename":"amq-2939.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=areese","name":"areese","key":"areese","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Allen Reese","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-23T20:54:21.374+0000","size":6425,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461861/amq-2939.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12465982","id":"12465982","filename":"AMQ-2939-vm-query-parse.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-10T13:20:49.762+0000","size":2055,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12465982/AMQ-2939-vm-query-parse.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"63673","customfield_12312823":null,"summary":"Disable Spring 3 schema validation","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=areese","name":"areese","key":"areese","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Allen Reese","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=areese","name":"areese","key":"areese","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Allen Reese","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"RHEL 4u8\nJDK 1.6.0.23","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12942924","id":"12942924","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=areese","name":"areese","key":"areese","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Allen Reese","active":true,"timeZone":"Etc/UTC"},"body":"Patch the shows the regression in 5.4.1\nApplying to 5.3.2, shows it succeeds.\n\nUsing ASF License as this is a direct copy of ActiveMQ code and config with 3 lines added.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=areese","name":"areese","key":"areese","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Allen Reese","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-23T20:54:21.446+0000","updated":"2010-09-23T20:54:21.446+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12943141","id":"12943141","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Adding some more side-effects of Spring 3 schema validation\n\n{quote}\n- in activemq.xml file I define the following configuration\n<managementContext>\n<managementContext createConnector=\"true\" connectorPort=\"${activemq.jmx.port}\" />\n</managementContext>\n\n- then I add some system properties on the command line of the JVM:\nJava Runtime: Sun Microsystems Inc. 1.6.0_20 /usr/lib/jvm/java-6-sun-1.6.0.20/jre\n Heap sizes: current=253440k  free=250641k  max=506816k\n   JVM args: -Dorg.apache.activemq.UseDedicatedTaskRunner=true -Xms256M -Xmx512M -Dactivemq.instance=testrbr -Dactivemq.jmx.port=1099 -Dactivemq.jetty.port=8161 -Djava.util.logging.config.file=logging.properties -Dcom.sun.management.jmxremote -Dactivemq.classpath=/mnt/export/activemq/testrbr/conf;/usr/share/activemq/conf; -Dactivemq.home=/usr/share/activemq -Dactivemq.base=/mnt/export/activemq/testrbr\n\nUnfortunately this fails because of XML validation:\n   Caused by: org.xml.sax.SAXParseException: cvc-datatype-valid.1.2.1: '${activemq.jmx.port}' is not a valid value for 'integer'.\n{quote}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2010-10-28T09:37:08.830+0000","updated":"2010-10-28T09:37:08.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12943145","id":"12943145","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"The root cause of all these problems is schema validation introduced in Spring 3. The solution would be to make this validation at least optional. I had a quick look a while ago, but didn't find a way to do it, so it requires additional research.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2010-10-28T09:42:28.304+0000","updated":"2010-10-28T09:42:28.304+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12943152","id":"12943152","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"For the ManagementContext, in r1028278 I have made the schema use a string value for the port attributes such that they can use property values even with validation.\nValidation should still be optional though.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-10-28T12:50:23.108+0000","updated":"2010-10-28T12:50:23.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12943187","id":"12943187","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rborer","name":"rborer","key":"rborer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Reynald Borer","active":true,"timeZone":"Europe/Berlin"},"body":"According to https://jira.springframework.org/browse/SPR-5014?focusedCommentId=48116&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_48116 there seems to be a way to programatically disable XML validation when creating the application context. I was not able the correct piece of code to change in ActiveMQ to test this unfortunately.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rborer","name":"rborer","key":"rborer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Reynald Borer","active":true,"timeZone":"Europe/Berlin"},"created":"2010-11-09T12:33:25.766+0000","updated":"2010-11-09T12:33:25.766+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12943177","id":"12943177","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"@Reynald \nYou probably need to introduce a subclass of the Xbean ResourceXmlApplicationContext to disable the validation.\n\nThe entry point is: org.apache.activemq.xbean.XBeanBrokerFactory#createApplicationContext in activemq-core","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-09T12:41:33.486+0000","updated":"2010-11-09T12:42:07.896+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12943201","id":"12943201","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"r1034032\n\nadd validate query parameter support to the xbean broker factory so that schema validation can be disabled.{code}./bin/activemq xbean:conf/activemq.xml?validate=false{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-11T18:43:17.130+0000","updated":"2010-11-11T18:43:17.130+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12943232","id":"12943232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adry","name":"adry","key":"adry","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahmoud Ibrahim","active":true,"timeZone":"Etc/UTC"},"body":"@Gary Tully : \ni was using apache-activemq-5.3.2 with configured plugins and everything is working fine. i upgraded to apache-activemq-5.4.1 and i faced the following exception :\norg.xml.sax.SAXParseException: cvc-complex-type.3.2.2: Attribute 'plugins' is not allowed to appear in element 'broker'.\n\ni am using embedded broker :\n BrokerService broker = BrokerFactory.createBroker(\"xbean:activemq.xml\");\n\ni don't know how to configure validate = false for spring 3.0.\ni see it will fixed in 5.5.0 , but i don't have time waiting it. is there any workaround for it ??","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adry","name":"adry","key":"adry","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahmoud Ibrahim","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-19T01:04:29.369+0000","updated":"2010-11-19T01:04:29.369+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12943236","id":"12943236","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=areese","name":"areese","key":"areese","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Allen Reese","active":true,"timeZone":"Etc/UTC"},"body":"You can use the <plugins> element instead.\n\nI ended up doing this:\n\n<bean id=\"myPlugin\" class=\"com.yahoo.MyPlugin\">\n<property name=\"disabled\">\n<value>false</value>\n</property>\n</bean>\n\n\n\t<broker brokerName=\"broker\" dataDirectory=\"${activemq.base}/data\">\n\t\t<plugins xmlns:spring=\"http://www.springframework.org/schema/beans\">\n\t\t\t<spring:ref local=\"myPlugin\" />\n \t\t</plugins>\n\t</broker>\n\nInstead of:\n<bean id=\"myPlugin\" class=\"com.yahoo.MyPlugin\">\n<property name=\"disabled\">\n<value>false</value>\n</property>\n</bean>\n\n\n\t<broker brokerName=\"broker\" dataDirectory=\"${activemq.base}/data\" plugins=\"#myPlugin\">\n\t</broker>\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=areese","name":"areese","key":"areese","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Allen Reese","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-19T01:28:27.668+0000","updated":"2010-11-19T01:28:27.668+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12970159","id":"12970159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"embedded xbean url in vm transport does not work with the validation=false query parameter. The parameter is gobbled up by over eater query parsing. Example of uri that won't work:\n{code}\"vm://localhost?brokerConfig=xbean:appendium-esb-server-activemq-broker-config.xml?validate=false\"{code}\n\nPoints to a problem in URISupport, the diff below will fix. \nThere are some tests(FailoverUriTest) that are dependent on the broken behavour so this needs some care to maintain backward compatibility if possible.\n{code}Index: src/main/java/org/apache/activemq/util/URISupport.java\n===================================================================\n--- src/main/java/org/apache/activemq/util/URISupport.java\t(revision 1044145)\n+++ src/main/java/org/apache/activemq/util/URISupport.java\t(working copy)\n@@ -101,9 +101,18 @@\n         }\n     }\n \n+    /**\n+     * any leading '?' should already be stripped off\n+     */\n     public static Map<String, String> parseQuery(String uri) throws URISyntaxException {\n         try {\n-            uri = uri.substring(uri.lastIndexOf(\"?\") + 1); // get only the relevant part of the query\n+            // get only the relevant part of this query string\n+            if (uri.indexOf(')') != -1) {\n+                uri = uri.substring(0, uri.indexOf(')'));\n+            }\n+            if (uri.indexOf('?') != -1) {\n+                uri = uri.substring(0, uri.indexOf('?')); \n+            }\n             Map<String, String> rc = new HashMap<String, String>();\n             if (uri != null) {\n                 String[] parameters = uri.split(\"&\");{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-10T13:15:34.881+0000","updated":"2010-12-10T13:15:34.881+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/12970160","id":"12970160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"Patch with fix that needs validation of usage pending unit test investigations.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-10T13:20:49.809+0000","updated":"2010-12-10T13:20:49.809+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483865/comment/13256400","id":"13256400","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"The changes in https://issues.apache.org/jira/browse/AMQ-3570 to remove the ordering constraint  via xbean 3.9 will sort this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-18T09:52:48.181+0000","updated":"2012-04-18T09:52:48.181+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2939/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0b9mv:"}}