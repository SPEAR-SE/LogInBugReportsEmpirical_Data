{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483574","self":"https://issues.apache.org/jira/rest/api/2/issue/12483574","key":"AMQ-2749","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2010-05-26T10:47:08.235+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 11 21:22:39 UTC 2011","customfield_12310420":"68353","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_35609571459_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-11T21:22:39.273+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2749/watchers","watchCount":1,"isWatching":false},"created":"2010-05-25T17:49:47.831+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315621","id":"12315621","description":"","name":"5.3.1","archived":false,"released":true,"releaseDate":"2010-03-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-11T21:22:39.284+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Our broker suddenly hang in production environment. We created a bunch of jstacks to see what the reason is.\n\nThe jstacks show that the broker waits with many threads in doMessageSend:\n\ne.g.\n\"ActiveMQ Transport: tcp:///10.231.233.117:51088\" daemon prio=10 tid=0x00002aab84016800 nid=0x1f19 waiting for monitor entry [0x000000006a8f2000]\n   java.lang.Thread.State: BLOCKED (on object monitor)\n\tat org.apache.activemq.broker.region.Topic.doMessageSend(Topic.java:402)\n\t- waiting to lock <0x00002aaab46f8938> (a org.apache.activemq.broker.region.Topic)\n\tat org.apache.activemq.broker.region.Topic.send(Topic.java:384)\n\tat org.apache.activemq.broker.region.DestinationFilter.send(DestinationFilter.java:93)\n\tat org.apache.activemq.broker.region.virtual.VirtualTopicInterceptor.send(VirtualTopicInterceptor.java:46)\n\tat org.apache.activemq.broker.region.AbstractRegion.send(AbstractRegion.java:354)\n\tat org.apache.activemq.broker.region.RegionBroker.send(RegionBroker.java:445)\n\tat org.apache.activemq.broker.TransactionBroker.send(TransactionBroker.java:224)\n\tat org.apache.activemq.advisory.AdvisoryBroker.fireAdvisory(AdvisoryBroker.java:443)\n\tat org.apache.activemq.advisory.AdvisoryBroker.fireAdvisory(AdvisoryBroker.java:373)\n\tat org.apache.activemq.advisory.AdvisoryBroker.fireAdvisory(AdvisoryBroker.java:368)\n\tat org.apache.activemq.advisory.AdvisoryBroker.addDestinationInfo(AdvisoryBroker.java:173)\n\tat org.apache.activemq.broker.BrokerFilter.addDestinationInfo(BrokerFilter.java:214)\n\tat org.apache.activemq.broker.BrokerFilter.addDestinationInfo(BrokerFilter.java:214)\n\tat org.apache.activemq.broker.MutableBrokerFilter.addDestinationInfo(MutableBrokerFilter.java:221)\n\tat org.apache.activemq.broker.TransportConnection.processAddDestination(TransportConnection.java:467)\n\tat org.apache.activemq.command.DestinationInfo.visit(DestinationInfo.java:122)\n\tat org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:300)\n\tat org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:178)\n\tat org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:68)\n\tat org.apache.activemq.transport.stomp.StompTransportFilter.sendToActiveMQ(StompTransportFilter.java:82)\n\tat org.apache.activemq.transport.stomp.ProtocolConverter.sendToActiveMQ(ProtocolConverter.java:135)\n\tat org.apache.activemq.transport.stomp.ProtocolConverter.createTempQueue(ProtocolConverter.java:611)\n\tat org.apache.activemq.transport.stomp.LegacyFrameTranslator.convertDestination(LegacyFrameTranslator.java:130)\n\tat org.apache.activemq.transport.stomp.FrameTranslator$Helper.copyStandardHeadersFromFrameToMessage(FrameTranslator.java:93)\n\tat org.apache.activemq.transport.stomp.LegacyFrameTranslator.convertFrame(LegacyFrameTranslator.java:54)\n\tat org.apache.activemq.transport.stomp.ProtocolConverter.convertMessage(ProtocolConverter.java:591)\n\tat org.apache.activemq.transport.stomp.ProtocolConverter.onStompSend(ProtocolConverter.java:231)\n\tat org.apache.activemq.transport.stomp.ProtocolConverter.onStompCommand(ProtocolConverter.java:173)\n\tat org.apache.activemq.transport.stomp.StompTransportFilter.onCommand(StompTransportFilter.java:71)\n\tat org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84)\n\tat org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:204)\n\tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:186)\n\tat java.lang.Thread.run(Thread.java:619)\n\n\nIt is waiting to lock 0x00002aaab46f8938. This is the thread that holds the lock:\n\n\"ActiveMQ Transport: tcp:///10.231.233.117:43020\" daemon prio=10 tid=0x00000000608d8800 nid=0xc6e in Object.wait() [0x000000007d41c000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\tat org.apache.activemq.broker.region.TopicSubscription.add(TopicSubscription.java:106)\n\t- locked <0x00002aaab57d34e8> (a java.lang.Object)\n\tat org.apache.activemq.broker.region.policy.SimpleDispatchPolicy.dispatch(SimpleDispatchPolicy.java:49)\n\t- locked <0x00002aaab46f98e0> (a java.util.concurrent.CopyOnWriteArrayList)\n\tat org.apache.activemq.broker.region.Topic.dispatch(Topic.java:585)\n\tat org.apache.activemq.broker.region.Topic.doMessageSend(Topic.java:443)\n\t- locked <0x00002aaab46f8938> (a org.apache.activemq.broker.region.Topic)\n\tat org.apache.activemq.broker.region.Topic.send(Topic.java:384)\n\tat org.apache.activemq.broker.region.DestinationFilter.send(DestinationFilter.java:93)\n\tat org.apache.activemq.broker.region.virtual.VirtualTopicInterceptor.send(VirtualTopicInterceptor.java:46)\n\tat org.apache.activemq.broker.region.AbstractRegion.send(AbstractRegion.java:354)\n\tat org.apache.activemq.broker.region.RegionBroker.send(RegionBroker.java:445)\n\tat org.apache.activemq.broker.TransactionBroker.send(TransactionBroker.java:224)\n\tat org.apache.activemq.advisory.AdvisoryBroker.fireAdvisory(AdvisoryBroker.java:443)\n\tat org.apache.activemq.advisory.AdvisoryBroker.fireAdvisory(AdvisoryBroker.java:373)\n\tat org.apache.activemq.advisory.AdvisoryBroker.fireAdvisory(AdvisoryBroker.java:368)\n\tat org.apache.activemq.advisory.AdvisoryBroker.removeDestination(AdvisoryBroker.java:185)\n\tat org.apache.activemq.broker.BrokerFilter.removeDestination(BrokerFilter.java:146)\n\tat org.apache.activemq.broker.BrokerFilter.removeDestination(BrokerFilter.java:146)\n\tat org.apache.activemq.broker.MutableBrokerFilter.removeDestination(MutableBrokerFilter.java:153)\n\tat org.apache.activemq.broker.TransportConnection.processRemoveConnection(TransportConnection.java:713)\n\t- locked <0x00002aaac32b10c0> (a org.apache.activemq.broker.jmx.ManagedTransportConnection)\n\tat org.apache.activemq.command.RemoveInfo.visit(RemoveInfo.java:72)\n\tat org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:300)\n\tat org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:178)\n\tat org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:68)\n\tat org.apache.activemq.transport.stomp.StompTransportFilter.sendToActiveMQ(StompTransportFilter.java:82)\n\tat org.apache.activemq.transport.stomp.ProtocolConverter.sendToActiveMQ(ProtocolConverter.java:135)\n\tat org.apache.activemq.transport.stomp.ProtocolConverter.onStompDisconnect(ProtocolConverter.java:545)\n\tat org.apache.activemq.transport.stomp.ProtocolConverter.onStompCommand(ProtocolConverter.java:189)\n\tat org.apache.activemq.transport.stomp.StompTransportFilter.onCommand(StompTransportFilter.java:71)\n\tat org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84)\n\tat org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:204)\n\tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:186)\n\tat java.lang.Thread.run(Thread.java:619)\n\n\nSo it is the client 10.231.233.117 that has a stomp-connection to the broker, causes a TopicSubscription.add and causes the broker freeze. \n\nThis is how we configure our openwire transport-connector in the activemq.xml:\n        <transportConnectors>\n            <transportConnector name=\"openwire\" uri=\"tcp://0.0.0.0:61616\"/>\n            <transportConnector name=\"stomp\" uri=\"stomp://0.0.0.0:61613\"/>\n        </transportConnectors>\n\nWe took jstack-dumps with a distance of 9 minutes. Both are attached. In both dumps it is the same TopicSubscription.add that causes the hang.\n\nHow can we solve this issue? Looks like the connection should run into an timeout but doesn't. Is this an activemq bug? Can we somehow set the broker openwire timeout parameters?\n\nThanks for any hints.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461710","id":"12461710","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-26T11:54:58.561+0000","size":3689,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12461710/activemq.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461711","id":"12461711","filename":"jmx console screenshot.jpg","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-26T11:58:48.689+0000","size":225194,"mimeType":"image/jpeg","content":"https://issues.apache.org/jira/secure/attachment/12461711/jmx+console+screenshot.jpg"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461708","id":"12461708","filename":"jstack.2010-05-25-14-01-30","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-25T17:52:29.441+0000","size":1375230,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12461708/jstack.2010-05-25-14-01-30"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461709","id":"12461709","filename":"jstack.2010-05-25-14-10-54","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-25T17:52:29.869+0000","size":1429914,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12461709/jstack.2010-05-25-14-10-54"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172408","customfield_12312823":null,"summary":"Broker hangs in TopicSubscription.add","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"red had enterprise","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483574/comment/12942729","id":"12942729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"body":"Now we got the same problem on a preprod machine.\n\nThis time it is not a stomp connection that causes the freeze.\n\nThis is the thread that holds the lock that blocks all other threads:\n\n\"ActiveMQ Transport: tcp:///10.231.243.16:57992\" daemon prio=10 tid=0x00002ab309c44800 nid=0xd40 in Object.wait() [0x00002ab364174000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\tat org.apache.activemq.broker.region.TopicSubscription.add(TopicSubscription.java:106)\n\t- locked <0x00002aab30c0e238> (a java.lang.Object)\n\tat org.apache.activemq.broker.region.policy.SimpleDispatchPolicy.dispatch(SimpleDispatchPolicy.java:49)\n\t- locked <0x00002aaab3f5eaa8> (a java.util.concurrent.CopyOnWriteArrayList)\n\tat org.apache.activemq.broker.region.Topic.dispatch(Topic.java:585)\n\tat org.apache.activemq.broker.region.Topic.doMessageSend(Topic.java:443)\n\t- locked <0x00002aaab3f5de00> (a org.apache.activemq.broker.region.Topic)\n\tat org.apache.activemq.broker.region.Topic.send(Topic.java:384)\n\tat org.apache.activemq.broker.region.DestinationFilter.send(DestinationFilter.java:93)\n\tat org.apache.activemq.broker.region.virtual.VirtualTopicInterceptor.send(VirtualTopicInterceptor.java:46)\n\tat org.apache.activemq.broker.region.AbstractRegion.send(AbstractRegion.java:354)\n\tat org.apache.activemq.broker.region.RegionBroker.send(RegionBroker.java:445)\n\tat org.apache.activemq.broker.TransactionBroker.send(TransactionBroker.java:224)\n\tat org.apache.activemq.advisory.AdvisoryBroker.fireAdvisory(AdvisoryBroker.java:443)\n\tat org.apache.activemq.advisory.AdvisoryBroker.fireAdvisory(AdvisoryBroker.java:373)\n\tat org.apache.activemq.advisory.AdvisoryBroker.addConsumer(AdvisoryBroker.java:116)\n\tat org.apache.activemq.broker.BrokerFilter.addConsumer(BrokerFilter.java:86)\n\tat org.apache.activemq.broker.MutableBrokerFilter.addConsumer(MutableBrokerFilter.java:93)\n\tat org.apache.activemq.broker.TransportConnection.processAddConsumer(TransportConnection.java:533)\n\tat org.apache.activemq.command.ConsumerInfo.visit(ConsumerInfo.java:349)\n\tat org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:300)\n\tat org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:178)\n\tat org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:68)\n\tat org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)\n\tat org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:216)\n\t- locked <0x00002aab2fd02060> (a org.apache.activemq.transport.InactivityMonitor$1)\n\tat org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84)\n\tat org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:204)\n\tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:186)\n\tat java.lang.Thread.run(Thread.java:619)\n\nI wonder how TopicSubscription.add can freeze?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-26T10:34:37.824+0000","updated":"2010-05-26T10:34:37.824+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483574/comment/12942730","id":"12942730","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"from the code: http://svn.apache.org/viewvc/activemq/tags/activemq-5.3.1/activemq-core/src/main/java/org/apache/activemq/broker/region/TopicSubscription.java?view=markup\n\nit looks like u have reached the temp store or memory limit on the pending message cursor. which it is depends on the pending message cursor u are using. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-26T10:47:08.235+0000","updated":"2010-05-26T10:47:08.235+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483574/comment/12942735","id":"12942735","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"body":"I've attached our activemq.xml and a screenshot of a jmx console to a similar broker that is running since 5 days.\n\nwe do not have any warnings or errors in the log.\n\nif we reached the temp store or memory limit on the pending message cursor, would we get a warning log entry?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-26T12:02:19.381+0000","updated":"2010-05-26T12:02:19.381+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483574/comment/12942732","id":"12942732","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"I just added a log message if the subscription is blocked as in your stack trace to trunk. r948489. will be in tonights 5.4-SNAPSHOT\nWhile u don't have any usage limits specified, there are some default values, 64M memory, 10G temp and 100G store. Would you be using that much temp space?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-26T16:33:49.101+0000","updated":"2010-05-26T16:33:49.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483574/comment/12942736","id":"12942736","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"body":"We might have reached the 64M memory limit. \n\nWe changed our configuration and specified a high memory limit. Hopefully this will solve our issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jteetel","name":"jteetel","key":"jteetel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Klinkott","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-27T09:32:56.792+0000","updated":"2010-05-27T09:32:56.792+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483574/comment/13063551","id":"13063551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Configuration issue, broker was reaching its memory limits.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-07-11T21:22:39.282+0000","updated":"2011-07-11T21:22:39.282+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2749/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tvh3:"}}