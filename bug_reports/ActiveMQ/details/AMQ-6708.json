{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13080913","self":"https://issues.apache.org/jira/rest/api/2/issue/13080913","key":"AMQ-6708","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2017-06-20T14:49:40.647+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Aug 23 14:42:36 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6708/watchers","watchCount":3,"isWatching":false},"created":"2017-06-19T18:57:27.998+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12338822","id":"12338822","name":"5.14.3","archived":false,"released":true,"releaseDate":"2016-12-22"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-08-23T14:42:36.032+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We've come across a problem with our brokers wherein messages consumed from a topic will intermittently have null/empty body text. This is regardless of the type of consumer we use, be it stomp or openwire. There doesn't seem to be any particular pattern to the null messages that we can see, and they may be null for one consumer but the same message would have a body for another consumer. While we can consistently reproduce it in the sense that we can connect a consumer and wait for a period of time (usually a couple of minutes) and the issue will occur, we can't seem to find the exact conditions under which the null message happens.\n\nI know this a relatively vague issue description, but I'm not sure what more you'd be looking for right now. Please comment and let me know if you'd like more information. This is currently a major problem for us, as it makes our topics unreliable.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12873704","id":"12873704","filename":"config.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pboekelheide","name":"pboekelheide","key":"pboekelheide","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Boekelheide","active":true,"timeZone":"America/Rainy_River"},"created":"2017-06-20T15:53:01.003+0000","size":7916,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12873704/config.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"When reading from a topic, messages will intermittently have empty body text","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pboekelheide","name":"pboekelheide","key":"pboekelheide","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Boekelheide","active":true,"timeZone":"America/Rainy_River"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pboekelheide","name":"pboekelheide","key":"pboekelheide","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Boekelheide","active":true,"timeZone":"America/Rainy_River"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"CentOS 7","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13080913/comment/16055875","id":"16055875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"What does your configuration for your broker look like? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2017-06-20T14:49:40.647+0000","updated":"2017-06-20T14:49:40.647+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13080913/comment/16055998","id":"16055998","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pboekelheide","name":"pboekelheide","key":"pboekelheide","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Boekelheide","active":true,"timeZone":"America/Rainy_River"},"body":"So our topology is pretty complicated, but I'll give you a couple of nodes to show the basic idea. The four configuration files in question are included in the [^config.zip] attached to this ticket.\n\nWe've got one broker, here mqbe03, with the configuration be03_activemq.xml and be03_camel.xml. That broker is networked to another broker, 04, which I'm not showing here. They have rebalance and their clients all do failover. \n\nThen there's a third broker, npqueue01, which has the configuration npqueue_activemq.xml and npqueue_camel.xml. This broker is standalone, and uses its camel routing to pull from mqbe03 (or, if it's rebalanced of fails over, mqbe04).\n\nLet me know if this isn't clear enough or you need more information.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pboekelheide","name":"pboekelheide","key":"pboekelheide","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Boekelheide","active":true,"timeZone":"America/Rainy_River"},"created":"2017-06-20T15:52:46.785+0000","updated":"2017-06-20T15:52:46.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13080913/comment/16056078","id":"16056078","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"One thing I noticed is that you have configured {{concurrentStoreAndDispatchTopics}} set to true.  Setting {{concurrentStoreAndDispatchQueues}} to true (the default) is recommended but for Topics it is not and might be the cause of the issue.  You might want to try disabling that first.  \n\nOther than that, to narrow down the issue, you'd probably need to start removing variables.  It's possible there could be something going on with Camel, etc but it's hard to say.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2017-06-20T16:56:29.892+0000","updated":"2017-06-20T16:57:15.295+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13080913/comment/16056084","id":"16056084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pboekelheide","name":"pboekelheide","key":"pboekelheide","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Boekelheide","active":true,"timeZone":"America/Rainy_River"},"body":"We have tested setting concurrent store and dispatch to false for topics and have continued to see the issue. What variables would you suggest we eliminate?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pboekelheide","name":"pboekelheide","key":"pboekelheide","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Boekelheide","active":true,"timeZone":"America/Rainy_River"},"created":"2017-06-20T17:00:18.013+0000","updated":"2017-06-20T17:00:18.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13080913/comment/16056333","id":"16056333","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"What kind of messages are you sending?  Does the issue still happen if you change message type? (String, bytes message, etc, or persistent or non-persistent)\n\nThe main thing is just trying to narrow down what the issue could be as right now it will be hard to figure out as your setup is complex.  For example, does the issue happen if you only have 1 consumer instead of multiple?  Does the issue happen if you just use a standalone broker and no network of brokers?  Does the issue happen if Camel is not used?  The simplest setup possible to reproduce the issue the better.  For example, If you are able to reproduce it with a standalone broker without Camel it would be a lot easier to debug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2017-06-20T19:35:45.235+0000","updated":"2017-06-20T19:35:45.235+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13080913/comment/16590332","id":"16590332","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tolk","name":"tolk","key":"tolk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James McHugh","active":true,"timeZone":"Etc/UTC"},"body":"[~pboekelheide] did you ever manage to resolve the issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tolk","name":"tolk","key":"tolk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James McHugh","active":true,"timeZone":"Etc/UTC"},"created":"2018-08-23T14:42:36.032+0000","updated":"2018-08-23T14:42:36.032+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6708/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3ggjj:"}}