{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13056816","self":"https://issues.apache.org/jira/rest/api/2/issue/13056816","key":"AMQ-6631","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2017-03-16T22:24:38.134+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 16 22:24:38 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6631/watchers","watchCount":2,"isWatching":false},"created":"2017-03-16T22:12:53.418+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335661","id":"12335661","name":"5.13.4","archived":false,"released":true,"releaseDate":"2016-07-19"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-03-16T22:24:38.134+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Pending message counts start showing large negative numbers for busy queues; enqueue time for these queues starts growing by a factor of 1000 when that happens.  Purging the queue temporarily fixes the issue (the pending messages goes back to 0, enqueue time drops), but it then comes back again.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12859181","id":"12859181","filename":"screenshot-activemq.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gary.ginzburg","name":"gary.ginzburg","key":"gary.ginzburg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Ginzburg","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-16T22:16:17.864+0000","size":108903,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12859181/screenshot-activemq.png"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Pending message count is showing negative; enqueue time starts growing.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gary.ginzburg","name":"gary.ginzburg","key":"gary.ginzburg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Ginzburg","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gary.ginzburg","name":"gary.ginzburg","key":"gary.ginzburg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Ginzburg","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Ubuntu Linux","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056816/comment/15929020","id":"15929020","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gary.ginzburg","name":"gary.ginzburg","key":"gary.ginzburg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Ginzburg","active":true,"timeZone":"Etc/UTC"},"body":"Here is our configuration:\n\n<beans\n  xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\">\n    <bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\">\n        <property name=\"locations\">\n            <value>file:${activemq.conf}/credentials.properties</value>\n        </property>\n    </bean>\n    <bean id=\"logQuery\" class=\"io.fabric8.insight.log.log4j.Log4jLogQuery\"\n      lazy-init=\"false\" scope=\"singleton\"\n      init-method=\"start\" destroy-method=\"stop\">\n    </bean>\n    <broker xmlns=\"http://activemq.apache.org/schema/core\" brokerName=\"prd1-activemq-1b-2\" dataDirectory=\"${activemq.data}\" persistent=\"false\">\n        <networkConnectors>\n                <networkConnector name=\"linkToprd1-activemq-1b-1-1\"\n                        uri=\"static:(tcp://10.35.96.181:61616)\"\n                        networkTTL=\"3\" >\n                        <dynamicallyIncludedDestinations>\n                            <queue physicalName=\"Consumer.*.VirtualTopic.>\"/>\n                            <queue physicalName=\"Consumer.*.cloud.xirrus.com.VirtualTopic.>\"/>\n                            <queue physicalName=\"ReportGeneratorService\"/>\n                            <queue physicalName=\"ReportGeneratorService.>\"/>\n                            <topic physicalName=\">\"/>\n                        </dynamicallyIncludedDestinations>\n                    </networkConnector>\n      </networkConnectors>\n        <destinationPolicy>\n            <policyMap>\n              <policyEntries>\n                <policyEntry topic=\">\" >\n                  <pendingMessageLimitStrategy>\n                    <constantPendingMessageLimitStrategy limit=\"1000\"/>\n                  </pendingMessageLimitStrategy>\n                </policyEntry>\n\n    <policyEntry queue=\"ServerDeviceDataService\" memoryLimit=\"700mb\" producerFlowControl=\"false\" />\n    <policyEntry queue=\">\" memoryLimit=\"100mb\" queuePrefetch=\"500\" producerFlowControl=\"false\" />\n              </policyEntries>\n            </policyMap>\n        </destinationPolicy>\n        <managementContext>\n            <managementContext createConnector=\"false\"/>\n        </managementContext>\n <persistenceAdapter>\n  <mKahaDB directory=\"${activemq.base}/data/kahadb\">\n    <filteredPersistenceAdapters>\n      <filteredKahaDB queue=\"Server.>\">\n        <persistenceAdapter>\n          <kahaDB enableJournalDiskSyncs=\"false\"/>\n        </persistenceAdapter>\n      </filteredKahaDB>\n      <filteredKahaDB queue=\">\">\n        <persistenceAdapter>\n          <kahaDB journalMaxFileLength=\"64mb\"/>\n        </persistenceAdapter>\n      </filteredKahaDB>\n      <filteredKahaDB topic=\"ActiveMQ.Advisory.>\">\n        <persistenceAdapter>\n          <kahaDB  enableJournalDiskSyncs=\"false\" enableIndexWriteAsync=\"true\"/>\n        </persistenceAdapter>\n      </filteredKahaDB>\n\n      <filteredKahaDB>\n        <persistenceAdapter>\n          <kahaDB />\n        </persistenceAdapter>\n      </filteredKahaDB>\n    </filteredPersistenceAdapters>\n  </mKahaDB>\n </persistenceAdapter>\n          <systemUsage>\n            <systemUsage>\n                <memoryUsage>\n                    <memoryUsage percentOfJvmHeap=\"80\" />\n                </memoryUsage>\n                <storeUsage>\n                    <storeUsage limit=\"60 gb\"/>\n                </storeUsage>\n                <tempUsage>\n                    <tempUsage limit=\"25 gb\"/>\n                </tempUsage>\n            </systemUsage>\n        </systemUsage>\n        <transportConnectors>\n            <transportConnector name=\"openwire\" uri=\"nio://0.0.0.0:61616?wireformat.maxFrameSize=1703936\"/>\n        </transportConnectors>\n        <shutdownHooks>\n            <bean xmlns=\"http://www.springframework.org/schema/beans\" class=\"org.apache.activemq.hooks.SpringContextHook\" />\n        </shutdownHooks>\n\n        <plugins>\n                <discardingDLQBrokerPlugin dropAll=\"true\" dropTemporaryTopics=\"true\" dropTemporaryQueues=\"true\" />\n        </plugins>\n    </broker>\n    <import resource=\"jetty.xml\"/>\n</beans>\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gary.ginzburg","name":"gary.ginzburg","key":"gary.ginzburg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Ginzburg","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-16T22:18:47.335+0000","updated":"2017-03-16T22:18:47.335+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13056816/comment/15929033","id":"15929033","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Latest release in 5.14.4 which you should try, if you still see the issue then we'd need a reproducer to investigate ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2017-03-16T22:24:38.134+0000","updated":"2017-03-16T22:24:38.134+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6631/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3ce6v:"}}