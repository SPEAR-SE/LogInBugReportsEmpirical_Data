{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12534938","self":"https://issues.apache.org/jira/rest/api/2/issue/12534938","key":"AMQ-3633","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321258","id":"12321258","description":"Next v5 maintenance release","name":"5.7.0","archived":false,"released":true,"releaseDate":"2012-10-08"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-09-19T13:08:50.653+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Mar 02 18:43:40 UTC 2016","customfield_12310420":"220622","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_24282785201_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-09-19T13:09:01.083+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3633/watchers","watchCount":4,"isWatching":false},"created":"2011-12-13T11:55:55.893+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315626","id":"12315626","description":"","name":"5.5.0","archived":false,"released":true,"releaseDate":"2011-04-01"}],"issuelinks":[{"id":"12389392","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12389392","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12673119","key":"AMQ-4794","self":"https://issues.apache.org/jira/rest/api/2/issue/12673119","fields":{"summary":"activemq web console fails in karaf+equinox","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/4","description":"This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/reopened.png","name":"Reopened","id":"4","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-03-02T18:43:40.079+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I installed activemq-web-console feature as described in [1].\nAfer restart container there is exception in console:\n\n2011-12-13 14:51:32,906 [.ops4j.pax.web)] INFO  XBeanXmlBeanDefinitionReader   - Loading XML bean definitions from ServletContext resource [/WEB-INF/activemq.xml]\nException in thread \"JMX Connector Thread [service:jmx:rmi://localhost:44444/jndi/rmi://localhost:1099/karaf-root]\" java.lang.RuntimeException: Could not start JMX connector server\n        at org.apache.karaf.management.ConnectorServerFactory$1.run(ConnectorServerFactory.java:234)\nCaused by: java.io.IOException: Cannot bind to URL [rmi://localhost:1099/karaf-root]: javax.naming.CommunicationException [Root exception is java.rmi.ServerException: RemoteException occurred in serve\nr thread; nested exception is:\n        java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\n        java.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub not found by org.apache.activemq.activemq-web-console [78] (no security manager: RMI class loader disabled)]\n        at javax.management.remote.rmi.RMIConnectorServer.newIOException(RMIConnectorServer.java:804)\n        at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:417)\n        at org.apache.karaf.management.ConnectorServerFactory$1.run(ConnectorServerFactory.java:232)\nCaused by: javax.naming.CommunicationException [Root exception is java.rmi.ServerException: RemoteException occurred in server thread; nested exception is:\n        java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\n        java.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub not found by org.apache.activemq.activemq-web-console [78] (no security manager: RMI class loader disabled)]\n        at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:126)\n        at com.sun.jndi.toolkit.url.GenericURLContext.bind(GenericURLContext.java:208)\n        at javax.naming.InitialContext.bind(InitialContext.java:400)\n        at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServer.java:625)\n        at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:412)\n        ... 1 more\nCaused by: java.rmi.ServerException: RemoteException occurred in server thread; nested exception is:\n        java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\n        java.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub not found by org.apache.activemq.activemq-web-console [78] (no security manager: RMI class loader disabled)\n        at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:400)\n        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:248)\n        at sun.rmi.transport.Transport$1.run(Transport.java:159)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at sun.rmi.transport.Transport.serviceCall(Transport.java:155)\n        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:662)\n        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)\n        at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)\n        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:359)\n        at sun.rmi.registry.RegistryImpl_Stub.bind(Unknown Source)\n        at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:120)\n        ... 5 more\nCaused by: java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\n        java.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub not found by org.apache.activemq.activemq-web-console [78] (no security manager: RMI class loader disabled)\n        at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)\n        at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:390)\n        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:248)\n        at sun.rmi.transport.Transport$1.run(Transport.java:159)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at sun.rmi.transport.Transport.serviceCall(Transport.java:155)\n        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:662)\nCaused by: java.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub not found by org.apache.activemq.activemq-web-console [78] (no security manager: RMI class loader disabled)\n        at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:373)\n        at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:163)\n        at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)\n        at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:247)\n        at sun.rmi.server.MarshalInputStream.resolveClass(MarshalInputStream.java:197)\n        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1574)\n        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1731)\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)\n        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)\n        ... 12 more\n\n1. http://activemq.apache.org/osgi-integration.html","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"41320","customfield_12312823":null,"summary":"[OSGi] activemq-web-console: exception after restart container","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amarkevich","name":"amarkevich","key":"amarkevich","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amarkevich&avatarId=34643","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amarkevich&avatarId=34643","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amarkevich&avatarId=34643","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amarkevich&avatarId=34643"},"displayName":"Alexey Markevich","active":true,"timeZone":"Asia/Baghdad"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amarkevich","name":"amarkevich","key":"amarkevich","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=amarkevich&avatarId=34643","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=amarkevich&avatarId=34643","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=amarkevich&avatarId=34643","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=amarkevich&avatarId=34643"},"displayName":"Alexey Markevich","active":true,"timeZone":"Asia/Baghdad"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"karaf 2.2.4","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12534938/comment/13458668","id":"13458668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"body":"I think the JMX has been fixed on trunk. Can you try with 5.7 when its released. Or the 5.7-SNAPSHOT.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"created":"2012-09-19T13:08:50.653+0000","updated":"2012-09-19T13:08:50.653+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12534938/comment/13482888","id":"13482888","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gcollins","name":"gcollins","key":"gcollins","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gareth Collins","active":true,"timeZone":"Etc/UTC"},"body":"Are we sure this is fixed? I just reproduced on activemq 5.7.0 with karaf 2.3.0:\n\n\n\njava.io.IOException: java.lang.RuntimeException: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is: \n\tjava.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub (no security manager: RMI class loader disabled)]\n\tat org.apache.activemq.web.filter.ApplicationContextFilter.doFilter(ApplicationContextFilter.java:92)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)[78:org.eclipse.jetty.servlet:7.6.7.v20120910]\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)[78:org.eclipse.jetty.servlet:7.6.7.v20120910]\n\tat org.ops4j.pax.web.service.internal.WelcomeFilesFilter.doFilter(WelcomeFilesFilter.java:193)[87:org.ops4j.pax.web.pax-web-runtime:1.1.3]\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)[78:org.eclipse.jetty.servlet:7.6.7.v20120910]\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:445)[78:org.eclipse.jetty.servlet:7.6.7.v20120910]\n\tat org.ops4j.pax.web.service.jetty.internal.HttpServiceServletHandler.doHandle(HttpServiceServletHandler.java:70)[88:org.ops4j.pax.web.pax-web-jetty:1.1.3]\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)[77:org.eclipse.jetty.security:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1038)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.ops4j.pax.web.service.jetty.internal.HttpServiceContext.doHandle(HttpServiceContext.java:117)[88:org.ops4j.pax.web.pax-web-jetty:1.1.3]\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:374)[78:org.eclipse.jetty.servlet:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:189)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:972)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.ops4j.pax.web.service.jetty.internal.JettyServerHandlerCollection.handle(JettyServerHandlerCollection.java:74)[88:org.ops4j.pax.web.pax-web-jetty:1.1.3]\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.Server.handle(Server.java:359)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:483)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:920)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:982)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)[72:org.eclipse.jetty.http:7.6.7.v20120910]\n\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)[72:org.eclipse.jetty.http:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.server.nio.BlockingChannelConnector$BlockingChannelEndPoint.run(BlockingChannelConnector.java:298)[76:org.eclipse.jetty.server:7.6.7.v20120910]\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)[70:org.eclipse.jetty.util:7.6.7.v20120910]\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)[70:org.eclipse.jetty.util:7.6.7.v20120910]\n\tat java.lang.Thread.run(Unknown Source)[:1.7.0_05]\nCaused by: java.lang.RuntimeException: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is: \n\tjava.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub (no security manager: RMI class loader disabled)]\n\tat org.apache.activemq.web.RemoteJMXBrokerFacade.createConnection(RemoteJMXBrokerFacade.java:165)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\tat org.apache.activemq.web.RemoteJMXBrokerFacade.getMBeanServerConnection(RemoteJMXBrokerFacade.java:114)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\tat org.apache.activemq.web.RemoteJMXBrokerFacade.getBrokerAdmin(RemoteJMXBrokerFacade.java:88)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\tat org.apache.activemq.web.BrokerFacadeSupport.isSlave(BrokerFacadeSupport.java:231)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\tat org.apache.activemq.web.filter.ApplicationContextFilter.doFilter(ApplicationContextFilter.java:86)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\t... 31 more\nCaused by: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is: \n\tjava.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub (no security manager: RMI class loader disabled)]\n\tat javax.management.remote.rmi.RMIConnector.connect(Unknown Source)[:1.7.0_05]\n\tat javax.management.remote.JMXConnectorFactory.connect(Unknown Source)[:1.7.0_05]\n\tat org.apache.activemq.web.RemoteJMXBrokerFacade.createConnection(RemoteJMXBrokerFacade.java:146)[117:org.apache.activemq.activemq-web-console:5.7.0]\n\t... 35 more\nCaused by: javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is: \n\tjava.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub (no security manager: RMI class loader disabled)]\n\tat com.sun.jndi.rmi.registry.RegistryContext.lookup(Unknown Source)[:1.7.0_05]\n\tat com.sun.jndi.toolkit.url.GenericURLContext.lookup(Unknown Source)[:1.7.0_05]\n\tat javax.naming.InitialContext.lookup(Unknown Source)[:1.7.0_05]\n\tat javax.management.remote.rmi.RMIConnector.findRMIServerJNDI(Unknown Source)[:1.7.0_05]\n\tat javax.management.remote.rmi.RMIConnector.findRMIServer(Unknown Source)[:1.7.0_05]\n\t... 38 more\nCaused by: java.rmi.UnmarshalException: error unmarshalling return; nested exception is: \n\tjava.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub (no security manager: RMI class loader disabled)\n\tat sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)[:1.7.0_05]\n\t... 43 more\nCaused by: java.lang.ClassNotFoundException: javax.management.remote.rmi.RMIServerImpl_Stub (no security manager: RMI class loader disabled)\n\tat sun.rmi.server.LoaderHandler.loadClass(Unknown Source)[:1.7.0_05]\n\tat sun.rmi.server.LoaderHandler.loadClass(Unknown Source)[:1.7.0_05]\n\tat java.rmi.server.RMIClassLoader$2.loadClass(Unknown Source)[:1.7.0_05]\n\tat java.rmi.server.RMIClassLoader.loadClass(Unknown Source)[:1.7.0_05]\n\tat sun.rmi.server.MarshalInputStream.resolveClass(Unknown Source)[:1.7.0_05]\n\tat java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)[:1.7.0_05]\n\tat java.io.ObjectInputStream.readClassDesc(Unknown Source)[:1.7.0_05]\n\tat java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)[:1.7.0_05]\n\tat java.io.ObjectInputStream.readObject0(Unknown Source)[:1.7.0_05]\n\tat java.io.ObjectInputStream.readObject(Unknown Source)[:1.7.0_05]\n\t... 44 more\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gcollins","name":"gcollins","key":"gcollins","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gareth Collins","active":true,"timeZone":"Etc/UTC"},"created":"2012-10-24T01:15:29.373+0000","updated":"2012-10-24T01:15:29.373+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12534938/comment/13503361","id":"13503361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gcollins","name":"gcollins","key":"gcollins","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gareth Collins","active":true,"timeZone":"Etc/UTC"},"body":"One additional thing to note - it works fine with equinox 3.6 but fails with equinox 3.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gcollins","name":"gcollins","key":"gcollins","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gareth Collins","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-24T08:53:51.117+0000","updated":"2012-11-24T08:53:51.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12534938/comment/15176227","id":"15176227","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djencks","name":"djencks","key":"djencks","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Jencks","active":true,"timeZone":"America/Los_Angeles"},"body":"Based on some experiments I'm doing with the activemq web console installed as an esa in WAS Liberty (which runs on equinox) I very much doubt this is a problem that can be solved in activemq.  The problem appears to be that the jdk code is attempting to use a bundle classloader to load it's own classes.  I find that adding the relevant package to the boot delegation allows this to work.  For me this is done by adding the framework property\n\norg.osgi.framework.bootdelegation=javax.management.remote.rmi\n\nYou might need other boot delegation packages as well, so this particular setting might not be appropriate everywhere.\n\nEquinox can also have implicit boot delegation, although this seems to have a fairly large performance penalty.  I'm not sure which versions of equinox have this on or off by default; this might explain the difference in behavior between equinox 3.6 and 3.8.  To turn it on (unless otherwise disabled by launch code):\n\nosgi.context.bootdelegation=true\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djencks","name":"djencks","key":"djencks","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Jencks","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-03-02T18:43:40.079+0000","updated":"2016-03-02T18:43:40.079+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3633/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07frj:"}}