{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12673011","self":"https://issues.apache.org/jira/rest/api/2/issue/12673011","key":"AMQ-4792","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2013-10-09T18:07:02.704+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Nov 04 14:53:36 UTC 2013","customfield_12310420":"352634","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2255272811_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-11-04T14:53:36.162+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4792/watchers","watchCount":4,"isWatching":false},"created":"2013-10-09T12:25:43.381+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323282","id":"12323282","description":"Maintenance release with new AMQP support and smaller modules","name":"5.8.0","archived":false,"released":true,"releaseDate":"2013-02-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-11-04T14:53:36.190+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313893","id":"12313893","name":"Connector"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"When trying to send a message to a topic over AMQP using QPid Java client example the operation block indefinitely if amqp+nio transport is configured on the ActiveMQ side. With amqp transport the operation succeeds.\n\nThe example program is executed with the following arguments:\n\njava -cp lib/proton-api-0.5.jar:lib/proton-j-impl-0.5.jar:target/classes org.apache.qpid.proton.example.Send -a \"amqp://127.0.0.1:5672/topic://test.foo\" -s bar3255 'xxyyzz555'\n\nThe code can be found here:\n\nhttp://svn.apache.org/repos/asf/qpid/proton/trunk/examples/messenger/java/src/main/java/org/apache/qpid/proton/example/Send.java","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12608502","id":"12608502","filename":"AMQ4792Test.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kearls","name":"kearls","key":"kearls","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kearls&avatarId=16572","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kearls&avatarId=16572","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kearls&avatarId=16572","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kearls&avatarId=16572"},"displayName":"Kevin Earls","active":true,"timeZone":"Europe/Berlin"},"created":"2013-10-15T14:13:08.744+0000","size":2609,"mimeType":"text/x-java-source","content":"https://issues.apache.org/jira/secure/attachment/12608502/AMQ4792Test.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12608577","id":"12608577","filename":"org.apache.activemq.transport.amqp.bugs.AMQ4792Test-output.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aspa","name":"aspa","key":"aspa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marko Asplund","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-15T21:24:50.925+0000","size":3041,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12608577/org.apache.activemq.transport.amqp.bugs.AMQ4792Test-output.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"352921","customfield_12312823":null,"summary":"Send over amqp+nio transport block indefinitely","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aspa","name":"aspa","key":"aspa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marko Asplund","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aspa","name":"aspa","key":"aspa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marko Asplund","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Red Hat Enterprise Linux 6.4, OpenJDK 1.7.0_25","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673011/comment/13790670","id":"13790670","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Suggest that you test against a recent 5.9-SNAPSHOT since there's been a lot of work on AMQP support since 5.8.0 was released\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-10-09T18:07:02.704+0000","updated":"2013-10-09T18:07:02.704+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673011/comment/13790772","id":"13790772","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aspa","name":"aspa","key":"aspa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marko Asplund","active":true,"timeZone":"Etc/UTC"},"body":"Just tried this with 5.9-20131008.043154-110, but with that version the send operation \"hangs\" even with the \"aqmp\" transport.\n\nAlso, I tested AMQP send over aqmp+nio using SwiftMQ client (9.4.0) with ActiveMQ 5.8.0.\nWith that set up I get the following error:\ncom.swiftmq.amqp.v100.client.UnsupportedProtocolVersionException: Connection was asynchronously closed\n\tat com.swiftmq.amqp.v100.client.Connection.connect(Unknown Source)\n\tat SenderNonTransacted.main(SenderNonTransacted.java:128)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aspa","name":"aspa","key":"aspa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marko Asplund","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-09T19:54:44.214+0000","updated":"2013-10-09T19:54:44.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673011/comment/13795216","id":"13795216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kearls","name":"kearls","key":"kearls","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kearls&avatarId=16572","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kearls&avatarId=16572","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kearls&avatarId=16572","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kearls&avatarId=16572"},"displayName":"Kevin Earls","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Marko.  Can you take a look at the attached test, and see if you can update it so that it behaves the same way as your example?  I tried to follow your code, but it's failing in a different way for me.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kearls","name":"kearls","key":"kearls","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kearls&avatarId=16572","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kearls&avatarId=16572","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kearls&avatarId=16572","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kearls&avatarId=16572"},"displayName":"Kevin Earls","active":true,"timeZone":"Europe/Berlin"},"created":"2013-10-15T14:13:08.748+0000","updated":"2013-10-15T14:13:08.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673011/comment/13795665","id":"13795665","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aspa","name":"aspa","key":"aspa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marko Asplund","active":true,"timeZone":"Etc/UTC"},"body":"Hi Kevin.\nI placed the class in ActiveMQ 5.8.0 source tree in activemq-amqp module (under test). Had to make some small changes to make it compile (nioPort, method throws declarations).\n\nThere's no errors from the test but based on the output it looks like the test client tries to connect to an incorrect port (see attached output).\nAlso, the output doesn't include any mention of amqp-nio connector being started.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aspa","name":"aspa","key":"aspa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marko Asplund","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-15T21:23:48.230+0000","updated":"2013-10-15T21:26:47.751+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673011/comment/13798989","id":"13798989","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kearls","name":"kearls","key":"kearls","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kearls&avatarId=16572","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kearls&avatarId=16572","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kearls&avatarId=16572","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kearls&avatarId=16572"},"displayName":"Kevin Earls","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Marko,  That test won't work against the 5.8 source, because the version of AmqpTestSupport in 5.8 doesn't start an nio connector.  \n\nIn order to fix this we need a unit test that works against the trunk.  Can you try that?\n\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kearls","name":"kearls","key":"kearls","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kearls&avatarId=16572","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kearls&avatarId=16572","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kearls&avatarId=16572","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kearls&avatarId=16572"},"displayName":"Kevin Earls","active":true,"timeZone":"Europe/Berlin"},"created":"2013-10-18T10:34:19.334+0000","updated":"2013-10-18T10:34:19.334+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673011/comment/13812878","id":"13812878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"provided test doesn't work against the version specified.  Can't reproduce this on trunk or in 5.9.0.  Reopen if you can provide a test against the latest version that shows a problem.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-11-04T14:53:36.186+0000","updated":"2013-11-04T14:53:36.186+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4792/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1osqf:"}}