{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12710147","self":"https://issues.apache.org/jira/rest/api/2/issue/12710147","key":"AMQ-5160","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324950","id":"12324950","name":"5.10.0","archived":false,"released":true,"releaseDate":"2014-06-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-04-24T10:35:06.382+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Feb 11 10:43:38 UTC 2015","customfield_12310420":"388469","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2809590348_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-05-26T09:29:36.726+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5160/watchers","watchCount":5,"isWatching":false},"created":"2014-04-23T21:03:06.413+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":["authentication","authorization","mqtt","security"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326455","id":"12326455","name":"5.9.1","archived":false,"released":true,"releaseDate":"2014-04-04"}],"issuelinks":[{"id":"12429446","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12429446","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12833667","key":"AMQ-5814","self":"https://issues.apache.org/jira/rest/api/2/issue/12833667","fields":{"summary":"Wrong with role-based authorization when using right permission","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-07-01T22:13:17.804+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12318701","id":"12318701","name":"MQTT","description":"MQTT Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I am using MQTT on AMQ 5.9.1\nAfter latest MQTT hardening from [~dhirajsb] , there is an issue of MQTT retained messages.\n\nSimple case:\nSet Authentication / Authorization for two different TOPICS.\nSend retained message to one topic.\n\nTry to subscribe \"#\" with other second user.\nIt will show retained messages published by TOPIC 1. \n\nhere i have attached test configurations.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12641570","id":"12641570","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-23T21:04:24.585+0000","size":2857,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12641570/activemq.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12641571","id":"12641571","filename":"groups.properties","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-23T21:04:24.588+0000","size":999,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12641571/groups.properties"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12641572","id":"12641572","filename":"login.config","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-23T21:04:24.591+0000","size":1063,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12641572/login.config"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12643744","id":"12643744","filename":"patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2014-05-07T12:09:13.338+0000","size":11046,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12643744/patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12641573","id":"12641573","filename":"users.properties","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-23T21:04:24.594+0000","size":1010,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12641573/users.properties"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"388724","customfield_12312823":null,"summary":"Wildcard subscriptions bypass Authentication / Authorization","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13979557","id":"13979557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Can you also check what happens with non-retained messages? Currently retained messages are not checked for authorization per matched destination with wildcard topics. I wonder whether the same holds true for non-retained messages??\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T10:35:06.382+0000","updated":"2014-04-24T10:35:32.451+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13979836","id":"13979836","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"hi [~dhirajsb],\n\nYes . I checked.\nIt is also true for non-retained messages.\nSo in-short MQTT doesn't follow authorization for any wild-card subscription. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T15:29:03.286+0000","updated":"2014-04-24T15:29:03.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13980029","id":"13980029","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"If I had to hazard a guess, I'd say that if its happening with non-retained messages, then it would be true of any ActiveMQ protocol. In other words, this will have to fixed in the Broker where subscription matching happens for non-retained messages, and will need a fix in the MQTT transport for retained messages. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T18:07:59.590+0000","updated":"2014-04-24T18:07:59.590+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13980297","id":"13980297","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"Okay. I understand. So we need to fix authorization for wildcard subscription.\nCan you please guide me how to proceed for it ? I can help making patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T21:11:47.006+0000","updated":"2014-04-24T21:11:47.006+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13982161","id":"13982161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"Can someone help me in this ?\nIt's big security flaw.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-27T02:05:05.153+0000","updated":"2014-04-27T02:05:05.153+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13983366","id":"13983366","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Surf, I'm looking into this issue, will enlist the help of ActiveMQ committers if needed. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-28T18:29:22.348+0000","updated":"2014-04-28T18:29:22.348+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13987276","id":"13987276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user dhirajsb opened a pull request:\n\n    https://github.com/apache/activemq/pull/21\n\n    Fix for AMQ-5160, add support for wildcard destination authorization\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/dhirajsb/activemq trunk\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/activemq/pull/21.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #21\n    \n----\ncommit 071c2d30ba5b497a66937c724605d18d04a7e516\nAuthor: Dhiraj Bokde <dbokde@redhat.com>\nDate:   2014-05-01T18:21:50Z\n\n    Initial fix for AMQ-5160 to support subscription authorization for destination filters\n\ncommit 2b6758c822a90ea6f78501c86b397e0d6550fb56\nAuthor: Hadrian Zbarcea <hadrian@apache.org>\nDate:   2014-05-01T19:25:31Z\n\n    Temporarily disable failing test\n\ncommit 343c90415aca46f450ed493219facf6812a6dad9\nAuthor: Dhiraj Bokde <dbokde@redhat.com>\nDate:   2014-05-02T02:13:01Z\n\n    Fixed AMQ-5160, allowed wildcard subscriptions for future destinations, added tests for wildcard authorization, fixed consumer and producer AdvisoryTopic names for composite destinations by replacing ',' with '&sbquo;'\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-02T02:17:28.656+0000","updated":"2014-05-02T02:17:28.656+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13987466","id":"13987466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~dhirajsb] for the patch. I just tried it.\n\nI see some weird behaviour:\n1. When admin publishes , all the clients receive the message. Disregarding Authorization. ( If they have subscribed to wildcard)\n2. Sometimes it shows not allowed to subscribe \"+\" wildcard. Sometimes it works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-02T07:26:53.918+0000","updated":"2014-05-02T07:26:53.918+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13987804","id":"13987804","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Surf, \n\nSorry if you have already done it, but did you test with a fresh activemq data directory? Older un-authorized subscriptions in broker store could cause weird behavior like you describe. Also, can you share your test code as a JUnit test case? \n\nRetained message behavior is still not sorted out, the patch should only affect non-retained messages. \n\nRegards,\nDhiraj. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-02T15:30:14.650+0000","updated":"2014-05-02T15:30:14.650+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13988923","id":"13988923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~dhirajsb] ,\n\nSorry I don't have JUnit test case. I normally try with Mosquito python client.\nYes. I cleaned data directory and weird behaviour is gone !\n\nAs you indicated, retained messages still don't follow authorization. Do you need any help in that direction ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-04T05:55:22.563+0000","updated":"2014-05-04T05:55:22.563+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13989355","id":"13989355","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Patch applied. Thanks Dhiraj. I'll leave the issue open until retained messages are sorted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2014-05-05T08:23:52.375+0000","updated":"2014-05-05T08:23:52.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13990487","id":"13990487","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Added a test for the remaining retained messages issue\n\nhttps://fisheye6.atlassian.com/changelog/activemq-git?cs=64baf092f073f8c2256a2f2ed704f708562d65a5","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2014-05-06T09:47:15.012+0000","updated":"2014-05-06T09:47:15.012+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13990531","id":"13990531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"I was looking a bit more into this. The problem is that we're managing these retained messages in the mqtt filter and sending it directly to the subscription. So it buy-passes all broker interceptors (including security ones). I think the better option would be to reuse subscription recovery policy mechanism\n\nhttp://activemq.apache.org/subscription-recovery-policy.html\n\nand adapt it for mqtt use-cases. I'll take a stub at refactoring this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2014-05-06T10:53:55.641+0000","updated":"2014-05-06T10:54:07.481+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13991105","id":"13991105","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dejanb] How are you planning on adding the MQTT retained message recovery policy? In theory it should be added on the fly from the MQTT protocol converter when an MQTT client sends a message to a Topic. Also, if another recovery policy exists on the Topic, then the MQTT policy should act in parallel with it. What do you think? \nIn general I like the idea of the recovery policy, since it would allow non-MQTT connections to receive retained messages too. \n\nMeanwhile, I opened a pull request https://github.com/apache/activemq/pull/21 to add authorization for retained messages with the current approach. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-06T20:43:03.142+0000","updated":"2014-05-06T20:43:03.142+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13991471","id":"13991471","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"Hey [~dhirajsb] \nI got this error in your last retained message fix.\n\nMQTTTransportFactory.java:[57,20] error: unreported exception Exception; must be caught or declared to be thrown\n\nCan you please verify ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-07T01:51:17.134+0000","updated":"2014-05-07T01:51:17.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13991607","id":"13991607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"[~surfnerd], I pushed a new commit in the PR to resolve that issue. Not sure why it didn't get caught the first time by IntelliJ Idea when I was testing it before sending the PR. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-07T06:55:52.752+0000","updated":"2014-05-07T06:56:49.162+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13991771","id":"13991771","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Dhiraj, here's the patch that implements retained messages using subscription recovery. Here, Topic is using LastImageSubscriptionRecoveryPolicy by default, with the filter to cache only message with specified header (which we set in mqtt filter).\nThe thing that still needs to be investigated is handling of duplicate subscriptions (as we can't do nothing anymore, but unsubscribe/subscribe to get retained messages). There's a test failing due to this and I need to see how we can fix that. Anyhow, I think this approach is more natural as the message will go through the whole stack of broker interceptors (and also allow retained message feature in jms land). But it still needs some work.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2014-05-07T12:09:13.343+0000","updated":"2014-05-07T12:09:13.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13992339","id":"13992339","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dhirajsb]\nI just tried your patch again. Now it is showing different error.\n\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.\n5.1:compile (default-compile) on project activemq-mqtt: Compilation failure: Com\npilation failure:\n[ERROR] bootstrap class path not set in conjunction with -source 1.6\n[ERROR] MQTTProtocolConverter.java:[399,55] error: cannot find symbol\n[ERROR] symbol:   class TransportConnectionListener\n[ERROR] location: class TransportConnection\n[ERROR] MQTTProtocolConverter.java:[400,50] error: cannot find symbol\n[ERROR] -> [Help 1]\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-07T23:09:34.805+0000","updated":"2014-05-07T23:09:34.805+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13992426","id":"13992426","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user dhirajsb opened a pull request:\n\n    https://github.com/apache/activemq/pull/22\n\n    Partial fix for AMQ-5160, attempts to resolve retained messages using su...\n\n    ...bscription recovery policy, but fails to resend retained messages for duplicate subscriptions\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/dhirajsb/activemq AMQ5160.policy\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/activemq/pull/22.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #22\n    \n----\ncommit 3d8b79c6e34020ba12ea4b222af99753790955cf\nAuthor: Dhiraj Bokde <dhirajsb@yahoo.com>\nDate:   2014-05-08T02:05:36Z\n\n    Partial fix for AMQ-5160, attempts to resolve retained messages using subscription recovery policy, but fails to resend retained messages for duplicate subscriptions\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-08T02:09:16.170+0000","updated":"2014-05-08T02:09:16.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13992431","id":"13992431","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~dejanb], I took a look at the patch and fixed a couple of issues with it and have submitted a new PR https://github.com/apache/activemq/pull/22. I created a new policy, which ensures that retained message policy won't get accidentally removed if user sets another policy. It also makes sure that existing subscriptions don't receive messages with the retained flag set, only new subscriptions do. However, its still not complete. \n\nIt still has the problem of not being able to resend Retained messages for duplicate subscriptions. I don't see any way of being able to do that short of the approach you took in your patch to remove the existing subscription and create it again. But this goes against MQTT-3.8.4-3, which says the subscription must NOT be interrupted, i.e. pending messages should not be lost. So, recreating the sub breaks the test that looks for pending messages, and not recreating the sub breaks another test that looks for resent retained messages. \n\nFrom what I figure so far, a possible solution would be the hybrid of my earlier PR https://github.com/apache/activemq/pull/21 (which walks 'up' the filter chain and finds the required SecurityContext to perform authorization in the MQTTProtocolConverter), and a RetainedMessageSubscriptionRecoveryPolicy to let non-MQTT clients also receive Retained messages (which is filtered out in the MQTTProtocolConverter so MQTT clients don't receive duplicates). \n\nUnless you can think of some trick to resend retained messages for a duplicate sub without removing it, I don't see any other way of being able to make it work for both MQTT and non-MQTT clients. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-08T02:15:48.317+0000","updated":"2014-05-08T02:15:48.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13992434","id":"13992434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"[~surfnerd], you need to rebuild the module activemq-broker too. BTW, don't combine PR 21 and 22, since they are alternative solutions to this problem. PR 21 works for MQTT clients only, and 22 breaks some MQTT tests. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-08T02:18:34.125+0000","updated":"2014-05-08T02:20:31.042+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13992602","id":"13992602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dhirajsb] Thanks..I rebuilt whole project and it worked !\n\nOn the other side, MQTT WS is not receiving messages at all ! (publish works fine)\n\njvm 1    |  WARN | Transport Connection to: MQTTSocket_1440179655 failed: java.io.IOException: org.apache.activemq.transport.ws.MQTTSocket cannot be cast to org.apache.activemq.transport.TransportFilter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-08T09:00:24.374+0000","updated":"2014-05-08T09:00:24.374+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13992838","id":"13992838","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~surfnerd], sorry about that, I missed the fact that MQTTSocket implements TransportSupport and not TransportFilter. I added a couple of more commits to PR21, can you test them for MQTT WS? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-08T15:19:45.626+0000","updated":"2014-05-08T15:19:45.626+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13994133","id":"13994133","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"Hey [~dhirajsb] Thanks a lot. It is working on WS and MQTT both.\n\nOne another weird behaviour( Can't find the reason and might not be related to this JIRA!)\nSteps to recreate :\n1. Download files that i uploaded\n2. Connect to broker with two_user\n3. Take another client and connect to broker with one_admin and subscribe to #\n4. Publish in two_user\n\nYou will see message leaked to admin. Now if you connect to one_admin first then it wont happen !!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-10T04:01:57.830+0000","updated":"2014-05-10T04:01:57.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/13996851","id":"13996851","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Surf,\n\nI had a discussion with Dejan about the other option of using Retroactive consumers, and I believe I have come up with a solution in PR22 that works elegantly for both MQTT and JMS clients. \n\nCan you test PR-22 with your test client and verify that it works? Since it includes major changes to MQTT transport and minor changes to Broker core classes, it should be thoroughly tested and validated before being applied. \n\nRegards,\nDhiraj. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-13T20:20:10.176+0000","updated":"2014-05-13T20:20:10.176+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14000356","id":"14000356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~surfnerd], I've added more commits to PR-22 to fix durable subscriptions. The retained message test is also more elaborate. Hopefully this will be last change. \n\nPlease let us know whether PR-22 works in your tests so it can be merged into Apache trunk. \n\nThanks,\nDhiraj. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-16T21:37:01.923+0000","updated":"2014-05-16T21:37:01.923+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14000820","id":"14000820","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dhirajsb] Sorry for late reply.\nI will definitely test and get back to you today. PR 22 looks more robust.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-17T16:55:49.547+0000","updated":"2014-05-17T16:55:49.547+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14001135","id":"14001135","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user dhirajsb closed the pull request at:\n\n    https://github.com/apache/activemq/pull/21\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-18T17:23:54.697+0000","updated":"2014-05-18T17:23:54.697+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14001144","id":"14001144","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"Hey [~dhirajsb]\n\nIt is working good. I am checking 5187 from pull 24 though.\n\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-18T18:00:53.543+0000","updated":"2014-05-18T18:00:53.543+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14001995","id":"14001995","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~surfnerd],\n\nThanks for validating PR22. If you tested with PR24 that should be good, since it includes commits from PR22. We could just as well apply PR24 directly to ActiveMQ trunk. Also, are you testing Virtual Topics too, it is a pretty cool feature I added. I've written a post about it at http://rockablogbaby.blogspot.com/2014/05/scalable-iot-integration-using-apache.html\n\nRegards,\nDhiraj. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-19T17:08:27.424+0000","updated":"2014-05-19T17:08:27.424+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14008697","id":"14008697","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"I applied PR22. Thanks Dhiraj for the contributions.\n\nAll we need now is to document this new feature (http://activemq.apache.org/subscription-recovery-policy.html).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2014-05-26T09:29:36.755+0000","updated":"2014-05-26T09:29:36.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14025225","id":"14025225","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Dejan, did you also apply the patch for AMQ-5187? That one is needed to support virtual topics for MQTT. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-09T14:40:08.350+0000","updated":"2014-06-09T14:40:08.350+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14025303","id":"14025303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Dhiraj,\n\nI didn't, I thought there's some more work left to be done there. Will do it next.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2014-06-09T15:44:40.180+0000","updated":"2014-06-09T15:44:40.180+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14038965","id":"14038965","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~dhirajsb] and [~dejanb],\n\nIs 5187 patch applied ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=surfnerd","name":"surfnerd","key":"surfnerd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Surf","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-20T16:13:53.296+0000","updated":"2014-06-20T16:13:53.296+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14131718","id":"14131718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Surf, AMQ-5187 has been applied. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhirajsb","name":"dhirajsb","key":"dhirajsb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhirajsb&avatarId=17669","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhirajsb&avatarId=17669","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhirajsb&avatarId=17669","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhirajsb&avatarId=17669"},"displayName":"Dhiraj Bokde","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-12T16:28:13.346+0000","updated":"2014-09-12T16:28:13.346+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12710147/comment/14315992","id":"14315992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/activemq/pull/22\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-11T10:43:38.787+0000","updated":"2015-02-11T10:43:38.787+0000"}],"maxResults":36,"total":36,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5160/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1ux1j:"}}