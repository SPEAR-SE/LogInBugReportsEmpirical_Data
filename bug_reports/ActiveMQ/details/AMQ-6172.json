{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12939854","self":"https://issues.apache.org/jira/rest/api/2/issue/12939854","key":"AMQ-6172","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2016-02-17T19:04:42.124+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Feb 24 14:41:59 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_600548711_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-02-24T14:41:59.739+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6172/watchers","watchCount":3,"isWatching":false},"created":"2016-02-17T15:52:51.084+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334251","id":"12334251","name":"5.13.1","archived":false,"released":true,"releaseDate":"2016-02-05"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-02-24T14:41:59.793+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Method getCurrentStatus of HealthViewMBean class never changes status even if broker have critical conditions. No matter how this methods calls through JMX or jolokia.\n\nMethod returns instance field without any calculations. \n{quote}\n    public String getCurrentStatus() \\{\n        return this.currentState;\n    }\n{quote}\n\nThe method which actually updates this field is  \"List<HealthStatus> healthList() throws Exception;\". As far as I know no one else call this method, so status field never updates. This method works fine by JMX, but it doesn't exposed to jolokia for Rest calls.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Broker Health check status never updates","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cederick","name":"cederick","key":"cederick","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cederick&avatarId=37728","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cederick&avatarId=37728","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cederick&avatarId=37728","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cederick&avatarId=37728"},"displayName":"Yevhenii Pazii","active":true,"timeZone":"Europe/Kiev"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cederick","name":"cederick","key":"cederick","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cederick&avatarId=37728","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cederick&avatarId=37728","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cederick&avatarId=37728","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cederick&avatarId=37728"},"displayName":"Yevhenii Pazii","active":true,"timeZone":"Europe/Kiev"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939854/comment/15150985","id":"15150985","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"I was able to invoke the health() and healthList() methods via jolokia:\n\n{code}\ncurl -u admin -d \"{\\\"type\\\":\\\"exec\\\",\\\"mbean\\\":\\\"org.apache.activemq:type=Broker,brokerName=localhost,service=Health\\\",\\\"operation\\\":\\\"health\\\"}\" http://localhost:8161/api/jolokia/ && echo\n{code} \n\nAnd:\n\n{code}\ncurl -u admin -d \"{\\\"type\\\":\\\"exec\\\",\\\"mbean\\\":\\\"org.apache.activemq:type=Broker,brokerName=localhost,service=Health\\\",\\\"operation\\\":\\\"healthList\\\"}\" http://localhost:8161/api/jolokia/ && echo\n{code}\n\nThis will update the status value that is reported in 'CurrentStatus'.  The intent is that your service should be polling the health value periodically and then you can report the current status in the interim via the 'CurrentStatus' attribute. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2016-02-17T19:04:42.124+0000","updated":"2016-02-17T19:04:42.124+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12939854/comment/15163104","id":"15163104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Closing this out as it is working as designed and there doesn't seem to be any issues with call the health methods exposed via Jolokia ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2016-02-24T14:41:59.763+0000","updated":"2016-02-24T14:41:59.763+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6172/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2sy9j:"}}