{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483328","self":"https://issues.apache.org/jira/rest/api/2/issue/12483328","key":"AMQ-1764","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315630","id":"12315630","description":"Issues that need to be reviewed - do we keep 'em or do we kick 'em? ","name":"NEEDS_REVIEW","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2015-12-22T17:27:09.643+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Dec 22 17:27:09 UTC 2015","customfield_12310420":"84779","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_238306631482_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-12-22T17:27:09.597+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1764/watchers","watchCount":3,"isWatching":false},"created":"2008-06-03T13:09:58.238+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315618","id":"12315618","description":"","name":"5.1.0","archived":false,"released":true,"releaseDate":"2008-05-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-12-22T17:27:09.719+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I write a fast producer(produce a message take 1 ms) and a slow consumer(consumer a message take 10 seconds) application,and config standalone activemq through activemq.xml,in the activemq.xml I config constantPendingMessageLimitStrategy limit=\"10\",and in the slow consumer i config connection url is \"tcp://127.0.0.1:61616?jms.prefetchPolicy.queuePrefetch=50\".\n but the strange problem happends when i want send 200k 512 bytes size messages to borker through fast producer. \nwhen producer send  messages start,the borker and the slow consumer memory useage grow very fast,after send 120k messages, the slow consumer take 80MB memory from at application start 18MB memory,and borker take 140MB memory, then borker slowing down,and totaly freeze.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461118","id":"12461118","filename":"test.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=armgong","name":"armgong","key":"armgong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"armgong","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-03T13:47:26.766+0000","size":10799,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12461118/test.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"59699","customfield_12312823":null,"summary":"strange slower consumer and borker problem,make slow consumer application and broker memory grow very fast","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=armgong","name":"armgong","key":"armgong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"armgong","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=armgong","name":"armgong","key":"armgong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"armgong","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"win2003sp2 , activemq 5.10 ,jdk6.0update6","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483328/comment/12939767","id":"12939767","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=armgong","name":"armgong","key":"armgong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"armgong","active":true,"timeZone":"Etc/UTC"},"body":"it seems https://issues.apache.org/activemq/browse/AMQ-1136\n\nbtw the attach file is includes the activemq config file activemq.xml and producer (in producer dir )and slow consumer application (in slow dir). the two applications user none_durable topic \"chatTopic.chatMessage\"\nif configured in activemq as following :\n<destinations>         \n         <topic physicalName=\"chatTopic.chatMessage\" />\n       </destinations>\n        <!-- Destination specific policies using destination names or wildcards -->\n        <destinationPolicy>\n            <policyMap>\n                <policyEntries>\n                    <policyEntry queue=\">\" memoryLimit=\"20mb\"/>\n                    <policyEntry topic=\"chatTopic.chatMessage\" memoryLimit=\"64mb\">\n                        <dispatchPolicy>\n                            <strictOrderDispatchPolicy/>\n                        </dispatchPolicy>\n                        <subscriptionRecoveryPolicy>\n                            <lastImageSubscriptionRecoveryPolicy/>\n                        </subscriptionRecoveryPolicy>\n                       <!--slow consumer policy-->\n                       <pendingMessageLimitStrategy>   \n                          <constantPendingMessageLimitStrategy limit=\"10\"/>   \n                       </pendingMessageLimitStrategy>  \n                    </policyEntry>\n                </policyEntries>\n            </policyMap>\n        </destinationPolicy>","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=armgong","name":"armgong","key":"armgong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"armgong","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-03T13:22:58.213+0000","updated":"2008-06-05T00:44:48.459+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483328/comment/12939770","id":"12939770","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=armgong","name":"armgong","key":"armgong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"armgong","active":true,"timeZone":"Etc/UTC"},"body":"oh, i make a mistak in slow consumer application,make wrong url\n\"tcp://127.0.0.1:61616?jms.prefetchPolicy.queuePrefetch=50\"\nnow i change it to \n\"tcp://127.0.0.1:61616?jms.prefetchPolicy.topicPrefetch=50\"\nrun test again ,prolem still happened\nand  also try change it to\n\"tcp://127.0.0.1:61616?jms.prefetchPolicy.all=50\"\nrun test again ,prolem still happened\nthe new attach file is use\n\"tcp://127.0.0.1:61616?jms.prefetchPolicy.topicPrefetch=50\"\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=armgong","name":"armgong","key":"armgong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"armgong","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-03T13:47:26.794+0000","updated":"2008-06-03T13:47:26.794+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483328/comment/15068429","id":"15068429","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"This seems like it might have been configuration related. Seems to be a non-issue now.  Can reopen with updated tests against latest broker if still seeing a problem.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2015-12-22T17:27:09.643+0000","updated":"2015-12-22T17:27:09.643+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1764/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0al5b:"}}