{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481666","self":"https://issues.apache.org/jira/rest/api/2/issue/12481666","key":"AMQ-764","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315612","id":"12315612","description":"","name":"4.0.2","archived":false,"released":true,"releaseDate":"2006-07-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-06-21T12:41:12.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jun 22 02:48:44 UTC 2006","customfield_12310420":"84302","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_106124000_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2006-06-22T02:48:44.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-764/watchers","watchCount":0,"isWatching":false},"created":"2006-06-20T21:20:00.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315609","id":"12315609","description":"","name":"4.0 RC3","archived":false,"released":true}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-06-22T02:48:44.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313898","id":"12313898","name":"JCA Container"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I am testing ActiveMQ 4.0 with JBoss 4.0 where I am using ActiveMQ's .rar file within JBoss. I have a test applicacation that consists of following components:\n-Message driven bean listens to queue within JBoss. It receives message and invokes stateless session bean, which invokes entity bean and the message is added to the databsae (mysql). After adding message, it replies back the response to the client.\n-JBoss stateless session bean -- uses entity bean to add message to the database\n-JBoss entity bean that uses CMP to add message to the database.\n-Publisher client - uses ActiveMQ APIs to publish message to the queue and listens for response\n\nI find that after about 2200 messages, I get OutOfMemory exception in ActiveMQ and my application hangs. I am also attaching source code minus jar files.\nYou will also need mysql database.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460695","id":"12460695","filename":"ASF.LICENSE.NOT.GRANTED--activemq_jboss.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahzad","name":"shahzad","key":"shahzad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"shahzad bhatti","active":true,"timeZone":"Etc/UTC"},"created":"2006-06-20T21:20:00.000+0000","size":20916,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12460695/ASF.LICENSE.NOT.GRANTED--activemq_jboss.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172004","customfield_12312823":null,"summary":"Getting OutofMemoryException after sending 2200 messages (JBoss 4.0/ActiveMQ 4.0)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahzad","name":"shahzad","key":"shahzad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"shahzad bhatti","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahzad","name":"shahzad","key":"shahzad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"shahzad bhatti","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"REDHAT 3.0\nJBoss 4.04-GA\nActiveMQ-4.0-RC2\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481666/comment/12937624","id":"12937624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahzad","name":"shahzad","key":"shahzad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"shahzad bhatti","active":true,"timeZone":"Etc/UTC"},"body":"Another thing, I am running ActiveMQ with 800m heap size (which I increased from 512m after memory errors) and message size is 1K.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahzad","name":"shahzad","key":"shahzad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"shahzad bhatti","active":true,"timeZone":"Etc/UTC"},"created":"2006-06-20T22:34:22.000+0000","updated":"2006-06-20T22:34:22.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481666/comment/12937942","id":"12937942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"Can you try using 4.0.1 please and see if you can reproduce?\n\nhttp://incubator.apache.org/activemq/activemq-401-release.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2006-06-21T12:41:12.000+0000","updated":"2006-06-21T12:41:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481666/comment/12937890","id":"12937890","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahzad","name":"shahzad","key":"shahzad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"shahzad bhatti","active":true,"timeZone":"Etc/UTC"},"body":"I tried 4.0.1 and am no longer see out-of-memory. Can you explain what was changed between 4.0-RC2 and 4.0.1 to fix this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shahzad","name":"shahzad","key":"shahzad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"shahzad bhatti","active":true,"timeZone":"Etc/UTC"},"created":"2006-06-22T02:48:44.000+0000","updated":"2006-06-22T02:48:44.000+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-764/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tszb:"}}