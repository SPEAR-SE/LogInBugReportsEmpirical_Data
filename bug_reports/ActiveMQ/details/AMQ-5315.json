{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12732737","self":"https://issues.apache.org/jira/rest/api/2/issue/12732737","key":"AMQ-5315","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326456","id":"12326456","name":"5.10.1","archived":false,"released":true,"releaseDate":"2015-01-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324951","id":"12324951","name":"5.11.0","archived":false,"released":true,"releaseDate":"2015-02-04"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-08-08T17:28:29.252+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Aug 29 14:07:32 UTC 2014","customfield_12310420":"410765","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_59834490_*|*_5_*:*_2_*:*_1671721501_*|*_4_*:*_1_*:*_128850662","customfield_12312321":null,"resolutiondate":"2014-08-29T14:07:32.708+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5315/watchers","watchCount":5,"isWatching":false},"created":"2014-08-08T01:20:46.091+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324950","id":"12324950","name":"5.10.0","archived":false,"released":true,"releaseDate":"2014-06-10"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-12-18T00:27:56.892+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We have seen the following NPE setting up a demand forwarding bridge\n{code}\njava.lang.NullPointerException: null\n\tat org.apache.activemq.network.DemandForwardingBridgeSupport.collectBrokerInfos(DemandForwardingBridgeSupport.java:365) [activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.network.DemandForwardingBridgeSupport.access$400(DemandForwardingBridgeSupport.java:105) [activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.network.DemandForwardingBridgeSupport$5.run(DemandForwardingBridgeSupport.java:331) [activemq-broker-5.10.0.jar:5.10.0]\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_60]\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_60]\n\tat java.lang.Thread.run(Thread.java:745) [na:1.7.0_60]\n{code}\n\nThis occurred in one of our tests but only under load so seems to be a race condition of some sort.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12664802","id":"12664802","filename":"BridgeNPETest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leebutts","name":"leebutts","key":"leebutts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lee Butts","active":true,"timeZone":"Pacific/Auckland"},"created":"2014-08-28T02:20:25.752+0000","size":5226,"mimeType":"text/x-java-source","content":"https://issues.apache.org/jira/secure/attachment/12664802/BridgeNPETest.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"410758","customfield_12312823":null,"summary":"NullPointerException in DemandForwardingBridgeSupport.collectBrokerInfos","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leebutts","name":"leebutts","key":"leebutts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lee Butts","active":true,"timeZone":"Pacific/Auckland"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leebutts","name":"leebutts","key":"leebutts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lee Butts","active":true,"timeZone":"Pacific/Auckland"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12732737/comment/14090199","id":"14090199","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leebutts","name":"leebutts","key":"leebutts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lee Butts","active":true,"timeZone":"Pacific/Auckland"},"body":"Test logs of bridge failure\n{code}\n2014-08-07 23:01:10,467       INFO  ceUtil-StartThread-1 o.a.a.broker.BrokerService     activemq.broker=testBroker-T1oFi-LDN-1 Apache ActiveMQ 5.10.0 (testBroker-T1oFi-LDN-1, ID:leeimac.local-57747-1407452432914-0:48) is starting\n2014-08-07 23:01:10,467       INFO  ceUtil-StartThread-1 o.a.a.b.BrokerPluginSupport    activemq.broker=testBroker-T1oFi-LDN-1 Broker Plugin com.x.jms.AbstractActiveMQTest$BrokerEventListener started\n2014-08-07 23:01:10,468       INFO  ceUtil-StartThread-1 t.TransportServerThreadSupport activemq.broker=testBroker-T1oFi-LDN-1 Listening for connections at: tcp://localhost:57986?socket.tcpNoDelay=true&soTimeout=60000&closeAsync=false\n2014-08-07 23:01:10,468       INFO  ceUtil-StartThread-1 o.a.a.b.TransportConnector     activemq.broker=testBroker-T1oFi-LDN-1 Connector tcp://localhost:57986?socket.tcpNoDelay=true&soTimeout=60000&closeAsync=false started\n2014-08-07 23:01:10,468       INFO  ceUtil-StartThread-1 .a.n.DiscoveryNetworkConnector activemq.broker=testBroker-T1oFi-LDN-1 Establishing network connection from vm://testBroker-T1oFi-LDN-1?async=false&network=true to tcp://localhost:57985?socket.tcpNoDelay=true&soTimeout=60000&closeAsync=false\n2014-08-07 23:01:10,469       INFO  ceUtil-StartThread-1 o.a.a.b.TransportConnector     activemq.broker=testBroker-T1oFi-LDN-1 Connector vm://testBroker-T1oFi-LDN-1 started\n2014-08-07 23:01:10,470       INFO  ceUtil-StartThread-1 o.a.a.network.NetworkConnector activemq.broker=testBroker-T1oFi-LDN-1 Network Connector DiscoveryNetworkConnector:NC-LOCAL-localhost:BrokerService[testBroker-T1oFi-LDN-1] started\n2014-08-07 23:01:10,470       INFO  ceUtil-StartThread-1 .a.n.DiscoveryNetworkConnector activemq.broker=testBroker-T1oFi-LDN-1 Establishing network connection from vm://testBroker-T1oFi-LDN-1?async=false&network=true to failover:(tcp://localhost:57987,tcp://localhost:57988)?nested.socket.tcpNoDelay=true&nested.soTimeout=60000&nested.closeAsync=false&randomize=false&maxReconnectAttempts=0\n2014-08-07 23:01:10,471       INFO  ceUtil-StartThread-1 o.a.a.network.NetworkConnector activemq.broker=testBroker-T1oFi-LDN-1 Network Connector DiscoveryNetworkConnector:NC-WAN-NYC-DefaultDynamic-0:BrokerService[testBroker-T1oFi-LDN-1] started\n2014-08-07 23:01:10,471       INFO  ceUtil-StartThread-1 o.a.a.broker.BrokerService     activemq.broker=testBroker-T1oFi-LDN-1 Apache ActiveMQ 5.10.0 (testBroker-T1oFi-LDN-1, ID:leeimac.local-57747-1407452432914-0:48) started\n2014-08-07 23:01:10,471       INFO  ceUtil-StartThread-1 o.a.a.broker.BrokerService     activemq.broker=testBroker-T1oFi-LDN-1 For help or more information please see: http://activemq.apache.org\n2014-08-07 23:01:10,471       WARN  ceUtil-StartThread-1 o.a.a.broker.BrokerService     activemq.broker=testBroker-T1oFi-LDN-1 Store limit is 102400 mb (current store usage is 0 mb). The data directory: /var/folders/zd/s8yvndzs0tb08zq2hbm5h89r0000gn/T/testBroker-T1oFi-LDN-1/testBroker-T1oFi-LDN-1/KahaDB only has 38816 mb of usable space - resetting to maximum available disk space: 38816 mb\n2014-08-07 23:01:10,471       ERROR ActiveMQ Task-1      o.a.a.t.f.FailoverTransport    activemq.broker=testBroker-T1oFi-LDN-1 Failed to connect to [tcp://localhost:57987, tcp://localhost:57988] after: 1 attempt(s)\n2014-08-07 23:01:10,472       INFO  oker-T1oFi-LDN-1#190 .DemandForwardingBridgeSupport activemq.broker=testBroker-T1oFi-LDN-1 Network connection between vm://testBroker-T1oFi-LDN-1#190 and tcp://localhost/127.0.0.1:57985@57994 (testBroker-T1oFi-LDN-0) has been established.\n2014-08-07 23:01:10,472       INFO  oker-T1oFi-LDN-1#192 .DemandForwardingBridgeSupport activemq.broker=testBroker-T1oFi-LDN-1 Network connection between vm://testBroker-T1oFi-LDN-1#192 and unconnected shutdown due to a local error: {}\njava.lang.NullPointerException: null\n\tat org.apache.activemq.network.DemandForwardingBridgeSupport.collectBrokerInfos(DemandForwardingBridgeSupport.java:365) [activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.network.DemandForwardingBridgeSupport.access$400(DemandForwardingBridgeSupport.java:105) [activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.network.DemandForwardingBridgeSupport$5.run(DemandForwardingBridgeSupport.java:331) [activemq-broker-5.10.0.jar:5.10.0]\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_60]\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_60]\n\tat java.lang.Thread.run(Thread.java:745) [na:1.7.0_60]\n2014-08-07 23:01:10,472       INFO  -T1oFi-LDN-1] Task-3 .DemandForwardingBridgeSupport activemq.broker=testBroker-T1oFi-LDN-1 testBroker-T1oFi-LDN-1 bridge to Unknown stopped\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leebutts","name":"leebutts","key":"leebutts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lee Butts","active":true,"timeZone":"Pacific/Auckland"},"created":"2014-08-08T02:18:13.029+0000","updated":"2014-08-08T02:18:13.029+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12732737/comment/14090994","id":"14090994","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"One case that looks like a possibility is in the collectBrokerInfos method:\n\n{code}\n        try {\n            remoteBrokerInfo = futureRemoteBrokerInfo.get();\n            if (remoteBrokerInfo == null) {\n                fireBridgeFailed();\n            }\n        } catch (Exception e) {\n            serviceRemoteException(e);\n            return;\n        }\n{code}\n\nwe should probably be returning after the call to fireBridgeFailed otherwise the method would continue on with the remoteBrokerInfo being null which could lead to this error.  The futureRemoteBrokerInfo future is cancelled in transport listener set in the start method.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-08-08T17:28:29.252+0000","updated":"2014-08-08T17:28:29.252+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12732737/comment/14091047","id":"14091047","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Added a fix for an NPE case","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-08-08T17:58:00.571+0000","updated":"2014-08-08T17:58:00.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12732737/comment/14092975","id":"14092975","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=morogan","name":"morogan","key":"morogan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Morgan","active":true,"timeZone":"Etc/UTC"},"body":"That results in a different NPE at:\n\nas the idGeneratory will be null, usually set org/apache/activemq/network/DemandForwardingBridgeSupport.java:383 or org/apache/activemq/network/DemandForwardingBridgeSupport.java:385\n\njava.lang.NullPointerException: null\n        at org.apache.activemq.network.DemandForwardingBridgeSupport.startLocalBridge(DemandForwardingBridgeSupport.java:441) [activemq-broker-5.10.0-MAHI.jar:5.10.0-MAHI]\n        at org.apache.activemq.network.DemandForwardingBridgeSupport.doStartLocalAndRemoteBridges(DemandForwardingBridgeSupport.java:422) [activemq-broker-5.10.0-MAHI.jar:5.10.0-MAHI]\n        at org.apache.activemq.network.DemandForwardingBridgeSupport.access$500(DemandForwardingBridgeSupport.java:105) [activemq-broker-5.10.0-MAHI.jar:5.10.0-MAHI]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=morogan","name":"morogan","key":"morogan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Morgan","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-11T16:55:54.554+0000","updated":"2014-08-11T16:55:54.554+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12732737/comment/14092994","id":"14092994","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Suggest you work on a unit test that can reproduce otherwise we will just keep stabbing in the dark. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-08-11T17:12:36.977+0000","updated":"2014-08-11T17:12:36.977+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12732737/comment/14113226","id":"14113226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leebutts","name":"leebutts","key":"leebutts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lee Butts","active":true,"timeZone":"Pacific/Auckland"},"body":"Unit test attached, recreates NPE in log output","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leebutts","name":"leebutts","key":"leebutts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lee Butts","active":true,"timeZone":"Pacific/Auckland"},"created":"2014-08-28T02:20:02.072+0000","updated":"2014-08-28T02:20:02.072+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12732737/comment/14115265","id":"14115265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Should be fixed now, thanks for the test case. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-08-29T14:07:32.738+0000","updated":"2014-08-29T14:07:32.738+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5315/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1yo5r:"}}