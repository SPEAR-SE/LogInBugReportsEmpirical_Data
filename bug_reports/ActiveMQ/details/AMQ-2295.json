{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483953","self":"https://issues.apache.org/jira/rest/api/2/issue/12483953","key":"AMQ-2295","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2011-07-08T22:16:09.353+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 08 22:16:09 UTC 2011","customfield_12310420":"68686","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_64895698008_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-08T22:16:09.345+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2295/watchers","watchCount":1,"isWatching":false},"created":"2009-06-17T19:41:11.353+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315619","id":"12315619","description":"","name":"5.2.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-08T22:16:09.355+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313904","id":"12313904","name":"JMX","description":"The JMX support in ActiveMQ"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I'm trying to write a utility to monitor our JMS queues using JMX. I'm having a hard time getting all of the messages currently in queue to show up when I call the browseMessages operation. It seems to randomly stop keeping track of how many messages are actually in the queue after a period of time when no consumers are active on the queue. Once a consumer connects and starts consuming messages then the browse function seems to work OK again. I'm using this configuration for my persistence:\n<persistenceAdapter>\n            <amqPersistenceAdapter syncOnWrite=\"false\" directory=\"${activemq.base}/data\" maxFileLength=\"20 mb\"/>\n</persistenceAdapter>\n\nMessages come in via stomp (<transportConnector name=\"stomp+ssl\" uri=\"stomp+ssl://localhost:1940) and are consumed via http (<transportConnector name=\"ihttp\"    uri=\"http://localhost:61618\"/>). \n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172277","customfield_12312823":null,"summary":"Inconsistencies using browseMessages() in JMX on a queue","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schlazor","name":"schlazor","key":"schlazor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Schlenk","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schlazor","name":"schlazor","key":"schlazor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Schlenk","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"centos 5, java 1.6.0_13, 32bit x86","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483953/comment/12943306","id":"12943306","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schlazor","name":"schlazor","key":"schlazor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Schlenk","active":true,"timeZone":"Etc/UTC"},"body":"I seem to be able to reproduce the problem by connecting and consuming all messages and then disconnecting, then let a few messages pile up, then run browseMessages and it will return the proper list at this point. Once more messages come in, however, the browseMessages operation will continue to get only the list of messages it retrieved during the previous run. This behavior continues until a consumer connects and begins consuming messages. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schlazor","name":"schlazor","key":"schlazor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Schlenk","active":true,"timeZone":"Etc/UTC"},"created":"2009-06-17T19:53:15.514+0000","updated":"2009-06-17T19:53:15.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483953/comment/12943305","id":"12943305","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schlazor","name":"schlazor","key":"schlazor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Schlenk","active":true,"timeZone":"Etc/UTC"},"body":"Correction: you do not need to consume any messages in order for the correctly sized list to be returned by the browseMessages operation again. As a work around I tried connecting and setting up a consumer but then immediately closing that consumer and that seems to be enough of a wake up call to fix the functionality of operation. Kind of ineffecient and bad design tho... ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schlazor","name":"schlazor","key":"schlazor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Schlenk","active":true,"timeZone":"Etc/UTC"},"created":"2009-06-17T20:22:53.217+0000","updated":"2009-06-17T20:22:53.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483953/comment/12943304","id":"12943304","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schlazor","name":"schlazor","key":"schlazor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Schlenk","active":true,"timeZone":"Etc/UTC"},"body":"ok i was wrong again: connecting to the queue but not consuming messages does not reliably work around this issue. I'm not excited about the fact that this operation is basically useless. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schlazor","name":"schlazor","key":"schlazor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Schlenk","active":true,"timeZone":"Etc/UTC"},"created":"2009-06-18T18:55:32.052+0000","updated":"2009-06-18T18:55:32.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483953/comment/13062227","id":"13062227","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"No test case provided to allow the problem to be tested and reproduced.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-07-08T22:16:09.353+0000","updated":"2011-07-08T22:16:09.353+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2295/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tunz:"}}