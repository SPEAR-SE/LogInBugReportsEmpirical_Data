{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12774296","self":"https://issues.apache.org/jira/rest/api/2/issue/12774296","key":"AMQ-5579","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-02-11T18:25:14.535+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Apr 01 02:05:58 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_38669909_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-02-12T04:50:43.621+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5579/watchers","watchCount":3,"isWatching":false},"created":"2015-02-11T18:06:13.747+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":7200,"aggregatetimeoriginalestimate":7200,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-04-01T02:05:58.282+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":7200,"customfield_12310080":null,"description":"Attempting to post a message to AMQ using the following yields an IllegalStateException:\n\n*Example Command*\n{code}\ncurl -u admin:admin -d \"hello world\" -XPOST http://localhost:8161/api/message?destination=queue://abc.def\n{code}\n\n*Exception*\n{code}\njava.lang.IllegalStateException: STREAMED\n\tat org.eclipse.jetty.server.Request.getReader(Request.java:898)\n\tat org.apache.activemq.web.MessageServletSupport.getPostedMessageBody(MessageServletSupport.java:347)\n\tat org.apache.activemq.web.MessageServlet.doPost(MessageServlet.java:126)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:595)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:668)\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:684)\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:503)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:522)\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086)\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:429)\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:522)\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n\tat org.eclipse.jetty.server.Server.handle(Server.java:370)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:494)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:982)\n\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1043)\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:865)\n\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)\n\tat org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:696)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:53)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n\tat java.lang.Thread.run(Thread.java:745)\n{code}\n\nNote that changing the {{-d}} syntax to {{-d \"body=hello world\"}}, the problem goes away.","customfield_10010":null,"timetracking":{"originalEstimate":"2h","remainingEstimate":"2h","originalEstimateSeconds":7200,"remainingEstimateSeconds":7200},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":7200,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"REST production of message bodies can result in IllegalStateException: STREAMED","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":7200,"percent":0},"customfield_12311024":null,"environment":"AMQ 5.11.0, mac","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":7200,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774296/comment/14316711","id":"14316711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmfrazier","name":"mmfrazier","key":"mmfrazier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Frazier","active":true,"timeZone":"Etc/UTC"},"body":"I can work on this one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmfrazier","name":"mmfrazier","key":"mmfrazier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Frazier","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-11T18:25:14.535+0000","updated":"2015-02-11T18:25:14.535+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774296/comment/14317546","id":"14317546","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"body":"Sure thing - go for it Mark.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"created":"2015-02-12T04:03:45.714+0000","updated":"2015-02-12T04:03:45.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774296/comment/14317587","id":"14317587","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmfrazier","name":"mmfrazier","key":"mmfrazier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Frazier","active":true,"timeZone":"Etc/UTC"},"body":"Upon closer inspection, this seems to be working as expected. I've added a section at the end of the REST page to clarify how to handle this situation:\n\nhttps://cwiki.apache.org/confluence/display/ACTIVEMQ/REST","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmfrazier","name":"mmfrazier","key":"mmfrazier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Frazier","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-12T04:48:31.450+0000","updated":"2015-02-12T04:48:31.450+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774296/comment/14317593","id":"14317593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"body":"Thanks Mark.  Looks like a good way to resolve under the circumstances.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"created":"2015-02-12T04:50:43.648+0000","updated":"2015-02-12T04:50:43.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774296/comment/14389818","id":"14389818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=John+Greenan","name":"John Greenan","key":"john greenan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"J G","active":true,"timeZone":"Australia/Sydney"},"body":"Hi All,\n\nI am new around here, so sorry if I get the etiquette wrong...\n\nI am working on a project to use Apache ActiveMQ with a RESTful interface.  It's a cross platform error logging project, so code written in C++, Java, VBA, Perl or indeed anything that can access an URL can then report issues. The point is, we DO NOT deploy any libraries - we simply use the native implementations within the language to access an URL.  The HTTP message body then contains the details of the error - who, what, when, what line of code and so on.\n\nThe piece I am working on is a port of an MSMQ implementation (you can a simpllified implementation of the MSMQ version on this http://blog.alignment-systems.com/2015/03/excel-vba-industrialisationpart-seven.html and on github at https://github.com/JohnGreenan/7_ExcelVBE)\n\nSo, I can access Apache Active MQ from a Windows PC using the WinHttp.WinHttpRequest class (https://msdn.microsoft.com/en-us/library/windows/desktop/aa384106%28v=vs.85%29.aspx)\n\nThe issue is that when I try and send a body of the request, I get the same error as shown in this JIRA.\n\nWithin cURL it's possible to workaround as described by Mark Frazier, but I have tried a few approaches on this WITHIN VBA and failed to get it to work.\n\nWhat I propose to do is to create a github repository with the VBA code and instructions on how to replicate, but I am not sure if that's how you guys work? Do you actually work with implementations in languages, or is it just the case that it it works with cURL then the other language implementation is viewed as being at fault?\n\nCan you please give me some guidance on how I can work with you to get this resolved?\n\nCheers,\n\nJohn","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=John+Greenan","name":"John Greenan","key":"john greenan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"J G","active":true,"timeZone":"Australia/Sydney"},"created":"2015-04-01T01:13:12.770+0000","updated":"2015-04-01T01:13:12.770+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12774296/comment/14389878","id":"14389878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=John+Greenan","name":"John Greenan","key":"john greenan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"J G","active":true,"timeZone":"Australia/Sydney"},"body":"Replication code and instructions as well as log files from Apache ActiveMQ all on github now at \n\nhttps://github.com/JohnGreenan/ApacheActiveMQ.REST.winhttp","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=John+Greenan","name":"John Greenan","key":"john greenan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"J G","active":true,"timeZone":"Australia/Sydney"},"created":"2015-04-01T02:05:58.282+0000","updated":"2015-04-01T02:05:58.282+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5579/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i25hxj:"}}