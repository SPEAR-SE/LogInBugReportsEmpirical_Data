{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12549697","self":"https://issues.apache.org/jira/rest/api/2/issue/12549697","key":"AMQ-3802","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2012-04-09T14:12:40.767+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 15 09:10:43 UTC 2012","customfield_12310420":"234688","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_804982044_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-04-14T20:27:12.025+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3802/watchers","watchCount":2,"isWatching":false},"created":"2012-04-05T12:50:50.065+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12318549","id":"12318549","name":"5.5.1","archived":false,"released":true,"releaseDate":"2011-10-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-05-15T09:10:44.389+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"An unsubscribe call should remove the client from inactive durable topic subscribers list. In the current broker behavior, even if a durable consumer unsubscribes & shuts down gracefully, the broker marks the durable subscriber as inactive. If this durable subscriber was never meant to come up again(as in my case where i am testing rigorously using unique client-ids each time based on pid) then broker will unnecessarily mark a lot of consumers as inactive durable.\n\nFor inactive durable subscribers, there is no distinction between a subscriber going down abruptly or unsubscribing & going down gracefully.\n\nThis should be improved I think. Moreover, any tips on how to remove those 1000s of inactive subscriptions dangling in my Jconsole ?? Destroying each manually isn't an option !","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"166418","customfield_12312823":null,"summary":"Successful unsubscribing should not report inactive durable topic subscribers","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Solaris,Linux","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13247198","id":"13247198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"body":"http://activemq.apache.org/manage-durable-subscribers.html can be used but I am quite skeptic to use it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-05T12:53:03.576+0000","updated":"2012-04-05T12:53:03.576+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13249829","id":"13249829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"I added a specific unit test for this and cannot reproduce this, perhaps you can provide a unit test to demonstrate your issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-04-09T14:12:40.767+0000","updated":"2012-04-09T14:12:40.767+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13253532","id":"13253532","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"This is easily reproducible with STOMP durable subscribers.\n\nPlease see the below code for example.\n\nuse Net::Stomp;\n\nmy $stomp = Net::Stomp->new( { hostname => 'mybroker', port => '61613' } );\n$stomp->connect( { client-id => 'test_client', login => '', passcode => ''} );\nprint \"connected \\n\";\n\n$stomp->subscribe({ destination => '/topic/test_topic', 'activemq.subscriptionName' => \"test_subscription\" });\nprint \"subscribed \\n\";\nsleep(3);\n$stomp->unsubscribe({destination => '/topic/test_topic'});\nsleep(2);\n$stomp->disconnect;\n\nWhen I run this client, I clearly see that the broker shows the client in inactive durable subscriptions list.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-04-13T16:49:32.212+0000","updated":"2012-04-13T16:49:32.212+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13253565","id":"13253565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Try requesting a receipt for the unsubscribe action so that you are sure that the broker actually processes the request before breaking the socket connection.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-04-13T17:34:12.831+0000","updated":"2012-04-13T17:34:12.831+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13253969","id":"13253969","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"body":"Thanks Tim !\nSession unsubscribing did the trick for the case where I am using ActiveMQ API. But, using Spring JMSTemplate still leaves behind inactive durable subscribers. Any idea how to unsubscribe in the spring case?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-14T03:48:43.919+0000","updated":"2012-04-14T03:48:43.919+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13254059","id":"13254059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"@Timothy\n\nI have tried with receipt feature as well but that does not help. I think there is a real issue for STOMP clients here. I have tried this even from Python clients but same issue is there in Python as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-04-14T09:18:39.543+0000","updated":"2012-04-14T09:18:39.543+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13254192","id":"13254192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"I added an addition to testDurableUnsub in StompTest.java to show that when the unsubscribe is sent with the correct headers it works as expected.  The above stomp code doesn't set the 'activemq.subscriptionName' on the unsubscribe so it won't actually unsub anything.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-04-14T20:26:48.087+0000","updated":"2012-04-14T20:26:48.087+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13254193","id":"13254193","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Code is working as designed, issue is on the client end.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-04-14T20:27:12.078+0000","updated":"2012-04-14T20:27:12.078+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13254588","id":"13254588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"@Timothy I have actually tried to unsubscribe with 'activemq.subscriptionName' also but that doesn't work. Did you try to test with the above Perl code instead of using Java Stomp Client?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-04-16T08:44:19.306+0000","updated":"2012-04-16T08:44:19.306+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13265807","id":"13265807","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"I think the Java STOMP client and Perl STOMP client are behaving differently here and that is the reason we are seeing this issue still with Perl clients.\n\nDid you guys try with simple Perl client I have mentioned above?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-01T13:53:58.620+0000","updated":"2012-05-01T13:53:58.620+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13265825","id":"13265825","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"The perl sample doesn't send a proper unsubscribe with the subscription name so it will definitely not work.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-05-01T14:09:38.490+0000","updated":"2012-05-01T14:09:38.490+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13266361","id":"13266361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"@Timothy\n\nAs I have mentioned already, I have tried to give the 'activemq.subscriptionName' in the unsubscribe call as well but still seeing this issue.\n\nCan you please try this problem with this code?\n\n    use Net::Stomp;\n\n    my $stomp = Net::Stomp->new( { hostname => 'mybroker', port => '61613' } );\n\n    $stomp->connect( { client-id => 'test_client', login => '', passcode => ''} );\n    print \"connected \\n\";\n\n    $stomp->subscribe({ destination => '/topic/test_topic', 'activemq.subscriptionName' => \"test_subscription\" });\n    print \"subscribed \\n\";\n\n    sleep(3);\n    $stomp->unsubscribe({destination => '/topic/test_topic', 'activemq.subscriptionName' => \"test_subscription\"});\n\n    sleep(2);\n    $stomp->disconnect;\n\nAnd, to give more details to you, in Jconsole of the broker, I clearly see that the subscription is shown as test_subscription under the Durable topics before the client sends unsubscribe and is being shown under \"false\" topics with the following name after the client unsubscribes.\nID_infraprod1.hyd.deshaw.com-34343-1335687381802-2_13_test_subscription\n\nDoes this give any clue?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-02T05:47:13.693+0000","updated":"2012-05-02T05:47:13.693+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13266488","id":"13266488","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Your Stomp client must supply the same value for clientId and subscriptionName, refer to:\nhttp://activemq.apache.org/stomp.html\n\nTry changing your code to use the same subscription Id as the client Id and it should start working as expected.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-05-02T10:59:48.455+0000","updated":"2012-05-02T10:59:48.455+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13266501","id":"13266501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"@Timothy,\n\nI have changed the code to give same id on client-id and 'activemq.subscriptionName' but still helpless.\n\nI tried running broker in DEBUG logging mode and I see the below log messages in broker when I run this client. I am putting them if they can help you to debug this issue further.\n\n{quote}\n2012-05-02 17:28:14,299 | INFO  | Removing subscription : RemoveSubscriptionInfo {commandId = 4, responseRequired = false, connec\ntionId = ID:invest8.hyd.deshaw.com-48938-1335959820654-2:2, clientId = test_subscription, subscriptionName = test_subscription} |\n org.apache.activemq.broker.util.LoggingBrokerPlugin | ActiveMQ Transport: tcp:///149.77.160.37:63026\n2012-05-02 17:28:14,304 | DEBUG | Error occured while processing async command: RemoveSubscriptionInfo {commandId = 4, responseRequired = false, connectionId = ID:invest8.hyd.deshaw.com-48938-1335959820654-2:2, clientId = test_subscription, subscriptionName = test_subscription}, exception: javax.jms.InvalidDestinationException: No durable subscription exists for: test_subscription | org.apache.activemq.broker.TransportConnection.Service | ActiveMQ Transport: tcp:///149.77.160.37:63026\njavax.jms.InvalidDestinationException: No durable subscription exists for: test_subscription\n        at org.apache.activemq.broker.region.TopicRegion.removeSubscription(TopicRegion.java:135)\n        at org.apache.activemq.broker.region.RegionBroker.removeSubscription(RegionBroker.java:491)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.MutableBrokerFilter.removeSubscription(MutableBrokerFilter.java:107)\n        at org.apache.activemq.broker.util.LoggingBrokerPlugin.removeSubscription(LoggingBrokerPlugin.java:211)\n        at org.apache.activemq.broker.MutableBrokerFilter.removeSubscription(MutableBrokerFilter.java:107)\n        at org.apache.activemq.broker.TransportConnection.processRemoveSubscription(TransportConnection.java:342)\n        at org.apache.activemq.command.RemoveSubscriptionInfo.visit(RemoveSubscriptionInfo.java:81)\n        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:306)\n        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:179)\n        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)\n        at org.apache.activemq.transport.stomp.StompTransportFilter.sendToActiveMQ(StompTransportFilter.java:81)\n        at org.apache.activemq.transport.stomp.ProtocolConverter.sendToActiveMQ(ProtocolConverter.java:140)\n        at org.apache.activemq.transport.stomp.ProtocolConverter.onStompUnsubscribe(ProtocolConverter.java:456)\n        at org.apache.activemq.transport.stomp.ProtocolConverter.onStompCommand(ProtocolConverter.java:190)\n        at org.apache.activemq.transport.stomp.StompTransportFilter.onCommand(StompTransportFilter.java:70)\n        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)\n        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:220)\n        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:202)\n        at java.lang.Thread.run(Thread.java:722)\n\n{quote}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-02T12:03:58.210+0000","updated":"2012-05-02T12:03:58.210+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13267206","id":"13267206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"body":"Tim,\n\nI was playing around with Buchi's test, made some pretty minor changes and I am getting the below exception that durable consumer is in use ! \n\n\n2012-05-03 10:59:21,204 | INFO  | Removing subscription : RemoveSubscriptionInfo {commandId = 4, responseRequired = false, connectionId = ID:desh0007.hyd.desh\naw.com-59732-1336021109112-3:8, clientId = test, subscriptionName = test} | org.apache.activemq.broker.util.LoggingBrokerPlugin | ActiveMQ Transport: tcp:///1\n0.240.170.27:42262\n2012-05-03 10:59:21,205 | WARN  | Async error occurred: javax.jms.JMSException: Durable consumer is in use | org.apache.activemq.broker.TransportConnection.S\nervice | ActiveMQ Transport: tcp:///10.240.170.27:42262\njavax.jms.JMSException: Durable consumer is in use\n        at org.apache.activemq.broker.region.TopicRegion.removeSubscription(TopicRegion.java:138)\n        at org.apache.activemq.broker.region.RegionBroker.removeSubscription(RegionBroker.java:491)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.MutableBrokerFilter.removeSubscription(MutableBrokerFilter.java:107)\n        at org.apache.activemq.broker.util.LoggingBrokerPlugin.removeSubscription(LoggingBrokerPlugin.java:211)\n        at org.apache.activemq.broker.BrokerFilter.removeSubscription(BrokerFilter.java:101)\n        at org.apache.activemq.broker.MutableBrokerFilter.removeSubscription(MutableBrokerFilter.java:107)\n        at org.apache.activemq.broker.TransportConnection.processRemoveSubscription(TransportConnection.java:342)\n        at org.apache.activemq.command.RemoveSubscriptionInfo.visit(RemoveSubscriptionInfo.java:81)\n        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:306)\n        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:179)\n        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:69)\n        at org.apache.activemq.transport.stomp.StompTransportFilter.sendToActiveMQ(StompTransportFilter.java:81)\n        at org.apache.activemq.transport.stomp.ProtocolConverter.sendToActiveMQ(ProtocolConverter.java:140)\n        at org.apache.activemq.transport.stomp.ProtocolConverter.onStompUnsubscribe(ProtocolConverter.java:456)\n        at org.apache.activemq.transport.stomp.ProtocolConverter.onStompCommand(ProtocolConverter.java:190)\n        at org.apache.activemq.transport.stomp.StompTransportFilter.onCommand(StompTransportFilter.java:70)\n        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)\n        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:220)\n        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:202)\n        at java.lang.Thread.run(Thread.java:722)\n2012-05-03 10:59:21,205 | WARN  | Exception occurred processing:\nnull: javax.jms.JMSException: Durable consumer is in use | org.apache.activemq.transport.stomp.ProtocolConverter | ActiveMQ Connection Dispatcher: /10.240.170.27:42262\n\nAny clues !?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-03T05:33:43.058+0000","updated":"2012-05-03T05:33:43.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13267423","id":"13267423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"The error you are seeing is telling you that your Stomp client is still actively subscribed to the destination, so you are almost there.  To fully unsubscribe a durable consumer you need to first do a normal unsubscribe as you were previously doing such that there are no active durable subscribers, then you can issue the unsubscribe using the client id to completely eliminate that subscription.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-05-03T13:28:14.261+0000","updated":"2012-05-03T13:28:14.261+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13267430","id":"13267430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"body":"Presto !!! Works like a charm for me :)\n\nThanks Tim. We should let Buchi also confirm this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-03T13:41:16.177+0000","updated":"2012-05-03T13:41:16.177+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13269434","id":"13269434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"Okay. It works finally with the following code though without using client-id while unsubscribing.\n\n{quote}\n$stomp->unsubscribe({destination => '/topic/test_topic'});\n$stomp->unsubscribe({destination => '/topic/test_topic', 'activemq.subscriptionName' => 'test_subscription'});\n{quote}\n\n@Timothy I find this design a little weird. Do we have any reasons on why the design is like this?\nAlso, I see that this works only if client-id given while subscribing is same as the subscription name. I do not see any legitimate reason for doing that also. Can you please give us some background details for this? Or share some wiki page which throws more light on this please.\n\nFWIW, I feel that we should merge those two unsubscribe calls into one, to make best client side design for this case. Can you give your opinion on that?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-07T07:48:05.620+0000","updated":"2012-05-07T07:48:05.620+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13273206","id":"13273206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"There seems to be another issue if a single client has multiple durable subscriptions. If the client-id and subscriptionName should be same for a durable subscription, how can the same client subscribe to a second durable namespace? I have tried this and saw that broker sends error message indicating there is a durable subscriber already with the same client-id and subscriptionName.\n\nCan you please suggest us how to fix this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-11T12:40:39.692+0000","updated":"2012-05-11T12:40:39.692+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13273212","id":"13273212","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Can you post a sample of you stomp client subscribing to two durables?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-05-11T12:45:41.431+0000","updated":"2012-05-11T12:45:41.431+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13273265","id":"13273265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"{code}\n\nuse Net::Stomp;\nmy $stomp = Net::Stomp->new( { hostname => 'brokerhost', port => '61613' } );\n\n$stomp->connect( { 'client-id' => 'test_subscription', login => '', passcode => ''} );\nprint \"connected \\n\";\n\n$stomp->subscribe({ destination => '/topic/test_topic', 'activemq.subscriptionName' => \"test_subscription\"});\n$stomp->subscribe({ destination => '/topic/test_topic1', 'activemq.subscriptionName' => \"test_subscription\"});\n\nprint \"subscribed \\n\";\n\nsleep(5);\n\n$stomp->unsubscribe({destination => '/topic/test_topic' });\n$stomp->unsubscribe({destination => '/topic/test_topic', 'activemq.subscriptionName' => 'test_subscription' });\n$stomp->unsubscribe({destination => '/topic/test_topic1' });\n$stomp->unsubscribe({destination => '/topic/test_topic1', 'activemq.subscriptionName' => 'test_subscription' });\nprint \"unsubscribed \\n\";\n\n$stomp->disconnect();\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-11T13:56:54.576+0000","updated":"2012-05-11T13:56:54.576+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13274466","id":"13274466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"@Timothy any updates here? Did you get a chance to look at this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-14T06:06:44.043+0000","updated":"2012-05-14T06:06:44.043+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13274686","id":"13274686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"This is another limitation of the Stomp support which allows for only one durable subscription since clientId and subscription name are linked.  This is because the Stomp v1.0 spec didn't require that you assign unique Ids to subscriptions, so the correlation is made per connection using the matching  clientId and subscription name.  You can work around this by creating a connection for each durable subscriber.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-05-14T15:35:58.117+0000","updated":"2012-05-14T15:35:58.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12549697/comment/13275278","id":"13275278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"body":"Okay. Are we going to fix this in future versions of ActiveMQ? Should I log a separate request for the enhancement?\n\nI think STOMP v1.1 mandates a separate id for each subscription so even if you talk in terms of STOMP v1.1 spec, ActiveMQ should support this feature.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=buchi","name":"buchi","key":"buchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=buchi&avatarId=29139","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=buchi&avatarId=29139","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=buchi&avatarId=29139","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=buchi&avatarId=29139"},"displayName":"Buchi Reddy B","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-15T09:10:43.970+0000","updated":"2012-05-15T09:10:43.970+0000"}],"maxResults":24,"total":24,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3802/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0suhz:"}}