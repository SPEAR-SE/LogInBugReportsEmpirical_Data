{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13096986","self":"https://issues.apache.org/jira/rest/api/2/issue/13096986","key":"AMQ-6797","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2017-08-23T13:31:11.011+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Sep 19 08:15:14 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2268413273_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-09-18T16:38:55.688+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6797/watchers","watchCount":2,"isWatching":false},"created":"2017-08-23T10:32:02.478+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334188","id":"12334188","name":"5.14.0","archived":false,"released":true,"releaseDate":"2016-08-05"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-09-19T08:15:14.361+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We have clients that connect via wss to our ActiveMQ. \n\nUnder some circumstances, we have socket connections that appear in the ActiveMQ web console, but when doing a netstat -an we can see that they are not open in the system.\n\nThis means that ActiveMQ is enqueuing messages for that connections, but they are not there.\n\nThis is the transport configuration:\n{code}\n<transportConnector name=\"wss\" uri=\"wss://0.0.0.0:8082?maximumConnections=5000&amp;wireFormat.maxFrameSize=104857600&amp;needClientAuth=true&amp;transport.enabledProtocols=TLSv1,TLSv1.1,TLSv1.2\" allowLinkStealing=\"true\" enableStatusMonitor=\"true\" />\n{code}\n\nIs there a way of closing these connections? Is this an error solved in a newer release (could not find it in the release notes)? We have the enableStatusMonitor=\"true\" option, but still the connection is not being closed on the ActiveMQ side. What we need to do right now is restarting ActiveMQ, but it is not desired.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"wss connections not being closed on ActiveMQ side","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcos.moreno","name":"marcos.moreno","key":"marcos.moreno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=marcos.moreno&avatarId=32530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=marcos.moreno&avatarId=32530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=marcos.moreno&avatarId=32530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=marcos.moreno&avatarId=32530"},"displayName":"Marcos Moreno Martin","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcos.moreno","name":"marcos.moreno","key":"marcos.moreno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=marcos.moreno&avatarId=32530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=marcos.moreno&avatarId=32530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=marcos.moreno&avatarId=32530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=marcos.moreno&avatarId=32530"},"displayName":"Marcos Moreno Martin","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Debian (SMP Debian 3.16.7-ckt25-2+deb8u3 (2016-07-02) x86_64 GNU/Linux) on AWS, 4 cores, 7.5GB.","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13096986/comment/16138341","id":"16138341","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"You'll need to provide a unit test that can reproduce the issue in order for any investigation","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2017-08-23T13:31:11.011+0000","updated":"2017-08-23T13:31:11.011+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13096986/comment/16138410","id":"16138410","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcos.moreno","name":"marcos.moreno","key":"marcos.moreno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=marcos.moreno&avatarId=32530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=marcos.moreno&avatarId=32530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=marcos.moreno&avatarId=32530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=marcos.moreno&avatarId=32530"},"displayName":"Marcos Moreno Martin","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for the hint We will provide it as soon as we manage to reproduce it properly. Unfortunately, we are not able of reproducing it at will. We have an angular app that connects via wss to the ActiveMQ, and sometimes clients disconnect, meaning the browser is closed, the connection is  closed in the server according to netstat, but ActiveMQ shows it as connected. \n\nWe tried different scenarios to investigate what could be going on (closing normally, unplugging the cable, hibernating the machine...). In all of them, the socket is properly closed and ActiveMQ does not show the connection anymore. However, from time to time (matter of days/weeks) this happens. The only solution is restarting the server.\n\nIs there something that we can check when it happens again? Is there a way of closing these connections manually?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcos.moreno","name":"marcos.moreno","key":"marcos.moreno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=marcos.moreno&avatarId=32530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=marcos.moreno&avatarId=32530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=marcos.moreno&avatarId=32530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=marcos.moreno&avatarId=32530"},"displayName":"Marcos Moreno Martin","active":true,"timeZone":"Etc/UTC"},"created":"2017-08-23T14:20:04.222+0000","updated":"2017-08-23T14:20:04.222+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13096986/comment/16170265","id":"16170265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"No reproducer provided, not enough information to investigate ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2017-09-18T16:38:55.736+0000","updated":"2017-09-18T16:38:55.736+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13096986/comment/16171272","id":"16171272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcos.moreno","name":"marcos.moreno","key":"marcos.moreno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=marcos.moreno&avatarId=32530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=marcos.moreno&avatarId=32530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=marcos.moreno&avatarId=32530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=marcos.moreno&avatarId=32530"},"displayName":"Marcos Moreno Martin","active":true,"timeZone":"Etc/UTC"},"body":"Just for the record, the issue disappeared so far with version 5.15.0. We could not find a way to reproduce it as it was happening randomly, but we have been two weeks now without the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcos.moreno","name":"marcos.moreno","key":"marcos.moreno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=marcos.moreno&avatarId=32530","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=marcos.moreno&avatarId=32530","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=marcos.moreno&avatarId=32530","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=marcos.moreno&avatarId=32530"},"displayName":"Marcos Moreno Martin","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-19T08:15:14.361+0000","updated":"2017-09-19T08:15:14.361+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6797/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3j6nr:"}}