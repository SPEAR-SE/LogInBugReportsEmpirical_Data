{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482019","self":"https://issues.apache.org/jira/rest/api/2/issue/12482019","key":"AMQ-1136","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"parent":{"id":"12482106","key":"AMQ-1148","self":"https://issues.apache.org/jira/rest/api/2/issue/12482106","fields":{"summary":"Fast producer, slow consumer hangs after a few messages when using VMPendingSubscriberMessageStoragePolicy","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-02-07T16:25:09.867+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jun 12 11:23:12 UTC 2007","customfield_12310420":"84717","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_12056103561_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2007-06-12T11:23:12.630+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1136/watchers","watchCount":3,"isWatching":false},"created":"2007-01-23T22:28:09.069+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"issuelinks":[{"id":"12335001","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12335001","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"12483011","key":"AMQ-1150","self":"https://issues.apache.org/jira/rest/api/2/issue/12483011","fields":{"summary":"Signature typo shows off in JMX MBean view and problem with resubscribing to durable topic + PATCH","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-06-12T11:23:12.593+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"The issue is described in this thread:\n\nhttp://www.nabble.com/Blocking-on-UsageManager.waitForSpace-again-tf3031460.html\n\nBasically, a slow consumer can cause a producer to block on UsageManager.waitForSpace indefinately.\n\nA basic code sample to reproduce the problem is provided here:\n\nhttp://www.nabble.com/Re%3A-Blocking-on-UsageManager.waitForSpace-again-p8521205.html\n\nNote that the reproducibility of the bug depends on the initial and maximum size of the VM's heap.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460693","id":"12460693","filename":"ActiveMqBrokerThreadDump.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joe_white101","name":"joe_white101","key":"joe_white101","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe White","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-07T16:25:09.706+0000","size":37692,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460693/ActiveMqBrokerThreadDump.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461066","id":"12461066","filename":"SlowReceive.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-17T17:28:30.348+0000","size":1635,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12461066/SlowReceive.zip"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460895","id":"12460895","filename":"SlowReceive2.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-17T18:40:28.195+0000","size":1729,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12460895/SlowReceive2.zip"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460664","id":"12460664","filename":"SlowReceive3.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-17T19:20:57.992+0000","size":1798,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12460664/SlowReceive3.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161712","customfield_12312823":null,"summary":"Slow consumer causes producer to block on UsageManager.waitForSpace indefinately","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fullung","name":"fullung","key":"fullung","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Strasheim","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fullung","name":"fullung","key":"fullung","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Strasheim","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12938689","id":"12938689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joe_white101","name":"joe_white101","key":"joe_white101","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe White","active":true,"timeZone":"Etc/UTC"},"body":"I am having the exact issue described by Albert with the UsageManager.waitForSpace. The differences in my system are that I have multiple producers and multiple consumers. It is running in Java 1.5_09 on Red Hat.\n\nThe attached file contains a thread dump for the ActiveMq Broker obtained usign 'kill -QUIT [PID]' after the lockup has happened. Each of the transport threads is blockin on UsageManager.waitForSpace.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joe_white101","name":"joe_white101","key":"joe_white101","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe White","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-07T16:25:09.867+0000","updated":"2007-02-07T16:25:09.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12938789","id":"12938789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joe_white101","name":"joe_white101","key":"joe_white101","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe White","active":true,"timeZone":"Etc/UTC"},"body":"More on the waitForSpace broker lock down. \n\nJConsole indicates that the broker JVM has plenty of heap space remaining when the waitForSpace message is called. In my case the lockup occurs after a certain total message volume has been reached. The total volume is approximately:\n\nReceived - 8600\nSent -17000\n\nThe lockup occurs reliably within +/- 500 messages of that volume. The message size is approximately 2kb. The broker has a maximum heap size of 512M.\n\nI have attempted to fix this issue by modifying the pendingMessageLimitStrategy, however it had no effect on the lockup. Specifically I added  \n<constantPendingMessageLimitStrategy limit=10\"/>\n\nto the policy configuration for all of my topics. I also have tried true and false for persistence.\n\nI am using ActiveMq as the JMS broker for a mule instance and as far as I know all subscribers are non-durable, though I haven't figured out how to confirm this. DEBUG is enabled on the broker and the UsageManager logs things like:\n\nDEBUG UsageManager Memory usage change. from: 1, to: 2\nDEBUG UsageManager Memory usage change. from: 1, to: 3\n...\nDEBUG UsageManager Memory usage change. from: 99, to: 100\n\nAt which point all messaging stops. Is there a configuration change that can be made to eliminate this issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joe_white101","name":"joe_white101","key":"joe_white101","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe White","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-07T16:45:37.251+0000","updated":"2007-02-07T16:45:37.251+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12938534","id":"12938534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"The hang of a durable subscriber described in AMQ-1150 is\nprobably caused by the same problem","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-17T13:57:24.490+0000","updated":"2007-02-17T13:57:24.490+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12938515","id":"12938515","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"Junit test which deadlocks after about 50 sent messages:\n\nS: 47\nS: 48\nR: 12\nS: 49\nS: 50\nS: 51\nS: 52 (test hangs)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-17T17:28:30.447+0000","updated":"2007-02-17T17:28:30.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12938756","id":"12938756","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"I figured out that the SlowReceive1 junit test probably deadlocks\nbecause the connection is shared between sender and consumer.\n\nSo I rewrote the test and now the test runs to completion.\n\nHalfway during the send the Producer slows down and gets\nin sync with each received message.\n\nWhen I run my test programs with the tcp broker I still have the \nproblem. The sender runs to completion, but the receiver blocks... :-(","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-17T18:40:28.340+0000","updated":"2007-02-17T18:40:28.340+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12938775","id":"12938775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"This junit test reproduces the hang reliable.\n\nIt has inner loops which create new connections after 25 messages.\nIn the second iteration the producer and consumer block.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-17T19:20:58.149+0000","updated":"2007-02-17T19:20:58.149+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12936444","id":"12936444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"Can you reproduce this issue against the current trunk? (the latest 5.0.0 snapshot?) as we've put in a fair bit of work to try avoid these kinds of issues.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2007-06-12T09:59:57.478+0000","updated":"2007-06-12T09:59:57.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12936502","id":"12936502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fullung","name":"fullung","key":"fullung","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Strasheim","active":true,"timeZone":"America/Los_Angeles"},"body":"The test inside SlowReceive3.zip passes now. I'd like to know what changed, though. How did you manage to fix this issue without running this test?\n\nAnyway, I'll test AMQ-1148 next, which is probably a related problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fullung","name":"fullung","key":"fullung","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Strasheim","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-06-12T11:04:06.838+0000","updated":"2007-06-12T11:04:06.838+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482019/comment/12936433","id":"12936433","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"Great stuff; am gonna mark this issue resolved against 5.0.0 unless anyone can find a reason to reopen it.\n\nBasically one of the big changes in 5.x is the way the broker deals with memory limits; firstly producers and consumers have separate usage manager limits (on a per destination basis if required); which eases some of the old lockups we used to get. Then in addition there's the option of spoling to disk, rather than blocking indefinitely when a slow consumer is around using message cursors.\nhttp://activemq.apache.org/message-cursors.html\n\nFinally we have a new producer flow control option...\nhttp://activemq.apache.org/producer-flow-control.html\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2007-06-12T11:23:12.579+0000","updated":"2007-06-12T11:23:12.579+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1136/votes","votes":4,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s1gf:"}}