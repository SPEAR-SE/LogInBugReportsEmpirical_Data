{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13202515","self":"https://issues.apache.org/jira/rest/api/2/issue/13202515","key":"AMQ-7120","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"2018-12-05 12:13:57.402","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-7120/watchers","watchCount":1,"isWatching":false},"created":"2018-12-05T12:13:57.402+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12344049","id":"12344049","description":"","name":"5.15.7","archived":false,"released":true,"releaseDate":"2018-10-27"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-12-05T12:13:57.402+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We upgraded activemq 5.13.1 to activemq 5.15.7 to over come the security vulnerable to CVE-2015-5254 and CVE-2014-3612. for ref: here are the links for each CVE: [http://activemq.apache.org/security-advisories.data/CVE-2015-5254-announcement.txt?version=1&modificationDate=1449589734000&api=v2]\r\n[http://activemq.apache.org/security-advisories.data/CVE-2014-3612-announcement.txt?version=2&modificationDate=1423051365000&api=v2]\r\n\r\n \r\n\r\nAfter upgrading we hit with following issues while getting LDAP user informations .\r\n\r\nFollowing are the stack trace :\r\n\r\n05:23:14.576 0x14d7a00 j9trc_aux.1 - [53] org.eclipse.core.launcher.Main.basicRun (Main.java:282)\r\n05:23:14.576 0x14d7a00 j9trc_aux.1 - [54] org.eclipse.core.launcher.Main.run (Main.java:981)\r\n05:23:14.576 0x14d7a00 j9trc_aux.1 - [55] com.ibm.wsspi.bootstrap.WSPreLauncher.launchEclipse (WSPreLauncher.java:411)\r\n05:23:14.576 0x14d7a00 j9trc_aux.1 - [56] com.ibm.wsspi.bootstrap.WSPreLauncher.main (WSPreLauncher.java:173)\r\n_*05:23:14.576 0x14d7a00 mt.9 < java/security/Security.insertProviderAt(Ljava/security/Provider;I)I bytecode static method*_\r\n_*05:23:14.576 0x14d7a00 mt.9 < java/security/Security.addProvider(Ljava/security/Provider;)I bytecode static method*_\r\n_*05:23:18.255*0x3251c00 mt.3 > java/security/Security.insertProviderAt(Ljava/security/Provider;I)I bytecode static method*_\r\n_*05:23:18.255 0x3251c00 j9trc_aux.0 - jstacktrace:*_\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [1] java.security.Security.insertProviderAt (Security.java:369)*_{color}\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [2] org.apache.activemq.broker.BrokerService.<clinit> (BrokerService.java:275)*_{color}\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [3] com.ibm.tivoli.rest.event.amq.AMQPropertiesBrokerFactory.createBroker (AMQPropertiesBrokerFactory.java:30)*_{color}\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [4] org.apache.activemq.broker.BrokerFactory.createBroker (BrokerFactory.java:71)*_{color}\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [5] org.apache.activemq.broker.BrokerFactory.createBroker (BrokerFactory.java:54)*_{color}\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [6] com.ibm.tivoli.rest.event.amq.AMQEventRouterFactory.startBroker (AMQEventRouterFactory.java:430)*_{color}\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [7] com.ibm.tivoli.rest.event.amq.AMQEventRouterFactory.start (AMQEventRouterFactory.java:151)*_{color}\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [8] com.ibm.tivoli.rest.event.EventRouterFactory.getInstance (EventRouterFactory.java:43)*_{color}\r\n{color:#d04437}_*05:23:18.255 0x3251c00 j9trc_aux.1 - [9] com.ibm.tivoli.rest.amq.AjaxServlet.<init> (AjaxServlet.java:59)*_{color}\r\n_*{color:#d04437}05:23:18.255 0x3251c00 j9trc_aux.1 - [10] java.lang.J9VMInternals.newInstanceImpl {color}(Native Method)*_\r\n_*05:23:18.255 0x3251c00 j9trc_aux.1 - [11] java.lang.Class.newInstance (Class.java:1843)*_ (Compiled Code)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [12] java.beans.Beans.instantiate (Beans.java:240)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [13] java.beans.Beans.instantiate (Beans.java:88)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [14] com.ibm.ws.webcontainer.servlet.ServletWrapper$1.run (ServletWrapper.java:1489)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [15] com.ibm.ws.security.util.AccessController.doPrivileged (AccessController.java:118) (Compiled Code)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [16] com.ibm.ws.webcontainer.servlet.ServletWrapper.loadServlet (ServletWrapper.java:1478)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [17] com.ibm.ws.webcontainer.servlet.ServletWrapper.loadOnStartupCheck (ServletWrapper.java:1357)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [18] com.ibm.ws.webcontainer.webapp.WebApp.doLoadOnStartupActions (WebApp.java:642)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [19] com.ibm.ws.webcontainer.webapp.WebApp.commonInitializationFinally (WebApp.java:608)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [20] com.ibm.ws.webcontainer.webapp.WebAppImpl.initialize (WebAppImpl.java:426)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [21] com.ibm.ws.webcontainer.webapp.WebGroupImpl.addWebApplication (WebGroupImpl.java:88)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [22] com.ibm.ws.webcontainer.VirtualHostImpl.addWebApplication (VirtualHostImpl.java:171)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [23] com.ibm.ws.webcontainer.WSWebContainer.addWebApp (WSWebContainer.java:904)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [24] com.ibm.ws.webcontainer.WSWebContainer.addWebApplication (WSWebContainer.java:789)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [25] com.ibm.ws.webcontainer.component.WebContainerImpl.install (WebContainerImpl.java:427)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [26] com.ibm.ws.webcontainer.component.WebContainerImpl.start (WebContainerImpl.java:719)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [27] com.ibm.ws.runtime.component.ApplicationMgrImpl.start (ApplicationMgrImpl.java:1211)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [28] com.ibm.ws.runtime.component.DeployedApplicationImpl.fireDeployedObjectStart (DeployedApplicationImpl.java:1450)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [29] com.ibm.ws.runtime.component.DeployedModuleImpl.start (DeployedModuleImpl.java:639)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [30] com.ibm.ws.runtime.component.DeployedApplicationImpl.start (DeployedApplicationImpl.java:1032)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [31] com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication (ApplicationMgrImpl.java:795)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [32] com.ibm.ws.runtime.component.ApplicationMgrImpl$5.run (ApplicationMgrImpl.java:2279)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [33] com.ibm.ws.security.auth.ContextManagerImpl.runAs (ContextManagerImpl.java:5572)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [34] com.ibm.ws.security.auth.ContextManagerImpl.runAsSystem (ContextManagerImpl.java:5698)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [35] com.ibm.ws.security.core.SecurityContext.runAsSystem (SecurityContext.java:255)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [36] com.ibm.ws.runtime.component.ApplicationMgrImpl.start (ApplicationMgrImpl.java:2284)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [37] com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start (CompositionUnitMgrImpl.java:436)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [38] com.ibm.ws.runtime.component.CompositionUnitImpl.start (CompositionUnitImpl.java:123)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [39] com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start (CompositionUnitMgrImpl.java:379)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [40] com.ibm.ws.runtime.component.CompositionUnitMgrImpl.access$500 (CompositionUnitMgrImpl.java:127)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [41] com.ibm.ws.runtime.component.CompositionUnitMgrImpl$CUInitializer.run (CompositionUnitMgrImpl.java:985)\r\n\r\n \r\n\r\n\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [42] com.ibm.wsspi.runtime.component.WsComponentImpl$_AsynchInitializer.run (WsComponentImpl.java:524)\r\n05:23:18.255 0x3251c00 j9trc_aux.1 - [43] com.ibm.ws.util.ThreadPool$Worker.run (ThreadPool.java:1892)\r\n05:23:18.255 0x3251c00 mt.9 < java/security/Security.insertProviderAt(Ljava/security/Provider;I)I bytecode static method\r\n\r\nIf we rollback to old ActiveMq Jars(i.e 5.5.1) its working fine. \r\n\r\nPlease help us in identifying and fixing this issue.\r\n\r\nProducts involved are :\r\n\r\nWAS 8.5.5.9 - 8.5.5.14\r\n\r\nLDAP/Active directory\r\n\r\nJazzSM(DASH) 3.1.3 CP5 -CP7\r\n\r\nActiveMQ 5.15.7 and ActiveMQ 5.13.1,ActiveMQ 5.5.1,","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"After upgrading activemq 5.13.1 to activemq 5.15.7, issues with java.security.Security.insertProviderAt/org.apache.activemq.broker.BrokerService","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunil.jingade%40gmail.com","name":"sunil.jingade@gmail.com","key":"sunil.jingade@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sunil kumar","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunil.jingade%40gmail.com","name":"sunil.jingade@gmail.com","key":"sunil.jingade@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sunil kumar","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"WAS 8.5.5.9 - 8.5.5.14\r\n\r\nLDAP/Active directory\r\n\r\nJazzSM(DASH) 3.1.3 CP5 -CP7\r\n\r\nActiveMQ 5.15.7 and ActiveMQ 5.13.1,ActiveMQ 5.5.1,","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-7120/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|s016y8:"}}