{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482030","self":"https://issues.apache.org/jira/rest/api/2/issue/12482030","key":"AMQ-1265","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 08 14:48:52 UTC 2007","customfield_12310420":"43755","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_265990151_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_20933","customfield_12312321":null,"resolutiondate":"2007-06-08T14:48:31.995+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1265/watchers","watchCount":0,"isWatching":false},"created":"2007-06-05T12:55:21.844+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315611","id":"12315611","description":"","name":"4.0.1","archived":false,"released":true,"releaseDate":"2006-06-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315612","id":"12315612","description":"","name":"4.0.2","archived":false,"released":true,"releaseDate":"2006-07-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315614","id":"12315614","description":"","name":"4.1.1","archived":false,"released":true,"releaseDate":"2007-06-08"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-06-08T14:48:52.926+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313896","id":"12313896","name":"JMS client"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"A JMS client connections hangs when subscribing to queue that is filled with a small number of messages: 50+.\nThe messages have been produced before shutting down the message broker (bin\\activemq.bat process), at that time the queue consumer was not connected.\n\nSubscribing to 4 queues produces the problem.  When the queue is cleared, the problem goes away (by subscribing to only one queue for example).\n\nActiveMQMessageConsumer.setMessageListener\nfreezes on line 329\nsession.stop();\n\nIntelliJ debug screen: (at the next step the wait statement freezes the client connection).\npool-1-thread-1@10f, priority=5, in group 'main', status: 'RUNNING'\n\t  shutdown():87, PooledTaskRunner.java\n\t  stop():113, ActiveMQSessionExecutor.java\n\t  stop():1469, ActiveMQSession.java\n\t  setMessageListener():329, ActiveMQMessageConsumer.java\n\t  registerHandler():112, AbstractJMSMessagingServiceImpl.java\n\t  registerHandlerByAlias():134, ActiveMQMessagingServiceImpl.java\n\t  initMessagingHandler():412, AdapterDeployer.java\n\t  initAdapterHandlers():341, AdapterDeployer.java\n\t  run():139, AdapterDeployer.java\n\t  call():442, Executors.java\n\t  run():176, FutureTask.java\n\t  access$101():138, ScheduledThreadPoolExecutor.java\n\t  run():237, ScheduledThreadPoolExecutor.java\n\t  runWorker():987, ThreadPoolExecutor.java\n\t  run():528, ThreadPoolExecutor.java\n\t  run():595, Thread.java\n\nWhen watching the debug session, the boolean variable \"iterating\" is set to true in PooledTaskRunner.java for the blocking setMessageListener call.  The other non blocking setMessageListeners have their iteration boolean set to false.  Does the fact that one queue contains message set this to true maybe ?\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172329","customfield_12312823":null,"summary":"client setMessageListener for queue hangs when one queue contains 50+ messages and after broker restart setMessageListener calls for 4 queue are called","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbram","name":"dbram","key":"dbram","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Bram","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbram","name":"dbram","key":"dbram","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Bram","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"4 queues:\nSMF.OUT\nID.OUT\nMD.OUT\nMKLIST.OUT\n\nclient side: \nSolaris - SunOS hostname 5.10 Generic_118833-33 sun4u sparc SUNW,Sun-Fire-V215\njava version:\njava version \"1.5.0_11\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_11-b03)\nJava HotSpot(TM) Server VM (build 1.5.0_11-b03, mixed mode)\n\nserver: tested with same as client and windows XP SP2\njava version \"1.5.0_11\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_11-b03)\nJava HotSpot(TM) Client VM (build 1.5.0_11-b03, mixed mode)\n\nboth client and server: ActiveMQ version 4.0.1 - 4.0.2 - 4.1.1\n\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482030/comment/12936333","id":"12936333","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbram","name":"dbram","key":"dbram","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Bram","active":true,"timeZone":"Etc/UTC"},"body":"lock on client applciation while consuming another queue's messages introduced problem","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbram","name":"dbram","key":"dbram","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Bram","active":true,"timeZone":"Etc/UTC"},"created":"2007-06-08T14:48:31.942+0000","updated":"2007-06-08T14:48:31.942+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482030/comment/12936388","id":"12936388","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbram","name":"dbram","key":"dbram","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Bram","active":true,"timeZone":"Etc/UTC"},"body":"solved","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbram","name":"dbram","key":"dbram","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Bram","active":true,"timeZone":"Etc/UTC"},"created":"2007-06-08T14:48:52.916+0000","updated":"2007-06-08T14:48:52.916+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1265/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tuzj:"}}