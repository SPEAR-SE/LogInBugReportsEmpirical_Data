{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483413","self":"https://issues.apache.org/jira/rest/api/2/issue/12483413","key":"AMQ-1545","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315630","id":"12315630","description":"Issues that need to be reviewed - do we keep 'em or do we kick 'em? ","name":"NEEDS_REVIEW","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-03-02T10:21:21.405+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Mar 02 22:01:52 UTC 2012","customfield_12310420":"84659","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_130706187613_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-03-02T22:01:51.974+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1545/watchers","watchCount":2,"isWatching":false},"created":"2008-01-11T02:45:24.518+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-03-02T22:01:52.128+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313902","id":"12313902","name":"Samples","description":"Example programs that ship with ActiveMQ"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Opening three browser windows of the Chat sample is resulting in it not working properly.  Each message sent from one window gets picked up by only one of the three browser windows (in rotating fashion).  It is possible to move to a publish-subscribe model for the javascript comprising this example so all windows get each message sent?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461312","id":"12461312","filename":"activemq.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvarela","name":"dvarela","key":"dvarela","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Varela Santoalla","active":true,"timeZone":"Etc/UTC"},"created":"2009-03-02T10:24:14.884+0000","size":5830,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461312/activemq.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"59913","customfield_12312823":null,"summary":"Chat sample not working properly with > 1 windows","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gmazza","name":"gmazza","key":"gmazza","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Glen Mazza","active":true,"timeZone":"America/Havana"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gmazza","name":"gmazza","key":"gmazza","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Glen Mazza","active":true,"timeZone":"America/Havana"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483413/comment/12940875","id":"12940875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvarela","name":"dvarela","key":"dvarela","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Varela Santoalla","active":true,"timeZone":"Etc/UTC"},"body":"Yes, this affects obviously not only the chat example but any instance where there is more than one window open within the same session. Even having a single window, message reception is altered by reloading that window, as I found out with some tests in Firefox 3 and Konqueror. Results were quite inconsistent, sometimes missing messages altogether, sometimes the latest window getting all of them, sometimes were alternating between windows.\n\nI'm including a patch that might solve this problem, hopefully keeping compatibility with any previous behaviour. It works by including a \"windowId\" in the \"amq.url\" parameter of the HTML page, like this:\n\n<script type=\"text/javascript\">amq.uri='amq/window_'+Math.floor(Math.random()*100000);</script>\n\nThis parameter will be different for every window or \"window reload\", and then it is picked up (through getRequestInfo) by WebClient and MessageListenerServlet to map different windows to different listeners, allowing ALL of them to get the messages. After applying this patch the chat example allows chatting between multiple windows of the same session.\n\nHope this helps.\nDaniel.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvarela","name":"dvarela","key":"dvarela","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Varela Santoalla","active":true,"timeZone":"Etc/UTC"},"created":"2009-03-02T10:21:21.405+0000","updated":"2009-03-02T10:21:21.405+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483413/comment/12940870","id":"12940870","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvarela","name":"dvarela","key":"dvarela","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Varela Santoalla","active":true,"timeZone":"Etc/UTC"},"body":"Allow multiple windows within the same session to receive messages.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvarela","name":"dvarela","key":"dvarela","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Varela Santoalla","active":true,"timeZone":"Etc/UTC"},"created":"2009-03-02T10:24:14.945+0000","updated":"2009-03-02T10:24:14.945+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483413/comment/13221293","id":"13221293","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Tested here and its working fine with multiple chat windows.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-03-02T22:01:52.059+0000","updated":"2012-03-02T22:01:52.059+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1545/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0amgv:"}}