{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12493021","self":"https://issues.apache.org/jira/rest/api/2/issue/12493021","key":"AMQ-3082","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324950","id":"12324950","name":"5.10.0","archived":false,"released":true,"releaseDate":"2014-06-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2012-10-07T13:27:56.012+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Mar 29 11:18:56 UTC 2014","customfield_12310420":"74734","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_103978489373_*|*_5_*:*_2_*:*_619233_*|*_4_*:*_1_*:*_5446","customfield_12312321":null,"resolutiondate":"2014-03-29T11:19:10.055+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3082/watchers","watchCount":2,"isWatching":false},"created":"2010-12-12T00:13:56.028+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315624","id":"12315624","description":"Maintenance release for 5.4.0","name":"5.4.1","archived":false,"released":true,"releaseDate":"2010-09-21"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-03-29T11:19:10.078+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I have two activemq instances on the same machine. One running on all the default port settings and the other one on the following ports:\n\nChanged to the second activemq instance:\nin bin/activemq:\nACTIVEMQ_SUNJMX_CONTROL=\"--jmxurl service:jmx:rmi:///jndi/rmi://localhost:1100/jmxrmi\"\n\nin conf/activemq.xml\n<managementContext createConnector=\"true\" connectorPort=\"1100\" jmxDomainName=\"broker2\"/>\n...\n<transportConnector name=\"openwire\" uri=\"tcp://0.0.0.0:61617\"/>\n\nin conf/jetty.xml\n<property name=\"port\" value=\"8162\" />\n\nSo when I execute bin/activemq start:\n...\n INFO | JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1100/jmxrmi\n INFO | Listening for connections at: tcp://myhostname:61617\n...\n\nWhen I try to stop it, bin/activemq stop:\n...\nINFO: There are no brokers to stop.\n.\nINFO: Regular shutdown not successful,  sending SIGKILL to process with pid '26137'\n\nI added some logging to the script to discover that it was doing this call:\n\n/usr/bin/java -Dactivemq.classpath=\"/home/myuser/activeMQ2/apache-activemq-5.4.1/conf;\" -Dactivemq.home=\"/home/myuser/activeMQ2/apache-activemq-5.4.1\" -Dactivemq.base=\"/home/myuser/activeMQ2/apache-activemq-5.4.1\" -jar \"/home/myuser/activeMQ2/apache-activemq-5.4.1/bin/run.jar\" stop --jmxurl service:jmx:rmi:///jndi/rmi://localhost:1100/jmxrmi\n\nThis doesn't seem to find the JMX service in the specified location, even though it is the URL that was printed at start up (See log above).\n\nAll I wanted to have is two instances running on the same box to test a cluster configuration, but starting/stopping them correctly with the scripts seem to be a pain. A simple kill to the process PID works much better.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"32468","customfield_12312823":null,"summary":"Broker doesn't stop using the activemq script if the JMX port is changed","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iker.jimenez","name":"iker.jimenez","key":"iker.jimenez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Iker Jimenez","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iker.jimenez","name":"iker.jimenez","key":"iker.jimenez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Iker Jimenez","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"CentOS 5.4 64 bits","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12493021/comment/12970543","id":"12970543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iker.jimenez","name":"iker.jimenez","key":"iker.jimenez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Iker Jimenez","active":true,"timeZone":"Etc/UTC"},"body":"Another slightly related thing, can you please remove the activemq-admin script if it has been deprecated? It made waste some time trying to get it working too until I read in another bug here that it has been deprecated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iker.jimenez","name":"iker.jimenez","key":"iker.jimenez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Iker Jimenez","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-12T00:16:43.464+0000","updated":"2010-12-12T00:16:43.464+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12493021/comment/13471237","id":"13471237","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"body":"Yeah I see this on the 5.7.0 release\n{code}\ndavsclaus:/opt/amq2$ bin/activemq stop\nINFO: Using default configuration\n(you can configure options in one of these file: /etc/default/activemq /Users/davsclaus/.activemqrc)\n\nINFO: Invoke the following command to create a configuration file\nbin/activemq setup [ /etc/default/activemq | /Users/davsclaus/.activemqrc ]\n\nINFO: Using java '/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/java'\nINFO: Waiting at least 30 seconds for regular process termination of pid '47996' : \nJava Runtime: Apple Inc. 1.6.0_35 /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\n  Heap sizes: current=1044352k  free=1042987k  max=1044352k\n    JVM args: -Xms1G -Xmx1G -Djava.util.logging.config.file=logging.properties -Dactivemq.classpath=/opt/amq2/conf; -Dactivemq.home=/opt/amq2 -Dactivemq.base=/opt/amq2 -Dactivemq.conf=/opt/amq2/conf -Dactivemq.data=/opt/amq2/data\nExtensions classpath:\n  [/opt/amq2/lib,/opt/amq2/lib/camel,/opt/amq2/lib/optional,/opt/amq2/lib/web,/opt/amq2/lib/extra]\nACTIVEMQ_HOME: /opt/amq2\nACTIVEMQ_BASE: /opt/amq2\nACTIVEMQ_CONF: /opt/amq2/conf\nACTIVEMQ_DATA: /opt/amq2/data\nConnecting to pid: 47996\nERROR: java.lang.IllegalArgumentException: JMX URL already specified.\njava.lang.IllegalArgumentException: JMX URL already specified.\n\tat org.apache.activemq.console.command.AbstractJmxCommand.handleOption(AbstractJmxCommand.java:348)\n\tat org.apache.activemq.console.command.ShutdownCommand.handleOption(ShutdownCommand.java:156)\n\tat org.apache.activemq.console.command.AbstractCommand.parseOptions(AbstractCommand.java:73)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:45)\n\tat org.apache.activemq.console.command.AbstractJmxCommand.execute(AbstractJmxCommand.java:385)\n\tat org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:148)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:90)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.activemq.console.Main.runTaskClass(Main.java:262)\n\tat org.apache.activemq.console.Main.main(Main.java:115)\n.INFO: There are no brokers to stop.\n............................\nINFO: Regular shutdown not successful,  sending SIGKILL to process with pid '47996'\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"created":"2012-10-07T13:27:56.012+0000","updated":"2012-10-07T13:27:56.012+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12493021/comment/13951845","id":"13951845","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"body":"The problem is that you changed the domain name. Do not do that and it works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"created":"2014-03-29T11:08:45.395+0000","updated":"2014-03-29T11:18:27.737+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12493021/comment/13951847","id":"13951847","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"body":"The domain name for Apache ActiveMQ should be org.apache.activemq in JMX.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"created":"2014-03-29T11:18:56.404+0000","updated":"2014-03-29T11:18:56.404+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3082/votes","votes":4,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i05x5j:"}}