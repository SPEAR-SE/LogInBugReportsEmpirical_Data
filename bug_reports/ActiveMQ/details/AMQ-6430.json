{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13005198","self":"https://issues.apache.org/jira/rest/api/2/issue/13005198","key":"AMQ-6430","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12338124","id":"12338124","name":"5.14.1","archived":false,"released":true,"releaseDate":"2016-09-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12338054","id":"12338054","name":"5.15.0","archived":false,"released":true,"releaseDate":"2017-07-05"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-09-16T08:37:38.690+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Sep 23 15:26:36 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_509977153_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-09-21T13:36:37.326+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6430/watchers","watchCount":6,"isWatching":false},"created":"2016-09-15T15:57:00.568+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335661","id":"12335661","name":"5.13.4","archived":false,"released":true,"releaseDate":"2016-07-19"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12334188","id":"12334188","name":"5.14.0","archived":false,"released":true,"releaseDate":"2016-08-05"}],"issuelinks":[{"id":"12480937","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12480937","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12902000","key":"AMQ-5996","self":"https://issues.apache.org/jira/rest/api/2/issue/12902000","fields":{"summary":"Durable subscription no updated when reactivated sub changes noLocal value","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-09-23T15:26:36.986+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I create a connection to my local ActiveMQ and open two sessions. In the first session I create a durable topic subscriber with noLocal=true. In the second session I send a message to the same topic. Then I close both sessions and the connection. The first time I do this, everything works well, that means I send but do not receive the message. The second time I run the same application I send AND receive the message.\n\nAfter removing all files and directories in ActiveMQ's data directory, not receiving my own message works again, but only once.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12828665","id":"12828665","filename":"ActiveMQNoLocalTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daniel.faber%40agiltech.de","name":"daniel.faber@agiltech.de","key":"daniel.faber@agiltech.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Faber","active":true,"timeZone":"Europe/Berlin"},"created":"2016-09-15T15:58:45.319+0000","size":1942,"mimeType":"text/x-java","content":"https://issues.apache.org/jira/secure/attachment/12828665/ActiveMQNoLocalTest.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12828664","id":"12828664","filename":"pom.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daniel.faber%40agiltech.de","name":"daniel.faber@agiltech.de","key":"daniel.faber@agiltech.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Faber","active":true,"timeZone":"Europe/Berlin"},"created":"2016-09-15T15:58:45.315+0000","size":918,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12828664/pom.xml"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"noLocal=true in durable subscriptions is ignored after reconnect","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daniel.faber%40agiltech.de","name":"daniel.faber@agiltech.de","key":"daniel.faber@agiltech.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Faber","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daniel.faber%40agiltech.de","name":"daniel.faber@agiltech.de","key":"daniel.faber@agiltech.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Faber","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Ubuntu 14.04, OpenJDK 1.7.0_111 and Oracle JDK 1.8.0.74, other environments not testet","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15493757","id":"15493757","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daniel.faber%40agiltech.de","name":"daniel.faber@agiltech.de","key":"daniel.faber@agiltech.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Faber","active":true,"timeZone":"Europe/Berlin"},"body":"Attached sample application that reproduces the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daniel.faber%40agiltech.de","name":"daniel.faber@agiltech.de","key":"daniel.faber@agiltech.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Faber","active":true,"timeZone":"Europe/Berlin"},"created":"2016-09-15T15:58:45.323+0000","updated":"2016-09-15T15:58:45.323+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15493782","id":"15493782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daniel.faber%40agiltech.de","name":"daniel.faber@agiltech.de","key":"daniel.faber@agiltech.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Faber","active":true,"timeZone":"Europe/Berlin"},"body":"Steps to reproduce:\n\n1. start ActiveMQ: {{~/bin/apache-activemq-5.14.0 $ bin/activemq start}}\n\n2. run attached test application, output is\n{noformat}\nmessage sent:     ID:hostname-44638-1473955333904-1:1:2:1:1; body: test-message\n{noformat}\nas expected.\n\n3. run test application again, output is\n{noformat}\nmessage sent:     ID:hostname-55628-1473955434257-1:1:2:1:1; body: test-message\nincoming message: ID:hostname-55628-1473955434257-1:1:2:1:1; body: test-message\n{noformat}\nbut this time I receive my own message which I didn't expect.\n\n4. stop ActiveMQ: {{~/bin/apache-activemq-5.14.0 $ bin/activemq stop}}\n\n5. remove ActiveMQ's data files: {{~/bin/apache-activemq-5.14.0 $ rm -r data/*}}\n\n6. start ActiveMQ: {{~/bin/apache-activemq-5.14.0 $ bin/activemq start}}\n\n7. run test application, output is\n{noformat}\nmessage sent:     ID:hostname-46012-1473955651268-1:1:2:1:1; body: test-message\n{noformat}\nit seems to work, but..\n\n8. run test application again, output is\n{noformat}\nmessage sent:     ID:hostname-56206-1473955682047-1:1:2:1:1; body: test-message\nincoming message: ID:hostname-56206-1473955682047-1:1:2:1:1; body: test-message\n{noformat}\nagain, I receive my own message which I didn't expect.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daniel.faber%40agiltech.de","name":"daniel.faber@agiltech.de","key":"daniel.faber@agiltech.de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Faber","active":true,"timeZone":"Europe/Berlin"},"created":"2016-09-15T16:10:42.431+0000","updated":"2016-09-15T16:10:42.431+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15495754","id":"15495754","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbonn","name":"dbonn","key":"dbonn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Bonnauer","active":true,"timeZone":"Etc/UTC"},"body":"Successfully tried to reproduce this Issue using ActiveMQ 5.13.3\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbonn","name":"dbonn","key":"dbonn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Bonnauer","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-16T08:37:38.690+0000","updated":"2016-09-16T08:37:38.690+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15509755","id":"15509755","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"I took a look at this and there are actually two problems here with how noLocal is handled with durables.  The main issue you are seeing is that when the durable comes back online the new connectionId is not being captured for the NoLocal expression parser which means that when messages are sent after broker restart the logic thinks that the message isn't coming from the current subscription when it is.  The fix here is to make sure the connectionId is updated properly when the new consumer comes online.\n\nThe second issue is that the JMS spec says that \n{noformat}\nA client can change an existing durable subscription by creating a durable\nTopicSubscriber with the same name and a new topic and/or message selector,\nor NoLocal attribute. Changing a durable subscription is equivalent to deleting\nand recreating it.\n{noformat}\n\nRight now we aren't checking if that NoLocal attribute changes at all when a new consumer comes online.  Based on the spec I think we should update the activation check such that if the NoLocal attribute changes (ie goes from false to true or true to false) we treat it as a selector change and process it the same way (delete and recreate the sub)\n\nI am working on a patch and fix now to go out with our 5.14.1 release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2016-09-21T12:25:48.898+0000","updated":"2016-09-21T12:26:30.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15509813","id":"15509813","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"Looks like there are two places where the NoLocal attribute needs to be checked, it is done in one location but not the other.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2016-09-21T12:49:02.112+0000","updated":"2016-09-21T12:49:02.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15509926","id":"15509926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 7c293b661f22245ce21bf2b5aa1c5bf4192cb8c5 in activemq's branch refs/heads/master from [~cshannon]\n[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7c293b6 ]\n\nhttps://issues.apache.org/jira/browse/AMQ-6430\n\nWhen a nolocal durable consumer reconnects the new connectionId is properly captured for\nthe NoLocal expression so that nolocal works on reconnect.  Also fixed\nthe detection of the nolocal value changing on consumer connect.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-21T13:35:16.368+0000","updated":"2016-09-21T13:35:16.368+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15509928","id":"15509928","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit d3b86e77ddfe7d0185ff150520a0dddc9c6cf53e in activemq's branch refs/heads/activemq-5.14.x from [~cshannon]\n[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=d3b86e7 ]\n\nhttps://issues.apache.org/jira/browse/AMQ-6430\n\nWhen a nolocal durable consumer reconnects the new connectionId is properly captured for\nthe NoLocal expression so that nolocal works on reconnect.  Also fixed\nthe detection of the nolocal value changing on consumer connect.\n\n(cherry picked from commit 7c293b661f22245ce21bf2b5aa1c5bf4192cb8c5)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-21T13:35:51.773+0000","updated":"2016-09-21T13:35:51.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15516688","id":"15516688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"There are some test failures because JDBC and LevelDB don't support storing the noLocal flag.  Working on a fix now such that the noLocal flag only applies to stores that persist the flag (currently the memory store and kahadb/multikahadb when using openwire version >=11).  If JDBC and LevelDB are updated in the future such that this flag is stored then an update can be done so that this patch applies to those stores as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2016-09-23T14:58:50.301+0000","updated":"2016-09-23T14:58:50.301+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15516746","id":"15516746","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 18571ce09b6385d8560200928a353e9da1a1ffe4 in activemq's branch refs/heads/master from [~cshannon]\n[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=18571ce ]\n\nhttps://issues.apache.org/jira/browse/AMQ-6430\n\nModifying patch so that only stores that persist the noLocal flag will\ncheck if this flag has changed to prevent a subscription from being\ndeleted by mistake\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-23T15:26:14.630+0000","updated":"2016-09-23T15:26:14.630+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13005198/comment/15516747","id":"15516747","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit e0c70b843fb963cfa5e3be322c0d271ba61709bb in activemq's branch refs/heads/activemq-5.14.x from [~cshannon]\n[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=e0c70b8 ]\n\nhttps://issues.apache.org/jira/browse/AMQ-6430\n\nModifying patch so that only stores that persist the noLocal flag will\ncheck if this flag has changed to prevent a subscription from being\ndeleted by mistake\n\n(cherry picked from commit 18571ce09b6385d8560200928a353e9da1a1ffe4)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-23T15:26:36.986+0000","updated":"2016-09-23T15:26:36.986+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6430/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i33o8n:"}}