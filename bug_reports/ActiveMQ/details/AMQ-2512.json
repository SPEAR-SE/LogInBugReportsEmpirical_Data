{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483251","self":"https://issues.apache.org/jira/rest/api/2/issue/12483251","key":"AMQ-2512","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315621","id":"12315621","description":"","name":"5.3.1","archived":false,"released":true,"releaseDate":"2010-03-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-11-26T10:46:02.033+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Mar 10 14:46:16 UTC 2010","customfield_12310420":"74913","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_5277036023_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_3774525726","customfield_12312321":null,"resolutiondate":"2010-01-25T22:17:31.578+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2512/watchers","watchCount":3,"isWatching":false},"created":"2009-11-25T20:26:55.555+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315621","id":"12315621","description":"","name":"5.3.1","archived":false,"released":true,"releaseDate":"2010-03-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-03-10T14:46:17.303+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Following exception occurs quite often at the moment when cursor percent usage is over 100% and suddenly drops down below 100%:\n\n2009-11-25 21:16:00,287 | INFO  | Slow KahaDB access: cleanup took 547 | org.apache.activemq.store.kahadb.MessageDatabase | ActiveMQ Journal Checkpoint Worker\n2009-11-25 21:16:27,832 | INFO  | Slow KahaDB access: Journal append took: 0 ms, Index update took 891 ms | org.apache.activemq.store.kahadb.MessageDatabase | ActiveMQ Transport: tcp:///192.168.1.4:57697\n2009-11-25 21:16:30,324 | INFO  | Slow KahaDB access: Journal append took: 0 ms, Index update took 1172 ms | org.apache.activemq.store.kahadb.MessageDatabase | ActiveMQ Transport: tcp:///192.168.1.4:57697\n2009-11-25 21:16:31,283 | ERROR | Failed to page in more queue messages  | org.apache.activemq.broker.region.Queue | Queue:dee.q\njava.lang.NullPointerException\n\tat org.apache.kahadb.index.BTreeIndex.loadNode(BTreeIndex.java:260)\n\tat org.apache.kahadb.index.BTreeNode$BTreeIterator.findNextPage(BTreeNode.java:103)\n\tat org.apache.kahadb.index.BTreeNode$BTreeIterator.hasNext(BTreeNode.java:120)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$2.execute(KahaDBStore.java:194)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$2.execute(KahaDBStore.java:190)\n\tat org.apache.kahadb.page.Transaction.execute(Transaction.java:751)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.getMessageCount(KahaDBStore.java:189)\n\tat org.apache.activemq.broker.region.cursors.QueueStorePrefetch.getStoreSize(QueueStorePrefetch.java:63)\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.remove(AbstractStoreCursor.java:189)\n\tat org.apache.activemq.broker.region.cursors.StoreQueueCursor.remove(StoreQueueCursor.java:141)\n\tat org.apache.activemq.broker.region.Queue.doPageIn(Queue.java:1370)\n\tat org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1505)\n\tat org.apache.activemq.broker.region.Queue.iterate(Queue.java:1176)\n\tat org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:98)\n\tat org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:36)\n\n\nAdditional side effect is that broker stops dispatching messages out of the queue (see queue size and consumer count on screenshot from jconsole)\n\n\nSometimes this exception is also followed by:\n\n2009-11-25 20:45:00,783 | WARN  | Async error occurred: java.lang.ClassCastException: java.lang.String cannot be cast to org.apache.kahadb.journal.Location | org.apache.activemq.broker.TransportConnection.Service | ActiveMQ Transport: tcp:///192.168.1.4:57516\njava.lang.ClassCastException: java.lang.String cannot be cast to org.apache.kahadb.journal.Location\n\tat org.apache.kahadb.journal.Location.compareTo(Location.java:29)\n\tat java.util.Arrays.binarySearch0(Arrays.java:2001)\n\tat java.util.Arrays.binarySearch(Arrays.java:1943)\n\tat org.apache.kahadb.index.BTreeNode.remove(BTreeNode.java:234)\n\tat org.apache.kahadb.index.BTreeNode.remove(BTreeNode.java:240)\n\tat org.apache.kahadb.index.BTreeNode.remove(BTreeNode.java:240)\n\tat org.apache.kahadb.index.BTreeIndex.remove(BTreeIndex.java:194)\n\tat org.apache.activemq.store.kahadb.MessageDatabase.updateIndex(MessageDatabase.java:873)\n\tat org.apache.activemq.store.kahadb.MessageDatabase.access$700(MessageDatabase.java:82)\n\tat org.apache.activemq.store.kahadb.MessageDatabase$13.execute(MessageDatabase.java:757)\n\tat org.apache.kahadb.page.Transaction.execute(Transaction.java:728)\n\tat org.apache.activemq.store.kahadb.MessageDatabase.process(MessageDatabase.java:755)\n\tat org.apache.activemq.store.kahadb.MessageDatabase$11.visit(MessageDatabase.java:700)\n\tat org.apache.activemq.store.kahadb.data.KahaRemoveMessageCommand.visit(KahaRemoveMessageCommand.java:220)\n\tat org.apache.activemq.store.kahadb.MessageDatabase.process(MessageDatabase.java:692)\n\tat org.apache.activemq.store.kahadb.MessageDatabase.store(MessageDatabase.java:644)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.removeMessage(KahaDBStore.java:153)\n\tat org.apache.activemq.broker.region.Queue.acknowledge(Queue.java:602)\n\tat org.apache.activemq.broker.region.Queue.removeMessage(Queue.java:1235)\n\tat org.apache.activemq.broker.region.QueueSubscription.acknowledge(QueueSubscription.java:60)\n\tat org.apache.activemq.broker.region.PrefetchSubscription.acknowledge(PrefetchSubscription.java:250)\n\tat org.apache.activemq.broker.region.AbstractRegion.acknowledge(AbstractRegion.java:369)\n\tat org.apache.activemq.broker.region.RegionBroker.acknowledge(RegionBroker.java:470)\n\tat org.apache.activemq.broker.TransactionBroker.acknowledge(TransactionBroker.java:194)\n\tat org.apache.activemq.broker.BrokerFilter.acknowledge(BrokerFilter.java:74)\n\tat org.apache.activemq.broker.BrokerFilter.acknowledge(BrokerFilter.java:74)\n\tat org.apache.activemq.broker.MutableBrokerFilter.acknowledge(MutableBrokerFilter.java:85)\n\tat org.apache.activemq.broker.TransportConnection.processMessageAck(TransportConnection.java:449)\n\tat org.apache.activemq.command.MessageAck.visit(MessageAck.java:205)\n\tat org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:297)\n\tat org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:175)\n\tat org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:68)\n\tat org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)\n\tat org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:210)\n\tat org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84)\n\tat org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:203)\n\tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:185)\n\tat java.lang.Thread.run(Thread.java:619)\n\nI'm using latest 5.3.1-SNAPSHOT","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461378","id":"12461378","filename":"activemq.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-25T20:31:09.905+0000","size":95888,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461378/activemq.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461379","id":"12461379","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-25T20:32:07.247+0000","size":2127,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12461379/activemq.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461535","id":"12461535","filename":"activemq-cant-startup.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-26T22:55:47.883+0000","size":20141,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461535/activemq-cant-startup.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461484","id":"12461484","filename":"jconsole.jpg","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-25T20:29:07.547+0000","size":144639,"mimeType":"image/jpeg","content":"https://issues.apache.org/jira/secure/attachment/12461484/jconsole.jpg"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461450","id":"12461450","filename":"KahaDbNPE.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-26T22:06:41.721+0000","size":4574,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461450/KahaDbNPE.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"160045","customfield_12312823":null,"summary":"\"Failed to page in more queue messages\"","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483251/comment/12941887","id":"12941887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"code inspection may get to the bottom of this but a test case would help. Can you attach your test code or describe what consumers and producers are present at the time?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-26T10:46:02.033+0000","updated":"2009-11-26T10:46:02.033+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483251/comment/12941878","id":"12941878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"body":"My test client code attached. Starting from 30000-50000 messages delivery is much slower. Above situation usually happens at the end of processing (between 80 000 and 100 000 message received). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-26T22:20:48.062+0000","updated":"2009-11-26T22:20:48.062+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483251/comment/12941884","id":"12941884","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"body":"Once I also got following exception when I've killed my client app (during processing) and then shutdown broker and tried to start it up (I had to delete all kahaDB data files to fix this):\n\n2009-11-26 23:38:58,264 | ERROR | Failed to start ActiveMQ JMS Message Broker. Reason: java.lang.NullPointerException | org.apache.activemq.broker.BrokerService | main\njava.lang.NullPointerException\n\tat org.apache.kahadb.index.BTreeNode$BTreeIterator.findNextPage(BTreeNode.java:109)\n\tat org.apache.kahadb.index.BTreeNode$BTreeIterator.hasNext(BTreeNode.java:120)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$2.execute(KahaDBStore.java:194)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$2.execute(KahaDBStore.java:190)\n\tat org.apache.kahadb.page.Transaction.execute(Transaction.java:751)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.getMessageCount(KahaDBStore.java:189)\n\tat org.apache.activemq.broker.region.Queue.initialize(Queue.java:226)\n\tat org.apache.activemq.broker.region.DestinationFactoryImpl.createDestination(DestinationFactoryImpl.java:83)\n\tat org.apache.activemq.broker.region.AbstractRegion.createDestination(AbstractRegion.java:460)\n\tat org.apache.activemq.broker.jmx.ManagedQueueRegion.createDestination(ManagedQueueRegion.java:56)\n\tat org.apache.activemq.broker.region.AbstractRegion.addDestination(AbstractRegion.java:120)\n\tat org.apache.activemq.broker.region.RegionBroker.addDestination(RegionBroker.java:268)\n\tat org.apache.activemq.broker.BrokerFilter.addDestination(BrokerFilter.java:142)\n\tat org.apache.activemq.broker.BrokerFilter.addDestination(BrokerFilter.java:142)\n\tat org.apache.activemq.advisory.AdvisoryBroker.addDestination(AdvisoryBroker.java:153)\n\tat org.apache.activemq.broker.BrokerFilter.addDestination(BrokerFilter.java:142)\n\tat org.apache.activemq.broker.MutableBrokerFilter.addDestination(MutableBrokerFilter.java:149)\n\tat org.apache.activemq.broker.region.AbstractRegion.start(AbstractRegion.java:94)\n\tat org.apache.activemq.broker.region.RegionBroker.start(RegionBroker.java:178)\n\tat org.apache.activemq.broker.jmx.ManagedRegionBroker.start(ManagedRegionBroker.java:100)\n\tat org.apache.activemq.broker.TransactionBroker.start(TransactionBroker.java:112)\n\tat org.apache.activemq.broker.BrokerFilter.start(BrokerFilter.java:154)\n\tat org.apache.activemq.broker.BrokerFilter.start(BrokerFilter.java:154)\n\tat org.apache.activemq.broker.BrokerService$3.start(BrokerService.java:1690)\n\tat org.apache.activemq.broker.BrokerService.start(BrokerService.java:458)\n\tat org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:56)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:64)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:52)\n\tat org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:96)\n\tat org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:52)\n\tat org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)\n\tat org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)\n\tat org.apache.activemq.console.command.StartCommand.startBroker(StartCommand.java:115)\n\tat org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:74)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:136)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:82)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.activemq.console.Main.runTaskClass(Main.java:251)\n\tat org.apache.activemq.console.Main.main(Main.java:107)\n\nFull log file attached. Could it happened because of enableJournalDiskSyncs=\"false\" setting?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-26T22:53:22.598+0000","updated":"2009-11-26T22:53:22.598+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483251/comment/12941908","id":"12941908","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"body":"One more observation: using different type of cursor than store based (which is default I guess) seems to improve dispatch behavior - no more exceptions, hangs and slow downs.\n\n<pendingQueuePolicy>\n    <fileQueueCursor/>\n</pendingQueuePolicy>\n\nHowever I think store based cursor should also work fine and  that's why I'm leaving this issue still open.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-12-01T21:09:16.221+0000","updated":"2009-12-01T21:09:16.221+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483251/comment/12942049","id":"12942049","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"I have a test case that failed - but have made some improvements - plus reduced prefetch to 10 for consumers - would like verification if this is still an issue on the next 5.4-SNAPSHOT build - anyone ?\n\nSVN revision 901300","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-20T17:45:59.020+0000","updated":"2010-01-20T17:45:59.020+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483251/comment/12942069","id":"12942069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"I'm marking this as fixed - please re-open if not the case","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-25T22:17:31.576+0000","updated":"2010-01-25T22:17:31.576+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483251/comment/12942336","id":"12942336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"body":"works fine","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daroo","name":"daroo","key":"daroo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dariusz Szablinski","active":true,"timeZone":"Etc/UTC"},"created":"2010-03-10T14:46:16.338+0000","updated":"2010-03-10T14:46:16.338+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2512/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rr5z:"}}