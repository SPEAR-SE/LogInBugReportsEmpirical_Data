{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483193","self":"https://issues.apache.org/jira/rest/api/2/issue/12483193","key":"AMQ-2599","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315621","id":"12315621","description":"","name":"5.3.1","archived":false,"released":true,"releaseDate":"2010-03-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-02-15T15:48:35.913+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Feb 15 15:48:35 UTC 2010","customfield_12310420":"74879","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_587011403_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-02-15T15:48:36.002+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2599/watchers","watchCount":1,"isWatching":false},"created":"2010-02-08T20:45:04.599+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-02-26T14:16:17.247+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"In the 5.3.0 distribution, an \"activemq.xml\" file is provided in the \"conf\" directory.  The format of this file does not match the schema \"activemq.xsd\" that is located in the activemq-core-5.3.0.jar.  Specifically, in the latter, the \"broker\" tag is defined as a sequence of tags as follows:\n\tadminView\n\tapplicationContext\n\tconsumerSystemUsage\n\tdestinationFactory\n\tdestinationInterceptors\n\tdestinationPolicy\n\tdestinations\n\tjmsBridgeConnectors\n\tmanagementContext\n\tmessageAuthorizationPolicy\n\tnetworkConnectorURIs\n\tnetworkConnectors\n\tpersistenceAdapter\n\tpersistenceFactory\n\tpersistenceTaskRunnerFactory\n\tplugins\n\tproducerSystemUsage\n\tproxyConnectors\n\tregionBroker\n\tservices\n\tsslContext\n\tsystemUsage\n\ttaskRunnerFactory\n\ttempDataStore\n\ttransportConnectorURIs\n\ttransportConnectors\n\n(suspiciously, these tags are listed in alphabetical order - I question whether \"sequence\" was the correct type in the xsd, as opposed to \"one or more of the following\")\n\nIn any event, in the \"activemq.xml\" that is provided as part of the distribution, the children of the \"broker\" tag are provided in the following order:\n\tmanagementContext\n\tpersistenceAdapter\n\tdestinationPolicy\n\tsystemUsage\n\ttransportConnectors\n\nIf the activemq.xsd file is correct, then \"destinationPolicy\" should have been positioned first - before \"managementContext\".  Alternately, the tag order in the xsd file needs to be reworked.\n\nThis problem causes a SAXParseException if one tries to use the default activemq.xml with Spring 3.0 jars used instead of the Spring 2.5.6 jars that come with the distribution.  I can only presume that the newer version of Spring is configured, by default, to validate parsed XML against the XSD, while Spring 2.5.6 is not.\n\nI note that http://activemq.apache.org/networks-of-brokers.html indicates \"Order of construction of networks/persistence/transports IS important!\"  This at least suggests to me that the ordering of other tags might possibly be important, or that multiple orders may be valid depending on the desired effect.  Thus, it is not immediately obvious which of the two files is, in fact, the correct one.\n\nRegardless, it seems that the example XML file should match the provided XSD file.\n\nThe current workaround is to either use a version of Spring earlier than 3, or to edit the activemq.xml to re-order the children of \"broker\".","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"160025","customfield_12312823":null,"summary":"Distribution activemq.xml does not match distribution activemq.xsd, causing SAXParseException with newer versions of Spring","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=khunter","name":"khunter","key":"khunter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Hunter","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=khunter","name":"khunter","key":"khunter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Hunter","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483193/comment/12942189","id":"12942189","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"resolved in r910238\n\nThe example configuration files now match the schema as they should do. \n\nOrder is an attribute of the sequence but the sequence is important as it allows for extensibility, see: http://www.w3.org/2005/07/xml-schema-patterns.html#Collection-Extending-Elements ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-02-15T15:48:35.913+0000","updated":"2010-02-15T15:48:35.913+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2599/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rr1j:"}}