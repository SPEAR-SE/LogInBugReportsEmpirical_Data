{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483129","self":"https://issues.apache.org/jira/rest/api/2/issue/12483129","key":"AMQ-1359","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315631","id":"12315631","description":"Issues that are getting ready to be kicked - review 'em once more if you like","name":"AGING_TO_DIE","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-07-09T20:56:04.336+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Jul 09 20:56:04 UTC 2011","customfield_12310420":"68652","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_123645154870_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-09T20:56:04.327+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1359/watchers","watchCount":0,"isWatching":false},"created":"2007-08-08T19:03:29.471+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-09T20:56:04.338+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I have some code that worked fairly well with the release version of ActiveMQ 4.1 using OpenWire. One of my colleagues upgraded the server to the latest snapshot of ActiveMQ 5, and suddenly while I could still write to the queues on that server I could no longer read from them. \n\nUpgrading my client's jar to 5.0 cured the problem. The client was now able to read from and write to the 5.0 server. However the client and server versions should not need to be in such close sync. \n\nFor example, this simple program to write a couple of messages and then read them back fails until I change the jar archive to match the server's:\n\n{code}\nimport javax.jms.*;\nimport org.apache.activemq.*;\nimport org.apache.activemq.command.*;\n\npublic class CompletedRead {\n\n   \n    private static String url = \"tcp://queue.example.com:61616\";\n    private static String queue = \"foo\";\n\n        public static void main(String[] args) throws JMSException {\n           \n            ConnectionFactory out = new ActiveMQConnectionFactory(url);\n            Connection connection = out.createConnection();\n            Destination destination = new ActiveMQQueue( queue );\n            connection.start();            \n            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n            MessageProducer producer = session.createProducer(destination);\n            TextMessage message = session.createTextMessage();\n            message.setText(\"118652\");\n            producer.send(message);\n            message.setText(\"118653\");\n            producer.send(message);\n           \n            producer.close();\n            session.close();\n            connection.close();\n           \n            receive();\n        }\n\n        private static void receive() throws JMSException {\n            ConnectionFactory in = new ActiveMQConnectionFactory(url);\n            Connection connection = in.createConnection();\n            Destination destination = new ActiveMQQueue( queue );\n            connection.start();            \n            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n           \n            MessageConsumer consumer = session.createConsumer(destination);\n            TextMessage message = (TextMessage) consumer.receive(10000);\n            System.out.println(message.getText());\n            message = (TextMessage) consumer.receive(10000);\n            System.out.println (message.getText());\n           \n            consumer.close();\n            session.close();\n            connection.close();\n           \n        }\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172001","customfield_12312823":null,"summary":"ActiveMQ 4.1.1 client can write to but not read from ActiveMQ 5.0 server","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erharold","name":"erharold","key":"erharold","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Elliotte Rusty Harold","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erharold","name":"erharold","key":"erharold","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Elliotte Rusty Harold","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483129/comment/13062620","id":"13062620","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"OBE.  4.x is EOL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-07-09T20:56:04.336+0000","updated":"2011-07-09T20:56:04.336+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1359/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tsyn:"}}