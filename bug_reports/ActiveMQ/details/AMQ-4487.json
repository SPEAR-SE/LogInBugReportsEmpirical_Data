{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12644624","self":"https://issues.apache.org/jira/rest/api/2/issue/12644624","key":"AMQ-4487","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323932","id":"12323932","name":"5.9.0","archived":false,"released":true,"releaseDate":"2013-10-21"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-05-03T14:40:14.516+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jun 05 17:35:59 UTC 2013","customfield_12310420":"324989","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3547193583_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-06-05T17:35:59.619+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4487/watchers","watchCount":8,"isWatching":false},"created":"2013-04-25T16:16:06.056+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323282","id":"12323282","description":"Maintenance release with new AMQP support and smaller modules","name":"5.8.0","archived":false,"released":true,"releaseDate":"2013-02-11"}],"issuelinks":[{"id":"12371900","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12371900","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12654150","key":"AMQ-4595","self":"https://issues.apache.org/jira/rest/api/2/issue/12654150","fields":{"summary":"QueueBrowser hangs when browsing large queues","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12369885","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369885","type":{"id":"12310051","name":"Supercedes","inward":"is superceded by","outward":"supercedes","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310051"},"outwardIssue":{"id":"12637024","key":"AMQ-4372","self":"https://issues.apache.org/jira/rest/api/2/issue/12637024","fields":{"summary":"WebConsole throw Java Heap Space when browse a queue with more than 100 elements","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-07-11T16:24:20.923+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Hi,\n\nWhen we browse a queue in webconsole we are getting java.lang.OutOfMemoryError: Java heap space. \nMemory allocation -----> -Xms512m -Xmx3G\n\nWhen we try to click the queue to view the messages below error is occurring. We recently moved from 5.7 to 5.8 version. We dint face this issue in 5.7 version.\n\nKindly help in fixing the issue.\n\njava.lang.OutOfMemoryError: Java heap space\n        at java.util.Arrays.copyOf(Arrays.java:2882)\n        at java.io.CharArrayWriter.write(CharArrayWriter.java:88)\n        at java.io.PrintWriter.write(PrintWriter.java:382)\n        at com.opensymphony.module.sitemesh.filter.RoutablePrintWriter.write(RoutablePrintWriter.java:144)\n        at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:181)\n        at org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:449)\n        at org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:462)\n        at org.apache.jsp.browse_jsp$browse_jspHelper.invoke0(org.apache.jsp.browse_jsp:382)\n        at org.apache.jsp.browse_jsp$browse_jspHelper.invoke(org.apache.jsp.browse_jsp:450)\n        at org.apache.jsp.tag.web.jms.forEachMessage_tag.doTag(org.apache.jsp.tag.web.jms.forEachMessage_tag:89)\n        at org.apache.jsp.browse_jsp._jspx_meth_jms_forEachMessage_0(org.apache.jsp.browse_jsp:170)\n        at org.apache.jsp.browse_jsp._jspService(org.apache.jsp.browse_jsp:100)\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:109)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:389)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)\n        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:652)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1329)\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n        at org.apache.activemq.web.SessionFilter.doFilter(SessionFilter.java:45)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n        at org.apache.activemq.web.filter.ApplicationContextFilter.doFilter(ApplicationContextFilter.java:102)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n        at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)\n        at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\n        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1300)\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:445)\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n\n\nThank you.\n\nRegards,\nSubathra.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12585896","id":"12585896","filename":"AMQ4487Test.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-03T17:15:36.552+0000","size":4512,"mimeType":"text/x-java","content":"https://issues.apache.org/jira/secure/attachment/12585896/AMQ4487Test.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"325334","customfield_12312823":null,"summary":"java.lang.OutOfMemoryError: Java heap space","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"OS - Linux 2.6.18-238.el5 #1 SMP Sun Dec 19 14:22:44 EST 2010 x86_64 x86_64 x86_64 GNU/Linux\nActivemq - 5.8","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13648272","id":"13648272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"body":"Hi, Please provide a fix for this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-03T08:56:00.657+0000","updated":"2013-05-03T08:56:00.657+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13648457","id":"13648457","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jerrinot","name":"jerrinot","key":"jerrinot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaromir Hamala","active":true,"timeZone":"Europe/Vienna"},"body":"Hi Subathra, could you provide a bit more information about the issue? Any idea how many messages is in the queue? What are the conditions to reproduce it?\nThanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jerrinot","name":"jerrinot","key":"jerrinot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaromir Hamala","active":true,"timeZone":"Europe/Vienna"},"created":"2013-05-03T14:40:14.516+0000","updated":"2013-05-03T14:40:14.516+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13648467","id":"13648467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"body":"Hi Jaromir,\n\nWe are not able to browse the queues if the messages are near to 100.\n\nWhen we click a queue with more than 100 messages in it, we end up in java heap space error.\n\nThanks,\nSubathra.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-03T14:46:22.348+0000","updated":"2013-05-03T14:46:22.348+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13651802","id":"13651802","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"body":"Hi; Another thread same problem: https://issues.apache.org/jira/browse/AMQ-4372\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-08T11:29:36.579+0000","updated":"2013-05-08T11:29:36.579+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13651803","id":"13651803","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"body":"Has anyone managed to look into this please? We have had to upgrade to active mq 5.8 due to the persistent DB locking problem with lease time with 5.7. After upgrading to 5.8, the DB locking issue was resolved, however, this problem of not being able to browse messages more than 99 in queue is causing a huge problem for us, anyone? Please assist....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-08T11:32:03.985+0000","updated":"2013-05-08T11:32:03.985+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13651821","id":"13651821","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"body":"Does not happen on 5.7. Tested on 1.6 and 1.7 JDK.\n\nIf you click on 'active consumers' in the console when this is happening, you can see an enormous amount of enqueue and dequeues from the MQ host itself which seems to eat the box.\n\nA few more details on our setup;\n\nActiveMQ 5.8.0, Running on Java 1.6.x\nBackend Storage is Multi-Master Percona 5.5.x\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-08T12:01:54.378+0000","updated":"2013-05-08T12:01:54.378+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13658212","id":"13658212","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"body":"Can you please provide us an update on this issue.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=subathra1985","name":"subathra1985","key":"subathra1985","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Subathra Jayaraman","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-15T10:08:44.811+0000","updated":"2013-05-15T10:08:44.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13658461","id":"13658461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ceposta","name":"ceposta","key":"ceposta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ceposta&avatarId=15051","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ceposta&avatarId=15051","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ceposta&avatarId=15051","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ceposta&avatarId=15051"},"displayName":"Christian Posta","active":true,"timeZone":"America/Phoenix"},"body":"What's the size of your messages?\nHave you tried on a 5.9 SNAPSHOT?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ceposta","name":"ceposta","key":"ceposta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ceposta&avatarId=15051","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ceposta&avatarId=15051","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ceposta&avatarId=15051","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ceposta&avatarId=15051"},"displayName":"Christian Posta","active":true,"timeZone":"America/Phoenix"},"created":"2013-05-15T15:31:33.653+0000","updated":"2013-05-15T15:31:33.653+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13662298","id":"13662298","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ilia_stepanov","name":"ilia_stepanov","key":"ilia_stepanov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ilia Stepanov","active":true,"timeZone":"Etc/UTC"},"body":"I have same issue with 5.8.0. I checked the heap dump and debugged the web console, hope this will help to fix it. Please provide an update.\n\nIn the heap dump I found an instance of VMPendingMessageCursor holding 18+ millions of PendingNode elements (the queue had actually just two hundreds message). \n\nI did debugging - the method Queue.iterate() is repeated in an endless loop.\n\nIn first run it adds 200 messages to the browser. The second run should normally add no new messages and remove the browserDispatch from the browserDispatches. However this does not happen \n- the if (!node.isAcked() && !browser.getPending().getMessageAudit().isDuplicate(node.getMessageId()))  returns true again and messages are added again. \n\nThe third run adds messages again and so on. Messages are added until OOM occurs.\nI found it strange that method ActiveMQMessageAuditNoSync.isDuplicate() returns false in the second iteration and checked it. \n\n    public boolean isDuplicate(final MessageId id) {\n        boolean answer = false;\n\n        if (id != null) {\n            ProducerId pid = id.getProducerId();\n            if (pid != null) {\n                BitArrayBin bab = map.get(pid);  << here the bab is null in the second iteration. why? it should been added in the first iteration\n                if (bab == null) {\n                    bab = new BitArrayBin(auditDepth);\n                    map.put(pid, bab);           << here new entry is added to the map, but the size of keySet() is NOT increased!\n                    modified = true;             << here  map.get(pid) returns a coorect value in the debugger. \n\t\t\t\t\t\t << However in the next iteration it returns null again...\n                }\n                answer = bab.setBit(id.getProducerSequenceId(), true);\n            }\n        }\n        return answer;\n    }\nIt looks like a collision in the map. Does ProducerId comes with a proper hashCode() and equals() methods? \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ilia_stepanov","name":"ilia_stepanov","key":"ilia_stepanov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ilia Stepanov","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-20T19:18:55.207+0000","updated":"2013-05-20T19:18:55.207+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13662300","id":"13662300","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Create a unit test that can reproduce the issue if possible. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-05-20T19:20:53.857+0000","updated":"2013-05-20T19:20:53.857+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13671566","id":"13671566","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ilia_stepanov","name":"ilia_stepanov","key":"ilia_stepanov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ilia Stepanov","active":true,"timeZone":"Etc/UTC"},"body":"Hello,\nThe issue is caused by too high number of different producers (>64). When the number of producers exceeds 64, it is not possible to use QueueBrowser for this queue.\n\nTwo problems cause the issue.\n1. ActiveMQMessageAuditNoSync has a default max number of producers of 64. (field maximumNumberOfProducersToTrack)\nWhen the actual number of producers exceeds this value, the isDuplicate() does not work anymore correctly and sometimes returns false instead of true. This leads to infinite loop in Queue.iterate method and thus to an out-of-memory situation. \nIdeally Queue.iterate() should recognize that the audit class does not work correctly and fail. For example the ActiveMQMessageAuditNoSync.isDuplicate can throw an exception if map is full.\n\n2. It is not possible to increase the default max value via PolicyEntry. The PolicyEntry's configure() method does not populate MaxProducersToAudit to PrefetchSubscription ( sub.setMaxProducersToAudit(getMaxProducersToAudit()); is missing)\nThe PrefetchSubscription also does not populate the value to the underlying PendingMessageCursor .\n     public void setMaxProducersToAudit(int maxProducersToAudit) {\n         this.maxProducersToAudit = maxProducersToAudit;\n+        if (pending!=null) {\n+               pending.setMaxProducersToAudit(maxProducersToAudit);\n+        }\n     }\n\nHow can I create a unit test for the second issue?\n\nregards,\nilya\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ilia_stepanov","name":"ilia_stepanov","key":"ilia_stepanov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ilia Stepanov","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-31T15:20:13.927+0000","updated":"2013-05-31T15:20:13.927+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13671623","id":"13671623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guim78","name":"guim78","key":"guim78","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guillaume peron","active":true,"timeZone":"Etc/UTC"},"body":"Simple reproducer (however, I am not sure it happens every time).\n1/ I used default server config, except changing producerFlowControl to false\n2/ I used activemq 5.3.2 tool to send 100k messages (used JMX to check number of messages)\njava -classpath activemq-all-5.3.2.jar org.apache.activemq.benchmark.Producer tcp://localhost:61616 false TEST.FOO false 1\n3/ I used activemq 5.3.2 tool to dequeue messages, still 9k messages in the queue (used JMX to check number of messages)\n4/ I used the code below to browse messages - it slowed down over time with the jvm keeping doing full GC\nI stopped after 100k iterations, on a queue with 9k messages...\n\nimport java.util.Date;\nimport java.util.Enumeration;\n\nimport javax.jms.Connection;\nimport javax.jms.ConnectionFactory;\nimport javax.jms.JMSException;\nimport javax.jms.Message;\nimport javax.jms.Queue;\nimport javax.jms.QueueBrowser;\nimport javax.jms.Session;\n\nimport org.apache.activemq.ActiveMQConnectionFactory;\nimport org.apache.activemq.command.ActiveMQQueue;\n\npublic class QBrowse {\n\tConnectionFactory connectionFactory;\n\tConnection connection;\n\tSession session;\n\n\tstatic public void main(String[] parms) throws JMSException {\n\t\tQBrowse qb = new QBrowse();\n\t\tqb.initCli();\n\t\tqb.oldestMsgInQueue(\"BENCHMARK.FEED0\");\n\t\tqb.endCli();\n\t}\n\n\tpublic void initCli() throws JMSException {\n\t\tconnectionFactory = new ActiveMQConnectionFactory(\"tcp://localhost:61616\");\n\t\tconnection = connectionFactory.createConnection();\n\t\tconnection.start();\n\t\tsession = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n\t}\n\n\tpublic void endCli() throws JMSException {\n\t\tsession.close();\n\t\tconnection.close();\n\t}\n\n\t\n\tpublic void oldestMsgInQueue(String qname) throws JMSException{\n\t\tQueue q1= new ActiveMQQueue(qname );\n\t\tQueueBrowser br = session.createBrowser(q1,null);\n\t\tint iter = 0;\n\t\tEnumeration e = br.getEnumeration();\n\t\twhile(e.hasMoreElements()){\n\t\t\tif((iter % 1000) == 0)\n\t\t\t\tSystem.out.println(iter);\n\t\t\titer = iter+1;\n\t\t\tMessage m = (Message) e.nextElement();\n\t\t}\n\t\tbr.close();\n\t\t}\n}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guim78","name":"guim78","key":"guim78","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guillaume peron","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-31T16:26:53.993+0000","updated":"2013-05-31T16:26:53.993+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13671629","id":"13671629","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guim78","name":"guim78","key":"guim78","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guillaume peron","active":true,"timeZone":"Etc/UTC"},"body":"Please also note that while browsing the queue, cpu went very high mainly comparing a message id with all the message ids from the OrderedPendingList (method org.apache.activemq.broker.region.cursors.OrderedPendingList.contains(..))\n\nI have not read the whole server code, so I may be wrong, still:\n- I do not see the relationship between the pending status of a message and the message browsing work\n- while not having read all the code in detail (I may be wrong), I got huge performance improvments by rewriting the method:\n\n  public boolean contains(MessageReference message)\n  {\n    if (message != null)\n    \treturn map.containsKey(message.getMessageId());    \t\n    return false;\n}\n\n(but I still had that infinite loop and memory spike)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=guim78","name":"guim78","key":"guim78","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"guillaume peron","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-31T16:33:51.925+0000","updated":"2013-05-31T16:33:51.925+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13671630","id":"13671630","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"activemq-unit-tests/src/test/java/org.apache.activemq.usecases.QueueBrowsingTest could be a good place to start if you want to try to and help by creating a real JUnit test case. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-05-31T16:38:59.626+0000","updated":"2013-05-31T16:38:59.626+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13673129","id":"13673129","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ilia_stepanov","name":"ilia_stepanov","key":"ilia_stepanov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ilia Stepanov","active":true,"timeZone":"Etc/UTC"},"body":"Please use following test case to reproduce the problem. The test case illustrates two problems: \n- it is not possible to use Web Console (and QueueBrowser) if a queue contains messages from more then *64* producers. The enumeration gives endless number of messages in the queue which causes out of memory in case of the Web Console.\n- it is not possible to increase this threshold of 64 via PolicyEntry (the value does not get propagated properly to ActiveMQMessageAuditNoSync class). Check my comment 31/May/13 16:20 for a possible fix.\n\n\npackage org.apache.activemq.bugs;\n\nimport static org.junit.Assert.assertEquals;\n\nimport java.net.URI;\nimport java.util.Enumeration;\n\nimport javax.jms.Connection;\nimport javax.jms.JMSException;\nimport javax.jms.Message;\nimport javax.jms.MessageProducer;\nimport javax.jms.QueueBrowser;\nimport javax.jms.Session;\n\nimport org.apache.activemq.ActiveMQConnectionFactory;\nimport org.apache.activemq.broker.BrokerService;\nimport org.apache.activemq.broker.TransportConnector;\nimport org.apache.activemq.broker.region.policy.PolicyEntry;\nimport org.apache.activemq.broker.region.policy.PolicyMap;\nimport org.apache.activemq.command.ActiveMQQueue;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n/**\n * @author Ilya Stepanov\n */\npublic class AMQ4487Test {\n\n\tprivate static final Logger LOG = LoggerFactory\n\t\t\t.getLogger(AMQ4487Test.class);\n\n\tprivate BrokerService broker;\n\tprivate URI connectUri;\n\tprivate ActiveMQConnectionFactory factory;\n\n\t@Before\n\tpublic void startBroker() throws Exception {\n\t\tbroker = new BrokerService();\n\t\tTransportConnector connector = broker.addConnector(\"tcp://0.0.0.0:0\");\n\t\tbroker.deleteAllMessages();\n\t\tbroker.start();\n\t\tbroker.waitUntilStarted();\n\t\tconnectUri = connector.getConnectUri();\n\t\tfactory = new ActiveMQConnectionFactory(connectUri);\n\t}\n\n\t@After\n\tpublic void stopBroker() throws Exception {\n\t\tbroker.stop();\n\t\tbroker.waitUntilStopped();\n\t}\n\n\t@Test\n\tpublic void testBrowsing() throws JMSException {\n\n\t\tPolicyEntry policy = new PolicyEntry();\n\t\tpolicy.setQueue(\">\");\n\t\tpolicy.setMaxProducersToAudit(400);\n\t\tPolicyMap pMap = new PolicyMap();\n\t\tpMap.setDefaultEntry(policy);\n\t\tbroker.setDestinationPolicy(pMap);\n\n\t\tint messageToSend = 370;\n\n\t\tActiveMQQueue queue = new ActiveMQQueue(\"TEST\");\n\t\tConnection connection = factory.createConnection();\n\t\tconnection.start();\n\t\tSession session = connection.createSession(false,\n\t\t\t\tSession.AUTO_ACKNOWLEDGE);\n\n\t\tString data = \"\";\n\t\tfor (int i = 0; i < 1024 * 2; i++) {\n\t\t\tdata += \"x\";\n\t\t}\n\n\t\tfor (int i = 0; i < messageToSend; i++) {\n\t\t\tConnection msg_connection = factory.createConnection();\n\t\t\tmsg_connection.start();\n\t\t\tSession msg_session = msg_connection.createSession(false,\n\t\t\t\t\tSession.AUTO_ACKNOWLEDGE);\n\t\t\tMessageProducer msg_producer = msg_session.createProducer(queue);\n\t\t\tmsg_producer.send(msg_session.createTextMessage(data));\n\t\t}\n\n\t\tQueueBrowser browser = session.createBrowser(queue);\n\t\tEnumeration enumeration = browser.getEnumeration();\n\t\tint received = 0;\n\t\twhile (enumeration.hasMoreElements()) {\n\t\t\tMessage m = (Message) enumeration.nextElement();\n\t\t\treceived++;\n\t\t\tif (received > messageToSend)\n\t\t\t\tbreak;\n\t\t}\n\n\t\tbrowser.close();\n\n\t\tassertEquals(messageToSend, received);\n\t}\n\n}\n\n\n\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ilia_stepanov","name":"ilia_stepanov","key":"ilia_stepanov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ilia Stepanov","active":true,"timeZone":"Etc/UTC"},"created":"2013-06-03T14:05:04.131+0000","updated":"2013-06-03T14:05:04.131+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13673328","id":"13673328","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Expanded the test case a bit, will look into it and get it fixed in v5.9.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-03T17:15:36.555+0000","updated":"2013-06-03T17:15:36.555+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13673581","id":"13673581","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"I've submitted the fix that allows for maxProducersToAudit to be configured which can help to work around the underlying issue.  We will still look for a better solution here though since we can't expect everyone to know how many producers they will have.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-03T21:14:07.160+0000","updated":"2013-06-03T21:14:07.160+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12644624/comment/13676154","id":"13676154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Fixed on trunk, use the next v5.9.0 SNAPSHOT to test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-05T17:35:59.635+0000","updated":"2013-06-05T17:35:59.635+0000"}],"maxResults":18,"total":18,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4487/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1k2hr:"}}