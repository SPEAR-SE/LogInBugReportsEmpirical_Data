{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12686084","self":"https://issues.apache.org/jira/rest/api/2/issue/12686084","key":"AMQ-4953","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2014-01-07T20:27:02.794+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jan 21 11:57:49 UTC 2014","customfield_12310420":"365041","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1438320069_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-01-08T15:36:57.125+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4953/watchers","watchCount":4,"isWatching":false},"created":"2013-12-23T00:04:57.092+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323932","id":"12323932","name":"5.9.0","archived":false,"released":true,"releaseDate":"2013-10-21"}],"issuelinks":[{"id":"12380297","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12380297","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12632436","key":"AMQ-4320","self":"https://issues.apache.org/jira/rest/api/2/issue/12632436","fields":{"summary":"Destinations are not auto created when using Composite Destination configured on the broker","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-01-21T11:57:49.711+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"When creating a composite queue (by editing activemq.xml) it doesn't seem like the queue is actually created.\n\nWhen I try to connect to the composite queue (from another server), the folowing Exception is thrown:\nCaused by: java.lang.SecurityException: User alice is not authorized to create: queue://FOO.BAR\nWe doesn't allow the user ('alice') to create queues so this seems to indicate that the queue doesn't exist according to A-MQ.\n\nPart from my activemq.xml:\n{code}\n    <broker xmlns=\"http://activemq.apache.org/schema/core\"\n            brokerName=\"${broker-name}\"\n            dataDirectory=\"${data}\"\n            advisorySupport=\"false\"\n            start=\"false\">\n\n        ...\n\n        <plugins>\n            <jaasAuthenticationPlugin configuration=\"karaf\" />\n            <authorizationPlugin>\n              <map>\n                <authorizationMap groupClass=\"org.apache.karaf.jaas.boot.principal.RolePrincipal\">\n                  <authorizationEntries>\n                    <authorizationEntry queue=\">\" read=\"admin,alice\" write=\"admin,alice\" admin=\"admin\" />\n                    <authorizationEntry topic=\">\" read=\"admin,alice\" write=\"admin,alice\" admin=\"admin\" />\n                    <authorizationEntry topic=\"ActiveMQ.Advisory.>\" read=\"admin,alice\" write=\"admin,alice\" admin=\"admin,alice\" /> \n                  </authorizationEntries>\n                </authorizationMap>\n              </map>\n            </authorizationPlugin>\n        </plugins>\n\n        ...\n\n        <destinations>\n            <queue physicalName=\"FOO.BAR.COM\"/>\n        </destinations>\n\n        <destinationInterceptors>\n          <virtualDestinationInterceptor>\n             <virtualDestinations>\n               <compositeQueue name=\"FOO.BAR\">\n                 <forwardTo>\n                   <queue physicalName=\"FOO.BAR.COM\"/>\n                 </forwardTo>\n               </compositeQueue>\n            </virtualDestinations>\n         </virtualDestinationInterceptor>\n       </destinationInterceptors>\n    </broker>\n{code}\n** Note: This is destinct from AMQ-4320 which was about the destinations contained within the Composite Destinations, not being created.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"365349","customfield_12312823":null,"summary":"Virutal Destination is not auto created when using Composite Destination","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jshepher","name":"jshepher","key":"jshepher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Shepherd","active":true,"timeZone":"Australia/Brisbane"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jshepher","name":"jshepher","key":"jshepher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Shepherd","active":true,"timeZone":"Australia/Brisbane"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"JBoss A-MQ 6.1.0.redhat-306","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686084/comment/13864648","id":"13864648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"I'm not sure this is a bug as I don't see anywhere in our docs that indicates that the we intended for these to be created on start-up as opposed to the normal on-demand creation we normally do.  You can work around this by adding to your static destination list above.  \n\n{code}\n    <destinations>\n      <queue physicalName=\"FOO.BAR.COM\"/>\n      <queue physicalName=\"FOO.BAR\"/>\n    </destinations>\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-01-07T20:27:02.794+0000","updated":"2014-01-07T20:27:02.794+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686084/comment/13865559","id":"13865559","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"I agree with Tim, same workaround came to my mind. The virtual nature of a destination is a behaviour modification, but does not override auto creation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2014-01-08T15:36:57.152+0000","updated":"2014-01-08T15:36:57.152+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686084/comment/13876935","id":"13876935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jshepher","name":"jshepher","key":"jshepher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Shepherd","active":true,"timeZone":"Australia/Brisbane"},"body":"In a network or brokers would it be possible for messages to be forwarded to networked brokers on FOO.BAR before be distributed to virtual destinations? Could this cause duplicate messages?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jshepher","name":"jshepher","key":"jshepher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Shepherd","active":true,"timeZone":"Australia/Brisbane"},"created":"2014-01-20T22:40:29.435+0000","updated":"2014-01-20T22:40:29.435+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686084/comment/13876936","id":"13876936","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jshepher","name":"jshepher","key":"jshepher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Shepherd","active":true,"timeZone":"Australia/Brisbane"},"body":"Also, if a consumer subscribed to the new queue 'FOO.BAR', would it then compete for messages with the composite destination(s), causing some messages to not make it through to consumers of the composite destinations?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jshepher","name":"jshepher","key":"jshepher","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Shepherd","active":true,"timeZone":"Australia/Brisbane"},"created":"2014-01-20T22:41:50.060+0000","updated":"2014-01-20T22:41:50.060+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12686084/comment/13877415","id":"13877415","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"with networks, either the virtual dest or the original target needs to forwarded, not both. Assuming all brokers have the virtual dest configured in the same way that is.\n\nW.r.t competing; the virtual bits are done as part of an interceptor on the send call, so the message goes to the target and the additional virtual dests before there is any dispatch. So there is no competition with consumers.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2014-01-21T11:57:49.711+0000","updated":"2014-01-21T11:57:49.711+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4953/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1qx6f:"}}