{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12607666","self":"https://issues.apache.org/jira/rest/api/2/issue/12607666","key":"AMQ-4050","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-03-09T11:02:46.676+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Mar 09 11:02:46 UTC 2015","customfield_12310420":"253879","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4050/watchers","watchCount":2,"isWatching":false},"created":"2012-09-14T16:00:08.809+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12318549","id":"12318549","name":"5.5.1","archived":false,"released":true,"releaseDate":"2011-10-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-03-09T11:02:46.676+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"When trying to distribute messages to consumers a corrupted message causes the Broker to stall and stop distributing messages with a NegativeArraySizeException.  While the broker can no longer distribute messages it does in fact accept them and properly persists them to the queue.  Attached is a sql dump of ACTIVEMQ_MSGS with the offending message to reproduce.\n\nStackTrace while running:\n\n[07:33:46:882]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|: java.lang.NegativeArraySizeException|\n[07:33:46:882]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.looseUnmarshalByteSequence(BaseDataStreamMarshaller.java:639)|\n[07:33:46:882]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.openwire.v6.MessageMarshaller.looseUnmarshal(MessageMarshaller.java:229)|\n[07:33:46:882]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.openwire.v6.ActiveMQMessageMarshaller.looseUnmarshal(ActiveMQMessageMarshaller.java:101)|\n[07:33:46:882]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.openwire.v6.ActiveMQTextMessageMarshaller.looseUnmarshal(ActiveMQTextMessageMarshaller.java:101)|\n[07:33:46:882]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.openwire.OpenWireFormat.doUnmarshal(OpenWireFormat.java:364)|\n[07:33:46:882]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:204)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.store.jdbc.JDBCMessageStore$2.recoverMessage(JDBCMessageStore.java:256)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.store.jdbc.adapter.DefaultJDBCAdapter.doRecoverNextMessages(DefaultJDBCAdapter.java:938)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.store.jdbc.JDBCMessageStore.recoverNextMessages(JDBCMessageStore.java:251)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.store.ProxyMessageStore.recoverNextMessages(ProxyMessageStore.java:88)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.broker.region.cursors.QueueStorePrefetch.doFillBatch(QueueStorePrefetch.java:97)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:260)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.reset(AbstractStoreCursor.java:108)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.broker.region.cursors.StoreQueueCursor.reset(StoreQueueCursor.java:157)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.broker.region.Queue.doPageInForDispatch(Queue.java:1712)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1932)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1440)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:127)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)|\n[07:33:46:883]|[09-13-2012]|[SYSOUT]|[INFO]|[122]|:     at java.lang.Thread.run(Thread.java:619)|\n\nStackTrace on Startup:\n\n11:41:47:996]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: java.lang.NegativeArraySizeException|\n[11:41:47:996]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.openwire.v6.BaseDataStreamMarshaller.looseUnmarshalByteSequence(BaseDataStreamMarshaller.java:639)|\n[11:41:47:996]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.openwire.v6.MessageMarshaller.looseUnmarshal(MessageMarshaller.java:229)|\n[11:41:47:997]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.openwire.v6.ActiveMQMessageMarshaller.looseUnmarshal(ActiveMQMessageMarshaller.java:101)|\n[11:41:47:997]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.openwire.v6.ActiveMQTextMessageMarshaller.looseUnmarshal(ActiveMQTextMessageMarshaller.java:101)|\n[11:41:47:997]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.openwire.OpenWireFormat.doUnmarshal(OpenWireFormat.java:364)|\n[11:41:47:997]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:204)|\n[11:41:47:997]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.getLastMessageBrokerSequenceId(JDBCPersistenceAdapter.java:236)|\n[11:41:47:997]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.region.DestinationFactoryImpl.getLastMessageBrokerSequenceId(DestinationFactoryImpl.java:145)|\n[11:41:47:998]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.region.RegionBroker.<init>(RegionBroker.java:122)|\n[11:41:47:998]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.jmx.ManagedRegionBroker.<init>(ManagedRegionBroker.java:99)|\n[11:41:47:998]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.BrokerService.createRegionBroker(BrokerService.java:1830)|\n[11:41:47:998]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.BrokerService.createRegionBroker(BrokerService.java:1824)|\n[11:41:47:998]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.BrokerService.createBroker(BrokerService.java:1781)|\n[11:41:47:998]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.BrokerService.getBroker(BrokerService.java:766)|\n[11:41:47:999]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.BrokerService.getAdminConnectionContext(BrokerService.java:2037)|\n[11:41:47:999]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.BrokerService.startDestinations(BrokerService.java:2024)|\n[11:41:47:999]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat org.apache.activemq.broker.BrokerService.start(BrokerService.java:495)|\n[11:41:47:999]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat com.myapp.server.jobqueue.broker.BrokerUtils$BrokerStart.run(BrokerUtils.java:111)|\n[11:41:47:999]|[09-14-2012]|[SYSOUT]|[INFO]|[11]|: \tat java.lang.Thread.run(Thread.java:680)|\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12545163","id":"12545163","filename":"ACTIVEMQ_MSGS.sql","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"created":"2012-09-14T16:01:07.621+0000","size":132383,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12545163/ACTIVEMQ_MSGS.sql"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"81420","customfield_12312823":null,"summary":"Broker unable to distribute messages to consumers with NegativeArraySizeException loading message from JDBC Persistence","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Broker is running in JVM via java code initialization.  JDBC Persistence Adapter to MySQL database.  Production is CentOS.  Replicable on MacOS 10.7, Java 1.6.0_35, 5.1.63 MySQL Community Server ","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607666/comment/13455887","id":"13455887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"body":"Table definition and single offending record that creates a NegativeArraySizeException","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"created":"2012-09-14T16:01:07.622+0000","updated":"2012-09-14T16:01:07.622+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607666/comment/13455891","id":"13455891","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"body":"Broker initialization code:\n\n\t\t\t\tString host = InetAddress.getLocalHost().getHostAddress();\n\t\t\t\tString brokerName = host + \":\" + ServerProperties.getJobqueueBrokerPort();\n\t\t\t\tbroker = new BrokerService();\n\t\t\t\tbroker.setBrokerName(brokerName);\n\t\t\t\tbroker.setBrokerId(brokerName);\n\t\t\t\tbroker.setUseJmx(true);\n\t\t\t\tbroker.setSchedulerSupport(true);\n\n\t\t\t\t//Setup dead letter queue\n\t\t\t\tIndividualDeadLetterStrategy deadLetterStrategy = new IndividualDeadLetterStrategy();\n\t\t\t\tdeadLetterStrategy.setQueuePrefix(\"DLQ.\");\n\t\t\t\tdeadLetterStrategy.setUseQueueForQueueMessages(true);\n\t\t\t\tPolicyMap destinationPolicy = new PolicyMap();\n\t\t\t\tArrayList<PolicyEntry> entries = new ArrayList<PolicyEntry>();\n\t\t\t\tPolicyEntry entry = new PolicyEntry();\n\t\t\t\tentry.setQueue(\">\");\n\t\t\t\tentry.setDeadLetterStrategy(deadLetterStrategy);\n                                entries.add(entry);\n\t\t\t\tdestinationPolicy.setPolicyEntries(entries);\n\t\t\t\tbroker.setDestinationPolicy(destinationPolicy);\n\n\t\t\t\t//Setup destinations\n\t\t\t\tActiveMQDestination[] destinations = new ActiveMQDestination[]\n\t\t\t\t{\n\t\t\t\t\t\tnew ActiveMQQueue(\"q.myapp.job\"),\n\t\t\t\t\t\tnew ActiveMQTopic(\"t.myapp.config\")\n\t\t\t\t};\n\t\t\t\tbroker.setDestinations(destinations);\n\n\t\t\t\t//Setup persistence\n\t\t\t\tJDBCPersistenceAdapter jdbcPersistenceAdapter = new JDBCPersistenceAdapter();\n\t\t\t\tjdbcPersistenceAdapter.setCreateTablesOnStartup(false);\n\t\t\t\tjdbcPersistenceAdapter.setDataSource(dataSource);\n\t\t\t\tjdbcPersistenceAdapter.setUseDatabaseLock(false);\n\t\t\t\tbroker.setPersistenceAdapter(jdbcPersistenceAdapter);\n\t\t\t\tbroker.setPersistent(true);\n\n\t\t\t\t//Setup transports\n\t\t\t\tTransportConnector connector = new TransportConnector();\n\t\t\t\tconnector.setUri(new URI(\"tcp://\" + broker.getBrokerName()));\n\t\t\t\tconnector.setDiscoveryUri(new URI(\"multicast://default?group=\"\n\t\t\t\t\t\t+ ServerProperties.getJobqueueMulticastGroup()));\n\t\t\t\tbroker.addConnector(connector);\n\t\t\t\tbroker.start();\n\t\t\t\tbroker.waitUntilStopped();\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"created":"2012-09-14T16:08:05.764+0000","updated":"2012-09-14T16:08:46.159+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607666/comment/13456159","id":"13456159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"body":"I stepped through the code and found the following scenario:\nMessageMarshaller calls Message.setMarshalledProperties(looseUnmarshalByteSequence(dataIn) Line 229\n\ndataIn is a DataByteArrayInputStream which in this case is 65535 in length with a private pos == 65535\n\nreadInt is used to get the size to set a local byte[] but readInt returns -16843009 based on the fact that read() returns -1 since the end of the stream has been reached.\n\nIt would appear that the message is incomplete in the queue (corrupt) and the reading fails.\n\nMy guess is that readInt should understand when the end of the stream has been reached and fail gracefully.\n\nThis would provide some level of corrupt message handling to protect the broker. \n\nI believe that the corrupt message get there to begin with due to an environmental issue.  ie. two brokers trying to access the same message store.  This fix would nevertheless protect the Broker from failing to distribute messages.\n\nThe fix to our production environment was just to delete the message from the ACTIVEMQ_MSGS tables.  Once the message was removed the Broker started delivering messages about a minute later.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elwallacejr","name":"elwallacejr","key":"elwallacejr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ernest Wallace","active":true,"timeZone":"America/New_York"},"created":"2012-09-14T21:18:35.589+0000","updated":"2012-09-14T21:18:35.589+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607666/comment/14352805","id":"14352805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=felixehm","name":"felixehm","key":"felixehm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Felix Ehm","active":true,"timeZone":"Etc/UTC"},"body":"We experience the same problem with 5.11.1 and the KahaDB storage.\n\nBut here, we have to delete the full kahadb (and loose the messages) . ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=felixehm","name":"felixehm","key":"felixehm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Felix Ehm","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-09T11:02:46.676+0000","updated":"2015-03-09T11:02:46.676+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4050/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ea8f:"}}