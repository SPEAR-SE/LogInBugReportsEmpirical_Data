{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481925","self":"https://issues.apache.org/jira/rest/api/2/issue/12481925","key":"AMQ-2598","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"parent":{"id":"12481628","key":"AMQ-2873","self":"https://issues.apache.org/jira/rest/api/2/issue/12481628","fields":{"summary":"Need to update the \"Example Configuration using NetworkConnector properties\" in networks-of-brokers.html due to the change made to resolve AMQ-2598 ","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315624","id":"12315624","description":"Maintenance release for 5.4.0","name":"5.4.1","archived":false,"released":true,"releaseDate":"2010-09-21"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-08-12T15:19:21.329+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Aug 16 14:55:04 UTC 2010","customfield_12310420":"14668","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_15966574647_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-08-12T15:19:21.372+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2598/watchers","watchCount":1,"isWatching":false},"created":"2010-02-08T20:09:46.725+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-08-20T14:11:21.280+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"I'm trying to set up a forwarding bridge that will connect through an http proxy (where the proxy happens to be running on the same machine as the destination ApacheMQ instance). Per AMQ-1099, the following should work: \n\n<networkConnector name=\"gstest-252\" uri=\"static://(http://gstest-252:61617?proxyHost=gstest-252&amp;proxyPort=80)\" networkTTL=\"5\"/>  \n\nBut it results in the following error at start up:\n\n INFO | Establishing network connection from vm://localhost to http://gstest-252\n:61617?proxyHost=gstest-252&proxyPort=80&proxyHost=gstest-252&proxyPort=80)\n\n WARN | Could not connect to remote URI: http://gstest-252:61617?proxyHost=gstes\nt-252&proxyPort=80&proxyHost=gstest-252&proxyPort=80): Invalid connect parameter\ns: {proxyPort=80)}\n\n INFO | Network Connector gstest-252 Started","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"63693","customfield_12312823":null,"summary":"Configuring HTTP <networkConnector> with proxyHost, proxyPort results in \"Invalid connect parameters: {proxyPort=nn)}\" error","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsaffell","name":"gsaffell","key":"gsaffell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregg Saffell","active":true,"timeZone":"Etc/UTC"},"subtasks":[{"id":"12483084","key":"AMQ-1099","self":"https://issues.apache.org/jira/rest/api/2/issue/12483084","fields":{"summary":"HttpClientTransport does not allow configuring http proxy host/port","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsaffell","name":"gsaffell","key":"gsaffell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregg Saffell","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows XP","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481925/comment/12942192","id":"12942192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsaffell","name":"gsaffell","key":"gsaffell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregg Saffell","active":true,"timeZone":"Etc/UTC"},"body":"I did some debugging and the problem seems to be caused by org.apache.activemq.network.DiscoveryNetworkConnector.onServiceAdd() method where it calls \"connectUri = URISupport.applyParameters(connectUri, parameters);\" \n\nNote in the output included in the description of this issue, the \"INFO | Establishing network connection\" reports the query parameters twice and inccludes \")\" at the end.  That duplication and the addition of the \")\" to the end of the last parameter is caused by the applyParameters() call. I found that if I comment that call out, every thing works fine. (Commenting out that code is probably not the correct solution.  Maybe the problem is with what ever code populated the \"parameters\" HashMap that is being passed to the applyParameters() method? At any rate, I just wanted to note what I've found so far.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsaffell","name":"gsaffell","key":"gsaffell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregg Saffell","active":true,"timeZone":"Etc/UTC"},"created":"2010-02-10T22:43:29.664+0000","updated":"2010-02-10T22:43:29.664+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481925/comment/12938788","id":"12938788","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Fixed with svn revision 984826\n\nJust a note that it won't work with the url you're using\n\nstatic://(http://gstest-252:61617?proxyHost=gstest-252&amp;proxyPort=80)\n\nYou need to use\n\nstatic:(http://gstest-252:61617?proxyHost=gstest-252&amp;proxyPort=80)\n\nwhich is a properly formatted composite url.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-12T15:19:21.329+0000","updated":"2010-08-12T15:19:21.329+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481925/comment/12938666","id":"12938666","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsaffell","name":"gsaffell","key":"gsaffell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregg Saffell","active":true,"timeZone":"Etc/UTC"},"body":"Thanks, we will update our activemq.xml files accordingly.  I actually got that from the examples on http://activemq.apache.org/networks-of-brokers.html.  You'll note that the first couple of examples show it the way you suggest but the examples further down have \"static://.   ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsaffell","name":"gsaffell","key":"gsaffell","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gregg Saffell","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-16T14:55:04.390+0000","updated":"2010-08-16T14:55:04.390+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2598/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0b9rb:"}}