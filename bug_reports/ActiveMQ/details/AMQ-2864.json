{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481790","self":"https://issues.apache.org/jira/rest/api/2/issue/12481790","key":"AMQ-2864","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315624","id":"12315624","description":"Maintenance release for 5.4.0","name":"5.4.1","archived":false,"released":true,"releaseDate":"2010-09-21"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-10-27T14:08:09.713+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 29 16:54:00 UTC 2014","customfield_12310420":"14799","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_599528668_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-08-17T11:14:18.559+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2864/watchers","watchCount":4,"isWatching":false},"created":"2010-08-10T12:42:09.891+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-10-29T16:54:00.276+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10092","value":"Unit Test Broken","id":"10092"}],"description":"intermittent failure, activate of a durable sub and additions to the topic store may need a sync or async store and dispatch topics may need to be disabled.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"63771","customfield_12312823":null,"summary":"AMQ2149KahaDBTest - intermittent missing/out of order message with restart/failover and durable subs","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481790/comment/12938267","id":"12938267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"r986264 - disable concurrentStoreAndDispatchTopics by default as it can lead to cursor being out of order w.r.t to the store such that it is possible in the event that the cache becomes exhausted that some messages are skipped for dispatch till a restart.\nWith a sufficiently large usage limit the cache will always be valid and concurrentStoreAndDispatchTopics can be used to optimise out persistence for fast durable consumers.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-17T11:14:18.538+0000","updated":"2010-08-17T11:14:18.538+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481790/comment/14185154","id":"14185154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hekonsek","name":"hekonsek","key":"hekonsek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hekonsek&avatarId=25541","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hekonsek&avatarId=25541","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hekonsek&avatarId=25541","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hekonsek&avatarId=25541"},"displayName":"Henryk Konsek","active":true,"timeZone":"Etc/UTC"},"body":"What is \"sufficiently large usage limit\"? :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hekonsek","name":"hekonsek","key":"hekonsek","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hekonsek&avatarId=25541","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hekonsek&avatarId=25541","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hekonsek&avatarId=25541","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hekonsek&avatarId=25541"},"displayName":"Henryk Konsek","active":true,"timeZone":"Etc/UTC"},"created":"2014-10-27T14:08:09.713+0000","updated":"2014-10-27T14:08:09.713+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481790/comment/14187952","id":"14187952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asubbiah","name":"asubbiah","key":"asubbiah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Annamalai","active":true,"timeZone":"Etc/UTC"},"body":"Does this affect virtual topics?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asubbiah","name":"asubbiah","key":"asubbiah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Annamalai","active":true,"timeZone":"Etc/UTC"},"created":"2014-10-29T03:44:05.197+0000","updated":"2014-10-29T03:44:05.197+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481790/comment/14188295","id":"14188295","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"sufficiently large means that the cursor cache does not get exhausted. In other words, large enough that any backlog can remain in memory. With durable subs that are offline most of the time this will not be practical, so concurrent... is disabled.\n\nThis does not affect virtual topics b/c virtual topics are implemented as queues.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2014-10-29T12:18:52.949+0000","updated":"2014-10-29T12:18:52.949+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481790/comment/14188368","id":"14188368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asubbiah","name":"asubbiah","key":"asubbiah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Annamalai","active":true,"timeZone":"Etc/UTC"},"body":"Thank you Gary. That's what I would expect. So with concurrent store and dispatch on a virtual topic with persistent messages(multiple subscriber queues) , \n1. Does the producer gets released as soon as the message is published and broker gets a single copy of the message?\nOR\n2. Does the producer gets released, when the messages gets copied from VT to multiple subscriber queues and the consumers on the subscriber queues acks them.\n3. Whats the risk of loosing messages on a VT with concurrent store and dispatch enabled.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=asubbiah","name":"asubbiah","key":"asubbiah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Annamalai","active":true,"timeZone":"Etc/UTC"},"created":"2014-10-29T14:14:16.635+0000","updated":"2014-10-29T14:14:16.635+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481790/comment/14188564","id":"14188564","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"with vt: the producer gets released when a send is enqueued on each of the subscriber queues. there is no risk of message loss. The enqueue is sync, there is no message loss risk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2014-10-29T16:54:00.276+0000","updated":"2014-10-29T16:54:00.276+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2864/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ba8n:"}}