{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481461","self":"https://issues.apache.org/jira/rest/api/2/issue/12481461","key":"AMQ-496","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315607","id":"12315607","description":"Milestone 4","name":"4.0 M4","archived":false,"released":true,"releaseDate":"2006-01-20"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2006-01-20T00:48:51.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 20 00:48:51 UTC 2006","customfield_12310420":"43761","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_101995000_*|*_1_*:*_2_*:*_84523000_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2006-01-21T03:07:12.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-496/watchers","watchCount":1,"isWatching":false},"created":"2006-01-18T23:18:34.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlim","name":"jlim","key":"jlim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonas Lim","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-02-16T11:30:47.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"4.0 - reliable:tcp transport (SNAPSHOT 01-12-06) \n----------------------------- \n\n* If you shutdown the ActiveMQ server, Consumers and Producers spin 100% cpu \nIf you shutdown the ActiveMQ server, both my consumers and the producers will crank 100%. When the server is back, immediately everything will become okay again. I did a threadump of the JVM, and it wasn't blazingly obvious what was spinning all the cpu time. This is the closest I found: \n3XMTHREADINFO \"ActiveMQ Default Thread Pool Thread\" (TID:0x00002AAABF25EA00, sys_thread_t:0x00000000401101A8, state:CW, native ID:0x0000000040110208) prio=5 \n4XESTACKTRACE at java/lang/Thread.sleep(Native Method) \n4XESTACKTRACE at java/lang/Thread.sleep(Thread.java:943) \n4XESTACKTRACE at org/apache/activemq/transport/failover/FailoverTransport$2.iterate(FailoverTransport.java:154) \n4XESTACKTRACE at org/apache/activemq/thread/SimpleTaskRunner.runTask(SimpleTaskRunner.java:110) \n4XESTACKTRACE at org/apache/activemq/thread/SimpleTaskRunner.access$100(SimpleTaskRunner.java:25) \n4XESTACKTRACE at org/apache/activemq/thread/SimpleTaskRunner$1.run(SimpleTaskRunner.java:42) \n4XESTACKTRACE at edu/emory/mathcs/backport/java/util/concurrent/Executors$RunnableAdapter.call(Executors.java:431) \n4XESTACKTRACE at edu/emory/mathcs/backport/java/util/concurrent/FutureTask.run(FutureTask.java:166) \n4XESTACKTRACE at edu/emory/mathcs/backport/java/util/concurrent/ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:91) \n4XESTACKTRACE at edu/emory/mathcs/backport/java/util/concurrent/ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:198) \n4XESTACKTRACE at edu/emory/mathcs/backport/java/util/concurrent/ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:643) \n4XESTACKTRACE at edu/emory/mathcs/backport/java/util/concurrent/ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:668) \n4XESTACKTRACE at java/lang/Thread.run(Thread.java:816) \n\nHowever that's clearly sleeping. But, either way, something on my consumers and producers is spinning 100% cpu each. It makes moving my mouse slow because of the thread priorities :(. Obviously a big big problem if you have many consumers/producers on a single machine. Probably a simple fix. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"254630","customfield_12312823":null,"summary":"Failover transport can cause CPU spin","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481461/comment/12937427","id":"12937427","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"This issue is a repost from http://forums.logicblaze.com/posts/list/207.page \n\nJonas,\n\nIf you get a chance could you see if you could reproduce the issue reported.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2006-01-18T23:19:28.000+0000","updated":"2006-01-18T23:19:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481461/comment/12937402","id":"12937402","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlim","name":"jlim","key":"jlim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonas Lim","active":true,"timeZone":"Etc/UTC"},"body":"\nI created a producer/consumer based from the config that was given (ie. using  jndi, topic and queue are received synchronously, failover:tcp transport, etc) but can't seem to reproduce it. I ran my producer/consumer for a few minutes then   shutdown the broker .  The cpu for both my producer and consumer also went down.  Im testing this using  on  (svn head 01-19-06).  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jlim","name":"jlim","key":"jlim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonas Lim","active":true,"timeZone":"Etc/UTC"},"created":"2006-01-20T00:48:51.000+0000","updated":"2006-01-20T00:48:51.000+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-496/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i17yxr:"}}