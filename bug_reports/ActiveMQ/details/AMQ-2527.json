{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482581","self":"https://issues.apache.org/jira/rest/api/2/issue/12482581","key":"AMQ-2527","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315621","id":"12315621","description":"","name":"5.3.1","archived":false,"released":true,"releaseDate":"2010-03-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 09 21:11:14 UTC 2009","customfield_12310420":"74906","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_22036798_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2009-12-09T21:10:26.917+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2527/watchers","watchCount":0,"isWatching":false},"created":"2009-12-09T15:03:10.119+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-12-09T21:11:14.518+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Stack traces of all threads when the test is hanging. Looks like the issue is with concurrent access to the message properties hashmap during message copy.\n\n{code}\nActiveMQ Transport: tcp:///127.0.0.1:56744[1] where all\nmain:\n  [1] sun.misc.Unsafe.park (native method)\n  [2] java.util.concurrent.locks.LockSupport.parkNanos (LockSupport.java:213)\n  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos (AbstractQueuedSynchronizer.java:958)\n  [4] java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos (AbstractQueuedSynchronizer.java:1,250)\n  [5] java.util.concurrent.CountDownLatch.await (CountDownLatch.java:264)\n  [6] org.apache.activemq.broker.TransportConnection.stop (TransportConnection.java:905)\n  [7] org.apache.activemq.util.ServiceStopper.stop (ServiceStopper.java:41)\n  [8] org.apache.activemq.broker.TransportConnector.stop (TransportConnector.java:281)\n  [9] org.apache.activemq.util.ServiceStopper.stop (ServiceStopper.java:41)\n  [10] org.apache.activemq.broker.BrokerService.stopAllConnectors (BrokerService.java:1,536)\n  [11] org.apache.activemq.broker.BrokerService.stop (BrokerService.java:508)\n  [12] org.apache.activemq.bugs.AMQ2021Test.tearDown (AMQ2021Test.java:94)\n  [13] junit.framework.TestCase.runBare (TestCase.java:140)\n  [14] junit.framework.TestResult$1.protect (TestResult.java:110)\n  [15] junit.framework.TestResult.runProtected (TestResult.java:128)\n  [16] junit.framework.TestResult.run (TestResult.java:113)\n  [17] junit.framework.TestCase.run (TestCase.java:124)\n  [18] junit.framework.TestSuite.runTest (TestSuite.java:232)\n  [19] junit.framework.TestSuite.run (TestSuite.java:227)\n  [20] org.junit.internal.runners.JUnit38ClassRunner.run (JUnit38ClassRunner.java:79)\n  [21] org.apache.maven.surefire.junit4.JUnit4TestSet.execute (JUnit4TestSet.java:62)\n  [22] org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet (AbstractDirectoryTestSuite.java:140)\n  [23] org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute (AbstractDirectoryTestSuite.java:165)\n  [24] org.apache.maven.surefire.Surefire.run (Surefire.java:107)\n  [25] sun.reflect.NativeMethodAccessorImpl.invoke0 (native method)\n  [26] sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:39)\n  [27] sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:37)\n  [28] java.lang.reflect.Method.invoke (Method.java:599)\n  [29] org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess (SurefireBooter.java:289)\n  [30] org.apache.maven.surefire.booter.SurefireBooter.main (SurefireBooter.java:1,005)\nJIT Compilation Thread:\nSignal Dispatcher:\n  [1] com.ibm.misc.SignalDispatcher.waitForSignal (native method)\n  [2] com.ibm.misc.SignalDispatcher.run (SignalDispatcher.java:54)\nGc Slave Thread:\nGc Slave Thread:\nGc Slave Thread:\nFinalizer thread:\nActiveMQ Scheduler:\n  [1] java.lang.Object.wait (native method)\n  [2] java.lang.Object.wait (Object.java:196)\n  [3] java.util.Timer$TimerImpl.run (Timer.java:230)\nActiveMQ Data File Writer:\n  [1] java.lang.Object.wait (native method)\n  [2] java.lang.Object.wait (Object.java:167)\n  [3] org.apache.activemq.kaha.impl.async.NIODataFileAppender.processQueue (NIODataFileAppender.java:79)\n  [4] org.apache.activemq.kaha.impl.async.DataFileAppender$2.run (DataFileAppender.java:234)\nMemoryPoolMXBean notification dispatcher:\n  [1] com.ibm.lang.management.MemoryNotificationThread.processNotificationLoop (native method)\n  [2] com.ibm.lang.management.MemoryNotificationThread.run (MemoryNotificationThread.java:55)\nOperatingSystemMXBean notification dispatcher:\n  [1] com.ibm.lang.management.OperatingSystemNotificationThread.processNotificationLoop (native method)\n  [2] com.ibm.lang.management.OperatingSystemNotificationThread.run (OperatingSystemNotificationThread.java:39)\nRMI Scheduler(0):\n  [1] sun.misc.Unsafe.park (native method)\n  [2] java.util.concurrent.locks.LockSupport.parkNanos (LockSupport.java:213)\n  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos (AbstractQueuedSynchronizer.java:1,974)\n  [4] java.util.concurrent.DelayQueue.take (DelayQueue.java:175)\n  [5] java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take (ScheduledThreadPoolExecutor.java:593)\n  [6] java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take (ScheduledThreadPoolExecutor.java:586)\n  [7] java.util.concurrent.ThreadPoolExecutor.getTask (ThreadPoolExecutor.java:957)\n  [8] java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:917)\n  [9] java.lang.Thread.run (Thread.java:735)\nRMI TCP Accept-1099:\n  [1] java.net.PlainSocketImpl.socketAccept (native method)\n  [2] java.net.PlainSocketImpl.accept (PlainSocketImpl.java:414)\n  [3] java.net.ServerSocket.implAccept (ServerSocket.java:464)\n  [4] java.net.ServerSocket.accept (ServerSocket.java:432)\n  [5] sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop (TCPTransport.java:381)\n  [6] sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run (TCPTransport.java:353)\n  [7] java.lang.Thread.run (Thread.java:735)\nRMI TCP Accept-0:\n  [1] java.net.PlainSocketImpl.socketAccept (native method)\n  [2] java.net.PlainSocketImpl.accept (PlainSocketImpl.java:414)\n  [3] java.net.ServerSocket.implAccept (ServerSocket.java:464)\n  [4] java.net.ServerSocket.accept (ServerSocket.java:432)\n  [5] sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop (TCPTransport.java:381)\n  [6] sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run (TCPTransport.java:353)\n  [7] java.lang.Thread.run (Thread.java:735)\nRMI Reaper:\n  [1] java.lang.Object.wait (native method)\n  [2] java.lang.Object.wait (Object.java:196)\n  [3] java.lang.ref.ReferenceQueue.remove (ReferenceQueue.java:107)\n  [4] java.lang.ref.ReferenceQueue.remove (ReferenceQueue.java:79)\n  [5] sun.rmi.transport.ObjectTable$Reaper.run (ObjectTable.java:350)\n  [6] java.lang.Thread.run (Thread.java:735)\nGC Daemon:\n  [1] java.lang.Object.wait (native method)\n  [2] java.lang.Object.wait (Object.java:196)\n  [3] sun.misc.GC$Daemon.run (GC.java:112)\nRMI RenewClean-[10.65.4.113:56702]:\n  [1] java.lang.Object.wait (native method)\n  [2] java.lang.Object.wait (Object.java:196)\n  [3] java.lang.ref.ReferenceQueue.remove (ReferenceQueue.java:107)\n  [4] sun.rmi.transport.DGCClient$EndpointEntry$RenewCleanThread.run (DGCClient.java:528)\n  [5] java.lang.Thread.run (Thread.java:735)\nActiveMQ Transport: tcp://localhost/127.0.0.1:61616:\n  [1] java.net.SocketInputStream.socketRead0 (native method)\n  [2] java.net.SocketInputStream.read (SocketInputStream.java:140)\n  [3] org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill (TcpBufferedInputStream.java:50)\n  [4] org.apache.activemq.transport.tcp.TcpBufferedInputStream.read (TcpBufferedInputStream.java:58)\n  [5] java.io.DataInputStream.readInt (DataInputStream.java:381)\n  [6] org.apache.activemq.openwire.OpenWireFormat.unmarshal (OpenWireFormat.java:272)\n  [7] org.apache.activemq.transport.tcp.TcpTransport.readCommand (TcpTransport.java:210)\n  [8] org.apache.activemq.transport.tcp.TcpTransport.doRun (TcpTransport.java:202)\n  [9] org.apache.activemq.transport.tcp.TcpTransport.run (TcpTransport.java:185)\n  [10] java.lang.Thread.run (Thread.java:735)\nActiveMQ Transport: tcp://localhost/127.0.0.1:61616:\n  [1] java.net.SocketInputStream.socketRead0 (native method)\n  [2] java.net.SocketInputStream.read (SocketInputStream.java:140)\n  [3] org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill (TcpBufferedInputStream.java:50)\n  [4] org.apache.activemq.transport.tcp.TcpBufferedInputStream.read (TcpBufferedInputStream.java:58)\n  [5] java.io.DataInputStream.readInt (DataInputStream.java:381)\n  [6] org.apache.activemq.openwire.OpenWireFormat.unmarshal (OpenWireFormat.java:272)\n  [7] org.apache.activemq.transport.tcp.TcpTransport.readCommand (TcpTransport.java:210)\n  [8] org.apache.activemq.transport.tcp.TcpTransport.doRun (TcpTransport.java:202)\n  [9] org.apache.activemq.transport.tcp.TcpTransport.run (TcpTransport.java:185)\n  [10] java.lang.Thread.run (Thread.java:735)\nActiveMQ Transport: tcp:///127.0.0.1:56744:\n  [1] java.util.HashMap.putAllImpl (HashMap.java:679)\n  [2] java.util.HashMap.<init> (HashMap.java:369)\n  [3] org.apache.activemq.command.Message.copy (Message.java:120)\n  [4] org.apache.activemq.command.ActiveMQMessage.copy (ActiveMQMessage.java:64)\n  [5] org.apache.activemq.command.ActiveMQTextMessage.copy (ActiveMQTextMessage.java:57)\n  [6] org.apache.activemq.command.ActiveMQTextMessage.copy (ActiveMQTextMessage.java:52)\n  [7] org.apache.activemq.broker.region.RegionBroker.sendToDeadLetterQueue (RegionBroker.java:710)\n  [8] org.apache.activemq.broker.region.PrefetchSubscription.sendToDLQ (PrefetchSubscription.java:462)\n  [9] org.apache.activemq.broker.region.PrefetchSubscription.acknowledge (PrefetchSubscription.java:365)\n  [10] org.apache.activemq.broker.region.AbstractRegion.acknowledge (AbstractRegion.java:369)\n  [11] org.apache.activemq.broker.region.RegionBroker.acknowledge (RegionBroker.java:470)\n  [12] org.apache.activemq.broker.TransactionBroker.acknowledge (TransactionBroker.java:195)\n  [13] org.apache.activemq.broker.BrokerFilter.acknowledge (BrokerFilter.java:74)\n  [14] org.apache.activemq.broker.BrokerFilter.acknowledge (BrokerFilter.java:74)\n  [15] org.apache.activemq.broker.MutableBrokerFilter.acknowledge (MutableBrokerFilter.java:85)\n  [16] org.apache.activemq.broker.TransportConnection.processMessageAck (TransportConnection.java:466)\n  [17] org.apache.activemq.command.MessageAck.visit (MessageAck.java:205)\n  [18] org.apache.activemq.broker.TransportConnection.service (TransportConnection.java:309)\n  [19] org.apache.activemq.broker.TransportConnection$1.onCommand (TransportConnection.java:179)\n  [20] org.apache.activemq.transport.TransportFilter.onCommand (TransportFilter.java:68)\n  [21] org.apache.activemq.transport.WireFormatNegotiator.onCommand (WireFormatNegotiator.java:113)\n  [22] org.apache.activemq.transport.InactivityMonitor.onCommand (InactivityMonitor.java:210)\n  [23] org.apache.activemq.transport.TransportSupport.doConsume (TransportSupport.java:84)\n  [24] org.apache.activemq.transport.tcp.TcpTransport.doRun (TcpTransport.java:203)\n  [25] org.apache.activemq.transport.tcp.TcpTransport.run (TcpTransport.java:185)\n  [26] java.lang.Thread.run (Thread.java:735)\nActiveMQ Transport: tcp:///127.0.0.1:56733:\n  [1] java.util.HashMap.putAllImpl (HashMap.java:679)\n  [2] java.util.HashMap.<init> (HashMap.java:369)\n  [3] org.apache.activemq.command.Message.copy (Message.java:120)\n  [4] org.apache.activemq.command.ActiveMQMessage.copy (ActiveMQMessage.java:64)\n  [5] org.apache.activemq.command.ActiveMQTextMessage.copy (ActiveMQTextMessage.java:57)\n  [6] org.apache.activemq.command.ActiveMQTextMessage.copy (ActiveMQTextMessage.java:52)\n  [7] org.apache.activemq.broker.region.RegionBroker.sendToDeadLetterQueue (RegionBroker.java:710)\n  [8] org.apache.activemq.broker.region.PrefetchSubscription.sendToDLQ (PrefetchSubscription.java:462)\n  [9] org.apache.activemq.broker.region.PrefetchSubscription.acknowledge (PrefetchSubscription.java:365)\n  [10] org.apache.activemq.broker.region.AbstractRegion.acknowledge (AbstractRegion.java:369)\n  [11] org.apache.activemq.broker.region.RegionBroker.acknowledge (RegionBroker.java:470)\n  [12] org.apache.activemq.broker.TransactionBroker.acknowledge (TransactionBroker.java:195)\n  [13] org.apache.activemq.broker.BrokerFilter.acknowledge (BrokerFilter.java:74)\n  [14] org.apache.activemq.broker.BrokerFilter.acknowledge (BrokerFilter.java:74)\n  [15] org.apache.activemq.broker.MutableBrokerFilter.acknowledge (MutableBrokerFilter.java:85)\n  [16] org.apache.activemq.broker.TransportConnection.processMessageAck (TransportConnection.java:466)\n  [17] org.apache.activemq.command.MessageAck.visit (MessageAck.java:205)\n  [18] org.apache.activemq.broker.TransportConnection.service (TransportConnection.java:309)\n  [19] org.apache.activemq.broker.TransportConnection$1.onCommand (TransportConnection.java:179)\n  [20] org.apache.activemq.transport.TransportFilter.onCommand (TransportFilter.java:68)\n  [21] org.apache.activemq.transport.WireFormatNegotiator.onCommand (WireFormatNegotiator.java:113)\n  [22] org.apache.activemq.transport.InactivityMonitor.onCommand (InactivityMonitor.java:210)\n  [23] org.apache.activemq.transport.TransportSupport.doConsume (TransportSupport.java:84)\n  [24] org.apache.activemq.transport.tcp.TcpTransport.doRun (TcpTransport.java:203)\n  [25] org.apache.activemq.transport.tcp.TcpTransport.run (TcpTransport.java:185)\n  [26] java.lang.Thread.run (Thread.java:735)\nInactivityMonitor ReadCheck:\n  [1] java.lang.Object.wait (native method)\n  [2] java.lang.Object.wait (Object.java:196)\n  [3] java.util.Timer$TimerImpl.run (Timer.java:230)\nInactivityMonitor WriteCheck:\n  [1] java.lang.Object.wait (native method)\n  [2] java.lang.Object.wait (Object.java:196)\n  [3] java.util.Timer$TimerImpl.run (Timer.java:230)\nActiveMQ Transport: tcp://localhost/127.0.0.1:61616:\n  [1] java.net.SocketInputStream.socketRead0 (native method)\n  [2] java.net.SocketInputStream.read (SocketInputStream.java:140)\n  [3] org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill (TcpBufferedInputStream.java:50)\n  [4] org.apache.activemq.transport.tcp.TcpBufferedInputStream.read (TcpBufferedInputStream.java:58)\n  [5] java.io.DataInputStream.readInt (DataInputStream.java:381)\n  [6] org.apache.activemq.openwire.OpenWireFormat.unmarshal (OpenWireFormat.java:272)\n  [7] org.apache.activemq.transport.tcp.TcpTransport.readCommand (TcpTransport.java:210)\n  [8] org.apache.activemq.transport.tcp.TcpTransport.doRun (TcpTransport.java:202)\n  [9] org.apache.activemq.transport.tcp.TcpTransport.run (TcpTransport.java:185)\n  [10] java.lang.Thread.run (Thread.java:735)\nActiveMQ Transport: tcp:///127.0.0.1:56754:\n  [1] org.apache.activemq.broker.region.PrefetchSubscription.dispatchPending (PrefetchSubscription.java:582)\n  [2] org.apache.activemq.broker.region.PrefetchSubscription.add (PrefetchSubscription.java:158)\n  [3] org.apache.activemq.broker.region.DurableTopicSubscription.add (DurableTopicSubscription.java:199)\n  [4] org.apache.activemq.broker.region.policy.SimpleDispatchPolicy.dispatch (SimpleDispatchPolicy.java:49)\n  [5] org.apache.activemq.broker.region.Topic.dispatch (Topic.java:588)\n  [6] org.apache.activemq.broker.region.Topic.doMessageSend (Topic.java:442)\n  [7] org.apache.activemq.broker.region.Topic.send (Topic.java:376)\n  [8] org.apache.activemq.broker.region.AbstractRegion.send (AbstractRegion.java:354)\n  [9] org.apache.activemq.broker.region.RegionBroker.send (RegionBroker.java:445)\n  [10] org.apache.activemq.broker.TransactionBroker.send (TransactionBroker.java:227)\n  [11] org.apache.activemq.broker.BrokerFilter.send (BrokerFilter.java:126)\n  [12] org.apache.activemq.broker.CompositeDestinationBroker.send (CompositeDestinationBroker.java:95)\n  [13] org.apache.activemq.broker.MutableBrokerFilter.send (MutableBrokerFilter.java:133)\n  [14] org.apache.activemq.broker.TransportConnection.processMessage (TransportConnection.java:459)\n  [15] org.apache.activemq.command.ActiveMQMessage.visit (ActiveMQMessage.java:631)\n  [16] org.apache.activemq.broker.TransportConnection.service (TransportConnection.java:309)\n  [17] org.apache.activemq.broker.TransportConnection$1.onCommand (TransportConnection.java:179)\n  [18] org.apache.activemq.transport.TransportFilter.onCommand (TransportFilter.java:68)\n  [19] org.apache.activemq.transport.WireFormatNegotiator.onCommand (WireFormatNegotiator.java:113)\n  [20] org.apache.activemq.transport.InactivityMonitor.onCommand (InactivityMonitor.java:210)\n  [21] org.apache.activemq.transport.TransportSupport.doConsume (TransportSupport.java:84)\n  [22] org.apache.activemq.transport.tcp.TcpTransport.doRun (TcpTransport.java:203)\n  [23] org.apache.activemq.transport.tcp.TcpTransport.run (TcpTransport.java:185)\n  [24] java.lang.Thread.run (Thread.java:735)\nQueueThread:queue://ActiveMQ.DLQ:\n  [1] sun.misc.Unsafe.park (native method)\n  [2] java.util.concurrent.locks.LockSupport.park (LockSupport.java:173)\n  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await (AbstractQueuedSynchronizer.java:1,936)\n  [4] java.util.concurrent.LinkedBlockingQueue.take (LinkedBlockingQueue.java:369)\n  [5] java.util.concurrent.ThreadPoolExecutor.getTask (ThreadPoolExecutor.java:957)\n  [6] java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:917)\n  [7] java.lang.Thread.run (Thread.java:735)\nActiveMQ Transport Stopper: /127.0.0.1:56733:\n  [1] sun.misc.Unsafe.park (native method)\n  [2] java.util.concurrent.locks.LockSupport.park (LockSupport.java:173)\n  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt (AbstractQueuedSynchronizer.java:758)\n  [4] java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued (AbstractQueuedSynchronizer.java:789)\n  [5] java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire (AbstractQueuedSynchronizer.java:1,125)\n  [6] java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock (ReentrantReadWriteLock.java:818)\n  [7] org.apache.activemq.broker.TransportConnection$3.run (TransportConnection.java:931)\nInactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@4700470:\n  [1] sun.misc.Unsafe.park (native method)\n  [2] java.util.concurrent.locks.LockSupport.parkNanos (LockSupport.java:213)\n  [3] java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill (SynchronousQueue.java:435)\n  [4] java.util.concurrent.SynchronousQueue$TransferStack.transfer (SynchronousQueue.java:334)\n  [5] java.util.concurrent.SynchronousQueue.poll (SynchronousQueue.java:885)\n  [6] java.util.concurrent.ThreadPoolExecutor.getTask (ThreadPoolExecutor.java:955)\n  [7] java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:917)\n  [8] java.lang.Thread.run (Thread.java:735)\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461346","id":"12461346","filename":"AMQ-2527.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-12-09T15:08:02.221+0000","size":12284,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461346/AMQ-2527.patch.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"159816","customfield_12312823":null,"summary":"Intermittent hang of AMQ2102Test with ibm jdk - demonstrated sync issue with message properties and  dlq processing for topics","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"subtasks":[{"id":"12482850","key":"AMQ-1112","self":"https://issues.apache.org/jira/rest/api/2/issue/12482850","fields":{"summary":"remove expired messages from Store and update Message cursors","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482581/comment/12941918","id":"12941918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"fix attached and a bunch of mods to tests and waitForSlave timeout addition that resolve a bunch of intermittent failures on slow machines. Thanks Peter Jones","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-12-09T15:08:02.280+0000","updated":"2009-12-09T15:08:02.280+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482581/comment/12941927","id":"12941927","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"resolved in r888974","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-12-09T21:10:26.748+0000","updated":"2009-12-09T21:10:26.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482581/comment/12941926","id":"12941926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"issue introduced by changes for AMQ-1112","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-12-09T21:11:14.496+0000","updated":"2009-12-09T21:11:14.496+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2527/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rpr3:"}}