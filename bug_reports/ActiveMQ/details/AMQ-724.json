{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482206","self":"https://issues.apache.org/jira/rest/api/2/issue/12482206","key":"AMQ-724","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315619","id":"12315619","description":"","name":"5.2.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-07-02T20:43:32.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Dec 12 12:41:48 UTC 2008","customfield_12310420":"84348","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3273430000_*|*_5_*:*_2_*:*_13425208000_*|*_4_*:*_1_*:*_50157674615","customfield_12312321":null,"resolutiondate":"2008-07-07T19:25:28.615+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-724/watchers","watchCount":4,"isWatching":false},"created":"2006-05-26T00:13:36.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315610","id":"12315610","name":"4.0","archived":false,"released":true}],"issuelinks":[{"id":"12335005","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12335005","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12482841","key":"AMQ-844","self":"https://issues.apache.org/jira/rest/api/2/issue/12482841","fields":{"summary":"tcp connections hang","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12334957","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334957","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12482231","key":"AMQ-1067","self":"https://issues.apache.org/jira/rest/api/2/issue/12482231","fields":{"summary":"Stomp consumer not removed if client does not send disconnect message.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12334992","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334992","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12482239","key":"AMQ-1805","self":"https://issues.apache.org/jira/rest/api/2/issue/12482239","fields":{"summary":"Persistent message leak when broker run out of disk space","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-12-12T12:41:48.618+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"If Stomp client crashes (or disconnects unexpectedly) when there are unconsumed messages in the broker, the subscriptions are not removed from the broker and some phantom consumer is still consuming messages. If you connect other client, it receives only half messages (other half messages goes to that phantom consumer still left afrter client disconnect). There are no error logs in activemq logs. We are using stomp client, whith client acknowledge mode, so on broker restart, all messages are delivered properly. You can also see in jmx console, that subscription still exists whithout any connection left.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460793","id":"12460793","filename":"dumpemu4.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-28T11:46:07.741+0000","size":40538,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12460793/dumpemu4.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460819","id":"12460819","filename":"patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-28T14:26:19.555+0000","size":633,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460819/patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460572","id":"12460572","filename":"patchInactivityMonitor.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-30T18:30:07.714+0000","size":769,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460572/patchInactivityMonitor.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460888","id":"12460888","filename":"SessionState.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"created":"2006-12-05T06:45:57.000+0000","size":321,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460888/SessionState.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460763","id":"12460763","filename":"StompScriptComplete.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mronner","name":"mronner","key":"mronner","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Martin Ronner","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-29T14:25:10.801+0000","size":119,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460763/StompScriptComplete.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460545","id":"12460545","filename":"StompScriptNoDisconnect.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mronner","name":"mronner","key":"mronner","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Martin Ronner","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-29T14:25:11.923+0000","size":105,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460545/StompScriptNoDisconnect.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460784","id":"12460784","filename":"StompSubscriptionRemoveTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"created":"2006-05-29T07:17:49.000+0000","size":6906,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460784/StompSubscriptionRemoveTest.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161735","customfield_12312823":null,"summary":"Stomp client is not removed from the broker on client disconnect","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"subtasks":[{"id":"12482078","key":"AMQ-1300","self":"https://issues.apache.org/jira/rest/api/2/issue/12482078","fields":{"summary":"Patch for the 4.1 branch","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux, Java 1.5.0_06","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12937882","id":"12937882","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"body":"TestCase which shows this bug - takes time to complete.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"created":"2006-05-29T07:17:49.000+0000","updated":"2006-05-29T07:17:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938048","id":"12938048","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"body":"The problem I found is whith both stomp transport and broker iself.\nSomehow Stomp subscription starts prefetching and sending messages before it adds Consumer to the broker. If connection during this prefetching is lost, connection is removed, but subscription is still added.\n\nThere is quick  hack for that in AbstractConnection.processAddConsumer(): \n\n    public Response processAddConsumer(ConsumerInfo info) throws Exception {\n        SessionId sessionId = info.getConsumerId().getParentId();\n        ConnectionId connectionId = sessionId.getParentId();\n        ConnectionState cs = lookupConnectionState(connectionId);\n        SessionState ss = cs.getSessionState(sessionId);\n        if( ss == null )\n            throw new IllegalStateException(\"Cannot add a consumer to a session that had not been registered: \"+sessionId);\n        log.trace(\"Adding consumer to broker. Stomp client blocks here - waiting for prefetching to complete.\");\n        broker.addConsumer(cs.getContext(), info);\n        try {\n        \t\tlookupConnectionState(connectionId);\n        } catch (IllegalStateException ex) {\n        \t\t// If during broker.addConsumer() exception occures, connection is destroyed. We need to remove consumer\n        \t\tlog.warn(\"Cannot find connection after adding subscription! Probably error when prefetching messages\", ex);\n        \t\tbroker.removeConsumer(cs.getContext(), info);\n        \t\tthrow ex;\n        }\n        ss.addConsumer(info);\n        return null;\n    }","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"created":"2006-05-29T07:24:44.000+0000","updated":"2006-05-29T07:24:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12937810","id":"12937810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Expanded your 'hack' so that it's less hacky.  The connection and session state now keep track if they are being shutdown.\n\nFix committed to trunk revision 418592.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2006-07-02T20:43:32.000+0000","updated":"2006-07-02T20:43:32.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12936304","id":"12936304","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Fix apply to 4.0 trunk also.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2006-07-02T21:30:46.000+0000","updated":"2006-07-02T21:30:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938432","id":"12938432","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snacktime","name":"snacktime","key":"snacktime","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Ochs","active":true,"timeZone":"Etc/UTC"},"body":"This is not fixed as of 4.0.2 RC4, or at least there is another bug with the exact same behavior.  Wasn't hard to duplicate either, just kill a stomp connection while it's reading and bam, phantom consumer. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=snacktime","name":"snacktime","key":"snacktime","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Ochs","active":true,"timeZone":"Etc/UTC"},"created":"2006-10-13T04:37:24.000+0000","updated":"2006-10-13T04:37:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938670","id":"12938670","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"body":"I wonder how this bug has slipped through unit tests. I'm adding patch for org.apache.activemq.state.SessionState","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"created":"2006-12-05T06:44:14.000+0000","updated":"2006-12-05T06:44:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938657","id":"12938657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"body":"This patch is against 4.0 branch. This bug is also in 4.1 branch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"created":"2006-12-05T06:45:57.000+0000","updated":"2006-12-05T06:45:57.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12936760","id":"12936760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"body":"Is is possible for the provided patch to be applied for 4.2 version?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-12T06:23:02.250+0000","updated":"2007-01-12T06:23:02.250+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938759","id":"12938759","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"When using the C++ Openwire client I'm having the same problems when the client crashes.\n\nI'm testing against the current SVN repo version.\n\nAfter 5 runs I have 5 pending openwire connections, although \"netstat -t\"\nshows that they are closed.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-28T11:44:53.166+0000","updated":"2007-01-28T11:44:53.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938813","id":"12938813","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"Pending connections although the TCP connections are really closed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-28T11:46:07.871+0000","updated":"2007-01-28T11:46:07.871+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938734","id":"12938734","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"PATCH\n======\n\nNot sure if it is this simple but this patch seems to work OK.\n\nThe connections are now freeed when a fresh client connects...\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-28T14:26:23.835+0000","updated":"2007-01-28T14:26:23.835+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938753","id":"12938753","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"Retried the tests without the patch applied but see no difference now, so you can ignore it.\nApparently a fix was already in the SVN version, my  patch is a no-op. :-/\n\nTerminating the Stomp connections in the current SVN version seems to work OK.\n\nTerminating OpenWire connections from a  CPP client still leaves connections hanging.\n\nI'll try to investigate this problem further.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-29T05:41:33.651+0000","updated":"2007-01-29T05:41:33.651+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938793","id":"12938793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"body":"There is a clear bug in SessionState class. EIther you have to fix this bug, o remove SessionState functionality, if it's not used.\nWhen broker shuts down session, it sets shutdown flag on session state. But currently in the code instead of true it sets false (which means that session is not shut down).\nThe bug is not releted with connections which are not removed. The problem occures when connection is removed, but subscription is not. It's not easy to reproduce this bug. You have to kill stomp connection during message prefetch (within a second after connection is established and subscribtion is made).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jurna","name":"jurna","key":"jurna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Danielius Jurna","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-29T06:40:30.190+0000","updated":"2007-01-29T06:40:30.190+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938702","id":"12938702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mronner","name":"mronner","key":"mronner","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Martin Ronner","active":true,"timeZone":"Etc/UTC"},"body":"That's how you can reproduce it:\n\n{{$ netcat -v -c localhost 61613 < StompScriptComplete.txt}}\n*CONNECT*, *SEND* a message and *DISCONNECT* properly.\n\n{{$ netcat -v -c localhost 61613 < StompScriptNoDisconnect.txt}}\n*CONNECT*, *SEND* a message and closes the connection {color:red}without{color} *DISCONNECT*.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mronner","name":"mronner","key":"mronner","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Martin Ronner","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-29T14:25:12.947+0000","updated":"2007-01-29T14:25:12.947+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938742","id":"12938742","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mronner","name":"mronner","key":"mronner","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Martin Ronner","active":true,"timeZone":"Etc/UTC"},"body":"Try {{netcat}} also without {{-c}} (close connection on EOF from stdin)...\n\nThe connection will be closed by the server in the first example.\nIn the second example you have to break it {{^C}} manually. This leaves an open session on the server.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mronner","name":"mronner","key":"mronner","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Martin Ronner","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-30T10:40:45.201+0000","updated":"2007-01-30T10:40:45.201+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12936439","id":"12936439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"I'm confused. When I try the netcat example with NoDisconnect in the current SVN version\neverything is rock solid.\n\nWhen I interrupt a C++ OpenWire client than I get non closed connections.\n\nI found a possible cure for the last problem. The InactivityMonitor code reads:\n\npublic void onException(IOException error) {\n    \tif( monitorStarted.get() ) {\n\t        stopMonitorThreads();\n\t        getTransportListener().onException(error);\n    \t}\n    }\n\nSo if monitorStarted is false the EOFException is completely ignored!\nI assume it should be:\n\npublic void onException(IOException error) {\n    \tif( monitorStarted.get() ) {\n\t        stopMonitorThreads();\n    \t}\n    \tgetTransportListener().onException(error); // tom.vijlbrief\n    }\n\n\nAttached a patch. With this patch the OpenWire sessions are closed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-30T18:29:02.365+0000","updated":"2007-01-30T18:29:02.365+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12938752","id":"12938752","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"body":"Patch for pending OpenWire connections","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tvijlbrief","name":"tvijlbrief","key":"tvijlbrief","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Vijlbrief","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-30T18:30:07.891+0000","updated":"2007-01-30T18:30:07.891+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12936375","id":"12936375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"I've just applied Tom's latest patch for OpenWire connections - thanks Tom!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-23T06:04:25.796+0000","updated":"2007-02-23T06:04:25.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12939935","id":"12939935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"The associated patches no longer look valid for the current 5.2/trunk codebase.\nYou can on the broker url in the broker config to define options to directly close the sockets - instead of using a separate thread in 5.2 - \ne.g tcp://localhost:61616?socket.closeAsync=false","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-07T19:25:28.596+0000","updated":"2008-07-07T19:25:28.596+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12940551","id":"12940551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfrugia","name":"kfrugia","key":"kfrugia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kirby Frugia","active":true,"timeZone":"Etc/UTC"},"body":"Is there a similar option to socket.closeAsync for activemq cpp?  Is this documented anywhere?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfrugia","name":"kfrugia","key":"kfrugia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kirby Frugia","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-10T19:27:12.299+0000","updated":"2008-12-10T19:27:12.299+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12940580","id":"12940580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"socket.closeAsync is a broker-side configuration option, so it should work with cpp as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2008-12-11T14:37:01.847+0000","updated":"2008-12-11T14:37:01.847+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12940557","id":"12940557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfrugia","name":"kfrugia","key":"kfrugia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kirby Frugia","active":true,"timeZone":"Etc/UTC"},"body":"Ok.  It would be nice if this was documented in the activemq cpp documentation.  Other URI options are documented.  I was looking for something like this, but was unaware this was an option.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfrugia","name":"kfrugia","key":"kfrugia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kirby Frugia","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-11T16:48:29.838+0000","updated":"2008-12-11T16:48:29.838+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482206/comment/12940553","id":"12940553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"I've updated tcp transport reference page (http://cwiki.apache.org/confluence/display/ACTIVEMQ/TCP+Transport+Reference). Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2008-12-12T12:41:48.553+0000","updated":"2008-12-12T12:41:48.553+0000"}],"maxResults":23,"total":23,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-724/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s1lj:"}}