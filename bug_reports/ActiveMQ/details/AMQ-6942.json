{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13149297","self":"https://issues.apache.org/jira/rest/api/2/issue/13149297","key":"AMQ-6942","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-07-22T11:28:40.836+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Jul 22 11:28:40 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6942/watchers","watchCount":2,"isWatching":false},"created":"2018-03-31T12:41:25.388+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341947","id":"12341947","name":"5.15.3","archived":false,"released":true,"releaseDate":"2018-02-01"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-07-22T11:28:40.836+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12333246","id":"12333246","name":"Command Line Tools"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"In the command line tool {{activemq}}, line 387 reads\r\n{code:java}\r\nRET=\"`ps -p \"${ACTIVEMQ_PID}\"|grep java`\"\r\n{code}\r\nThis does not work if {{PS_FORMAT}} is redefined. A fix would be to unset {{PS_FORMAT}} just before running this line. I just wonder whether this kind of test is sensible anyway. It seems to be an attempt to make sure not to kill a process that by accident acquired the same pid long after activemq was killed. Yet testing for {{java}} is no guarantee either. \r\n\r\nDepending on what the expectation on stability on ill-defined Linux/Unix-environments is, one could argue that PS_FORMAT should not be messed with. But then it would be good if at least the API-shutdown is tried first and only the {{kill}} is not performed if the above grep fails.\r\n\r\n ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Shell script stop command does not work if PS_FORMAT is redefined","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haraldk","name":"haraldk","key":"haraldk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=haraldk&avatarId=35128","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=haraldk&avatarId=35128","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=haraldk&avatarId=35128","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=haraldk&avatarId=35128"},"displayName":"Harald Kirsch","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haraldk","name":"haraldk","key":"haraldk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=haraldk&avatarId=35128","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=haraldk&avatarId=35128","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=haraldk&avatarId=35128","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=haraldk&avatarId=35128"},"displayName":"Harald Kirsch","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Not sure this is relevant. The problem describe occurs because {{PS_FORMAT}} is redefined on the specific machines I am using activemq.\r\n\r\n% cat /etc/lsb-release\r\nDISTRIB_ID=LinuxMint\r\nDISTRIB_RELEASE=17.2\r\nDISTRIB_CODENAME=rafaela\r\nDISTRIB_DESCRIPTION=\"Linux Mint 17.2 Rafaela\"","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149297/comment/16551980","id":"16551980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=frankanstine","name":"frankanstine","key":"frankanstine","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34059","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34059","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34059","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34059"},"displayName":"Abhinav Jha","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi Team,\r\n\r\nI am interested in taking up this bug. I am starting with the project and it would be great if someone could help me get going.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=frankanstine","name":"frankanstine","key":"frankanstine","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34059","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34059","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34059","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34059"},"displayName":"Abhinav Jha","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-07-22T11:28:40.836+0000","updated":"2018-07-22T11:28:40.836+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6942/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3s0k7:"}}