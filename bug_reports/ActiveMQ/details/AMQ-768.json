{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481758","self":"https://issues.apache.org/jira/rest/api/2/issue/12481758","key":"AMQ-768","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-06-21T21:42:30.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Jul 02 22:02:33 UTC 2006","customfield_12310420":"84334","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_973981000_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2006-07-02T22:03:02.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-768/watchers","watchCount":1,"isWatching":false},"created":"2006-06-21T15:30:01.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315610","id":"12315610","name":"4.0","archived":false,"released":true}],"issuelinks":[{"id":"12334944","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334944","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12481778","key":"AMQ-789","self":"https://issues.apache.org/jira/rest/api/2/issue/12481778","fields":{"summary":"WireFormatNegotiator could hang a client or server connection if the peer disconnects before sending the wire format info","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-07-02T22:03:02.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Every now and again a client hangs connecting to the broker. The broker is configured with the default activemq.xml. The stack dumps are as follows:\n\nACTIVEMQ_HOME: C:\\Java\\incubator-activemq-4.0\\bin\\..\nLoading message broker from: xbean:activemq.xml\nINFO  BrokerService                  - ActiveMQ 4.0 JMS Message Broker (localhos\nt) is starting\nINFO  BrokerService                  - For help or more information please see:\nhttp://incubator.apache.org/activemq/\nINFO  ManagementContext              - JMX consoles can connect to service:jmx:r\nmi:///jndi/rmi://localhost:1099/jmxrmi\nINFO  JDBCPersistenceAdapter         - Database driver recognized: [apache_derby\n_embedded_jdbc_driver]\nINFO  JournalPersistenceAdapter      - Journal Recovery Started from: Active Jou\nrnal: using 5 x 20.0 Megs at: C:\\Java\\incubator-activemq-4.0\\activemq-data\\journ\nal\nINFO  JournalPersistenceAdapter      - Journal Recovered: 1 message(s) in transa\nctions recovered.\nINFO  TransportServerThreadSupport   - Listening for connections at: tcp://SIM-J\namesM:61616\nWARN  MulticastDiscoveryAgent        - brokerName not set\nINFO  TransportConnector             - Connector default Started\nINFO  TransportServerThreadSupport   - Listening for connections at: tcp://SIM-J\namesM:61613?wireFormat=stomp\nINFO  TransportConnector             - Connector stomp Started\nINFO  NetworkConnector               - Network Connector default Started\nINFO  BrokerService                  - ActiveMQ JMS Message Broker (localhost, I\nD:SIM-JamesM-2205-1149180591980-1:0) started\nWARN  ManagedTransportConnection     - Failed to unregister mbean: org.apache.ac\ntivemq:BrokerName=localhost,Type=Connection,ConnectorName=default,Connection=9\n\nthe stack dump is:\n\n\"main\" prio=6 tid=0x000379d0 nid=0x93d0 in Object.wait() [0x0007e000..0x0007fc40\n]\n       at java.lang.Object.wait(Native Method)\n       - waiting on <0x02b66278> (a edu.emory.mathcs.backport.java.util.concurr\nent.CountDownLatch)\n       at java.lang.Object.wait(Object.java:474)\n       at edu.emory.mathcs.backport.java.util.concurrent.CountDownLatch.await(C\nountDownLatch.java:179)\n       - locked <0x02b66278> (a edu.emory.mathcs.backport.java.util.concurrent.\nCountDownLatch)\n       at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatN\negotiator.java:73)\n       at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.ja\nva:44)\n       - locked <0x02b64098> (a java.lang.Object)\n       at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(Respons\neCorrelator.java:68)\n       at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorr\nelator.java:73)\n       at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnect\nion.java:1131)\n       at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(Activ\neMQConnection.java:1219)\n       - locked <0x02b602c0> (a org.apache.activemq.ActiveMQConnection)\n       at org.apache.activemq.ActiveMQConnection.start(ActiveMQConnection.java:\n435)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161911","customfield_12312823":null,"summary":"Client and Broker hang trying to start a connection","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jamiemc","name":"jamiemc","key":"jamiemc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jamie McCrindle","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jamiemc","name":"jamiemc","key":"jamiemc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jamie McCrindle","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"JDK 1.5.0_06, Windows XP SP2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481758/comment/12938018","id":"12938018","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Lets get this fixed for the next release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2006-06-21T21:42:30.000+0000","updated":"2006-06-21T21:42:30.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481758/comment/12938218","id":"12938218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=christyc","name":"christyc","key":"christyc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"christy c","active":true,"timeZone":"Etc/UTC"},"body":"We're seeing a similiar problem, and wanted to see if this is the same issue.   \n\nWe have two web apps in Tomcat 2.2.9 that use JMS connections on Linux Red Hat 4.  We were using ActiveMQ3.0, things were fine, and now we're testing with ActiveMQ 4.0 where I changed the package names (and I tried 4.0.1 with the same results) and the results are:   \n\nthe first web app starting a JMS connection works fine.  When the second web app \ntries to start a JMS connection (after successfully getting a ConnectionFactory as \nthe first web app did also), it hangs.  We shut down Tomcat, leave the broker \nrunning, and turn on Tomcat and the first web app hangs when it tries to start a \nJMS connection and same with the second web app.  Here's the stack trace:\n\nThread [Thread-2] (Suspended) \n\n            Object.wait(long) line: not available [native method] \n\n            CountDownLatch(Object).wait() line: not available \n\n            CountDownLatch.await() line: 179 \n\n            WireFormatNegotiator.oneway(Command) line: 73 \n\n            MutexTransport.oneway(Command) line: 44 \n\n            ResponseCorrelator.asyncRequest(Command, ResponseCallback) line: 68 \n\n            ResponseCorrelator.request(Command) line: 73 \n\n            ActiveMQConnection.syncSendPacket(Command) line: 1112 \n\n            ActiveMQConnection.ensureConnectionInfoSent() line: 1200 \n\n            ActiveMQConnection.start() line: 434 \n\n            JMSUtil.getConnection(String) line: 170 \n\n            JMSUtil.getSession(boolean, String) line: 225 \n\n            JMSUtil.getSession(boolean) line: 193 \n\n            SourceListener.registerForSourceTopic() line: 46 \n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=christyc","name":"christyc","key":"christyc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"christy c","active":true,"timeZone":"Etc/UTC"},"created":"2006-06-22T22:26:36.000+0000","updated":"2006-06-22T22:26:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481758/comment/12938021","id":"12938021","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"This issue was resolved in issue AMQ-789","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2006-07-02T22:02:33.000+0000","updated":"2006-07-02T22:02:33.000+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-768/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s2on:"}}