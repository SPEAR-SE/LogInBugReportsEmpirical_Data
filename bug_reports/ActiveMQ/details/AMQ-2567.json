{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483209","self":"https://issues.apache.org/jira/rest/api/2/issue/12483209","key":"AMQ-2567","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315621","id":"12315621","description":"","name":"5.3.1","archived":false,"released":true,"releaseDate":"2010-03-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-01-14T17:42:54.106+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jan 28 10:49:07 UTC 2010","customfield_12310420":"74890","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_526760451_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-01-20T16:45:48.536+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2567/watchers","watchCount":1,"isWatching":false},"created":"2010-01-14T14:26:28.085+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-01-28T10:49:37.455+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I have problems using the zero prefetch. The consumer starts prefetching messages after some receives. \n \nOur use case is, that we have a large computation which is split into smaller sub jobs. These jobs are sent via ActiveMQ to some processing nodes on different machines. The duration of jobs differs very much (10s to some minutes). The jobs are sent by decreasing estimated computation time. If one of the consumers which receives a large job prefetches some other jobs, these will be processed later. In the meantime the remaining consumers are idle, and the total computation time is much longer than necessary.\n \nI have modified the existing ZeroPrefetchConsumerTest to test for the problem (I have removed the other test methods). \n \nTwo consumers (C1  and C2) are instantiated. These messages are sent:\n1,2,3,4,5,6,7,8,9\n \nC1 reads 4 times, receives 1,2,3,4 -> this is correct\n \nnow C2 reads, it receives 8 not 5, which is the next message in the queue. The reason is, that C1 prefetched 5, 6, 7, that should not have happened.(sometimes C1 only prefetches 5,6)\n \nThe problem can be seen in the JMX Console as well, after a while, the first consumer has more than one dispatched message and the queue has an InflightCount of 3, although there are only two consumers!\n \nThe last version that we used was 4.1.1, that worked.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461596","id":"12461596","filename":"PrefetchSubscription.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-15T11:42:36.757+0000","size":33016,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461596/PrefetchSubscription.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461595","id":"12461595","filename":"ZeroPrefetchConsumerTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-15T11:42:36.639+0000","size":6455,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461595/ZeroPrefetchConsumerTest.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461594","id":"12461594","filename":"ZeroPrefetchConsumerTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-14T14:29:21.251+0000","size":4309,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461594/ZeroPrefetchConsumerTest.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"159843","customfield_12312823":null,"summary":"Zero Prefetch not working","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Unix/Windows, Java 1.6","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942007","id":"12942007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"body":"Extended the test case to send more than one messages and listen and receiving on two consumers.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-14T14:29:21.305+0000","updated":"2010-01-14T14:29:21.305+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942006","id":"12942006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"body":"Gary Tully wrote:\nPrefetchSubscription and prefetchExtension on a deliveryAck in a transaction \nare areas that you need to look into to resolve this. Great that you have a \nsimple junit test case.\n---\n\nYou are right, prefetchExtension is the problem. I do not understand the reason for it. If I want prefetch 0, it should stay that way. Right now it is increased on each pull.\n\nIn acknowledge there is the following comment \n      if (context.isInTransaction()) {\n              // extend prefetch window only if not a pulling consumer\n                                if (getPrefetchSize() != 0) {\n                                    prefetchExtension = Math.max(\n                                            prefetchExtension, index );\n\nIn PrefetchSubscription::pullMessage it checks for prefetchSize 0 \n        if (getPrefetchSize() == 0 && !isSlave()) {\n            final long dispatchCounterBeforePull;\n        \tsynchronized(this) {\n        \t\tprefetchExtension++;\n        \t\tdispatchCounterBeforePull = dispatchCounter;\n        \t}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-14T16:28:03.739+0000","updated":"2010-01-14T16:28:03.739+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942005","id":"12942005","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"so the prefetchExtension is the mechanism by which a message is dispatched to a consumer with prefetch=0. Each receive() sends a pull if there are no messages which increments the prefetchExtension so another message is dispatched. With a prefetch of 0, you should only be able to get one message at a time.\n\nI think a deliveredAck may be the problem, a delivered ack uses the prefetchextension to ensure that within a transaction it is possible to read past the prefetch limit. If prefetch=0, a pulling consumer, it should not do that. Check to see if you are getting an ack with ackType=0.\n\nif so, either the logic with a standard ack needs to be duplicated with a deliveredAck or the delivery ack needs to be suppressed on the consumer. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-14T17:42:54.106+0000","updated":"2010-01-14T17:42:54.106+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942004","id":"12942004","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"body":"Ok, I unterstand now, what it is for.\nThen I guess prefetchExtension should be reset to 0 again after the transaction? But it kept increasing.  \n\nI will have a look at the Ack logic tomorrow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-14T18:31:51.656+0000","updated":"2010-01-14T18:31:51.656+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942009","id":"12942009","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"body":"So I added a printout in the client (Expecting/Read) and in the PrefetchSubscribtion for all Acks,\nC1/2 are the consumer n is the number of acked messaged. This is how it happens\n\nExpecting Msg1\nRead Msg1\nC1: n:1 isDeliveredAck(Before): 1\nC1: n:1 isDeliveredAck(After): 1\nC1: n:1 isStandardAckXA(Before): 1\nC1: n:1 isStandardAckXA(After): 1\nExpecting Msg2\nC1: n:1 isDeliveredAck(Before): *2*  This is wrong it should be in the same state as before the message 1, should have been \nC1: n:1 isDeliveredAck(After): 2\nRead Msg2\nC1: n:1 isStandardAckXA(Before): 2\nC1: n:1 isStandardAckXA(After): 2\nExpecting Msg3\nC1: n:1 isDeliveredAck(Before): 2\nC1: n:1 isDeliveredAck(After): 2\nRead Msg3\nC1: n:1 isStandardAckXA(Before): 2\nC1: n:1 isStandardAckXA(After): 2\nExpecting Msg4\nRead Msg4\nC1: n:1 isDeliveredAck(Before): 3\nC1: n:1 isDeliveredAck(After): 3\nC1: n:1 isStandardAckXA(Before): 3\nC1: n:1 isStandardAckXA(After): 3\nExpecting Msg5\nRead Msg8\nC2: n:1 isDeliveredAck(Before): 1\nC2: n:1 isDeliveredAck(After): 1\nC2: n:1 isStandardAckXA(Before): 1\nC2: n:1 isStandardAckXA(After): 1\n\nI think the problem is in the standardAck, this should decrement prefetchIndex. But I guess I am forgetting something (I extended receiving two messages in the transaction in the test case) \n\n{code}\n            if (ack.isStandardAck()) {\n                   ...\n                            if (context.isInTransaction()) {\n                                // extend prefetch window only if not a pulling\n                                // consumer\n                                System.out.println(prefix+\"isStandardAckXA(Before): \" +prefetchExtension);\n//RJ                                if (getPrefetchSize() != 0) {\n//RJ                                   prefetchExtension = Math.max(prefetchExtension, index );\n//RJ                               }\n//RJ do the same as in the non transacted case\n                                prefetchExtension = Math.max(0,    prefetchExtension - index);\n                                System.out.println(prefix+\"isStandardAckXA(After): \" +prefetchExtension);\n                            } else {\n                                System.out.println(prefix+\"isStandardAck(Before): \" +prefetchExtension);\n                                prefetchExtension = Math.max(0,\n}}\n                                        prefetchExtension - index);\n                                System.out.println(prefix+\"isStandardAck(After): \" +prefetchExtension);\n                            }\n{code}\n\n\nExpecting Msg1\nRead Msg1\nC1: n:1 isDeliveredAck(Before): 1\nC1: n:1 isDeliveredAck(After): 1\nC1: n:1 isStandardAckXA(Before): 1\nC1: n:1 isStandardAckXA(After): 0\nExpecting Msg2\nRead Msg2\nC1: n:1 isDeliveredAck(Before): 1\nC1: n:1 isDeliveredAck(After): 1\nC1: n:1 isStandardAckXA(Before): 1\nC1: n:1 isStandardAckXA(After): 0\nExpecting Msg3\nRead Msg3\nC1: n:1 isDeliveredAck(Before): 1\nC1: n:1 isDeliveredAck(After): 1\nC1: n:1 isStandardAckXA(Before): 1\nC1: n:1 isStandardAckXA(After): 0\nExpecting Msg4\nC1: n:1 isDeliveredAck(Before): 1\nC1: n:1 isDeliveredAck(After): 1\nRead Msg4\nC1: n:1 isStandardAckXA(Before): 1\nC1: n:1 isStandardAckXA(After): 0\nExpecting Msg5\nC2: n:1 isDeliveredAck(Before): 1\nC2: n:1 isDeliveredAck(After): 1\nRead Msg5\nC2: n:1 isStandardAckXA(Before): 1\nC2: n:1 isStandardAckXA(After): 0\nExpecting Msg6\nRead Msg6\nExpecting Msg7\nC1: n:1 isDeliveredAck(Before): 1\nC1: n:1 isDeliveredAck(After): 1\nRead Msg7\nC1: n:1 isDeliveredAck(Before): 2\nC1: n:1 isDeliveredAck(After): 2\nC1: n:2 isStandardAckXA(Before): 2\nC1: n:2 isStandardAckXA(After): 0\nExpecting Msg8\nRead Msg8\nC2: n:1 isDeliveredAck(Before): 1\nC2: n:1 isDeliveredAck(After): 1\nC2: n:1 isStandardAckXA(Before): 1\nC2: n:1 isStandardAckXA(After): 0\n\nTHis look ok to me now","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-15T11:40:44.825+0000","updated":"2010-01-15T11:40:44.825+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942010","id":"12942010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"body":"Here is the extended TestCase and the Subscribtion class including the printouts","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rudolf_janz","name":"rudolf_janz","key":"rudolf_janz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rudolf Janz","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-15T11:42:36.760+0000","updated":"2010-01-15T11:42:36.760+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942041","id":"12942041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for the test case, debugging and fix. \nFix with small modification applied to trunk in r901269 and 5.3.1 in r901271","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-20T16:45:48.507+0000","updated":"2010-01-20T16:45:48.507+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942085","id":"12942085","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi","name":"kutzi","key":"kutzi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Europe/Berlin"},"body":"Was the fix already released as part of a snapshot release available at https://repository.apache.org/content/repositories/snapshots/org/apache/activemq/ ?\nJudging by the JAR file dates I would say no.\n\nIf not, when can I expect a snapshot release which includes the fix?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi","name":"kutzi","key":"kutzi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-27T17:28:33.876+0000","updated":"2010-01-27T17:28:33.876+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942084","id":"12942084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"most of the artifacts are there but the release full tar or zip files still have not been updated for the 5.4-SNAPSHOT - need to check why hudson has not done it, it may be pending a full clean build. Some test failures were resolved today so it should be real soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-27T18:39:46.571+0000","updated":"2010-01-27T18:39:46.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942098","id":"12942098","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi","name":"kutzi","key":"kutzi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Europe/Berlin"},"body":"Seems like the MD5 and SHA signatures are redeployed every day, but the artifacts themselves (JARs, POMs) are still from January 15th","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi","name":"kutzi","key":"kutzi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-28T08:24:00.516+0000","updated":"2010-01-28T08:24:00.516+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942100","id":"12942100","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"I kicked hudson into doing a redeploy of the artifacts and the full install tar files are now uploaded containing the build artifacts from the 27/01 which should have the fix for this issue.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-28T10:20:44.002+0000","updated":"2010-01-28T10:20:44.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942106","id":"12942106","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi","name":"kutzi","key":"kutzi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Europe/Berlin"},"body":"Thanks.\nSeems like new artifacts were only deployed for ActiveMQ 5.4.\nCan you also do it for 5.3.1-SNAPSHOT, please?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kutzi","name":"kutzi","key":"kutzi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Christoph Kutzinski","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-28T10:32:46.946+0000","updated":"2010-01-28T10:32:46.946+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483209/comment/12942107","id":"12942107","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"done for 5.3.1-SNAPSHOT","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-01-28T10:49:07.403+0000","updated":"2010-01-28T10:49:07.403+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2567/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rpx3:"}}