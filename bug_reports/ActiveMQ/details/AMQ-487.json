{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481646","self":"https://issues.apache.org/jira/rest/api/2/issue/12481646","key":"AMQ-487","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315610","id":"12315610","name":"4.0","archived":false,"released":true}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-03-13T21:53:56.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Mar 27 15:12:11 UTC 2006","customfield_12310420":"49154","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_173389000_*|*_1_*:*_1_*:*_6095054000_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2006-03-27T15:12:11.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-487/watchers","watchCount":1,"isWatching":false},"created":"2006-01-14T01:58:08.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315610","id":"12315610","name":"4.0","archived":false,"released":true}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-05-01T21:48:20.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313893","id":"12313893","name":"Connector"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Goal was to test request/response model across a network bridge.  The requestor sets up a temporary topic and includes as the reply topic with message sent to the responder. It is expected that the responder will send message on the provide replyTo topic.\n\nUsing the multicast://default discovery mechanism and networkConnector transport to interconnect two brokers (different hosts harley to roadrash). Responder client  attaches to harley and requestor client attaches to roadrash. \n\nRequestor client creates temporary topic, sends message.\nResponder receives message attempt to reply on the temporary topic, but errors with message indicating cannot publish to deleted topic\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460569","id":"12460569","filename":"ASF.LICENSE.NOT.GRANTED--AMQ-487-logs.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"created":"2006-01-14T02:12:15.000+0000","size":16225,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12460569/ASF.LICENSE.NOT.GRANTED--AMQ-487-logs.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161901","customfield_12312823":null,"summary":"Temp Destination definition not sent across network bridge to support request/reply model?","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"w2k and linux with jdk 1.5","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481646/comment/12937522","id":"12937522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"body":"Actually when debug level set for broker, logs show destinations in fact are being established on both sides of the bridge.  So begs to question why responding client is informed that destination is deleted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"created":"2006-01-14T02:06:22.000+0000","updated":"2006-01-14T02:06:22.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481646/comment/12937417","id":"12937417","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"body":"Attachment contains 4 log files: \n\nTwo broker logs from interconnected brokers\nLog from the requestor\nLog from the responder\n\nRequestor, responder and on broker all run on host roadrash so timestamps are exact.  Timestamps for host harly broker within one second.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"created":"2006-01-14T02:12:15.000+0000","updated":"2006-01-14T02:12:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481646/comment/12937631","id":"12937631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kieranmurphy","name":"kieranmurphy","key":"kieranmurphy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kieran Murphy","active":true,"timeZone":"Etc/UTC"},"body":"I had this problem with 3.0 and submitted the following to the mailing list.  I was getting the same \"cannot write to a deleted destination...\" error. \n\nI think this is a bug in the way Network Message Bridges for TemporaryDestinations are named.\nIn my debugger, I see that the physical name of a TemporaryTopic is (for example):\n\n> TemporaryTopic-{TD{ID:kmurphynb.alleanzasalute.it-32917-1134582426027-1:0}TD}ID:kmurphynb.alleanzasalute.it-32917-1134582426027-6:0\n\n\nIn a network of brokers, a network message bridge is opened from the connection which spawned this TemporaryTopic to all others in the network -- apparently sometimes using this physical name:\n\n> 11:48:19 INFO  started NetworkMessageBridge for destination: TemporaryTopic-{TD{ID:kmurphynb.alleanzasalute.it-32917-1134582426027-1:0}TD}ID:kmurphynb.alleanzasalute.it-32917-1134582426027-6:0 -- NetworkChannel: NetworkChannel{ , uri = 'reliable:tcp://localhost:61617' , remoteBrokerName = 'node2'  }\n\n\nand other times prefaced with the class name:\n\n> 11:49:37 INFO  started NetworkMessageBridge for destination: ActiveMQ.Advisory.TempDestinations.temp-topic.TemporaryTopic-{TD{ID:kmurphynb.alleanzasalute.it-32924-1134582576664-1:0}TD}ID:kmurphynb.alleanzasalute.it-32924-1134582576664-6:0 -- NetworkChannel: NetworkChannel{ , uri = 'reliable:tcp://localhost:61617' , remoteBrokerName = 'node2'  }\n>\nThe problem is that in either case, the physical name of the TemporaryTopic is used to \"validate\" it.  So when I try to reply to the second TemporaryTopic shown above, I get:\n\n> ERROR - Thread-67 cosm.cee.component.messaging.impl.jms.JMSMessagingChannel send\n> javax.jms.JMSException: Cannot publish to a deleted Destination: TemporaryTopic-{TD{ID:kmurphynb.alleanzasalute.it-32924-1134582576664-1:0}TD}ID:kmurphynb.alleanzasalute.it-32924-1134582576664-6:0\n\n\nNote difference in the names.\n\nI got around this by creating a new, permanent Topic (or Queue -- I found the same problem adn solution with both TemporaryTopics and TemporaryQueues) with a random (guaranteed random in my application's scope) String for a name.  It appears that for a non-temporary Destination, the name of the destination is always used for the message bridge:\n\n> 12:57:37 INFO  started NetworkMessageBridge for destination: 7E3829D1-6CD3-11DA-B666-CA9B35A911B1 -- NetworkChannel: NetworkChannel{ , uri = 'reliable:tcp://localhost:61617' , remoteBrokerName = 'node2'  }\n\n\nIn this way I get the same effect -- a unique destination, whose presence is only known to recipients of a particular message, and whose lifespan is that of it's connection.  I would prefer to use TemporaryTopics and TemporaryQueues, though.\n\nAny thoughts? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kieranmurphy","name":"kieranmurphy","key":"kieranmurphy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kieran Murphy","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-13T21:53:56.000+0000","updated":"2006-03-13T21:53:56.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481646/comment/12937136","id":"12937136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"Resolved","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-27T15:12:11.000+0000","updated":"2006-03-27T15:12:11.000+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-487/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s2mf:"}}