{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12553744","self":"https://issues.apache.org/jira/rest/api/2/issue/12553744","key":"AMQ-3825","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2012-07-11T08:45:37.528+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 27 06:12:13 UTC 2012","customfield_12310420":"237948","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7345518869_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-07-27T12:46:01.233+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3825/watchers","watchCount":6,"isWatching":false},"created":"2012-05-03T12:20:42.504+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12318549","id":"12318549","name":"5.5.1","archived":false,"released":true,"releaseDate":"2011-10-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-07-27T12:46:01.341+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313893","id":"12313893","name":"Connector"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Hi,\nI am seeing lot of InactivityIO exceptions in my broker logs:-\n\nactivemq.log.2012-03-01:2012-03-01 18:56:49,519 | INFO  | Transport failed: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too (>30000) long: /10.240.170.27:42813 | org.apache.activemq.broker.TransportConnection.Transport | InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@8fe952[State = 0, empty queue]\nactivemq.log.2012-03-01:2012-03-01 19:06:52,464 | INFO  | Transport failed: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too (>30000) long: /10.253.127.196:62265 | org.apache.activemq.broker.TransportConnection.Transport | InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@1501b4f[State = 0, empty queue]\nactivemq.log.2012-03-01:2012-03-01 19:27:37,074 | INFO  | Transport failed: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too (>30000) long: /149.77.160.18:52472 | org.apache.activemq.broker.TransportConnection.Transport | InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@19e0323[State = 0, empty queue]\nactivemq.log.2012-03-01:2012-03-01 23:33:51,632 | INFO  | Transport failed: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too (>30000) long: /149.77.160.18:33558 | org.apache.activemq.broker.TransportConnection.Transport | InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@168a9ba[State = 0, empty queue]\nactivemq.log.2012-03-01:2012-03-01 23:33:56,975 | INFO  | Transport failed: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too (>30000) long: /149.77.160.18:55158 | org.apache.activemq.broker.TransportConnection.Transport | InactivityMonitor Async Task: java.util.concurrent.ThreadPoolExecutor$Worker@116f46b[State = 0, empty queue]\n\nI am trying to reproduce this with the pooled connection factory but this is not consistently reproducible. Can somebody throw light on the exact cause of this. I don't want to use the inactivityMonitor property.\n\nThanks,\nBhanu","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12536009","id":"12536009","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-11T10:09:27.608+0000","size":2035,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12536009/activemq.xml"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"119676","customfield_12312823":null,"summary":"Exceptions in broker logs :- Transport failed: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too (>30000) long:","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xbhanu","name":"xbhanu","key":"xbhanu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Bhanu","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553744/comment/13411328","id":"13411328","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"body":"We are also getting same error with maxinactivityduration = 3000. For our application nature we need to monitor the consumers so not possible to set maxinactivityduration = 0. Any specific reason for this exception? How to solve this exception? \n \n2012-07-05 12:11:16,399 [$Worker@1535a58] INFO  Transport                      - Transport failed: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too (>3000) long: /127.0.0.1:34829\n2012-07-05 12:11:16,405 [$Worker@1535a58] INFO  Transport                      - Transport failed: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too (>3000) long: /127.0.0.1:34830\n2012-07-05 14:35:00,457 [127.0.0.1:45777] INFO  Transport                      - Transport failed: java.io.EOFException\n2012-07-05 15:06:20,315 [6.252.110:58999] INFO  Transport                      - Transport failed: java.net.SocketException: Connection reset","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-11T08:45:37.528+0000","updated":"2012-07-11T08:45:37.528+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553744/comment/13411363","id":"13411363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"can you attach your activemq.xml\nnote that the values for inactivity are negotiated. The min of the values from the each end of the transport are used. So the min of the values from the connectionfactory tcp url and the broker transport connector url","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-11T10:00:48.930+0000","updated":"2012-07-11T10:00:48.930+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553744/comment/13411377","id":"13411377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"body":"As requested, have attached activemq.xml. \n\nNote: In the connectionfactory we set both inactivity and keepalive as below\n\nActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(url+ \"?keepAlive=true&wireFormat.maxInactivityDuration=3000\");","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-11T10:17:04.509+0000","updated":"2012-07-11T10:17:04.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553744/comment/13411387","id":"13411387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"the exception indicates that there was no activity on the transport for >3000 or >30000 milliseconds. Which is indicative of a client side abort that has not yet filtered through as a socket close/timeout on the broker.\n\nCan you again restate what you want to achieve or what you think the issue or bug is?  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-11T10:35:48.111+0000","updated":"2012-07-11T10:35:48.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553744/comment/13411394","id":"13411394","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"body":"Thank you for your quick response.\n\nI understand the nature of this exception and need help to fix this exception. I am new to AMQ and how to filter socket timeout on the broker?\n\nWe are using inactivity to generate advisory if the client is crashed so we can not set inactivity to 0. \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-11T10:58:45.684+0000","updated":"2012-07-11T10:58:45.684+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553744/comment/13423395","id":"13423395","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"The logs seem to indicate that the broker side is working as expected.  The thing to do here is to evaluate what's going on with your clients.  Are they aborting without disconnecting?  We can't really help you here without additional information on the client side of this. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-07-26T19:50:55.746+0000","updated":"2012-07-26T19:50:55.746+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553744/comment/13423697","id":"13423697","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for your response. After we disabled the flow control on the broker seems to be working fine. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boova","name":"boova","key":"boova","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Boovaraghavan","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-27T06:12:13.226+0000","updated":"2012-07-27T06:12:13.226+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3825/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ktzj:"}}