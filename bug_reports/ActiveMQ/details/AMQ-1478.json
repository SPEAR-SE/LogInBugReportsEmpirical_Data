{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482836","self":"https://issues.apache.org/jira/rest/api/2/issue/12482836","key":"AMQ-1478","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-11-07T04:27:04.094+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Nov 07 04:27:04 UTC 2007","customfield_12310420":"84530","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_7522_*|*_1_*:*_1_*:*_59285348828_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2009-09-11T18:59:41.987+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1478/watchers","watchCount":1,"isWatching":false},"created":"2007-10-26T14:50:25.637+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315614","id":"12315614","description":"","name":"4.1.1","archived":false,"released":true,"releaseDate":"2007-06-08"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-09-11T18:59:41.983+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"\nConfiguration is attached below.\n\nBehavior:\n\nSet the persistent to be true in the broker configuration and created a durable topic to consume messages. \n\nEverything was fine until the consumer went down. During that time producer keeps producing messages. Restart consumer to catch all the missed messages but didn't catch them. After that the whole application hangs. can't produce any more messages, hence can't consume them. The heap usage size keeps increasing on the producer side.\n\nIncreased memory size, which didn't work either. The received log is shown below on the broker side when it comes up and the message that shows up on the produce client window.\n\nHere is the message from the producer window:\n\nresponse from futureResponse was invalid\n        FILE: ..\\src\\main\\activemq\\transport\\filters\\ResponseCorrelator.cpp, LIN\nE: 146\n        FILE: ..\\src\\main\\activemq\\transport\\filters\\ResponseCorrelator.cpp, LIN\nE: 153\n        FILE: ..\\src\\main\\activemq\\connector\\openwire\\OpenWireFormatNegotiator.c\npp, LINE: 105\n        FILE: ..\\src\\main\\activemq\\connector\\openwire\\OpenWireConnector.cpp, LIN\nE: 1454\n        FILE: ..\\src\\main\\activemq\\connector\\openwire\\OpenWireConnector.cpp, LIN\nE: 924\n        FILE: ..\\src\\main\\activemq\\core\\ActiveMQSession.cpp, LINE: 675\n        FILE: ..\\src\\main\\activemq\\core\\ActiveMQProducer.cpp, LINE: 194\n        FILE: ..\\src\\main\\activemq\\core\\ActiveMQProducer.cpp, LINE: 149\n        FILE: ..\\src\\main\\activemq\\core\\ActiveMQProducer.cpp, LINE: 108\n\n\nHere is broker log:\n\n2007-10-25 15:56:32,576 [main           ] INFO  BrokerService                  - ActiveMQ 4.1.1 JMS Message Broker (localhost) is starting\n2007-10-25 15:56:32,576 [main           ] INFO  BrokerService                  - For help or more information please see: http://incubator.apache.org/activemq/\n2007-10-25 15:56:32,654 [JMX connector  ] INFO  ManagementContext              - JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi\n2007-10-25 15:56:33,154 [main           ] INFO  JDBCPersistenceAdapter         - Database driver recognized: [apache_derby_embedded_jdbc_driver]\n2007-10-25 15:56:33,904 [main           ] INFO  DefaultDatabaseLocker          - Attempting to acquire the exclusive lock to become the Master broker\n2007-10-25 15:56:33,904 [main           ] INFO  DefaultDatabaseLocker          - Becoming the master on dataSource: org.apache.derby.jdbc.EmbeddedDataSource@8a2023\n2007-10-25 15:56:34,748 [main           ] INFO  JournalPersistenceAdapter      - Journal Recovery Started from: Active Journal: using 5 x 20.0 Megs at: C:\\ActiveMQ\\apache-activemq-4.1.1\\apache-activemq-4.1.1\\activemq-data\\journal\n2007-10-25 15:56:34,764 [main           ] INFO  JournalPersistenceAdapter      - Journal Recovered: 0 message(s) in transactions recovered.\n2007-10-25 15:56:34,967 [main           ] INFO  TransportServerThreadSupport   - Listening for connections at: tcp://PCSHAH:61616\n2007-10-25 15:56:34,967 [main           ] INFO  TransportConnector             - Connector openwire Started\n2007-10-25 15:56:35,280 [main           ] INFO  TransportServerThreadSupport   - Listening for connections at: ssl://PCSHAH:61617\n2007-10-25 15:56:35,280 [main           ] INFO  TransportConnector             - Connector ssl Started\n2007-10-25 15:56:35,280 [main           ] INFO  TransportServerThreadSupport   - Listening for connections at: stomp://PCSHAH:61613\n2007-10-25 15:56:35,280 [main           ] INFO  TransportConnector             - Connector stomp Started\n2007-10-25 15:56:35,358 [main           ] INFO  NetworkConnector               - Network Connector default-nc Started\n2007-10-25 15:56:35,358 [main           ] INFO  BrokerService                  - ActiveMQ JMS Message Broker (localhost, ID:PCSHAH-2327-1193342192311-1:0) started\n2007-10-25 15:56:51,421 [85.37.184:44137] INFO  KahaStore                      - Kaha Store deleted data directory activemq-data\\localhost\\tmp_storage\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460839","id":"12460839","filename":"ASF.LICENSE.NOT.GRANTED--activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpit.shah","name":"arpit.shah","key":"arpit.shah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"arpit shah","active":true,"timeZone":"Etc/UTC"},"created":"2007-10-26T14:50:25.710+0000","size":5112,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12460839/ASF.LICENSE.NOT.GRANTED--activemq.xml"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161840","customfield_12312823":null,"summary":"Can't produce messages after consumer goes down.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpit.shah","name":"arpit.shah","key":"arpit.shah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"arpit shah","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpit.shah","name":"arpit.shah","key":"arpit.shah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"arpit shah","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Producer box( Windows - running a broker - Producer configuration: persistent messages)\nConsumer box(Linux - with durable topics for persistence)\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482836/comment/12939223","id":"12939223","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggsize","name":"ggsize","key":"ggsize","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Griffin","active":true,"timeZone":"Etc/UTC"},"body":"Saw exact same exception but in different environment. On one Windows box, CPP2.1 as producer, 4.1.1 for broker and receiver and producers. Nothing persistent or durable. No errors in broker log.\n\nRepeatedly restarting the CPP producer gave same error. However when I took down all my java producer/receivers and restarted them, then the CPP producer worked fine. \n\nHave been using 4.1.1 since May, and CPP2.1 for a week with no problems before. (run 100msg/second everyday)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ggsize","name":"ggsize","key":"ggsize","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Griffin","active":true,"timeZone":"Etc/UTC"},"created":"2007-11-07T04:27:04.094+0000","updated":"2007-11-07T04:27:04.094+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1478/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s28v:"}}