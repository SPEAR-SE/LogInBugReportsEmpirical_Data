{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482173","self":"https://issues.apache.org/jira/rest/api/2/issue/12482173","key":"AMQ-1214","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315619","id":"12315619","description":"","name":"5.2.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-04-30T15:35:03.966+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jun 19 15:38:57 UTC 2008","customfield_12310420":"84460","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3015880875_*|*_5_*:*_2_*:*_6944646636_*|*_4_*:*_1_*:*_28921647560","customfield_12312321":null,"resolutiondate":"2008-06-19T15:38:57.185+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1214/watchers","watchCount":4,"isWatching":false},"created":"2007-03-27T15:02:42.114+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-06-19T15:38:57.185+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Threads started by ActiveMQ on behalf of a client persist in a ThreadGroup despite calling the 'interrupt' method on the group thereby leaking memory.  ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460680","id":"12460680","filename":"ASF.LICENSE.NOT.GRANTED--threadleak.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=txtoth","name":"txtoth","key":"txtoth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted X Toth","active":true,"timeZone":"Etc/UTC"},"created":"2007-03-27T15:02:42.798+0000","size":1513,"mimeType":"application/x-gzip","content":"https://issues.apache.org/jira/secure/attachment/12460680/ASF.LICENSE.NOT.GRANTED--threadleak.tar.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460996","id":"12460996","filename":"test.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anishpathadan","name":"anishpathadan","key":"anishpathadan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anish Pathadan","active":true,"timeZone":"Etc/UTC"},"created":"2007-04-30T10:25:06.565+0000","size":3948,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460996/test.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161729","customfield_12312823":null,"summary":"threads not stopping causing memory leaks which can lead to OutOfMemoryError","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=txtoth","name":"txtoth","key":"txtoth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted X Toth","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=txtoth","name":"txtoth","key":"txtoth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted X Toth","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Fedora Core 6","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482173/comment/12936691","id":"12936691","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anishpathadan","name":"anishpathadan","key":"anishpathadan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anish Pathadan","active":true,"timeZone":"Etc/UTC"},"body":"Hi All,\n      This bug can be closed as the threads persisted are valid.\n\nIf we run the original test case(ie threadleaker.tar.gz), we can see the threads which persisted are two \"ActiveMQ Scheduler\" threads. These threads are executed using ScheduledThreadPoolExecutor with a pool size of 5. Pool size of 5 means a maximum of 5 such threads will be available in the pool and these threads will be used to execute n number of \"ActiveMQ Scheduler\" threads. \n\nIf connection is created and closed a lot of times, a maximum of 5 \"ActiveMQ Scheduler\" threads and  lots of \"ActiveMQ Connection worker\"  threads will be created.The latter  thread is created to be timed out after 5 seconds of creation.\n\nThis can be verified by executing the attached test.java . This testcase prints the total number of threads in the system after a  connection.start() and connection.close() is called.The total  number of threads never increases to a very high number  as the initial threads are getting timed out. \n\nThanks,\nAnish","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anishpathadan","name":"anishpathadan","key":"anishpathadan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anish Pathadan","active":true,"timeZone":"Etc/UTC"},"created":"2007-04-30T15:35:03.966+0000","updated":"2007-04-30T15:35:03.966+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482173/comment/12938972","id":"12938972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for the heads up Anish!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2007-05-01T12:47:22.920+0000","updated":"2007-05-01T12:47:22.920+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482173/comment/12936339","id":"12936339","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stefan.reuter","name":"stefan.reuter","key":"stefan.reuter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stefan Reuter","active":true,"timeZone":"Etc/UTC"},"body":"I have two problems with this issue:\n1. You shouldn't set the resolution to \"fixed\" when you didn't fix anything :-)\n2. \"threads persisted are valid\" - this depends on what you consider valid.\n\nWhen deployed to a web container like Tomcat the threads are not shut down and cause a PermGen leak. The fix would be quite easy: Just shut it down in some destroy method or at least make it clear to user's that they have to take care of the clean up.\n\nMore information:\n\nhttp://www.mail-archive.com/activemq-users@geronimo.apache.org/msg05687.htmlvv\nhttp://www.mail-archive.com/activemq-users@geronimo.apache.org/msg05706.html\n\nhttp://blogs.reucon.com/srt/2007/07/20/java_lang_outofmemoryerror_permgen_space.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stefan.reuter","name":"stefan.reuter","key":"stefan.reuter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stefan Reuter","active":true,"timeZone":"Etc/UTC"},"created":"2007-07-20T21:51:29.608+0000","updated":"2007-07-20T21:51:29.608+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482173/comment/12939870","id":"12939870","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"Fix applied in SVN revision 669512","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-19T15:38:57.184+0000","updated":"2008-06-19T15:38:57.184+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1214/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s1k7:"}}