{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12713513","self":"https://issues.apache.org/jira/rest/api/2/issue/12713513","key":"AMQ-5179","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2014-07-21T21:01:29.324+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Dec 18 08:25:43 UTC 2014","customfield_12310420":"391829","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_6168956961_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-21T21:01:55.383+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5179/watchers","watchCount":5,"isWatching":false},"created":"2014-05-11T11:25:58.455+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["monitoring","queue"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323932","id":"12323932","name":"5.9.0","archived":false,"released":true,"releaseDate":"2013-10-21"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326455","id":"12326455","name":"5.9.1","archived":false,"released":true,"releaseDate":"2014-04-04"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-12-18T08:25:43.086+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We noticed that sometimes queuesize attribute of some queues are different from the count of messages that exist in the queue. for example queuesize is 9 but there are no messages in the queue. This issue has happened frequently so after investigation we created a test case for the problem.\n\nThe test case creates 5 message that each consist of an array of 1 million random bytes. On first run it creates the 5 messages and queuesize becomes 5 as expected. On subsequent runs the messages won't persist on queue but queue size is increased by 5.\n\nNow as a client the code could be improved to prevent such problem but from the perspective of someone who wants to monitor broker states, this is a total failure since she can't know the amount of remaining messages on a queue. \n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12644335","id":"12644335","filename":"1.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"created":"2014-05-11T12:32:20.101+0000","size":102996,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12644335/1.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12644336","id":"12644336","filename":"2.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"created":"2014-05-11T12:32:20.104+0000","size":124720,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12644336/2.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12644333","id":"12644333","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"created":"2014-05-11T11:44:30.407+0000","size":6417,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12644333/activemq.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12656960","id":"12656960","filename":"AMQ5179Test.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-07-21T21:01:29.316+0000","size":4216,"mimeType":"text/x-java","content":"https://issues.apache.org/jira/secure/attachment/12656960/AMQ5179Test.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12644332","id":"12644332","filename":"Manipulator2.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"created":"2014-05-11T11:44:30.403+0000","size":2643,"mimeType":"text/x-java-source","content":"https://issues.apache.org/jira/secure/attachment/12644332/Manipulator2.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"392032","customfield_12312823":null,"summary":"queuesize can be unreliable ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"windows 8.1, centOS 6.4","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713513/comment/13994532","id":"13994532","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"body":"the testcase and activemq.xml file","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"created":"2014-05-11T11:44:30.411+0000","updated":"2014-05-11T11:44:30.411+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713513/comment/13994539","id":"13994539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"body":"screenshots of queue state","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mrtkhosravi","name":"mrtkhosravi","key":"mrtkhosravi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Morteza","active":true,"timeZone":"Asia/Tehran"},"created":"2014-05-11T12:32:20.108+0000","updated":"2014-05-11T12:32:20.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713513/comment/14069271","id":"14069271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Test doesn't seem to indicate any issues. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-07-21T21:01:29.324+0000","updated":"2014-07-21T21:01:29.324+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713513/comment/14069273","id":"14069273","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Could not reproduce this, if the attached test case can be modified to demonstrate a problem please reopen. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-07-21T21:01:55.409+0000","updated":"2014-07-21T21:01:55.409+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713513/comment/14251369","id":"14251369","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lisachenko","name":"lisachenko","key":"lisachenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Lisachenko","active":true,"timeZone":"Europe/Moscow"},"body":"This issue is still present. However, there is no reliable way to reproduce it, looks like it's a result of race conditions.\n\nOur case is following: STOMP producers that send messages to the virtual topics and STOMP consumers on physical queues, mapped to the virtual topics. Messages can be persistent or not. After week or several days of uptime, queue counter in the web console, /admin/xml/queues.jsp and jooloka can return invalid queue size, however when trying to browse it or consume messages - no pending messages in the queue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lisachenko","name":"lisachenko","key":"lisachenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexander Lisachenko","active":true,"timeZone":"Europe/Moscow"},"created":"2014-12-18T08:25:43.086+0000","updated":"2014-12-18T08:25:43.086+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5179/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1vhcf:"}}