{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12676619","self":"https://issues.apache.org/jira/rest/api/2/issue/12676619","key":"AMQ-4837","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326455","id":"12326455","name":"5.9.1","archived":false,"released":true,"releaseDate":"2014-04-04"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324950","id":"12324950","name":"5.10.0","archived":false,"released":true,"releaseDate":"2014-06-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-10-30T16:32:30.904+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jan 16 17:45:45 UTC 2014","customfield_12310420":"356051","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_6757635762_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-01-16T17:45:44.992+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4837/watchers","watchCount":7,"isWatching":false},"created":"2013-10-30T12:38:29.265+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323932","id":"12323932","name":"5.9.0","archived":false,"released":true,"releaseDate":"2013-10-21"}],"issuelinks":[{"id":"12379366","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12379366","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12679030","key":"AMQ-4882","self":"https://issues.apache.org/jira/rest/api/2/issue/12679030","fields":{"summary":"LevelDB can get to a corrupt state when using XA transactions","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12379489","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12379489","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12682713","key":"AMQ-4917","self":"https://issues.apache.org/jira/rest/api/2/issue/12682713","fields":{"summary":"LevelDB store can fail when using durable subs","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-03-12T03:03:07.397+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12320200","id":"12320200","name":"activemq-leveldb-store","description":"LevelDB based message store"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I have clustered 3 ActiveMQ instances using replicated leveldb and zookeeper. When performing some tests using Web UI, I can across issues that appears to corrupt the leveldb data files.\n\nThe issue can be replicated by performing the following steps:\n1.\tStart 3 activemq nodes.\n2.\tPush a message to the master (Node1) and browse the queue using the web UI\n3.\tStop master node (Node1)\n4.\tPush a message to the new master (Node2) and browse the queue using the web UI. Message summary and queue content ok.\n5.\tStart Node1\n6.\tStop master node (Node2)\n7.\tBrowse the queue using the web UI on new master (Node3). Message summary ok however when clicking on the queue, no message details. An error (see below) is logged by the master, which attempts a restart.\n\nFrom this point, the database appears to be corrupted and the same error occurs to each node infinitely (shutdown/restart). The only way around is to stop the nodes and clear the data files.\n\nHowever when a message is pushed between step 5 and 6, the error doesnâ€™t occur.\n\n=================================\nLeveldb configuration on the 3 instances:\n\t\t<persistenceAdapter>\n\t\t\t<replicatedLevelDB\n\t\t\t\t\tdirectory=\"${activemq.data}/leveldb\"\n\t\t\t\t\treplicas=\"3\"\n\t\t\t\t\tbind=\"tcp://0.0.0.0:0\"\n\t\t\t\t\tzkAddress=\"zkserver:2181\"\n\t\t\t\t\tzkPath=\"/activemq/leveldb-stores\"\n\t\t\t\t\t/>\n\t\t</persistenceAdapter>\n\n=================================\nThe error is:\nINFO | Stopping BrokerService[localhost] due to exception, java.io.IOException\njava.io.IOException\n        at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:39)\n        at org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:543)\n        at org.apache.activemq.leveldb.LevelDBClient.might_fail_using_index(LevelDBClient.scala:974)\n        at org.apache.activemq.leveldb.LevelDBClient.collectionCursor(LevelDBClient.scala:1270)\n        at org.apache.activemq.leveldb.LevelDBClient.queueCursor(LevelDBClient.scala:1194)\n        at org.apache.activemq.leveldb.DBManager.cursorMessages(DBManager.scala:708)\n       at org.apache.activemq.leveldb.LevelDBStore$LevelDBMessageStore.recoverNextMessages(LevelDBStore.scala:741)\n        at org.apache.activemq.broker.region.cursors.QueueStorePrefetch.doFillBatch(QueueStorePrefetch.java:106)\n        at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:258)\n        at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.reset(AbstractStoreCursor.java:108)\n        at org.apache.activemq.broker.region.cursors.StoreQueueCursor.reset(StoreQueueCursor.java:157)\n        at org.apache.activemq.broker.region.Queue.doPageInForDispatch(Queue.java:1875)\n        at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:2086)\n        at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1581)\n        at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:129)\n        at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:47)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:722)\nCaused by: java.lang.NullPointerException\n        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$queueCursor$1.apply(LevelDBClient.scala:1198)\n        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$queueCursor$1.apply(LevelDBClient.scala:1194)\n        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1$$anonfun$apply$mcV$sp$12.apply(LevelDBClient.scala:1272)\n        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1$$anonfun$apply$mcV$sp$12.apply(LevelDBClient.scala:1271)\n        at org.apache.activemq.leveldb.LevelDBClient$RichDB.check$4(LevelDBClient.scala:315)\n        at org.apache.activemq.leveldb.LevelDBClient$RichDB.cursorRange(LevelDBClient.scala:317)\n        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply$mcV$sp(LevelDBClient.scala:1271)\n        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply(LevelDBClient.scala:1271)\n        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply(LevelDBClient.scala:1271)\n        at org.apache.activemq.leveldb.LevelDBClient.usingIndex(LevelDBClient.scala:968)\n        at org.apache.activemq.leveldb.LevelDBClient$$anonfun$might_fail_using_index$1.apply(LevelDBClient.scala:974)\n        at org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:540)\n        ... 17 more\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12614384","id":"12614384","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-18T13:22:02.630+0000","size":6070,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12614384/activemq.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12611049","id":"12611049","filename":"LevelDBCorrupted.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-30T12:47:21.947+0000","size":18044,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12611049/LevelDBCorrupted.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"356339","customfield_12312823":null,"summary":"LevelDB corrupted when in a replication cluster","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"CentOS, Linux version 2.6.32-71.29.1.el6.x86_64\njava-1.7.0-openjdk.x86_64/java-1.6.0-openjdk.x86_64\nzookeeper-3.4.5.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13809037","id":"13809037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"body":"Attached the ActiveMQ configuration and the logs of the 3 nodes. \nWRK01 is first elected as Master, then WRK02, then WRK03 (fails).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-30T12:47:21.950+0000","updated":"2013-10-30T12:47:21.950+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13809251","id":"13809251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"body":"Note that the problem also occurs when the replication sync parameter is set to quorum_disk and quorum_mem.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-30T15:44:18.150+0000","updated":"2013-10-30T15:44:18.150+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13809299","id":"13809299","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Looking into it...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-10-30T16:32:30.904+0000","updated":"2013-10-30T16:32:30.904+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13809313","id":"13809313","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"I failed to reproduce using the procedure outlined.  I was testing on 3 Fedora Core 18 VMs.\n\nI was pushing messages using the example in: examples/openwire/swissarmy\nand running: ant producer -Durl='failover:(tcp://demo01:61616,tcp://demo02:61616,tcp://demo03:61616)' -Ddurable=true -Dtopic=false -Dmax=10\n\nI was just browsing the queue using the new hawtio web console.  Not really drilling into each of the messages.\n\nGuillaume, could you add more details on how you you've been reproducing.  How you adding the messages?  Perhaps the number and size of the messages makes a difference.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-10-30T16:44:10.960+0000","updated":"2013-10-30T16:44:10.960+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13809398","id":"13809398","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"body":"Hi Hiram,\nI was using the activemq web console to send messages (destination: default foo.bar, default content and Persistent option ticked), to view the queue summary and to display the list of messages.\nI have performed a couple of tests using the swissarmy example. I cannot reproduce the issue with 10 messages. However I managed to reproduce the problem when sending 1 message at the time (other parameter similar to yours). I am using the default activemq UI to view the queue summary and looking the queue content - which triggers the error at step 7.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-30T17:44:37.599+0000","updated":"2013-10-30T17:44:37.599+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13809446","id":"13809446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Ok. thx. I was able to reproduce.. looking into the root cause now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-10-30T18:25:11.493+0000","updated":"2013-10-30T18:25:11.493+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13810429","id":"13810429","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"unit test for this issue can be found at: \n\nhttps://github.com/apache/activemq/blob/trunk/activemq-leveldb-store/src/test/java/org/apache/activemq/leveldb/test/ReplicatedLevelDBBrokerTest.java\n\nIt was intermittently failing for me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-10-31T16:58:45.066+0000","updated":"2013-10-31T16:58:45.066+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13810453","id":"13810453","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Hi Guillaume,\n\nI think I've fixed this issue now.  If you get a chance could you verify against the following build:\nhttps://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.10-SNAPSHOT/apache-activemq-5.10-20131031.171656-11-bin.tar.gz","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-10-31T17:23:19.141+0000","updated":"2013-10-31T17:23:19.141+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13810473","id":"13810473","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Ah.. hold off.. I'm still seeing the issue.  Need better unit test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-10-31T17:41:17.759+0000","updated":"2013-10-31T17:41:17.759+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13811515","id":"13811515","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Hi Guillaume,\n\nOk. I think I got it this time.  Could you check this build for me?\n\nhttps://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.10-SNAPSHOT/apache-activemq-5.10-20131101.162431-14-bin.tar.gz","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-11-01T18:06:30.851+0000","updated":"2013-11-01T18:06:30.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13813026","id":"13813026","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"body":"Hi Hiram, unfortunately I reproduced the issue with this build - using the army swiss example and sending 1 message at the time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"created":"2013-11-04T17:17:47.209+0000","updated":"2013-11-04T17:17:47.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13814892","id":"13814892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Weird.  I can't reproduce anymore with the latest build.  Perhaps the build I linked to in the issue did not have the fix.  Here's a link to a fresh build:\n\nhttps://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.10-SNAPSHOT/apache-activemq-5.10-20131106.134045-17-bin.tar.gz\n\nCould you double check again?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-11-06T13:48:57.678+0000","updated":"2013-11-06T13:49:07.687+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13825308","id":"13825308","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"I, we have exectly the same error but in a non clustered environment.\n\nWe're using AMQ 5.9 with level db basic configuration.\n\nWe can reproduce it whis about 280 messages per second in a durable topic with one consumer.\nThe dispatched queue is around 0 to 150 messages.\n\nThe error occurs after 1h 50 min processing.\n\nErros :\n2013-11-18 11:52:07,279 | INFO  | Stopping BrokerService[localhost] due to exception, java.io.IOException | org.apache.activemq.util.DefaultIOExceptionHandler | LevelDB IOException handler.\njava.io.IOException\n\tat org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:39)\n\tat org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:543)\n\tat org.apache.activemq.leveldb.LevelDBClient.might_fail_using_index(LevelDBClient.scala:974)\n\tat org.apache.activemq.leveldb.LevelDBClient.collectionCursor(LevelDBClient.scala:1270)\n\tat org.apache.activemq.leveldb.LevelDBClient.queueCursor(LevelDBClient.scala:1194)\n\tat org.apache.activemq.leveldb.DBManager.cursorMessages(DBManager.scala:708)\n\tat org.apache.activemq.leveldb.LevelDBStore$LevelDBMessageStore.recover(LevelDBStore.scala:733)\n\tat org.apache.activemq.broker.region.Topic.doBrowse(Topic.java:588)\n\tat org.apache.activemq.broker.region.Topic.access$100(Topic.java:65)\n\tat org.apache.activemq.broker.region.Topic$6.run(Topic.java:721)\n\tat org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33)\n\tat java.util.TimerThread.mainLoop(Unknown Source)\n\tat java.util.TimerThread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$queueCursor$1.apply(LevelDBClient.scala:1198)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$queueCursor$1.apply(LevelDBClient.scala:1194)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1$$anonfun$apply$mcV$sp$12.apply(LevelDBClient.scala:1272)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1$$anonfun$apply$mcV$sp$12.apply(LevelDBClient.scala:1271)\n\tat org.apache.activemq.leveldb.LevelDBClient$RichDB.check$4(LevelDBClient.scala:315)\n\tat org.apache.activemq.leveldb.LevelDBClient$RichDB.cursorRange(LevelDBClient.scala:317)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply$mcV$sp(LevelDBClient.scala:1271)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply(LevelDBClient.scala:1271)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply(LevelDBClient.scala:1271)\n\tat org.apache.activemq.leveldb.LevelDBClient.usingIndex(LevelDBClient.scala:968)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$might_fail_using_index$1.apply(LevelDBClient.scala:974)\n\tat org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:540)\n\t... 11 more\n2013-11-18 11:52:07,308 | INFO  | Apache ActiveMQ 5.9.0 (localhost, ID:SERVER-50960-1384765393652-0:1) is shutting down | org.apache.activemq.broker.BrokerService | IOExceptionHandler: stopping BrokerService[localhost]\n2013-11-18 11:52:07,370 | WARN  | Failed to browse Topic: CHANGE_TOPIC | org.apache.activemq.broker.region.Topic | ActiveMQ Broker[localhost] Scheduler\norg.apache.activemq.broker.SuppressReplyException: ShutdownBrokerInitiated\n\tat org.apache.activemq.util.DefaultIOExceptionHandler.handle(DefaultIOExceptionHandler.java:134)\n\tat org.apache.activemq.broker.BrokerService.handleIOException(BrokerService.java:2526)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anon$2.run(LevelDBClient.scala:521)\nCaused by: java.io.IOException\n\tat org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:39)\n\tat org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:543)\n\tat org.apache.activemq.leveldb.LevelDBClient.might_fail_using_index(LevelDBClient.scala:974)\n\tat org.apache.activemq.leveldb.LevelDBClient.collectionCursor(LevelDBClient.scala:1270)\n\tat org.apache.activemq.leveldb.LevelDBClient.queueCursor(LevelDBClient.scala:1194)\n\tat org.apache.activemq.leveldb.DBManager.cursorMessages(DBManager.scala:708)\n\tat org.apache.activemq.leveldb.LevelDBStore$LevelDBMessageStore.recover(LevelDBStore.scala:733)\n\tat org.apache.activemq.broker.region.Topic.doBrowse(Topic.java:588)\n\tat org.apache.activemq.broker.region.Topic.access$100(Topic.java:65)\n\tat org.apache.activemq.broker.region.Topic$6.run(Topic.java:721)\n\tat org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33)\n\tat java.util.TimerThread.mainLoop(Unknown Source)\n\tat java.util.TimerThread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$queueCursor$1.apply(LevelDBClient.scala:1198)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$queueCursor$1.apply(LevelDBClient.scala:1194)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1$$anonfun$apply$mcV$sp$12.apply(LevelDBClient.scala:1272)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1$$anonfun$apply$mcV$sp$12.apply(LevelDBClient.scala:1271)\n\tat org.apache.activemq.leveldb.LevelDBClient$RichDB.check$4(LevelDBClient.scala:315)\n\tat org.apache.activemq.leveldb.LevelDBClient$RichDB.cursorRange(LevelDBClient.scala:317)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply$mcV$sp(LevelDBClient.scala:1271)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply(LevelDBClient.scala:1271)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$collectionCursor$1.apply(LevelDBClient.scala:1271)\n\tat org.apache.activemq.leveldb.LevelDBClient.usingIndex(LevelDBClient.scala:968)\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$might_fail_using_index$1.apply(LevelDBClient.scala:974)\n\tat org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:540)\n\t... 11 more\n2013-11-18 11:52:07,470 | INFO  | Stopped LevelDB[C:\\TEST\\apache-activemq-5.9.0\\bin\\..\\data\\LevelDB] | org.apache.activemq.leveldb.LevelDBStore | LevelDB IOException handler.\n2013-11-18 11:52:13,821 | INFO  | The connection to 'tcp://127.0.0.1:59574' is taking a long time to shutdown. | org.apache.activemq.broker.TransportConnection | IOExceptionHandler: stopping BrokerService[localhost]\n2013-11-18 11:52:18,823 | INFO  | The connection to 'tcp://127.0.0.1:59574' is taking a long time to shutdown. | org.apache.activemq.broker.TransportConnection | IOExceptionHandler: stopping BrokerService[localhost]\n2013-11-18 11:52:23,854 | INFO  | The connection to 'tcp://127.0.0.1:59574' is taking a long time to shutdown. | org.apache.activemq.broker.TransportConnection | IOExceptionHandler: stopping BrokerService[localhost]\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-18T13:26:16.772+0000","updated":"2013-11-18T13:32:50.651+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13825318","id":"13825318","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Tenzin,\n\nDoes it also happen with a fresh SNAPSHOT build?\n\nhttp://repository.apache.org/service/local/artifact/maven/redirect?r=snapshots&g=org.apache.activemq&a=apache-activemq&v=5.10-SNAPSHOT&e=tar.gz&c=bin","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-11-18T13:44:44.606+0000","updated":"2013-11-18T13:46:55.298+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13825334","id":"13825334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"I've reproduce one more time the error so i'm trying with the snapshot but i'm on Windows server so the snapshot that i'm testing is this one :\nhttps://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.10-SNAPSHOT/apache-activemq-5.10-20131115.231503-20-bin.zip\n\nThanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-18T14:06:46.019+0000","updated":"2013-11-18T15:05:14.712+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13826331","id":"13826331","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"Hi,\nthe broker stopped 3 times this night after about 6h50min, then 6h50 min then 50min.\nThe error sounds to be the saÃ¹me (except the line number in class) but the broker restart automaticly with the snapshot. \n\n2013-11-19 05:27:43,671 | INFO  | Stopping BrokerService[localhost] due to exception, java.io.IOException | org.apache.activemq.util.DefaultIOExceptionHandler | LevelDB IOException handler.\njava.io.IOException\n\tat org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:39)\n\tat org.apache.activemq.leveldb.LevelDBClient.might_fail(LevelDBClient.scala:554)\n\tat org.apache.activemq.leveldb.LevelDBClient.might_fail_using_index(LevelDBClient.scala:1021)\n\tat org.apache.activemq.leveldb.LevelDBClient.collectionCursor(LevelDBClient.scala:1320)\n\tat org.apache.activemq.leveldb.LevelDBClient.queueCursor(LevelDBClient.scala:1244)\n\tat org.apache.activemq.leveldb.DBManager.cursorMessages(DBManager.scala:708)\n\tat org.apache.activemq.leveldb.LevelDBStore$LevelDBMessageStore.recover(LevelDBStore.scala:747)\n\tat org.apache.activemq.broker.region.Topic.doBrowse(Topic.java:588)\n\tat org.apache.activemq.broker.region.Topic.access$100(Topic.java:65)\n\tat org.apache.activemq.broker.region.Topic$6.run(Topic.java:721)\n\tat org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33)\n\tat java.util.TimerThread.mainLoop(Unknown Source)\n\tat java.util.TimerThread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n\tat org.apache.activemq.leveldb.LevelDBClient$$anonfun$queueCursor$1.apply(LevelDBClient.scala:1248)\n\nIt's not easy to reproduce. It's better with the snapshot but i can't say that no messages are lost with leveldb.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-19T09:06:38.162+0000","updated":"2013-11-19T09:06:38.162+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13826530","id":"13826530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Ok.. so right now it just seems like the master is rebooting due to an error that a new slave seems to recover from right?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-11-19T13:59:19.730+0000","updated":"2013-11-19T13:59:19.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13826571","id":"13826571","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"I'm not in a clustered environment, so there is on one node (that's the difference with Guillaume).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-19T15:09:19.522+0000","updated":"2013-11-19T15:09:19.522+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13827654","id":"13827654","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"I've try this night with AMQ 5.9 levelDb (no cluster) in case of 30 messages / s and there is no error or reboot (about 17h processing).\n\nSo the error appends only with a minimum of messages per second (200 or more).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-20T13:40:24.769+0000","updated":"2013-11-20T13:40:24.769+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13829814","id":"13829814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"body":"Hiram, Sorry for the delay in testing the fix. I will try to come back to you at the beginning of next week.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"created":"2013-11-22T09:19:45.584+0000","updated":"2013-11-22T09:19:45.584+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13831529","id":"13831529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"Hi,\nsome news ! my AMQ is processing 50 messages / s (1 producer/1 consumer, 1 persistent topic) since 3 days and it has failed 9 times, then reboot each time. \nThe messages are not lost, but each time it failed, the producer is waiting and it's not the best for us.\nThe best should be to solve the problem.\n\nThe environment is NT and no cluster.\nMaybe we could change the item title to \"LevelDB corrupted in AMQ (Cluster or Not)\" and the environment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-25T15:12:56.787+0000","updated":"2013-11-25T15:15:09.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13831593","id":"13831593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Hi Tenzin,\n\nYeah if your setup is non-replicated, I'd open a new issue to track the problem since this issue was originally opened on a problem that only affected replicated setups.\n\nAlso it does not seem like the store gets 'corrupted' since you don't loose messages after a restart.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-11-25T16:04:49.953+0000","updated":"2013-11-25T16:04:49.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13831599","id":"13831599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"Ok, sounds great, just give us the new issue number when it'll be done.\nI'm agree to test new snapshot if you need.\nThanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-25T16:17:11.616+0000","updated":"2013-11-25T16:17:11.616+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13832426","id":"13832426","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"Hi, bad news...\nAfter 12 errors and automatic reboot, AMQ seems to be very very slow and accept only one messages/second from the producer.\nPerformances are OK after a manual restart.\n\nSo, i stopped the AMQ and i had a lot of warning about \"Timer already cancelled\".\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-26T09:11:21.312+0000","updated":"2013-11-26T09:11:21.312+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13834918","id":"13834918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=remogloor","name":"remogloor","key":"remogloor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Remo Gloor","active":true,"timeZone":"Europe/Berlin"},"body":"https://issues.apache.org/jira/browse/AMQ-4882\n\nis the unclustered version of this problem. I can reproduce this by 100% just by starting some client that processes and enqueues messages while starting/stopping AMQ. After some restarts AMQ won't start anymore and the log contains the exception posted by others in this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=remogloor","name":"remogloor","key":"remogloor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Remo Gloor","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-28T15:20:39.728+0000","updated":"2013-11-28T15:20:39.728+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13837814","id":"13837814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Hi Remo,\n\nThanks.  Tenzin, does AMQ-4882 seem like your issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-12-03T15:48:21.538+0000","updated":"2013-12-03T16:06:34.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13837842","id":"13837842","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Hiram,\nthe stack is the same, but the environment and the test procedure are not the same.\n\nI can reproduce it in a NON clustered/replicated environment.\nThe test procedure is easy : i send about 200 messages / second in a persiatant durable TOPIC. Messages are consume by only one consumer on real time.\nA few time per day, AMQ FAILED with the same error as i ever posted (the same as Remo) and REBOOT automaticly (AMQ 5.9.0 FAILED and only try to stop).\n\nMy second problem is that after maybe 10 automatic reboot (after failure), AMQ is very slow and accept only a few messages per second from the producer.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-12-03T16:16:58.238+0000","updated":"2013-12-03T16:16:58.238+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13837905","id":"13837905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Tenzin, how big are the messages and are you using transactions?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-12-03T17:07:29.497+0000","updated":"2013-12-03T17:07:29.497+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13837908","id":"13837908","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"body":"Not shure, but i can remember that the average was probably about 4 000 bytes in my use case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=meurwinn","name":"meurwinn","key":"meurwinn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tenzin giatso","active":true,"timeZone":"Europe/Berlin"},"created":"2013-12-03T17:12:43.380+0000","updated":"2013-12-03T17:12:43.380+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13839034","id":"13839034","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Tenzin, since your issue seems different I opened a new issue under AMQ-4917.  It seems specifically related to durable subs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2013-12-04T16:05:16.324+0000","updated":"2013-12-04T16:05:16.324+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13850324","id":"13850324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"body":"Hiram, I can confirm that the problem raised in this ticket is resolved in the most recent build I could pick - apache-activemq-5.10-20131214.063224-32-bin.zip . \nThanks for this. Guillaume\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Gnome","name":"Gnome","key":"gnome","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume","active":true,"timeZone":"Etc/UTC"},"created":"2013-12-17T10:27:38.796+0000","updated":"2013-12-17T10:27:38.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13873508","id":"13873508","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"is this resolved?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2014-01-16T15:43:07.135+0000","updated":"2014-01-16T15:43:07.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12676619/comment/13873655","id":"13873655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Marking issue as resolved since the fix was confirmed by Guillaume. Thx!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2014-01-16T17:45:45.017+0000","updated":"2014-01-16T17:45:45.017+0000"}],"maxResults":33,"total":33,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4837/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1pdqv:"}}