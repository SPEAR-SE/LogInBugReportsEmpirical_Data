{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12832679","self":"https://issues.apache.org/jira/rest/api/2/issue/12832679","key":"AMQ-5798","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-05-26T15:11:23.401+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed May 27 19:34:52 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5798/watchers","watchCount":3,"isWatching":false},"created":"2015-05-26T09:47:12.193+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324951","id":"12324951","name":"5.11.0","archived":false,"released":true,"releaseDate":"2015-02-04"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12329382","id":"12329382","name":"5.11.1","archived":false,"released":true,"releaseDate":"2015-02-17"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-05-27T19:34:52.018+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"- Even if an incorrect (non existing) transport option is used in the \"transportConnector\" URL still Broker does not complain anything about it.  Ideally it should throw an Error or atleast show some WARNING messages.\n\n{code}\n        <transportConnectors>\n            <!-- DOS protection, limit concurrent connections to 1000 and frame size to 100MB -->\n            <transportConnector name=\"openwire\" uri=\"tcp://0.0.0.0:61616?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600&amp;transport.AAA=3600000\"/>\n            <transportConnector name=\"amqp\" uri=\"amqp://0.0.0.0:5672?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600&amp;transport.AAA=3600000\"/>\n            <transportConnector name=\"stomp\" uri=\"stomp://0.0.0.0:61613?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600&amp;transport.AAA=3600000\"/>\n            <transportConnector name=\"mqtt\" uri=\"mqtt://0.0.0.0:1883?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600&amp;transport.AAA=3600000\"/>\n            <transportConnector name=\"ws\" uri=\"ws://0.0.0.0:61614?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600&amp;transport.AAA=3600000\"/>\n        </transportConnectors>\n{code}\n\n- *Notice* even if a non existing option is used *[transport.AAA=3600000]* above still the broker starts fine without reporting any WARN/ERROR. Following entries can be seen in the logs.\n\n{code}\n2015-05-26 14:41:23,429 | INFO  | Using Persistence Adapter: KahaDBPersistenceAdapter[/home/jsensharma/NotBackedUp/DELETE/A/apache-activemq-5.11.1/data/kahadb] | org.apache.activemq.broker.BrokerService | main\n2015-05-26 14:41:23,668 | INFO  | Apache ActiveMQ 5.11.1 (localhost, ID:localhost-60479-1432631483544-0:1) is starting | org.apache.activemq.broker.BrokerService | main\n2015-05-26 14:41:23,684 | INFO  | Listening for connections at: tcp://localhost:61616?maximumConnections=1000&wireFormat.maxFrameSize=104857600&transport.AAA=3600000 | org.apache.activemq.transport.TransportServerThreadSupport | main\n2015-05-26 14:41:23,688 | INFO  | Connector openwire started | org.apache.activemq.broker.TransportConnector | main\n2015-05-26 14:41:23,693 | INFO  | Listening for connections at: amqp://localhost:5672?maximumConnections=1000&wireFormat.maxFrameSize=104857600&transport.AAA=3600000 | org.apache.activemq.transport.TransportServerThreadSupport | main\n2015-05-26 14:41:23,695 | INFO  | Connector amqp started | org.apache.activemq.broker.TransportConnector | main\n2015-05-26 14:41:23,700 | INFO  | Listening for connections at: stomp://localhost:61613?maximumConnections=1000&wireFormat.maxFrameSize=104857600&transport.AAA=3600000 | org.apache.activemq.transport.TransportServerThreadSupport | main\n2015-05-26 14:41:23,703 | INFO  | Connector stomp started | org.apache.activemq.broker.TransportConnector | main\n2015-05-26 14:41:23,708 | INFO  | Listening for connections at: mqtt://localhost:1883?maximumConnections=1000&wireFormat.maxFrameSize=104857600&transport.AAA=3600000 | org.apache.activemq.transport.TransportServerThreadSupport | main\n2015-05-26 14:41:23,711 | INFO  | Connector mqtt started | org.apache.activemq.broker.TransportConnector | main\n2015-05-26 14:41:24,116 | INFO  | Listening for connections at ws://localhost:61614?maximumConnections=1000&wireFormat.maxFrameSize=104857600&transport.AAA=3600000 | org.apache.activemq.transport.ws.WSTransportServer | main\n{code} ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Invalid ActiveMQ connector options should be reported by throwing an error or warning","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=JaySenSharma","name":"JaySenSharma","key":"jaysensharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jaysensharma&avatarId=26856","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaysensharma&avatarId=26856","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaysensharma&avatarId=26856","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaysensharma&avatarId=26856"},"displayName":"JaySenSharma","active":true,"timeZone":"Australia/Sydney"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=JaySenSharma","name":"JaySenSharma","key":"jaysensharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jaysensharma&avatarId=26856","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaysensharma&avatarId=26856","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaysensharma&avatarId=26856","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaysensharma&avatarId=26856"},"displayName":"JaySenSharma","active":true,"timeZone":"Australia/Sydney"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"All","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12832679/comment/14559219","id":"14559219","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"The options that are prefixed \"transport.\" are applied only when a new client connection arrives on that connector so the broker would always start cleanly regardless of incorrect transport level parameters.  It is possible to have it log some warnings about the not applied options on connect but I wouldn't fail the connect just for that reason.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2015-05-26T15:11:23.401+0000","updated":"2015-05-26T15:11:23.401+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12832679/comment/14560343","id":"14560343","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=JaySenSharma","name":"JaySenSharma","key":"jaysensharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jaysensharma&avatarId=26856","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaysensharma&avatarId=26856","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaysensharma&avatarId=26856","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaysensharma&avatarId=26856"},"displayName":"JaySenSharma","active":true,"timeZone":"Australia/Sydney"},"body":"[~tabish121]\nAs you mentioned that \n{code}\n     It is possible to have it log some warnings about the not applied options on connect but I wouldn't fail the connect just for that reason.\n{code}\n\n   Why cant the Warning message appear in the broker log immediately as soon as the broker is started with an incorrect option.  That will help the Broker Admin to proactively fix the transport option if anything is incorrectly set there,  Rather than  waiting for the consumers/producers to connect to the broker.\n\nUse Case:  \n-------------   Suppose tomorrow morning is production launch (broker admin assumes that he has configured everything fine) and thousands of consumers / producers will try to connect to the broker.  The Broker admin will not know that there is something wrong (like incorrect transport option is set  or may be a Typo mistake) until those producer/consumers try to connect to the broker. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=JaySenSharma","name":"JaySenSharma","key":"jaysensharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jaysensharma&avatarId=26856","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jaysensharma&avatarId=26856","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jaysensharma&avatarId=26856","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jaysensharma&avatarId=26856"},"displayName":"JaySenSharma","active":true,"timeZone":"Australia/Sydney"},"created":"2015-05-27T03:27:58.212+0000","updated":"2015-05-27T03:27:58.212+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12832679/comment/14561570","id":"14561570","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Because the transport options are only lazily applied on an actual connect attempt by a client, there is no Transport instance prior to that to test them on as they are applied via reflection.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2015-05-27T19:34:52.018+0000","updated":"2015-05-27T19:34:52.018+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5798/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2f6zj:"}}