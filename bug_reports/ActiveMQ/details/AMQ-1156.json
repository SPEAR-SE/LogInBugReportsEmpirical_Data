{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482114","self":"https://issues.apache.org/jira/rest/api/2/issue/12482114","key":"AMQ-1156","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"parent":{"id":"12482187","key":"AMQ-1233","self":"https://issues.apache.org/jira/rest/api/2/issue/12482187","fields":{"summary":"Bug when setting transportConnector URI options in activemq.xml","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-03-13T11:51:56.216+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Oct 22 20:00:53 UTC 2007","customfield_12310420":"84305","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_22246999941_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2007-10-22T20:00:53.387+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1156/watchers","watchCount":2,"isWatching":false},"created":"2007-02-07T08:17:33.446+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315610","id":"12315610","name":"4.0","archived":false,"released":true},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"issuelinks":[{"id":"12335006","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12335006","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12481933","key":"AMQ-1137","self":"https://issues.apache.org/jira/rest/api/2/issue/12481933","fields":{"summary":"Transactional, non persistent queing very slow under Linux","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12334955","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334955","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"12482187","key":"AMQ-1233","self":"https://issues.apache.org/jira/rest/api/2/issue/12482187","fields":{"summary":"Bug when setting transportConnector URI options in activemq.xml","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-10-22T20:00:53.384+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313894","id":"12313894","name":"Documentation"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313900","id":"12313900","name":"Test Cases"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"*A. Description*\nSetting the wireFormat.tcpNoDelayEnabled flag to true in connection uri's (for example _\"tcp://localhost:61616?wireFormat.tcpNoDelayEnabled\"_) has no effect:\nThe sockets created in ActiveMQ do not have the TcpNoDelay flag set to true.\nYou can verify this for example in the following way: insert the line _System.err.println(sock.getTcpNoDelay());_ at the end of the method\n_org.apache.activemq.transport.tcp.TcpTransport.initialiseSocket_.\nAlso you can try my test at http://www.nabble.com/High-latency-for-small-messages-problem-t3159901.html which makes latency appear if Nagle's algorithm is not disabled.\nThis affects versions 4.0, 4.1.0, and 4.2.0 latest snapshot. I guess 4.0.2 is affected too.\n\n\n\n*B. Reason*\nAfter looking at the source code to understand how the options are set, i saw that in the method org.apache.activemq.transport.tcp.TcpTransportFactory.compositeConfigure the following line appears:\n_Map socketOptions = IntrospectionSupport.extractProperties(options, \"socket.\")_; \n\nand also that the method to set the TcpNoDelay option in class _org.apache.activemq.transport.tcp.TcpTransport_ is called _setTcpNoDelay_ and not _setTcpNoDelayEnabled_\n\nTherefore, I tried to write _\"socket.tcpNoDelay=true\"_ instead of _\"wireFormat.tcpNoDelayEnabled=true\"_ and it *worked!* This is a *workaround*.\n\nBut, _\"wireFormat.tcpNoDelayEnabled\"_ option is not refused (as _\"wireFormat.tcpNoDelayTypoEnabled\"_ would be). The option _\"tcpNoDelay=true\"_ is not refused either, but DOES NOT work either.\n\n\n\n*C. Fix*\nSo, please, for the sake of the poor soul who's next going to try to disable Nagle's algorithm without noticing any effect, and will start looking for the problem elsewhere (and for the sake of consistency also):\n-Either change the documentation (http://www.activemq.org/site/tcp-transport-reference.html and http://www.activemq.org/site/configuring-wire-formats.html) to say that one should use the _socket.tcpNoDelay_ option, or\n-Change the code to obey the documentation (and make it refuse old options like just _\"tcpNoDelay\"_ who have no effect).\n\nPersonally I would change the documentation ASAP so that people know about the _\"socket.tcpNoDelay=true\"_ workaround until next version, and then change the code to recognize the _\"wireFormat.tcpNoDelayTypoEnabled\"_ option. I'd like to point out that the own ActiveMQ test cases use _\"wireFormat.tcpNoDelayTypoEnabled\"_ .\n\n\n\n*D. Related issues*\nThis is related to a previous post of mine: http://www.nabble.com/High-latency-for-small-messages-problem-t3159901.html\nDoing quick synchronized sends showed a 39ms latency if the broker is running in Linux, and a 200ms latency if the broker is in Windows (by the way, if someone knows the bottom reason for this exact latency times, please tell me). Putting the _\"wireFormat.tcpNoDelayTypoEnabled\"_ to true in order to disable Nagle's algorithm had no effect (because ActiveMQ does not recognize it).\n\nVery probably this is also related to issues https://issues.apache.org/activemq/browse/AMQ-1143 and https://issues.apache.org/activemq/browse/AMQ-1137 (in this one probably Helmutt tried to set the wireFormat.tcpNoDelayTypoEnabled without success because of this).","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161947","customfield_12312823":null,"summary":"option \"wireFormat.tcpNoDelayEnabled=true\" is ignored","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidmc","name":"davidmc","key":"davidmc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Martín Clavo","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidmc","name":"davidmc","key":"davidmc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Martín Clavo","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Any.","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482114/comment/12938907","id":"12938907","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidmc","name":"davidmc","key":"davidmc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Martín Clavo","active":true,"timeZone":"Etc/UTC"},"body":"Some more findings...\nIt seems that even the socket.tcpNoDelay option does nothing to set TCP_NODELAY on broker sockets, when written in the activemq.xml file, like for example:\n\n  <broker name=\"broker\" useJmx=\"true\" persistent=\"false\" xmlns=\"http://activemq.org/config/1.0\" deleteAllMessagesOnStartup=\"true\">\n  \n    <transportConnectors>\n      <transportConnector uri=\"tcp://localhost:61616?socket.tcpNoDelay=true;wireFormat.tcpNoDelayEnabled=true;tcpNoDelay=true\"/>\n    </transportConnectors>\n    \n  </broker>\n\nNone of the options I put has any effect on the broker's sockets, but they all are accepted by the options parser without throwing an exception.\nIn some scenarios some delayed ACK timeouts were still appearing because of the broker's sockets having TCP_NODELAY = false even if the client sockets have TCP_NODELAY = true.\n\nSo, if you really want to disable Nagle's Algorithm in ActiveMQ without exception (broker and clients), one should go to the org.apache.activemq.transport.tcp.TcpTransport.initialiseSocket method and add the following line at the end of the method:\n\nsock.setTcpNoDelay(true);","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidmc","name":"davidmc","key":"davidmc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Martín Clavo","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-22T02:48:24.893+0000","updated":"2007-02-22T02:48:24.893+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482114/comment/12938840","id":"12938840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janknecht","name":"janknecht","key":"janknecht","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Helmut Janknecht","active":true,"timeZone":"Etc/UTC"},"body":"This TCP_NODELAY caused also my problem described in AMQ-1137.\nRegardless of which of these options (\"socket.tcpNoDelay=true;wireFormat.tcpNoDelayEnabled=true;tcpNoDelay=true\") I set transactional messaging is slow under Linux.\n\nI patched  the {{org.apache.activemq.transport.tcp.TcpTransport}} class and disbled TCP_NODELAY hard-coded like this:\n\n{code:title=TcpTransport.java|borderStyle=solid}\n  protected void initialiseSocket(Socket sock) throws SocketException {\n    if (socketOptions != null) {\n      IntrospectionSupport.setProperties(socket, socketOptions);\n    }\n\n    socket.setTcpNoDelay(true);  // disable TCP_NODELAY anyway\n    socket.setReceiveBufferSize(socketBufferSize);\n    socket.setSendBufferSize(socketBufferSize);\n\n    sock.setTcpNoDelay(socket.getTcpNoDelay()); // disable TCP_NODELAY also for sock\n\n    try {\n      sock.setReceiveBufferSize(socketBufferSize);\n      sock.setSendBufferSize(socketBufferSize);\n\n    } catch (SocketException se) {\n      log.warn(\"Cannot set socket buffer size = \" + socketBufferSize);\n      log.debug(\"Cannot set socket buffer size. Reason: \" + se, se);\n    }\n    sock.setSoTimeout(soTimeout);\n\n    if (keepAlive != null) {\n      sock.setKeepAlive(keepAlive.booleanValue());\n    }\n\n    //    if (tcpNoDelay != null) {\n    //      sock.setTcpNoDelay(tcpNoDelay.booleanValue());\n    //    }\n\n    if (!socketInitialized) {\n      //      log.info(\"Initialized ACX version $Date: 2007/02/13 16:21 $ of TcpTransport with: sock.getTcpNoDelay=\" + sock.getTcpNoDelay() + \", sock.getReceiveBufferSize=\" + sock.getReceiveBufferSize() + \", sock.getSendBufferSize=\" + sock.getSendBufferSize() + \", socket.getTcpNoDelay=\" + socket.getTcpNoDelay()\n      //          + \", socket.getReceiveBufferSize=\" + socket.getReceiveBufferSize() + \", socket.getSendBufferSize=\" + socket.getSendBufferSize());\n      log.info(\"Initialized ACX patch revision A of TcpTransport with: tcpNoDelay=\" + socket.getTcpNoDelay() + \" and buffer sizes=\" + socket.getReceiveBufferSize());\n      socketInitialized = true;\n    }\n  }\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janknecht","name":"janknecht","key":"janknecht","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Helmut Janknecht","active":true,"timeZone":"Etc/UTC"},"created":"2007-03-13T11:51:56.216+0000","updated":"2007-03-13T11:51:56.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482114/comment/12938919","id":"12938919","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janknecht","name":"janknecht","key":"janknecht","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Helmut Janknecht","active":true,"timeZone":"Etc/UTC"},"body":"On Linux 2.6.16 or 2.6.17 perhaps setting this {{sysctl net.ipv4.tcp_abc=0}} may help as described in https://issues.apache.org/activemq/browse/AMQ-1137#action_38799.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janknecht","name":"janknecht","key":"janknecht","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Helmut Janknecht","active":true,"timeZone":"Etc/UTC"},"created":"2007-03-13T12:43:05.798+0000","updated":"2007-03-13T12:43:05.798+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482114/comment/12938934","id":"12938934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidmc","name":"davidmc","key":"davidmc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Martín Clavo","active":true,"timeZone":"Etc/UTC"},"body":"Indeed Helmut. When you set socket.tcpNoDelay=true on a client (producer or consumer) URI, the client's sockets have TCP_NODELAY properly set to true.\nBut when you try to do the same in activemq.xml for the broker's sockets, it doesn't work. You have to hard code it.\nI found that setting TCP_NODELAY on the producer's sockets is the most important, but setting it on the broker's and consumer's sockets also eliminates many timeouts.\n\nThank you very much for the warning on tcp_abc. I am not using any of those kernels but it is good to know :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidmc","name":"davidmc","key":"davidmc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Martín Clavo","active":true,"timeZone":"Etc/UTC"},"created":"2007-03-14T05:09:24.273+0000","updated":"2007-03-14T05:09:24.273+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482114/comment/12939055","id":"12939055","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Great comments guys.  I just committed a fix to the activemq trunk.\n\nWe now actually update the tcpNoDelay setting on the socket once the wireformat options are negociated.  This allows\nthe client to control if his socket and the server's socket use the option.  By default tcpNoDelay is enabled.\nthe client should use a URL like tcp://localhost:61616?wireFormat.tcpNoDelayEnabled=false to disable tcpNoDelay on\n both the client and the server socket.\n\nIf you guys get a chance could you confirm that this fixes the issue?? thanks.  Hiram","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2007-09-05T21:53:22.890+0000","updated":"2007-09-05T21:53:22.890+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482114/comment/12939040","id":"12939040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Fix was in revision 573080","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2007-09-05T21:55:21.357+0000","updated":"2007-09-05T21:55:21.357+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482114/comment/12939157","id":"12939157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Fixed in 5.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2007-10-22T20:00:53.328+0000","updated":"2007-10-22T20:00:53.328+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1156/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s2wn:"}}