{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481073","self":"https://issues.apache.org/jira/rest/api/2/issue/12481073","key":"AMQ-1096","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-01-11T09:57:58.530+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jan 11 09:57:58 UTC 2007","customfield_12310420":"84491","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2552076536_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2007-01-11T09:57:58.536+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1096/watchers","watchCount":0,"isWatching":false},"created":"2006-12-12T21:03:22.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aco","name":"aco","key":"aco","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adrian Co","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-01-11T09:57:58.533+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"Reproduction:\n\n1) Untar the binary distribution.\n2) Run bin/activemq and note what logging looks like (you should see output to the console)\n3) Stop the broker.\n4) mv conf/log4j.properties foo/log4j.properties\n5) export CLASSPATH=/path/to/foo/\n6) export ACTIVEMQ_CLASSPATH=/path/to/foo/\n7) Run './activemq --extdir /path/to/foo\n\nNow note there is no log output even though there are 3 different attempts to set the proper directory. This is a regression from 4.0 to 4.1.\n\nThere are 2 root problems in Main.java. First, 'classpaths' doesn't actually pull from the classpath. The only thing that ever gets added to classpaths is the hard coded 'conf' directory. Second, directories specified with --extdir have jars and zips added, but not the directories themselves.\n\nThe attached patch totally removes the vestigial classpaths, and fixes extdir to pull in directories. This means that step 7 now works, but steps 5 and 6 are still useless. I like having only one way to specify classpath, but I could see others wanting the CLASSPATH and ACTIVEMQ_CLASSPATH settings to work.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460731","id":"12460731","filename":"ASF.LICENSE.NOT.GRANTED--logpatch.diff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jheitmann","name":"jheitmann","key":"jheitmann","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Heitmann","active":true,"timeZone":"Etc/UTC"},"created":"2006-12-12T21:03:22.000+0000","size":2346,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12460731/ASF.LICENSE.NOT.GRANTED--logpatch.diff"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10042","value":"Patch Available","id":"10042"}],"customfield_12310921":null,"customfield_12310920":"254939","customfield_12312823":null,"summary":"activemq-console only has limited classpath/extensions directory functionality","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jheitmann","name":"jheitmann","key":"jheitmann","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Heitmann","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jheitmann","name":"jheitmann","key":"jheitmann","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Heitmann","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481073/comment/12936690","id":"12936690","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aco","name":"aco","key":"aco","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adrian Co","active":true,"timeZone":"Etc/UTC"},"body":"Fix added to r495172\n\nAdded a activemq.classpath system property to extend the classpath of activemq\n\nBy default it contains activemq.home/conf.\n\nIt can be extended by specifying additional paths via the ACTIVEMQ_CLASSPATH environment variable separated by semi-colons.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aco","name":"aco","key":"aco","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adrian Co","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-11T09:57:58.530+0000","updated":"2007-01-11T09:57:58.530+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1096/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i180uf:"}}