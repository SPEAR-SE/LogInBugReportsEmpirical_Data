{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483603","self":"https://issues.apache.org/jira/rest/api/2/issue/12483603","key":"AMQ-2496","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315626","id":"12315626","description":"","name":"5.5.0","archived":false,"released":true,"releaseDate":"2011-04-01"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2009-11-19T10:24:18.051+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Mar 23 17:29:05 UTC 2011","customfield_12310420":"46507","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_42504812806_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-03-23T17:09:02.300+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2496/watchers","watchCount":2,"isWatching":false},"created":"2009-11-16T18:15:29.513+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"issuelinks":[{"id":"12338222","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12338222","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"12495487","key":"AMQ-3134","self":"https://issues.apache.org/jira/rest/api/2/issue/12495487","fields":{"summary":"Add support of MS SQL JDBC driver (version 3.0)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:37.649+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Env:\n- ActiveMQ 5.3.0\n- deployed as RAR on JBoss\n- database : MS SQL 2008\n\nWhen the broker starts up for the first time, table ACTIVEMQ_MSGS  is not getting created automatically which throws the below exception and the broker never comes up.\n\nReason: java.io.IOException: Failed to get last broker message id: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'ACTIVEMQ_MSGS'.\njava.io.IOException: Failed to get last broker message id: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'ACTIVEMQ_MSGS'.\nat org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:33)\nat org.apache.activemq.store.jdbc.JDBCPersistenceAdapter.getLastMessageBrokerSequenceId(JDBCPersistenceAdapter.java:170)\nat org.apache.activemq.store.journal.JournalPersistenceAdapter.getLastMessageBrokerSequenceId(JournalPersistenceAdapter.java:212)\nat org.apache.activemq.broker.region.DestinationFactoryImpl.getLastMessageBrokerSequenceId(DestinationFactoryImpl.java:140)\nat org.apache.activemq.broker.region.RegionBroker.<init>(RegionBroker.java:106)\nat org.apache.activemq.broker.jmx.ManagedRegionBroker.<init>(ManagedRegionBroker.java:94)\nat org.apache.activemq.broker.BrokerService.createRegionBroker(BrokerService.java:1695)\nat org.apache.activemq.broker.BrokerService.createRegionBroker(BrokerService.java:1689)\nat org.apache.activemq.broker.BrokerService.createBroker(BrokerService.java:1649)\nat org.apache.activemq.broker.BrokerService.getBroker(BrokerService.java:667)\nat org.apache.activemq.broker.BrokerService.getAdminConnectionContext(BrokerService.java:1866)\nat org.apache.activemq.broker.BrokerService.startDestinations(BrokerService.java:1853)\nat org.apache.activemq.broker.BrokerService.start(BrokerService.java:450)\nat org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:56)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)\n\nOnly workaround is to create the table ACTIVEMQ_MSGS manually and restart the broker.\n\nHere is my broker-config.xml :\n\n<beans xmlns=\"http://activemq.apache.org/schema/core\">\n\n  <bean xmlns=\"\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"/>\n    \n  <bean xmlns=\"\" id=\"my-ds\" class=\"org.apache.commons.dbcp.BasicDataSource\" destroy-method=\"close\">\n       <property name=\"driverClassName\" value=\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"/>\n       <property name=\"url\" value=\"jdbc:sqlserver://mydb:1433;databaseName=myds\"/>\n       <property name=\"username\" value=\"sql\"/>\n       <property name=\"password\" value=\"sql\"/>\n       <property name=\"initialSize\" value=\"10\"/>\n       <property name=\"poolPreparedStatements\" value=\"true\"/>\n  </bean>\n  \n  <!--  shutdown hook is disabled as RAR classloader may be gone at shutdown -->\n  <broker useJmx=\"true\" brokerName=\"sample.broker1\" useShutdownHook=\"false\">\n\n     <destinations>\n\t    <topic physicalName=\"pocket\" />\n     </destinations>\n    \n     <managementContext>\n       <!-- use appserver provided context instead of creating one,\n            for jboss use: -Djboss.platform.mbeanserver -->\n       <managementContext createConnector=\"false\"/>\n     </managementContext>\n\n    <persistenceAdapter>\n      \t<!-- <amqPersistenceAdapter syncOnWrite=\"false\" directory=\"${jboss.server.data.dir}/activemq\" maxFileLength=\"20 mb\"/>  -->\n        <!-- <journaledJDBC journalLogFiles=\"5\" dataDirectory=\"${jboss.server.data.dir}/activemq\"/> -->\n        <!-- To use a different datasource, use th following syntax : -->\n            \n        <!-- <kahaPersistenceAdapter directory=\"${jboss.server.data.dir}/activemq\" maxDataFileLength=\"33554432\"/> -->\n      \n     \t<journaledJDBC journalLogFiles=\"5\" dataDirectory=\"${jboss.server.data.dir}/activemq\" dataSource=\"#my-ds\" useDatabaseLock=\"false\" />\n     \t\n    </persistenceAdapter>\n    \n    <transportConnectors>\n      \t<transportConnector name=\"sample.broker1\" uri=\"tcp://localhost:3030\" discoveryUri=\"multicast://default\"/>\n    </transportConnectors>\n    \n  </broker>\n</beans>\n\n\nNote that I don't see the issue with MSSQL 2000 2005, not sure whats the problem with 2008 version.\nLet me know if there is any cofiguration missing which would resolve the issue with MS SQL 2008 and any other databases which could have the sample problem.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"255256","customfield_12312823":null,"summary":"journaledJDBC not creating ACTIVEMQ_MSGS with MS SQL 2008","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"MS SQL 2008","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12941834","id":"12941834","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"body":"Here is the log when create ACTIVEMQ_MSGS failed, it would be great to know what the problem is for MS SQL 2008.\n\n2009-11-18 09:08:32,080 INFO  [STDOUT] 2009-11-18 09:08:32,080 [ActiveMQ Broker] WARN  DefaultJDBCAdapter             - Could not create JDBC tables; they could already exist. Failure was: CREATE TABLE ACTIVEMQ_MSGS(ID BIGINT NOT NULL, CONTAINER VARCHAR(250), MSGID_PROD VARCHAR(250), MSGID_SEQ BIGINT, EXPIRATION BIGINT, MSG BLOB, PRIMARY KEY ( ID ) ) Message: Column, parameter, or variable #6: Cannot find data type BLOB. SQLState: S0007 Vendor code: 2715\n2009-11-18 09:08:32,314 INFO  [STDOUT] 2009-11-18 09:08:32,314 [ActiveMQ Broker] WARN  DefaultJDBCAdapter             - Could not create JDBC tables; they could already exist. Failure was: CREATE INDEX ACTIVEMQ_MSGS_MIDX ON ACTIVEMQ_MSGS (MSGID_PROD,MSGID_SEQ) Message: Cannot find the object \"ACTIVEMQ_MSGS\" because it does not exist or you do not have permissions. SQLState: S00012 Vendor code: 1088\n2009-11-18 09:08:32,580 INFO  [STDOUT] 2009-11-18 09:08:32,580 [ActiveMQ Broker] WARN  DefaultJDBCAdapter             - Could not create JDBC tables; they could already exist. Failure was: CREATE INDEX ACTIVEMQ_MSGS_CIDX ON ACTIVEMQ_MSGS (CONTAINER) Message: Cannot find the object \"ACTIVEMQ_MSGS\" because it does not exist or you do not have permissions. SQLState: S00012 Vendor code: 1088\n2009-11-18 09:08:32,830 INFO  [STDOUT] 2009-11-18 09:08:32,830 [ActiveMQ Broker] WARN  DefaultJDBCAdapter             - Could not create JDBC tables; they could already exist. Failure was: CREATE INDEX ACTIVEMQ_MSGS_EIDX ON ACTIVEMQ_MSGS (EXPIRATION) Message: Cannot find the object \"ACTIVEMQ_MSGS\" because it does not exist or you do not have permissions. SQLState: S00012 Vendor code: 1088\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-18T17:27:55.929+0000","updated":"2009-11-18T17:27:55.929+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12941832","id":"12941832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"body":"Issue is that for column ACTIVEMQ_MSGS.MSG  type given as BLOB instead of IMAGE.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-18T17:46:22.714+0000","updated":"2009-11-18T17:46:22.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12941838","id":"12941838","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"Looks like image should be the preferred data type (for BLOB)  for all SQLServer instances post 2000\n\nNote: \"Binary Data\" section of http://technet.microsoft.com/en-us/library/bb497065.aspx\nand\nhttp://technet.microsoft.com/en-us/library/cc917636.aspx\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-19T10:24:18.051+0000","updated":"2009-11-19T10:24:18.051+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12941957","id":"12941957","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acreeger","name":"acreeger","key":"acreeger","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adam Creeger","active":true,"timeZone":"Etc/UTC"},"body":"Actually, it looks like the bug is that the correct JDBC Adapter isn't being used. You can fix this by specifying it manually in activemq.xml.\n\nA simple example:\n\n{code:XML|title=Excerpt from activemq.xml}\n<persistenceAdapter>\n    <jdbcPersistenceAdapter  dataSource=\"#mssql-ds\">\n        <adapter><transact-jdbc-adapter/></adapter>\n    </jdbcPersistenceAdapter>\n</persistenceAdapter>\n{code}\n\nOnce you do this, it will use the Image type.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acreeger","name":"acreeger","key":"acreeger","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adam Creeger","active":true,"timeZone":"Etc/UTC"},"created":"2009-12-15T00:07:35.726+0000","updated":"2009-12-15T00:07:35.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12942556","id":"12942556","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"body":"But your configuration is not for journaledJDBC.\n\nWill this work for journaledJDBC?\n\n<persistenceAdapter>\n<journaledJDBC journalLogFiles=\"5\" dataDirectory=\"${jboss.server.data.dir}/activemq\" dataSource=\"#my-ds\" useDatabaseLock=\"false\" />\n<adapter><transact-jdbc-adapter/></adapter>\n</journaledJDBC \n</persistenceAdapter>\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-28T19:55:00.140+0000","updated":"2010-04-28T19:55:00.140+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12942554","id":"12942554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"should do, those attributes are exposed and they delegate to the underlying persistence adapter.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-28T20:15:35.194+0000","updated":"2010-04-28T20:15:35.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12942638","id":"12942638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"body":"After making the above change, it does create all the tables for MSSQL2008, basically this issue was seen for all sql versions where sqljdbc4.jar is used.\n\nNow the issue is resolved for MSSQL, with the config change we are having a regression and none of the tables are getting created for ORACLE with the config change.\n\n2010-05-13 14:25:02,826 INFO [STDOUT] 2010-05-13 14:25:02,826 [ActiveMQ Broker] WARN DefaultJDBCAdapter - Could not create JDBC tables; they could already exist. Failure was: CREATE TABLE ACTIVEMQ_MSGS(ID BIGINT NOT NULL, CONTAINER VARCHAR(250), MSGID_PROD VARCHAR(250), MSGID_SEQ BIGINT, EXPIRATION BIGINT, MSG IMAGE, PRIMARY KEY ( ID ) ) Message: ORA-00902: invalid datatype \n SQLState: 42000 Vendor code: 902 \n\nBIGINT is not a valid colum type in oracle.\n\nWe will have to revert the above config change and live with workaround of manually creating tables for MSSQL2008.\n\nIs theren't a solution yet on this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-13T14:45:40.284+0000","updated":"2010-05-13T14:45:40.284+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12942643","id":"12942643","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"body":"Can someone advice on this issue?  Adviced config change in broker-config.xml only solves the problem for MSSQL, it created a regression in ORACLE now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-14T14:53:18.881+0000","updated":"2010-05-14T14:53:18.881+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12942642","id":"12942642","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"in the short term can you treat these as two different configurations? The issue is differences in SLQ dialect, no?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-14T14:59:56.029+0000","updated":"2010-05-14T14:59:56.029+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12942650","id":"12942650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"body":"Its not just between ORACLE and MSSQL, we need to support any database for our application.  We can't have different configurations based on databases.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-14T19:34:34.541+0000","updated":"2010-05-14T19:34:34.541+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/12942665","id":"12942665","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"body":"Same issue is seen with DB2 as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiskill","name":"hiskill","key":"hiskill","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"hiskill","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-17T14:22:56.719+0000","updated":"2010-05-17T14:22:56.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/13010143","id":"13010143","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"The discovery mechanism is very simple, the org.apache.activemq.store.jdbc.JDBCPersistenceAdapter#loadAdapter method of http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/main/java/org/apache/activemq/store/jdbc/JDBCPersistenceAdapter.java?view=markup\ngenerates a properties file name from the driver name to load from:\nhttp://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/main/resources/META-INF/services/org/apache/activemq/store/jdbc/\n\nso it is a case of a string match. It may already be covered by microsoft_sql_server_jdbc_driver_3_0. Or that file can be copied to a matching name.\nThere is a warning and info message of the form: \"driver override not found for\" that will identify what the name needs to be for MSSQL 2008.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-03-23T14:26:44.297+0000","updated":"2011-03-23T14:26:44.297+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/13010144","id":"13010144","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"downgrading till we find the driver name for mssql 2008","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-03-23T14:27:24.780+0000","updated":"2011-03-23T14:27:24.780+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/13010161","id":"13010161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccorsi","name":"ccorsi","key":"ccorsi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Claudio Corsi","active":true,"timeZone":"America/Montreal"},"body":"Gary,\n\nThe microsoft driver name is com.microsoft.sqlserver.jdbc.SQLServerDriver.\n\nYou can download the jdbc drivers for mssql 2008 is located at:\n\nhttp://www.microsoft.com/downloads/en/details.aspx?FamilyID=a737000d-68d0-4531-b65d-da0f2a735707&displaylang=en\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccorsi","name":"ccorsi","key":"ccorsi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Claudio Corsi","active":true,"timeZone":"America/Montreal"},"created":"2011-03-23T14:59:50.003+0000","updated":"2011-03-23T14:59:50.003+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/13010221","id":"13010221","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"Claudio, thanks for the link. It looks like that driver has a default name of Microsoft SQL Server JDBC Driver 3.0 which will match the existing microsoft_sql_server_jdbc_driver_3_0 properties file. Without a working mysql server I cannot determine if the runtime metadata from a new connection is any different.\nCan you verify with a current 5.5-SNAPSHOT and mssql 2008?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-03-23T17:06:00.622+0000","updated":"2011-03-23T17:06:00.622+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/13010224","id":"13010224","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"The fix for https://issues.apache.org/jira/browse/AMQ-3134 seems to sort this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-03-23T17:09:02.313+0000","updated":"2011-03-23T17:09:02.313+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483603/comment/13010241","id":"13010241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccorsi","name":"ccorsi","key":"ccorsi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Claudio Corsi","active":true,"timeZone":"America/Montreal"},"body":"Gary, unfortunately I cannot verify this because I do not have windows machine available.  I might be able to get one setup. I'll let you know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccorsi","name":"ccorsi","key":"ccorsi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Claudio Corsi","active":true,"timeZone":"America/Montreal"},"created":"2011-03-23T17:29:05.481+0000","updated":"2011-03-23T17:29:05.481+0000"}],"maxResults":17,"total":17,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2496/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i182sv:"}}