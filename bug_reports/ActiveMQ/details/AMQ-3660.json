{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12538456","self":"https://issues.apache.org/jira/rest/api/2/issue/12538456","key":"AMQ-3660","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/9","id":"9","description":"Unresolved","name":"Unresolved"},"customfield_12312322":null,"customfield_12310220":"2012-09-19T12:58:08.902+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Sep 19 12:58:08 UTC 2012","customfield_12310420":"223960","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_137032167789_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-05-19T21:12:10.018+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3660/watchers","watchCount":3,"isWatching":false},"created":"2012-01-15T20:42:42.291+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["4096","4k","activemq","firefox","js"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12318549","id":"12318549","name":"5.5.1","archived":false,"released":true,"releaseDate":"2011-10-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12317974","id":"12317974","description":"Next v5 maintenance release","name":"5.6.0","archived":false,"released":true,"releaseDate":"2012-05-07"}],"issuelinks":[{"id":"12347187","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12347187","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12538650","key":"AMQ-3666","self":"https://issues.apache.org/jira/rest/api/2/issue/12538650","fields":{"summary":"Javascript AMQ Connector XML response truncated in Firefox","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-19T21:12:10.071+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Hello,\n\nI report a small glitch that affects the client-side Ajax script {{amq.js}} and Firefox with big messages. It is very easy to reproduce: \n* start the ActiveMQ broker locally\n* open Firefox (I am using version 8.0.1) and another browser of your choice, \n* point both of them to the chat example and join the chat,\n* send a BIG string (more than 4096 chars) from the second browser,\n* check the length of the string that appears on Firefox: exactly *4096 chars*.\n\nAfter a bit of googling I found out that [Firefox limits the size of XML nodes to 4K|http://www.coderholic.com/firefox-4k-xml-node-limit/], while in {{amq.js}} every node is handled as a separate message:\n{code:javascript}\n// Loop thru and handle each <message>\nfor (var j = 0; j < responseElement.childNodes.length; j++) {\n    handler(responseElement.childNodes[j]);\n}\n{code}\n\nI found out about the bug while sending rather large JSON strings, that obviously could not be parsed. I fixed that in my code with a quite naive patch for {{amq.js}} that \"glues\" nodes together in a string and handles them as a single message, but that is not always enough (e.g. the message handler in {{chat.js}} does not accept strings).\n\nIf you guys have clever hints I will be happy to work on a patch for this.\n\nCiao,\nClaudio","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"81546","customfield_12312823":null,"summary":"amq.js breaks messages longer than 4KB in Firefox","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=claudio.squarcella","name":"claudio.squarcella","key":"claudio.squarcella","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=claudio.squarcella&avatarId=12662","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=claudio.squarcella&avatarId=12662","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=claudio.squarcella&avatarId=12662","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=claudio.squarcella&avatarId=12662"},"displayName":"Claudio Squarcella","active":true,"timeZone":"Europe/Amsterdam"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=claudio.squarcella","name":"claudio.squarcella","key":"claudio.squarcella","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=claudio.squarcella&avatarId=12662","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=claudio.squarcella&avatarId=12662","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=claudio.squarcella&avatarId=12662","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=claudio.squarcella&avatarId=12662"},"displayName":"Claudio Squarcella","active":true,"timeZone":"Europe/Amsterdam"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Standard environment, with running ActiveMQ broker and e.g. the chat demo","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538456/comment/13458660","id":"13458660","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"body":"What about other browsers? Is this a firefox limit only?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"created":"2012-09-19T12:58:08.902+0000","updated":"2012-09-19T12:58:08.902+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3660/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0eb0f:"}}