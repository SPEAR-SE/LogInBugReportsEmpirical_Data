{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482773","self":"https://issues.apache.org/jira/rest/api/2/issue/12482773","key":"AMQ-1098","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2008-04-10T19:52:25.418+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Dec 22 13:34:23 UTC 2008","customfield_12310420":"84249","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_43027781479_*|*_5_*:*_2_*:*_2757674470_*|*_4_*:*_1_*:*_18136381994","customfield_12312321":null,"resolutiondate":"2008-12-22T13:34:23.943+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1098/watchers","watchCount":1,"isWatching":false},"created":"2006-12-13T17:30:26.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315591","id":"12315591","description":"ASF Incubation work","name":"incubation","archived":false,"released":true,"releaseDate":"2007-01-27"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-12-22T13:34:23.942+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Trying to run the sample producer out of the main trunk using an https url throws a ClassCastException.  I've tracked this down in the code to the fact that HttpTransportFactory.java expects to find an HttpClientTransport but HttpsTransportFactory does not override createTransport() to create an HttpsClientTransport instead (HttpsClientTransport does not exist as a class).\n\nThanks,\n\nHernan\n\n$ ant producer\nBuildfile: build.xml\n\ninit:\n\ncompile:\n\nproducer:\n     [echo] Running producer against server at $url = https://my.example.com:2222 for subject $subject = TEST.FOO\n     [java] Connecting to URL: https://my.example.com:7043\n     [java] Publishing a Message with size 1000 to topic: TEST.FOO\n     [java] Using non-persistent messages\n     [java] Sleeping between publish 0 ms\n     [java] javax.jms.JMSException: Could not create Transport. Reason: java.lang.ClassCastException: org.apache.activemq.transport.https.HttpsTransport\n     [java] Caught: javax.jms.JMSException: Could not create Transport. Reason: java.lang.ClassCastException: org.apache.activemq.transport.https.HttpsTransport\n     [java]     at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:33)\n     [java]     at org.apache.activemq.ActiveMQConnectionFactory.createTransport(ActiveMQConnectionFactory.java:229)\n     [java]     at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:242)\n     [java]     at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:211)\n     [java]     at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:158)\n     [java]     at ProducerTool.run(Unknown Source)\n     [java]     at ProducerTool.main(Unknown Source)\n     [java] Caused by: java.lang.ClassCastException: org.apache.activemq.transport.https.HttpsTransport\n     [java]     at org.apache.activemq.transport.http.HttpTransportFactory.compositeConfigure(HttpTransportFactory.java:62)\n     [java]     at org.apache.activemq.transport.TransportFactory.configure(TransportFactory.java:213)\n     [java]     at org.apache.activemq.transport.TransportFactory.doConnect(TransportFactory.java:117)\n     [java]     at org.apache.activemq.transport.TransportFactory.doConnect(TransportFactory.java:43)\n     [java]     at org.apache.activemq.transport.TransportFactory.connect(TransportFactory.java:77)\n     [java]     at org.apache.activemq.ActiveMQConnectionFactory.createTransport(ActiveMQConnectionFactory.java:227)\n     [java]     ... 5 more\n\nBUILD SUCCESSFUL\nTotal time: 2 seconds\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460978","id":"12460978","filename":"amq-1098potentialpatch.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jsilva","name":"jsilva","key":"jsilva","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Silva","active":true,"timeZone":"Etc/UTC"},"created":"2008-04-10T19:52:25.381+0000","size":2298,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12460978/amq-1098potentialpatch.zip"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460984","id":"12460984","filename":"HttpsTransportFactory.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"created":"2008-05-26T15:45:13.705+0000","size":703,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460984/HttpsTransportFactory.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"233339","customfield_12312823":null,"summary":"Use of https transport throws ClassCastException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hernan.otero","name":"hernan.otero","key":"hernan.otero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hernan Otero","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hernan.otero","name":"hernan.otero","key":"hernan.otero","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hernan Otero","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Ubuntu Linux & Mac OS X","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482773/comment/12939551","id":"12939551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jsilva","name":"jsilva","key":"jsilva","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Silva","active":true,"timeZone":"Etc/UTC"},"body":"Attached in amq-1098potentialpatch.zip are a few fixed files that appear to address the classcastexception...basically made an httpsclienttransport which just extends the existing HttpClientTransport.  Because the underlying HttpClient works with http and https, there are no further changes needed.  Then in the HttpsTransportFactory I return the newly created httpsclienttransport...since it extends the httpclienttransport there is no longer the classcastexception.  Tested and seems to work for my purposes, patch against v4.1.1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jsilva","name":"jsilva","key":"jsilva","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Silva","active":true,"timeZone":"Etc/UTC"},"created":"2008-04-10T19:52:25.418+0000","updated":"2008-04-10T19:53:17.249+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482773/comment/12939606","id":"12939606","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"patch applied in rev 651320.. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2008-04-24T17:40:07.446+0000","updated":"2008-04-24T17:40:07.446+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482773/comment/12939701","id":"12939701","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"body":"HttpsTransportFactory does not override doBind(URI location); therefore, HttpTransportFactory's doBind(URI location) is referenced instead. So a 'https://' transportConnector ends up using a HttpTransportServer instead of HttpsTransportServer object. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"created":"2008-05-26T15:41:21.919+0000","updated":"2008-05-26T15:41:21.919+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482773/comment/12939980","id":"12939980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jsilva","name":"jsilva","key":"jsilva","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Silva","active":true,"timeZone":"Etc/UTC"},"body":"Original patch resolves issue for 4.1.1, additionally applying Joe's patch seems to resolve issues in 5.1.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jsilva","name":"jsilva","key":"jsilva","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Silva","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-21T18:08:08.750+0000","updated":"2008-07-21T18:08:08.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482773/comment/12940591","id":"12940591","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"patch applied to trunk, r728687 thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-22T13:34:23.878+0000","updated":"2008-12-22T13:34:23.878+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1098/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i14bkv:"}}