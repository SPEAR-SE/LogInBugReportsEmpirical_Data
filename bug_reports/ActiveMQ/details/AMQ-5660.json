{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12781635","self":"https://issues.apache.org/jira/rest/api/2/issue/12781635","key":"AMQ-5660","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315591","id":"12315591","description":"ASF Incubation work","name":"incubation","archived":false,"released":true,"releaseDate":"2007-01-27"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2015-03-13T21:25:26.911+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Mar 18 18:40:58 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_316628580_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-03-16T14:05:23.011+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5660/watchers","watchCount":3,"isWatching":false},"created":"2015-03-12T22:08:14.514+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317974","id":"12317974","description":"Next v5 maintenance release","name":"5.6.0","archived":false,"released":true,"releaseDate":"2012-05-07"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-06-05T16:35:04.658+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I upgraded my ActiveMQ from 5.2.1 to 5.6.0.\nI have durable topic subscribers .\nI see the \"subcribers\" tab in activemqConsole and i find that the these subscribers are able to consume the messages from the topic . \nThe \"subcribers\" tab shows up all the counter's correctly - the dispatched counter equals enqueue counter and dequeue counters.\n\nHowever, When i check the topic's enque and dequeue count in \"Topics\" tab, I see the dequeue count is always zero and not increased ,even thought the subcribers are reported to consume them as seen in the \"subcribers\" tab.\n\nI did not face this issue with my previous version of ActiveMQ - version 5.2.1. \nVersion ActiveMQ 5.2.1 works very good in showing up the correct dequeue count for durable topic subscribers.\n\nMy subscribers are on different versions of ActiveMQ.\n\nPlease advise the steps that i need to consider get the dequeue counter match with the enqueue counter .\n\nI came accross exactly the same issue on Jira for version 5.8.0.  -- https://issues.apache.org/jira/browse/AMQ-4965\nIf this is a bug to be fixed, please help us get a fix for this.\n\nThanks \nJessy","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Dequeue count for Topics does not increase for durable subscribers","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jessy_2012","name":"jessy_2012","key":"jessy_2012","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jessy","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jessy_2012","name":"jessy_2012","key":"jessy_2012","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jessy","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781635/comment/14361127","id":"14361127","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"body":"Because of the nature of topics (being a broadcast) dequeue count is a little tricky.  For example, how many times do you count a message consumed by multiple subscribers?  Once after they all have consumed it (and what if one subscriber drops before acking the message)?  Once per subscriber (leading to dequeue growing faster than enqueue)?\n\nAnd what about counting dequeue on non-durable subscriptions?  For inflight messages or only acked messages?  Messages published to a Topic with no consumers?\n\nIn other words, the meaning of dequeue on a Topic itself is hard to nail down, and even if it were nailed down, it would be hard to use reliably.  Also keep in mind that ActiveMQ does not store messages on Topics, but instead stores them on the subscriptions.\n\nTherefore, I find the best method of watching enqueue and dequeue counts for Topics is looking at individual subscriptions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"created":"2015-03-13T21:25:26.911+0000","updated":"2015-03-13T21:25:26.911+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781635/comment/14363221","id":"14363221","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Same issue being reported as AMQ-4965","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2015-03-16T14:05:23.073+0000","updated":"2015-03-16T14:05:23.073+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781635/comment/14367643","id":"14367643","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jessy_2012","name":"jessy_2012","key":"jessy_2012","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jessy","active":true,"timeZone":"Etc/UTC"},"body":"Hi Arthur Naseef / Timothy Bish \n\nI had many subscribers on my topic.\nOne of them was not consuming the messages because it seemed to be crawling - Even though this particular subscriber did not show up as offline in the \"subscribers\" tab.\nThe subscribers in my application are expected to be durable ones.\nI restarted the subscriber which was crawling and apparently the dequeue counter grow up faster and as you said the messages on this subscriber was consumed. This resolved the bottleneck.\nThanks for giving me the various scenarios to be considered to debug the issues around dequeue count for topic subscribers.\nIf i face any issues on any other usecase scenario, i will raise a new requeust.\nWe appreciate the quick feedback.\nThanks everyone.  \n\nJessy\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jessy_2012","name":"jessy_2012","key":"jessy_2012","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jessy","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-18T18:40:58.519+0000","updated":"2015-03-18T18:40:58.519+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5660/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i26plz:"}}