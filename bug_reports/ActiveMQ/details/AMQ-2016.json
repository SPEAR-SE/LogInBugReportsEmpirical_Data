{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483060","self":"https://issues.apache.org/jira/rest/api/2/issue/12483060","key":"AMQ-2016","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"parent":{"id":"12482417","key":"AMQ-2082","self":"https://issues.apache.org/jira/rest/api/2/issue/12482417","fields":{"summary":"Message Groups fail to preserve exclusivity when a new consumer is added.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-01-07T22:44:56.147+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Aug 03 13:30:34 UTC 2009","customfield_12310420":"75124","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_4986067746_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2009-01-23T13:29:06.414+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2016/watchers","watchCount":3,"isWatching":false},"created":"2008-11-26T20:27:58.668+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315618","id":"12315618","description":"","name":"5.1.0","archived":false,"released":true,"releaseDate":"2008-05-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315619","id":"12315619","description":"","name":"5.2.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-08-03T13:30:34.558+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Messages are processed FIFO when messages with different groups are sent to a queue and then the consumers are started. \nIf the messages are sent after the consumers are started, then message grouping works as expected.\nTwo JUnit tests are attached. \n1. MessageGroupTest.java starts up 3 consumers and then sends 30 messages evenly distributed across 3 groups A, B, and C. \nEach consumer then gets assigned a group and the ordering is as expected based on the different sleep intervals defined as seen in the log below\n{quote}\n2008-11-26 15:06:09,841 INFO  [main] [com.test.MessageGroupTest] 30 messages sent to group A/B/C\n2008-11-26 15:06:09,841 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 9\n2008-11-26 15:06:09,841 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 9\n2008-11-26 15:06:09,841 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 9\n2008-11-26 15:06:09,934 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 8\n2008-11-26 15:06:10,044 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 7\n2008-11-26 15:06:10,137 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 6\n2008-11-26 15:06:10,247 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 5\n2008-11-26 15:06:10,340 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 4\n2008-11-26 15:06:10,450 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 3\n2008-11-26 15:06:10,544 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 2\n2008-11-26 15:06:10,653 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 1\n2008-11-26 15:06:10,747 INFO  [Thread-4] [com.test.MessageGroupTest] worker3 received msg C remaining 0\n2008-11-26 15:06:10,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 8\n2008-11-26 15:06:11,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 7\n2008-11-26 15:06:12,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 6\n2008-11-26 15:06:13,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 5\n2008-11-26 15:06:14,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 8\n2008-11-26 15:06:14,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 4\n2008-11-26 15:06:15,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 3\n2008-11-26 15:06:16,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 2\n2008-11-26 15:06:17,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 1\n2008-11-26 15:06:18,840 INFO  [Thread-2] [com.test.MessageGroupTest] worker1 received msg B remaining 0\n2008-11-26 15:06:19,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 7\n2008-11-26 15:06:24,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 6\n2008-11-26 15:06:29,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 5\n2008-11-26 15:06:34,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 4\n2008-11-26 15:06:39,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 3\n2008-11-26 15:06:44,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 2\n2008-11-26 15:06:49,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 1\n2008-11-26 15:06:54,840 INFO  [Thread-3] [com.test.MessageGroupTest] worker2 received msg A remaining 0\n{quote}\n\n\n2. MessageGroupDelayedTest.java sends 30 messages evenly distributed across 3 groups A, B, and C and then starts up 3 consumers.\nAll 30 messages are delivered in FIFO order to a single consumer as seen in the log below\n{quote}\n2008-11-26 15:25:50,021 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 9\n2008-11-26 15:25:55,021 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 9\n2008-11-26 15:25:56,021 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 9\n2008-11-26 15:25:56,130 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 8\n2008-11-26 15:26:01,130 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 8\n2008-11-26 15:26:02,130 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 8\n2008-11-26 15:26:02,224 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 7\n2008-11-26 15:26:07,224 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 7\n2008-11-26 15:26:08,224 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 7\n2008-11-26 15:26:08,333 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 6\n2008-11-26 15:26:13,333 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 6\n2008-11-26 15:26:14,333 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 6\n2008-11-26 15:26:14,427 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 5\n2008-11-26 15:26:19,427 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 5\n2008-11-26 15:26:20,427 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 5\n2008-11-26 15:26:20,536 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 4\n2008-11-26 15:26:25,536 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 4\n2008-11-26 15:26:26,536 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 4\n2008-11-26 15:26:26,630 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 3\n2008-11-26 15:26:31,630 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 3\n2008-11-26 15:26:32,630 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 3\n2008-11-26 15:26:32,739 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 2\n2008-11-26 15:26:37,739 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 2\n2008-11-26 15:26:38,739 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 2\n2008-11-26 15:26:38,833 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 1\n2008-11-26 15:26:43,832 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 1\n2008-11-26 15:26:44,832 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 1\n2008-11-26 15:26:44,926 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg A remaining 0\n2008-11-26 15:26:49,926 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg B remaining 0\n2008-11-26 15:26:50,926 INFO  [Thread-4] [com.test.MessageGroupDelayedTest] worker3 received msg C remaining 0\n{quote}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461308","id":"12461308","filename":"MessageGroupDelayedTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiyer","name":"hiyer","key":"hiyer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hari Iyer","active":true,"timeZone":"Etc/UTC"},"created":"2008-11-26T20:29:22.664+0000","size":4764,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461308/MessageGroupDelayedTest.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461222","id":"12461222","filename":"MessageGroupTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiyer","name":"hiyer","key":"hiyer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hari Iyer","active":true,"timeZone":"Etc/UTC"},"created":"2008-11-26T20:29:22.624+0000","size":4809,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461222/MessageGroupTest.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161411","customfield_12312823":null,"summary":"Message grouping not honored when consumers started with existing messages","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiyer","name":"hiyer","key":"hiyer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hari Iyer","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiyer","name":"hiyer","key":"hiyer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hari Iyer","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"JBOSS 4.2.2, AMQ 5.2.0 RA, JDK 1.5, Windows","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483060/comment/12940650","id":"12940650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghopper","name":"ghopper","key":"ghopper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghopper&avatarId=15643","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghopper&avatarId=15643","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghopper&avatarId=15643","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghopper&avatarId=15643"},"displayName":"Gordon Hopper","active":true,"timeZone":"Etc/UTC"},"body":"\nbug summary: Message grouping fails when consumers are added.\nkeywords: JMSXGroupID JMSXGroupSeq\n\nUploading a new unit test.  An excerpt of the test results is below, which shows that the message groups GrA and GrB are being handled by both consumers simultaneously.\n\n15:11:58,498 INFO  GroupNewConsumerTest - Con2 got message       GrA-5\n15:11:58,560 INFO  GroupNewConsumerTest - Con2 got message       GrB-5\n15:11:58,560 INFO  GroupNewConsumerTest - Con1 got message GrB-3\n15:11:58,623 INFO  GroupNewConsumerTest - Con1 got message GrA-4\n15:11:58,623 INFO  GroupNewConsumerTest - Con2 got message       GrA-6\n15:11:58,685 INFO  GroupNewConsumerTest - Con1 got message GrB-4\n15:11:58,685 INFO  GroupNewConsumerTest - Con2 got message       GrB-6\n15:11:58,748 INFO  GroupNewConsumerTest - Con1 got message GrB-7\n15:11:58,748 INFO  GroupNewConsumerTest - Con2 got message       GrA-7\n15:11:58,810 INFO  GroupNewConsumerTest - Con1 got message GrB-8\n15:11:58,810 INFO  GroupNewConsumerTest - Con2 got message       GrA-8\n15:11:58,873 INFO  GroupNewConsumerTest - Con2 got message       GrA-9\n15:11:58,935 INFO  GroupNewConsumerTest - Con2 got message       GrB-9\n\nThis is probably the same issue described in:\nhttp://www.nabble.com/Message-groups-not-working-when-consuming-existing-messages-td18445237.html#a18445237\n\nNote that setting the prefetch to 1 made reproducing the issue much easier.  (See the unit test)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghopper","name":"ghopper","key":"ghopper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghopper&avatarId=15643","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghopper&avatarId=15643","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghopper&avatarId=15643","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghopper&avatarId=15643"},"displayName":"Gordon Hopper","active":true,"timeZone":"Etc/UTC"},"created":"2009-01-07T22:44:56.147+0000","updated":"2009-01-07T22:44:56.147+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483060/comment/12940689","id":"12940689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"prefetch=1 should help here. Part of the problem is that the dispatch logic can only deal with the consumers that it has and on the first dispatch iteration it finds only one consumer and figures that that consumer has to deal with all of the groups. With prefetch of one, after the first dispatch iteration there may be another consumer (at least it allow the internal dispatch lock to be released so that another consumer can be added between dispatch attempts)\n\nCurrently there is an issue that evaluates message group selection before determining if a consumer is full, but if this is resolved, prefetch=1 should make group selection evenly distributed among subscriptions that arrive at the same time and before the group assignment has been determined. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-01-19T14:17:52.993+0000","updated":"2009-01-19T14:17:52.993+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483060/comment/12940692","id":"12940692","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghopper","name":"ghopper","key":"ghopper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghopper&avatarId=15643","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghopper&avatarId=15643","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghopper&avatarId=15643","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghopper&avatarId=15643"},"displayName":"Gordon Hopper","active":true,"timeZone":"Etc/UTC"},"body":"After reviewing Hari's original files and the response from Gary, I think my issue is different than the original issue.  Hari is concerned with balancing between multiple consumers, while I am concerned with the exclusive property.  Sorry for the confusion.\n\nMoved my test case to the ticket AMQ-2082.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghopper","name":"ghopper","key":"ghopper","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghopper&avatarId=15643","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghopper&avatarId=15643","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghopper&avatarId=15643","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghopper&avatarId=15643"},"displayName":"Gordon Hopper","active":true,"timeZone":"Etc/UTC"},"created":"2009-01-21T16:19:26.436+0000","updated":"2009-01-21T16:19:26.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483060/comment/12940681","id":"12940681","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Recovery dispatch refactoring, which was the root of the problem, has been committed in SVN revision 736720. All that is left to be done is to add a configurable logic that would make broker to wait for a certain number of consumers (and/or a bit of time) before it starts dispatching. This will allow an even distribution of groups among consumers. Coming soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2009-01-22T17:27:46.968+0000","updated":"2009-01-22T17:27:46.968+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483060/comment/12940705","id":"12940705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"The configurable queue policies has been added, which allows us to wait for specified number of consumers (and/or time) before we start dispatching messages. This ensures an even distribution of groups among consumers.\n\nMore documentation can be found at:\n[http://cwiki.apache.org/confluence/display/ACTIVEMQ/Message+Groups#MessageGroups-Gettingnotifiedofownershipchangesofmessagegroups]\nModified test case (tests for different policies condemnations and fails if there is no even distribution of messages and groups) can be found here\n[http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/usecases/MessageGroupDelayedTest.java?view=markup]\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2009-01-23T13:29:06.374+0000","updated":"2009-01-23T13:29:06.374+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483060/comment/12937574","id":"12937574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rchristy","name":"rchristy","key":"rchristy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rich Christy","active":true,"timeZone":"Etc/UTC"},"body":"Any luck getting a fix for version 5.2?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rchristy","name":"rchristy","key":"rchristy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rich Christy","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-28T22:00:46.126+0000","updated":"2009-07-28T22:00:46.126+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483060/comment/12940916","id":"12940916","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Rich,\n\nwe don't maintain 5.2 branch anymore. Any specific reason you don't want to upgrade to 5.3 (it should be much more stable than 5.2)?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2009-08-03T13:30:34.492+0000","updated":"2009-08-03T13:30:34.492+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2016/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rzlj:"}}