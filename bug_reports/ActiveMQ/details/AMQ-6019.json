{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12907141","self":"https://issues.apache.org/jira/rest/api/2/issue/12907141","key":"AMQ-6019","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2015-10-22T16:46:02.042+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Oct 23 02:31:16 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_35210155_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-10-23T02:31:16.412+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6019/watchers","watchCount":2,"isWatching":false},"created":"2015-10-22T16:44:26.305+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324950","id":"12324950","name":"5.10.0","archived":false,"released":true,"releaseDate":"2014-06-10"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-10-23T02:31:16.457+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12325017","id":"12325017","name":"KahaDB"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Hello,\n\nI'm trying to run the performance test with posting 1,000,000 messages from 4 producers to ActiveMQ. Many times I'm getting the following exception in ActiveMQ Broker logs and it looks like the broker is not accepting any more messages:\n\n2015-10-22 09:30:45,314 | WARN  | Async error occurred:  | org.apache.activemq.broker.TransportConnection.Service | ActiveMQ Transport: tcp:///10.80.35.179:56140@20039\njava.lang.RuntimeException: java.lang.IllegalStateException: TheListIndex is not loaded\n\tat org.apache.activemq.broker.region.cursors.FilePendingMessageCursor.tryAddMessageLast(FilePendingMessageCursor.java:244)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.region.cursors.FilePendingMessageCursor.addMessageLast(FilePendingMessageCursor.java:207)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.region.Queue.sendMessage(Queue.java:1855)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.region.Queue.doMessageSend(Queue.java:939)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.region.Queue.send(Queue.java:733)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.region.AbstractRegion.send(AbstractRegion.java:424)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.region.RegionBroker.send(RegionBroker.java:445)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.jmx.ManagedRegionBroker.send(ManagedRegionBroker.java:297)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.BrokerFilter.send(BrokerFilter.java:147)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.CompositeDestinationBroker.send(CompositeDestinationBroker.java:96)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.TransactionBroker.send(TransactionBroker.java:307)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.MutableBrokerFilter.send(MutableBrokerFilter.java:152)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.TransportConnection.processMessage(TransportConnection.java:496)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.command.ActiveMQMessage.visit(ActiveMQMessage.java:756)[activemq-client-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:294)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:148)[activemq-broker-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.transport.MutexTransport.onCommand(MutexTransport.java:50)[activemq-client-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)[activemq-client-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.transport.AbstractInactivityMonitor.onCommand(AbstractInactivityMonitor.java:270)[activemq-client-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)[activemq-client-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:214)[activemq-client-5.10.0.jar:5.10.0]\n\tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:196)[activemq-client-5.10.0.jar:5.10.0]\n\tat java.lang.Thread.run(Unknown Source)[:1.8.0_11]\n\n\n\nFor example I'm getting 131191 messages out of 1000,000 on the queue and the performance test is freezing.\n\nI'm running the test with the following command:\nmvn activemq-perf:producer -Dfactory.brokerURL=tcp://hostname:20039 -DsysTest.numClients=4 -Dproducer.destName=queue://test -Dproducer.deliveryMode=persistent -Dfactory.useAsyncSend=true\n\nI've changed the activemq.xml persistenceAdapter as shown:\n        <persistenceAdapter>\n            <kahaDB directory=\"${activemq.data}/kahadb\" enableJournalDiskSyncs=\"false\" indexWriteBatchSize=\"10000\" indexCacheSize=\"1000\"/>\n        </persistenceAdapter>\n\nThanks,\nOctavian\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"TheListIndex is not loaded exception under heavier load","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ochiriac","name":"ochiriac","key":"ochiriac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Octavian","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ochiriac","name":"ochiriac","key":"ochiriac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Octavian","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"AcitveMQ 5.10.0 on Windows Server 2012R2 DataCenter","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907141/comment/14969423","id":"14969423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Have you tested with the latest release v5.12.1 ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2015-10-22T16:46:02.042+0000","updated":"2015-10-22T16:46:02.042+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907141/comment/14969428","id":"14969428","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ochiriac","name":"ochiriac","key":"ochiriac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Octavian","active":true,"timeZone":"Etc/UTC"},"body":"I was looking at AMQ-4239 and indeed - I am doing PURGEs between tests from frontend. So it might be related to the Purge. I will try to test with 5.12.1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ochiriac","name":"ochiriac","key":"ochiriac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Octavian","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-22T16:48:27.108+0000","updated":"2015-10-22T16:48:27.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907141/comment/14970287","id":"14970287","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ochiriac","name":"ochiriac","key":"ochiriac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Octavian","active":true,"timeZone":"Etc/UTC"},"body":"Yes. I was not able to reproduce this yet. Looks like it was fixed. I think we can close this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ochiriac","name":"ochiriac","key":"ochiriac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Octavian","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-23T01:51:35.889+0000","updated":"2015-10-23T01:51:35.889+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12907141/comment/14970305","id":"14970305","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Reported as not reproducible on a newer broker.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2015-10-23T02:31:16.438+0000","updated":"2015-10-23T02:31:16.438+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6019/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ne2f:"}}