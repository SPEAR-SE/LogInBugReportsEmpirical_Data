{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483366","self":"https://issues.apache.org/jira/rest/api/2/issue/12483366","key":"AMQ-1634","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315630","id":"12315630","description":"Issues that need to be reviewed - do we keep 'em or do we kick 'em? ","name":"NEEDS_REVIEW","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2008-10-07T09:23:23.788+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 01 20:01:57 UTC 2011","customfield_12310420":"69439","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_102923793125_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-01T20:01:57.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1634/watchers","watchCount":3,"isWatching":false},"created":"2008-03-27T14:05:23.903+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315614","id":"12315614","description":"","name":"4.1.1","archived":false,"released":true,"releaseDate":"2007-06-08"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-01T20:01:57.024+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We startup AMQ 4.1.1, have some messages send and after some time we get a broken pipe exception:\n\nLoading message broker from: xbean:activemq.xml\nINFO  BrokerService                  - ActiveMQ 4.1.1 JMS Message Broker (BrokerMQ1) is starting\nINFO  BrokerService                  - For help or more information please see: http://incubator.apache.org/activemq/\nINFO  JDBCPersistenceAdapter         - Database driver recognized: [apache_derby_embedded_jdbc_driver]\nINFO  DefaultDatabaseLocker          - Attempting to acquire the exclusive lock to become the Master broker\nINFO  DefaultDatabaseLocker          - Becoming the master on dataSource: org.apache.derby.jdbc.EmbeddedDataSource@6e5a6e5a\nINFO  JournalPersistenceAdapter      - Journal Recovery Started from: Active Journal: using 2 x 20.0 Megs at: /somePathToASharedFS/foBroker1/journal\nINFO  JournalPersistenceAdapter      - Journal Recovered: 0 message(s) in transactions recovered.\nINFO  TransportServerThreadSupport   - Listening for connections at: tcp://xxxxxxxxxxxxxxx:63616\nINFO  TransportConnector             - Connector tcp://localhost:63616 Started\nINFO  BrokerService                  - ActiveMQ JMS Message Broker (BrokerMQ1, ID:xxxxxxxxxxx-63589-1206619947406-1:0) started\nERROR TransportConnector             - Could not accept connection from /xxxxxxxxxxxxxxxx:64529: java.net.SocketException: Broken pipe\njava.net.SocketException: Broken pipe\n        at java.net.SocketOutputStream.socketWrite0(Native Method)\n        at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:105)\n        at java.net.SocketOutputStream.write(SocketOutputStream.java:149)\n        at org.apache.activemq.transport.tcp.TcpBufferedOutputStream.flush(TcpBufferedOutputStream.java:109)\n        at java.io.DataOutputStream.flush(DataOutputStream.java:131)\n        at org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:119)\n        at org.apache.activemq.transport.InactivityMonitor.oneway(InactivityMonitor.java:141)\n        at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:80)\n        at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:93)\n        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:47)\n        at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1138)\n        at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:805)\n        at org.apache.activemq.broker.TransportConnection.start(TransportConnection.java:885)\n        at org.apache.activemq.broker.TransportConnector$1.onAccept(TransportConnector.java:148)\n        at org.apache.activemq.transport.tcp.TcpTransportServer.run(TcpTransportServer.java:167)\n        at java.lang.Thread.run(Thread.java:797)\n\nObjective was to have filesystem based Master-Slave failover scenario.\n\nOur configuration file looks like this:\n\n<beans>\n        <!-- Allows us to use system properties as variables in this configuration file -->\n        <bean   class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\" />\n\n        <broker brokerName=\"BrokerMQ1\" useJmx=\"false\" xmlns=\"http://activemq.org/config/1.0\">\n                <!-- Use the following to configure how ActiveMQ is exposed in JMX -->\n                <!-- managementContext>\n                <managementContext connectorPort=\"61099\" jmxDomainName=\"org.apache.activemq\"/>\n                </managementContext-->\n\n                <persistenceAdapter>\n                        <journaledJDBC dataDirectory=\"/somePathToASharedFS/foBroker1\"/>\n                </persistenceAdapter>\n\n\n                <transportConnectors>\n                        <transportConnector uri=\"tcp://localhost:63616\" />\n                </transportConnectors>\n\n        </broker>\n\n</beans>\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172130","customfield_12312823":null,"summary":"Broken Pipe Exception","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mr.+burns","name":"mr. burns","key":"mr. burns","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel, Vojtech","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mr.+burns","name":"mr. burns","key":"mr. burns","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel, Vojtech","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"AIX 5.3\nIBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 AIX ppc-32\nFilesystem: GPFS","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483366/comment/12940309","id":"12940309","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ciciliati","name":"ciciliati","key":"ciciliati","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fernando Ciciliati","active":true,"timeZone":"Etc/UTC"},"body":"We have got the same error on ActiveMQ 4.1.2 on RHEL4 / Java 1.5, running master/slave with shared storage on a GFS SAN.\n\nIt's interesting to notice that the error seems to happen only at the moment when the \"Active\" machine is abruptly shut down. The issue happens then on the machine that was in \"Passive\" mode and becomes \"Active\".\n\n2008/09/24 12:20:25 | Loading message broker from: xbean:activemq.xml\n2008/10/02 17:17:39 | ERROR TransportConnector             - Could not accept connection from /xxx.xxx.xxx.xxx:49442: java.net.SocketException: Broken pipe\n2008/10/02 17:17:39 | java.net.SocketException: Broken pipe\n2008/10/02 17:17:39 |   at java.net.SocketOutputStream.socketWrite0(Native Method)\n2008/10/02 17:17:39 |   at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n2008/10/02 17:17:39 |   at java.net.SocketOutputStream.write(SocketOutputStream.java:136)\n2008/10/02 17:17:39 |   at org.apache.activemq.transport.tcp.TcpBufferedOutputStream.flush(TcpBufferedOutputStream.java:109)\n2008/10/02 17:17:39 |   at java.io.DataOutputStream.flush(DataOutputStream.java:106)\n2008/10/02 17:17:39 |   at org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:119)\n2008/10/02 17:17:39 |   at org.apache.activemq.transport.InactivityMonitor.oneway(InactivityMonitor.java:145)\n2008/10/02 17:17:39 |   at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:80)\n2008/10/02 17:17:39 |   at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:93)\n2008/10/02 17:17:39 |   at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:47)\n2008/10/02 17:17:39 |   at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1138)\n2008/10/02 17:17:39 |   at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:805)\n2008/10/02 17:17:39 |   at org.apache.activemq.broker.TransportConnection.start(TransportConnection.java:885)\n2008/10/02 17:17:39 |   at org.apache.activemq.broker.TransportConnector$1.onAccept(TransportConnector.java:148)\n2008/10/02 17:17:39 |   at org.apache.activemq.transport.tcp.TcpTransportServer.run(TcpTransportServer.java:167)\n2008/10/02 17:17:39 |   at java.lang.Thread.run(Thread.java:595)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ciciliati","name":"ciciliati","key":"ciciliati","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fernando Ciciliati","active":true,"timeZone":"Etc/UTC"},"created":"2008-10-07T09:23:23.788+0000","updated":"2008-10-07T09:23:23.788+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483366/comment/13058754","id":"13058754","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"4.1.1 is EOL","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-07-01T20:01:57.022+0000","updated":"2011-07-01T20:01:57.022+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1634/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ttrb:"}}