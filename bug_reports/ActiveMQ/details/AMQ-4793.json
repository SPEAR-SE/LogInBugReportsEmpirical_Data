{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12673081","self":"https://issues.apache.org/jira/rest/api/2/issue/12673081","key":"AMQ-4793","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2013-10-09T18:43:50.984+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 16 12:52:41 UTC 2013","customfield_12310420":"352704","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_420547_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-10-09T18:43:50.965+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4793/watchers","watchCount":3,"isWatching":false},"created":"2013-10-09T18:36:50.442+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-10-16T12:52:41.553+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Having issue with message selector.\nMessage is already there in queue (I can confirm with activeMQ browser app). \nCreate consumer with messageSelector and do consumer.receiveNoWait() always receive NULL message.\n\nHave only three message in queue.\n\ncode sample...\n\ntry\n           {\n\n            \n            ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(\"tcp://localhost:61616\");\n            Connection connection= connectionFactory.createConnection();\n            connection.start();\n\n\n            Session session= connection.createSession(false,Session.AUTO_ACKNOWLEDGE);\n            Destination queueDestination = session.createQueue(\"TestQueue\");\n\n             //using activeMq browser app i can see message is there with JMSCorrelationID=12345 \n             String messageSelector= \"JMSCorrelationID = '12345'\";\n             MessageConsumer consumer= session.createConsumer(queueDestination,messageSelector);\n             Message message= consumer.receiveNoWait();\n\n             if(message==null)\n             {\n                 // always return null message\n                 //log message not found\n             }\n               \n           }\n           catch (Exception e)\n           {\n\n           }\n\n\nBut, if do this it’s works …\n\nFor(int i=0; i< 7; i++)\n{\n\tThread.sleep(100);\nmessage= consumer.receiveNoWait();\t\n\tIf(message!=null)\n\t\tBreak;\n}\n\nplease help me what am i doing wrong?\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"352991","customfield_12312823":null,"summary":"issue with messageSelector","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdsritesh","name":"tdsritesh","key":"tdsritesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ritesh","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdsritesh","name":"tdsritesh","key":"tdsritesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ritesh","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673081/comment/13790704","id":"13790704","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"This is working as designed.  Calling receiveNoWait you always have to deal with not getting a message, there's no guarantee here, which is kind of the point of the method, try but don't wait if one isn't immediately available.  It takes some time for the broker to dispatch a message to the client, so in your simple example code its quite likely you won't get a message on the first try.  It's better to do a timed receive call so that you give the broker some time to dispatch to the client. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-10-09T18:43:50.984+0000","updated":"2013-10-09T18:43:50.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673081/comment/13790728","id":"13790728","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdsritesh","name":"tdsritesh","key":"tdsritesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ritesh","active":true,"timeZone":"America/New_York"},"body":"Thanks for the reply.\n\nOk, I will use receive(timeout), but my problem is it's not guaranty that every time when i ask for message(with messageSelector) message will be there.\nSo, take below same example if my messageSelector is \"JMSCorrelationID = '4544'\", now there is no match for this selector and using .receive(1000). \nConsumer will wait for 1000ms unnecessary. Which does impact on my performance any other way i can use messageSelector and didn't wait for amount of time specified with receive (if message is not there). This problem occurs only if no match messageSelector.   \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdsritesh","name":"tdsritesh","key":"tdsritesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ritesh","active":true,"timeZone":"America/New_York"},"created":"2013-10-09T19:06:17.324+0000","updated":"2013-10-09T19:06:17.324+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673081/comment/13790735","id":"13790735","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"That's a discussion for the users mailing list, not Jira.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-10-09T19:11:49.701+0000","updated":"2013-10-09T19:11:49.701+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673081/comment/13796748","id":"13796748","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattrpav","name":"mattrpav","key":"mattrpav","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Pavlovich","active":true,"timeZone":"America/Chicago"},"body":"ritesh- \n\nMailing list or irc chat is a good place to go for answers like this.  One quick thing to look at is you may prefer using a MessageListener callback.. messages are just handed to a method for you and you don't have to deal with any of the timing logic by hand. (onMessage()..)\n\nLook into \".. implements javax.jms.MessageListener\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattrpav","name":"mattrpav","key":"mattrpav","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Pavlovich","active":true,"timeZone":"America/Chicago"},"created":"2013-10-16T12:52:41.553+0000","updated":"2013-10-16T12:52:41.553+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4793/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1ot5z:"}}