{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12760351","self":"https://issues.apache.org/jira/rest/api/2/issue/12760351","key":"AMQ-5478","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-01-21T02:32:57.676+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Feb 11 17:28:30 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_5575167030_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-02-11T17:28:30.737+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5478/watchers","watchCount":4,"isWatching":false},"created":"2014-12-09T04:49:03.765+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324950","id":"12324950","name":"5.10.0","archived":false,"released":true,"releaseDate":"2014-06-10"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-02-11T17:28:30.792+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12321500","id":"12321500","name":"webconsole","description":"Web console such as the old and the new hawtio console"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"This is _possibly_ simply a Documentation bug, but I was testing the REST endpoints via the documentation here:\n\nhttp://activemq.apache.org/rest.html\n\nWhen I first tried to post a simple message to a queue (and this queue didn't exist yet) I used this script:\n\n{noformat}\n$ curl -d \"body=message\" -XPOST http://admin:admin@localhost:8161/api/message/queue/orders/input\n{noformat}\n\nThe above is mostly based on the documentation.  I was surprised to find no queue created by looking at the web console, but i _*did*_ see a Topic created called 'queue.orders.input' and it contained 1 message (odd because there's no consumers defined).\n\nAfter deleting the topic I then tried the 'other format' of the URL:\n\n{noformat}\n curl -d \"body=message\" -XPOST http://admin:admin@localhost:8161/api/message/orders.input?type=queue\n{noformat}\n\nThis does create a Queue of name 'orders.input' as one would expect.\n\nI'm not exactly clear then from the documentation where in the URL one is defining it as a queue using the former syntax.  The URL in the documentation sort of _implies_ that the 'queue' prefix of the URL is creating a queue named 'orders.input' but it doesn't turn out that way.\n\nSo either this is a bug, or the documentation needs tweaking.\n\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"REST endpoint creates topic instead of queue","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org","name":"psmith@apache.org","key":"psmith@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Smith","active":true,"timeZone":"Australia/Sydney"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org","name":"psmith@apache.org","key":"psmith@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Smith","active":true,"timeZone":"Australia/Sydney"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12760351/comment/14285045","id":"14285045","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmfrazier","name":"mmfrazier","key":"mmfrazier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Frazier","active":true,"timeZone":"Etc/UTC"},"body":"According to the code, if NO type parameter is specified, the default will be topic, UNLESS the servlet has been initialized with an init param in the web.xml file. See code snippet below:\n\n    protected boolean isTopic(HttpServletRequest request) {\n        String typeText = request.getParameter(typeParameter);\n        if (typeText == null) {\n            return defaultTopicFlag;\n        }\n        return typeText.equalsIgnoreCase(\"topic\");\n    }\n\nTo change this default, you can do this in the webapps/demo/WEB-INF/web.xml file:\n\n<servlet>\n    <servlet-name>MessageServlet</servlet-name>       \n    <servlet-class>org.apache.activemq.web.MessageServlet</servlet-class>\n    <load-on-startup>1</load-on-startup>\n    <init-param>\n            <param-name>topic</param-name>\n            <param-value>false</param-value>\n    </init-param>\n</servlet>\n\nHowever, you are correct. The documentation is a bit misleading and should point this out. I will see if I can do that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmfrazier","name":"mmfrazier","key":"mmfrazier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Frazier","active":true,"timeZone":"Etc/UTC"},"created":"2015-01-21T02:32:57.676+0000","updated":"2015-01-21T02:32:57.676+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12760351/comment/14315572","id":"14315572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmfrazier","name":"mmfrazier","key":"mmfrazier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Frazier","active":true,"timeZone":"Etc/UTC"},"body":"I've updated the wiki page to make it more clear. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmfrazier","name":"mmfrazier","key":"mmfrazier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Frazier","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-11T05:02:05.887+0000","updated":"2015-02-11T05:02:05.887+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12760351/comment/14316581","id":"14316581","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"body":"Thank you Mark.  Ticket resolved.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"created":"2015-02-11T17:28:30.785+0000","updated":"2015-02-11T17:28:30.785+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5478/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i237mv:"}}