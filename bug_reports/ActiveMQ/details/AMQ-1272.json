{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483348","self":"https://issues.apache.org/jira/rest/api/2/issue/12483348","key":"AMQ-1272","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316331","id":"12316331","description":"Next unplanned v5 maintenance release","name":"5.x","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-06-12T09:48:09.440+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 05 14:33:55 UTC 2011","customfield_12310420":"46465","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_16532051577_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_21509500275_*|*_4_*:*_1_*:*_98154138535","customfield_12312321":null,"resolutiondate":"2011-10-05T14:33:55.860+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1272/watchers","watchCount":2,"isWatching":false},"created":"2007-06-12T06:25:45.578+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"issuelinks":[{"id":"12334959","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334959","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12481860","key":"AMQ-998","self":"https://issues.apache.org/jira/rest/api/2/issue/12481860","fields":{"summary":"add support for stomp+ssl","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-10-05T14:33:55.949+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"ActiveMQ does not correctly validate the username and password of Stomp clients.  A security exception is generated, but ignored, leaving the client connected, and with full and unrestricted access to ActiveMQ.\n\nFurther description, and a partial patch:\n\nhttp://www.nabble.com/Getting-Stomp-support-to-a-usable-state...-tf3858629s2354.html#a11060452 \n\n\nBTW, while the patch in the above post, is crude, however, leaving unauthenticated users connected with full-access makes ActiveMQ and Stomp pretty unusable.  So please apply the path, rather than do nothing.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461107","id":"12461107","filename":"AMQ1272-stomp-auth-v412.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drwoods","name":"drwoods","key":"drwoods","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drwoods&avatarId=20433","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drwoods&avatarId=20433","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drwoods&avatarId=20433","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drwoods&avatarId=20433"},"displayName":"Donald Woods","active":true,"timeZone":"America/New_York"},"created":"2008-08-25T13:39:55.866+0000","size":18766,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461107/AMQ1272-stomp-auth-v412.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460712","id":"12460712","filename":"stomp.diff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-06-24T06:02:01.730+0000","size":1836,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12460712/stomp.diff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461065","id":"12461065","filename":"stomp-auth.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2007-12-16T20:12:05.455+0000","size":20681,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461065/stomp-auth.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"59859","customfield_12312823":null,"summary":"Stomp protocol does not correctly check authentication (security hole)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"4.2-SNAPSHOT","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936459","id":"12936459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"added an affected version","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2007-06-12T09:48:09.440+0000","updated":"2007-06-12T09:48:09.440+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936213","id":"12936213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"body":"I have tested the patch that Pieter  posted, and it doesn't make any changed.\n\nIt doesn't seem like this should be a hard problem to fix.  I'd fix it, but I'm wish I understand the interaction between the various protocol classes and the core.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-06-16T08:09:45.644+0000","updated":"2007-06-16T08:09:45.644+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936414","id":"12936414","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ijsklont","name":"ijsklont","key":"ijsklont","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pieter","active":true,"timeZone":"Etc/UTC"},"body":"I am the author of the patch mentioned. It worked for me (the patch was against apache-activemq-4.2-20070510.230653-54 snapshot). Without the patch applied, SecurityException's were already visible in the debug log, however the were silently dropped (there is a try/catch block somewhere in the connection handler that handles this. It then creates an ExceptionResponse which is passed to the handler in onStompConnect, where the response isn't checked anymore). If these were not visbile, I guess something else is wrong with the authentication setup.\n\nI'm using the simple authenticator btw, but this shouldn't matter.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ijsklont","name":"ijsklont","key":"ijsklont","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pieter","active":true,"timeZone":"Etc/UTC"},"created":"2007-06-22T12:05:48.811+0000","updated":"2007-06-22T12:05:48.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936520","id":"12936520","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"body":"I have re-tested the patch.  I applied the patch (more or less) to activemq-5.0-20070621\n\nThe behaviour is a bit strange.  A Stomp producer simply blocks (I'm using Net::Stomp).  A Stomp consumer does too.  Very odd.  At least unauthenticated Stomp clients can't steal messages.\n\nI'm going to try to attach my patch (context diff).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-06-24T05:57:57.605+0000","updated":"2007-06-24T05:57:57.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936467","id":"12936467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch to Stomp ProtocolConverter.java\n\nThis is just an adapted from Pieter's patch, but to activemq-5.0-20070621, as a context diff.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-06-24T06:02:01.828+0000","updated":"2007-06-24T06:02:01.828+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936555","id":"12936555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"body":"Here is the config that I'm using:\n\n    <plugins>\n      <simpleAuthenticationPlugin>\n         <users>\n           <authenticationUser username=\"system\" password=\"manager\" groups=\"producers,consumers,admins\" />\n           <authenticationUser username=\"frontend\" password=\"manager\" groups=\"producers\" />\n           <authenticationUser username=\"backend\" password=\"manager\" groups=\"consumers\" />\n         </users>\n       </simpleAuthenticationPlugin>\n       <authorizationPlugin>\n         <map>\n           <authorizationMap>\n             <authorizationEntries>\n               <authorizationEntry queue=\">\" read=\"backend\" write=\"frontend\" admin=\"admins\" />\n             </authorizationEntries>\n           </authorizationMap>\n         </map>\n       </authorizationPlugin>\n    </plugins>\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-06-24T08:56:22.506+0000","updated":"2007-06-24T08:56:22.506+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936460","id":"12936460","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"body":"Just some further clarification.  activemq-5.0-20070621 with the patch has the following behavior:\n\n1.  If a Stomp client uses the wrong password and/or wrong user name, it will just block forever when trying to send to a destination.\n\n2.  If a Stomp client uses a matching username and password, but that user does not have permission to write to the queue (as in the above nonsensical auth configuration, where none of the groups match), ActiveMQ will just eat the message and log an exception for each message:\n\n ERROR Service                        - Async error occurred: java.lang.SecurityException: User system is not authorized to write to: queue://foo\njava.lang.SecurityException: User system is not authorized to write to: queue://foo\n\n\nSo the client is never disconnected, and never is sent an error.  It is a step in the right direction.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-06-24T09:48:27.266+0000","updated":"2007-06-24T09:48:27.266+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936528","id":"12936528","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ijsklont","name":"ijsklont","key":"ijsklont","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pieter","active":true,"timeZone":"Etc/UTC"},"body":"I'm using the PHP Stomp client, that might explain the difference in the behaviour with incorrecht auth details. I don't have access to the setup right now, I will report the exact behaviour when I do. I guess it's possible that the Net::Stomp code expects a Stomp ERROR frame, which isn't sent, or a CONNECTED frame (which isn't sent either). Perhaps it's waiting for these frames, I don't know the code. I think in my case the socket was disconnected, but I'm not sure. I will investigate.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ijsklont","name":"ijsklont","key":"ijsklont","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pieter","active":true,"timeZone":"Etc/UTC"},"created":"2007-06-24T14:23:54.320+0000","updated":"2007-06-24T14:23:54.320+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12936234","id":"12936234","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"body":"Well, the Perl Net::Stomp client definitely notices if the socket goes away, because if I kill ActiveMQ, my client reports an immediate error:\n\nError reading command:  at /usr/local/lib/perl5/site_perl/5.8.8/Net/Stomp/Frame.pm line 37, <GEN0> line 25076.\n\n\nThis is expected though.  When the receive_frame() method is called, Net::Stomp does a blocking read on a socket.  If that socket is closed, the read will return with an error code.  And then the Net::Stomp kicks out an \"Error reading command\" exception.\n\nI have also retested this with a 5.0 snapshot from July 12, with the stomp.diff patch that I posed above.  The behavior is the same.  A Stomp client will just block during login.  I can see in netstat that there is a one 61613 socket open as well, so it is not definitely not being closed by ActiveMQ.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tom%40samplonius.org","name":"tom@samplonius.org","key":"tom@samplonius.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom Samplonius","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-07-16T02:58:08.982+0000","updated":"2007-07-16T02:58:08.982+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12939273","id":"12939273","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"I've refactored a ProtocolConverter, StompTest and added a few tests to make all this work.\n\nHere's a list of things that has been done:\n\n- added xbean resources to set up a test broker with configured authentication\n- modified existing tests to connect with system/manager user so that they have right privileges\n- modified protocolconverter.onStompConnect to send \"error\" frame on connect attempt with wrong credentials\n- modified protocolConverter.createResponseHandler to send \"error\" frame on security exception on any other command\n- added test cases to assert proper behavior on connect, send and subscribe","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2007-12-16T20:12:05.592+0000","updated":"2007-12-16T20:12:05.592+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12939263","id":"12939263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Applied Dejan's patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2007-12-20T14:39:57.135+0000","updated":"2007-12-20T14:39:57.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12940076","id":"12940076","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drwoods","name":"drwoods","key":"drwoods","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drwoods&avatarId=20433","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drwoods&avatarId=20433","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drwoods&avatarId=20433","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drwoods&avatarId=20433"},"displayName":"Donald Woods","active":true,"timeZone":"America/New_York"},"body":"This security fix also needs to be applied to the 4.1 branch, for users like Geronimo who have not upgraded to AMQ 5.1.0 yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drwoods","name":"drwoods","key":"drwoods","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drwoods&avatarId=20433","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drwoods&avatarId=20433","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drwoods&avatarId=20433","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drwoods&avatarId=20433"},"displayName":"Donald Woods","active":true,"timeZone":"America/New_York"},"created":"2008-08-25T13:31:37.410+0000","updated":"2008-08-25T13:31:37.410+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12940088","id":"12940088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drwoods","name":"drwoods","key":"drwoods","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drwoods&avatarId=20433","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drwoods&avatarId=20433","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drwoods&avatarId=20433","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drwoods&avatarId=20433"},"displayName":"Donald Woods","active":true,"timeZone":"America/New_York"},"body":"Patch created against branches/activemq-4.1  Rev647819 (current as of 20080825)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drwoods","name":"drwoods","key":"drwoods","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drwoods&avatarId=20433","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drwoods&avatarId=20433","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drwoods&avatarId=20433","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drwoods&avatarId=20433"},"displayName":"Donald Woods","active":true,"timeZone":"America/New_York"},"created":"2008-08-25T13:39:55.957+0000","updated":"2008-08-25T13:39:55.957+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/12941613","id":"12941613","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"patch requested against 4.1.x  - fix is on on trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-06-25T09:22:50.509+0000","updated":"2009-06-25T09:22:50.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483348/comment/13121010","id":"13121010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"This has since been resolved","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-10-05T14:33:55.929+0000","updated":"2011-10-05T14:33:55.929+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1272/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0am4v:"}}