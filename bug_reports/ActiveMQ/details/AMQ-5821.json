{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12835046","self":"https://issues.apache.org/jira/rest/api/2/issue/12835046","key":"AMQ-5821","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329669","id":"12329669","name":"5.11.2","archived":false,"released":true,"releaseDate":"2015-08-10"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12329258","id":"12329258","name":"5.12.0","archived":false,"released":true,"releaseDate":"2015-08-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-06-03T13:41:29.766+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jun 30 12:22:53 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2328309687_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-06-30T12:23:05.139+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5821/watchers","watchCount":5,"isWatching":false},"created":"2015-06-03T13:37:55.477+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329382","id":"12329382","name":"5.11.1","archived":false,"released":true,"releaseDate":"2015-02-17"}],"issuelinks":[{"id":"12427518","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12427518","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12834978","key":"KARAF-3758","self":"https://issues.apache.org/jira/rest/api/2/issue/12834978","fields":{"summary":"Uninstalling activemq-blueprint may cause the shell to be refreshed","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbonofre","name":"jbonofre","key":"jbonofre","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jean-Baptiste Onofr√©","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-06-30T12:23:05.162+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Currently org.apache.activemq.util.osgi.Activator watches all other bundles and tries to load some classes using their classloader to check if they might implement extensions. \n\nThis can go wrong if the bundle uses dynamic imports like e.g. jline does. In this case the jline bundle is triggered to load classes from ActiveMQ. This establishes a wiring from jline to ActiveMQ. If the ActiveMQ bundle are now refreshed or uninstalled jline also has to be refreshed which triggers refreshs of a lot more bundles.\n\nI propose to replace the class probing with checking of the bundle requirements. We simply check if the bundle has an import for the packages of the interface classes of ActiveMQ. So we avoid triggering classloading and the creation of unwanted wirings. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Activator can trigger unwanted behaviour when loading classes from other bundles","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","key":"chris@die-schneider.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true,"timeZone":"Europe/London"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","key":"chris@die-schneider.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true,"timeZone":"Europe/London"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12835046/comment/14570831","id":"14570831","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user cschneider opened a pull request:\n\n    https://github.com/apache/activemq/pull/107\n\n    [AMQ-5821] Avoid probing of classes in Activator\n\n    \n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/cschneider/activemq AMQ-5821\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/activemq/pull/107.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #107\n    \n----\ncommit 63cd4eef067c5e3294ade40c0ed3f1c60b8e6c9e\nAuthor: Christian Schneider <chris@die-schneider.net>\nDate:   2015-06-03T13:40:03Z\n\n    [AMQ-5821] Avoid probing of classes in Activator\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-03T13:41:29.766+0000","updated":"2015-06-03T13:41:29.766+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12835046/comment/14580210","id":"14580210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","key":"gnt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnt&avatarId=35232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnt&avatarId=35232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnt&avatarId=35232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnt&avatarId=35232"},"displayName":"Guillaume Nodet","active":true,"timeZone":"Europe/Berlin"},"body":"The patch is wrong.\nThe goal is not to verify that the bundle actually imports *some* known packages, but the fact that the bundle imports *our* package.\nSo the use of the wiring API is good, but we need to ensure that the provider is *our* bundle, or at least the same bundle which is used to load the classes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","key":"gnt","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnt&avatarId=35232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnt&avatarId=35232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnt&avatarId=35232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnt&avatarId=35232"},"displayName":"Guillaume Nodet","active":true,"timeZone":"Europe/Berlin"},"created":"2015-06-10T08:21:35.429+0000","updated":"2015-06-10T08:21:35.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12835046/comment/14582046","id":"14582046","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","key":"chris@die-schneider.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true,"timeZone":"Europe/London"},"body":"I updated the pull request to use wiring to check for the same imports we use.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","key":"chris@die-schneider.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true,"timeZone":"Europe/London"},"created":"2015-06-11T15:12:46.804+0000","updated":"2015-06-11T15:12:46.804+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12835046/comment/14597489","id":"14597489","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user cschneider opened a pull request:\n\n    https://github.com/apache/activemq/pull/119\n\n    AMQ-5821\n\n    Improved fix based on current master\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/cschneider/activemq AMQ-5821-2\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/activemq/pull/119.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #119\n    \n----\ncommit 8301dfa2bb69a69d5f843bdaf3861cfa3918bb18\nAuthor: Christian Schneider <chris@die-schneider.net>\nDate:   2015-06-03T13:40:03Z\n\n    [AMQ-5821] Avoid probing of classes in Activator\n\ncommit e7500d643a59dd8a9545c2331ee80063a86f8039\nAuthor: Christian Schneider <chris@die-schneider.net>\nDate:   2015-06-11T15:11:13Z\n\n    [AMQ-5821] Check if imports come from our bundle\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-23T11:16:41.759+0000","updated":"2015-06-23T11:16:41.759+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12835046/comment/14599361","id":"14599361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user cschneider closed the pull request at:\n\n    https://github.com/apache/activemq/pull/107\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-24T13:06:11.810+0000","updated":"2015-06-24T13:06:11.810+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12835046/comment/14599690","id":"14599690","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/activemq/pull/119\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-24T16:31:56.643+0000","updated":"2015-06-24T16:31:56.643+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12835046/comment/14608206","id":"14608206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","key":"chris@die-schneider.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true,"timeZone":"Europe/London"},"body":"I think this issue is done now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","key":"chris@die-schneider.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true,"timeZone":"Europe/London"},"created":"2015-06-30T12:22:53.352+0000","updated":"2015-06-30T12:22:53.352+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5821/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2fkr3:"}}