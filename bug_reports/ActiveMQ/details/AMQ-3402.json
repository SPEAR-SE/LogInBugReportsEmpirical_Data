{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12514439","self":"https://issues.apache.org/jira/rest/api/2/issue/12514439","key":"AMQ-3402","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2011-07-18T13:46:31.132+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Feb 10 07:01:51 UTC 2015","customfield_12310420":"65054","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2279239219_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-08-13T22:49:55.288+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3402/watchers","watchCount":3,"isWatching":false},"created":"2011-07-18T13:42:36.094+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["Java","Script","Websocket"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315626","id":"12315626","description":"","name":"5.5.0","archived":false,"released":true,"releaseDate":"2011-04-01"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-02-10T07:01:51.940+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313893","id":"12313893","name":"Connector"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I am using websocket for receiving messages over a queue using java script. This works fine for smaller messages, but for large messages the message.body truncates the message and also, JSON.parse(message.body) fails. \n\nIs there a limit for the message size in Websockets. \n\nI using java script (stomp.js) and trying to publish the messages on a web page. \nPlease find below the code snippet, \n\nvar url = \"ws://manu.rsi.com:61614/stomp\"; \nvar client = Stomp.client(url); \nvar tmp_destination = '/temp-queue/temp'; \n\nfunction requestBlockInfo() { \n    client.send('/queue/UI.Graph.Test.Q', {'reply-to': tmp_destination, 'command': 'blockinfo'}, \"msg\"); \n\n    client.subscribe(tmp_destination,function(message) { \n        alert(message.body); \n        processMessage(JSON.parse(message.body)); \n    }); \n}; \n\nonconnect = function(frame){ \n        requestBlockInfo(); \n}; \nerror_callback = function(error){ \n    alert(error.headers.message); \n}; \n    \nvar r = client.connect(\"\", \"\" ,onconnect, error_callback); \n\nWhen at the webpage, I received the message.body for message.body leangth greater then 60, it puts ... in between the message and truncates the message, so that its body length is 60.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"81705","customfield_12312823":null,"summary":"Stomp over Websocket truncates the message body","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Ubuntu 10.1","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13067030","id":"13067030","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Have you tried this using a recent SNAPSHOT build?  I think this may have already been resolved in trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-07-18T13:46:31.132+0000","updated":"2011-07-18T13:46:31.132+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13067048","id":"13067048","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"body":"Tim,\n\nI tried using the 5.5-SNAPSHOT, but its giving the same error with that. And, I am not able to start 5.6-SNAPSHOT. When I do, bin/activemq console with 5.6-Snapshot, it gives  the error, \n\nroot@manu:/usr/local/apache-activemq-5.6-SNAPSHOT# bin/activemq console\nINFO: Using default configuration\n(you can configure options in one of these file: /etc/default/activemq /home/magarwal/.activemqrc)\n\nINFO: Invoke the following command to create a configuration file\nbin/activemq setup [ /etc/default/activemq | /home/magarwal/.activemqrc ]\n\nINFO: Using java '/usr/lib/jvm/java-1.6.0-openjdk/bin/java'\nINFO: Starting in foreground, this is just for debugging purposes (stop process by pressing CTRL+C)\nJava Runtime: Sun Microsystems Inc. 1.6.0_20 /usr/lib/jvm/java-6-openjdk/jre\n  Heap sizes: current=251264k  free=248639k  max=932096k\n    JVM args: -Xms256M -Xmx1G -Dorg.apache.activemq.UseDedicatedTaskRunner=true -Djava.util.logging.config.file=logging.properties -Dcom.sun.management.jmxremote -Dactivemq.classpath=/usr/local/apache-activemq-5.6-SNAPSHOT/conf; -Dactivemq.home=/usr/local/apache-activemq-5.6-SNAPSHOT -Dactivemq.base=/usr/local/apache-activemq-5.6-SNAPSHOT\nACTIVEMQ_HOME: /usr/local/apache-activemq-5.6-SNAPSHOT\nACTIVEMQ_BASE: /usr/local/apache-activemq-5.6-SNAPSHOT\nLoading message broker from: xbean:activemq.xml\n INFO | Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$1@67064: startup date [Mon Jul 18 10:09:22 EDT 2011]; root of context hierarchy\nERROR: java.lang.RuntimeException: Failed to execute start task. Reason: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 91 in XML document from class path resource [activemq.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 91; columnNumber: 63; cvc-complex-type.2.4.a: Invalid content was found starting with element 'kahaDB'. One of '{\"http://activemq.apache.org/schema/core\":amqPersistenceAdapter, \"http://activemq.apache.org/schema/core\":jdbcPersistenceAdapter, \"http://activemq.apache.org/schema/core\":journalPersistenceAdapter, \"http://activemq.apache.org/schema/core\":kahaPersistenceAdapter, \"http://activemq.apache.org/schema/core\":memoryPersistenceAdapter, WC[##other:\"http://activemq.apache.org/schema/core\"]}' is expected.\njava.lang.RuntimeException: Failed to execute start task. Reason: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 91 in XML document from class path resource [activemq.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 91; columnNumber: 63; cvc-complex-type.2.4.a: Invalid content was found starting with element 'kahaDB'. One of '{\"http://activemq.apache.org/schema/core\":amqPersistenceAdapter, \"http://activemq.apache.org/schema/core\":jdbcPersistenceAdapter, \"http://activemq.apache.org/schema/core\":journalPersistenceAdapter, \"http://activemq.apache.org/schema/core\":kahaPersistenceAdapter, \"http://activemq.apache.org/schema/core\":memoryPersistenceAdapter, WC[##other:\"http://activemq.apache.org/schema/core\"]}' is expected.\n\tat org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:98)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:143)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:616)\n\tat org.apache.activemq.console.Main.runTaskClass(Main.java:251)\n\tat org.apache.activemq.console.Main.main(Main.java:107)\nCaused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 91 in XML document from class path resource [activemq.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 91; columnNumber: 63; cvc-complex-type.2.4.a: Invalid content was found starting with element 'kahaDB'. One of '{\"http://activemq.apache.org/schema/core\":amqPersistenceAdapter, \"http://activemq.apache.org/schema/core\":jdbcPersistenceAdapter, \"http://activemq.apache.org/schema/core\":journalPersistenceAdapter, \"http://activemq.apache.org/schema/core\":kahaPersistenceAdapter, \"http://activemq.apache.org/schema/core\":memoryPersistenceAdapter, WC[##other:\"http://activemq.apache.org/schema/core\"]}' is expected.\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:111)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:104)\n\tat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\n\tat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:64)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:52)\n\tat org.apache.activemq.xbean.XBeanBrokerFactory$1.<init>(XBeanBrokerFactory.java:106)\n\tat org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:106)\n\tat org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:71)\n\tat org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)\n\tat org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)\n\tat org.apache.activemq.console.command.StartCommand.startBroker(StartCommand.java:115)\n\tat org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:74)\n\t... 10 more\nCaused by: org.xml.sax.SAXParseException; lineNumber: 91; columnNumber: 63; cvc-complex-type.2.4.a: Invalid content was found starting with element 'kahaDB'. One of '{\"http://activemq.apache.org/schema/core\":amqPersistenceAdapter, \"http://activemq.apache.org/schema/core\":jdbcPersistenceAdapter, \"http://activemq.apache.org/schema/core\":journalPersistenceAdapter, \"http://activemq.apache.org/schema/core\":kahaPersistenceAdapter, \"http://activemq.apache.org/schema/core\":memoryPersistenceAdapter, WC[##other:\"http://activemq.apache.org/schema/core\"]}' is expected.\n\tat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)\n\tat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)\n\tat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:387)\n\tat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:321)\n\tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:421)\n\tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3185)\n\tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1809)\n\tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:729)\n\tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:353)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2732)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)\n\tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:812)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:741)\n\tat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)\n\tat com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)\n\tat com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)\n\tat org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\n\t... 26 more\nERROR: java.lang.Exception: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 91 in XML document from class path resource [activemq.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 91; columnNumber: 63; cvc-complex-type.2.4.a: Invalid content was found starting with element 'kahaDB'. One of '{\"http://activemq.apache.org/schema/core\":amqPersistenceAdapter, \"http://activemq.apache.org/schema/core\":jdbcPersistenceAdapter, \"http://activemq.apache.org/schema/core\":journalPersistenceAdapter, \"http://activemq.apache.org/schema/core\":kahaPersistenceAdapter, \"http://activemq.apache.org/schema/core\":memoryPersistenceAdapter, WC[##other:\"http://activemq.apache.org/schema/core\"]}' is expected.\njava.lang.Exception: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 91 in XML document from class path resource [activemq.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 91; columnNumber: 63; cvc-complex-type.2.4.a: Invalid content was found starting with element 'kahaDB'. One of '{\"http://activemq.apache.org/schema/core\":amqPersistenceAdapter, \"http://activemq.apache.org/schema/core\":jdbcPersistenceAdapter, \"http://activemq.apache.org/schema/core\":journalPersistenceAdapter, \"http://activemq.apache.org/schema/core\":kahaPersistenceAdapter, \"http://activemq.apache.org/schema/core\":memoryPersistenceAdapter, WC[##other:\"http://activemq.apache.org/schema/core\"]}' is expected.\n\tat org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:99)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:143)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:85)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:616)\n\tat org.apache.activemq.console.Main.runTaskClass(Main.java:251)\n\tat org.apache.activemq.console.Main.main(Main.java:107)\nCaused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 91 in XML document from class path resource [activemq.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 91; columnNumber: 63; cvc-complex-type.2.4.a: Invalid content was found starting with element 'kahaDB'. One of '{\"http://activemq.apache.org/schema/core\":amqPersistenceAdapter, \"http://activemq.apache.org/schema/core\":jdbcPersistenceAdapter, \"http://activemq.apache.org/schema/core\":journalPersistenceAdapter, \"http://activemq.apache.org/schema/core\":kahaPersistenceAdapter, \"http://activemq.apache.org/schema/core\":memoryPersistenceAdapter, WC[##other:\"http://activemq.apache.org/schema/core\"]}' is expected.\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:111)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:104)\n\tat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\n\tat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:64)\n\tat org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:52)\n\tat org.apache.activemq.xbean.XBeanBrokerFactory$1.<init>(XBeanBrokerFactory.java:106)\n\tat org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:106)\n\tat org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:71)\n\tat org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)\n\tat org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)\n\tat org.apache.activemq.console.command.StartCommand.startBroker(StartCommand.java:115)\n\tat org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:74)\n\t... 10 more\nCaused by: org.xml.sax.SAXParseException; lineNumber: 91; columnNumber: 63; cvc-complex-type.2.4.a: Invalid content was found starting with element 'kahaDB'. One of '{\"http://activemq.apache.org/schema/core\":amqPersistenceAdapter, \"http://activemq.apache.org/schema/core\":jdbcPersistenceAdapter, \"http://activemq.apache.org/schema/core\":journalPersistenceAdapter, \"http://activemq.apache.org/schema/core\":kahaPersistenceAdapter, \"http://activemq.apache.org/schema/core\":memoryPersistenceAdapter, WC[##other:\"http://activemq.apache.org/schema/core\"]}' is expected.\n\tat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)\n\tat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)\n\tat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:387)\n\tat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:321)\n\tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:421)\n\tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3185)\n\tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1809)\n\tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:729)\n\tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:353)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2732)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)\n\tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)\n\tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:812)\n\tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:741)\n\tat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)\n\tat com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)\n\tat com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)\n\tat org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\n\t... 26 more\nroot@manu:/usr/local/apache-activemq-5.6-SNAPSHOT# cd ..\n\nSince, I am not able to install 5.6 Snapshot properly, I couldnt check this issue with that.\n\nThanks,\nManu\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-18T14:20:23.007+0000","updated":"2011-07-18T14:20:23.007+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13067084","id":"13067084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"body":"If instead of sending the large content as message body, i send the content as a property in message header it works. Do I need to make some settings for it to work.As websockets are able to receive the large content as property in message header, why its giving issue with message.body.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-18T15:31:02.506+0000","updated":"2011-07-18T15:31:02.506+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13067353","id":"13067353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"I think the problem with the 5.6-SNAPSHOT was caused by a previous commit for another fix, I've correct the problem so the next nightly should work.  I'd recommend that you give that a try once its built.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-07-18T22:14:13.887+0000","updated":"2011-07-18T22:14:13.887+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13067711","id":"13067711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"body":"I tried with the latest snapshot, it installed and started properly this time, but I am not able to get the consumers working. In the web-console under connections tab, I see connection is there but no consumer on the queue. Also, message sent to that queue are not consumed by the consumer.\n\nMoreover, when a web socket sends a message to the queue, under web console that is being shown as consumer on that queue. Please find below some snippets form log file,\n\n2011-07-19 09:05:43,654 | INFO  | Connector vm://localhost Started | org.apache.activemq.broker.TransportConnector | main\n2011-07-19 09:05:43,776 | INFO  | Route: route1 started and consuming from: Endpoint[activemq://example.A] | org.apache.camel.spring.SpringCamelContext | main\n2011-07-19 09:05:43,802 | INFO  | Total 1 routes, of which 1 is started. | org.apache.camel.spring.SpringCamelContext | main\n2011-07-19 09:05:43,802 | INFO  | Apache Camel 2.7.0 (CamelContext: camel) started in 2.493 seconds | org.apache.camel.spring.SpringCamelContext | main\n2011-07-19 09:05:46,271 | INFO  | Camel Console at http://0.0.0.0:8161/camel | org.eclipse.jetty.util.log | main\n2011-07-19 09:05:46,312 | INFO  | ActiveMQ Web Demos at http://0.0.0.0:8161/demo | org.eclipse.jetty.util.log | main\n2011-07-19 09:05:46,352 | INFO  | RESTful file access application at http://0.0.0.0:8161/fileserver | org.eclipse.jetty.util.log | main\n2011-07-19 09:05:46,358 | INFO  | Started SelectChannelConnector@0.0.0.0:8161 | org.eclipse.jetty.util.log | main\n2011-07-19 09:08:35,362 | WARN  | Broker localhost not started so using manu instead | org.apache.activemq.broker.BrokerRegistry | qtp10838548-35\n2011-07-19 09:08:42,337 | INFO  | Transport failed: java.io.EOFException | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ NIO Worker\n2011-07-19 09:09:21,683 | INFO  | Transport failed: java.io.EOFException | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ NIO Worker\n2011-07-19 09:09:58,544 | INFO  | Transport failed: java.io.EOFException | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ NIO Worker\n2011-07-19 09:12:07,792 | INFO  | Transport failed: java.io.EOFException | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ NIO Worker\n2011-07-19 09:16:15,944 | INFO  | Transport failed: java.io.EOFException | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ NIO Worker","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-19T13:23:41.400+0000","updated":"2011-07-19T13:23:41.400+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13068208","id":"13068208","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Can you send you configuration. It looks like you're connecting to stomp+nio connector and not ws?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2011-07-20T08:03:35.825+0000","updated":"2011-07-20T08:03:35.825+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13068348","id":"13068348","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"body":"Please find below a snippet from my cofig file(activemq.xml),\n\n<transportConnectors>\n                <transportConnector name=\"openwire\" uri=\"tcp://0.0.0.0:61616?transport.keepAliveResponseRequired=true\"/>\n                <transportConnector name=\"stomp\" uri=\"stomp://0.0.0.0:61612?transport.closeAsync=false;transport.keepAliveResponseRequired=true\"/>\n                <transportConnector name=\"stomp+nio\" uri=\"stomp+nio://0.0.0.0:61613?transport.closeAsync=false;transport.keepAliveResponseRequired=true\"/>\n                <transportConnector name=\"websocket\" uri=\"ws://0.0.0.0:61614\"/>\n        </transportConnectors>\n\nMy design is,\n\nThere is a websocket connection from my web page to the broker, which when the page is opened, connects to the broker and sends a message to the queue using websockets.This is working fine. On the other hand, there is a perl consumer listening on that queue.This is where the problem arises.My perl consumer is not able to receive the message also, under webconsole, I didnt see it subscribed to the queue, though I see a stomp connection under connections tab.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-20T13:05:00.098+0000","updated":"2011-07-20T13:05:00.098+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13068901","id":"13068901","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Have you tried using plain stomp transport instead stomp+nio and see if that makes any difference?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2011-07-21T11:01:29.410+0000","updated":"2011-07-21T11:01:29.410+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13072499","id":"13072499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"body":"Dejan, even with plain stomp it gives the same behaviour. I have migrated back to version 5.5 and sending the whole message as a property in the header and this workaround works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manua","name":"manua","key":"manua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manu Agarwal","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-28T19:31:41.911+0000","updated":"2011-07-28T19:31:41.911+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13073473","id":"13073473","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"A test case that demonstrates the problem (Stomp only) would help to investigate this problem further.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2011-08-01T09:30:05.322+0000","updated":"2011-08-01T09:30:05.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/13084732","id":"13084732","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Needs a test case in order to reproduce, reopen once a test case is provided.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-08-13T22:49:55.296+0000","updated":"2011-08-13T22:49:55.296+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514439/comment/14313709","id":"14313709","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gaikwaja","name":"gaikwaja","key":"gaikwaja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gaikwaja","active":true,"timeZone":"Etc/UTC"},"body":"I was able to reproduce this issue as follows opened AMQ-5572(an linked to this jira)  as unable to reopen this one \nI use samples/websocket example ,for connection to the apache-activemq-5.11.0 or apollo(1.7.1) broker,and sending message to the queue using websockets. \nOn the other end is a cpp(3.8.3) client consumer listening on that queue.(from examples/stomp/cpp) \nMy cpp consumer is able to receive the message but the Body of message is NilContent i.e truncated completely \nThis jira has been marked as fixed in 5.6,is it possible it has regressed in latest release or apollo 1.7.1?\nSTOMP LOGS :\n2015-02-09 03:07:00,575 | TRACE | received frame: StompFrame(SEND,List((destination,/topic/test), (content-length,41)),BufferContent(ascii: this is test message over websocket stomp),true,List()) | \n2015-02-09 03:07:00,575 | DEBUG | producer route attaching to consumer. | \n2015-02-09 03:07:00,575 | DEBUG | producer route attaching to consumer. | \n2015-02-09 03:07:00,575 | DEBUG | producer route attaching to consumer. | \n2015-02-09 03:07:00,576 | TRACE | sending frame: StompFrame(MESSAGE,List((destination,/topic/test), (content-length,41)),BufferContent(ascii: this is test message over websocket stomp),true,List((subscription,ID:mylpadeci10-57515-1423451149856-0:0:1:1), (message-id,hw-1e2))) | \n2015-02-09 03:07:00,576 | TRACE | sending frame: StompFrame(MESSAGE,List((destination,/topic/test), (content-length,41)),BufferContent(ascii: this is test message over websocket stomp),true,List((subscription,sub-0), (message-id,hw-1e2))) | \n2015-02-09 03:07:00,576 | TRACE | received frame: StompFrame(ACK,List((message-id,hw-1e2)),NilContent,true,List()) |\nP.S \nI have also tried the same with apache-activemq-5.11.0 and verified that the issue exists there as well","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gaikwaja","name":"gaikwaja","key":"gaikwaja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gaikwaja","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-10T07:01:51.940+0000","updated":"2015-02-10T07:01:51.940+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3402/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ebzr:"}}