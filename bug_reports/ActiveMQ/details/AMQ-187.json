{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481130","self":"https://issues.apache.org/jira/rest/api/2/issue/12481130","key":"AMQ-187","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315600","id":"12315600","name":"3.0","archived":false,"released":true}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2005-03-17T00:14:05.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Mar 23 00:07:43 UTC 2005","customfield_12310420":"48918","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3741490000_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2005-03-23T00:07:43.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-187/watchers","watchCount":2,"isWatching":false},"created":"2005-02-07T16:49:33.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315597","id":"12315597","name":"1.5","archived":false,"released":true},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315598","id":"12315598","name":"2.0","archived":false,"released":true}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2005-03-23T00:07:43.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Due to a Problem with Version 1.5 (see other Commit) we tried using Version 2.0. Using Version 2.0 we permanently get an \"failed to build body from bytes\" Error. \n\nAs fas as we analyzed, this normally seems to happen if there is a serilalisation/deserialisation Problem .. but in this Case the Broker, the \"Client\" and the \"Server\" are using all the Same machine/jdk/classes. \n\nWe are simply \"transporting\" an Array of Tile-Requests as the Body of an ObjectMessage (see the Class below). In the Error-Case it seems that the Object-Body of the Message itself is being lost. \nThe Message sent by the Client still contains the Object .. the Message received by the Server seems to have lost it's contents.\n\nAny comments/ideas ??\n\n\n8<-----------------8<----------------8<----------------8<----------\npublic class TileRequest implements Serializable {\n  private Serializable segmentHandle;\n  private RenderContext renderContext;\n  private Rectangle tile;\n\npublic TileRequest(Serializable segmentHandle, RenderContext    \n      renderContext, Rectangle tile) {\n    this.segmentHandle = segmentHandle;\n    this.renderContext = renderContext;\n    this.tile = tile;\n  }\n\n  public RenderContext getRenderContext() {\n    return renderContext;\n  }\n\n  public Serializable getSegmentHandle() {\n    return segmentHandle;\n  }\n\n  public Rectangle getTileRectangle() {\n    return tile;\n  }\n}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161864","customfield_12312823":null,"summary":"Switching V1.5 to V2.0 => failed to build body from bytes","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=laermtot","name":"laermtot","key":"laermtot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Volker Graf","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=laermtot","name":"laermtot","key":"laermtot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Volker Graf","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows 2k ","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481130/comment/12937011","id":"12937011","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kingpin","name":"kingpin","key":"kingpin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olufemi Omojola","active":true,"timeZone":"Etc/UTC"},"body":"I've experienced a similar issue using V1.5: I'm starting the application using classworlds and building the class loader structure in code. What I've observed is that when I run my application using a script file that just invokes the classworlds jar as the argument to java it works fine, however if I invoke it from within the java service wrapper I receive the error\n\njavax.jms.JMSException: failed to build body from bytes\n     at org.codehaus.activemq.message.ActiveMQObjectMessage.getObject(ActiveMQObjectMessage.java:163)\n     at com.simpleeye.routing.BasicRouterService$multicastSubscriber.onMessage(BasicRouterService.java:362)\n     at org.codehaus.activemq.ActiveMQMessageConsumer.processMessage(ActiveMQMessageConsumer.java:397)\n     at org.codehaus.activemq.ActiveMQSessionExecutor.run(ActiveMQSessionExecutor.java:79)\n     at java.lang.Thread.run(Unknown Source)\n\nAfter some exploration it turns out that the problem is dependent upon the working folder: if I reconfigure the service wrapper to use the same working directory as the batch file, it works fine (oddly enough, I experienced similar difficulties with JavaMail), so it seems there is some dependency between the working folder and the serialization/deserialization. A cursory glance at the ActiveMW source code didn't really enlighten me, but is there some specific property or configuration file that depends upon the relative location (with respect to the JVM's working directory) of the Active MQ jar files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kingpin","name":"kingpin","key":"kingpin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olufemi Omojola","active":true,"timeZone":"Etc/UTC"},"created":"2005-03-17T00:14:05.000+0000","updated":"2005-03-17T00:14:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481130/comment/12936792","id":"12936792","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"Any chance you could double check this is still an issue in 3.0-SNAPSHOT? We've added a number of fixes for serialization with different class loaders - this issue could now be resolved","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2005-03-21T11:20:14.000+0000","updated":"2005-03-21T11:20:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481130/comment/12937093","id":"12937093","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"I'm assuming this issue is resolved unless you let me know otherwise as we've seen the same issue as well and its now fixed from our tests at least","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2005-03-23T00:07:43.000+0000","updated":"2005-03-23T00:07:43.000+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-187/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s2e7:"}}