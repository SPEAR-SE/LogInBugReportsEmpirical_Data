{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12613159","self":"https://issues.apache.org/jira/rest/api/2/issue/12613159","key":"AMQ-4128","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2013-08-05T18:45:08.821+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Aug 05 18:45:08 UTC 2013","customfield_12310420":"250591","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_24721118777_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-08-05T18:45:08.775+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4128/watchers","watchCount":2,"isWatching":false},"created":"2012-10-23T15:46:30.067+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321258","id":"12321258","description":"Next v5 maintenance release","name":"5.7.0","archived":false,"released":true,"releaseDate":"2012-10-08"}],"issuelinks":[{"id":"12359337","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12359337","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12558517","key":"AMQ-3866","self":"https://issues.apache.org/jira/rest/api/2/issue/12558517","fields":{"summary":"kahadb log files not getting cleaned up","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-08-05T18:45:08.841+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313895","id":"12313895","name":"Message Store"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"(See this thread for the original report: http://activemq.2283324.n4.nabble.com/KahaDB-No-messages-but-log-files-not-reclaimed-and-StorePercentUsage-above-100-td4658074.html)\n\nSetup: Embedded broker, mKahaDB store, transactions. Sometimes, when sigkill'ing the process and starting again, some kahaBD journal file won't ever get reclaimed, thus filing the disk and ultimately stopping the system.\n\nThe logs O see look a lot to me like logs from this report: https://issues.apache.org/jira/browse/AMQ-3866\n\nI'll attach such a log file (db-444.log, matching logs below).\n\nLogs for the restart part (the app runs inside tomcat):\n{noformat} \nListening for transport dt_socket at address: 24001\nOct 23, 2012 5:27:45 PM org.apache.catalina.core.AprLifecycleListener init\nINFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /opt/jdk1.6.0_33/jre/lib/amd64/server:/opt/jdk1.6.0_33/jre/lib/amd64:/opt/jdk1.6.0_33/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\nOct 23, 2012 5:27:45 PM org.apache.coyote.http11.Http11Protocol init\nINFO: Initializing Coyote HTTP/1.1 on http-24080\nOct 23, 2012 5:27:45 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 712 ms\nOct 23, 2012 5:27:45 PM org.apache.catalina.core.StandardService start\nINFO: Starting service Catalina\nOct 23, 2012 5:27:45 PM org.apache.catalina.core.StandardEngine start\nINFO: Starting Servlet Engine: Apache Tomcat/6.0.35\nOct 23, 2012 5:27:45 PM org.apache.catalina.startup.HostConfig deployDescriptor\nINFO: Deploying configuration descriptor server.xml\n2012-10-23 17:27:46,347 INFO  main: [scratch.proto5.Bootstrap] bootstrap.+\n2012-10-23 17:27:46,460 INFO  main: [org.apache.activemq.xbean.XBeanBrokerFactory$1] Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$1@20ca5bff: startup date [Tue Oct 23 17:27:46 CEST 2012]; root of context hierarchy\n2012-10-23 17:27:46,553 INFO  main: [org.apache.xbean.spring.context.v2.XBeanXmlBeanDefinitionReader] Loading XML bean definitions from class path resource [activemq.xml]\n2012-10-23 17:27:47,112 INFO  main: [org.springframework.beans.factory.support.DefaultListableBeanFactory] Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3f70119f: defining beans [org.apache.activemq.xbean.XBeanBrokerService#0]; root of factory hierarchy\n2012-10-23 17:27:47,448 INFO  main: [org.apache.activemq.store.kahadb.plist.PListStore] PListStore:[/home/jel/proto5/tmp/activemq-data/localhost/tmp_storage] started\n2012-10-23 17:27:47,510 INFO  JMX connector: [org.apache.activemq.broker.jmx.ManagementContext] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi\n2012-10-23 17:27:47,525 INFO  main: [org.apache.activemq.broker.BrokerService] Using Persistence Adapter: MultiKahaDBPersistenceAdapter[/home/jel/proto5/tmp/mKahaDB][KahaDBPersistenceAdapter[/home/jel/proto5/tmp/mKahaDB/queue#3a#2f#2fb], KahaDBPersistenceAdapter[/home/jel/proto5/tmp/mKahaDB/0]]\n2012-10-23 17:27:47,619 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] KahaDB is version 4\n2012-10-23 17:27:47,619 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] KahaDB is version 4\n2012-10-23 17:27:47,644 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] Recovering from the journal ...\n2012-10-23 17:27:47,644 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] Recovering from the journal ...\n2012-10-23 17:27:47,943 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] Recovery replayed 2 operations from the journal in 0.315 seconds.\n2012-10-23 17:27:47,943 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] Recovery replayed 2 operations from the journal in 0.315 seconds.\n2012-10-23 17:27:47,991 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] Recovering from the journal ...\n2012-10-23 17:27:47,991 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] Recovering from the journal ...\n2012-10-23 17:27:52,650 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:27:52,650 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:27:52,655 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:27:52,655 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:27:57,675 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:27:57,675 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:27:57,680 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:27:57,680 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:02,700 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:02,700 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:02,704 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:02,704 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:07,724 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:07,724 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:07,728 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:07,728 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:12,748 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:12,748 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:12,752 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:12,752 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:17,772 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:17,772 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:17,776 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 173:2393052, full gc candidates set: [173]\n2012-10-23 17:28:17,776 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 173:2393052, full gc candidates set: [173]\n2012-10-23 17:28:17,777 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:173:2393052, []\n2012-10-23 17:28:17,777 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:173:2393052, []\n2012-10-23 17:28:17,777 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:28:17,777 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:28:17,777 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:17,777 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:22,797 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:22,797 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:22,801 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:22,801 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:27,821 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:27,821 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:27,825 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:27,825 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:27,951 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] Recovery replayed 2462 operations from the journal in 39.96 seconds.\n2012-10-23 17:28:27,951 INFO  main: [org.apache.activemq.store.kahadb.MessageDatabase] Recovery replayed 2462 operations from the journal in 39.96 seconds.\n2012-10-23 17:28:27,953 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:27,953 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:27,964 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:27,964 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:28,034 INFO  main: [org.apache.activemq.broker.BrokerService] Apache ActiveMQ 5.7.0 (broker, ID:perf1srv.dictao.com-59285-1351006072342-0:1) is starting\n2012-10-23 17:28:28,466 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:28,466 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:28,469 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 445:101, full gc candidates set: [444, 445]\n2012-10-23 17:28:28,469 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 445:101, full gc candidates set: [444, 445]\n2012-10-23 17:28:28,469 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:444:627935, []\n2012-10-23 17:28:28,469 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:444:627935, []\n2012-10-23 17:28:28,469 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:28:28,469 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:28:28,469 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:28,469 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:28,864 INFO  main: [org.apache.activemq.store.kahadb.MultiKahaDBTransactionStore] pending local transactions: [XID:[61616,globalId=49443a70657266317372762e64696374616f2e636f6d2d34303431352d313335313030343035313632392d333a31,branchId=31303039]]\n2012-10-23 17:28:28,864 INFO  main: [org.apache.activemq.store.kahadb.MultiKahaDBTransactionStore] pending local transactions: [XID:[61616,globalId=49443a70657266317372762e64696374616f2e636f6d2d34303431352d313335313030343035313632392d333a31,branchId=31303039]]\n2012-10-23 17:28:29,024 INFO  main: [org.apache.activemq.store.kahadb.plist.PListStore] PListStore:[/home/jel/proto5/tmp/activemq-data/localhost/tmp_storage] initialized\n2012-10-23 17:28:29,361 INFO  main: [org.apache.activemq.broker.BrokerService] Apache ActiveMQ 5.7.0 (broker, ID:perf1srv.dictao.com-59285-1351006072342-0:1) started\n2012-10-23 17:28:29,361 INFO  main: [org.apache.activemq.broker.BrokerService] For help or more information please see: http://activemq.apache.org\n2012-10-23 17:28:29,416 INFO  main: [org.apache.activemq.broker.TransportConnector] Connector vm://broker Started\nOct 23, 2012 5:28:29 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized\nINFO: WSSERVLET12: JAX-WS context listener initializing\nOct 23, 2012 5:28:30 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate <init>\nINFO: WSSERVLET14: JAX-WS servlet initializing\nOct 23, 2012 5:28:30 PM org.apache.catalina.startup.HostConfig deployDescriptor\nINFO: Deploying configuration descriptor manager.xml\nOct 23, 2012 5:28:30 PM org.apache.catalina.startup.HostConfig deployDescriptor\nINFO: Deploying configuration descriptor ROOT.xml\nOct 23, 2012 5:28:30 PM org.apache.coyote.http11.Http11Protocol start\nINFO: Starting Coyote HTTP/1.1 on http-24080\nOct 23, 2012 5:28:30 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 45319 ms\n2012-10-23 17:28:32,845 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:32,845 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:32,851 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:32,851 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:33,490 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:33,490 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:33,493 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:33,493 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:37,871 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:37,871 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:37,876 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:37,876 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:38,513 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:38,513 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:38,516 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:38,516 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:42,896 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:42,896 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:42,901 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:42,901 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:43,536 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:43,536 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:43,540 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:43,540 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:47,921 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:47,921 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:47,926 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 173:2405814, full gc candidates set: [173]\n2012-10-23 17:28:47,926 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 173:2405814, full gc candidates set: [173]\n2012-10-23 17:28:47,926 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:173:2405814, []\n2012-10-23 17:28:47,926 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:173:2405814, []\n2012-10-23 17:28:47,926 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:28:47,926 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:28:47,926 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:47,926 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:48,560 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:48,560 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:48,563 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:48,563 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:52,946 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:52,946 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:52,950 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:52,950 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:53,583 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:53,583 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:53,586 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:53,586 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:57,970 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:57,970 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:57,974 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:57,974 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n2012-10-23 17:28:58,606 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:58,606 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:28:58,609 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 445:8225, full gc candidates set: [444, 445]\n2012-10-23 17:28:58,609 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 445:8225, full gc candidates set: [444, 445]\n2012-10-23 17:28:58,609 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:444:627935, []\n2012-10-23 17:28:58,609 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:444:627935, []\n2012-10-23 17:28:58,609 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:28:58,609 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:28:58,609 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint done.\n{noformat} \n\nLater, I see lots of\n{noformat} \n2012-10-23 17:29:59,190 DEBUG ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Checkpoint started.\n2012-10-23 17:29:59,270 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 545:2227274, full gc candidates set: [444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544, 545]\n2012-10-23 17:29:59,270 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] Last update: 545:2227274, full gc candidates set: [444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544, 545]\n2012-10-23 17:29:59,270 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:444:627935, []\n2012-10-23 17:29:59,270 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates after first tx:444:627935, []\n2012-10-23 17:29:59,270 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n2012-10-23 17:29:59,270 TRACE ActiveMQ Journal Checkpoint Worker: [org.apache.activemq.store.kahadb.MessageDatabase] gc candidates: []\n{noformat} ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12550480","id":"12550480","filename":"db-444.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gilles.harloux","name":"gilles.harloux","key":"gilles.harloux","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gilles Harloux","active":true,"timeZone":"Europe/Paris"},"created":"2012-10-23T15:48:20.946+0000","size":5256595,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12550480/db-444.log"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"62030","customfield_12312823":null,"summary":"kahaDB journal file never gets reclaimed after broker process crash","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gilles.harloux","name":"gilles.harloux","key":"gilles.harloux","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gilles Harloux","active":true,"timeZone":"Europe/Paris"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gilles.harloux","name":"gilles.harloux","key":"gilles.harloux","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gilles Harloux","active":true,"timeZone":"Europe/Paris"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"rhel 5.3, tomcat 6.0.35, jdk 1.6.0_35","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12613159/comment/13729786","id":"13729786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"No test to validate.  Several fixes in 5.9 now for issues such as this, recommend you retest using a SNAPSHOT build. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-08-05T18:45:08.821+0000","updated":"2013-08-05T18:45:08.821+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4128/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0azi7:"}}