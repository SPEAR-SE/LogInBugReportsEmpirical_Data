{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481566","self":"https://issues.apache.org/jira/rest/api/2/issue/12481566","key":"AMQ-641","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2006-03-17T09:59:50.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Mar 21 03:04:43 UTC 2006","customfield_12310420":"84280","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2323000_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2006-03-17T10:07:39.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-641/watchers","watchCount":0,"isWatching":false},"created":"2006-03-17T09:28:56.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315604","id":"12315604","name":"3.2.2","archived":false,"released":true},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315607","id":"12315607","description":"Milestone 4","name":"4.0 M4","archived":false,"released":true,"releaseDate":"2006-01-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-03-21T03:04:43.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313893","id":"12313893","name":"Connector"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313896","id":"12313896","name":"JMS client"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"If I use failover:tcp//.... in the jms client,\nThat all method will be blocked when net or activemq error.\nThis  is not a good idea.My application will be blocked. \n\nAnd If I use tcp//.... in the jms client,Sometimes ,send(message) method will be blocked,also not return.\n\n JMS is a asynchronous interface ,blocking is not allow at any condition.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"254711","customfield_12312823":null,"summary":" JMS is a asynchronous interface ,blocking is not allow.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"winxp jdk1.4.2 jdk 1.5.6","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937557","id":"12937557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"body":"I have post detail describe in our forum.\nurl:  http://forums.activemq.org/posts/list/539.page#1933","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-17T09:32:30.000+0000","updated":"2006-03-17T09:32:30.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937640","id":"12937640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"This is not strictly true; the JMS API consists of a number of synchronous APIs and some asynchronous APIs. The asynchronous part is really the consumer.setMessageListener().\n\nIn the JMS specification, operations such as createConnnection, createSession, createProducer, createConsumer, send, commit, rollback are all actually synchronous operations - for good reason since due to security constraints, they could fail - or for reliability reasons users need to know a transaction or message send did actually work and make it to the broker.\n\nHowever ActiveMQ does have an extension where we can configure all send operations to be asynchronous by default, so once a connection is established, sends will be non-blocking.\ne.g. for 3.x use tcp;//localhost:61616?useAsyncSend=true\n\nhttp://activemq.org/ActiveMQ+3+Transport+Configurations","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-17T09:59:50.000+0000","updated":"2006-03-17T09:59:50.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937580","id":"12937580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"ActiveMQ fully conforms to the JMS specification and offers a number of enhancements to add extra levels of asynchrony","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-17T10:07:39.000+0000","updated":"2006-03-17T10:07:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937598","id":"12937598","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"body":"I see.\nBut not blocked the method transfer,It can throw errors or return false.\nYou can see the log,why sometimes throw errors but not return,the application is stoped.\nI used others jms server, them always throw errors when net or Server not work.\n\nIn the AMQ 4.0 set the jms client  with \"java.naming.provider.url = failover:tcp://128.64.7.27:61616?useAsyncSend=true \",the result is too bad.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-17T10:45:19.000+0000","updated":"2006-03-17T10:45:19.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937665","id":"12937665","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"OK I'm with you now - you are happy for the method to be synchronous - and when there is a network problem you want it to fail with an exception right? Your issue appears to be that the amount of time before a network error becomes apparent is too long right?\n\nIn that case - I'd take off the failover: prefix and just ensure that you set the TCP timeouts  to something small enough so you get an error in whatever timeframe suits you.\n\nhttp://activemq.org/TCP+Transport+Reference\n\nif you try the latest SNAPSHOT build, we have a 'connectionTimeout' property that sets the maximum amount of time you are prepared to wait before you declare a TCP socket connection failed.\n\nSo try\n\ntcp://localhost:61616?connectionTimeout=1000&soTimeout=1000\n\nthen you should get an error within a second of trying to connect/send if there is a network error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-17T11:07:35.000+0000","updated":"2006-03-17T11:07:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937499","id":"12937499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"body":"Very Thanks.\n\nI will try.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-17T11:20:46.000+0000","updated":"2006-03-17T11:20:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937635","id":"12937635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"body":"Not resolve it.\n\nNow ,always throws the error:\n\n\n21:17:15 WARN  Async exception with no exception listener: java.net.SocketException: Connection reset\njava.net.SocketException: Connection reset\n\tat java.net.SocketInputStream.read(SocketInputStream.java:168)\n\tat org.apache.activemq.transport.tcp.TcpBufferedInputStream.fill(TcpBufferedInputStream.java:48)\n\tat org.apache.activemq.transport.tcp.TcpBufferedInputStream.read(TcpBufferedInputStream.java:55)\n\tat java.io.DataInputStream.readInt(DataInputStream.java:353)\n\tat org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:270)\n\tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:136)\n\tat java.lang.Thread.run(Thread.java:595)\n\n\n\n\nBut also not return.....,Program is blocked.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-18T15:27:23.000+0000","updated":"2006-03-18T15:27:23.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937644","id":"12937644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"Could you provide a stack trace of the blocked program? Then we can find where its blocking. The log you show is an asynchronous event, not in the thread of the main application.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-18T15:37:01.000+0000","updated":"2006-03-18T15:37:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937664","id":"12937664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"This doc describes how to do it - its basically ctrl-break on windows \n\nhttp://www.weblogic.com/docs51/techsupport/threaddump.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-18T15:38:37.000+0000","updated":"2006-03-18T15:38:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937737","id":"12937737","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"body":"I cann't know how to do it.\n\nI can tell how recur the error.\n\nYou down my jms client. and change the ant build.xml  change the new lib file,then change the jndi.properties with tcp://localhost:61616?connectionTimeout=1000&soTimeout=1000 .\n\nthen in winxp CMD console,type the : ant SendTest. Then my client will run.and run: ant RecvTest ,the recive client will run.\n\nNow you run ActiveMQ server.  After run a period of time,shutdown ActiveMQ.The send client will not run sometimes and stoped.  Reopen ActiveMQ server send client also not runcontinuely.But Recv Client can run continuely.\n\nIf not occur,test more.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-18T16:59:09.000+0000","updated":"2006-03-18T16:59:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481566/comment/12937780","id":"12937780","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"body":"I have patch this question.\n\nIn the file package org.apache.activemq.ActiveMQConnection;\n\n    public Response syncSendPacket(Command command) throws JMSException {\n        if (isClosed()) {\n            throw new ConnectionClosedException();\n        } else {\n           /* if (command.isMessage() && flowControlSleepTime > 0) {\n                try {\n                    Thread.sleep(flowControlSleepTime);\n                } catch (InterruptedException e) {\n                }\n            }\n            */\n            \n            try {\n\n               //Change by tao at 2006-3-21\n               // Response response = this.transport.request(command);               \n                Response response = this.transport.request(command,30000);\n\n                if (response.isException()) {\n                    ExceptionResponse er = (ExceptionResponse) response;\n                    if (er.getException() instanceof JMSException)\n                        throw (JMSException) er.getException();\n                    else\n                        throw JMSExceptionSupport.create(er.getException());\n                }\n                return response;\n            } catch (IOException e) {\n                throw JMSExceptionSupport.create(e);\n            }\n        }\n    }","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taoyonggang","name":"taoyonggang","key":"taoyonggang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tao","active":true,"timeZone":"Etc/UTC"},"created":"2006-03-21T03:04:43.000+0000","updated":"2006-03-21T03:04:43.000+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-641/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i17zfr:"}}