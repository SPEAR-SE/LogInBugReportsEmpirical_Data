{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12773355","self":"https://issues.apache.org/jira/rest/api/2/issue/12773355","key":"AMQ-5572","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317974","id":"12317974","description":"Next v5 maintenance release","name":"5.6.0","archived":false,"released":true,"releaseDate":"2012-05-07"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Feb 11 06:42:55 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_181423664_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-02-11T06:42:55.810+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5572/watchers","watchCount":1,"isWatching":false},"created":"2015-02-09T04:19:12.184+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324951","id":"12324951","name":"5.11.0","archived":false,"released":true,"releaseDate":"2015-02-04"}],"issuelinks":[{"id":"12407572","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12407572","type":{"id":"10020","name":"Cloners","inward":"is cloned by","outward":"is a clone of","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10020"},"outwardIssue":{"id":"12504531","key":"AMQ-3284","self":"https://issues.apache.org/jira/rest/api/2/issue/12504531","fields":{"summary":"WebSockets and truncated body","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12407573","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12407573","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12548999","key":"AMQ-3794","self":"https://issues.apache.org/jira/rest/api/2/issue/12548999","fields":{"summary":"The body of StompFrame is truncated to 64 chars","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-02-11T06:42:55.845+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"A similar issue[AMQ-3284] appears already as fixed in 5.6 ,has this regressed in 5.11 ?\n\n\nIn WebSocket transport, StompSocket class calls StompFrame.toString() instead StompFrame.format(). Because of this, some frames can be truncated.\n\nI have same problem as  https://issues.apache.org/jira/browse/AMQ-3284\nI use samples/websocket example ,for connection to the apache-activemq-5.11.0 or apollo(1.7.1) broker,and sending  message to the queue using websockets. \nOn the other end is a cpp(3.8.3) client consumer listening on that queue.(from examples/stomp/cpp) \nMy cpp consumer is able to receive the message but the Body of message is NilContent i.e  truncated completely \nThis jira has been marked as fixed in 5.6,is it possible it has regressed in latest release or apollo 1.7.1? \n\nSTOMP LOGS : \n\n2015-02-09 03:07:00,575 | TRACE | received frame: StompFrame(SEND,List((destination,/topic/test), (content-length,41)),BufferContent(ascii: this is test message over websocket stomp),true,List()) | \n2015-02-09 03:07:00,575 | DEBUG | producer route attaching to consumer. | \n2015-02-09 03:07:00,575 | DEBUG | producer route attaching to consumer. | \n2015-02-09 03:07:00,575 | DEBUG | producer route attaching to consumer. | \n2015-02-09 03:07:00,576 | TRACE | sending frame: StompFrame(MESSAGE,List((destination,/topic/test), (content-length,41)),BufferContent(ascii: this is test message over websocket stomp),true,List((subscription,ID:mylpadeci10-57515-1423451149856-0:0:1:1), (message-id,hw-1e2))) | \n2015-02-09 03:07:00,576 | TRACE | sending frame: StompFrame(MESSAGE,List((destination,/topic/test), (content-length,41)),BufferContent(ascii: this is test message over websocket stomp),true,List((subscription,sub-0), (message-id,hw-1e2))) | \n2015-02-09 03:07:00,576 | TRACE | received frame: StompFrame(ACK,List((message-id,hw-1e2)),NilContent,true,List()) | \n\n\nP.S \nI have also tried the same with apache-activemq-5.11.0 and verified that the issue exists there as well\n ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Regression WebSockets and truncated body","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gaikwaja","name":"gaikwaja","key":"gaikwaja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gaikwaja","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gaikwaja","name":"gaikwaja","key":"gaikwaja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gaikwaja","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12773355/comment/14315669","id":"14315669","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gaikwaja","name":"gaikwaja","key":"gaikwaja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gaikwaja","active":true,"timeZone":"Etc/UTC"},"body":"ByteMessage formatted messages were received from examples/websocket/index.html over websocket-stomp protocol \nand the  examples/stomp/cpp/listener is only expecting TextMessage.\n\nAfter changing example to handle ByteMessage this works ,\nMaybe the cpp examples can be modified in future releases to avoid newbie issues like these.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gaikwaja","name":"gaikwaja","key":"gaikwaja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gaikwaja","active":true,"timeZone":"Etc/UTC"},"created":"2015-02-11T06:42:55.837+0000","updated":"2015-02-11T06:42:55.837+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5572/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i25cj3:"}}