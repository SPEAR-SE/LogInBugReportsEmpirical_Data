{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482607","self":"https://issues.apache.org/jira/rest/api/2/issue/12482607","key":"AMQ-1850","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315619","id":"12315619","description":"","name":"5.2.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2008-07-10T14:36:25.441+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Sep 19 12:10:36 UTC 2008","customfield_12310420":"84447","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_5860113421_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2008-09-15T18:38:21.722+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1850/watchers","watchCount":2,"isWatching":false},"created":"2008-07-09T22:49:48.301+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315614","id":"12315614","description":"","name":"4.1.1","archived":false,"released":true,"releaseDate":"2007-06-08"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315615","id":"12315615","description":"","name":"4.1.2","archived":false,"released":true,"releaseDate":"2008-04-14"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315618","id":"12315618","description":"","name":"5.1.0","archived":false,"released":true,"releaseDate":"2008-05-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-10-08T08:49:57.180+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I have been having this problem throughout all of the ActiveMQ versions (starting from 4.1.0-incubator). Just got used to killing off the dead clients throught jconsole every morning. Would be nice to have this fixed... Glad someone put a test case for it [thanks Ossory]\n\nHi, \nI have an issue where a JMS client attempts to receive messages from a queue. The client fails due to a JVM crash and the JMS connection is not closed. This leaves a consumer behind (that I can see in the ActiveMQ admin console). If I restart the JMS client it fails to receive all of the new messages that sent to the queue in question. \nUsing JMX to stop the open connections or closing ActiveMQ allows the client to work again. \nIs there a timeout value that you can apply to connections to avoid having to do this? \nAny help would be appreciated. \n\nI've created an artificial test case based on the behaviour I have seen in ActiveMQ 5.1 on Windows XP. \nThe method jmsTest2 deliberately fails to close the connection. \n\n    static final String PROVIDER_URL = \"tcp://localhost:61616\"; \n    static final String QUEUE = \"queueA\"; \n\n    static void jmsTest() throws JMSException, NamingException { \n        Properties props = new Properties(); \n        props.setProperty(Context.INITIAL_CONTEXT_FACTORY, \"org.apache.activemq.jndi.ActiveMQInitialContextFactory\"); \n        props.setProperty(Context.PROVIDER_URL, PROVIDER_URL);         \n        InitialContext ctx = new InitialContext(props); \n        QueueConnectionFactory cf = (QueueConnectionFactory)ctx.lookup(\"ConnectionFactory\"); \n        QueueConnection conn = cf.createQueueConnection(); \n        conn.start(); //this is required if you want to receive messages using this connection \n        QueueSession sess = conn.createQueueSession(false, Session.AUTO_ACKNOWLEDGE); \n        Queue qa = sess.createQueue(QUEUE); \n        QueueSender sender = sess.createSender(qa); \n        for(int i = 0; i < 10; i++) { \n            Message msg = sess.createTextMessage(\"test\"); \n            sender.send(msg); \n        } \n        sender.close(); \n        sess.close(); \n        conn.close(); \n    } \n\n    static void jmsTest2() throws JMSException, NamingException { \n        Properties props = new Properties(); \n        props.setProperty(Context.INITIAL_CONTEXT_FACTORY, \"org.apache.activemq.jndi.ActiveMQInitialContextFactory\"); \n        props.setProperty(Context.PROVIDER_URL, PROVIDER_URL);         \n        InitialContext ctx = new InitialContext(props); \n        QueueConnectionFactory cf = (QueueConnectionFactory)ctx.lookup(\"ConnectionFactory\"); \n        QueueConnection conn = cf.createQueueConnection(); \n        conn.start(); //this is required if you want to receive messages using this connection \n        QueueSession sess = conn.createQueueSession(false, Session.AUTO_ACKNOWLEDGE); \n        Queue qa = sess.createQueue(QUEUE); \n        QueueReceiver qr = sess.createReceiver(qa); \n        for(int i = 0; i < 10; i++) { \n            Message msgin = qr.receive(5000); \n            System.out.println(\"msgin\" + i + \" = \" + msgin); \n        } \n        //qr.close(); \n        //sess.close(); \n        //conn.stop(); \n        //conn.close(); \n    } \n\n   public static void main(String[] args) \n   { \n        jmsTest(); \n        jmsTest2(); \n        jmsTest(); \n        jmsTest2(); \n    } \n\nThe first call to jmsTest2 prints 10 messages but the second call fails to read any messages. The JVM will not stop after the main method completes because some ActiveMQ threads remain open.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461171","id":"12461171","filename":"TestAmq.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wuxz","name":"wuxz","key":"wuxz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"wuxz","active":true,"timeZone":"Etc/UTC"},"created":"2008-08-07T03:51:35.269+0000","size":7021,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461171/TestAmq.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161418","customfield_12312823":null,"summary":"Failing to close a connection leaves consumers behind that prevent new consumers receiving messages","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sparky2708","name":"sparky2708","key":"sparky2708","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Denis Abramov","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sparky2708","name":"sparky2708","key":"sparky2708","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Denis Abramov","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482607/comment/12939934","id":"12939934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sparky2708","name":"sparky2708","key":"sparky2708","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Denis Abramov","active":true,"timeZone":"Etc/UTC"},"body":"Same happens with Topics.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sparky2708","name":"sparky2708","key":"sparky2708","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Denis Abramov","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-09T22:54:39.451+0000","updated":"2008-07-09T22:54:39.451+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482607/comment/12943297","id":"12943297","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pj.fanning","name":"pj.fanning","key":"pj.fanning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"PJ Fanning","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for creating this issue Denis.\nI've only really started testing ActiveMQ for large scale applications recently and have come across a couple of issues that would make adoption of ActiveMQ difficult. This is one but I have also found that if you have 2 consumers for the same queue on different machines for load balancing purposes that only 1 consumer seems to pull down the messages. If you stop this consumer then the other one takes over. This at least allows some high availability features to be built into applications.\nDo you think it would be worthwhile to post a test case for the load balancing issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pj.fanning","name":"pj.fanning","key":"pj.fanning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"PJ Fanning","active":true,"timeZone":"Etc/UTC"},"created":"2008-07-10T14:36:25.441+0000","updated":"2008-07-10T14:36:25.441+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482607/comment/12940036","id":"12940036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wuxz","name":"wuxz","key":"wuxz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"wuxz","active":true,"timeZone":"Etc/UTC"},"body":"I can reproduce this error using totally normal code, both on my notebook running winxp and linux server:\n\nI start a JMS producer application to send 4000 persistent messages, each message is 1K string. After sending, the client application close everything and exit.\n\nThen I start a JMS consumer application to receive 100 messages, when finished, the client application close everything and exit. \n\nNow I start the consumer application again, now I want to receive 3900 messages. But only after receiving about 2180 messages, the consumer stop at receive() method, for there is no more messages can arrive.\n\nNow if you open the admin console, you will find that there is about 1800 messages remains pending status, but if click the queue to browse these messages, you will find that there is no message you can browse!\n\nAfter restart AMQ and client application, we can receive the rest messages, about 1800, they are back!\n\nOnly persistent messages can produce this error.\n\nPlease see attached file: TestAMQ.java.\n\nTo run:\n\n1 run TestAMQ with parameter send 4000\n2 run TestAMQ with parameter receive 100\n3 run TestAMQ with parameter receive 3900, it will hang after about 2180 messages being received.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wuxz","name":"wuxz","key":"wuxz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"wuxz","active":true,"timeZone":"Etc/UTC"},"created":"2008-08-07T03:47:45.274+0000","updated":"2008-08-07T03:47:45.274+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482607/comment/12940050","id":"12940050","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wuxz","name":"wuxz","key":"wuxz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"wuxz","active":true,"timeZone":"Etc/UTC"},"body":"I can reproduce this error using totally normal code, both on my notebook running winxp and linux server:\n\nI start a JMS producer application to send 4000 persistent messages, each message is 1K string. After sending, the client application close everything and exit.\n\nThen I start a JMS consumer application to receive 100 messages, when finished, the client application close everything and exit. \n\nNow I start the consumer application again, now I want to receive 3900 messages. But only after receiving about 2180 messages, the consumer stop at receive() method, for there is no more messages can arrive.\n\nNow if you open the admin console, you will find that there is about 1800 messages remains pending status, but if click the queue to browse these messages, you will find that there is no message you can browse!\n\nAfter restart AMQ and client application, we can receive the rest messages, about 1800, they are back!\n\nOnly persistent messages can produce this error.\n\nPlease see attached file: TestAMQ.java.\n\nTo run:\n\n1 run TestAMQ with parameter send 4000\n2 run TestAMQ with parameter receive 100\n3 run TestAMQ with parameter receive 3900, it will hang after about 2180 messages being received.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wuxz","name":"wuxz","key":"wuxz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"wuxz","active":true,"timeZone":"Etc/UTC"},"created":"2008-08-07T03:51:35.299+0000","updated":"2008-08-07T03:51:35.299+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482607/comment/12940033","id":"12940033","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"PJ Fanning - I'd suggest you reduce the prefetch limit for your consumers -  see http://activemq.apache.org/what-is-the-prefetch-limit-for.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2008-08-14T18:35:24.856+0000","updated":"2008-08-14T18:35:24.856+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482607/comment/12943294","id":"12943294","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pj.fanning","name":"pj.fanning","key":"pj.fanning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"PJ Fanning","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for the advice, Rob. Using queueName?consumer.prefetchSize=0 means that my (artificial) test case passes.\nI still think it would be a good feature if consumers and connections were timed out by the ActiveMQ server if the client goes offline.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pj.fanning","name":"pj.fanning","key":"pj.fanning","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"PJ Fanning","active":true,"timeZone":"Etc/UTC"},"created":"2008-08-15T15:38:21.711+0000","updated":"2008-08-15T15:38:21.711+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482607/comment/12940209","id":"12940209","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"You can more readily detect when a client has crashed by configuring the maxInactivityDuration property on the transport - this controls the keep alive protocol used - see http://activemq.apache.org/configuring-wire-formats.html\n\nI'd recommend setting to 5000 (5 secs) - or lower (if you have a good network)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-15T18:38:21.704+0000","updated":"2008-09-15T18:38:21.704+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482607/comment/12940195","id":"12940195","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ztuffaha","name":"ztuffaha","key":"ztuffaha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"zt","active":true,"timeZone":"Etc/UTC"},"body":"I have faced this this problem in a current project. Somehow, if you just close the receiver, the program will work fine! If you separate the receivers and senders into two separate classes, you are ok too.\n\nOfcourse, the program will not exit until you close the connection. But why only with receivers and not sessions?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ztuffaha","name":"ztuffaha","key":"ztuffaha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"zt","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-19T12:10:36.274+0000","updated":"2008-09-19T12:15:57.485+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1850/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rzn3:"}}