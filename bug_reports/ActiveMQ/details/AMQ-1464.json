{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483263","self":"https://issues.apache.org/jira/rest/api/2/issue/12483263","key":"AMQ-1464","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-10-22T14:29:39.110+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 24 18:44:07 UTC 2010","customfield_12310420":"42094","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_606421283_*|*_5_*:*_3_*:*_14994146665_*|*_4_*:*_2_*:*_66654039350","customfield_12312321":null,"resolutiondate":"2010-05-24T18:44:07.817+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1464/watchers","watchCount":3,"isWatching":false},"created":"2007-10-15T18:14:00.519+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-05-24T18:44:07.786+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313896","id":"12313896","name":"JMS client"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"On 4.1.1, the fanout transport works as expected. My producer is fanning out message sends (queues) to two unrelated message brokers and clients connected to both those brokers get the messages.\n\nHowever, when I run the same exact test under 5.0 (the 10/10 SNAPSHOT), fanout no longer works as expected   Only the 5.0 broker that my producer first connects with gets the messages. The second broker never gets the messages and hurls this exception.\n\nERROR Service      - Async error occurred: java.lang.IllegalStateException: Cannot remove a consumer that had not been registered: ID:DIEGO-3739-1192470567781-0:0:-1:1\njava.lang.IllegalStateException: Cannot remove a consumer that had not been registered: ID:DIEGO-3739-1192470567781-0:0:-1:1\n        at org.apache.activemq.broker.TransportConnection.processRemoveConsumer(\nTransportConnection.java:547)\n        at org.apache.activemq.command.RemoveInfo.visit(RemoveInfo.java:64)\n        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:281)\n        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:178)\n        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:67)\n        at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:134)\n        at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:124)\n        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)\n        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:183)\n        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:170)\n        at java.lang.Thread.run(Thread.java:595)\n\nJoe\n ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461353","id":"12461353","filename":"illegal-state-test-2009-02-19.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mcarter","name":"mcarter","key":"mcarter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"M Carter","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-19T03:14:31.065+0000","size":1219,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461353/illegal-state-test-2009-02-19.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461277","id":"12461277","filename":"illegal-state-test-output-2009-02-19.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mcarter","name":"mcarter","key":"mcarter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"M Carter","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-19T03:14:31.094+0000","size":5377,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461277/illegal-state-test-output-2009-02-19.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"159851","customfield_12312823":null,"summary":"AMQ 5.0 Fanout Regression  ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"AMQ 5.0 - the 10/10/07 SNAPSHOT","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12939167","id":"12939167","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Hi Joe,\n\nSo are you saying that you are trying to fan out to two JMS Queues??  It seems like you are trying to deliver the message to two consumer, and if that's the case, you should be using Topics instead.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2007-10-22T14:29:39.110+0000","updated":"2007-10-22T14:29:39.110+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12939136","id":"12939136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"body":"Hi Hiram,\n\nYes, I am trying to fanout to two queues, each on two 'unrelated' brokers.\nIt works great on 4.1.1, but doesn't on 5.0. \n\nJoe\n\n \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"created":"2007-10-22T15:02:23.824+0000","updated":"2007-10-22T15:02:23.824+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12939184","id":"12939184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Um..  I think the problem is that this was 'fixed' since 4.1\nLogically it does not make sense to fanout queues since messages sent to queues should only be consumed once.  I'll add a option to the transport so that fanout on queues is also supported in the 5.0 release.  Right now fanout is only fanning out messages to Topics.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2007-10-22T17:30:18.514+0000","updated":"2007-10-22T17:30:18.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12939166","id":"12939166","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"body":"Hmm, here is what the fanout transport reference page states.\n\n\"The Fanout transport layers reconnect and replication logic on top of any\nof the other transports. It is used replicate commands to multiple brokers.\"\n\nPerhaps I am missing it, but nowhere in the documentation does it state that\nthe fanout can only be used for Topics.\n\nMy apologies for not properly interpreting the purpose of the fanout and\nthus not using it in a logical manner; however, we do have a need to have a\nproducer \"replicate\" a message to two completely different systems and we\nwant the message consumed only once on each of those systems. The two\nsystems are completely separate from one another (i.e., the brokers and\nconsumers on those systems are not interconnected).  \n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joef","name":"joef","key":"joef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Fernandez","active":true,"timeZone":"America/New_York"},"created":"2007-10-22T18:06:23.630+0000","updated":"2007-10-22T18:06:23.630+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12939129","id":"12939129","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"body":"Hi \n\nAs of revision 587188 the broker will now support at fanOutQueues option the defaults to false which enables fanning out on queues too.  So to enable just update your URI to something like:\n\nfanout://( discovery-agent )?fanOutQueues=true","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chirino","name":"chirino","key":"chirino","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chirino&avatarId=12659","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chirino&avatarId=12659","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chirino&avatarId=12659","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chirino&avatarId=12659"},"displayName":"Hiram Chirino","active":true,"timeZone":"America/New_York"},"created":"2007-10-22T18:41:01.735+0000","updated":"2007-10-22T18:41:01.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12939164","id":"12939164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garyw","name":"garyw","key":"garyw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Watson","active":true,"timeZone":"Etc/UTC"},"body":"It appears that the Queues versus Topics issue has been resolved, with the addition of the new fanOutQueues option. However, the problem of java.lang.IllegalStateException remains.\n\nI am using Topics with the 10/28/07 5.0 Snapshot. I have 2 standalone brokers, each connected to a Topic consumer. I start a Topic producer that uses fanout to connect to the 2 brokers. The messages that are sent by the producer are received by each consumer (good), but after the producer closes the session, one of the the brokers throws the exception \"ERROR Service      - Async error occurred: java.lang.IllegalStateException: Cannot remove a consumer that had not been registered\" as Joe reported.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=garyw","name":"garyw","key":"garyw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Watson","active":true,"timeZone":"Etc/UTC"},"created":"2007-11-01T21:48:31.457+0000","updated":"2007-11-01T21:48:31.457+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12940010","id":"12940010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadrian","name":"hadrian","key":"hadrian","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadrian&avatarId=13649","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadrian&avatarId=13649","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadrian&avatarId=13649","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadrian&avatarId=13649"},"displayName":"Hadrian Zbarcea","active":true,"timeZone":"America/New_York"},"body":"I added a test to the FanoutTransportBrokerTest for that and I cannot reproduce it.  Please let us know if this is still an issue for you, or we could close it with a could not reproduce.  Adding a unit test will also help a lot.\n\nOne other (quite important) thing I noticed is that the initial description mentioned that the feature did work in 4.1.1 so I assume that had to be topics not queues and Gary tested with topics too.  I don't know how much sense would make to implement fan-out for queues as topics should be used in such a case.  Could you please give more details why fan-out would be needed for queues?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadrian","name":"hadrian","key":"hadrian","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadrian&avatarId=13649","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadrian&avatarId=13649","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadrian&avatarId=13649","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadrian&avatarId=13649"},"displayName":"Hadrian Zbarcea","active":true,"timeZone":"America/New_York"},"created":"2008-07-30T15:13:56.524+0000","updated":"2008-07-30T15:13:56.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12940172","id":"12940172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"partial fix helps and IllegalStateException cannot be reproduced. To progress further if necessary, a unit test would be required.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-08T17:15:47.124+0000","updated":"2008-09-08T17:15:47.124+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12940794","id":"12940794","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mcarter","name":"mcarter","key":"mcarter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"M Carter","active":true,"timeZone":"Etc/UTC"},"body":"I'm using activeMQ 5.2.0 and I get this exact issue. I'll attach a test that causes it on my machine as well as the output from that test\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mcarter","name":"mcarter","key":"mcarter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"M Carter","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-19T03:10:44.157+0000","updated":"2009-02-19T03:10:44.157+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12940791","id":"12940791","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mcarter","name":"mcarter","key":"mcarter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"M Carter","active":true,"timeZone":"Etc/UTC"},"body":"Here are the aforementioned test and test output files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mcarter","name":"mcarter","key":"mcarter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"M Carter","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-19T03:14:31.111+0000","updated":"2009-02-19T03:14:31.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12940837","id":"12940837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mcarter","name":"mcarter","key":"mcarter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"M Carter","active":true,"timeZone":"Etc/UTC"},"body":"I should also point out that while that test doesn't have the 'fanOutQueues=true' option explicitly specified, I get the same output when using that option as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mcarter","name":"mcarter","key":"mcarter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"M Carter","active":true,"timeZone":"Etc/UTC"},"created":"2009-02-19T03:25:44.609+0000","updated":"2009-02-19T03:25:44.609+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483263/comment/12942727","id":"12942727","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Fixed with svn revision 947757","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2010-05-24T18:44:07.765+0000","updated":"2010-05-24T18:44:07.765+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1464/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rpyv:"}}