{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12596458","self":"https://issues.apache.org/jira/rest/api/2/issue/12596458","key":"AMQ-3906","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2012-08-20T18:30:32.202+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 20 17:05:13 UTC 2013","customfield_12310420":"253888","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_28063017656_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-05-20T17:02:26.745+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3906/watchers","watchCount":6,"isWatching":false},"created":"2012-06-29T21:45:29.108+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317974","id":"12317974","description":"Next v5 maintenance release","name":"5.6.0","archived":false,"released":true,"releaseDate":"2012-05-07"}],"issuelinks":[{"id":"12369914","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369914","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12650948","key":"AMQ-4573","self":"https://issues.apache.org/jira/rest/api/2/issue/12650948","fields":{"summary":"AMQ not starting when using default heart beat","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12359858","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12359858","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12612791","key":"AMQ-4118","self":"https://issues.apache.org/jira/rest/api/2/issue/12612791","fields":{"summary":"Index page overflow (when a value does not fit in a page) can lead to duplicate calls to free","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-04T18:10:00.718+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"after running normally for ~24 hours, warning messages/errors like below are logged every 30 seconds:\n\n{code}\n2012-06-27 14:33:31,532 org.apache.activemq.broker.region.Topic[ActiveMQ Broker[ZyrionMessageBus] Scheduler]: (WARN) Failed to browse Topic: remoteUpdateP2PTopic\njava.io.EOFException: Chunk stream does not exist, page: 50 is marked free\n        at org.apache.kahadb.page.Transaction$2.readPage(Transaction.java:460)\n        at org.apache.kahadb.page.Transaction$2.<init>(Transaction.java:437)\n        at org.apache.kahadb.page.Transaction.openInputStream(Transaction.java:434)\n        at org.apache.kahadb.page.Transaction.load(Transaction.java:410)\n        at org.apache.kahadb.page.Transaction.load(Transaction.java:367)\n        at org.apache.kahadb.index.BTreeIndex.loadNode(BTreeIndex.java:262)\n        at org.apache.kahadb.index.BTreeIndex.getRoot(BTreeIndex.java:174)\n        at org.apache.kahadb.index.BTreeIndex.iterator(BTreeIndex.java:232)\n        at org.apache.activemq.store.kahadb.MessageDatabase$MessageOrderIndex$MessageOrderIterator.<init>(MessageDatabase.java:2714)\n        at org.apache.activemq.store.kahadb.MessageDatabase$MessageOrderIndex.iterator(MessageDatabase.java:2696)\n        at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$3.execute(KahaDBStore.java:525)\n        at org.apache.kahadb.page.Transaction.execute(Transaction.java:769)\n        at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.recover(KahaDBStore.java:521)\n        at org.apache.activemq.store.ProxyTopicMessageStore.recover(ProxyTopicMessageStore.java:62)\n        at org.apache.activemq.broker.region.Topic.doBrowse(Topic.java:559)\n        at org.apache.activemq.broker.region.Topic.access$100(Topic.java:62)\n        at org.apache.activemq.broker.region.Topic$6.run(Topic.java:684)\n        at org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33)\n        at java.util.TimerThread.mainLoop(Timer.java:512)\n        at java.util.TimerThread.run(Timer.java:462)\n{code}\n\nsince then the warning has been logged 6000+ times. not sure if this is due to the fact that we have enabled expiration of queued messages for offline subscribers.\n\n{code}\n% ls -l apps/activemq/data/kahadb/\ntotal 32068\n-rw-r--r-- 1 root root 33030144 2012-06-29 14:44 db-14.log\n-rw-r--r-- 1 root root   339968 2012-06-29 14:44 db.data\n-rw-r--r-- 1 root root   196984 2012-06-29 14:44 db.redo\n-rw-r--r-- 1 root root        0 2012-06-26 16:40 lock\n{code}\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12534050","id":"12534050","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-29T21:45:59.411+0000","size":3518,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12534050/activemq.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12553257","id":"12553257","filename":"kahadb.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-13T03:30:43.410+0000","size":39878,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12553257/kahadb.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"81429","customfield_12312823":null,"summary":"repeated error message regarding chunk stream logged","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"ActiveMQ 5.6.0 running on Linux FC10 x86","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13404242","id":"13404242","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"body":"configuration file","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-29T21:45:59.443+0000","updated":"2012-06-29T21:45:59.443+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13438065","id":"13438065","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Recommend that you see if you can find a test case that reproduces this, also try testing with the latest 5.7-SNAPSHOT nightly build as there are many fixes in since the 5.6.0 release. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-08-20T18:30:32.202+0000","updated":"2012-08-20T18:30:32.202+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13490635","id":"13490635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"body":"We are using 5.7.0 on Windows 2008 R2 SP1 and have the same issue.\n{noformat}\nINFO   | jvm 1    | 2012/11/02 04:48:58 | 04:48:58,808[ActiveMQ Durable Subscriber Cleanup Timer]  INFO TopicRegion:296 - Destroying durable subscriber due to inactivity: DurableTopicSubscription-149f13f3-b548-4fc6-b343-3f5da174491d:0b071e2a-f281-4ce8-8a64-0b601d00c672, id=ID:host21-1354-1351827790937-1:1:3:1, active=false, destinations=1, total=0, pending=0, dispatched=0, inflight=0, prefetchExtension=0\nINFO   | jvm 1    | 2012/11/02 04:48:58 | 04:48:58,808[ActiveMQ Durable Subscriber Cleanup Timer]  INFO TopicRegion:296 - Destroying durable subscriber due to inactivity: DurableTopicSubscription-149f13f3-b548-4fc6-b343-3f5da174491d:714ca25f-7ba8-420e-8e3f-6a4dff7c494c, id=ID:host21-1354-1351827790937-1:1:4:1, active=false, destinations=1, total=0, pending=0, dispatched=0, inflight=0, prefetchExtension=0\nINFO   | jvm 1    | 2012/11/02 04:48:58 | 04:48:58,824[ActiveMQ Durable Subscriber Cleanup Timer]  INFO TopicRegion:296 - Destroying durable subscriber due to inactivity: DurableTopicSubscription-149f13f3-b548-4fc6-b343-3f5da174491d:09c8415f-ef48-45f3-a9db-a815498664d4, id=ID:host21-1354-1351827790937-1:1:7:1, active=false, destinations=1, total=0, pending=0, dispatched=0, inflight=0, prefetchExtension=0\nINFO   | jvm 1    | 2012/11/02 05:06:36 | 05:06:36,590[ActiveMQ Broker[localhost] Scheduler] ERROR MessageDatabase:419 - KahaDB failed to store to Journal\nINFO   | jvm 1    | 2012/11/02 05:06:36 | java.io.EOFException: Chunk stream does not exist, page: 3080 is marked free\nINFO   | jvm 1    | 2012/11/02 05:06:36 | \tat org.apache.kahadb.page.Transaction$2.readPage(Transaction.java:460)\nINFO   | jvm 1    | 2012/11/02 05:06:36 | \tat org.apache.kahadb.page.Transaction$2.<init>(Transaction.java:437)\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-05T13:53:29.223+0000","updated":"2012-11-05T13:53:29.223+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13490734","id":"13490734","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"I think this is a variation of https://issues.apache.org/jira/browse/AMQ-4118 - so you need a 5.8-SNAPSHOT to verify the fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-05T16:55:08.944+0000","updated":"2012-11-05T16:55:08.944+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13495132","id":"13495132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"body":"I have tried the SNAPSHOT from 07-Nov-2012 and got the same error.\n{noformat}\nINFO   | jvm 1    | 2012/11/11 03:01:51 | 03:01:51,232[ActiveMQ Transport: tcp:///10.71.157.60:49184@61646] ERROR MessageDatabase:419 - KahaDB failed to store to Journal\nINFO   | jvm 1    | 2012/11/11 03:01:51 | java.io.EOFException: Chunk stream does not exist, page: 30 is marked free\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-12T07:24:13.988+0000","updated":"2012-11-12T07:24:13.988+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13495896","id":"13495896","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"body":"on a fresh install with only one client communicating with the server, the issue shows up almost instantaneously. using the server configuration previously attached and kahadb directory cleared (so that the database is initialized fresh) here are the startup log messages:\n\n{noformat}\n2012-11-12 16:43:54,493 o.a.a.x.XBeanBrokerFactory$1[main]: (INFO) Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$1@1d8d39f: startup date [Mon Nov 12 16:43:54 PST 2012]; root of context hierarchy\n2012-11-12 16:43:55,460 o.a.a.s.k.p.PListStore[main]: (INFO) PListStore:[/usr/local/emerald/apps/activemq/data/ZyrionMessageBus/tmp_storage ] started\n2012-11-12 16:43:55,460 o.a.a.b.BrokerService[main]: (INFO) Using Persistence Adapter: KahaDBPersistenceAdapter[/usr/local/emerald/apps/activemq/data/kahadb]\n2012-11-12 16:43:55,764 o.a.a.s.k.MessageDatabase[main]: (INFO) KahaDB is version 4\n2012-11-12 16:43:55,793 o.a.a.s.k.MessageDatabase[main]: (INFO) Recovering from the journal ...\n2012-11-12 16:43:55,793 o.a.a.s.k.MessageDatabase[main]: (INFO) Recovery replayed 1 operations from the journal in 0.013 seconds.\n2012-11-12 16:43:55,805 o.a.a.b.BrokerService[main]: (INFO) ActiveMQ 5.6.0 JMS Message Broker (ZyrionMessageBus) is starting\n2012-11-12 16:43:55,805 o.a.a.b.BrokerService[main]: (INFO) For help or more information please see: http://activemq.apache.org/\n2012-11-12 16:43:56,010 o.a.a.t.TransportServerThreadSupport[main]: (INFO) Listening for connections at: nio://dev-runtime.enigma.local:7653?useQueueForAccept=false&wireFormat.stackTraceEnabled=false&wireFormat.cacheEnabled=false\n2012-11-12 16:43:56,010 o.a.a.b.TransportConnector[main]: (INFO) Connector openwire Started\n2012-11-12 16:43:56,012 o.a.a.b.BrokerService[main]: (INFO) ActiveMQ JMS Message Broker (ZyrionMessageBus, ID:dev-runtime.enigma.local-40393-1352767435812-0:1) started\n{noformat}\n\nnext the client is started so that it attaches to several topics. once the client application is terminated (TERM/KILL signal), the next time the client starts following error is logged:\n\n{noformat}\n2012-11-12 16:45:01,016 o.a.a.b.r.Topic[ActiveMQ Broker[ZyrionMessageBus] Scheduler]: (WARN) Failed to browse Topic: netvigil_DGERequestTopic\njava.io.EOFException: Chunk stream does not exist, page: 23 is marked free\n\tat org.apache.kahadb.page.Transaction$2.readPage(Transaction.java:460) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction$2.<init>(Transaction.java:437) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction.openInputStream(Transaction.java:434) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction.load(Transaction.java:410) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction.load(Transaction.java:367) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.index.BTreeIndex.loadNode(BTreeIndex.java:262) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.index.BTreeIndex.getRoot(BTreeIndex.java:174) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.index.BTreeIndex.iterator(BTreeIndex.java:232) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.kahadb.MessageDatabase$MessageOrderIndex$MessageOrderIterator.<init>(MessageDatabase.java:2714) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.kahadb.MessageDatabase$MessageOrderIndex.iterator(MessageDatabase.java:2696) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$3.execute(KahaDBStore.java:525) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction.execute(Transaction.java:769) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.recover(KahaDBStore.java:521) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.ProxyTopicMessageStore.recover(ProxyTopicMessageStore.java:62) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.broker.region.Topic.doBrowse(Topic.java:559) [activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.broker.region.Topic.access$100(Topic.java:62) [activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.broker.region.Topic$6.run(Topic.java:684) [activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33) [activemq-core-5.6.0.jar:5.6.0]\n\tat java.util.TimerThread.mainLoop(Timer.java:512) [na:1.6.0_18]\n\tat java.util.TimerThread.run(Timer.java:462) [na:1.6.0_18]\n2012-11-12 16:45:31,012 o.a.a.b.r.Topic[ActiveMQ Broker[ZyrionMessageBus] Scheduler]: (WARN) Failed to browse Topic: netvigil_DGERequestTopic\njava.io.EOFException: Chunk stream does not exist, page: 23 is marked free\n\tat org.apache.kahadb.page.Transaction$2.readPage(Transaction.java:460) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction$2.<init>(Transaction.java:437) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction.openInputStream(Transaction.java:434) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction.load(Transaction.java:410) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction.load(Transaction.java:367) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.index.BTreeIndex.loadNode(BTreeIndex.java:262) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.index.BTreeIndex.getRoot(BTreeIndex.java:174) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.index.BTreeIndex.iterator(BTreeIndex.java:232) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.kahadb.MessageDatabase$MessageOrderIndex$MessageOrderIterator.<init>(MessageDatabase.java:2714) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.kahadb.MessageDatabase$MessageOrderIndex.iterator(MessageDatabase.java:2696) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$3.execute(KahaDBStore.java:525) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.kahadb.page.Transaction.execute(Transaction.java:769) ~[kahadb-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.recover(KahaDBStore.java:521) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.store.ProxyTopicMessageStore.recover(ProxyTopicMessageStore.java:62) ~[activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.broker.region.Topic.doBrowse(Topic.java:559) [activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.broker.region.Topic.access$100(Topic.java:62) [activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.broker.region.Topic$6.run(Topic.java:684) [activemq-core-5.6.0.jar:5.6.0]\n\tat org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33) [activemq-core-5.6.0.jar:5.6.0]\n\tat java.util.TimerThread.mainLoop(Timer.java:512) [na:1.6.0_18]\n\tat java.util.TimerThread.run(Timer.java:462) [na:1.6.0_18]\n{noformat}\n\ni'm also attaching the contents of kahadb directory in case it helps. i have to say that it's becoming increasingly difficult to use activemq in production environment. this issue was reported with 5.6.0 less than 6 months ago. as a solution, i was asked to run 5.7 snapshot will continued to exhibit the problem. now that 5.7.0 is has been released (and presumably the \"stable\" release), i have to again resort to using the 5.8 snapshot release. had it not been for the automatic expiration of idle consumers, we would have stuck to 5.3.2 or 5.5.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-13T03:30:25.479+0000","updated":"2012-11-13T03:30:25.479+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13496146","id":"13496146","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"@Rajib - so you have confirmed that you can reproduce with a 5.8-SNAPSHOT, correct? In other words, this is not a case of https://issues.apache.org/jira/browse/AMQ-4118\n\nThe key to reproducing in a test case must be related to what the consumers/producers do before they are terminated.\nThe error is coming from a periodic task that browses the destination that is *already* corrupt by previous operations.\nDo you think it is possible to codify what your broker clients do so we can build a test case?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-13T12:44:34.558+0000","updated":"2012-11-13T12:44:34.558+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13498486","id":"13498486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"body":"Gary, I am not noticing the kahadb error with 5.8 SNAPSHOT (2012.11.10), so that's good news. However, I am noticing problems starting the broker using the configuration that was attached before. It will only start with using activemq-core-5.6.0.jar which I found out accidentally. With pure 5.8 libraries, I get this error:\n\n{code}\nJava Runtime: Sun Microsystems Inc. 1.6.0_18 /usr/local/emerald/apps/jre\n  Heap sizes: current=30784k  free=24366k  max=699072k\n    JVM args: -Xmx768m -Djava.ext.dirs=/usr/local/emerald/apps/jre/lib:/usr/local/emerald/apps/activemq/lib:/usr/local/emerald/webapp/WEB-INF/lib -Dactivemq.home=/usr/local/emerald/apps/activemq -Dactivemq.base=/usr/local/emerald/apps/activemq -Dactivemq.conf= -Djavax.net.ssl.keyStorePassword=password -Djavax.net.ssl.trustStorePassword=password -Djavax.net.ssl.keyStore=/usr/local/emerald/apps/activemq/conf/broker.ks -Djavax.net.ssl.trustStore=/usr/local/emerald/apps/activemq/conf/broker.ts -Dorg.apache.activemq.store.kahadb.LOG_SLOW_ACCESS_TIME=15000 -Dderby.storage.fileSyncTransactionLog=true -Dlogback.configurationFile=file:///usr/local/emerald/etc/logback.xml -Dtraverse.logging.context=jms -Djava.net.preferIPv4Stack=true -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=7697 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false\nExtensions classpath:\n  []\nACTIVEMQ_HOME: /usr/local/emerald/apps/activemq\nACTIVEMQ_BASE: /usr/local/emerald/apps/activemq\nACTIVEMQ_CONF: \nACTIVEMQ_DATA: /usr/local/emerald/apps/activemq/data\nLoading message broker from: xbean:file:/usr/local/emerald/etc/activemq.xml\nERROR: java.lang.RuntimeException: Failed to execute start task. Reason: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.activemq.xbean.XBeanBrokerService#0' defined in URL [file:/usr/local/emerald/etc/activemq.xml]: Cannot create inner bean '(inner bean)' of type [org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter] while setting bean property 'persistenceAdapter'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5' defined in URL [file:/usr/local/emerald/etc/activemq.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: Invalid version: 6, could not load org.apache.activemq.openwire.v6.MarshallerFactory\njava.lang.RuntimeException: Failed to execute start task. Reason: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.activemq.xbean.XBeanBrokerService#0' defined in URL [file:/usr/local/emerald/etc/activemq.xml]: Cannot create inner bean '(inner bean)' of type [org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter] while setting bean property 'persistenceAdapter'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5' defined in URL [file:/usr/local/emerald/etc/activemq.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: Invalid version: 6, could not load org.apache.activemq.openwire.v6.MarshallerFactory\n\tat org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:108)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:150)\n\tat org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n\tat org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:104)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.activemq.console.Main.runTaskClass(Main.java:262)\n\tat org.apache.activemq.console.Main.main(Main.java:115)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.activemq.xbean.XBeanBrokerService#0' defined in URL \n[file:/usr/local/emerald/etc/activemq.xml]: Cannot create inner bean '(inner bean)' of type [org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter] while setting bean property 'persistenceAdapter'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#5' defined in URL [file:/usr/local/emerald/etc/activemq.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: Invalid version: 6, could not load org.apache.activemq.openwire.v6.MarshallerFactory\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:125)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)\n[...]\n{code}\n\nSo effectively I'm running ActiveMQ 5.6.0 with KahaDB 5.8?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-16T00:49:31.752+0000","updated":"2012-11-16T00:49:31.752+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13498740","id":"13498740","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"good news.\nyeah, sorry about that startup issue. There has been a bunch of new modules introduced on trunk so the snapshots are in a bit of flux... but that issue has been resolved. The snapshot from last night (apache-activemq-5.8-20121116.041126-35-bin.tar.gz) should be fine. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-16T11:21:09.745+0000","updated":"2012-11-16T11:21:09.745+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13509141","id":"13509141","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"body":"Hi Gary, can you share how close you are to officially releasing 5.8? We don't mind using a snapshot release as long as it is stable for production use. But this particular issue has been caused some major headaches and we would like to make one big push to update all the deployments. Thanks\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajib_rashid","name":"rajib_rashid","key":"rajib_rashid","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajib Rashid","active":true,"timeZone":"Etc/UTC"},"created":"2012-12-03T22:26:08.976+0000","updated":"2012-12-03T22:26:08.976+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13509682","id":"13509682","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"@Rajib - we are targeting the end of this month for the 5.8 release - so you could plan for  late janurary.\nCan we close of this issue based on your validation of the 5.8 snapshot?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-12-04T11:49:24.275+0000","updated":"2012-12-04T11:49:24.275+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13530301","id":"13530301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"So it sounds like the issue is resolved on the 5.8-SNAPSHOT tests, can you confirm this and close the issue if that's the case?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-12-12T20:35:42.556+0000","updated":"2012-12-12T20:35:42.556+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13532150","id":"13532150","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"body":"I wanted to test if the issue is fixed but i can't get it work. I replaced 5.7.0 with the activemq-all-5.8-20121107.031227-28.jar and got following error while starting the tests:\n\n\n{code}\n08:40:04,543[JMX connector]  INFO ManagementContext:132 - JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:11099/jmxrmi\n08:40:04,574[main]  INFO BrokerService:594 - Using Persistence Adapter: MemoryPersistenceAdapter\n08:40:04,851[main]  INFO BrokerService:633 - Apache ActiveMQ 5.8-SNAPSHOT (localhost, ID:myserver-62765-1355470804641-0:1) is starting\n08:40:04,871[main]  INFO TransportConnector:243 - Connector vm://localhost?create=false?broker.persistent=false Started\n08:40:04,875[main]  INFO BrokerService:657 - Apache ActiveMQ 5.8-SNAPSHOT (localhost, ID:myserver-62765-1355470804641-0:1) started\n08:40:04,875[main]  INFO BrokerService:659 - For help or more information please see: http://activemq.apache.org\n08:40:04,876[main] ERROR BrokerService:1842 - Memory Usage for the Broker (64 mb) is more than the maximum available for the JVM: 63 mb\n08:40:04,878[main] ERROR BrokerService:1898 - Temporary Store limit is 51200 mb, whilst the temporary data directory: C:\\unittest\\localhost\\tmp_storage only has 10213 mb of usable space\n08:40:04,879[main]  INFO MessageBrokerActivity:63 - Message broker successfully started. The broker URL is: vm://localhost?create=false?broker.persistent=false\n08:40:04,991[ActiveMQ Task-1]  INFO FailoverTransport:1030 - Successfully connected to vm://localhost?create=false?broker.persistent=false\n08:40:05,311[main]  INFO MessagingActivity:89 - Messaging successfully started. The URL is: failover:(vm://localhost?create=false?broker.persistent=false)\n08:40:07,797[ActiveMQ BrokerService[localhost] Task-2] ERROR Queue:1494 - Failed to page in more queue messages \njava.lang.NoClassDefFoundError: org/fusesource/hawtbuf/UTF8Buffer\n\tat org.apache.activemq.command.Message.getProperty(Message.java:172)\n\tat org.apache.activemq.filter.PropertyExpression.evaluate(PropertyExpression.java:182)\n\tat org.apache.activemq.filter.ComparisonExpression$1.evaluate(ComparisonExpression.java:210)\n\tat org.apache.activemq.filter.ComparisonExpression.matches(ComparisonExpression.java:478)\n\tat org.apache.activemq.broker.region.AbstractSubscription.matches(AbstractSubscription.java:92)\n\tat org.apache.activemq.broker.region.policy.SimpleDispatchSelector.canDispatch(SimpleDispatchSelector.java:46)\n\tat org.apache.activemq.broker.region.QueueDispatchSelector.canSelect(QueueDispatchSelector.java:57)\n\tat org.apache.activemq.broker.region.Queue.doActualDispatch(Queue.java:1905)\n\tat org.apache.activemq.broker.region.Queue.doDispatch(Queue.java:1846)\n\tat org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:2003)\n\tat org.apache.activemq.broker.region.Queue.iterate(Queue.java:1491)\n\tat org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:129)\n\tat org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:47)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:619)\nCaused by: java.lang.ClassNotFoundException: org.fusesource.hawtbuf.UTF8Buffer\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:307)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:252)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)\n\t... 16 more\n08:41:07,825[main]  INFO BrokerService:692 - Apache ActiveMQ 5.8-SNAPSHOT (localhost, ID:myserver-62765-1355470804641-0:1) is shutting down\n08:41:07,826[main]  INFO TransportConnector:283 - Connector vm://localhost?create=false?broker.persistent=false Stopped\n08:41:07,841[main]  INFO BrokerService:754 - Apache ActiveMQ 5.8-SNAPSHOT (localhost, ID:myserver-62765-1355470804641-0:1) uptime 1 minute\n08:41:07,841[main]  INFO BrokerService:757 - Apache ActiveMQ 5.8-SNAPSHOT (localhost, ID:myserver-62765-1355470804641-0:1) is shutdown\n\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"created":"2012-12-14T07:59:29.757+0000","updated":"2012-12-14T07:59:29.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13532253","id":"13532253","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"@Manfred, thanks for trying to validate, the latest snapshot[1] should have that dependency issue resolved:\nsee: https://issues.apache.org/jira/browse/AMQ-4206\n\n[1] https://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.8-SNAPSHOT/apache-activemq-5.8-20121214.032328-53-bin.tar.gz","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-12-14T11:47:16.808+0000","updated":"2012-12-14T11:48:24.513+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13532319","id":"13532319","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"body":"Same problem with that version. But i only used the activemq-all-5.8-SNAPSHOT.jar from that archive.\n\n{code}\n15:07:36,869[ActiveMQ BrokerService[localhost] Task-2] ERROR Queue:1494 - Failed to page in more queue messages \njava.lang.NoClassDefFoundError: org/fusesource/hawtbuf/UTF8Buffer\n\tat org.apache.activemq.command.Message.getProperty(Message.java:172)\n\tat org.apache.activemq.filter.PropertyExpression.evaluate(PropertyExpression.java:182)\n\tat org.apache.activemq.filter.ComparisonExpression$1.evaluate(ComparisonExpression.java:210)\n\tat org.apache.activemq.filter.ComparisonExpression.matches(ComparisonExpression.java:478)\n\tat org.apache.activemq.broker.region.AbstractSubscription.matches(AbstractSubscription.java:92)\n\tat org.apache.activemq.broker.region.policy.SimpleDispatchSelector.canDispatch(SimpleDispatchSelector.java:46)\n\tat org.apache.activemq.broker.region.QueueDispatchSelector.canSelect(QueueDispatchSelector.java:57)\n\tat org.apache.activemq.broker.region.Queue.doActualDispatch(Queue.java:1905)\n\tat org.apache.activemq.broker.region.Queue.doDispatch(Queue.java:1846)\n\tat org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:2003)\n\tat org.apache.activemq.broker.region.Queue.iterate(Queue.java:1491)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"created":"2012-12-14T14:15:01.771+0000","updated":"2012-12-14T14:15:01.771+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13546917","id":"13546917","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"body":"Any update on this issue? We are still waiting for a fix to test it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=manfredkoch77","name":"manfredkoch77","key":"manfredkoch77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manfred Koch","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-08T14:29:04.978+0000","updated":"2013-01-08T14:29:04.978+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13546954","id":"13546954","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"@Manfred I updated activemq-all such that it can now be used to run a default broker.\n{code}java -classpath target/activemq-all-5.8-SNAPSHOT.jar org.apache.activemq.console.Main start broker:\\(\\){code}\n\nI kicked off a new snapshot so you should be all set in the next hour or so. But don't let missing jars stop your testing, just add what is needed :-)\nThanks for taking the time to validate this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-08T15:45:07.492+0000","updated":"2013-01-08T15:45:07.492+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13662153","id":"13662153","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Closing as no feedback in a couple months from the reporter.  The issue appears to have been resolved for them.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-05-20T17:02:26.760+0000","updated":"2013-05-20T17:02:26.760+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596458/comment/13662157","id":"13662157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maaz","name":"maaz","key":"maaz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Ronge","active":true,"timeZone":"Europe/Berlin"},"body":"Hello, I am out of office until May the 27th, 2013. During that time I will have no access to my e-mail account. Your email will not be forewarded. In urgent cases send an e-mail to fuw@zeutschel.de, info@zeutschel.de or please call +49 (7071) 97060 and you will be passed on to a competent person in our company. With best regards, Matthias Ronge, Zeutschel GmbH\n\nGuten Tag, ich bin bis zum 27. Mai 2013 auer Haus. Ihre E-Mail wird nicht weitergeleitet. In dringenden Fllen senden sie bitte eine E-Mail an fuw@zeutschel.de oder info@zeutschel.de . Sie erreichen uns auch unter +49 (7071) 97060 und werden zu einem kompetenten Ansprechpartner verbunden. Mit freundlichen Gren, Matthias Ronge, Zeutschel GmbH\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maaz","name":"maaz","key":"maaz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthias Ronge","active":true,"timeZone":"Europe/Berlin"},"created":"2013-05-20T17:05:13.912+0000","updated":"2013-05-20T17:05:13.912+0000"}],"maxResults":19,"total":19,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3906/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0eaaf:"}}