{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483791","self":"https://issues.apache.org/jira/rest/api/2/issue/12483791","key":"AMQ-2962","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2010-10-12T15:42:32.251+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Oct 17 22:40:49 UTC 2011","customfield_12310420":"66010","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_32524700540_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-10-17T22:40:49.668+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2962/watchers","watchCount":2,"isWatching":false},"created":"2010-10-06T12:02:29.180+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315624","id":"12315624","description":"Maintenance release for 5.4.0","name":"5.4.1","archived":false,"released":true,"releaseDate":"2010-09-21"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-10-17T22:40:49.716+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313895","id":"12313895","name":"Message Store"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"Noticed today the activemq was hanging during startup. Investigation revealed that it is tied to expiration of messages at startup. The only way to recover from this was to kill -9 the VM and delete the kahadb message store.\n\nFurther testing was done whereby message expiry time was set to longer period. AMQ started up just fine. Another test was performed whereby:\n1. subscribe for messages\n2. send a few messages\n3. disconnect consumer\n4. send more messages (1 or 2 will do)\n5. shutdown AMQ\n6. wait for a time period exceeded the expiration time of the messages\n7. start AMQ. at this time it should be hanging\n\nLogs and thread dumps attached.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461820","id":"12461820","filename":"amq.ra.threads.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-15T07:03:33.357+0000","size":86639,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461820/amq.ra.threads.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461879","id":"12461879","filename":"AMQ2962.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-28T06:19:11.202+0000","size":1144,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461879/AMQ2962.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461806","id":"12461806","filename":"debug_traces_hanging.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-06T12:06:42.167+0000","size":1900,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461806/debug_traces_hanging.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461807","id":"12461807","filename":"debug_traces_startup.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-06T12:06:42.275+0000","size":2162,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461807/debug_traces_startup.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461808","id":"12461808","filename":"thread_dump_during_hang.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-06T12:06:42.319+0000","size":58796,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461808/thread_dump_during_hang.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172305","customfield_12312823":null,"summary":"Hanging at startup","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Fedora Core 12\nOracleSun java 1.6:\njava version \"1.6.0_21\"\nJava(TM) SE Runtime Environment (build 1.6.0_21-b06)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0-b16, mixed mode)\n\nJBoss 4.2.3 using AMQ resource adapter.","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12942978","id":"12942978","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"debug_traces_hanging -> log file entries during hang\ndebug_traces_startup -> debug traces during startup with non-expired, persisted messages\nthread_dump_during_hang -> thread stack dump during hang","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-06T12:06:42.371+0000","updated":"2010-10-06T12:06:42.371+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12942932","id":"12942932","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"Anything else that can be tried? Can i provide any other information?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-06T12:08:40.175+0000","updated":"2010-10-06T12:08:40.175+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12942971","id":"12942971","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"initially thought that the bug may be related to:\nhttp://bugs.sun.com/view_bug.do?bug_id=6822370\n\nadding -XX:+UseMembar to the VM startup arguments did not help. guess something else may be cause...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-06T14:12:05.602+0000","updated":"2010-10-06T14:12:05.602+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943050","id":"12943050","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"Have started to make use of the activemq resource adapter. \n\nThe same scenario still results in issues. Broker fails to startup. JBoss will try to restart broker. This results in \"instance already registered\" errors. Looks like the Broker mbean was registered and this fails on subsequent restarts of the Broker.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-12T14:00:43.675+0000","updated":"2010-10-12T14:00:43.675+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12942881","id":"12942881","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"The stack trace, (in the hung thread dump) is odd, seems to be stuck on a reentrant writelock lock call, when it already has the writeLock, so it is as if the reentrant bit is not working!\nCan you try the sun jdk?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-10-12T15:42:32.251+0000","updated":"2010-10-12T15:42:32.251+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943063","id":"12943063","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"have tried the latest sun jdk:\njava version \"1.6.0_21\"\nJava(TM) SE Runtime Environment (build 1.6.0_21-b06)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0-b16, mixed mode)\n\n\nthe \"hang\" is not happening after changing to the AMQ resource adapter as mentioned the the previous comment. BUT: the broker does not start when expiring messages during startup. The following can be seen in the logs:\n2010-10-14 15:23:55,531 INFO  [org.apache.activemq.store.kahadb.MessageDatabase] KahaDB is version 2\n2010-10-14 15:23:55,573 INFO  [org.apache.activemq.store.kahadb.MessageDatabase] Recovering from the journal ...\n2010-10-14 15:23:55,573 INFO  [org.apache.activemq.store.kahadb.MessageDatabase] Recovery replayed 1 operations from the journal in 0.019 seconds.\n2010-10-14 15:23:55,592 INFO  [org.apache.activemq.broker.BrokerService] ActiveMQ 5.4.1 JMS Message Broker (localhost) is starting\n2010-10-14 15:23:55,592 INFO  [org.apache.activemq.broker.BrokerService] For help or more information please see: http://activemq.apache.org/\n2010-10-14 15:23:55,754 DEBUG [org.apache.activemq.broker.region.AbstractRegion] localhost adding destination: queue://Consumer.superuser.VirtualTopic.ALARM\n2010-10-14 15:23:55,806 DEBUG [org.apache.activemq.broker.region.Queue] message expired: Message ID:segfault-48347-1287061987558-2:4:1:1:1 dropped=false acked=false locked=false\n2010-10-14 15:23:55,806 DEBUG [org.apache.activemq.broker.region.RegionBroker] Message expired Message ID:segfault-48347-1287061987558-2:4:1:1:1 dropped=false acked=false locked=false\n2010-10-14 15:23:55,809 DEBUG [org.apache.activemq.broker.region.AbstractRegion] localhost adding destination: topic://ActiveMQ.Advisory.MessageDLQd.Topic.VirtualTopic.ALARM\n2010-10-14 15:23:55,835 DEBUG [org.apache.activemq.broker.region.AbstractRegion] localhost adding destination: topic://ActiveMQ.Advisory.Expired.Topic.VirtualTopic.ALARM\n\nnote the \"message expired:\"\n\nthereafter the broker never started properly. every component trying to establish a connection to the broker results in:\n2010-10-14 15:24:12,614 DEBUG [org.apache.activemq.ra.ActiveMQEndpointWorker] Failed to connect: Could not create Transport. Reason: javax.management.InstanceAlreadyExistsException: org.apache.activemq:BrokerName=localhost,Type=Broker already registered.\njavax.jms.JMSException: Could not create Transport. Reason: javax.management.InstanceAlreadyExistsException: org.apache.activemq:BrokerName=localhost,Type=Broker already registered.\n        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:35)\n        at org.apache.activemq.ActiveMQConnectionFactory.createTransport(ActiveMQConnectionFactory.java:245)\n        at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:258)\n        at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:185)\n        at org.apache.activemq.ra.ActiveMQResourceAdapter.makeConnection(ActiveMQResourceAdapter.java:133)\n        at org.apache.activemq.ra.ActiveMQEndpointWorker$1.run(ActiveMQEndpointWorker.java:106)\n        at org.jboss.resource.work.WorkWrapper.execute(WorkWrapper.java:204)\n        at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:275)\n        at EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(PooledExecutor.java:756)\n        at java.lang.Thread.run(Thread.java:619)\n\nthe broker is indeed already registered with the mbean server, but it is not really functioning.\n\nanything else that i can try from my side?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-14T13:34:07.409+0000","updated":"2010-10-14T13:34:07.409+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943062","id":"12943062","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"so it looks like it is hanging in the same way as before. can you generate another thread dump of the hung broker with the sun jdk?\n\nThe connection errors, it looks like the vm transport is being used and each connection is trying to create another broker. \nTry using the tcp transport in the brokerURL in the ra.xml or jboss ra config or use waitForStart=20000 on the vm url. check out the vm transport reference for more detail","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-10-14T15:06:42.884+0000","updated":"2010-10-14T15:06:42.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943056","id":"12943056","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"Broker hang during startup (using resource adapter)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-15T07:03:33.456+0000","updated":"2010-10-15T07:03:33.456+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943074","id":"12943074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"amq.ra.threads.txt contains the new thread stack dump. the root cause seems pretty much the same as before:\n\n\"Starting ActiveMQ Broker\" daemon prio=10 tid=0x00007f43cce39000 nid=0x16ce waiting on condition [0x00007f43eceb8000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007f441b27ae08> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:842)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1178)\n        at java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock(ReentrantReadWriteLock.java:807)\n        at org.apache.activemq.store.kahadb.MessageDatabase.process(MessageDatabase.java:882)\n\n\"ActiveMQ Journal Checkpoint Worker\" daemon prio=10 tid=0x00007f43f815c800 nid=0x16d2 waiting on condition [0x00007f43ec792000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007f441b27ae08> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:842)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1178)\n        at java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock(ReentrantReadWriteLock.java:807)\n        at org.apache.activemq.store.kahadb.MessageDatabase.checkpointCleanup(MessageDatabase.java:686)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-15T07:05:23.909+0000","updated":"2010-10-15T07:05:23.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943069","id":"12943069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"have also added the -XX:+UseMembar vm option. this had no effect.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-15T07:15:16.325+0000","updated":"2010-10-15T07:15:16.325+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943072","id":"12943072","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"i've found something of interest. the write lock hangs are due to the read lock being taken. i also added LOG.debug statement before each lock and after each unlock in KahaDBStore.java as well as those places in MessageDatabase.java as indicated in the attached thread dumps.\n\n2010-10-15 15:27:16,082 INFO  [org.apache.activemq.store.kahadb.MessageDatabase] KahaDB is version 2\n2010-10-15 15:27:16,172 INFO  [org.apache.activemq.store.kahadb.MessageDatabase] Recovering from the journal ...\n2010-10-15 15:27:16,180 DEBUG [org.apache.activemq.store.kahadb.MessageDatabase] process remove - lock[java.util.concurrent.locks.ReentrantReadWriteLock@30de3c87[Write locks = 2, Read locks = 0]]\n2010-10-15 15:27:16,183 DEBUG [org.apache.activemq.store.kahadb.MessageDatabase] process remove - unlock[java.util.concurrent.locks.ReentrantReadWriteLock@30de3c87[Write locks = 2, Read locks = 0]]\n2010-10-15 15:27:16,183 INFO  [org.apache.activemq.store.kahadb.MessageDatabase] Recovery replayed 3 operations from the journal in 0.081 seconds.\n2010-10-15 15:27:16,198 INFO  [org.apache.activemq.broker.BrokerService] ActiveMQ 5.4.1 JMS Message Broker (localhost) is starting\n2010-10-15 15:27:16,200 INFO  [org.apache.activemq.broker.BrokerService] For help or more information please see: http://activemq.apache.org/\n2010-10-15 15:27:16,358 DEBUG [org.apache.activemq.store.kahadb.KahaDBStore] getDestinations - lock[java.util.concurrent.locks.ReentrantReadWriteLock@30de3c87[Write locks = 0, Read locks = 0]]\n2010-10-15 15:27:16,360 DEBUG [org.apache.activemq.store.kahadb.KahaDBStore] getDestinations - unlock[java.util.concurrent.locks.ReentrantReadWriteLock@30de3c87[Write locks = 0, Read locks = 0]]\n2010-10-15 15:27:16,362 DEBUG [org.apache.activemq.broker.region.AbstractRegion] localhost adding destination: queue://Consumer.superuser.VirtualTopic.ALARM\n2010-10-15 15:27:16,394 DEBUG [org.apache.activemq.store.kahadb.KahaDBStore] getMessageCount - lock[java.util.concurrent.locks.ReentrantReadWriteLock@30de3c87[Write locks = 0, Read locks = 0]]\n2010-10-15 15:27:16,395 DEBUG [org.apache.activemq.store.kahadb.KahaDBStore] getMessageCount - unlock[java.util.concurrent.locks.ReentrantReadWriteLock@30de3c87[Write locks = 0, Read locks = 0]]\n2010-10-15 15:27:16,395 DEBUG [org.apache.activemq.store.kahadb.KahaDBStore] recover - lock[java.util.concurrent.locks.ReentrantReadWriteLock@30de3c87[Write locks = 0, Read locks = 0]]\n2010-10-15 15:27:16,421 DEBUG [org.apache.activemq.broker.region.Queue] message expired: Message ID:segfault-43426-1287148162735-2:8:1:1:1 dropped=false acked=false locked=false\n2010-10-15 15:27:16,421 DEBUG [org.apache.activemq.broker.region.RegionBroker] Message expired Message ID:segfault-43426-1287148162735-2:8:1:1:1 dropped=false acked=false locked=false\n2010-10-15 15:27:16,425 DEBUG [org.apache.activemq.broker.region.AbstractRegion] localhost adding destination: topic://ActiveMQ.Advisory.MessageDLQd.Topic.VirtualTopic.ALARM\n2010-10-15 15:27:16,448 DEBUG [org.apache.activemq.broker.region.AbstractRegion] localhost adding destination: topic://ActiveMQ.Advisory.Expired.Topic.VirtualTopic.ALARM\n2010-10-15 15:27:16,464 DEBUG [org.apache.activemq.store.kahadb.MessageDatabase] process remove - lock[java.util.concurrent.locks.ReentrantReadWriteLock@30de3c87[Write locks = 0, Read locks = 1]]\n\ntake note of:\n1. recover - lock (no unlock is printed)\n2. MessageDatabase] process remove\n\n(1) takes a read lock in KahaDBStore::recover. when (2) MessageDatabase::process (final KahaRemoveMessageCommand) comes along it blocks. ditto for MessageDatabase::checkpointCleanup\n\ni guess the next step would be to figure out why KahaDBStore::recover is not releasing the lock?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-15T13:38:24.924+0000","updated":"2010-10-15T13:38:24.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943068","id":"12943068","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"KahaDBStore::recover locks itself:\n\n2010-10-15 16:02:33,580 DEBUG [org.apache.activemq.store.kahadb.KahaDBStore] recover - lock[java.util.concurrent.locks.ReentrantReadWriteLock@26e7c832[Write locks = 0, Read locks = 0]]\n2010-10-15 16:02:33,620 DEBUG [org.apache.activemq.broker.region.Queue] message expired: Message ID:segfault-52137-1287150445562-2:6:1:1:1 dropped=false acked=false locked=false\n2010-10-15 16:02:33,620 DEBUG [org.apache.activemq.broker.region.RegionBroker] Message expired Message ID:segfault-52137-1287150445562-2:6:1:1:1 dropped=false acked=false locked=false\n2010-10-15 16:02:33,624 DEBUG [org.apache.activemq.broker.region.AbstractRegion] localhost adding destination: topic://ActiveMQ.Advisory.MessageDLQd.Topic.VirtualTopic.ALARM\n2010-10-15 16:02:33,648 DEBUG [org.apache.activemq.broker.region.AbstractRegion] localhost adding destination: topic://ActiveMQ.Advisory.Expired.Topic.VirtualTopic.ALARM\n2010-10-15 16:02:33,664 DEBUG [org.apache.activemq.store.kahadb.MessageDatabase] process remove - lock[java.util.concurrent.locks.ReentrantReadWriteLock@26e7c832[Write locks = 0, Read locks = 1]]\njava.lang.Exception: STACKTRACE\n        at org.apache.activemq.store.kahadb.MessageDatabase.process(MessageDatabase.java:902)\n        at org.apache.activemq.store.kahadb.MessageDatabase$13.visit(MessageDatabase.java:847)\n        at org.apache.activemq.store.kahadb.data.KahaRemoveMessageCommand.visit(KahaRemoveMessageCommand.java:220)\n        at org.apache.activemq.store.kahadb.MessageDatabase.process(MessageDatabase.java:839)\n        at org.apache.activemq.store.kahadb.MessageDatabase.store(MessageDatabase.java:763)\n        at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.removeMessage(KahaDBStore.java:378)\n        at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.removeAsyncMessage(KahaDBStore.java:350)\n        at org.apache.activemq.store.kahadb.KahaDBTransactionStore.removeAsyncMessage(KahaDBTransactionStore.java:457)\n        at org.apache.activemq.store.kahadb.KahaDBTransactionStore$1.removeAsyncMessage(KahaDBTransactionStore.java:171)\n        at org.apache.activemq.broker.region.Queue.acknowledge(Queue.java:803)\n        at org.apache.activemq.broker.region.Queue.removeMessage(Queue.java:1534)\n        at org.apache.activemq.broker.region.Queue.removeMessage(Queue.java:1526)\n        at org.apache.activemq.broker.region.Queue.messageExpired(Queue.java:1591)\n        at org.apache.activemq.broker.region.Queue.messageExpired(Queue.java:1581)\n        at org.apache.activemq.broker.region.Queue$5.recoverMessage(Queue.java:292)\n        at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$4.execute(KahaDBStore.java:479)\n        at org.apache.kahadb.page.Transaction.execute(Transaction.java:728)\n        at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.recover(KahaDBStore.java:471)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-15T14:08:41.986+0000","updated":"2010-10-15T14:08:41.986+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943094","id":"12943094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"any feedback on this? we've rolled-out on production and hit this issue during a maintenance restart.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-21T08:02:01.773+0000","updated":"2010-10-21T08:02:01.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/12943144","id":"12943144","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"body":"Patch that resolve the issue for us. This patch is ugly. Someone more knowledgeable on the order of locks may provide more insight.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnaude","name":"rnaude","key":"rnaude","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Roelof Naude","active":true,"timeZone":"Africa/Johannesburg"},"created":"2010-10-28T06:19:11.264+0000","updated":"2010-10-28T06:19:11.264+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/13079894","id":"13079894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=splinakis_p","name":"splinakis_p","key":"splinakis_p","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Splinakis","active":true,"timeZone":"Etc/UTC"},"body":"This issue seems to still exist in version 5.5.0.\nAs a workaround we had to set the expiration time on the message content itself rather than the JMS message and let the consumer decide on the expiration of the message.\nIs there a more elegant solution we could use to resolve this? Has anybody come up with a workaround?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=splinakis_p","name":"splinakis_p","key":"splinakis_p","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Splinakis","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-05T10:45:41.103+0000","updated":"2011-08-05T10:45:41.103+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483791/comment/13129289","id":"13129289","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Issue appears to be fixed on trunk, suggest testing with 5.6 SNAPSHOT.  If you still see the issue, a JUnit test cases demonstrating the issue would be useful.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-10-17T22:40:49.706+0000","updated":"2011-10-17T22:40:49.706+0000"}],"maxResults":16,"total":16,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2962/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tuu7:"}}