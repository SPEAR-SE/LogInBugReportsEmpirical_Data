{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13043292","self":"https://issues.apache.org/jira/rest/api/2/issue/13043292","key":"AMQ-6601","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340366","id":"12340366","name":"5.14.6","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12341032","id":"12341032","name":"5.16.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12341947","id":"12341947","name":"5.15.3","archived":false,"released":true,"releaseDate":"2018-02-01"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-02-27T20:33:14.344+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Dec 19 04:28:34 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_26484679480_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-12-19T04:28:34.257+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6601/watchers","watchCount":5,"isWatching":false},"created":"2017-02-15T15:37:14.837+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334188","id":"12334188","name":"5.14.0","archived":false,"released":true,"releaseDate":"2016-08-05"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadrian","name":"hadrian","key":"hadrian","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadrian&avatarId=13649","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadrian&avatarId=13649","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadrian&avatarId=13649","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadrian&avatarId=13649"},"displayName":"Hadrian Zbarcea","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-12-19T04:28:34.301+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We have 2 karaf instances configured to be activemq brokers, broker-amq (b1) and broker2-amq (b2).\n\nThey run on the same machine, use KahaDB with file locking.\nIt does not matter if b1 or b2 is started first, it becomes the master.\n\nThe other one, the slave, when shutting down - while the master is running - hits a dead-lock; it must be `kill -9`'d manually in the end.\n\nWe have a classic dead-lock scenario.  I have attached a `jstack` output when the slave broker is shutting down.\n\nThe race is on between thread #20 and thread #17.\nThread #17 is in \n{code:java}\nActiveMQServiceFactory.destroy(ActiveMQServiceFactory.java:173)\n{code}\n\nand thread #20 is in\n{code:java}\nActiveMQServiceFactory.updated(ActiveMQServiceFactory.java:140)\n{code}\n\n{code}\n\"CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.activemq.server])\" #20 daemon prio=5 os_prio=0 tid=0x00007f793c160800 nid=0x7084 waiting on condition [0x00007f799819f000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n        at java.lang.Thread.sleep(Native Method)\n        at java.lang.Thread.sleep(Thread.java:340)\n        at java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)\n        at org.apache.activemq.store.SharedFileLocker.doStart(SharedFileLocker.java:83)\n        at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55)\n        at org.apache.activemq.broker.LockableServiceSupport.preStart(LockableServiceSupport.java:94)\n        at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:54)\n        at org.apache.activemq.broker.BrokerService.doStartPersistenceAdapter(BrokerService.java:674)\n        at org.apache.activemq.broker.BrokerService.startPersistenceAdapter(BrokerService.java:658)\n        at org.apache.activemq.broker.BrokerService.start(BrokerService.java:622)\n        at org.apache.activemq.osgi.ActiveMQServiceFactory.updated(ActiveMQServiceFactory.java:140)\n        - locked <0x000000072bd74db0> (a org.apache.activemq.osgi.ActiveMQServiceFactory)\n        at Proxy8890d2d1_e3a3_4b71_a7a0_88810df56856.updated(Unknown Source)\n        at org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.updated(ManagedServiceFactoryTracker.java:159)\n        at org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.provideConfiguration(ManagedServiceFactoryTracker.java:93)\n        at org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.provide(ConfigurationManager.java:1597)\n        at org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.run(ConfigurationManager.java:1540)\n        at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:103)\n        at java.lang.Thread.run(Thread.java:745)\n \n\"Thread-4\" #19 daemon prio=5 os_prio=0 tid=0x00007f7940002800 nid=0x7081 runnable [0x00007f79984b4000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)\n        at java.net.ServerSocket.implAccept(ServerSocket.java:545)\n        at java.net.ServerSocket.accept(ServerSocket.java:513)\n        at org.apache.karaf.main.ShutdownSocketThread.run(ShutdownSocketThread.java:56)\n \n\"Thread-3\" #18 prio=5 os_prio=0 tid=0x00007f79d0c48800 nid=0x7080 waiting on condition [0x00007f79985b5000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n        at java.lang.Thread.sleep(Native Method)\n        at org.apache.karaf.main.Main.doMonitor(Main.java:299)\n        at org.apache.karaf.main.Main.access$100(Main.java:65)\n        at org.apache.karaf.main.Main$1.run(Main.java:275)\n \n\"FelixStartLevel\" #17 daemon prio=5 os_prio=0 tid=0x00007f79d0c48000 nid=0x707f waiting for monitor entry [0x00007f79986b5000]\n   java.lang.Thread.State: BLOCKED (on object monitor)\n        at org.apache.activemq.osgi.ActiveMQServiceFactory.destroy(ActiveMQServiceFactory.java:173)\n        - waiting to lock <0x000000072bd74db0> (a org.apache.activemq.osgi.ActiveMQServiceFactory)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.aries.blueprint.utils.ReflectionUtils.invoke(ReflectionUtils.java:299)\n        at org.apache.aries.blueprint.container.BeanRecipe.invoke(BeanRecipe.java:980)\n        at org.apache.aries.blueprint.container.BeanRecipe.destroy(BeanRecipe.java:887)\n        at org.apache.aries.blueprint.container.BlueprintRepository.destroy(BlueprintRepository.java:329)\n        at org.apache.aries.blueprint.container.BlueprintContainerImpl.destroyComponents(BlueprintContainerImpl.java:765)\n        at org.apache.aries.blueprint.container.BlueprintContainerImpl.tidyupComponents(BlueprintContainerImpl.java:964)\n        at org.apache.aries.blueprint.container.BlueprintContainerImpl.destroy(BlueprintContainerImpl.java:909)\n        at org.apache.aries.blueprint.container.BlueprintExtender$3.run(BlueprintExtender.java:325)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.aries.blueprint.container.BlueprintExtender.destroyContainer(BlueprintExtender.java:346)\n        at org.apache.aries.blueprint.container.BlueprintExtender.modifiedBundle(BlueprintExtender.java:238)\n        at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:500)\n        at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:433)\n        at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$AbstractTracked.track(BundleHookBundleTracker.java:725)\n        at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.bundleChanged(BundleHookBundleTracker.java:463)\n        at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$BundleEventHook.event(BundleHookBundleTracker.java:422)\n        at org.apache.felix.framework.util.SecureAction.invokeBundleEventHook(SecureAction.java:1103)\n        at org.apache.felix.framework.util.EventDispatcher.createWhitelistFromHooks(EventDispatcher.java:695)\n        at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:483)\n        at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4403)\n        at org.apache.felix.framework.Felix.stopBundle(Felix.java:2520)\n        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1309)\n        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:304)\n        at java.lang.Thread.run(Thread.java:745)\n{code}\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12852842","id":"12852842","filename":"jstack-28657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=catull","name":"catull","key":"catull","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carlo Dapor","active":true,"timeZone":"Europe/Zurich"},"created":"2017-02-15T15:59:32.719+0000","size":57764,"mimeType":"text/html","content":"https://issues.apache.org/jira/secure/attachment/12852842/jstack-28657"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"AMQ with master and slave broker, shutting down slave causes dead-lock","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=catull","name":"catull","key":"catull","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carlo Dapor","active":true,"timeZone":"Europe/Zurich"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=catull","name":"catull","key":"catull","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carlo Dapor","active":true,"timeZone":"Europe/Zurich"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/15868086","id":"15868086","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=catull","name":"catull","key":"catull","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carlo Dapor","active":true,"timeZone":"Europe/Zurich"},"body":"jstack trace of slave shutdown","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=catull","name":"catull","key":"catull","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carlo Dapor","active":true,"timeZone":"Europe/Zurich"},"created":"2017-02-15T15:59:32.725+0000","updated":"2017-02-15T15:59:32.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/15886483","id":"15886483","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lichtin","name":"lichtin","key":"lichtin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lichtin&avatarId=12645","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lichtin&avatarId=12645","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lichtin&avatarId=12645","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lichtin&avatarId=12645"},"displayName":"Martin Lichtin","active":true,"timeZone":"Europe/Zurich"},"body":"It could help if ActiveMQServiceFactory would do an async start.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lichtin","name":"lichtin","key":"lichtin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lichtin&avatarId=12645","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lichtin&avatarId=12645","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lichtin&avatarId=12645","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lichtin&avatarId=12645"},"displayName":"Martin Lichtin","active":true,"timeZone":"Europe/Zurich"},"created":"2017-02-27T20:33:14.344+0000","updated":"2017-02-27T20:33:14.344+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/15894429","id":"15894429","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lichtin","name":"lichtin","key":"lichtin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lichtin&avatarId=12645","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lichtin&avatarId=12645","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lichtin&avatarId=12645","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lichtin&avatarId=12645"},"displayName":"Martin Lichtin","active":true,"timeZone":"Europe/Zurich"},"body":"My local fix for this issue is to start the the broker async and only wait in case it is the Master:\n\n{noformat}\n***************\n*** 137,143 ****\n--- 136,144 ----\n        brokerContext.setApplicationContext(ctx);\n        broker.setBrokerContext(brokerContext);\n\n+       broker.setStartAsync(true);\n        broker.start();\n+       if (!broker.isSlave())\n          broker.waitUntilStarted();\n        brokers.put(pid, broker);\n      } catch (Exception e) {\n{noformat}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lichtin","name":"lichtin","key":"lichtin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lichtin&avatarId=12645","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lichtin&avatarId=12645","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lichtin&avatarId=12645","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lichtin&avatarId=12645"},"displayName":"Martin Lichtin","active":true,"timeZone":"Europe/Zurich"},"created":"2017-03-03T14:10:51.417+0000","updated":"2017-03-03T14:10:51.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/15895846","id":"15895846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user catull opened a pull request:\n\n    https://github.com/apache/activemq/pull/228\n\n    [AMQ-6601] AMQ with master and slave broker, shutting down slave causes a dead-lock\n\n    This PR addresses the issue https://issues.apache.org/jira/browse/AMQ-6601.\n    \n    The proposed solution is to start the broker asynchronously, but only wait for its starting up if it is the master (i.e. non-slave).\n    \n    Closes / fixes issue #6601.\n    \n    Credit goes to @lichtin for coming up with the solution.\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/catull/activemq fix-issue-6601-shutdown-slave-broker\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/activemq/pull/228.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #228\n    \n----\ncommit 5de4f788d17f406c713d42a1bd77c15b973ac0de\nAuthor: Carlo Dapor <catull@gmail.com>\nDate:   2017-03-04T20:01:34Z\n\n    [AMQ-6601] AMQ with master and slave broker, shutting down slave causes dead-lock.\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-04T20:06:31.793+0000","updated":"2017-03-04T20:06:31.793+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/15895849","id":"15895849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=catull","name":"catull","key":"catull","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carlo Dapor","active":true,"timeZone":"Europe/Zurich"},"body":"Created pull request https://github.com/apache/activemq/pull/228.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=catull","name":"catull","key":"catull","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carlo Dapor","active":true,"timeZone":"Europe/Zurich"},"created":"2017-03-04T20:10:08.294+0000","updated":"2017-03-04T20:10:08.294+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/16029443","id":"16029443","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lichtin","name":"lichtin","key":"lichtin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lichtin&avatarId=12645","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lichtin&avatarId=12645","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lichtin&avatarId=12645","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lichtin&avatarId=12645"},"displayName":"Martin Lichtin","active":true,"timeZone":"Europe/Zurich"},"body":"Upgrading to 5.14.5 I noticed the issue is still there. Can the change be included in the next release?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lichtin","name":"lichtin","key":"lichtin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lichtin&avatarId=12645","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lichtin&avatarId=12645","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lichtin&avatarId=12645","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lichtin&avatarId=12645"},"displayName":"Martin Lichtin","active":true,"timeZone":"Europe/Zurich"},"created":"2017-05-30T13:50:05.917+0000","updated":"2017-05-30T13:50:05.917+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/16296166","id":"16296166","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit b04b9716855d95eae0276cc56c464765d3fbd95e in activemq's branch refs/heads/activemq-5.15.x from [~catull]\n[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=b04b971 ]\n\n[AMQ-6601] AMQ with master and slave broker, shutting down slave causes dead-lock.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-19T04:04:10.209+0000","updated":"2017-12-19T04:04:10.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/16296167","id":"16296167","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 30edca5b22d95e919f403c03b1c307914572ba65 in activemq's branch refs/heads/activemq-5.14.x from [~catull]\n[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=30edca5 ]\n\n[AMQ-6601] AMQ with master and slave broker, shutting down slave causes dead-lock.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-19T04:08:12.314+0000","updated":"2017-12-19T04:08:12.314+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/16296171","id":"16296171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit b40e5f93bdfdecad84f880edce23c4ae8af9a76d in activemq's branch refs/heads/master from [~catull]\n[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=b40e5f9 ]\n\n[AMQ-6601] AMQ with master and slave broker, shutting down slave causes dead-lock.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-19T04:12:09.397+0000","updated":"2017-12-19T04:12:09.397+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/16296172","id":"16296172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/activemq/pull/228\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-12-19T04:13:58.103+0000","updated":"2017-12-19T04:13:58.103+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13043292/comment/16296183","id":"16296183","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadrian","name":"hadrian","key":"hadrian","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadrian&avatarId=13649","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadrian&avatarId=13649","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadrian&avatarId=13649","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadrian&avatarId=13649"},"displayName":"Hadrian Zbarcea","active":true,"timeZone":"America/New_York"},"body":"Merged. Many thanks for the contribution!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadrian","name":"hadrian","key":"hadrian","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadrian&avatarId=13649","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadrian&avatarId=13649","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadrian&avatarId=13649","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadrian&avatarId=13649"},"displayName":"Hadrian Zbarcea","active":true,"timeZone":"America/New_York"},"created":"2017-12-19T04:28:34.295+0000","updated":"2017-12-19T04:28:34.295+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6601/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3a4av:"}}