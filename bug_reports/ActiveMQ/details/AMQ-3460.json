{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12519303","self":"https://issues.apache.org/jira/rest/api/2/issue/12519303","key":"AMQ-3460","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315631","id":"12315631","description":"Issues that are getting ready to be kicked - review 'em once more if you like","name":"AGING_TO_DIE","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2013-04-17T15:50:08.542+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 26 03:38:03 UTC 2015","customfield_12310420":"64696","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_70074346714_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-11-06T16:30:07.694+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3460/watchers","watchCount":4,"isWatching":false},"created":"2011-08-18T15:24:21.013+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315621","id":"12315621","description":"","name":"5.3.1","archived":false,"released":true,"releaseDate":"2010-03-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-05-26T03:38:03.941+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We experience the following problem.\n\nThere's 1 sender thread and 20 listener threads operating on the same queue.\nNo other queues are involved.\n\nMessage traffic goes generally OK via the queue, however Number of pending messages goes up one by one.\n\nLooking at the active customers list, the following appears (see attached screenshot).\nFor all sessions but two, the messages are dispatched properly.\nFor these two affected sessions, the \"Dispatched Queue\" value gots stuck at certain moment and doesn't deliver anymore.\n\nEventually, more sessions got affected, and maybe after some hours, the stuck messages got delivered.\n\nWhat we tried - adding useCache=\"false\" into <policyEntry queue=\">\" ... > tag. Didn't have any effect.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12490804","id":"12490804","filename":"acmq01.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T15:27:00.002+0000","size":123131,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12490804/acmq01.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12490857","id":"12490857","filename":"acmq02.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T20:35:15.699+0000","size":50208,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12490857/acmq02.png"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"81413","customfield_12312823":null,"summary":"Messages get stuck in the queue for some client sessions, \"Dispatched Queue\" grows but \"Dequeues\" doesn't move","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"java version \"1.5.0_15\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_15-b04)\nJava HotSpot(TM) 64-Bit Server VM (build 1.5.0_15-b04, mixed mode)","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13087059","id":"13087059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"body":"Debug logging will be available soon.\n\nAny advice is appreciated, thanks in advance.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T15:27:35.206+0000","updated":"2011-08-18T15:27:35.206+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13087092","id":"13087092","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"body":"ActiveMQ runs as a separate service, started from the operating system. I.e. not within any container.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T16:16:18.912+0000","updated":"2011-08-18T16:16:18.912+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13087267","id":"13087267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"body":"The same instance after few hours.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timur1024","name":"timur1024","key":"timur1024","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timur Evdokimov","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T20:35:15.733+0000","updated":"2011-08-18T20:35:15.733+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13634152","id":"13634152","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=di_m_an","name":"di_m_an","key":"di_m_an","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitry Drozdov","active":true,"timeZone":"Europe/Minsk"},"body":"Faced the same problem on 5.3.2.\nTimur, did you find any solution for this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=di_m_an","name":"di_m_an","key":"di_m_an","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitry Drozdov","active":true,"timeZone":"Europe/Minsk"},"created":"2013-04-17T15:50:08.542+0000","updated":"2013-04-17T15:50:08.542+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13706846","id":"13706846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"\nI am facing the same issue in 5.6.0 as well. The most frustrating part is that it is not reproducible. Restart of consumers solves this issue. Does anybody here have Debug logs during the issue? Or steps to reproduce this issue?\n\nThanks\nSree","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-07-12T10:51:05.486+0000","updated":"2013-07-12T10:51:05.486+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13815007","id":"13815007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"There's no test case here, and many broker releases in between","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-11-06T16:30:07.721+0000","updated":"2013-11-06T16:30:07.721+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13815040","id":"13815040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"**********************************************\nReproducing the issue\n**********************************************\n\nThis is reproducible but not with a Unit Test case. \nSteps to reproduce:\n1. use the following broker url tcp://localhost:61616?randomize=false&timeout=60000  \n// timeout is the most important part.\n2. Use spring Default Message listener container for consuming messages.\n3. Start the consumer application.\n4. wait for 70 seconds and start ActiveMQ.\n5. Consumers would be stuck - Issue would be reproduced\nNote: This issue does not happen if ActiveMQ is started after 120 seconds. That is after the second connection timeout. Issue can be reproduced with varying timeout values if AMQ is started before the second timeout but after the first timeout. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-11-06T17:07:48.068+0000","updated":"2013-11-06T17:07:48.068+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13815042","id":"13815042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"*****************************************\nCode Location of the Issue and Fix\n*****************************************\nThis issue has got something to do with org.apache.activemq.ActiveMQConnection.java not checking if the connection is started or not before creating JMSSession is created.\n\nMethod:\n public Session createSession(boolean transacted, int acknowledgeMode) throws JMSException {\n\n//Fix is to check if connection is started or not before creating a session :\nsynchronized(this.startMutex){\n    \t\tif(!this.isStarted()) {\n        \t\tstart();\n        \t}\n    \t}\n\n  checkClosedOrFailed();\n        ensureConnectionInfoSent();\n        LOG.trace(\"Connection started : \" + isStarted() + \"Connection Hash Code : \"+ this.hashCode() +\"Connection Details: \" + this );\n\n// rest of the code\n// goes here\n\n}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-11-06T17:09:10.695+0000","updated":"2013-11-06T17:10:42.467+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/13815049","id":"13815049","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"************************************************************\nRoot Cause Analysis (Saving the devil for the very last)\n************************************************************\nThis issue falls in no mans land between spring code and activemq code .\n\nIn my example above the main thread of spring tries to connect for first 60 seconds (first timeout), when it fails to connect to ActiveMQ as it is not up, leaves it to listener threads ( if there are 20 concurrentConsumers we would have 20 DMLC threads) to recover. The main thread of spring does not clear the connection object of spring and hands over a stale connection reference for the listeners to work with.\nIf ActiveMQ starts after the first time out and before the second timeout one of the 20 listener threads creates sessions on an unstarted connection. When ActiveMQ delivers a message to the consumer, the message flow into the consumer JVM/process but DMLC threads cannot receive them and hence the issue.When this issue occurs you can notice the following warning in the logs :\n\nLOG EXTRACT:\n\"trying to receive messages on an unstarted connection\" and subsequent messages are not delivered\".\nThis warning is logged for the first message alone and not for the subsequent messages.\nAfter this messages are pushed into the dispatch queue but not acked by the consumer as he never received them. The messages are pushed into the dispatch queue till the cursor memory is full. Once it is full no more messages are pushed into dispatch queue and every consumer of the queue is affected.\n\nWe found ActiveMQConnection.java easiest and logical of all places to fix the issue. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-11-06T17:25:41.469+0000","updated":"2013-11-06T17:29:31.698+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12519303/comment/14558656","id":"14558656","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"I fixed this issue and is working perfectly fine for more than a year in my production environment. I want to patch this on ActiveMQConnection.java. Can somebody please take these changes and commit it to the latest release?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-05-26T03:38:03.941+0000","updated":"2015-05-26T03:38:03.941+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3460/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ea6v:"}}