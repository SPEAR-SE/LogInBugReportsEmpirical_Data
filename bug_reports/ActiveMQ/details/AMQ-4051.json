{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12607737","self":"https://issues.apache.org/jira/rest/api/2/issue/12607737","key":"AMQ-4051","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315630","id":"12315630","description":"Issues that need to be reviewed - do we keep 'em or do we kick 'em? ","name":"NEEDS_REVIEW","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2012-10-16T16:55:28.533+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Aug 19 15:24:58 UTC 2014","customfield_12310420":"249063","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_60794398632_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-08-19T15:24:58.176+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4051/watchers","watchCount":4,"isWatching":false},"created":"2012-09-15T00:04:59.584+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317974","id":"12317974","description":"Next v5 maintenance release","name":"5.6.0","archived":false,"released":true,"releaseDate":"2012-05-07"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12323282","id":"12323282","description":"Maintenance release with new AMQP support and smaller modules","name":"5.8.0","archived":false,"released":true,"releaseDate":"2013-02-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-08-19T15:24:58.213+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We're doing load testing on the ActiveMQ 5.6.0 broker-to-broker connection, pumping in about 80,000 messages per hour into the queue.  One of the brokers stops dequeueing messages to the consumer while its queue size increases.  The log contains repeating errors about \"could not locate the data file.\"\n\nWe encountered this same issue couple weeks ago.  I found AMQ-3120 and added ignoreMissingJouralFiles=\"true\" like that issue suggested.  After many more days of testing, today we countered this same problem again.  Our disk space is plenty.  The log is listed below.  I attached our activemq configuration from the troubled broker to this issue.\n\n------------------------------------------------------------------\n2012-09-14 16:01:47,354 ERROR | BrokerService[xps-amq-broker_HPC-HAIFA-HAIFA-HAIFA] Task-18 | [Journal:352] Looking for key 10 but not found in fileMap: {11=db-11.log number = 11 , length = 499163}\n2012-09-14 16:01:47,354 ERROR | BrokerService[xps-amq-broker_HPC-HAIFA-HAIFA-HAIFA] Task-18 | [AbstractStoreCursor:279] org.apache.activemq.broker.region.cursors.QueueStorePrefetch@5fae7502:n4.HPC/HAIFA/HAIFA/HAIFA,batchResetNeeded=false,storeHasMessages=true,size=100,cacheEnabled=false - Failed to fill batch\njava.io.IOException: Could not locate data file .\\esb\\amq_N4-PERFORM70\\db-10.log\n\tat org.apache.kahadb.journal.Journal.getDataFile(Journal.java:353)\n\tat org.apache.kahadb.journal.Journal.read(Journal.java:600)\n\tat org.apache.activemq.store.kahadb.MessageDatabase.load(MessageDatabase.java:924)\n\tat org.apache.activemq.store.kahadb.KahaDBStore.loadMessage(KahaDBStore.java:1015)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$4.execute(KahaDBStore.java:556)\n\tat org.apache.kahadb.page.Transaction.execute(Transaction.java:769)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.recoverNextMessages(KahaDBStore.java:545)\n\tat org.apache.activemq.store.ProxyMessageStore.recoverNextMessages(ProxyMessageStore.java:106)\n\tat org.apache.activemq.broker.region.cursors.QueueStorePrefetch.doFillBatch(QueueStorePrefetch.java:97)\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:277)\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.reset(AbstractStoreCursor.java:113)\n\tat org.apache.activemq.broker.region.cursors.StoreQueueCursor.reset(StoreQueueCursor.java:157)\n\tat org.apache.activemq.broker.region.Queue.doPageInForDispatch(Queue.java:1766)\n\tat org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1995)\n\tat org.apache.activemq.broker.region.Queue.iterate(Queue.java:1488)\n\tat org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)\n\tat org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\n2012-09-14 16:01:47,354 ERROR | BrokerService[xps-amq-broker_HPC-HAIFA-HAIFA-HAIFA] Task-18 | [AbstractStoreCursor:115] org.apache.activemq.broker.region.cursors.QueueStorePrefetch@5fae7502:n4.HPC/HAIFA/HAIFA/HAIFA,batchResetNeeded=false,storeHasMessages=true,size=100,cacheEnabled=false - Failed to fill batch\njava.lang.RuntimeException: java.io.IOException: Could not locate data file .\\esb\\amq_N4-PERFORM70\\db-10.log\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:280)\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.reset(AbstractStoreCursor.java:113)\n\tat org.apache.activemq.broker.region.cursors.StoreQueueCursor.reset(StoreQueueCursor.java:157)\n\tat org.apache.activemq.broker.region.Queue.doPageInForDispatch(Queue.java:1766)\n\tat org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1995)\n\tat org.apache.activemq.broker.region.Queue.iterate(Queue.java:1488)\n\tat org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)\n\tat org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\nCaused by: java.io.IOException: Could not locate data file .\\esb\\amq_N4-PERFORM70\\db-10.log\n\tat org.apache.kahadb.journal.Journal.getDataFile(Journal.java:353)\n\tat org.apache.kahadb.journal.Journal.read(Journal.java:600)\n\tat org.apache.activemq.store.kahadb.MessageDatabase.load(MessageDatabase.java:924)\n\tat org.apache.activemq.store.kahadb.KahaDBStore.loadMessage(KahaDBStore.java:1015)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$4.execute(KahaDBStore.java:556)\n\tat org.apache.kahadb.page.Transaction.execute(Transaction.java:769)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.recoverNextMessages(KahaDBStore.java:545)\n\tat org.apache.activemq.store.ProxyMessageStore.recoverNextMessages(ProxyMessageStore.java:106)\n\tat org.apache.activemq.broker.region.cursors.QueueStorePrefetch.doFillBatch(QueueStorePrefetch.java:97)\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:277)\n\t... 10 more\n2012-09-14 16:01:47,354 ERROR | BrokerService[xps-amq-broker_HPC-HAIFA-HAIFA-HAIFA] Task-18 | [Queue:1491] Failed to page in more queue messages \njava.lang.RuntimeException: java.lang.RuntimeException: java.io.IOException: Could not locate data file .\\esb\\amq_N4-PERFORM70\\db-10.log\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.reset(AbstractStoreCursor.java:116)\n\tat org.apache.activemq.broker.region.cursors.StoreQueueCursor.reset(StoreQueueCursor.java:157)\n\tat org.apache.activemq.broker.region.Queue.doPageInForDispatch(Queue.java:1766)\n\tat org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:1995)\n\tat org.apache.activemq.broker.region.Queue.iterate(Queue.java:1488)\n\tat org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)\n\tat org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\nCaused by: java.lang.RuntimeException: java.io.IOException: Could not locate data file .\\esb\\amq_N4-PERFORM70\\db-10.log\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:280)\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.reset(AbstractStoreCursor.java:113)\n\t... 9 more\nCaused by: java.io.IOException: Could not locate data file .\\esb\\amq_N4-PERFORM70\\db-10.log\n\tat org.apache.kahadb.journal.Journal.getDataFile(Journal.java:353)\n\tat org.apache.kahadb.journal.Journal.read(Journal.java:600)\n\tat org.apache.activemq.store.kahadb.MessageDatabase.load(MessageDatabase.java:924)\n\tat org.apache.activemq.store.kahadb.KahaDBStore.loadMessage(KahaDBStore.java:1015)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$4.execute(KahaDBStore.java:556)\n\tat org.apache.kahadb.page.Transaction.execute(Transaction.java:769)\n\tat org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.recoverNextMessages(KahaDBStore.java:545)\n\tat org.apache.activemq.store.ProxyMessageStore.recoverNextMessages(ProxyMessageStore.java:106)\n\tat org.apache.activemq.broker.region.cursors.QueueStorePrefetch.doFillBatch(QueueStorePrefetch.java:97)\n\tat org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:277)\n\t... 10 more\n2012-09-14 16:01:47,354 INFO  | ActiveMQ Session Task-26 | [LogComponent:41] \n\n--------------------------------------------------------------------------\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12545249","id":"12545249","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-15T00:07:26.631+0000","size":3031,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12545249/activemq.xml"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"57006","customfield_12312823":null,"summary":"IOException: Could not locate data file .\\db-10.log","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows Server 2008 R2, 8GB, Intel Core 2 Duo CPU 64 bit\nJDK 1.6.0_26, 64 bit","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607737/comment/13477154","id":"13477154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccorsi","name":"ccorsi","key":"ccorsi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Claudio Corsi","active":true,"timeZone":"America/Montreal"},"body":"Hi Edwin,\n\nI was looking at the configuration file and noticed that you defined the carinaIOExceptionHandler bean but this is not part of the list of attached files.  Does this get called anytime throughout the test? Is it even required?\n\nThere is also the question of what is the type of use-case that you are using that reproduces this issue?  Are you expecting all of the messages to pump through the network connection between the brokers or are they also being consumed by consumers that are connected to the broker that contains the queues?\n\nHow many consumers are you connecting to these brokers?  What protocol are you using?  Are the consumers coming and going or are they permanently connected throughout the test?\n\nHave you been able to reproduce this issue using the latest release v5.7?\n\n--Claudio\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccorsi","name":"ccorsi","key":"ccorsi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Claudio Corsi","active":true,"timeZone":"America/Montreal"},"created":"2012-10-16T16:55:28.533+0000","updated":"2012-10-16T16:55:28.533+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607737/comment/13477506","id":"13477506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Claudio,\n\nThanks for looking into this issue.  To answer your questions:\n\n1) You can ignore carinaIOExceptionHandler for the purpose of this jira issue.  We needed it because we need to cleanly shut down the JVM when the persistent directory is filled up, or when the persistent directory is on a network drive that becomes unreachable.  I don't think it's involved for this issue.\n\n2) In our use case, there were two nodes, each of which embedded an ActiveMQ broker with persistent storage.  A mule jms outbound connector heavily sent messages to a queue on the first node, which defined a network connector that dynamically included the destination to a second node.  A mule jms inbound connector on the second node listened to this queue.  This jms inbound connector is the only consumer of this queue.  It permanently connected.  In the healthy operation, this consumer was able to keep up consuming the incoming messages.  The queue size stayed under 2 most of the time.  When this error occurred, messages from the first node were still being delivered to the second node just fine.  It was the second node that complained about the missing data file, and the queue size started increasing and the dequeue count stayed flat.\n\n3) The mule jms inbound connector used the vm protocol.  It was defined like below.\n    <jms:activemq-connector\n            name=\"jmsExternalConnector\"\n            specification=\"1.1\"\n            disableTemporaryReplyToDestinations=\"true\"\n            brokerURL=\"vm://xps-amq-broker_HPC-HAIFA-HAIFA-HAIFA\"\n            numberOfConsumers=\"1\"\n            maxRedelivery=\"1\"\n            persistentDelivery=\"true\">\n    </jms:activemq-connector>\n\n\n4) We're planning to do upgrade to v5.7, but it'll take couple months before we roll out to our performance lab to do load testing.  Plus, it may take few weeks of operation to see it happen again.\n\nLastly, I still have the remaining journal data in the persistent folder from the error case.  If they are useful for your investigation, I can try to upload to this jira issue.  It's about 100MB in total.  They are named:\n\ndb.data\ndb.redo\ndb-11.log\ndb-12.log\ndb-13.log\nlock\n\nThanks,\n-Edwin","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-17T00:52:37.142+0000","updated":"2012-10-17T00:52:37.142+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607737/comment/13549762","id":"13549762","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"taking this off the 5.8 critical list (blocking a release) pending validation on 5.7","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-10T16:27:13.359+0000","updated":"2013-01-10T16:27:13.359+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607737/comment/13826826","id":"13826826","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"body":"I just want to add new information.  After we upgraded to 5.8.0, we encountered the same error one more time.  So the bug is still in 5.8.0.\n\n2013-11-19 08:33:39,827 ERROR | ActiveMQ BrokerService[broker Task-3975 | [Queue:1494] Failed to page in more queue messages \njava.lang.RuntimeException: java.lang.RuntimeException: java.io.IOException: Could not locate data file .\\esb\\amq_perform77a\\db-958.log\n            at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.reset(AbstractStoreCursor.java:113)\n            at org.apache.activemq.broker.region.cursors.StoreQueueCursor.reset(StoreQueueCursor.java:157)\n            at org.apache.activemq.broker.region.Queue.doPageInForDispatch(Queue.java:1775)\n            at org.apache.activemq.broker.region.Queue.pageInMessages(Queue.java:2003)\n            at org.apache.activemq.broker.region.Queue.iterate(Queue.java:1491)\n            at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:129)\n            at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:47)\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n            at java.lang.Thread.run(Thread.java:722)\nCaused by: java.lang.RuntimeException: java.io.IOException: Could not locate data file .\\esb\\amq_n4-perform77a\\db-958.log\n            at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:277)\n            at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.reset(AbstractStoreCursor.java:110)\n            ... 9 more\nCaused by: java.io.IOException: Could not locate data file .\\esb\\amq_perform77a\\db-958.log\n            at org.apache.activemq.store.kahadb.disk.journal.Journal.getDataFile(Journal.java:353)\n            at org.apache.activemq.store.kahadb.disk.journal.Journal.read(Journal.java:600)\n            at org.apache.activemq.store.kahadb.MessageDatabase.load(MessageDatabase.java:961)\n            at org.apache.activemq.store.kahadb.KahaDBStore.loadMessage(KahaDBStore.java:1029)\n            at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore$4.execute(KahaDBStore.java:557)\n            at org.apache.activemq.store.kahadb.disk.page.Transaction.execute(Transaction.java:779)\n            at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.recoverNextMessages(KahaDBStore.java:546)\n            at org.apache.activemq.store.ProxyMessageStore.recoverNextMessages(ProxyMessageStore.java:106)\n            at org.apache.activemq.broker.region.cursors.QueueStorePrefetch.doFillBatch(QueueStorePrefetch.java:97)\n            at org.apache.activemq.broker.region.cursors.AbstractStoreCursor.fillBatch(AbstractStoreCursor.java:274)\n            ... 10 more\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-11-19T19:06:57.138+0000","updated":"2013-11-19T19:06:57.138+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607737/comment/13826832","id":"13826832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"v5.9.0 is the latest release, you should test against that version.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-11-19T19:18:29.740+0000","updated":"2013-11-19T19:18:29.740+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12607737/comment/14102314","id":"14102314","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Without additional information on how to reproduce or evidence that this still exists after two additional broker releases there's not much that can be done here. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-08-19T15:24:58.209+0000","updated":"2014-08-19T15:24:58.209+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4051/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0a4iv:"}}