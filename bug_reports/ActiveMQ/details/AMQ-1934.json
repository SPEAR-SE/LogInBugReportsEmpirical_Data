{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483126","self":"https://issues.apache.org/jira/rest/api/2/issue/12483126","key":"AMQ-1934","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315630","id":"12315630","description":"Issues that need to be reviewed - do we keep 'em or do we kick 'em? ","name":"NEEDS_REVIEW","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2010-06-10T20:42:31.641+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Feb 21 00:02:35 UTC 2012","customfield_12310420":"75168","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_108628675373_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-02-21T00:02:34.335+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1934/watchers","watchCount":3,"isWatching":false},"created":"2008-09-11T17:24:39.995+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315618","id":"12315618","description":"","name":"5.1.0","archived":false,"released":true,"releaseDate":"2008-05-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-02-21T00:02:35.363+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Start two brokers with shared FS. One is locked out because journal is locked by the master as it should be. Then run attached junit test case. The test does the following:\n1. Sends and receives a message while both master and slave brokers are up.\n2. Requests manual shutdown of master broker and expects slave to become master within 30 sec\n3. Sends another message which is never received\n\nYou can observe via admin console that the message sent after broker failover is delivered to the queue; however it is not delivered to a waiting listener. Also, you can observe the logged invocations of TranportListener. Notice, how onCommand() calls are no longer continuously made after failover (except for the first two).\n\nEclipse/Maven based test project is attached.\n\nPlease see \"sends/receives block during failover\" discussion for more information. thanks,\nvadim","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461131","id":"12461131","filename":"ASF.LICENSE.NOT.GRANTED--activemq-failover-test.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vadimos","name":"vadimos","key":"vadimos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vadim Katz","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-11T17:24:40.026+0000","size":10327,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12461131/ASF.LICENSE.NOT.GRANTED--activemq-failover-test.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"59816","customfield_12312823":null,"summary":"Message delivery blocks after broker failover","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vadimos","name":"vadimos","key":"vadimos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vadim Katz","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vadimos","name":"vadimos","key":"vadimos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vadim Katz","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows XP, ActiveMQ 5.1.0, Spring 2.5","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483126/comment/12940259","id":"12940259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vadimos","name":"vadimos","key":"vadimos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vadim Katz","active":true,"timeZone":"Etc/UTC"},"body":"Could someone please comment on this? It seems very serious because we can't rely on AcriveMQ failover.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vadimos","name":"vadimos","key":"vadimos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vadim Katz","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-26T23:47:59.941+0000","updated":"2008-09-26T23:47:59.941+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483126/comment/12940516","id":"12940516","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vadimos","name":"vadimos","key":"vadimos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vadim Katz","active":true,"timeZone":"Etc/UTC"},"body":"Tried with 5.2.0 and still experience the problem","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vadimos","name":"vadimos","key":"vadimos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vadim Katz","active":true,"timeZone":"Etc/UTC"},"created":"2008-11-22T00:42:34.946+0000","updated":"2008-11-22T00:42:34.946+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483126/comment/12942640","id":"12942640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_mays","name":"steve_mays","key":"steve_mays","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Mays","active":true,"timeZone":"Etc/UTC"},"body":"We are on 5.3.1 and still seeing this issue!\n\nWhen you have a single hot/cold pair its not a big thing, but we are implementing a network of brokers at Edmunds.com (essentially a stripe across several hot/cold pairs) and this will get VERY yucky as the only way we have gotten fail BACK to work is to shut down all brokers and delete KahaDB and backing store then restart.  Yuck!\n\nWe'd sure like something on this issue too!\n\nThanks,\nSteve","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_mays","name":"steve_mays","key":"steve_mays","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Mays","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-10T20:42:31.641+0000","updated":"2010-06-10T20:42:31.641+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483126/comment/13212232","id":"13212232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Test case provided passes without issue using 5.6-SNAPSHOT","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-02-21T00:02:35.004+0000","updated":"2012-02-21T00:02:35.004+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1934/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0alvb:"}}