{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482389","self":"https://issues.apache.org/jira/rest/api/2/issue/12482389","key":"AMQ-1135","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315618","id":"12315618","description":"","name":"5.1.0","archived":false,"released":true,"releaseDate":"2008-05-06"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-05-15T13:19:30.861+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Oct 29 14:50:04 UTC 2007","customfield_12310420":"42093","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_39537129844_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2008-04-25T06:34:05.856+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1135/watchers","watchCount":1,"isWatching":false},"created":"2007-01-23T16:01:56.012+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-04-25T06:34:05.846+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"Destroying a durable subcriber, via jconsole or by programmatically, does not remove the durable subscriber. Over a period of time, once the memory reaches the memorymanager limit, is causing \"out of memory\" exception.\n\nSteps to duplicate:\n\n1. start activemq, with a memorymanager limit of 10 MB\n2. start a consumer, as a durable subscriber (you can use the bundled example ConsumerTool.java), for a topic.\n3. start a producer to send messages to the topic\n4. kill the consumer, followed by the producer\n5. use jconsole to connect to the activemq server\n6. select the brokers \"Operations\" tab \n7. delete the durable subscriber - notice the earlier subscription is never removed, instead moved to a \"false\" subscription state\n8. start the producer again - notice the memory usage increases, upto the 10MB limit, and a \"out of memory\" exception is thrown\n\nAttached is a screenshot of my jconsole showing the \"false\" subscription state.\n\nThis never occurred in AMQ 4.0.2 or 4.0.1, hence this must be a regression bug.\n\nI would appreciate either a fix/patch or a workaround solution for this issue, as this is one of the issues holding us from moving AMQ to a production setup.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460762","id":"12460762","filename":"ASF.LICENSE.NOT.GRANTED--jconsole.gif","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeepchayapathi","name":"sandeepchayapathi","key":"sandeepchayapathi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Chayapathi","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-23T16:01:56.081+0000","size":169441,"mimeType":"image/gif","content":"https://issues.apache.org/jira/secure/attachment/12460762/ASF.LICENSE.NOT.GRANTED--jconsole.gif"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161771","customfield_12312823":null,"summary":"Destroying durable subscription, does not entirely destory the durable subsciber","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeepchayapathi","name":"sandeepchayapathi","key":"sandeepchayapathi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Chayapathi","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeepchayapathi","name":"sandeepchayapathi","key":"sandeepchayapathi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Chayapathi","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux 2.6.9-34.EL i686 i686 i386, Intel(R) Pentium(R) 4 CPU 2.80GHz, 2GB memory","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482389/comment/12938946","id":"12938946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=terris","name":"terris","key":"terris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Terris Linenbach","active":true,"timeZone":"Etc/UTC"},"body":"For me, AMQ1077 did not resolve this issue in versions 4.1.1 or 4.2.0. Removing the subscription via JMX (say, jconsole.exe) is not acceptable.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=terris","name":"terris","key":"terris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Terris Linenbach","active":true,"timeZone":"Etc/UTC"},"created":"2007-05-15T13:19:30.861+0000","updated":"2007-05-15T13:19:30.861+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482389/comment/12939182","id":"12939182","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sparky2708","name":"sparky2708","key":"sparky2708","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Denis Abramov","active":true,"timeZone":"Etc/UTC"},"body":"Also same problem. It was OK in AMQ 4.0.1 & 4.0.2 but started happening when we switched to 4.1.1. I am now getting:\n\njavax.jms.InvalidClientIDException: Broker: localhost - Client: com.pgam.messaging.services.EQSecurityDescService already connected\n\tat org.apache.activemq.broker.region.RegionBroker.addConnection(RegionBroker.java:204)\n\tat org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:82)\n\tat org.apache.activemq.advisory.AdvisoryBroker.addConnection(AdvisoryBroker.java:70)\n\tat org.apache.activemq.broker.BrokerFilter.addConnection(BrokerFilter.java:82)\n\tat org.apache.activemq.broker.MutableBrokerFilter.addConnection(MutableBrokerFilter.java:92)\n\tat org.apache.activemq.broker.TransportConnection.processAddConnection(TransportConnection.java:706)\n\tat org.apache.activemq.broker.jmx.ManagedTransportConnection.processAddConnection(ManagedTransportConnection.java:86)\n\tat org.apache.activemq.command.ConnectionInfo.visit(ConnectionInfo.java:121)\n\tat org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:294)\n\tat org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:185)\n\tat org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:65)\n\tat org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:133)\n\tat org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:122)\n\tat org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84)\n\tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:137)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sparky2708","name":"sparky2708","key":"sparky2708","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Denis Abramov","active":true,"timeZone":"Etc/UTC"},"created":"2007-10-29T14:50:04.664+0000","updated":"2007-10-29T14:50:04.664+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1135/votes","votes":4,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s1tj:"}}