{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483027","self":"https://issues.apache.org/jira/rest/api/2/issue/12483027","key":"AMQ-1102","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"2006-12-18 21:51:21.0","customfield_12310420":"84490","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_92271617548_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2009-11-20T20:51:38.548+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1102/watchers","watchCount":3,"isWatching":false},"created":"2006-12-18T21:51:21.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-11-20T20:51:38.546+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"The following is the series of messages resulting from the broker (infinite loop):\n\nINFO  DemandForwardingBridge         - Network connection between vm://localhost#0 and tcp://localhost/127.0.0.1:61601 shutdown due to a local error: javax.jms.JMSException: Durable consumer is in use for client: NC_SWITCH1BROKER_inboundlocalhost and subscriptionName: localhost_TEST.FOO\nINFO  TransportConnector             - Connector vm://localhost Stopped\nINFO  NetworkConnector               - Establishing network connection between from vm://localhost?network=true to tcp://switch:61601\nINFO  TransportConnector             - Connector vm://localhost Started\nINFO  DemandForwardingBridge         - Network connection between vm://localhost#2 and tcp://localhost/127.0.0.1:61601(SWITCH1BROKER) has been established.\nINFO  DemandForwardingBridge         - Network connection between vm://localhost#2 and tcp://localhost/127.0.0.1:61601 shutdown due to a local error: javax.jms.JMSException: Durable consumer is in use for client: NC_SWITCH1BROKER_inboundlocalhost and subscriptionName: localhost_TEST.FOO\nINFO  TransportConnector             - Connector vm://localhost Stopped\n...\n\n\nEXACT STEPS TO REPRODUCE:\n\n1  -Start standalone broker\n\t-using default conf/activemq.xml file\n\n2  -Start EmbeddedBroker (with network connector specified):\n\tBrokerService broker = new BrokerService();\n        \tbroker.setUseJmx(true);\n        \tbroker.setBrokerName(\"SWITCH1BROKER\");\n\n\tTransportConnector connector =\n\t    broker.addConnector(new URI(\"tcp://localhost:\"+61601));\n\tconnector.setDiscoveryUri(new URI(\"multicast://default\"));\n\tbroker.addNetworkConnector(new URI(\"multicast://default\"));\n\n\tbroker.start();\n\nAt this point, I'll get the following output (which looks normal):\n\nINFO  NetworkConnector               - Establishing network connection between from vm://localhost?network=true to tcp://switch:61601\nINFO  TransportConnector             - Connector vm://localhost Started\nINFO  DemandForwardingBridge         - Network connection between vm://localhost#0 and tcp://localhost/127.0.0.1:61601(SWITCH1BROKER) has been established.\n\n\n3.  -Edit line 105 of ConsumerTool to specify any message selector\n\tconsumer = session.createDurableSubscriber((Topic) destination,\n\t    consumerName, \"BLAH = '1'\", false);\n\n4.  -Start ConsumerTool with clientID consumer1\n\t-connect to tcp://localhost:61601\n\t-using topics, durable subscription, w/ message selector\n\n5.  -Start ConsumerTool with clientID consumer2\n\t-connect to tcp://localhost:61601\n\t-using topics, durable subscription, w/ message selector\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172314","customfield_12312823":null,"summary":"Infinite loop from broker's network connector when using multiple durable subscribers (topics) with msg selector.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=turing_1","name":"turing_1","key":"turing_1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Samson","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=turing_1","name":"turing_1","key":"turing_1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Samson","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1102/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tuw7:"}}