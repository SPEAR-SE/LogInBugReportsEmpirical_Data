{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12650892","self":"https://issues.apache.org/jira/rest/api/2/issue/12650892","key":"AMQ-4569","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2013-06-04T18:25:27.086+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jun 06 19:11:52 UTC 2013","customfield_12310420":"331219","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_188066843_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-06-06T19:11:52.655+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4569/watchers","watchCount":3,"isWatching":false},"created":"2013-06-04T14:57:25.833+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["heartbeat","inactivity","stomp"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323282","id":"12323282","description":"Maintenance release with new AMQP support and smaller modules","name":"5.8.0","archived":false,"released":true,"releaseDate":"2013-02-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-06T19:11:52.674+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12315706","id":"12315706","name":"stomp"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"When I specify a timeout using a connector like the following to get a 5-minute idle timeout\n{code:xml}\n<transportConnector name=\"stomp\" uri=\"stomp://0.0.0.0:61613?transport.defaultHeartBeat=300000,0\"/>\n{code}\nIt takes 15 minutes for it to time out. I tried one previously at 900000 (15 minutes), and it had not timed out after 35 minutes, when I had to leave.\n\nSo, it appears the timeout takes 3 times longer than specified. I find it suspicious that there is a call somewhere I saw in the code that divides the timeout period by 3.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12586217","id":"12586217","filename":"activemq.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T23:03:58.570+0000","size":136870,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12586217/activemq.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12586205","id":"12586205","filename":"activemq.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T22:18:47.903+0000","size":66931,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12586205/activemq.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12586180","id":"12586180","filename":"activemq.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T21:27:50.756+0000","size":48858,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12586180/activemq.log"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"331552","customfield_12312823":null,"summary":"Stomp inactivity timeout takes significantly longer than specified","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows 7, JRE 7.","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13674668","id":"13674668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"You should enable debug logging on the broker and post the logs after starting a clean broker and connecting a client, this should log what values are being used to configure the inactivity monitor.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-04T18:25:27.086+0000","updated":"2013-06-04T18:25:27.086+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675138","id":"13675138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"body":"Due to work priorities, it may take me a while to get back with the requested information.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T19:33:19.084+0000","updated":"2013-06-04T19:33:19.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675276","id":"13675276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"body":"Attaching an activemq.log excerpt of a clean run of ActiveMQ followed by a STOMP client connection.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T21:27:50.758+0000","updated":"2013-06-04T21:27:50.758+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675330","id":"13675330","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"You can further debug the inactivity monitor by setting these values for the AMQ logging which will show you the monitor checking the client. \n\n{noformat}\nlog4j.logger.org.apache.activemq.transport=TRACE\n{noformat}\n\nYou should see something along these lines.\n\n{noformat}\n2013-06-04 18:02:09,204 [0.1:33780@51836] - DEBUG StompInactivityMonitor         - Stomp Inactivity Monitor read check: 5000, write check: 0\n2013-06-04 18:02:09,205 [0.1:33780@51836] - DEBUG ProtocolConverter              - Stomp Connect heartbeat conf RW[5000,0]\n2013-06-04 18:02:09,205 [ ReadCheckTimer] - TRACE AbstractInactivityMonitor      - A receive is in progress\n2013-06-04 18:02:14,206 [ ReadCheckTimer] - DEBUG AbstractInactivityMonitor      - 5001 ms elapsed since last read check.\n2013-06-04 18:02:14,206 [ ReadCheckTimer] - TRACE AbstractInactivityMonitor      - A receive is in progress\n2013-06-04 18:02:19,206 [ ReadCheckTimer] - DEBUG AbstractInactivityMonitor      - 5000 ms elapsed since last read check.\n2013-06-04 18:02:19,206 [ ReadCheckTimer] - TRACE AbstractInactivityMonitor      - Message received since last read check, resetting flag: \n2013-06-04 18:02:24,206 [ ReadCheckTimer] - DEBUG AbstractInactivityMonitor      - 5000 ms elapsed since last read check.\n2013-06-04 18:02:24,206 [ ReadCheckTimer] - DEBUG AbstractInactivityMonitor      - No message received since last read check for tcp:///127.0.0.1:33780@51836. Throwing InactivityIOException.\n2013-06-04 18:02:24,210 [yMonitor Worker] - DEBUG AbstractInactivityMonitor      - Running ReadCheck[tcp://127.0.0.1:33780]\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-04T22:05:56.285+0000","updated":"2013-06-04T22:05:56.285+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675346","id":"13675346","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"body":"Attaching a newer log excerpt with TRACE turned on. Couldn't find the place in the log where AMQ started, so I began the excerpt where AMQ was stopped.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T22:18:47.905+0000","updated":"2013-06-04T22:18:47.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675350","id":"13675350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Things seem to be working fine, stomp client will remain connected since the broker is reporting:\n\n{noformat}\n2013-06-04 16:11:56,011 | TRACE | A receive is in progress | org.apache.activemq.transport.AbstractInactivityMonitor | ActiveMQ InactivityMonitor ReadCheckTimer\n{noformat}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-04T22:25:34.964+0000","updated":"2013-06-04T22:25:34.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675361","id":"13675361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"body":"Except that my test client, which connects and subscribes but then sleeps didn't disconnect until after 15 minutes. I'll grab the rest of the log and attach it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T22:37:03.060+0000","updated":"2013-06-04T22:37:03.060+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675363","id":"13675363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"body":"I forgot to turn off some other processing that touches that AMQ instance. I'll run it again with just the test client.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T22:39:07.185+0000","updated":"2013-06-04T22:39:07.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675397","id":"13675397","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"body":"Attaching another activemq.log excerpt. This one should cover startup of AMQ thru connection of a client that does not do any subsequent reading thru the disconnection of that client after 15 minutes instead of 5 minutes of inactivity.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-04T23:03:58.573+0000","updated":"2013-06-04T23:03:58.573+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675419","id":"13675419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Things are working as designed.  The read checks are meant to be lenient in order to prevent breaking off a client to quickly in case of large message sends.  If you want more controlled inactivity checks you need a STOMP v1.1+ client with write checks which will detect broken sockets on write. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-04T23:25:25.290+0000","updated":"2013-06-04T23:25:25.290+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13675980","id":"13675980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"body":"Is 3 times the heartbeat period the upper bound for when an inactive client connection will be cleared by the broker? If not, what is the upper bound?\n\nIf there was a statement I could measure my observations against, such as that connection clearing would happen no sooner than 1 heartbeat and no later than X heartbeats (or one heartbeat + X seconds/minutes/hours), we could probably settle this hear and prevent this issue from popping up again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-05T14:47:27.570+0000","updated":"2013-06-05T14:47:27.570+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13676027","id":"13676027","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"In general it will take two read check cycles before the client gets booted, however in your case since the client simply connects and then does nothing the inactivity monitor has settled and it ends up taking a third cycle normally if you client connected, and did some other interaction with the broker this wouldn't happen.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2013-06-05T15:29:43.807+0000","updated":"2013-06-05T15:29:43.807+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12650892/comment/13677392","id":"13677392","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"body":"This issue was based on a misunderstanding of the heartbeat. In normal operation it will take two heartbeats for an idle connection to be cleared. In some cases, such as a client that connects but does not read at all, it will take three heartbeats before the connection is cleared. Consequently, I am resolving this issue as \"not a problem.\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kamorrissey","name":"kamorrissey","key":"kamorrissey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kamorrissey&avatarId=16952","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kamorrissey&avatarId=16952","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kamorrissey&avatarId=16952","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kamorrissey&avatarId=16952"},"displayName":"Karen Morrissey","active":true,"timeZone":"America/Denver"},"created":"2013-06-06T19:11:52.671+0000","updated":"2013-06-06T19:11:52.671+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4569/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1l53r:"}}