{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12706473","self":"https://issues.apache.org/jira/rest/api/2/issue/12706473","key":"AMQ-5133","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2014-04-29T15:08:52.157+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Nov 14 18:16:29 UTC 2014","customfield_12310420":"384796","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_11402734380_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-08-13T17:36:53.120+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5133/watchers","watchCount":5,"isWatching":false},"created":"2014-04-03T18:11:18.788+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323932","id":"12323932","name":"5.9.0","archived":false,"released":true,"releaseDate":"2013-10-21"}],"issuelinks":[{"id":"12401383","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12401383","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12753265","key":"AMQ-5424","self":"https://issues.apache.org/jira/rest/api/2/issue/12753265","fields":{"summary":"Broker at 100% CPU when idle after Network Connection reconnect with duplicates sent","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-11-14T18:17:55.781+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"The Selector Worker: 0 thread is consuming 25% of the host CPU even though there are no active producers or consumers and there are no messages in the message store.  I was able to identify the offending thread by first using {{ps -eLF}} to find the ActiveMQ thread with a relatively large and continually increasing amount of CPU time.  I then correlated the thread ID (LWP  column  in {{ps}} output) to the native thread ID provided by the 'nid' value in the thread dump.  At the time I ran {{ps}}, the Selector Worker thread had taken over 20 hours of CPU time while the next closest ActiveMQ thread had taken 3 minutes of CPU time.  The Selector Worker thread has nid=0x489 in the thread dump copied below.\n\nh4.  Steps To Reproduce\n\nUnfortunately, I don't have repeatable steps to reproduce.  I think the issue may have occurred while I was purging a queue that had four active consumers.  The queue had several thousand persistent 350KB messages.  The consumers were using selectors and all the messages on the queue matched the consumers' selectors.  The consumers were Apache.NMS clients.  I noticed the unexpected CPU usage after the purge completed, but I can't be sure it was triggered by the purge.  I'm running performance tests and part of my normal test initialization requires purging the queue.  As such, the purge is repeated many times a day and hasn't been an issue.  After I noticed the CPU usage increase, I shut down all producers and consumers but the CPU usage increase persisted.  I'm using JConsole to monitor the JVM and monitor/manage the broker.\n \nh4. Thread Dump\n\n{noformat}\n2014-04-03 10:23:18\nFull thread dump Java HotSpot(TM) 64-Bit Server VM (14.3-b01 mixed mode):\n\n\"ActiveMQ NIO Worker 807\" daemon prio=10 tid=0x00007fc764031800 nid=0x34e7 waiting on condition [0x00007fc7b0786000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba8001c0> (a java.util.concurrent.SynchronousQueue$TransferStack)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:424)\n        at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:323)\n        at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:874)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:945)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ NIO Worker 806\" daemon prio=10 tid=0x00007fc764017000 nid=0x346c waiting on condition [0x00007fc7b09ad000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba8001c0> (a java.util.concurrent.SynchronousQueue$TransferStack)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:424)\n        at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:323)\n        at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:874)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:945)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ InactivityMonitor Worker\" daemon prio=10 tid=0x00007fc774003000 nid=0x2848 waiting on condition [0x00007fc7b0040000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba82b968> (a java.util.concurrent.SynchronousQueue$TransferStack)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:424)\n        at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:323)\n        at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:874)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:945)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"Attach Listener\" daemon prio=10 tid=0x00007fc78c001000 nid=0x1788 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"ActiveMQ BrokerService[ActiveMQ-HCE-Playpen-partition-3-ndmhce-amq402] Task-135\" daemon prio=10 tid=0x00007fc7700dd000 nid=0x10aa waiting on condition [0x00007fc7b059c000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba800290> (a java.util.concurrent.SynchronousQueue$TransferStack)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:424)\n        at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:323)\n        at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:874)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:945)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"RMI Scheduler(0)\" daemon prio=10 tid=0x00007fc780003800 nid=0x495 waiting on condition [0x00007fc7b0b04000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba822528> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)\n        at java.util.concurrent.DelayQueue.take(DelayQueue.java:160)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:583)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:576)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ BrokerService.worker.1\" daemon prio=10 tid=0x00007fc77000e000 nid=0x491 waiting on condition [0x00007fc7b094b000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba8f6638> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)\n        at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:358)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ InactivityMonitor WriteCheckTimer\" daemon prio=10 tid=0x00007fc77000a800 nid=0x48d in Object.wait() [0x00007fc7b0a0f000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n        - locked <0x00007fc7ba9c0960> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\"ActiveMQ InactivityMonitor ReadCheckTimer\" daemon prio=10 tid=0x00007fc770009000 nid=0x48c in Object.wait() [0x00007fc7b0a40000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n        - locked <0x00007fc7ba9c0a38> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\"Selector Worker: 0\" daemon prio=10 tid=0x00007fc76801a000 nid=0x489 runnable [0x00007fc7b0ad3000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.EPollArrayWrapper.updateRegistrations(EPollArrayWrapper.java:230)\n        - locked <0x00007fc7bb1777f8> (a java.util.LinkedList)\n        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:214)\n        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)\n        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n        - locked <0x00007fc7ba9c0b90> (a sun.nio.ch.Util$1)\n        - locked <0x00007fc7ba9c0ba8> (a java.util.Collections$UnmodifiableSet)\n        - locked <0x00007fc7ba9067d0> (a sun.nio.ch.EPollSelectorImpl)\n        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n        at org.apache.activemq.transport.nio.SelectorWorker.run(SelectorWorker.java:93)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"qtp1649900638-44\" prio=10 tid=0x00007fc75ca7a000 nid=0x481 waiting on condition [0x00007fc7b0b35000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba9c0ce0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"qtp1649900638-43\" prio=10 tid=0x00007fc75ca78000 nid=0x480 waiting on condition [0x00007fc7b0b66000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba9c0ce0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"qtp1649900638-42\" prio=10 tid=0x00007fc75ca76000 nid=0x47f waiting on condition [0x00007fc7b0b97000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba9c0ce0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"qtp1649900638-41\" prio=10 tid=0x00007fc75ca74800 nid=0x47e waiting on condition [0x00007fc7b0bc8000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba9c0ce0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"qtp1649900638-40\" prio=10 tid=0x00007fc75ca73000 nid=0x47d waiting on condition [0x00007fc7b0bf9000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba9c0ce0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"qtp1649900638-39\" prio=10 tid=0x00007fc75ca72000 nid=0x47c waiting on condition [0x00007fc7b0c2a000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba9c0ce0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at org.eclipse.jetty.util.BlockingArrayQueue.poll(BlockingArrayQueue.java:342)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.idleJobPoll(QueuedThreadPool.java:526)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.access$600(QueuedThreadPool.java:44)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"qtp1649900638-38 Acceptor0 SelectChannelConnector@0.0.0.0:8161\" prio=10 tid=0x00007fc75ca64800 nid=0x47b runnable [0x00007fc7b0c5b000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)\n        at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:145)\n        - locked <0x00007fc7ba9c1510> (a java.lang.Object)\n        at org.eclipse.jetty.server.nio.SelectChannelConnector.accept(SelectChannelConnector.java:109)\n        at org.eclipse.jetty.server.AbstractConnector$Acceptor.run(AbstractConnector.java:938)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"qtp1649900638-37 Selector0\" prio=10 tid=0x00007fc75ca64000 nid=0x47a runnable [0x00007fc7b0c8c000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:215)\n        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)\n        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n        - locked <0x00007fc7ba9c1e38> (a sun.nio.ch.Util$1)\n        - locked <0x00007fc7ba9c1e20> (a java.util.Collections$UnmodifiableSet)\n        - locked <0x00007fc7ba9c1a78> (a sun.nio.ch.EPollSelectorImpl)\n        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n        at org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:569)\n        at org.eclipse.jetty.io.nio.SelectorManager$1.run(SelectorManager.java:290)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"HashSessionScavenger-3\" daemon prio=10 tid=0x00007fc75ca4d000 nid=0x479 in Object.wait() [0x00007fc7b0cbd000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n        - locked <0x00007fc7baa22728> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\"HashSessionScavenger-2\" daemon prio=10 tid=0x00007fc75ca4c000 nid=0x478 in Object.wait() [0x00007fc7b0cee000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n        - locked <0x00007fc7baaafe38> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\"HashSessionScavenger-1\" daemon prio=10 tid=0x00007fc75c9b4800 nid=0x477 in Object.wait() [0x00007fc7b0d3d000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n        - locked <0x00007fc7bac11d38> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\"HashSessionScavenger-0\" daemon prio=10 tid=0x00007fc75c8e4000 nid=0x476 in Object.wait() [0x00007fc7b0d6e000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n        - locked <0x00007fc7baceab20> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\"ActiveMQ Transport Server: nio://0.0.0.0:61616?wireFormat.maxInactivityDuration=45000\" daemon prio=10 tid=0x00007fc75c80b000 nid=0x469 runnable [0x00007fc7b0dc0000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:215)\n        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)\n        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)\n        - locked <0x00007fc7bad58570> (a sun.nio.ch.Util$1)\n        - locked <0x00007fc7bad58588> (a java.util.Collections$UnmodifiableSet)\n        - locked <0x00007fc7bad584f8> (a sun.nio.ch.EPollSelectorImpl)\n        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)\n        at sun.nio.ch.ServerSocketAdaptor.accept(ServerSocketAdaptor.java:105)\n        - locked <0x00007fc7bad585a0> (a java.lang.Object)\n        at org.apache.activemq.transport.tcp.TcpTransportServer.run(TcpTransportServer.java:299)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ Transport Server Thread Handler: nio://0.0.0.0:61616?wireFormat.maxInactivityDuration=45000\" daemon prio=10 tid=0x00007fc75c6c7800 nid=0x468 waiting on condition [0x00007fc7b0df1000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7bad59360> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:395)\n        at org.apache.activemq.transport.tcp.TcpTransportServer$1.run(TcpTransportServer.java:373)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ JDBC PA Scheduled Task\" daemon prio=10 tid=0x00007fc75c801800 nid=0x467 waiting on condition [0x00007fc7b0f2a000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba8cd978> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:583)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:576)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ JDBC PA Scheduled Task\" daemon prio=10 tid=0x00007fc75c801000 nid=0x466 waiting on condition [0x00007fc7b14b6000]\n   java.lang.Thread.State: TIMED_WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7ba8cd978> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)\n        at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:583)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:576)\n        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"ActiveMQ Broker[ActiveMQ-HCE-Playpen-partition-3-ndmhce-amq402] Scheduler\" daemon prio=10 tid=0x00007fc75c7c9000 nid=0x465 in Object.wait() [0x00007fc7b1518000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n        - locked <0x00007fc7ba903448> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\"com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#5\" daemon prio=10 tid=0x00007fc75c7c5000 nid=0x464 in Object.wait() [0x00007fc7b0f65000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:534)\n        - locked <0x00007fc7ba870a98> (a com.mchange.v2.async.ThreadPoolAsynchronousRunner)\n\n\"com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#4\" daemon prio=10 tid=0x00007fc75c705800 nid=0x463 in Object.wait() [0x00007fc7b0f96000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:534)\n        - locked <0x00007fc7ba870a98> (a com.mchange.v2.async.ThreadPoolAsynchronousRunner)\n\n\"com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#3\" daemon prio=10 tid=0x00007fc75c71f800 nid=0x462 in Object.wait() [0x00007fc7b0fc7000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:534)\n        - locked <0x00007fc7ba870a98> (a com.mchange.v2.async.ThreadPoolAsynchronousRunner)\n\n\"com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2\" daemon prio=10 tid=0x00007fc75c702800 nid=0x461 in Object.wait() [0x00007fc7b0ff8000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:534)\n        - locked <0x00007fc7ba870a98> (a com.mchange.v2.async.ThreadPoolAsynchronousRunner)\n\n\"com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1\" daemon prio=10 tid=0x00007fc75c731000 nid=0x460 in Object.wait() [0x00007fc7b1029000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:534)\n        - locked <0x00007fc7ba870a98> (a com.mchange.v2.async.ThreadPoolAsynchronousRunner)\n\n\"com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0\" daemon prio=10 tid=0x00007fc75c704800 nid=0x45f in Object.wait() [0x00007fc7b105a000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:534)\n        - locked <0x00007fc7ba870a98> (a com.mchange.v2.async.ThreadPoolAsynchronousRunner)\n\n\"Timer-0\" daemon prio=10 tid=0x00007fc75c7bc000 nid=0x45e in Object.wait() [0x00007fc7b108b000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.util.TimerThread.mainLoop(Timer.java:509)\n        - locked <0x00007fc7ba885b40> (a java.util.TaskQueue)\n        at java.util.TimerThread.run(Timer.java:462)\n\n\"WrapperSimpleAppMain\" prio=10 tid=0x00007fc768001000 nid=0x45d waiting on condition [0x00007fc7b1484000]\n   java.lang.Thread.State: WAITING (parking)\n        at sun.misc.Unsafe.park(Native Method)\n        - parking to wait for  <0x00007fc7bac8e818> (a java.util.concurrent.CountDownLatch$Sync)\n        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:747)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:905)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1217)\n        at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:207)\n        at org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:118)\n        at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n        at org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:150)\n        at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)\n        at org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:104)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.activemq.console.Main.runTaskClass(Main.java:262)\n        at org.apache.activemq.console.Main.main(Main.java:115)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"DestroyJavaVM\" prio=10 tid=0x00007fc928009000 nid=0x449 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"Wrapper-Connection\" daemon prio=10 tid=0x00007fc928159000 nid=0x45b runnable [0x00007fc7b14e7000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.SocketInputStream.socketRead0(Native Method)\n        at java.net.SocketInputStream.read(SocketInputStream.java:129)\n        at java.net.SocketInputStream.read(SocketInputStream.java:182)\n        at java.io.DataInputStream.readByte(DataInputStream.java:248)\n        at org.tanukisoftware.wrapper.WrapperManager.handleSocket(WrapperManager.java:3737)\n        at org.tanukisoftware.wrapper.WrapperManager.run(WrapperManager.java:4084)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"Wrapper-Control-Event-Monitor\" daemon prio=10 tid=0x00007fc9281b4000 nid=0x459 waiting on condition [0x00007fc7b1549000]\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n        at java.lang.Thread.sleep(Native Method)\n        at org.tanukisoftware.wrapper.WrapperManager$3.run(WrapperManager.java:731)\n\n\"RMI TCP Accept-0\" daemon prio=10 tid=0x00007fc928145800 nid=0x457 runnable [0x00007fc7b177e000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)\n        - locked <0x00007fc7bab32bc8> (a java.net.SocksSocketImpl)\n        at java.net.ServerSocket.implAccept(ServerSocket.java:453)\n        at java.net.ServerSocket.accept(ServerSocket.java:421)\n        at sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(LocalRMIServerSocketFactory.java:34)\n        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)\n        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"RMI TCP Accept-1099\" daemon prio=10 tid=0x00007fc928140000 nid=0x456 runnable [0x00007fc7b17af000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)\n        - locked <0x00007fc7bab32f50> (a java.net.SocksSocketImpl)\n        at java.net.ServerSocket.implAccept(ServerSocket.java:453)\n        at java.net.ServerSocket.accept(ServerSocket.java:421)\n        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)\n        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"RMI TCP Accept-0\" daemon prio=10 tid=0x00007fc92812f000 nid=0x455 runnable [0x00007fc7b17e0000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)\n        - locked <0x00007fc7bad7df40> (a java.net.SocksSocketImpl)\n        at java.net.ServerSocket.implAccept(ServerSocket.java:453)\n        at java.net.ServerSocket.accept(ServerSocket.java:421)\n        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)\n        at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)\n        at java.lang.Thread.run(Thread.java:619)\n\n\"Low Memory Detector\" daemon prio=10 tid=0x00007fc928091000 nid=0x454 runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"CompilerThread1\" daemon prio=10 tid=0x00007fc92808e000 nid=0x453 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"CompilerThread0\" daemon prio=10 tid=0x00007fc92808b800 nid=0x452 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"Signal Dispatcher\" daemon prio=10 tid=0x00007fc928089800 nid=0x451 runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n\"Finalizer\" daemon prio=10 tid=0x00007fc92806d000 nid=0x450 in Object.wait() [0x00007fc7b1cd0000]\n   java.lang.Thread.State: WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)\n        - locked <0x00007fc7bad7e630> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)\n        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio=10 tid=0x00007fc92806b800 nid=0x44f in Object.wait() [0x00007fc7b1d01000]\n   java.lang.Thread.State: WAITING (on object monitor)\n        at java.lang.Object.wait(Native Method)\n        at java.lang.Object.wait(Object.java:485)\n        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)\n        - locked <0x00007fc7ba821d08> (a java.lang.ref.Reference$Lock)\n\n\"VM Thread\" prio=10 tid=0x00007fc928064800 nid=0x44e runnable\n\n\"GC task thread#0 (ParallelGC)\" prio=10 tid=0x00007fc928013000 nid=0x44a runnable\n\n\"GC task thread#1 (ParallelGC)\" prio=10 tid=0x00007fc928014800 nid=0x44b runnable\n\n\"GC task thread#2 (ParallelGC)\" prio=10 tid=0x00007fc928016800 nid=0x44c runnable\n\n\"GC task thread#3 (ParallelGC)\" prio=10 tid=0x00007fc928018800 nid=0x44d runnable\n\n\"VM Periodic Task Thread\" prio=10 tid=0x00007fc928148000 nid=0x458 waiting on condition\n\nJNI global references: 703\n{noformat}\n\nh4. activemq.xml\n{noformat}\n<beans\n  xmlns=\"http://www.springframework.org/schema/beans\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\">\n\n        <!-- Allows us to use system properties as variables in this configuration file -->\n        <bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\">\n                <property name=\"locations\">\n                        <value>file:${activemq.conf}/credentials.properties</value>\n                </property>\n        </bean>\n\n        <broker useJmx=\"true\" brokerName=\"ActiveMQ-HCE-Playpen-partition-3-ndmhce-amq402\" xmlns=\"http://activemq.apache.org/schema/core\" schedulerSupport=\"false\" advisorySupport=\"false\">\n                <plugins>\n                        <!-- enable logging of connection, session, and dispatch events -->\n                        <loggingBrokerPlugin logConsumerEvents=\"true\" logProducerEvents=\"true\"/>\n                </plugins>\n\n                <managementContext>\n                        <managementContext createConnector=\"false\"/>\n                </managementContext>\n\n                <destinationPolicy>\n                        <policyMap>\n                                <policyEntries>\n                                        <policyEntry topic=\">\" producerFlowControl=\"false\" memoryLimit=\"100kb\">\n                                                <pendingSubscriberPolicy>\n                                                        <vmCursor />\n                                                </pendingSubscriberPolicy>\n                                        </policyEntry>\n                                        <policyEntry queue=\">\" optimizedDispatch=\"true\" producerFlowControl=\"false\" enableAudit=\"true\" memoryLimit=\"64mb\" maxPageSize=\"1000\"  expireMessagesPeriod=\"7200000\" cursorMemoryHighWaterMark=\"100\" prioritizedMessages=\"true\" />\n                                        <policyEntry queue=\"documentConversionService\" optimizedDispatch=\"true\" producerFlowControl=\"false\" enableAudit=\"true\" memoryLimit=\"1665mb\" maxPageSize=\"1000\" expireMessagesPeriod=\"7200000\" cursorMemoryHighWaterMark=\"100\" prioritizedMessages=\"true\" />\n                                        <policyEntry queue=\"ActiveMQ.DLQ\" optimizedDispatch=\"true\" producerFlowControl=\"false\" enableAudit=\"true\" memoryLimit=\"200mb\" maxPageSize=\"1000\"  cursorMemoryHighWaterMark=\"100\"/>\n                                </policyEntries>\n                        </policyMap>\n                </destinationPolicy>\n                <!--\n        See more database locker options at http://activemq.apache.org/pluggable-storage-lockers.html\n    -->\n                <persistenceAdapter>\n                        <jdbcPersistenceAdapter createTablesOnStartup=\"false\" useDatabaseLock=\"true\" dataSource=\"#mssql-ds\" lockAcquireSleepInterval=\"10000\" lockKeepAlivePeriod=\"5000\" maxRows=\"10\">\n                                <databaseLocker>\n                                        <lease-database-locker/>\n                                </databaseLocker>\n                        </jdbcPersistenceAdapter>\n                </persistenceAdapter>\n\n                <systemUsage>\n                        <systemUsage sendFailIfNoSpaceAfterTimeout=\"5000\">\n                                <memoryUsage>\n                                        <memoryUsage limit=\"3700mb\"/>\n                                </memoryUsage>\n                                <tempUsage>\n                                        <tempUsage limit=\"2700mb\"/>\n                                </tempUsage>\n                        </systemUsage>\n                </systemUsage>\n\n                <transportConnectors>\n                        <transportConnector name=\"nio\" uri=\"nio://0.0.0.0:61616?wireFormat.maxInactivityDuration=45000\"/>\n                </transportConnectors>\n        </broker>\n\n        <bean id=\"mssql-ds\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" destroy-method=\"close\">\n                <property name=\"driverClass\" value=\"com.microsoft.sqlserver.jdbc.SQLServerDriver\"/>\n                <property name=\"jdbcUrl\" value=\"jdbc:sqlserver://10.56.27.166:1433;databaseName=amq_test_performance1;sendStringParametersAsUnicode=false\"/>\n                <property name=\"user\" value=\"********\"/>\n                <property name=\"password\" value=\"*********\"/>\n                <property name=\"minPoolSize\" value=\"5\" />\n                <property name=\"maxPoolSize\" value=\"-1\" />\n                <property name=\"acquireIncrement\" value=\"20\" />\n                <property name=\"acquireRetryAttempts\" value=\"100\"/>\n                <property name=\"acquireRetryDelay\" value=\"5000\"/>\n                <property name=\"maxIdleTime\" value=\"3600\" />\n                <property name=\"numHelperThreads\" value=\"6\" />\n        </bean>\n\n        <import resource=\"jetty.xml\"/>\n</beans>\n{noformat}\n\nh4. wrapper.conf\n\n{noformat}\n#********************************************************************\n# Wrapper Properties\n#********************************************************************\n\n#wrapper.debug=TRUE\nset.default.ACTIVEMQ_HOME=../..\nset.default.ACTIVEMQ_BASE=../..\nset.default.ACTIVEMQ_CONF=%ACTIVEMQ_BASE%/conf\nset.default.ACTIVEMQ_DATA=%ACTIVEMQ_BASE%/data\nwrapper.working.dir=.\n\n# Java Application\nwrapper.java.command=java\n\n# Java Main class.  This class must implement the WrapperListener interface\n#  or guarantee that the WrapperManager class is initialized.  Helper\n#  classes are provided to do this for you.  See the Integration section\n#  of the documentation for details.\nwrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp\n\n# Java Classpath (include wrapper.jar)  Add class path elements as\n#  needed starting from 1\nwrapper.java.classpath.1=%ACTIVEMQ_HOME%/bin/wrapper.jar\nwrapper.java.classpath.2=%ACTIVEMQ_HOME%/bin/activemq.jar\n\n# Java Library Path (location of Wrapper.DLL or libwrapper.so)\nwrapper.java.library.path.1=%ACTIVEMQ_HOME%/bin/linux-x86-64/\n\n# Java Additional Parameters\n# note that n is the parameter number starting from 1.\nwrapper.java.additional.1=-Dactivemq.home=%ACTIVEMQ_HOME%\nwrapper.java.additional.2=-Dactivemq.base=%ACTIVEMQ_BASE%\nwrapper.java.additional.3=-Djavax.net.ssl.keyStorePassword=password\nwrapper.java.additional.4=-Djavax.net.ssl.trustStorePassword=password\nwrapper.java.additional.5=-Djavax.net.ssl.keyStore=%ACTIVEMQ_CONF%/broker.ks\nwrapper.java.additional.6=-Djavax.net.ssl.trustStore=%ACTIVEMQ_CONF%/broker.ts\nwrapper.java.additional.7=-Dcom.sun.management.jmxremote\nwrapper.java.additional.8=-Dorg.apache.activemq.UseDedicatedTaskRunner=false\nwrapper.java.additional.9=-Djava.util.logging.config.file=logging.properties\nwrapper.java.additional.10=-Dactivemq.conf=%ACTIVEMQ_CONF%\nwrapper.java.additional.11=-Dactivemq.data=%ACTIVEMQ_DATA%\n\n\n\n# Uncomment to enable jmx\nwrapper.java.additional.12=-Dcom.sun.management.jmxremote.port=1099\nwrapper.java.additional.13=-Dcom.sun.management.jmxremote.authenticate=false\nwrapper.java.additional.14=-Dcom.sun.management.jmxremote.ssl=false\nwrapper.java.additional.15=-Xms1024m\nwrapper.java.additional.16=-Xmx5800m\nwrapper.java.additional.17=-Xss192k\nwrapper.java.additional.18=-XX:MaxPermSize=128m\nwrapper.java.additional.19=-XX:MaxGCPauseMillis=2000\nwrapper.java.additional.20=-XX:GCTimeRatio=19\nwrapper.java.additional.21=-XX:+HeapDumpOnOutOfMemoryError\n\n# hawtio configuration\nwrapper.java.additional.22=-Dhawtio.realm=activemq\nwrapper.java.additional.23=-Dhawtio.role=admins\nwrapper.java.additional.24=-Dhawtio.rolePrincipalClasses=org.apache.activemq.jaas.GroupPrincipal\nwrapper.java.additional.25=-Djava.security.auth.login.config=%ACTIVEMQ_CONF%/login.config\n\n\n#wrapper.java.additional.22=-Xrunyjpagent=\n#wrapper.java.additional.23=-agentpath:/export/data/centos-activemq-distribution/yourkit/yjp-11.0.10/bin/linux-x86-64/libyjpagent.so\n\n# Uncomment to enable remote debugging\n#wrapper.java.additional.24=-Xdebug -Xnoagent -Djava.compiler=NONE\n\n#wrapper.java.additional.25=-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005\n\n# Initial Java Heap Size (in MB)\n#wrapper.java.initmemory=2048\n\n# Maximum Java Heap Size (in MB)\n#wrapper.java.maxmemory=4600\n\n# Application parameters.  Add parameters as needed starting from 1\nwrapper.app.parameter.1=org.apache.activemq.console.Main\nwrapper.app.parameter.2=start\n\n#********************************************************************\n# Wrapper Logging Properties\n#********************************************************************\n# Format of output for the console.  (See docs for formats)\nwrapper.console.format=PM\n\n# Log Level for console output.  (See docs for log levels)\nwrapper.console.loglevel=INFO\n\n# Log file to use for wrapper output logging.\nwrapper.logfile=%ACTIVEMQ_DATA%/wrapper.log\n\n# Format of output for the log file.  (See docs for formats)\nwrapper.logfile.format=LPTM\n\n# Log Level for log file output.  (See docs for log levels)\nwrapper.logfile.loglevel=INFO\n\n# Maximum size that the log file will be allowed to grow to before\n#  the log is rolled. Size is specified in bytes.  The default value\n#  of 0, disables log rolling.  May abbreviate with the 'k' (kb) or\n#  'm' (mb) suffix.  For example: 10m = 10 megabytes.\nwrapper.logfile.maxsize=100m\n\n# Maximum number of rolled log files which will be allowed before old\n#  files are deleted.  The default value of 0 implies no limit.\nwrapper.logfile.maxfiles=5\n\n# Log Level for sys/event log output.  (See docs for log levels)\nwrapper.syslog.loglevel=INFO\n\n#********************************************************************\n# Wrapper Windows Properties\n#********************************************************************\n# Title to use when running as a console\nwrapper.console.title=ActiveMQ\n\n#********************************************************************\n# Wrapper Windows NT/2000/XP Service Properties\n#********************************************************************\n# WARNING - Do not modify any of these properties when an application\n#  using this configuration file has been installed as a service.\n#  Please uninstall the service before modifying this section.  The\n#  service can then be reinstalled.\n\n# Name of the service\nwrapper.ntservice.name=ActiveMQ\n\n# Display name of the service\nwrapper.ntservice.displayname=ActiveMQ\n\n# Description of the service\nwrapper.ntservice.description=ActiveMQ Broker\n\n# Service dependencies.  Add dependencies as needed starting from 1\nwrapper.ntservice.dependency.1=\n\n# Mode in which the service is installed.  AUTO_START or DEMAND_START\nwrapper.ntservice.starttype=AUTO_START\n\n# Allow the service to interact with the desktop.\nwrapper.ntservice.interactive=false\n{noformat}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"385063","customfield_12312823":null,"summary":"Selector Worker thread consumes significant CPU when broker is idle","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=koppenheim","name":"koppenheim","key":"koppenheim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Keith Oppenheim","active":true,"timeZone":"Etc/GMT+5"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=koppenheim","name":"koppenheim","key":"koppenheim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Keith Oppenheim","active":true,"timeZone":"Etc/GMT+5"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"OS:CentOS release 6.5\nJava: 1.6.0_17, Java HotSpot 64-Bit Server VM\nHost: VMWare Xeon(R) CPU E5-2660 0; 4 core @2.2GHz","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706473/comment/13984373","id":"13984373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Without some way to reproduce this it's going to be hard to offer any solutions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-04-29T15:08:52.157+0000","updated":"2014-04-29T15:08:52.157+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706473/comment/14212573","id":"14212573","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pbertrand","name":"pbertrand","key":"pbertrand","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pete Bertrand","active":true,"timeZone":"Etc/UTC"},"body":"I believe I have been able to reproduce this issue, please see\nhttps://issues.apache.org/jira/browse/AMQ-5424\nThanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pbertrand","name":"pbertrand","key":"pbertrand","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pete Bertrand","active":true,"timeZone":"Etc/UTC"},"created":"2014-11-14T18:16:29.301+0000","updated":"2014-11-14T18:16:29.301+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5133/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1uahj:"}}