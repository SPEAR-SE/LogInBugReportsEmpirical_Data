{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482938","self":"https://issues.apache.org/jira/rest/api/2/issue/12482938","key":"AMQ-2495","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-11-18T15:07:38.492+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jun 23 12:03:12 UTC 2010","customfield_12310420":"74919","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_18915197201_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-06-23T12:03:12.872+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2495/watchers","watchCount":0,"isWatching":false},"created":"2009-11-16T13:49:55.671+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315620","id":"12315620","description":"","name":"5.3.0","archived":false,"released":true,"releaseDate":"2009-10-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-06-23T12:03:21.801+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313896","id":"12313896","name":"JMS client"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Tried to use JMSAppender with Activemq 5.3.0. The program stucked at line: \n\ntopicSession = topicConnection.createTopicSession(false, Session.AUTO_ACKNOWLEDGE); \n\nEven the default example (Log4jJMSAppenderExample.java) comes with the activemq 5.3 has the same problem. \n\n Below is the output when I run the default example with the log4j.debug flag on:\n\nAfter start the activemq server, I tried to run the jmsappender example comes with activemq version 5.3. The program hangs, below is the debug info: \n\nC:\\apache\\apache-activemq-5.3.0\\example>ant log4j-jms \nBuildfile: build.xml \n\ninit: \n\ncompile: \n\nlog4j-jms: \n     [echo] Running a Log4j JMS Appender example \n     [java] log4j: Trying to find [log4j-jms.properties] using context classloader sun.misc.Launcher$AppClassLoader@11b86e7. \n     [java] log4j: Using URL [file:/C:/apache/apache-activemq-5.3.0/example/target/classes/log4j-jms.properties] for automatic log4j configuration. \n     [java] log4j: Reading configuration from URL file:/C:/apache/apache-activemq-5.3.0/example/target/classes/log4j-jms.properties \n     [java] log4j: Parsing for [root] with value=[INFO, stdout, jms]. \n     [java] log4j: Level token is [INFO]. \n     [java] log4j: Category root set to INFO \n     [java] log4j: Parsing appender named \"stdout\". \n     [java] log4j: Parsing layout options for \"stdout\". \n     [java] log4j: Setting property [conversionPattern] to [%d %-5p %c - %m%n]. \n     [java] log4j: End of parsing for \"stdout\". \n     [java] log4j: Parsed \"stdout\" options. \n     [java] log4j: Parsing appender named \"jms\". \n     [java] log4j: Setting property [initialContextFactoryName] to [org.apache.activemq.jndi.ActiveMQInitialContextFactory]. \n     [java] log4j: Setting property [topicBindingName] to [logTopic]. \n     [java] log4j: Setting property [topicConnectionFactoryBindingName] to [ConnectionFactory]. \n     [java] log4j: Setting property [providerURL] to [tcp://localhost:61616]. \n     [java] log4j: Getting initial context. \n     [java] log4j: Looking up [ConnectionFactory] \n     [java] log4j: About to create TopicConnection. \n     [java] log4j: Creating TopicSession, non-transactional, in AUTO_ACKNOWLEDGE mode. \n\nNo error or exception showed, the program just hangs over here.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"119686","customfield_12312823":null,"summary":"Issue with JMSAppender using Activemq ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeffreyyin","name":"jeffreyyin","key":"jeffreyyin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeffrey Yin","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeffreyyin","name":"jeffreyyin","key":"jeffreyyin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeffrey Yin","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"jdk1.6, log4j 1.2.15, activemq 5.3.0","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482938/comment/12941833","id":"12941833","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"body":"Just did some research on the topic. The problem is that 5.3.0 added some logging in the BrokerInfo class which is used during connection init, so log4j and amq lock each other.\n\nSome possible solutions:\n\n* avoid using logs in during connection init\n* see is JmsAppender can be improved to handle this kind of situations\n\nMore research will be done to find the best solution and workaround.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dejanb","name":"dejanb","key":"dejanb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dejan Bosanac","active":true,"timeZone":"Europe/Berlin"},"created":"2009-11-18T15:07:38.492+0000","updated":"2009-11-18T15:07:38.492+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482938/comment/12942037","id":"12942037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"I think the solution to this issue is contained in the conversation, note the last two comments.\n\nhttp://old.nabble.com/Log4J-ActiveMQ-JMS-Appender-tt18840199.html#a27567206\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-03-22T17:01:16.047+0000","updated":"2010-03-22T17:01:16.047+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482938/comment/12942159","id":"12942159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"fix http://svn.apache.org/viewvc?rev=926165&view=rev resolved this.\n\nThis removes the logger from BrokerInfo which clashes with the logger init from ActiveMQConnection, which allows log4j to initialise\nstack trace from client before the exception{code}\nlog4j-jms:\n     [echo] Running a Log4j JMS Appender example\n     [java] starting\n     [java] 2010-06-23 12:53:34\n     [java] Full thread dump Java HotSpot(TM) Server VM (16.3-b01 mixed mode):\n     [java] \n     [java] \"InactivityMonitor WriteCheck\" daemon prio=10 tid=0x089d9400 nid=0x5549 in Object.wait() [0xa895c000]\n     [java]    java.lang.Thread.State: TIMED_WAITING (on object monitor)\n     [java] \tat java.lang.Object.wait(Native Method)\n     [java] \t- waiting on <0xb2436458> (a java.util.TaskQueue)\n     [java] \tat java.util.TimerThread.mainLoop(Timer.java:509)\n     [java] \t- locked <0xb2436458> (a java.util.TaskQueue)\n     [java] \tat java.util.TimerThread.run(Timer.java:462)\n     [java] \n     [java] \"InactivityMonitor ReadCheck\" daemon prio=10 tid=0x08888400 nid=0x5548 in Object.wait() [0xa89ad000]\n     [java]    java.lang.Thread.State: TIMED_WAITING (on object monitor)\n     [java] \tat java.lang.Object.wait(Native Method)\n     [java] \t- waiting on <0xb2435fe8> (a java.util.TaskQueue)\n     [java] \tat java.util.TimerThread.mainLoop(Timer.java:509)\n     [java] \t- locked <0xb2435fe8> (a java.util.TaskQueue)\n     [java] \tat java.util.TimerThread.run(Timer.java:462)\n     [java] \n     [java] \"ActiveMQ Transport: tcp://localhost/127.0.0.1:61616\" prio=10 tid=0xa88b1c00 nid=0x5545 in Object.wait() [0xa89fe000]\n     [java]    java.lang.Thread.State: RUNNABLE\n     [java] \tat org.apache.log4j.LogManager.getLoggerRepository(LogManager.java:174)\n     [java] \tat org.apache.log4j.LogManager.getLogger(LogManager.java:199)\n     [java] \tat org.apache.log4j.Logger.getLogger(Logger.java:105)\n     [java] \tat org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:283)\n     [java] \tat org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:108)\n     [java] \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n     [java] \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n     [java] \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n     [java] \tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:605)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:333)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:307)\n     [java] \tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:645)\n     [java] \tat org.apache.activemq.command.BrokerInfo.<clinit>(BrokerInfo.java:37)\n     [java] \tat org.apache.activemq.openwire.v5.BrokerInfoMarshaller.createObject(BrokerInfoMarshaller.java:55)\n     [java] \tat org.apache.activemq.openwire.OpenWireFormat.doUnmarshal(OpenWireFormat.java:358)\n     [java] \tat org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:276)\n     [java] \tat org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:211)\n     [java] \tat org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:203)\n     [java] \tat org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:186)\n     [java] \tat java.lang.Thread.run(Thread.java:619)\n     [java] \n     [java] \"Low Memory Detector\" daemon prio=10 tid=0x08896c00 nid=0x5540 runnable [0x00000000]\n     [java]    java.lang.Thread.State: RUNNABLE\n     [java] \n     [java] \"CompilerThread1\" daemon prio=10 tid=0x08895000 nid=0x553f waiting on condition [0x00000000]\n     [java]    java.lang.Thread.State: RUNNABLE\n     [java] \n     [java] \"CompilerThread0\" daemon prio=10 tid=0x08893000 nid=0x553e waiting on condition [0x00000000]\n     [java]    java.lang.Thread.State: RUNNABLE\n     [java] \n     [java] \"Signal Dispatcher\" daemon prio=10 tid=0x08891800 nid=0x553d waiting on condition [0x00000000]\n     [java]    java.lang.Thread.State: RUNNABLE\n     [java] \n     [java] \"Finalizer\" daemon prio=10 tid=0x0887cc00 nid=0x553c in Object.wait() [0xa917c000]\n     [java]    java.lang.Thread.State: WAITING (on object monitor)\n     [java] \tat java.lang.Object.wait(Native Method)\n     [java] \t- waiting on <0xb1860b10> (a java.lang.ref.ReferenceQueue$Lock)\n     [java] \tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)\n     [java] \t- locked <0xb1860b10> (a java.lang.ref.ReferenceQueue$Lock)\n     [java] \tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)\n     [java] \tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n     [java] \n     [java] \"Reference Handler\" daemon prio=10 tid=0x0887b400 nid=0x553b in Object.wait() [0xa91cd000]\n     [java]    java.lang.Thread.State: WAITING (on object monitor)\n     [java] \tat java.lang.Object.wait(Native Method)\n     [java] \t- waiting on <0xb1860a18> (a java.lang.ref.Reference$Lock)\n     [java] \tat java.lang.Object.wait(Object.java:485)\n     [java] \tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)\n     [java] \t- locked <0xb1860a18> (a java.lang.ref.Reference$Lock)\n     [java] \n     [java] \"main\" prio=10 tid=0x087fe000 nid=0x5535 waiting on condition [0xb6b56000]\n     [java]    java.lang.Thread.State: WAITING (parking)\n     [java] \tat sun.misc.Unsafe.park(Native Method)\n     [java] \t- parking to wait for  <0xb241a4e8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n     [java] \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n     [java] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)\n     [java] \tat java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:317)\n     [java] \tat org.apache.activemq.transport.FutureResponse.getResult(FutureResponse.java:40)\n     [java] \tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:87)\n     [java] \tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1262)\n     [java] \tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1368)\n     [java] \t- locked <0xb23dad48> (a java.lang.Object)\n     [java] \tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:303)\n     [java] \tat org.apache.activemq.ActiveMQConnection.createTopicSession(ActiveMQConnection.java:1065)\n     [java] \tat org.apache.log4j.net.JMSAppender.activateOptions(JMSAppender.java:217)\n     [java] \tat org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)\n     [java] \tat org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:133)\n     [java] \tat org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:97)\n     [java] \tat org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:689)\n     [java] \tat org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:647)\n     [java] \tat org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:544)\n     [java] \t- locked <0xb1ea1260> (a org.apache.log4j.spi.RootLogger)\n     [java] \tat org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:440)\n     [java] \tat org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:476)\n     [java] \tat org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)\n     [java] \tat org.apache.log4j.LogManager.<clinit>(LogManager.java:125)\n     [java] \tat org.apache.log4j.Logger.getLogger(Logger.java:105)\n     [java] \tat org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:283)\n     [java] \tat org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:108)\n     [java] \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n     [java] \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n     [java] \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n     [java] \tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1040)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:838)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:601)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:333)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:307)\n     [java] \tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:645)\n     [java] \tat org.apache.activemq.ActiveMQPrefetchPolicy.<clinit>(ActiveMQPrefetchPolicy.java:38)\n     [java] \tat org.apache.activemq.ActiveMQConnectionFactory.<init>(ActiveMQConnectionFactory.java:90)\n     [java] \tat org.apache.activemq.ActiveMQConnectionFactory.<init>(ActiveMQConnectionFactory.java:131)\n     [java] \tat Log4jJMSAppenderExample.<init>(Unknown Source)\n     [java] \tat Log4jJMSAppenderExample.main(Unknown Source)\n     [java] \n     [java] \"VM Thread\" prio=10 tid=0x08878c00 nid=0x553a runnable \n     [java] \n     [java] \"GC task thread#0 (ParallelGC)\" prio=10 tid=0x08805000 nid=0x5536 runnable \n     [java] \n     [java] \"GC task thread#1 (ParallelGC)\" prio=10 tid=0x08806800 nid=0x5537 runnable \n     [java] \n     [java] \"VM Periodic Task Thread\" prio=10 tid=0x08898c00 nid=0x5541 waiting on condition \n     [java] \n     [java] JNI global references: 774\n     [java] \n     [java] Heap\n     [java]  PSYoungGen      total 18816K, used 13407K [0xb1860000, 0xb2d50000, 0xb39b0000)\n     [java]   eden space 16192K, 82% used [0xb1860000,0xb2577c88,0xb2830000)\n     [java]   from space 2624K, 0% used [0xb2ac0000,0xb2ac0000,0xb2d50000)\n     [java]   to   space 2624K, 0% used [0xb2830000,0xb2830000,0xb2ac0000)\n     [java]  PSOldGen        total 43008K, used 0K [0xad5b0000, 0xaffb0000, 0xb1860000)\n     [java]   object space 43008K, 0% used [0xad5b0000,0xad5b0000,0xaffb0000)\n     [java]  PSPermGen       total 16384K, used 4430K [0xa95b0000, 0xaa5b0000, 0xad5b0000)\n     [java]   object space 16384K, 27% used [0xa95b0000,0xa9a03b10,0xaa5b0000)\n     [java] \n     [java] log4j:ERROR Error while activating options for appender named [jms].\n     [java] javax.jms.JMSException: Channel was inactive for too long: localhost/127.0.0.1:61616\n     [java] \tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:49)\n     [java] \tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1273)\n     [java] \tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1368)\n     [java] \tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:303)\n     [java] \tat org.apache.activemq.ActiveMQConnection.createTopicSession(ActiveMQConnection.java:1065)\n     [java] \tat org.apache.log4j.net.JMSAppender.activateOptions(JMSAppender.java:217)\n     [java] \tat org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)\n     [java] \tat org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:133)\n     [java] \tat org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:97)\n     [java] \tat org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:689)\n     [java] \tat org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:647)\n     [java] \tat org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:544)\n     [java] \tat org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:440)\n     [java] \tat org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:476)\n     [java] \tat org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)\n     [java] \tat org.apache.log4j.LogManager.<clinit>(LogManager.java:125)\n     [java] \tat org.apache.log4j.Logger.getLogger(Logger.java:105)\n     [java] \tat org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:283)\n     [java] \tat org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:108)\n     [java] \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n     [java] \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n     [java] \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n     [java] \tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1040)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:838)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:601)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:333)\n     [java] \tat org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:307)\n     [java] \tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:645)\n     [java] \tat org.apache.activemq.ActiveMQPrefetchPolicy.<clinit>(ActiveMQPrefetchPolicy.java:38)\n     [java] \tat org.apache.activemq.ActiveMQConnectionFactory.<init>(ActiveMQConnectionFactory.java:90)\n     [java] \tat org.apache.activemq.ActiveMQConnectionFactory.<init>(ActiveMQConnectionFactory.java:131)\n     [java] \tat Log4jJMSAppenderExample.<init>(Unknown Source)\n     [java] \tat Log4jJMSAppenderExample.main(Unknown Source)\n     [java] Caused by: org.apache.activemq.transport.InactivityIOException: Channel was inactive for too long: localhost/127.0.0.1:61616\n     [java] \tat org.apache.activemq.transport.InactivityMonitor$4.run(InactivityMonitor.java:174)\n     [java] \tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n     [java] \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n     [java] \tat java.lang.Thread.run(Thread.java:619)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-23T12:03:12.822+0000","updated":"2010-06-23T12:03:12.822+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2495/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ku1r:"}}