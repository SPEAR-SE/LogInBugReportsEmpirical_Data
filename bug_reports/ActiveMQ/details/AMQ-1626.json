{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481955","self":"https://issues.apache.org/jira/rest/api/2/issue/12481955","key":"AMQ-1626","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2008-03-19T08:09:21.575+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Apr 14 15:59:11 UTC 2008","customfield_12310420":"95846","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2282931077_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2008-04-14T15:59:11.906+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1626/watchers","watchCount":0,"isWatching":false},"created":"2008-03-19T05:50:20.829+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315618","id":"12315618","description":"","name":"5.1.0","archived":false,"released":true,"releaseDate":"2008-05-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-04-14T15:59:11.905+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"when working with jdk1.5 and activemq 5.X. there are problems with memory leaks.\nI use an embedded broker configured in spring 2.0.8.\nI have a client application (producer ) and a server  (consumer) which inside it the broker.\nThe client uses PooledConnectionFactory, creates one connection, 2 sessions (receive and send), and 1 producer. \nthe client connects to 2 queues defined in the broker (configured in spring), and sets the \"reply to\" to a temporary queue.\nThe server receives the messages from the client, does some processing, and returns a reply on the temp q.\neach request is handled by a diiferent temp q. the temp q is deleted once the client receives the responses.\nAll resources are deleted on client side. the server is hanlded by spring. the server responses on the temp queues.\n\nDuring run, i see a few problems (in jconsole)\n1. memory of broker increases gradually and never released\n2. memory of temp queues increases gradually and never released\n3. advisory topic node is created with many objects under it - which seem like with the same ids as some of the temp queue. they accumulate,\nand are never released.\n\nThese leaks prevent me from working,. the activemq will stop working after a few hours due to 100%memory consumption.\n\n\n\nThere are also memory leaks concerning temp queues usage. \nI tried creating one connection on client or using a pool of connections but nothing helped. \nIt looks like some memory leak on the temp queues.\n\nDo you have a work around for these problems, when will there be fixes for these problems? \n\nIf i will use a static queues, will all the leaks in the broker be solved? \n\nIf i create a new connection for each request process, should this solve the problem?  (checked - does not work)\n\nI attached the client (producer) code and the server (consumer)\n\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461026","id":"12461026","filename":"ASF.LICENSE.NOT.GRANTED--ClientExecuterController.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michal+singer","name":"michal singer","key":"michal singer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michal Singer","active":true,"timeZone":"Etc/UTC"},"created":"2008-03-19T05:50:20.833+0000","size":11134,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461026/ASF.LICENSE.NOT.GRANTED--ClientExecuterController.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460962","id":"12460962","filename":"ASF.LICENSE.NOT.GRANTED--JmsListener.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michal+singer","name":"michal singer","key":"michal singer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michal Singer","active":true,"timeZone":"Etc/UTC"},"created":"2008-03-19T05:50:20.835+0000","size":12231,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460962/ASF.LICENSE.NOT.GRANTED--JmsListener.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460975","id":"12460975","filename":"ASF.LICENSE.NOT.GRANTED--JmsResponseSender.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michal+singer","name":"michal singer","key":"michal singer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michal Singer","active":true,"timeZone":"Etc/UTC"},"created":"2008-03-19T05:50:20.836+0000","size":1650,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460975/ASF.LICENSE.NOT.GRANTED--JmsResponseSender.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"235602","customfield_12312823":null,"summary":"Active MQ version 5.X - java 5 - memory leaks ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michal+singer","name":"michal singer","key":"michal singer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michal Singer","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michal+singer","name":"michal singer","key":"michal singer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michal Singer","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481955/comment/12939388","id":"12939388","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=motit","name":"motit","key":"motit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Moti Tal","active":true,"timeZone":"Etc/UTC"},"body":"What does it mean?\nActiveMQ 5.x can't work with JDK 5 at all, as for memory leaks?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=motit","name":"motit","key":"motit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Moti Tal","active":true,"timeZone":"Etc/UTC"},"created":"2008-03-19T08:09:21.575+0000","updated":"2008-03-19T08:09:21.575+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481955/comment/12939482","id":"12939482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"Does this happen with Spring 2.5 ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2008-04-07T16:04:12.730+0000","updated":"2008-04-07T16:04:12.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481955/comment/12939421","id":"12939421","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michal+singer","name":"michal singer","key":"michal singer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michal Singer","active":true,"timeZone":"Etc/UTC"},"body":"I don't know. i use spring 2.0.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michal+singer","name":"michal singer","key":"michal singer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michal Singer","active":true,"timeZone":"Etc/UTC"},"created":"2008-04-08T04:55:45.833+0000","updated":"2008-04-08T04:55:45.833+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481955/comment/12939501","id":"12939501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"Duplicate of https://issues.apache.org/activemq/browse/AMQ-1255","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2008-04-14T15:59:11.866+0000","updated":"2008-04-14T15:59:11.866+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1626/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i14pjb:"}}