{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483709","self":"https://issues.apache.org/jira/rest/api/2/issue/12483709","key":"AMQ-2225","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2009-09-09T10:52:32.322+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jul 05 08:01:21 UTC 2011","customfield_12310420":"69159","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_69065913960_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-02T19:15:22.221+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2225/watchers","watchCount":2,"isWatching":false},"created":"2009-04-24T10:16:48.285+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315619","id":"12315619","description":"","name":"5.2.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-05T08:01:21.872+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"When multiple connections are obtained from PooledConnectionFactory and ExceptionListeners are set for them only one ExceptionListener will be notified about connection problems. Issue is caused by overwriting listeners in shared connection.\n\nTest case based on http://svn.apache.org/viewvc/activemq/trunk/activemq-pool/src/test/java/org/apache/activemq/pool/PooledTopicPublisherTest.java?view=markup\n\npublic void testSetGetExceptionListener2() throws Exception {\n        PooledConnectionFactory pcf = new PooledConnectionFactory();\n        pcf.setConnectionFactory(new ActiveMQConnectionFactory(\"vm://test\"));\n\n        TopicConnection conn1 = (TopicConnection) pcf.createConnection();\n        ExceptionListener list1 = new ExceptionListener() {\n            public void onException(JMSException exception) {\n            }\n        };\n        conn1.setExceptionListener(list1);\n\n        TopicConnection conn2 = (TopicConnection) pcf.createConnection();\n        ExceptionListener list2 = new ExceptionListener() {\n            public void onException(JMSException exception) {\n            }\n        };\n        conn2.setExceptionListener(list2);\n\n        assertEquals(list1, conn1.getExceptionListener());//this assertion will fail\n        assertEquals(list2, conn2.getExceptionListener());//this assertion will pass\n\n        assertEquals(list2, conn1.getExceptionListener());// THE PROBLEM - this will pass\n} ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172455","customfield_12312823":null,"summary":"PooledConnection obtaind from PooledConnectionFactory overwrites ExceptionListener","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zieluuuu","name":"zieluuuu","key":"zieluuuu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukasz Zielinski","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zieluuuu","name":"zieluuuu","key":"zieluuuu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukasz Zielinski","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483709/comment/12941055","id":"12941055","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"body":"You can either ensure that connections are not shared by using a different userName when creating the connection - or set the same exception listener to all connections","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"created":"2009-09-09T10:52:32.322+0000","updated":"2009-09-09T10:52:32.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483709/comment/12941078","id":"12941078","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zieluuuu","name":"zieluuuu","key":"zieluuuu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukasz Zielinski","active":true,"timeZone":"Etc/UTC"},"body":"So as I understand client code using PooledConnectionFactory (PCF) by means of ConnectionFactory interface must be aware that PCF is involved. Nice.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zieluuuu","name":"zieluuuu","key":"zieluuuu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukasz Zielinski","active":true,"timeZone":"Etc/UTC"},"created":"2009-09-09T12:01:18.655+0000","updated":"2009-09-09T12:03:23.155+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483709/comment/13059105","id":"13059105","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"The code is working as it should, the PooledConnectionFactory returns the same PooledConnection for the same username / password combo so settings exception listeners on one of the two PooledConnection's created with the same username and password would have to overwrite the other since they are in fact the same object.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-07-02T19:15:22.229+0000","updated":"2011-07-02T19:15:22.229+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483709/comment/13059711","id":"13059711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zieluuuu","name":"zieluuuu","key":"zieluuuu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukasz Zielinski","active":true,"timeZone":"Etc/UTC"},"body":"Issue here is that regular CF and PCF can not be used interchangeably when ExceptionListeners are involved.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zieluuuu","name":"zieluuuu","key":"zieluuuu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lukasz Zielinski","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-05T08:01:21.789+0000","updated":"2011-07-05T08:01:21.789+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2225/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tvrj:"}}