{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12555923","self":"https://issues.apache.org/jira/rest/api/2/issue/12555923","key":"AMQ-3842","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2012-05-17T12:58:45.707+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri May 18 22:06:37 UTC 2012","customfield_12310420":"293159","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_482240637_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-05-21T12:55:04.141+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3842/watchers","watchCount":3,"isWatching":false},"created":"2012-05-15T22:57:43.622+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"labels":["discovery"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317974","id":"12317974","description":"Next v5 maintenance release","name":"5.6.0","archived":false,"released":true,"releaseDate":"2012-05-07"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-05-21T12:55:04.228+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313900","id":"12313900","name":"Test Cases"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10092","value":"Unit Test Broken","id":"10092"}],"description":"Many test units are failing on boxes with NAT firewalls enabled, although discovery via loopback device would (IMHO) be sufficient for test units.\n\nMy NAT setup allows all traffic via lo, but only related traffic via eth0 etc., which should be the regular fw security setup on most or many end-user boxes.\n\nThe test org.apache.activemq.transport.discovery.DiscoveryTransportNoBrokerTest (for example) makes activemq send out discovery messages via eth0, which is probably not a perfect solution if one wants to have portable test units (and also produces spam packets on the local network during testing :-)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"166416","customfield_12312823":null,"summary":"test units should run discovery mechanism via loopback device","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnfm7avr","name":"rnfm7avr","key":"rnfm7avr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnfm7avr","name":"rnfm7avr","key":"rnfm7avr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"NAT FW","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12555923/comment/13277775","id":"13277775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Which tests are actually hanging?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-05-17T12:58:45.707+0000","updated":"2012-05-17T12:58:45.707+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12555923/comment/13278015","id":"13278015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnfm7avr","name":"rnfm7avr","key":"rnfm7avr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark","active":true,"timeZone":"Etc/UTC"},"body":"current trunk:\n\nmvn test -V -B -U -Dtest=DiscoveryTransportNoBrokerTest\n\ntail -F /home/mark/tmp/activemq/activemq-core/target/activemq-test.log :\n\n2012-05-17 19:46:20,350 [JMX connector  ] - INFO  ManagementContext              - JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi\n2012-05-17 19:46:20,380 [main           ] - INFO  PListStore                     - PListStore:[/home/mark/tmp/activemq/activemq-core/target/activemq-data/localhost/tmp_storage ] started\n2012-05-17 19:46:20,382 [main           ] - INFO  BrokerService                  - Using Persistence Adapter: KahaDBPersistenceAdapter[/home/mark/tmp/activemq/activemq-core/target/activemq-data/localhost/KahaDB]\n2012-05-17 19:46:20,708 [main           ] - INFO  MessageDatabase                - KahaDB is version 4\n2012-05-17 19:46:20,726 [main           ] - INFO  MessageDatabase                - Recovering from the journal ...\n2012-05-17 19:46:20,726 [main           ] - INFO  MessageDatabase                - Recovery replayed 1 operations from the journal in 0.008 seconds.\n2012-05-17 19:46:20,733 [main           ] - INFO  BrokerService                  - ActiveMQ null JMS Message Broker (localhost) is starting\n2012-05-17 19:46:20,733 [main           ] - INFO  BrokerService                  - For help or more information please see: http://activemq.apache.org/\n2012-05-17 19:46:20,878 [main           ] - INFO  TransportServerThreadSupport   - Listening for connections at: tcp://localhost:36299?transport.closeAsync=false\n2012-05-17 19:46:20,881 [main           ] - INFO  TransportConnector             - Connector tcp://localhost:36299?transport.closeAsync=false Started\n2012-05-17 19:46:20,882 [main           ] - INFO  BrokerService                  - ActiveMQ JMS Message Broker (localhost, ID:i5-34740-1337276780746-0:1) started\n2012-05-17 19:46:20,883 [main           ] - WARN  BrokerService                  - Store limit is 100000 mb, whilst the data directory: /home/mark/tmp/activemq/activemq-core/target/activemq-data/localhost/KahaDB only has 39120 mb of usable space\n2012-05-17 19:46:20,883 [main           ] - ERROR BrokerService                  - Temporary Store limit is 50000 mb, whilst the temporary data directory: /home/mark/tmp/activemq/activemq-core/target/activemq-data/localhost/tmp_storage only has 39120 mb of usable space\n2012-05-17 19:46:20,883 [main           ] - INFO  DiscoveryTransportNoBrokerTest - Broker started - thread Count:8\n2012-05-17 19:46:20,883 [main           ] - INFO  DiscoveryTransportNoBrokerTest - Connecting.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnfm7avr","name":"rnfm7avr","key":"rnfm7avr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-17T17:49:19.258+0000","updated":"2012-05-17T17:49:19.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12555923/comment/13279132","id":"13279132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"The error messages simply point out that the configuration could lead to issues.  The tests themselves don't really need 50gig.  Why its hanging probably doesn't have any relation to the error especially for the test case shown.  You could easily validate this by changing the test to reduce the configured min space requirement and see if it still hangs.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-05-18T20:00:47.981+0000","updated":"2012-05-18T20:00:47.981+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12555923/comment/13279187","id":"13279187","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnfm7avr","name":"rnfm7avr","key":"rnfm7avr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark","active":true,"timeZone":"Etc/UTC"},"body":"You are correct. Changed topic and description.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rnfm7avr","name":"rnfm7avr","key":"rnfm7avr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-18T21:11:12.205+0000","updated":"2012-05-18T21:11:12.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12555923/comment/13279248","id":"13279248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"The tests aren't really designed to be portable, they are designed to test the various use cases of the Broker.  You may need to make accommodations on your specific machine to allow all tests to run.  I've added autofail to the test case you mentioned which should prevent the hang, it will still fail of course. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-05-18T22:06:37.382+0000","updated":"2012-05-18T22:06:37.382+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3842/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0suhj:"}}