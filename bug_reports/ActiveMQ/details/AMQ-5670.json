{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12782572","self":"https://issues.apache.org/jira/rest/api/2/issue/12782572","key":"AMQ-5670","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316331","id":"12316331","description":"Next unplanned v5 maintenance release","name":"5.x","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2015-12-23T15:19:01.729+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 23 15:19:01 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_24281880054_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-12-23T15:19:01.675+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5670/watchers","watchCount":2,"isWatching":false},"created":"2015-03-17T14:21:01.686+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324950","id":"12324950","name":"5.10.0","archived":false,"released":true,"releaseDate":"2014-06-10"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-12-23T15:19:01.738+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12325017","id":"12325017","name":"KahaDB"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Dear Support,\n\nWe are having KHADB on a shared DFS storage connected to a two nodes as master slave AMQ approach. The system was running for about two weeks and suddenly it stopped as shown below in the logs, please give me your recommendations.\n\nNODE1:\nINFO   | jvm 1    | 2015/03/04 12:54:11 |  INFO | Database \\\\qatch-fs\\AMQ_Data_PRO\\data\\kahadb\\lock is locked... waiting 10 seconds for the database to be unlocked. Reason: java.io.IOException: File '\\\\qatch-fs\\AMQ_Data_PRO\\data\\kahadb\\lock' could not be locked.\nINFO   | jvm 1    | 2015/03/04 12:54:36 |  WARN | Index corrupted. Recovering the index through journal replay. Cause:java.io.IOException: The requested resource is in use\nINFO   | jvm 1    | 2015/03/04 12:54:36 | ERROR | Failed to start Apache ActiveMQ ([CenBroker, null], java.io.IOException: Could not delete: \\\\qatch-fs\\AMQ_Data_PRO\\data\\kahadb\\CEN\\kahadb\\DLQ\\queue#3a#2f#2fDLQ.#3e\\db.data)\nINFO   | jvm 1    | 2015/03/04 12:54:36 |  INFO | Apache ActiveMQ 5.10.0 (CenBroker, null) is shutting down\nINFO   | jvm 1    | 2015/03/04 12:54:36 |  INFO | Connector openwire stopped\nINFO   | jvm 1    | 2015/03/04 12:54:36 |  INFO | PListStore:[\\\\HQ-QTCM1\\data\\CenBroker\\tmp_storage] stopped\nINFO   | jvm 1    | 2015/03/04 12:54:36 |  INFO | Stopping async queue tasks\nINFO   | jvm 1    | 2015/03/04 12:54:36 |  INFO | Stopping async topic tasks\nINFO   | jvm 1    | 2015/03/04 12:54:36 |  INFO | Stopped KahaDB\nINFO   | jvm 1    | 2015/03/04 12:54:36 | ERROR | Could not stop service: KahaDB:[\\\\qatch-fs\\AMQ_Data_PRO\\data\\kahadb\\CEN\\kahadb\\DLQ\\queue#3a#2f#2fDLQ.#3e]. Reason: java.lang.IllegalStateException: Cannot unload the page file when it is not loaded\nINFO   | jvm 1    | 2015/03/04 12:54:36 | java.lang.IllegalStateException: Cannot unload the page file when it is not loaded\nINFO   | jvm 1    | 2015/03/04 12:54:36 | \nat org.apache.activemq.store.kahadb.disk.page.PageFile.unload(PageFile.java:484)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:36 | \nat org.apache.activemq.store.kahadb.MessageDatabase.close(MessageDatabase.java:432)[activemq-kahadb-store-5.10.0.jar:5.10.0]\n\nNode2:\nINFO   | jvm 1    | 2015/03/04 12:54:07 | ERROR | Checkpoint failed\nINFO   | jvm 1    | 2015/03/04 12:54:07 | java.io.IOException: The requested resource is in use\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat sun.nio.ch.FileDispatcherImpl.force0(Native Method)[:1.7.0_71]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat sun.nio.ch.FileDispatcherImpl.force(Unknown Source)[:1.7.0_71]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat sun.nio.ch.FileChannelImpl.force(Unknown Source)[:1.7.0_71]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.util.RecoverableRandomAccessFile.sync(RecoverableRandomAccessFile.java:402)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.store.kahadb.disk.page.PageFile.writeBatch(PageFile.java:1094)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.store.kahadb.disk.page.PageFile.flush(PageFile.java:516)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.store.kahadb.MessageDatabase.checkpointUpdate(MessageDatabase.java:1512)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.store.kahadb.MessageDatabase$17.execute(MessageDatabase.java:1484)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.store.kahadb.disk.page.Transaction.execute(Transaction.java:779)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.store.kahadb.MessageDatabase.checkpointUpdate(MessageDatabase.java:1481)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.store.kahadb.MessageDatabase.checkpointCleanup(MessageDatabase.java:929)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 | \nat org.apache.activemq.store.kahadb.MessageDatabase$3.run(MessageDatabase.java:357)[activemq-kahadb-store-5.10.0.jar:5.10.0]\nINFO   | jvm 1    | 2015/03/04 12:54:07 |  INFO | Stopping BrokerService[CenBroker] due to exception, java.io.IOException: The requested resource is in use\n\n\nBest Regadrs,\nBotros Kfoury\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"AMQ issue","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Botros","name":"Botros","key":"botros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Botros Kfoury","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Botros","name":"Botros","key":"botros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Botros Kfoury","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12782572/comment/15069735","id":"15069735","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Not test case or additional information useful for investigation provided.  This would be a good thing to take to the users list for some help with the configuration.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2015-12-23T15:19:01.729+0000","updated":"2015-12-23T15:19:01.729+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5670/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i26v9r:"}}