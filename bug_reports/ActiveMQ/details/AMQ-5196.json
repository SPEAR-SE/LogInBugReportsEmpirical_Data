{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12715635","self":"https://issues.apache.org/jira/rest/api/2/issue/12715635","key":"AMQ-5196","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 20 23:11:43 UTC 2014","customfield_12310420":"393920","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5196/watchers","watchCount":2,"isWatching":false},"created":"2014-05-20T22:53:47.190+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323932","id":"12323932","name":"5.9.0","archived":false,"released":true,"releaseDate":"2013-10-21"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-05-21T22:34:58.497+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313895","id":"12313895","name":"Message Store"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I'm not sure if I can reproduce it, but it's important for me to report.  We have a master/slave setup sharing the kahaDB store on a distributed network drive.  The running master encountered some intermittent  network issue for ten minutes or so, and finally invoked my DefaultIOExceptionHandler, which shut down the JVM.  The slave took over and started up.  All remote consumers reconnected to the slave node via the failover protocol.  However, the slave node repeatedly complained about \"Could not load journal record. Invalid location\".  All consumers were idle and didn't process any messages.  Logs from both nodes are attached.\n\nWe're running ActiveMQ 5.9.0.  I copied over the kabadb folder to the latest ActiveMQ 5.9.1 where I also set ignoreMissingJournalfiles=\"true\" checksumJournalFiles=\"true\" checkForCorruptJournalFiles=\"true\".  It started up with the same error.  It indicated to me that 5.9.1 cannot recover from the corrupted store either.\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12645901","id":"12645901","filename":"masterNode.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-20T22:55:09.790+0000","size":21162,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12645901/masterNode.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12645902","id":"12645902","filename":"slaveNode.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-20T22:55:09.795+0000","size":22016,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12645902/slaveNode.log"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"394060","customfield_12312823":null,"summary":"Corrupted Kahadb store after failover: \"Could not load journal record. Invalid location\"","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows 7.\n\n<persistenceAdapter>\n    <kahaDB directory=\"\\\\some.network.lan\\amq\" ignoreMissingJournalfiles=\"true\" checksumJournalFiles=\"true\" checkForCorruptJournalFiles=\"true\"/>\n</persistenceAdapter>","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12715635/comment/14004106","id":"14004106","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"body":"If you need my kahaDB folder from our master node to debug, I'd be glad to give you a copy.  It's 11GB big.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-20T23:11:43.641+0000","updated":"2014-05-21T22:34:58.488+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5196/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1vtrj:"}}