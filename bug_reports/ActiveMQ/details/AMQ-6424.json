{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13003795","self":"https://issues.apache.org/jira/rest/api/2/issue/13003795","key":"AMQ-6424","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-12-29T12:43:00.819+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 08 23:36:30 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6424/watchers","watchCount":6,"isWatching":false},"created":"2016-09-09T09:13:05.184+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["database","journal","mssql","paging"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329848","id":"12329848","name":"5.13.0","archived":false,"released":true,"releaseDate":"2015-12-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335045","id":"12335045","name":"5.13.3","archived":false,"released":true,"releaseDate":"2016-05-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12334188","id":"12334188","name":"5.14.0","archived":false,"released":true,"releaseDate":"2016-08-05"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-03-08T23:36:30.082+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12325017","id":"12325017","name":"KahaDB"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"In version 5.14 (and 5.13.3) it appears the broker is able to 'occasionally' create extra DLQ-queues holding duplicate messages. \nBrowsing the admin console, you will sometimes see something like this: \n\n- DLQ.myEventQueue \n- DLQ.DLQ.myEventQueue \n\nThat both hold the samme message ID, eg. ID:ClientABC-61753-1471513949441-1:4:1:3:1\t\n\nThe one from DLQ.myEventQueue is a standard entry caused by a client transaction rollback. \nThe (unwanted) one from DLQ.DLQ.myEventQueue has a \n- dlqDeliveryFailureCause: java.lang.Throwable: duplicate paged in from store for queue://DLQ.myEventQueue\n\nAt some point you can even get a third queue named \n- DLQ.DLQ.DLQ.myEventQueue holding another message with the samme MessageID and the same dlqDeliveryFailureCause \n\nReproduce: Haven't found a way to provoke the error. It happens occasionally in a semi-active test environment running with Mule 3.6.2. \nBest guess is that there is some issue with the use of Journaling and synchronization between Kahadb and the MSSQL-database. \n\nConfiguration can be found at \nhttp://activemq.2283324.n4.nabble.com/file/n4715868/activemq-anonymous.xml\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Duplicate dead letter queues","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=berges%40mesan.no","name":"berges@mesan.no","key":"berges@mesan.no","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Berge Stillingen","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=berges%40mesan.no","name":"berges@mesan.no","key":"berges@mesan.no","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Berge Stillingen","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"JDK 1.8.0_93 , Windows Server 2012 R2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003795/comment/15496213","id":"15496213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=berges%40mesan.no","name":"berges@mesan.no","key":"berges@mesan.no","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Berge Stillingen","active":true,"timeZone":"Etc/UTC"},"body":"Note: A co-worker of mine experienced the same problem with version 5.13.0  - using default persistence configuration (Kahadb). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=berges%40mesan.no","name":"berges@mesan.no","key":"berges@mesan.no","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Berge Stillingen","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-16T12:29:34.034+0000","updated":"2016-09-16T12:29:34.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003795/comment/15785254","id":"15785254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Wildpipe","name":"Wildpipe","key":"wildpipe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Brodén","active":true,"timeZone":"Etc/UTC"},"body":"I just encountered this issue running Red Hat JBoss A-MQ 6.3.0 both in production and test environment.\nDuring our last test run I saw as many as 24 levels of DLQ! We are running on RHEL 6.8 with a customized kahadb configuration. \nI am unable to reliably reproduce the issue unfortunately.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Wildpipe","name":"Wildpipe","key":"wildpipe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Brodén","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-29T12:43:00.819+0000","updated":"2016-12-29T12:43:00.819+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003795/comment/15820885","id":"15820885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"as a possible workaround you could provide a \"discarding\" dead letter strategy for queues of the form \"DLQ.>\" , which would ensure that duplicates from DLQs don't result in further nested DLQ creation.\nGetting to the root cause and fixing would need some sort of test to speed up the investigation","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-12T12:26:32.908+0000","updated":"2017-01-12T12:27:04.800+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003795/comment/16226499","id":"16226499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tholu","name":"tholu","key":"tholu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tholu&avatarId=33429","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tholu&avatarId=33429","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tholu&avatarId=33429","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tholu&avatarId=33429"},"displayName":"Thomas Lutz","active":true,"timeZone":"Europe/Berlin"},"body":"Same problem here, however no reliable test case to reproduce the issue (yet).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tholu","name":"tholu","key":"tholu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tholu&avatarId=33429","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tholu&avatarId=33429","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tholu&avatarId=33429","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tholu&avatarId=33429"},"displayName":"Thomas Lutz","active":true,"timeZone":"Europe/Berlin"},"created":"2017-10-31T09:24:30.714+0000","updated":"2017-10-31T09:24:30.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003795/comment/16392114","id":"16392114","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeannine_lee","name":"jeannine_lee","key":"jeannine_lee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeannine_lee&avatarId=34810","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeannine_lee&avatarId=34810","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeannine_lee&avatarId=34810","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeannine_lee&avatarId=34810"},"displayName":"Jeannine Lee","active":true,"timeZone":"Etc/UTC"},"body":"This has been a very painful problem for us - we are on version 5.9.0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeannine_lee","name":"jeannine_lee","key":"jeannine_lee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeannine_lee&avatarId=34810","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeannine_lee&avatarId=34810","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeannine_lee&avatarId=34810","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeannine_lee&avatarId=34810"},"displayName":"Jeannine Lee","active":true,"timeZone":"Etc/UTC"},"created":"2018-03-08T23:36:30.082+0000","updated":"2018-03-08T23:36:30.082+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6424/votes","votes":4,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i33fkv:"}}