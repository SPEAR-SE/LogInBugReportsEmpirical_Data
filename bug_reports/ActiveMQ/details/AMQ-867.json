{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482352","self":"https://issues.apache.org/jira/rest/api/2/issue/12482352","key":"AMQ-867","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315618","id":"12315618","description":"","name":"5.1.0","archived":false,"released":true,"releaseDate":"2008-05-06"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-08-16T14:01:26.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Aug 17 14:22:00 UTC 2006","customfield_12310420":"84392","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_52795390312_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2008-04-09T18:36:55.312+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-867/watchers","watchCount":0,"isWatching":false},"created":"2006-08-07T17:13:45.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315611","id":"12315611","description":"","name":"4.0.1","archived":false,"released":true,"releaseDate":"2006-06-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315612","id":"12315612","description":"","name":"4.0.2","archived":false,"released":true,"releaseDate":"2006-07-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajdavies","name":"rajdavies","key":"rajdavies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajdavies&avatarId=13942","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajdavies&avatarId=13942","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajdavies&avatarId=13942","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajdavies&avatarId=13942"},"displayName":"Rob Davies","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-04-09T18:36:55.300+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Starting in 4.0.1 and continuing in a snapshot 4.0.2 release, the ActiveMQ JMX management console is not working as advertised.  In version 4.0, I would see the following message logged to the console when starting activemq:\n\nINFO  ManagementContext              - JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi\n\nIn Version 4.0.1 and higher, I no longer see this message.\n\nWhen trying to connect to the broker using the jconsole program, in versions 4.0.1 and higher, the following command does not work (get \"Connection failed\" message).\n\njconsole service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi\n\nHowever, in 4.0, it does work.\n\nWith 4.0.1 and higher, I am able to execute jconsole with no arguments and pick the activemq jvm from the dialog that pops up and access the managment mbeans just fine.\n\nA symptom of this problem in 4.0.1 and higher is that none of the command line tools in the bin directory work.  Here is sample output:\n\ndoug@nuk:~/tools/activemq/incubator-activemq-4.0.2/bin$ ./shutdown\nACTIVEMQ_HOME: /home/doug/tools/activemq/incubator-activemq-4.0.2\nERROR: java.lang.RuntimeException: Failed to execute stop task. Reason: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is:\n        java.net.ConnectException: Connection refused]\nERROR: java.lang.Exception: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is:\n        java.net.ConnectException: Connection refused]\n\nWith 4.0, all command line tools work as expected.\n\nNot sure what is going on here, but something changed in versions 4.0.1 and above.\n\nOne last note: in 4.0.1 and higher, I uncommented the managementContext tag in the activemq.xml file, but that had no effect.  The problem remained as described here.\n\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"254852","customfield_12312823":null,"summary":"JMX Management Console Not Working As Documented","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=seifertd","name":"seifertd","key":"seifertd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Seifert","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=seifertd","name":"seifertd","key":"seifertd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Seifert","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux nuk 2.6.15-23-amd64-generic #1 SMP PREEMPT Tue May 23 13:45:47 UTC 2006 x86_64 GNU/Linux","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482352/comment/12938297","id":"12938297","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oliver_f","name":"oliver_f","key":"oliver_f","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oliver Flege","active":true,"timeZone":"Etc/UTC"},"body":"I had the same problem; my workaround is to remove the line\nSUNJMX=\"-Dcom.sun.management.jmxremote\"\n\nfrom the activemq script","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oliver_f","name":"oliver_f","key":"oliver_f","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oliver Flege","active":true,"timeZone":"Etc/UTC"},"created":"2006-08-16T14:01:26.000+0000","updated":"2006-08-16T14:01:26.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482352/comment/12938256","id":"12938256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=seifertd","name":"seifertd","key":"seifertd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Seifert","active":true,"timeZone":"Etc/UTC"},"body":"Willing to close this as the workaround works.  The shutdown (and others) script works as well, but if you change the JMX port in the activemq xml configuration file, you need to use the --jmxurl service:jmx:rmi:///jndi/rmi://localhost:NEWPORT/jmxrmi arguments to all scripts.  Would be nice if the scripts could figure this out from the xml configuration.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=seifertd","name":"seifertd","key":"seifertd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Doug Seifert","active":true,"timeZone":"Etc/UTC"},"created":"2006-08-17T14:22:00.000+0000","updated":"2006-08-17T14:22:00.000+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-867/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i180b3:"}}