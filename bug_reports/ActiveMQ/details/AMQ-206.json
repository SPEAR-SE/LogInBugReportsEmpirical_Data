{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481079","self":"https://issues.apache.org/jira/rest/api/2/issue/12481079","key":"AMQ-206","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315601","id":"12315601","name":"3.1","archived":false,"released":true}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2005-03-30T00:34:17.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jul 07 17:15:05 UTC 2005","customfield_12310420":"48933","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_10739184000_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2005-07-07T17:15:05.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-206/watchers","watchCount":4,"isWatching":false},"created":"2005-03-05T10:08:41.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315599","id":"12315599","name":"2.1","archived":false,"released":true}],"issuelinks":[{"id":"12334930","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334930","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12481062","key":"AMQ-220","self":"https://issues.apache.org/jira/rest/api/2/issue/12481062","fields":{"summary":"abstract Spring beans and JCAContainer","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2005-07-07T17:18:31.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313898","id":"12313898","name":"JCA Container"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We have beans defined that are abstract and cannot be instantiated.  \n\nJCAContainer attempts to instantiate all beans with:\n\n            for (int i = 0; i < names.length; i++) {\n                // TODO one day we could be smart to only pre-load the correct\n                // types of bean, based on the definitions?\n                String name = names[i];\n                beanFactory.getBean(name);\n            }\n\nResult is a BeanIsAbstractException:\n\norg.springframework.beans.factory.BeanIsAbstractException: Error creating bean with name 'baseXlParser': Bean definition is abstract\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.checkMergedBeanDefinition(AbstractBeanFactory.java:653)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:145)\n\tat org.codehaus.activemq.jca.JCAContainer.afterPropertiesSet(JCAContainer.java:77)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1065)\n\nPerhaps something like:\n\n      } else if (!lazyLoad && beanFactory instanceof BeanDefinitionRegistry) {\n         BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;\n         String[] names = registry.getBeanDefinitionNames();\n         for (int i = 0; i < names.length; i++) {\n            String name = names[i];\n            BeanDefinition definition = registry.getBeanDefinition(name);\n            if (!definition.isAbstract())\n               beanFactory.getBean(name);\n         }\n      }\n\nThe TO-DO in the code is well stated, what logic can be implemented to selectively get the necesssay beans?  The end result is that lazy-init singletons will be instantiated as well, perhaps without cause.\n\nAlso, I believe the code should use BeanFactoryUtils.beanNamesIncludingAncestors(ListableBeanFactory) to account for a potential hierarchy.\n\nNote I found reference to this exact issue in the Spring Forum (http://forum.springframework.org/viewtopic.php?t=3064) but was unable to find an existing jira issue.\n\nThanks,\n\nAndrew\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460722","id":"12460722","filename":"ASF.LICENSE.NOT.GRANTED--JCAConnector.java.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pburleson","name":"pburleson","key":"pburleson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Burleson","active":true,"timeZone":"Etc/UTC"},"created":"2005-06-30T19:44:23.000+0000","size":1968,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460722/ASF.LICENSE.NOT.GRANTED--JCAConnector.java.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161861","customfield_12312823":null,"summary":"JCAContainer fails to check if beans are abstract before calling beanFactory.getBean()","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=awertkin","name":"awertkin","key":"awertkin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wertkin","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=awertkin","name":"awertkin","key":"awertkin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Wertkin","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481079/comment/12936757","id":"12936757","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mperham","name":"mperham","key":"mperham","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Perham","active":true,"timeZone":"Etc/UTC"},"body":"See also AMQ-220\n\nAnother (hackish) solution: what about simply listing the names of the connectors associated with this container?\n\n<bean id=\"activeMQContainer\" ...>\n  <property name=\"connectorBeanList\">\n    <list>\n      <idref local=\"connectorA\"/>\n      <idref local=\"connectorB\"/>\n    </list>\n  </property>\n  ...\n</bean>\n\nThe container could then perform an explicit getBean(String) on each value in the list.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mperham","name":"mperham","key":"mperham","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Perham","active":true,"timeZone":"Etc/UTC"},"created":"2005-03-30T00:34:17.000+0000","updated":"2005-03-30T00:34:17.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481079/comment/12936184","id":"12936184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pburleson","name":"pburleson","key":"pburleson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Burleson","active":true,"timeZone":"Etc/UTC"},"body":"Posted this on AMQ-220 as well:\n\nThis is wrecking havoc with our setup as well. ActiveMQ should be much smarter about how it interacts with the bean factory. Abstract beans are very useful for defining common attributes that other beans use as a \"parent\".\n\nI'm still trying to understand the need to initialize all the beans in the factory? What's the purpose?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pburleson","name":"pburleson","key":"pburleson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Burleson","active":true,"timeZone":"Etc/UTC"},"created":"2005-06-30T02:32:24.000+0000","updated":"2005-06-30T02:32:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481079/comment/12936935","id":"12936935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pburleson","name":"pburleson","key":"pburleson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Burleson","active":true,"timeZone":"Etc/UTC"},"body":"I don't think Mike's suggestion is too much of a hack. It's how I would configure most beans to work. It's better, at least to me, to see it all wired up in one place.\n\nI think I'm going to checkout from SVN and take a look at creating a patch to create this behavior. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pburleson","name":"pburleson","key":"pburleson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Burleson","active":true,"timeZone":"Etc/UTC"},"created":"2005-06-30T02:33:47.000+0000","updated":"2005-06-30T02:33:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481079/comment/12936204","id":"12936204","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pburleson","name":"pburleson","key":"pburleson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Burleson","active":true,"timeZone":"Etc/UTC"},"body":"A patch to implement Andrew's idea of how to fix this. \n\nIt allows my Spring Context to deploy just fine and the ActiveMQ stuff works as well. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pburleson","name":"pburleson","key":"pburleson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Burleson","active":true,"timeZone":"Etc/UTC"},"created":"2005-06-30T19:44:23.000+0000","updated":"2005-06-30T19:44:23.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481079/comment/12936739","id":"12936739","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"Many thanks for the patch Patrick - applied now!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2005-07-07T17:15:05.000+0000","updated":"2005-07-07T17:15:05.000+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-206/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s2dj:"}}