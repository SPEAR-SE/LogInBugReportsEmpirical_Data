{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12963433","self":"https://issues.apache.org/jira/rest/api/2/issue/12963433","key":"AMQ-6268","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2016-04-28T13:48:45.486+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 28 19:01:02 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_36467532231_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-06-24T11:26:14.981+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6268/watchers","watchCount":5,"isWatching":false},"created":"2016-04-28T09:34:02.841+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334774","id":"12334774","name":"5.13.2","archived":false,"released":true,"releaseDate":"2016-03-04"}],"issuelinks":[{"id":"12507480","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12507480","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"13042534","key":"AMQ-6597","self":"https://issues.apache.org/jira/rest/api/2/issue/13042534","fields":{"summary":"activemq-camel does not work together with camel 2.18","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12465141","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12465141","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12957736","key":"AMQ-6241","self":"https://issues.apache.org/jira/rest/api/2/issue/12957736","fields":{"summary":"Installing camel-core in Karaf prevents activemq-camel from deploying successfully","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12465142","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12465142","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12956516","key":"AMQ-6230","self":"https://issues.apache.org/jira/rest/api/2/issue/12956516","fields":{"summary":"Camel 2.17.0 breaks Karaf integration tests","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-06-24T11:26:15.014+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12315705","id":"12315705","name":"activemq-camel","description":"camel activemq component"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"On karaf 4.x plateform, with camel 2.17.0 and activemq 5.13.2 features, installs feature activemq-camel and then installs activemq-broker-noweb. The broker fails to start with error java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler not found by org.apache.activemq.activemq-osgi.\nThis is not happening with camel 2.16.3\nThis is not happening either if activemq-camel is not installed.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"activemq broker cannot start","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acartapanis","name":"acartapanis","key":"acartapanis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexandre Cartapanis","active":true,"timeZone":"Europe/Paris"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acartapanis","name":"acartapanis","key":"acartapanis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexandre Cartapanis","active":true,"timeZone":"Europe/Paris"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"karaf 4.x, camel 2.17.0, activemq 5.13.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12963433/comment/15261860","id":"15261860","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acartapanis","name":"acartapanis","key":"acartapanis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexandre Cartapanis","active":true,"timeZone":"Europe/Paris"},"body":"The complete stack :\n\n{noformat}\n2016-04-28 11:13:48,457 | ERROR | ctivemq.server]) | configadmin                      | 7 - org.apache.felix.configadmin - 1.8.8 | [org.osgi.service.cm.ManagedServiceFactory, id=170, bundle=96/mvn:org.apache.activemq/activemq-osgi/5.13.2]: Updating configuration org.apache.activemq.server.45b6e092-14bf-4c6a-bb0e-0574f812ac52 caused a problem: Cannot start the broker\norg.osgi.service.cm.ConfigurationException: null : Cannot start the broker\n\tat org.apache.activemq.osgi.ActiveMQServiceFactory.updated(ActiveMQServiceFactory.java:120)[96:org.apache.activemq.activemq-osgi:5.13.2]\n\tat org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.updated(ManagedServiceFactoryTracker.java:159)[7:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.provideConfiguration(ManagedServiceFactoryTracker.java:93)[7:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.provide(ConfigurationManager.java:1602)[7:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.run(ConfigurationManager.java:1545)[7:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.UpdateThread.run0(UpdateThread.java:143)[7:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:110)[7:org.apache.felix.configadmin:1.8.8]\n\tat java.lang.Thread.run(Thread.java:745)[:1.8.0_92]\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from OSGi resource[file:/home/acs/softs/apache-karaf-4.0.5/etc/activemq.xml|bnd.id=96|bnd.sym=org.apache.activemq.activemq-osgi]; nested exception is org.springframework.beans.FatalBeanException: NamespaceHandler class [org.apache.xbean.spring.context.v2.XBeanNamespaceHandler] for namespace [http://activemq.apache.org/schema/core] not found; nested exception is java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler not found from bundle [org.apache.activemq.activemq-osgi]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:413)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:335)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:303)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.osgi.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:164)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.osgi.context.support.OsgiBundleXmlApplicationContext.loadBeanDefinitions(OsgiBundleXmlApplicationContext.java:136)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)[120:org.apache.servicemix.bundles.spring-context:3.2.14.RELEASE_1]\n\tat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:539)[120:org.apache.servicemix.bundles.spring-context:3.2.14.RELEASE_1]\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)[120:org.apache.servicemix.bundles.spring-context:3.2.14.RELEASE_1]\n\tat org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.access$301(AbstractDelegatedExecutionApplicationContext.java:69)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$1.run(AbstractDelegatedExecutionApplicationContext.java:186)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.normalRefresh(AbstractDelegatedExecutionApplicationContext.java:182)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$NoDependenciesWaitRefreshExecutor.refresh(AbstractDelegatedExecutionApplicationContext.java:89)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.refresh(AbstractDelegatedExecutionApplicationContext.java:175)[145:org.springframework.osgi.core:1.2.1]\n\tat org.apache.activemq.osgi.ActiveMQServiceFactory.updated(ActiveMQServiceFactory.java:102)[96:org.apache.activemq.activemq-osgi:5.13.2]\n\t... 7 more\nCaused by: org.springframework.beans.FatalBeanException: NamespaceHandler class [org.apache.xbean.spring.context.v2.XBeanNamespaceHandler] for namespace [http://activemq.apache.org/schema/core] not found; nested exception is java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler not found from bundle [org.apache.activemq.activemq-osgi]\n\tat org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:135)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.osgi.context.support.DelegatedNamespaceHandlerResolver.resolve(DelegatedNamespaceHandlerResolver.java:56)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1427)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1422)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:187)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:147)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:101)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:495)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:391)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\t... 24 more\nCaused by: java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler not found from bundle [org.apache.activemq.activemq-osgi]\n\tat org.springframework.osgi.util.BundleDelegatingClassLoader.findClass(BundleDelegatingClassLoader.java:103)[145:org.springframework.osgi.core:1.2.1]\n\tat org.springframework.osgi.util.BundleDelegatingClassLoader.loadClass(BundleDelegatingClassLoader.java:156)[145:org.springframework.osgi.core:1.2.1]\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)[:1.8.0_92]\n\tat org.springframework.util.ClassUtils.forName(ClassUtils.java:265)[126:org.apache.servicemix.bundles.spring-core:3.2.14.RELEASE_1]\n\tat org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:124)[117:org.apache.servicemix.bundles.spring-beans:3.2.14.RELEASE_1]\n\t... 32 more\nCaused by: java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler not found by org.apache.activemq.activemq-osgi [96]\n\tat org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1574)[org.apache.felix.framework-5.4.0.jar:]\n\tat org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:79)[org.apache.felix.framework-5.4.0.jar:]\n\tat org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2018)[org.apache.felix.framework-5.4.0.jar:]\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)[:1.8.0_92]\n\tat org.apache.felix.framework.Felix.loadBundleClass(Felix.java:1925)[org.apache.felix.framework-5.4.0.jar:]\n\tat org.apache.felix.framework.BundleImpl.loadClass(BundleImpl.java:978)[org.apache.felix.framework-5.4.0.jar:]\n\tat org.springframework.osgi.util.BundleDelegatingClassLoader.findClass(BundleDelegatingClassLoader.java:99)[145:org.springframework.osgi.core:1.2.1]\n\t... 36 more\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acartapanis","name":"acartapanis","key":"acartapanis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexandre Cartapanis","active":true,"timeZone":"Europe/Paris"},"created":"2016-04-28T09:34:57.798+0000","updated":"2016-04-28T09:34:57.798+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12963433/comment/15261862","id":"15261862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acartapanis","name":"acartapanis","key":"acartapanis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexandre Cartapanis","active":true,"timeZone":"Europe/Paris"},"body":"https://issues.apache.org/jira/browse/CAMEL-9922","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acartapanis","name":"acartapanis","key":"acartapanis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexandre Cartapanis","active":true,"timeZone":"Europe/Paris"},"created":"2016-04-28T09:35:24.910+0000","updated":"2016-04-28T11:14:05.259+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12963433/comment/15262153","id":"15262153","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"[~davsclaus],\n\nIt looks like the xbean-spring-3.18 dependency has an OSGI import for Spring 3.x and not Spring 4.x.  I believe Camel uses this dependency as well, how did you get around that when using Spring 4.x ?  There probably needs to be a new release done for xbean-spring but that project looks like there isn't much activity going on.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2016-04-28T13:48:45.486+0000","updated":"2016-04-28T13:48:45.486+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12963433/comment/15262205","id":"15262205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"body":"No camel does not use xbean. Its only ActiveMQ.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"created":"2016-04-28T14:16:23.647+0000","updated":"2016-04-28T14:16:23.647+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12963433/comment/15262737","id":"15262737","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"Well that's going to be an issue for upgrading then because this dependency won't work with Spring 4.x and OSGi but ActiveMQ uses it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2016-04-28T18:56:56.900+0000","updated":"2016-04-28T18:56:56.900+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12963433/comment/15783503","id":"15783503","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nvoskresenskiy","name":"nvoskresenskiy","key":"nvoskresenskiy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nikolay Voskresenskiy","active":true,"timeZone":"Etc/UTC"},"body":"I ran into the same issue and was able to reproduce it without camel at all! In fact, the error always happens in case when the container has both spring 3.x and 4.x feature installed\n\nHere is a sample karaf assembly configuration:\n{code}\n                     <plugin>\n                        <groupId>org.apache.karaf.tooling</groupId>\n                        <artifactId>karaf-maven-plugin</artifactId>\n                        <version>${karaf.version}</version>\n                        <extensions>true</extensions>\n                        <configuration>\n                            <installedFeatures>\n                                <feature>wrapper</feature>\n                            </installedFeatures>\n                            <startupFeatures>\n                                <feature>standard</feature>\n                            </startupFeatures>\n                            <bootFeatures>\n                                <feature>activemq-broker</feature>\n                                <feature>hawtio-offline</feature>\n                                <feature>spring/4.2.5.RELEASE_1</feature>\n                            </bootFeatures>\n\n                        </configuration>\n                    </plugin>\n{code}\n\nI believe the root cause of the issue is:\n\n* the xbean library manifest restricts spring version range to [3.2,4)\n* the activemq feature also restricts spring version range to [3.2,4) (correct)\n* the activemq-osgi module manifest specifies spring version range as [3.2, 5) (incorrect?!)\n\nThis causes class org.apache.activemq.osgi.ActiveMQServiceFactory to be wired to the bundle classloader for the latest allowed spring version installed (which is now 4.x), and consequently it then fails to load xbean classes which are restricted to spring 3.x\n\nStack trace with bundle versions:\n\n{code}\n2016-12-28 13:52:04,178 | INFO  | ctivemq.server]) | ActiveMQServiceFactory           | 65 - org.apache.activemq.activemq-osgi - 5.14.3 | Starting broker amq-broker\n2016-12-28 13:52:04,254 | INFO  | ctivemq.server]) | ClassPathXmlApplicationContext   | 91 - org.apache.servicemix.bundles.spring-context - 4.2.5.RELEASE_1 | Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@7af27377: startup date [Wed Dec 28 13:52:04 EST 2016]; root of context hierarchy\n2016-12-28 13:52:04,703 | INFO  | ctivemq.server]) | XmlBeanDefinitionReader          | 89 - org.apache.servicemix.bundles.spring-beans - 4.2.5.RELEASE_1 | Loading XML bean definitions from URL [file:/C:/Work/Java/otc-trade-service-fuse/karaf/target/assembly/etc/activemq.xml]\n2016-12-28 13:52:04,794 | ERROR | ctivemq.server]) | configadmin                      | 5 - org.apache.felix.configadmin - 1.8.8 | [org.osgi.service.cm.ManagedServiceFactory, id=393, bundle=65/mvn:org.apache.activemq/activemq-osgi/5.14.3]: Updating configuration org.apache.activemq.server.adbfe35b-d95f-4102-9ba4-8ba299636be2 caused a problem: Cannot start the broker\norg.osgi.service.cm.ConfigurationException: null : Cannot start the broker\n\tat org.apache.activemq.osgi.ActiveMQServiceFactory.updated(ActiveMQServiceFactory.java:144)[65:org.apache.activemq.activemq-osgi:5.14.3]\n\tat org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.updated(ManagedServiceFactoryTracker.java:159)[5:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.provideConfiguration(ManagedServiceFactoryTracker.java:93)[5:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.provide(ConfigurationManager.java:1602)[5:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.run(ConfigurationManager.java:1545)[5:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.UpdateThread.run0(UpdateThread.java:143)[5:org.apache.felix.configadmin:1.8.8]\n\tat org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:110)[5:org.apache.felix.configadmin:1.8.8]\n\tat java.lang.Thread.run(Thread.java:745)[:1.8.0_20]\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from URL [file:/C:/Work/Java/otc-trade-service-fuse/karaf/target/assembly/etc/activemq.xml]; nested exception is org.springframework.beans.FatalBeanException: NamespaceHandler class [org.apache.xbean.spring.context.v2.XBeanNamespaceHandler] for namespace [http://activemq.apache.org/schema/core] not found; nested exception is java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler not found by org.apache.activemq.activemq-osgi [65]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:414)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:252)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)[91:org.apache.servicemix.bundles.spring-context:4.2.5.RELEASE_1]\n\tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)[91:org.apache.servicemix.bundles.spring-context:4.2.5.RELEASE_1]\n\tat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129)[91:org.apache.servicemix.bundles.spring-context:4.2.5.RELEASE_1]\n\tat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:609)[91:org.apache.servicemix.bundles.spring-context:4.2.5.RELEASE_1]\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:510)[91:org.apache.servicemix.bundles.spring-context:4.2.5.RELEASE_1]\n\tat org.apache.activemq.osgi.ActiveMQServiceFactory.updated(ActiveMQServiceFactory.java:126)[65:org.apache.activemq.activemq-osgi:5.14.3]\n\t... 7 more\nCaused by: org.springframework.beans.FatalBeanException: NamespaceHandler class [org.apache.xbean.spring.context.v2.XBeanNamespaceHandler] for namespace [http://activemq.apache.org/schema/core] not found; nested exception is java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler not found by org.apache.activemq.activemq-osgi [65]\n\tat org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:136)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1406)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1401)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:168)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:138)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:94)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:508)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:392)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\t... 19 more\nCaused by: java.lang.ClassNotFoundException: org.apache.xbean.spring.context.v2.XBeanNamespaceHandler not found by org.apache.activemq.activemq-osgi [65]\n\tat org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1574)[org.apache.felix.framework-5.4.0.jar:]\n\tat org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:79)[org.apache.felix.framework-5.4.0.jar:]\n\tat org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2018)[org.apache.felix.framework-5.4.0.jar:]\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)[:1.8.0_20]\n\tat org.springframework.util.ClassUtils.forName(ClassUtils.java:250)[95:org.apache.servicemix.bundles.spring-core:4.2.5.RELEASE_1]\n\tat org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:125)[89:org.apache.servicemix.bundles.spring-beans:4.2.5.RELEASE_1]\n\t... 26 more\n{code}\n\n\nThe only workaround for now seems to be to revert to camel 2.16 and blacklist spring 4.x from the container complete for the time being","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nvoskresenskiy","name":"nvoskresenskiy","key":"nvoskresenskiy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nikolay Voskresenskiy","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-28T19:01:02.294+0000","updated":"2016-12-28T19:01:02.294+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6268/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ww5z:"}}