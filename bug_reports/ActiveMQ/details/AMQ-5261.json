{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12725739","self":"https://issues.apache.org/jira/rest/api/2/issue/12725739","key":"AMQ-5261","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2014-07-07T14:18:08.905+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jul 08 18:23:09 UTC 2014","customfield_12310420":"403897","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_104981829_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-08T18:23:09.805+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5261/watchers","watchCount":3,"isWatching":false},"created":"2014-07-07T13:13:28.007+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323932","id":"12323932","name":"5.9.0","archived":false,"released":true,"releaseDate":"2013-10-21"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-07-08T18:23:09.833+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313904","id":"12313904","name":"JMX","description":"The JMX support in ActiveMQ"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Starting from 5.9.0 version of ActiveMQ we seem to have a memory leak in the JMX objects which seems to be causing OutOfMemory in this process.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12654412","id":"12654412","filename":"1ConsumerMultipleProducers.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-08T00:17:53.963+0000","size":72358,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12654412/1ConsumerMultipleProducers.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12654331","id":"12654331","filename":"activemq-jmx-leak.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-07T15:13:37.980+0000","size":33050,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12654331/activemq-jmx-leak.zip"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12654312","id":"12654312","filename":"ActiveMQJMXObjects.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-07T13:18:20.552+0000","size":40605,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12654312/ActiveMQJMXObjects.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12654311","id":"12654311","filename":"BrokerOOM.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-07T13:14:38.709+0000","size":86736,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12654311/BrokerOOM.png"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"403940","customfield_12312823":null,"summary":"Memory leak in ActiveMQ JMX objects","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows and Solaris","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725739/comment/14053635","id":"14053635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"body":"If you notice the screenshot we have 870MB  in the Repository which basically holds on to the JMX ObjectNames. \nStarting from this release when I try and delete the topic it leaves the folder in the JMX beans in jconsole for the ActiveMQ process.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-07T13:15:49.724+0000","updated":"2014-07-07T13:15:49.724+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725739/comment/14053689","id":"14053689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Have you test against the latest release (5.10)?  Do you have a test case that can show left over MBeans?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-07-07T14:18:08.905+0000","updated":"2014-07-07T14:18:08.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725739/comment/14053705","id":"14053705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"body":"I couldn't find a ticket in this site that dealt with changes with the way the topics were destroyed or the JMX beans were destroyed to be able to try the latest version of activeMQ.\nI could try it anyway. This is on our production servers, so I have to make sure we reproduce it in house.\nI don't have a test case to prove this, I think I need to create one. Let me try it.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-07T14:32:38.709+0000","updated":"2014-07-07T14:32:38.709+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725739/comment/14053743","id":"14053743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"body":"Alright, I managed to attach a test case that will create the topic and when the consumer gets destroyed activeMQ never cleans this topic from the mbeans.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-07T15:14:17.779+0000","updated":"2014-07-07T15:14:17.779+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725739/comment/14053821","id":"14053821","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"body":"Ok, looks like I could solve this problem by fixing my topic name creation and use the same name through out the life cycle of the broker, instead of generating unique names.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-07T16:25:30.496+0000","updated":"2014-07-07T16:25:30.496+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725739/comment/14054325","id":"14054325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"body":"I think I found the problem, Looks like 1 topic is creating multiple producers. Causing the JMX beans to exponentially increase over period of time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-08T00:18:45.845+0000","updated":"2014-07-08T00:18:45.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725739/comment/14055215","id":"14055215","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"So this seems to indicate that the problem lies with your application and not a Broker issue.  If that's incorrect we need a small self contained JUnit test that demonstrates the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2014-07-08T18:01:20.507+0000","updated":"2014-07-08T18:01:20.507+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12725739/comment/14055253","id":"14055253","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"body":"I am closing this issue because I can resolve this issue by using PooledConnectionFactory instead of CachingConnectionFactory.\nPooledConnectionFactory seems to create a singleton producer. Which should solve my problem of creating infinite JMX topics which eventually runs out of memory.\nRight now the topics are getting cleaned up appropriately.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aravind.Chennuru","name":"Aravind.Chennuru","key":"aravind.chennuru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aravind Chennuru","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-08T18:23:09.829+0000","updated":"2014-07-08T18:23:09.829+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-5261/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1xii7:"}}