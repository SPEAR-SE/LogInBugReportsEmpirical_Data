{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481053","self":"https://issues.apache.org/jira/rest/api/2/issue/12481053","key":"AMQ-345","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315602","id":"12315602","name":"3.2","archived":false,"released":true}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2005-09-06T12:30:03.000+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Sep 20 21:59:50 UTC 2005","customfield_12310420":"84267","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_322363000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_19603000_*|*_4_*:*_1_*:*_1224184000","customfield_12312321":null,"resolutiondate":"2005-09-20T21:59:50.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-345/watchers","watchCount":0,"isWatching":false},"created":"2005-09-02T18:57:20.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315601","id":"12315601","name":"3.1","archived":false,"released":true}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2005-09-20T21:59:50.000+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I am specifying a 1 minute keep-alive value but the log is show that a 5 second cycle is being used between the brokers.  The following is the format of my network channel definitions:\n\n <networkChannel remoteBrokerName=\"roadrash-1>roadrash-2\" maximumRetries=\"0\" reconnectSleepTime=\"15000\" uri=\"reliable:tcp://localhost:62626?keepAliveTimeout=60000&amp;establishConnectionTimeout=604800000\"/>","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172137","customfield_12312823":null,"summary":"keepAliveTimeout ignored on networkChannel","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"jdk 1.5 w2k","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481053/comment/12936928","id":"12936928","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"This is actually a bug in our documentation :)\n\nThe issue is that the ?property=value notation is applied to the last TransportChannel that its applied - so in your example thats the TcpTransportChannel, not the ReliableTransportChannel. To fix this, try using () around the list of URLs in the reliable transport. e.g.\n\n <networkChannel remoteBrokerName=\"roadrash-1>roadrash-2\" maximumRetries=\"0\" reconnectSleepTime=\"15000\" uri=\"reliable:(tcp://localhost:62626)?keepAliveTimeout=60000&amp;establishConnectionTimeout=604800000\"/>\n\nIts a bug in commons-beanutils that it should barf to tell you that 'keepAliveTimeout' is not a valid property on TcpTransportChannel to make it a bit more obvious whats going on. (We'll have that fixed in AMQ 4.x)\n\nSee http://activemq.org/Configuring+Transports for more details","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2005-09-06T12:30:03.000+0000","updated":"2005-09-06T12:30:03.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481053/comment/12936849","id":"12936849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"body":"Okay, it did not seem to work as expected in the network channel so I tried to duplicate on a client connection. The URL I used was:\n\nreliable:(tcp://localhost:63636)?keepAliveTimeout=60000&useAsyncSend=true&maximumRetries=0&failureSleepTime=30000&establishConnectionTimeout=604800000\n\nThe log entries that resulted follow.  From what I can see is that all of the properties that should be applied to the list have been rejected. \n\nNote: this test performed against revsion 482\n\n\n2005-09-06 10:50:01,904 [main ] DEBUG ActiveMQJMSBroker    - trying connection to reliable:(tcp://localhost:63636)?keepAliveTimeout=60000&useAsyncSend=true&maximumRetries=0&failureSleepTime=30000&establishConnectionTimeout=604800000\n2005-09-06 10:50:02,107 [main ] DEBUG ReflectionSupport    - Could not set property: establishConnectionTimeout, value: 604800000\n2005-09-06 10:50:02,107 [main ] DEBUG ReflectionSupport    - Could not set property: keepAliveTimeout, value: 60000\n2005-09-06 10:50:02,107 [main ] DEBUG ReflectionSupport    - Could not set property: failureSleepTime, value: 30000\n2005-09-06 10:50:02,107 [main ] DEBUG ReflectionSupport    - Could not set property: maximumRetries, value: 0\n2005-09-06 10:50:02,154 [main ] DEBUG ReflectionSupport    - Could not set property: useAsyncSend, value: true\n2005-09-06 10:50:02,154 [main ] DEBUG KeepAliveDaemon      - Adding channel ReliableTransportChannel: No active channel\n2005-09-06 10:50:02,154 [main ] DEBUG KeepAliveDaemon      - Scheduling keep-alive every 15000 millisecond.\n2005-09-06 10:50:02,185 [1025]] DEBUG TcpTransportChannel  - TCP consumer thread starting\n2005-09-06 10:50:02,185 [main ] INFO  ActiveMQConnection   - channel status changed: Channel: ReliableTransportChannel: TcpTransportChannel: Socket[addr=localhost/127.0.0.1,port=63636,localport=1025] has connected\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"created":"2005-09-06T17:56:46.000+0000","updated":"2005-09-06T17:56:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481053/comment/12936815","id":"12936815","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"body":"FWIW the following is the code I use for creating connection.\n\nActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_USER, ActiveMQConnection.DEFAULT_PASSWORD, conurl);\nconnectionFactory.setDoMessageFragmentation(\"false\");\nActiveMQConnection con = (ActiveMQConnection) connectionFactory.createConnection();","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"created":"2005-09-06T17:59:49.000+0000","updated":"2005-09-06T17:59:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481053/comment/12936781","id":"12936781","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"body":"Maybe I jumped the gun here.  While the Initial message in the log show failures to set properties later log activity show differently.  Is this due to the fact that there is no active channel when the Reliable transport object is created, then the properties are applied later to the underly transport channel?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"created":"2005-09-06T18:19:06.000+0000","updated":"2005-09-06T18:19:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481053/comment/12936624","id":"12936624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"body":"Nothing to fix, log displays default info at construction before property is applied","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dennis%40bevocal.com","name":"dennis@bevocal.com","key":"dennis@bevocal.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dennis Cook","active":true,"timeZone":"Etc/UTC"},"created":"2005-09-20T21:59:50.000+0000","updated":"2005-09-20T21:59:50.000+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-345/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ttsv:"}}