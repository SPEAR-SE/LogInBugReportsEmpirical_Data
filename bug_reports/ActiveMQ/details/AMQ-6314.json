{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12976511","self":"https://issues.apache.org/jira/rest/api/2/issue/12976511","key":"AMQ-6314","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2016-06-07T17:00:29.664+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 24 13:50:39 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_16976010_*|*_4_*:*_1_*:*_73434500_*|*_6_*:*_2_*:*_1367727061","customfield_12312321":null,"resolutiondate":"2016-06-24T13:50:38.884+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6314/watchers","watchCount":4,"isWatching":false},"created":"2016-06-07T16:48:21.704+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["performance"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329848","id":"12329848","name":"5.13.0","archived":false,"released":true,"releaseDate":"2015-12-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-06-24T13:50:39.272+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10092","value":"Unit Test Broken","id":"10092"}],"description":" We really need a help in improving ActiveMQ performance, we tested ActiveMQ with no message loss configuration and getting only 500msgs/sec and we are getting 5000msgs/sec with Tibco EMS server, so can you please suggest us how to improve our ActiveMQ Performance.\n\nwe disabled *concurrentStoreAndDispatchQueues* to achieve 100% no message loss ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12812877","id":"12812877","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-23T17:27:01.224+0000","size":7119,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12812877/activemq.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12808711","id":"12808711","filename":"Screen Shot 2016-06-07 at 9.44.12 AM.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-07T16:49:47.156+0000","size":270709,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12808711/Screen+Shot+2016-06-07+at+9.44.12+AM.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12808710","id":"12808710","filename":"Screen Shot 2016-06-07 at 9.44.24 AM.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-07T16:49:47.152+0000","size":220220,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12808710/Screen+Shot+2016-06-07+at+9.44.24+AM.png"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Improve ActiveMQ performance with no message loss configuration","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15318875","id":"15318875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"According to the images you do have messages pending in the DLQ which depending on other factors can lead to the journal logs being retained leading to store being full. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2016-06-07T17:00:29.664+0000","updated":"2016-06-07T17:00:29.664+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15319459","id":"15319459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~tabish121] for your quick response, my another question is why DLQ is created ? because we are not setting any expiration properties and how can we avoid the journal log dependencies.\n\nwe heard that ActiveMQ has some fix in 5.13.2 but we are still facing the same issue, actually log files should delete once we consume the messages but it is not happening.\n\nI believe the issue which we are facing is related to stores, log files, slow consumers and we don't know how to overcome this issue.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-07T21:21:29.808+0000","updated":"2016-06-07T21:21:29.808+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15319477","id":"15319477","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"I can't say how the DLQ is getting hit in your case as I don't know what you are doing.  The solution to the chained log files is traditionally to use mKahaDB.\n\nThere doesn't appear to be an bug here, the best place to ask your questions is on the Users mailing list where you can get advice from folks that can analyse your use case.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2016-06-07T21:31:09.835+0000","updated":"2016-06-07T21:31:09.835+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15319637","id":"15319637","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"body":"{code}\n==> wrapper.log <==\nINFO   | jvm 1    | 2016/06/07 21:00:46 |  INFO | Usage(default:store:queue://ActiveMQ.DLQ:store) percentUsage=99%, usage=6488893505, limit=6442450944, percentUsageMinDelta=1%;Parent:Usage(default:store) percentUsage=100%, usage=6488893505, limit=6442450944, percentUsageMinDelta=1%: Persistent store is Full, 100% of 6442450944. Stopping producer (ID:custom-127492733-3-127828230-47478-1465332618851-1:40:1:1) to prevent flooding queue://ActiveMQ.DLQ. See http://activemq.apache.org/producer-flow-control.html for more info (blocking for: 452s)\n\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-07T22:54:39.426+0000","updated":"2016-06-07T22:54:39.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15346802","id":"15346802","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"body":"[~tabish121]: We really need a help in improving ActiveMQ performance, we tested ActiveMQ with no message loss configuration and getting only 500msgs/sec and we are getting 5000msgs/sec with Tibco EMS server, so can you please suggest us how to improve our ActiveMQ Performance.\n\nI tuned the below parameters:\n\n*20producer/consumers and 10kb message size*:\n\n# KahaDB —> disable the enablejournalDiskSyncs (Async store) ---> 4000 msgs/sec\n# Prefetch —> 1000, 50 , 1, 0\n# Enabled messageCompression\n# Socket buffer size changed from 64kb to 128kb\n# I/O buffer size changed from 8kb to 16kb\n# indexCacheSize\n# journalMaxFileLength\n# FlowControl\n# tcp/nio\n# Pre-allocation-strategy (log files)\n# Producers/consumers count - 4, 20, 100\n\nAlso I am attaching the ActiveMQ.xml in this ticket.\n\nCC : [~cshannon]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-23T17:23:49.914+0000","updated":"2016-06-23T17:32:50.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15346855","id":"15346855","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"You can leave on concurrentStoreAndDispatch for queues and I don't think you'd lose messages.  There might be some case I'm not thinking of that could cause a message to get lost but the way it works is the producer will still block and wait for the message to be synced to disk but while it is waiting to be synced, it will be dispatched to a consumer if the consumer is ready for it.  If the consumer acknowledges the message before the disk sync happens then it can be safely dropped and the message never needs to be written to disk.  This can definitely speed up the message rate.\n\nIn regards to EMS, when you did your tests and saw 5000 message per second are you sure that EMS was configured to use Fsync for the sync storage?  \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2016-06-23T17:47:49.007+0000","updated":"2016-06-23T18:41:31.580+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15346884","id":"15346884","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"body":"\nThanks [~cshannon] for your quick response but my question,Is the producer blocked till consumer sends the acknowledgement ? or it will be blocked till the message reach to dispatch queue(consumer did not send acknowledgment) ?\n\nActiveMQ doc says \"*If you want to satisfy the JMS durability requirement, you must also disable concurrent store and dispatch*\".\n\nRegarding EMS: Fsync is disabled, we used default configuration and don't have much idea on Fsync\n\n{code}\n Process Id:               16832\n State:                    active\n Topics:                   5 (0 dynamic, 0 temporary)\n Queues:                   8 (0 dynamic, 1 temporary)\n Connections:              1 of 30000 maximum\n Sessions:                 1\n Producers:                1\n Consumers:                1\n Durables:                 0\n Log File Size:            1.8 MB out of 260MB\n Pending Messages:         0\n Pending Message Size:     0.0 Kb\n Message Memory Usage:     16.8 Kb out of 4083470KB\n Message Memory Pooled:    104.0 Kb\n Synchronous Storage:      2.1 GB\n Asynchronous Storage:     3.0 Kb\n Fsync for Sync Storage:   disabled\n Inbound Message Rate:     0 msgs/sec,  0.0 Kb per second\n Outbound Message Rate:    0 msgs/sec,  0.0 Kb per second\n Disk Read Rate:           0 reads/sec,  0.0 Kb per second\n Disk Write Rate:          0 writes/sec, 0.0 Kb per second\n Uptime:                   6 days 16 hours 56 minutes\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raghu98499%40gmail.com","name":"raghu98499@gmail.com","key":"raghu98499@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Raghu Baddam","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-23T18:09:40.535+0000","updated":"2016-06-23T18:09:40.535+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15346938","id":"15346938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"body":"If concurrent store and dispatch setting is disabled, a sync producer will block until the message is stored to disk.  After it is stored, the producer will return and then the broker will be dispatch the message to the consumer.  The producer won't wait for the ack, only that it was persisted.\n\nIf that setting is enabled, the producer will block until the message is either stored to disk OR the consumer has acked.  This is because in this mode the message can be dispatched while the producer is waiting for the disk sync so in a busy broker it's possible the message can be acked before saving to disk.  Either way, the producer will block until it gets confirmation that the message has either been received and acked or the broker has saved it.\n\nMy guess is the note about it not satisfying the spec is there because it probably technically doesn't conform to the spec since it's possible the message could never be stored to disk if it was delivered quickly.  This would also prevent being able to replay messages if you were backing up the journal files.  So really it is up to you if you want to use this setting or not.\n\nSo Fsync being disabled is the reason why you are seeing a high message rate with EMS, which is what I suspected.  That is equivalent to setting enablejournalDiskSync to false in ActiveMQ.  You are not guaranteeing persistence if that setting is disabled because the producer isn't waiting for the data to be flushed to disk.  To do a proper comparison of speed you need to set the Fsync setting in EMS to the same thing as enableJournalDiskSync in ActiveMQ.  You need to enable Fsync if you want to guarantee persistent messaging and if you do, I think you will find the message rate to be slower and more comparable to the speed you see for ActiveMQ.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cshannon","name":"cshannon","key":"christopher.l.shannon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=christopher.l.shannon&avatarId=24614","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=christopher.l.shannon&avatarId=24614","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=christopher.l.shannon&avatarId=24614","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=christopher.l.shannon&avatarId=24614"},"displayName":"Christopher L. Shannon","active":true,"timeZone":"America/New_York"},"created":"2016-06-23T18:36:33.059+0000","updated":"2016-06-23T18:36:33.059+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12976511/comment/15348290","id":"15348290","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"This is a discussion that needs to happen on the users forum, jira is where real bugs are logged.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2016-06-24T13:50:39.149+0000","updated":"2016-06-24T13:50:39.149+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-6314/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2z3m7:"}}