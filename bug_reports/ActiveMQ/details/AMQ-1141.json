{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12481998","self":"https://issues.apache.org/jira/rest/api/2/issue/12481998","key":"AMQ-1141","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2007-01-31T11:03:21.963+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Feb 15 00:10:23 UTC 2007","customfield_12310420":"43766","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1433037735_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2007-02-15T00:10:23.248+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1141/watchers","watchCount":1,"isWatching":false},"created":"2007-01-29T10:06:25.513+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":604800,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"}],"issuelinks":[{"id":"12335204","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12335204","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"12484382","key":"AMQCPP-60","self":"https://issues.apache.org/jira/rest/api/2/issue/12484382","fields":{"summary":"message information is lost from stomp message to jms","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nmittler","name":"nmittler","key":"nmittler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nathan Mittler","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-11-27T04:25:57.174+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313903","id":"12313903","name":"Transport"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I'm using a jms to jms bridge from activemq to bea wls 8.1 My activemq version is a patched 4.1 with the fix for issue AMQ-1110 to decouple me from the release of activemq 4.2. \n\nAs my producer is a cpp server program i downloaded and compiled activemq-cpp 1.0. I managed to make activemq-cpp compile and link as shared lib / dll under vc 7.1 (Visual Studio .NET 2003).  \n\n\n\nBy sending a textmessage to the activemq-queue releated to the jms bridge the message is not forwarded and i get the following stacktrace:\n\nERROR DestinationBridge              - failed to forward message on attempt: 1 \nreason: weblogic.jms.common.MessageFormatException: Illegal property name, 'request-id' \nmessage: ActiveMQTextMessage {commandId = 3, responseRequired = false, \nmessageId = ID:KStanke-2844-1170064566619-5:0:-1:1:1, \noriginalDestination = null, \noriginalTransactionId = null, \nproducerId = ID:KStanke-2844-1170064566619-5:0:-1:1, \ndestination = queue://TEST.FOO, \ntransactionId = null, expiration = 0, \ntimestamp = 1170064774288, \narrival = 0, \ncorrelationId = null, \nreplyTo = null, \npersistent = false, \ntype = null, \npriority = 4, \ngroupID = null, \ngroupSequence = 0, targetConsumerId = null, compressed = false, \nuserID = null, content = org.apache.activemq.util.ByteSequence@12f9924, \nmarshalledProperties = org.apache.activemq.util.ByteSequence@1ef3212, dataStructure = null, \nredeliveryCounter = 0, size = 0, properties = {request-id=2}, readOnlyProperties = true, \nreadOnlyBody = true, droppable = false, text = null}\nweblogic.jms.common.MessageFormatException: Illegal property name, 'request-id'\nat weblogic.jms.common.MessageImpl.setObjectProperty(MessageImpl.java:1032)\nat weblogic.jms.common.MessageImpl.<init>(MessageImpl.java:281)\nat weblogic.jms.common.TextMessageImpl.<init>(TextMessageImpl.java:47)\nat weblogic.jms.common.TextMessageImpl.<init>(TextMessageImpl.java:39)\nat weblogic.jms.client.JMSProducer.convertMessage(JMSProducer.java:558)\nat weblogic.jms.client.JMSProducer.sendInternal(JMSProducer.java:331)\nat weblogic.jms.client.JMSProducer.send(JMSProducer.java:152)\nat weblogic.jms.client.JMSProducer.send(JMSProducer.java:215)\nat org.apache.activemq.network.jms.QueueBridge.sendMessage(QueueBridge.java:87)\nat org.apache.activemq.network.jms.DestinationBridge.onMessage(DestinationBridge.java:134)\nat org.apache.activemq.ActiveMQMessageConsumer.dispatch(ActiveMQMessageConsumer.java:840)\nat org.apache.activemq.ActiveMQSessionExecutor.dispatch(ActiveMQSessionExecutor.java:96)\nat org.apache.activemq.ActiveMQSessionExecutor.iterate(ActiveMQSessionExecutor.java:165)\nat org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:88)\nat org.apache.activemq.thread.DedicatedTaskRunner.access$000(DedicatedTaskRunner.java:25)\nat org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:39)\n\nThis issue seems to be related to AMQ-748","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460716","id":"12460716","filename":"ASF.LICENSE.NOT.GRANTED--activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-29T10:06:25.565+0000","size":3818,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12460716/ASF.LICENSE.NOT.GRANTED--activemq.xml"}],"aggregatetimeestimate":604800,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"254963","customfield_12312823":null,"summary":"JMS to JMS Bridge fails if message was generated from activemq-cpp 1.0 client","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"subtasks":[{"id":"12481920","key":"AMQ-748","self":"https://issues.apache.org/jira/rest/api/2/issue/12481920","fields":{"summary":"Add request-id and response-id headers to STOMP connect/connected handshake","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":604800,"percent":0},"customfield_12311024":null,"environment":"Using Windows XP SP2, JDK 1.6.0, Bea Weblogic Server 8.1 SP6, ActiveMQ-CPP 1.0","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481998/comment/12938661","id":"12938661","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"body":"Maybe this is the issue fix that broke the jms to jms bridge for stomp generated messages","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-29T10:07:22.134+0000","updated":"2007-01-29T10:07:22.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481998/comment/12938769","id":"12938769","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nmittler","name":"nmittler","key":"nmittler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nathan Mittler","active":true,"timeZone":"Etc/UTC"},"body":"the request-id field was added to support doing support the connect/connected stomp handshake with the broker.  It was not intended to be forwarded to any JMS entity.  Is it possible that your patch somehow forwards the stomp messages that contain the request-id property? (it would only be the connect message).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nmittler","name":"nmittler","key":"nmittler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nathan Mittler","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-31T11:03:21.963+0000","updated":"2007-01-31T11:03:21.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481998/comment/12938858","id":"12938858","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"body":"The patch i applied was in file org.apache.activemq.command.ActiveMQTempDestination in the method setPhysicalName.\n\nThere was a number format exception raised as the string was not properly checked. Basically the patch is just some check against null and length of seqStr before parsing and catching of any NumberFormatException. \n\nI would think that this could not cause an unintended sending of a connect message. I am wondering if the request-id is  really only send for connect messages as i see it in any message going over the bridge even if i can validate that the message contains my own content. \n\nAs i commented on AMQCPP-60 i patched \n replace a line in copyStandardHeadersFromFrameToMessage from\nmsg.setJMSCorrelationID((String) headers.remove(Stomp.Headers.Send.CORRELATION_ID));\nto\nmsg.setJMSCorrelationID((String) headers.remove(Stomp.Headers.Connect.REQUEST_ID));\n\nin org.apache.activemq.transport.stomp.FrameTranslator.java (inner class helper). \n\nFrom my understanding this class is relevant if messages have to be converted in and from the activemq format. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"created":"2007-01-31T13:18:54.927+0000","updated":"2007-01-31T13:18:54.927+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481998/comment/12938796","id":"12938796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"body":"i tested this issue with a new version of the active-mq-cpp client from trunk after Nathan applied a fix to it. The issue can not be reproduced anymore.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kay.stanke","name":"kay.stanke","key":"kay.stanke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kay Stanke","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-14T11:50:33.366+0000","updated":"2007-02-14T11:50:33.366+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12481998/comment/12938674","id":"12938674","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nmittler","name":"nmittler","key":"nmittler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nathan Mittler","active":true,"timeZone":"Etc/UTC"},"body":"This was resolved by issue AMQCPP-60","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nmittler","name":"nmittler","key":"nmittler","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nathan Mittler","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-15T00:10:23.201+0000","updated":"2007-02-15T00:10:23.201+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1141/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i180zr:"}}