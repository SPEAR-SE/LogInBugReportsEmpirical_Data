{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13198532","self":"https://issues.apache.org/jira/rest/api/2/issue/13198532","key":"AMQ-7099","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2018-11-15T17:46:11.921+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Nov 16 13:35:25 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_39373407_*|*_4_*:*_1_*:*_34506077_*|*_6_*:*_2_*:*_36847246","customfield_12312321":null,"resolutiondate":"2018-11-16T13:35:25.234+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-7099/watchers","watchCount":1,"isWatching":false},"created":"2018-11-15T06:49:58.538+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334251","id":"12334251","name":"5.13.1","archived":false,"released":true,"releaseDate":"2016-02-05"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-11-16T13:35:25.265+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We upgraded activemq 5.5.1 to activemq 5.13.1 to over come the security vulnerable to CVE-2015-5254 and CVE-2014-3612. for ref: here are the links for each CVE: [http://activemq.apache.org/security-advisories.data/CVE-2015-5254-announcement.txt?version=1&modificationDate=1449589734000&api=v2]\r\n [http://activemq.apache.org/security-advisories.data/CVE-2014-3612-announcement.txt?version=2&modificationDate=1423051365000&api=v2]\r\n\r\n \r\n\r\nAfter upgrading we hit with following issues while getting LDAP user informations .\r\n\r\nFollowing are the stack trace :\r\n\r\n*16:06:07.353 0x33fb300 j9trc_aux.0 - jstacktrace:*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [1] java.security.Security.insertProviderAt (Security.java:369)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [2] org.apache.activemq.broker.BrokerService.<clinit> (BrokerService.java:275)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [3] com.ibm.tivoli.rest.event.amq.AMQPropertiesBrokerFactory.createBroker (AMQPropertiesBrokerFactory.java:30)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [4] org.apache.activemq.broker.BrokerFactory.createBroker (BrokerFactory.java:71)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [5] org.apache.activemq.broker.BrokerFactory.createBroker (BrokerFactory.java:54)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [6] com.ibm.tivoli.rest.event.amq.AMQEventRouterFactory.startBroker (AMQEventRouterFactory.java:430)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [7] com.ibm.tivoli.rest.event.amq.AMQEventRouterFactory.start (AMQEventRouterFactory.java:151)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [8] com.ibm.tivoli.rest.event.EventRouterFactory.getInstance (EventRouterFactory.java:43)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [9] com.ibm.tivoli.rest.amq.AjaxServlet.<init> (AjaxServlet.java:59)*\r\n *16:06:07.353 0x33fb300 j9trc_aux.1 - [10] java.lang.J9VMInternals.newInstanceImpl (Native Method)*\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [11] java.lang.Class.newInstance (Class.java:1843) (Compiled Code)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [12] java.beans.Beans.instantiate (Beans.java:240)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [13] java.beans.Beans.instantiate (Beans.java:88)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [14] com.ibm.ws.webcontainer.servlet.ServletWrapper$1.run (ServletWrapper.java:1489)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [15] com.ibm.ws.security.util.AccessController.doPrivileged (AccessController.java:118) (Compiled Code)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [16] com.ibm.ws.webcontainer.servlet.ServletWrapper.loadServlet (ServletWrapper.java:1478)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [17] com.ibm.ws.webcontainer.servlet.ServletWrapper.loadOnStartupCheck (ServletWrapper.java:1357)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [18] com.ibm.ws.webcontainer.webapp.WebApp.doLoadOnStartupActions (WebApp.java:642)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [19] com.ibm.ws.webcontainer.webapp.WebApp.commonInitializationFinally (WebApp.java:608)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [20] com.ibm.ws.webcontainer.webapp.WebAppImpl.initialize (WebAppImpl.java:426)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [21] com.ibm.ws.webcontainer.webapp.WebGroupImpl.addWebApplication (WebGroupImpl.java:88)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [22] com.ibm.ws.webcontainer.VirtualHostImpl.addWebApplication (VirtualHostImpl.java:171)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [23] com.ibm.ws.webcontainer.WSWebContainer.addWebApp (WSWebContainer.java:904)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [24] com.ibm.ws.webcontainer.WSWebContainer.addWebApplication (WSWebContainer.java:789)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [25] com.ibm.ws.webcontainer.component.WebContainerImpl.install (WebContainerImpl.java:427)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [26] com.ibm.ws.webcontainer.component.WebContainerImpl.start (WebContainerImpl.java:719)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [27] com.ibm.ws.runtime.component.ApplicationMgrImpl.start (ApplicationMgrImpl.java:1211)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [28] com.ibm.ws.runtime.component.DeployedApplicationImpl.fireDeployedObjectStart (DeployedApplicationImpl.java:1450)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [29] com.ibm.ws.runtime.component.DeployedModuleImpl.start (DeployedModuleImpl.java:639)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [30] com.ibm.ws.runtime.component.DeployedApplicationImpl.start (DeployedApplicationImpl.java:1032)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [31] com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication (ApplicationMgrImpl.java:795)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [32] com.ibm.ws.runtime.component.ApplicationMgrImpl$5.run (ApplicationMgrImpl.java:2279)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [33] com.ibm.ws.security.auth.ContextManagerImpl.runAs (ContextManagerImpl.java:5572)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [34] com.ibm.ws.security.auth.ContextManagerImpl.runAsSystem (ContextManagerImpl.java:5698)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [35] com.ibm.ws.security.core.SecurityContext.runAsSystem (SecurityContext.java:255)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [36] com.ibm.ws.runtime.component.ApplicationMgrImpl.start (ApplicationMgrImpl.java:2284)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [37] com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start (CompositionUnitMgrImpl.java:436)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [38] com.ibm.ws.runtime.component.CompositionUnitImpl.start (CompositionUnitImpl.java:123)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [39] com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start (CompositionUnitMgrImpl.java:379)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [40] com.ibm.ws.runtime.component.CompositionUnitMgrImpl.access$500 (CompositionUnitMgrImpl.java:127)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [41] com.ibm.ws.runtime.component.CompositionUnitMgrImpl$CUInitializer.run (CompositionUnitMgrImpl.java:985)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [42] com.ibm.wsspi.runtime.component.WsComponentImpl$_AsynchInitializer.run (WsComponentImpl.java:524)\r\n 16:06:07.353 0x33fb300 j9trc_aux.1 - [43] com.ibm.ws.util.ThreadPool$Worker.run (ThreadPool.java:1892)\r\n 16:06:07.353 0x33fb300 mt.9 < java/security/Security.insertProviderAt(Ljava/security/Provider;I)I bytecode static method\r\n\r\n \r\n\r\nIf we rollback to old ActiveMq Jars(i.e 5.5.1) its working fine. \r\n\r\nPlease help us in identifying and fixing this issue.\r\n\r\nProducts involved are :\r\n\r\nWAS 8.5.5.9 - 8.5.5.14\r\n\r\nLDAP/Active directory\r\n\r\nJazzSM(DASH) 3.1.3 CP5 -CP7\r\n\r\nActiveMQ 5.13.1\r\n\r\n ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"After upgrading activemq 5.5.1 to activemq 5.13.1, issues with  java.security.Security.insertProviderAt/org.apache.activemq.broker.BrokerService","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunil.jingade%40gmail.com","name":"sunil.jingade@gmail.com","key":"sunil.jingade@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sunil kumar","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunil.jingade%40gmail.com","name":"sunil.jingade@gmail.com","key":"sunil.jingade@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sunil kumar","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"OS: All platforms \r\n\r\nProducts involved are :\r\n\r\nWAS 8.5.5.9 - 8.5.5.14\r\n\r\nLDAP/Active directory\r\n\r\nJazzSM(DASH) 3.1.3 CP5 -CP7","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13198532/comment/16688428","id":"16688428","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Please ask for support on the users mailing list","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2018-11-15T17:46:11.921+0000","updated":"2018-11-15T17:46:11.921+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13198532/comment/16689001","id":"16689001","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunil.jingade%40gmail.com","name":"sunil.jingade@gmail.com","key":"sunil.jingade@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sunil kumar","active":true,"timeZone":"Etc/UTC"},"body":"How this can be closed without proper resolution.\r\n\r\nIt would be good to close this once after getting proper resolution, so that it will be helpful for others. \r\n\r\nThanks,","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunil.jingade%40gmail.com","name":"sunil.jingade@gmail.com","key":"sunil.jingade@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sunil kumar","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-16T04:00:19.176+0000","updated":"2018-11-16T04:01:54.380+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13198532/comment/16689003","id":"16689003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunil.jingade%40gmail.com","name":"sunil.jingade@gmail.com","key":"sunil.jingade@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sunil kumar","active":true,"timeZone":"Etc/UTC"},"body":"{color:#333333}To be clear. From the trace, we set the default SSLSocketFactory is our com.ibm.websphere.ssl.protocol.SSLSocketFactory class. This class lives in the /opt/IBM/WebSphere/AppServer/plugins/com.ibm.ws.security.crypto.jar. This jar is signed using a key that is only known to the IBMJCE Provider. If you set a different crypto Provider, you will need to utilize a NON com.ibm.websphere.ssl.protocol.SSLSocketFactory class.{color}\r\n{color:#333333} {color}\r\n{color:#333333}So if MQ is setting a different Provider, they can not utilize the default SSLSocketFactory.{color}\r\n\r\n{color:#333333}When we rollback the ActiveMQ update, the application authenticates and connects as expected. {color}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sunil.jingade%40gmail.com","name":"sunil.jingade@gmail.com","key":"sunil.jingade@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sunil kumar","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-16T04:05:31.110+0000","updated":"2018-11-16T04:05:31.110+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13198532/comment/16689422","id":"16689422","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Please use the users mailing list to ask for help with working out a configuration that works with IBM this does not appear to be a bug, and the version being tried is not a supported version. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2018-11-16T13:35:25.259+0000","updated":"2018-11-16T13:35:25.259+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-7099/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|s00im0:"}}