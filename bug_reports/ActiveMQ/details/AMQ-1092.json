{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482408","self":"https://issues.apache.org/jira/rest/api/2/issue/12482408","key":"AMQ-1092","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315617","id":"12315617","description":"","name":"5.0.0","archived":false,"released":true,"releaseDate":"2007-12-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-03-16T13:26:08.374+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Mar 24 23:41:45 UTC 2008","customfield_12310420":"84363","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_16156001453_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2007-06-12T16:01:43.453+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1092/watchers","watchCount":3,"isWatching":false},"created":"2006-12-07T16:15:02.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315611","id":"12315611","description":"","name":"4.0.1","archived":false,"released":true,"releaseDate":"2006-06-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315612","id":"12315612","description":"","name":"4.0.2","archived":false,"released":true,"releaseDate":"2006-07-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315613","id":"12315613","description":"","name":"4.1.0","archived":false,"released":true,"releaseDate":"2006-11-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-03-24T23:41:45.149+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Deadlock occurs when ActiveMQ 4.X is run as an embedded broker inside JBoss 4.X with \"<config-property-value>vm://localhost</config-property-value>\" configured in the ra.xml file.  If \"tcp://localhost:61616\" is used instead of \"vm://localhost\" then everything works fine.\n\nThe deadlock seems to occur when two messages are being handled (one is being produced and one being consumed).  If I prevent two messages from being handled at the same time (one produced and one consumed) then the deadlock does not occur.\n\nThis situation can be reproduced every single time tested.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460635","id":"12460635","filename":"ASF.LICENSE.NOT.GRANTED--deadlock.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luisalopezrivera","name":"luisalopezrivera","key":"luisalopezrivera","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis A Lopez-Rivera","active":true,"timeZone":"Etc/UTC"},"created":"2006-12-07T16:15:02.000+0000","size":9095,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460635/ASF.LICENSE.NOT.GRANTED--deadlock.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12460662","id":"12460662","filename":"ASF.LICENSE.NOT.GRANTED--javastack.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luisalopezrivera","name":"luisalopezrivera","key":"luisalopezrivera","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis A Lopez-Rivera","active":true,"timeZone":"Etc/UTC"},"created":"2006-12-07T16:15:02.000+0000","size":210800,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12460662/ASF.LICENSE.NOT.GRANTED--javastack.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"161770","customfield_12312823":null,"summary":"Deadlock when ActiveMQ 4.X is run as an embedded broker inside JBoss 4.X with \"<config-property-value>vm://localhost</config-property-value>\" configured in the ra.xml file.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luisalopezrivera","name":"luisalopezrivera","key":"luisalopezrivera","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis A Lopez-Rivera","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luisalopezrivera","name":"luisalopezrivera","key":"luisalopezrivera","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis A Lopez-Rivera","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Tested OSes:  Windows 2000 Pro, Window XP Pro x64, Linux \nJava: 1.5 SDK & 1.4 SDK\nJ2EE Server: JBoss 4.03.S1 & 4.0.4GA","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482408/comment/12938639","id":"12938639","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luisalopezrivera","name":"luisalopezrivera","key":"luisalopezrivera","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis A Lopez-Rivera","active":true,"timeZone":"Etc/UTC"},"body":"Additional information:  Tests are with XA Transactions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=luisalopezrivera","name":"luisalopezrivera","key":"luisalopezrivera","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis A Lopez-Rivera","active":true,"timeZone":"Etc/UTC"},"created":"2006-12-14T16:02:41.000+0000","updated":"2006-12-14T16:02:41.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482408/comment/12938913","id":"12938913","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jajansen","name":"jajansen","key":"jajansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jan Arend Jansen","active":true,"timeZone":"Etc/UTC"},"body":"I can confirm this deadlock. I've tried to use Jboss 4.0.5GA with ActiveMQ 4.1.0, 4.1.1 and 4.2-SNAPSHOT RARs and configured with vm:// transport I get this deadlock:\n\nFound one Java-level deadlock:\n=============================\n\"WorkManager(3)-12\":\n  waiting to lock monitor 0x00f5b884 (object 0x074fa668, a java.lang.Object),\n  which is held by \"WorkManager(3)-6\"\n\"WorkManager(3)-6\":\n  waiting to lock monitor 0x00f5c7f4 (object 0x074bf408, a java.lang.Object),\n  which is held by \"Thread-50\"\n\"Thread-50\":\n  waiting to lock monitor 0x00f5b884 (object 0x074fa668, a java.lang.Object),\n  which is held by \"WorkManager(3)-6\"\n\nJava stack information for the threads listed above:\n===================================================\n\"WorkManager(3)-12\":\n        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:47)\n        - waiting to lock <0x074fa668> (a java.lang.Object)\n        at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)\n        at org.apache.activemq.ActiveMQConnection.asyncSendPacket(ActiveMQConnection.java:1155)\n        at org.apache.activemq.TransactionContext.setXid(TransactionContext.java:566)\n        at org.apache.activemq.TransactionContext.start(TransactionContext.java:299)\n        at org.apache.activemq.ra.LocalAndXATransaction.start(LocalAndXATransaction.java:136)\n        at org.jboss.tm.TransactionImpl$Resource.startResource(TransactionImpl.java:2063)\n        at org.jboss.tm.TransactionImpl.enlistResource(TransactionImpl.java:581)\n        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.startTransaction(MessageInflowLocalProxy.java:368)\n        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.before(MessageInflowLocalProxy.java:204)\n        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:129)\n        at $Proxy125.beforeDelivery(Unknown Source)\n        at org.apache.activemq.ra.MessageEndpointProxy$MessageEndpointAlive.beforeDelivery(MessageEndpointProxy.java:110)\n        at org.apache.activemq.ra.MessageEndpointProxy.beforeDelivery(MessageEndpointProxy.java:57)\n        at org.apache.activemq.ra.ServerSessionImpl.beforeDelivery(ServerSessionImpl.java:201)\n        at org.apache.activemq.ActiveMQSession.run(ActiveMQSession.java:690)\n        at org.apache.activemq.ra.ServerSessionImpl.run(ServerSessionImpl.java:165)\n        at org.jboss.resource.work.WorkWrapper.execute(WorkWrapper.java:204)\n        at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:275)\n        at EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(PooledExecutor.java:743)\n        at java.lang.Thread.run(Thread.java:619)\n\"WorkManager(3)-6\":\n        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:47)\n        - waiting to lock <0x074bf408> (a java.lang.Object)\n        at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)\n        at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1138)\n        at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:805)\n        at org.apache.activemq.broker.TransportConnection.dispatchSync(TransportConnection.java:770)\n        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:187)\n        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:95)\n        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:65)\n        at org.apache.activemq.transport.vm.VMTransport.syncOneWay(VMTransport.java:96)\n        at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:83)\n        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:47)\n        - locked <0x074fa668> (a java.lang.Object)\n        at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:69)\n        at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:74)\n        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1175)\n        at org.apache.activemq.TransactionContext.setXid(TransactionContext.java:578)\n        at org.apache.activemq.TransactionContext.end(TransactionContext.java:339)\n        at org.apache.activemq.ra.LocalAndXATransaction.end(LocalAndXATransaction.java:90)\n        at org.jboss.tm.TransactionImpl$Resource.endResource(TransactionImpl.java:2143)\n        at org.jboss.tm.TransactionImpl$Resource.endResource(TransactionImpl.java:2118)\n        at org.jboss.tm.TransactionImpl.endResources(TransactionImpl.java:1462)\n        at org.jboss.tm.TransactionImpl.beforePrepare(TransactionImpl.java:1116)\n        at org.jboss.tm.TransactionImpl.commit(TransactionImpl.java:324)\n        at org.jboss.tm.TxManager.commit(TxManager.java:240)\n        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.endTransaction(MessageInflowLocalProxy.java:433)\n        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.finish(MessageInflowLocalProxy.java:312)\n        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.after(MessageInflowLocalProxy.java:228)\n        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:134)\n        at $Proxy125.afterDelivery(Unknown Source)\n        at org.apache.activemq.ra.MessageEndpointProxy$MessageEndpointAlive.afterDelivery(MessageEndpointProxy.java:126)\n        at org.apache.activemq.ra.MessageEndpointProxy.afterDelivery(MessageEndpointProxy.java:65)\n        at org.apache.activemq.ra.ServerSessionImpl.afterDelivery(ServerSessionImpl.java:216)\n        at org.apache.activemq.ActiveMQSession.run(ActiveMQSession.java:751)\n        at org.apache.activemq.ra.ServerSessionImpl.run(ServerSessionImpl.java:165)\n        at org.jboss.resource.work.WorkWrapper.execute(WorkWrapper.java:204)\n        at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:275)\n        at EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(PooledExecutor.java:743)\n        at java.lang.Thread.run(Thread.java:619)\n\"Thread-50\":\n        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:47)\n        - waiting to lock <0x074fa668> (a java.lang.Object)\n        at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)\n        at org.apache.activemq.ActiveMQConnection.asyncSendPacket(ActiveMQConnection.java:1155)\n        at org.apache.activemq.ActiveMQSession.<init>(ActiveMQSession.java:227)\n        at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:279)\n        at org.apache.activemq.ra.ServerSessionPoolImpl.createServerSessionImpl(ServerSessionPoolImpl.java:63)\n        at org.apache.activemq.ra.ServerSessionPoolImpl.getServerSession(ServerSessionPoolImpl.java:116)\n        at org.apache.activemq.ActiveMQConnectionConsumer.dispatch(ActiveMQConnectionConsumer.java:136)\n        at org.apache.activemq.ActiveMQConnection.onCommand(ActiveMQConnection.java:1479)\n        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:95)\n        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:65)\n        at org.apache.activemq.transport.vm.VMTransport.syncOneWay(VMTransport.java:96)\n        at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:83)\n        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:47)\n        - locked <0x074bf408> (a java.lang.Object)\n        at org.apache.activemq.transport.ResponseCorrelator.oneway(ResponseCorrelator.java:60)\n        at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1138)\n        at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:805)\n        at org.apache.activemq.broker.TransportConnection.dispatchSync(TransportConnection.java:770)\n        at org.apache.activemq.broker.region.TopicSubscription.dispatch(TopicSubscription.java:360)\n        at org.apache.activemq.broker.region.TopicSubscription.add(TopicSubscription.java:83)\n        at org.apache.activemq.broker.region.policy.SimpleDispatchPolicy.dispatch(SimpleDispatchPolicy.java:51)\n        at org.apache.activemq.broker.region.Topic.dispatch(Topic.java:417)\n        at org.apache.activemq.broker.region.Topic$2.afterCommit(Topic.java:258)\n        at org.apache.activemq.transaction.Transaction.fireAfterCommit(Transaction.java:83)\n        at org.apache.activemq.transaction.XATransaction.doPostCommit(XATransaction.java:110)\n        at org.apache.activemq.transaction.XATransaction.commit(XATransaction.java:65)\n        at org.apache.activemq.broker.TransactionBroker.commitTransaction(TransactionBroker.java:154)\n        at org.apache.activemq.broker.BrokerFilter.commitTransaction(BrokerFilter.java:94)\n        at org.apache.activemq.broker.BrokerFilter.commitTransaction(BrokerFilter.java:94)\n        at org.apache.activemq.broker.MutableBrokerFilter.commitTransaction(MutableBrokerFilter.java:104)\n        at org.apache.activemq.broker.TransportConnection.processCommitTransactionOnePhase(TransportConnection.java:424)\n        - locked <0x04c671b8> (a org.apache.activemq.broker.jmx.ManagedTransportConnection)\n        at org.apache.activemq.command.TransactionInfo.visit(TransactionInfo.java:99)\n        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:294)\n        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:185)\n        at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:95)\n        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:65)\n        at org.apache.activemq.transport.vm.VMTransport.syncOneWay(VMTransport.java:96)\n        at org.apache.activemq.transport.vm.VMTransport.oneway(VMTransport.java:83)\n        at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:47)\n        - locked <0x04c73c70> (a java.lang.Object)\n        at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:69)\n        at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:74)\n        at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1175)\n        at org.apache.activemq.TransactionContext.commit(TransactionContext.java:450)\n        at org.apache.activemq.ra.LocalAndXATransaction.commit(LocalAndXATransaction.java:85)\n        at org.jboss.tm.TransactionImpl$Resource.commit(TransactionImpl.java:2253)\n        at org.jboss.tm.TransactionImpl.commitResources(TransactionImpl.java:1784)\n        at org.jboss.tm.TransactionImpl.commit(TransactionImpl.java:340)\n        at org.jboss.tm.TxManager.commit(TxManager.java:240)\n        at org.jboss.aspects.tx.TxPolicy.endTransaction(TxPolicy.java:175)\n        at org.jboss.aspects.tx.TxPolicy.invokeInOurTx(TxPolicy.java:87)\n        at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:191)\n        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n        at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76)\n        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n        at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)\n        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n        at org.jboss.aspects.security.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:77)\n        at org.jboss.ejb3.security.Ejb3AuthenticationInterceptor.invoke(Ejb3AuthenticationInterceptor.java:102)\n        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n        at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:47)\n        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n        at org.jboss.ejb3.asynchronous.AsynchronousInterceptor.invoke(AsynchronousInterceptor.java:106)\n        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)\n        at org.jboss.ejb3.stateless.StatelessContainer.localInvoke(StatelessContainer.java:211)\n        at org.jboss.ejb3.stateless.StatelessLocalProxy.invoke(StatelessLocalProxy.java:79)\n        at $Proxy113.publish(Unknown Source)\n        at com.wolterskluwer.ceres.imports.mbeans.FilePollerService.fileSetFound(FilePollerService.java:146)\n        at org.sadun.util.polling.DefaultListener.receive(DefaultListener.java:40)\n        at com.deltax.util.listener.SignalQueue.run(Unknown Source)\n\nFound 1 deadlock.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jajansen","name":"jajansen","key":"jajansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jan Arend Jansen","active":true,"timeZone":"Etc/UTC"},"created":"2007-03-16T13:26:08.374+0000","updated":"2007-03-16T13:26:08.374+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482408/comment/12936440","id":"12936440","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"body":"This is fixed AFAIK in 5.0.0 as the VM transport defaults to the async dispatch by default.\n\nAs a work around, try using vm://localhost?async=true as your brokerURI?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jstrachan","name":"jstrachan","key":"jstrachan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"james strachan","active":true,"timeZone":"Etc/UTC"},"created":"2007-06-12T16:01:43.325+0000","updated":"2007-06-12T16:01:43.325+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482408/comment/12939399","id":"12939399","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djencks","name":"djencks","key":"djencks","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Jencks","active":true,"timeZone":"America/Los_Angeles"},"body":"A possibly related problem was fixed in AMQ-1438.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djencks","name":"djencks","key":"djencks","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Jencks","active":true,"timeZone":"America/Los_Angeles"},"created":"2008-03-24T23:41:45.094+0000","updated":"2008-03-24T23:41:45.094+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1092/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0s1tb:"}}