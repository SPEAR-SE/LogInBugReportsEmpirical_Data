{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483310","self":"https://issues.apache.org/jira/rest/api/2/issue/12483310","key":"AMQ-1763","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315630","id":"12315630","description":"Issues that need to be reviewed - do we keep 'em or do we kick 'em? ","name":"NEEDS_REVIEW","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2009-01-23T00:30:21.416+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jul 08 19:00:48 UTC 2009","customfield_12310420":"68691","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_97664225794_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-08T21:28:36.601+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1763/watchers","watchCount":6,"isWatching":false},"created":"2008-06-03T12:31:30.904+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315618","id":"12315618","description":"","name":"5.1.0","archived":false,"released":true,"releaseDate":"2008-05-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-08T21:28:36.610+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"The Message Broker throws an exception each time a client tries to acknowledge a message consumed from a  VirtualTopic consumer queue:\n\nERROR Service                        - Async error occurred: java.lang.IllegalArgumentException: The subscription does not exist: ID:seautpc271-1314-1212495185267-0:0:1:1\njava.lang.IllegalArgumentException: The subscription does not exist: ID:seautpc271-1314-1212495185267-0:0:1:1\n        at org.apache.activemq.broker.region.AbstractRegion.acknowledge(AbstractRegion.java:357)\n        at org.apache.activemq.broker.region.RegionBroker.acknowledge(RegionBroker.java:470)\n        at org.apache.activemq.broker.TransactionBroker.acknowledge(TransactionBroker.java:194)\n        at org.apache.activemq.broker.BrokerFilter.acknowledge(BrokerFilter.java:73)\n        at org.apache.activemq.broker.BrokerFilter.acknowledge(BrokerFilter.java:73)\n        at org.apache.activemq.broker.MutableBrokerFilter.acknowledge(MutableBrokerFilter.java:84)\n        at org.apache.activemq.broker.TransportConnection.processMessageAck(TransportConnection.java:443)\n        at org.apache.activemq.command.MessageAck.visit(MessageAck.java:196)\n        at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:292)\n        at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:180)\n        at org.apache.activemq.transport.TransportFilter.onCommand(TransportFilter.java:68)\n        at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:143)\n        at org.apache.activemq.transport.InactivityMonitor.onCommand(InactivityMonitor.java:206)\n        at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:84)\n        at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:196)\n        at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:183)\n        at java.lang.Thread.run(Thread.java:619)\n\nConsequently the message gets re-delivered as soon as the client connects to the queue again (and fails again on aknowledgement). Strangely enough the subscription mentioned in the exception is visible in the JMX console. I can reproduce this error every time I try to consume from VirtualTopic consumer queues.\nI have attached the broker configuration (which is rather minimal) and the test classes I used to trigger this error.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461041","id":"12461041","filename":"ASF.LICENSE.NOT.GRANTED--test.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kpodloucky","name":"kpodloucky","key":"kpodloucky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konrad Podloucky","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-03T12:31:30.934+0000","size":2379,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12461041/ASF.LICENSE.NOT.GRANTED--test.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461089","id":"12461089","filename":"ASF.LICENSE.NOT.GRANTED--TestConsumer.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kpodloucky","name":"kpodloucky","key":"kpodloucky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konrad Podloucky","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-03T12:31:30.936+0000","size":1584,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461089/ASF.LICENSE.NOT.GRANTED--TestConsumer.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461140","id":"12461140","filename":"ASF.LICENSE.NOT.GRANTED--TestProducer.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kpodloucky","name":"kpodloucky","key":"kpodloucky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konrad Podloucky","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-03T12:31:30.937+0000","size":1076,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461140/ASF.LICENSE.NOT.GRANTED--TestProducer.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461552","id":"12461552","filename":"testPatch.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-01T16:26:58.316+0000","size":4119,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461552/testPatch.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"59831","customfield_12312823":null,"summary":"Acknowledgment of Messages consumed from VirtualTopic consumer queues fails","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kpodloucky","name":"kpodloucky","key":"kpodloucky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konrad Podloucky","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kpodloucky","name":"kpodloucky","key":"kpodloucky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konrad Podloucky","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows XP, Java(TM) SE Runtime Environment (build 1.6.0_06-b02)","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12939840","id":"12939840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kpodloucky","name":"kpodloucky","key":"kpodloucky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konrad Podloucky","active":true,"timeZone":"Etc/UTC"},"body":"Just verified this problem with the broker running on Java(TM) SE Runtime Environment 1.6.0_06 (Sun) on SuSE Enterprise Linux.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kpodloucky","name":"kpodloucky","key":"kpodloucky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konrad Podloucky","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-17T11:40:32.238+0000","updated":"2008-06-17T11:40:32.238+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12940659","id":"12940659","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmccubbin","name":"tmccubbin","key":"tmccubbin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom McCubbin","active":true,"timeZone":"Etc/UTC"},"body":"Can I do anything to help this issue along...I am experiencing the same problem and I would be happy to dig in and do some fixin'...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tmccubbin","name":"tmccubbin","key":"tmccubbin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom McCubbin","active":true,"timeZone":"Etc/UTC"},"created":"2009-01-23T00:30:21.416+0000","updated":"2009-01-23T00:30:21.416+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12941657","id":"12941657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"body":"Any reason why this issue can't get resolved in version 5.3?  Virtual Topics are a documented feature of ActiveMQ.\n\nhttp://activemq.apache.org/virtual-destinations.html \n\nThe broker receives the same error with a transactional session on commit.  Here's a thread further discussing the problem:\n\nhttp://www.nabble.com/uses-virtual-topic---and-ClientAcknowledge-to-submit-the-message-occured-probem-ts22486742.html#a24260251","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"created":"2009-06-30T13:32:24.646+0000","updated":"2009-06-30T13:34:37.892+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12941650","id":"12941650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"There is an existing test case on trunk VirtualTopicPubSubTest  - http://svn.apache.org/viewvc/activemq/trunk/activemq-core/src/test/java/org/apache/activemq/broker/virtual/VirtualTopicPubSubTest.java?view=annotate\n\nI modified it to use client ack but it does not show the behavior above. \n\nIf that test (or one like) could be extended or replicated to show the problem it would speed up the process of getting a resolution.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-01T09:29:11.395+0000","updated":"2009-07-01T09:29:11.395+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12941680","id":"12941680","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"body":"patch to apply to test class to try and replicate message redelivery problem with virtual topics.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-01T16:26:58.359+0000","updated":"2009-07-01T16:26:58.359+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12941678","id":"12941678","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for you effort and quick response to this Gary.\n\nThe reason the above test may be passing is because you are using the same connection when instantiating the consumers.\n\nThe issue is when a subsequent connection is made (or consumer is disposed) the messages get redelivered.  They do not get redelivered on the same connection.  The broker just spits out the error as mentioned in the original post of the reporter.  The next connection the broker redelivers the same messages.  The pattern repeats.\n\nAs you suggested, I've attached a patch (testPatch.patch) to extend this test and ConsumerBean to try and replicate the issue.  \n\nI'm a .NET programmer so I have replicated the problem with ActiveMQ NMS similar to how the patch does.  So forgive me if there are any syntactical errors in the java code.  :(  The logic should be correct though and hopefully we can trigger the error.\n\nIf we can trigger it, fix it, and bump this issue to 5.3 that would be great!  :)\n\nPlease keep me informed on how it goes.\n\nPS Also note the reporter attached the broker configuration and the test classes he used to trigger this error.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-01T16:27:46.884+0000","updated":"2009-07-01T16:27:46.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12941718","id":"12941718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"mark, i applied ur changes and refactored a bit more to use separate connections for each consumer, but to no avail. the test still works. Cannot do much with this till we get a failing test case. I cannot see any real difference between the test classes from the original reporter and the current test case on trunk.\nlatest test is in r792220\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-08T16:43:26.042+0000","updated":"2009-07-08T16:43:26.042+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12941713","id":"12941713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cejones","name":"cejones","key":"cejones","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chad Jones","active":true,"timeZone":"Etc/UTC"},"body":"I am out of the office until Thursday, July 9th. Please call the reference line at 414-566-6740 if you need immediate assistance.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cejones","name":"cejones","key":"cejones","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chad Jones","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-08T16:46:07.178+0000","updated":"2009-07-08T16:46:07.178+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12941725","id":"12941725","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"body":"Your auto-reply somehow got added as a comment to this JIRA issue.\n\nhttps://issues.apache.org/activemq/browse/AMQ-1763?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=52743#action_52743 \n\nWeird...\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-08T18:30:07.100+0000","updated":"2009-07-08T18:30:07.100+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483310/comment/12941730","id":"12941730","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"body":"Hey Gary.\n\nThanks for helping out on this issue.  I looked at your code and it looks like it should be replicating the problem and failing.\n\nSince it isn't, do you think you could try running the code the reporter attached.  I'm thinking if you run the producer once and then the consumer messages will come through as expected.  Then if you stop and run the consumer a second time the same messages will be redelivered.  This forsurely replicates the problem when using the ActiveMQ NMS framework.\n\nIf you could do this that would be great because maybe we are missing something in the unit test.\n\nI think if you run the reporters producer/consumer and everything works correctly then it's safe to assume this is an issue with the ActiveMQ NMS framework.\n\n-Regards\n\nPS Sorry about the previous comments.  Looks like auto-reply can be a nuisance.  Especially if you aren't aware of it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magellings","name":"magellings","key":"magellings","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Gellings","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-08T19:00:48.064+0000","updated":"2009-07-08T19:00:48.064+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-1763/votes","votes":11,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0alyn:"}}