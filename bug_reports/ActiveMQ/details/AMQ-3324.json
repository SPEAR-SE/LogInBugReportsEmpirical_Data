{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12507442","self":"https://issues.apache.org/jira/rest/api/2/issue/12507442","key":"AMQ-3324","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2011-07-01T19:14:45.983+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Oct 10 19:38:30 UTC 2011","customfield_12310420":"50502","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3946068461_*|*_6_*:*_2_*:*_110698340_*|*_4_*:*_1_*:*_8602318218","customfield_12312321":null,"resolutiondate":"2011-10-10T15:31:42.431+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3324/watchers","watchCount":3,"isWatching":false},"created":"2011-05-17T03:06:57.528+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315625","id":"12315625","description":"","name":"5.4.2","archived":false,"released":true,"releaseDate":"2010-12-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315626","id":"12315626","description":"","name":"5.5.0","archived":false,"released":true,"releaseDate":"2011-04-01"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-10-10T19:38:31.014+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Seems like support for removing some Advisories topics when their originating queue, topic, tempQueue or tempTopic is removed has not been provided.\n\nIn RegionBroker.java :\n\n    public void removeAdvisoryTopics(String destinationType, ConnectionContext context, ActiveMQDestination destination, long timeout) throws Exception {\n        if (this.brokerService.isAdvisorySupport()) {\n            String producerAdvisoryTopic = AdvisorySupport.PRODUCER_ADVISORY_TOPIC_PREFIX + destinationType + destination.getPhysicalName();\n            String consumerAdvisoryTopic = AdvisorySupport.CONSUMER_ADVISORY_TOPIC_PREFIX + destinationType + destination.getPhysicalName();\n\n            ActiveMQDestination dests[] = getDestinations();\n            for (ActiveMQDestination dest: dests) {\n                String name = dest.getPhysicalName();\n                if ( name.equals(producerAdvisoryTopic) || name.equals(consumerAdvisoryTopic) ) {\n                    try {\n                        removeDestination(context, dest, timeout);\n                    } catch (JMSException ignore) {\n                        // at least ignore the Unknown Destination Type JMSException\n                    }\n                }\n            }\n        }\n    }\n\n\n   Seem like PRODUCER_ADVISORY_TOPIC and CONSUMER_ADVISORY_TOPIC topics are the only advisories removed when originating destination is removed. Most advisories when enabled in the policy do not get removed. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479427","id":"12479427","filename":"AdvisorySupport.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-17T03:09:12.083+0000","size":30410,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12479427/AdvisorySupport.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12485075","id":"12485075","filename":"AdvisoryTempDestinationTests.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T02:02:20.638+0000","size":14811,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12485075/AdvisoryTempDestinationTests.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12485076","id":"12485076","filename":"amq_no_queue_yet.tiff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T02:05:31.763+0000","size":222882,"mimeType":"image/tiff","content":"https://issues.apache.org/jira/secure/attachment/12485076/amq_no_queue_yet.tiff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12485078","id":"12485078","filename":"amq_test_queue_advisories_created_after_sent_message_to_queue.tiff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T02:05:31.777+0000","size":157580,"mimeType":"image/tiff","content":"https://issues.apache.org/jira/secure/attachment/12485078/amq_test_queue_advisories_created_after_sent_message_to_queue.tiff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12485077","id":"12485077","filename":"amq_test_queue_created.tiff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T02:05:31.769+0000","size":137724,"mimeType":"image/tiff","content":"https://issues.apache.org/jira/secure/attachment/12485077/amq_test_queue_created.tiff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12485079","id":"12485079","filename":"amq_test_queue_removed_but_advisory_mesage_delivered_not.tiff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T02:05:31.785+0000","size":144052,"mimeType":"image/tiff","content":"https://issues.apache.org/jira/secure/attachment/12485079/amq_test_queue_removed_but_advisory_mesage_delivered_not.tiff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479428","id":"12479428","filename":"RegionBroker.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-17T03:09:12.162+0000","size":38869,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12479428/RegionBroker.java"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"81658","customfield_12312823":null,"summary":"ActiveMQ.Advisory.xxxxxx.TempQueue.xxx, AMQ.A.xxx.Queue.xxx and AMQ.A.xxx.Topic.xxx Topics don't get removed when the originating tempQueue, Queue or Topic is removed so is somewhat a memory leak","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13058717","id":"13058717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Not enough info to produce a test case.  I tried a few scenarios but couldn't create any leaks.  If you can provide a test case please reopen.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-07-01T19:14:45.983+0000","updated":"2011-07-01T19:14:45.983+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13059152","id":"13059152","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"body":"Providing test case and screenshots ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T01:59:44.326+0000","updated":"2011-07-03T01:59:44.326+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13059153","id":"13059153","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"body":"See test testAdvisoryRemovedWhenTempQueueRemoved","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T02:02:20.665+0000","updated":"2011-07-03T02:02:20.665+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13059154","id":"13059154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"body":"jconsole screenshoots on how to reproduce this problem. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T02:05:31.828+0000","updated":"2011-07-03T02:05:31.828+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13059155","id":"13059155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"body":"The attached classes provide the modifications to fix this issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","key":"marcelcasado","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-03T02:11:17.635+0000","updated":"2011-07-03T02:11:17.635+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13091970","id":"13091970","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Is it possible for you to include your fixes as a patch file, and ensure that you check the grant license to apache when you upload it, your current submissions don't have the lic grant.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-08-26T19:28:32.851+0000","updated":"2011-08-26T19:28:32.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13123127","id":"13123127","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"body":"I'm going to take a look at this one as we've been hit with a temporary destination leak that gets ugly when we setup a test environment to test failover periodically (spoke node failing between two nodes every 15 minutes).\n\nIf all goes well, I'll post the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"created":"2011-10-07T19:56:54.234+0000","updated":"2011-10-07T19:56:54.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13124015","id":"13124015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"does gc of inactive destinations, https://issues.apache.org/jira/browse/AMQ-2821 not work in this case?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-10T12:11:08.982+0000","updated":"2011-10-10T12:18:14.087+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13124172","id":"13124172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Added a test to show that the Purge inactive destinations feature handles this situation.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2011-10-10T15:31:42.486+0000","updated":"2011-10-10T15:31:42.486+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13124345","id":"13124345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"body":"We have {{gcInactiveDestinations=true}} and still see this problem.\n\nThe entire sequence of events is unclear, but it appears to be related to the network of brokers awhen producers and consumers are on different brokers.  It may also be related to failover; when we see a broker failover (even one not involved in the flow of the destinations), traffic on {{ActiveMQ.Advisory.TempTopic}} jumps.\n\nNote that messages on the {{ActiveMQ.Advisory.TempTopic}} appear to cause the destinations to be re-created as they are unmarshalled by the protocol.  That seems problematic to me - especially for temporary destinations which need to get attached to a connection.\n\nI'll try to produce a test case.\n\n*Dreaming:* I really wish I knew a way to see the sequence of all of the broker internal activity for a specific destination across the network of brokers.  Or, better yet, a way to capture that information and review it later since the specific destination involved may not be known until after the fact.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"created":"2011-10-10T18:05:58.056+0000","updated":"2011-10-10T18:05:58.056+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13124413","id":"13124413","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"Arthur, just a thought, if you don't want temp destinations to propagate across a network, use <networkConnector bridgeTempDestinations=\"false\" />\n\nA test case is the answer alright :-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-10T19:33:05.314+0000","updated":"2011-10-10T19:33:05.314+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507442/comment/13124417","id":"13124417","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"body":"Thanks Gary - we do need them to propagate across the network.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=artnaseef","name":"artnaseef","key":"artnaseef","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Arthur Naseef","active":true,"timeZone":"America/Phoenix"},"created":"2011-10-10T19:38:30.929+0000","updated":"2011-10-10T19:38:30.929+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3324/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ebpb:"}}