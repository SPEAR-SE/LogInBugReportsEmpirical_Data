{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12504150","self":"https://issues.apache.org/jira/rest/api/2/issue/12504150","key":"AMQ-3281","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315630","id":"12315630","description":"Issues that need to be reviewed - do we keep 'em or do we kick 'em? ","name":"NEEDS_REVIEW","archived":false,"released":false}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-07-05T14:12:16.897+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jan 10 16:24:31 UTC 2013","customfield_12310420":"59647","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3281/watchers","watchCount":12,"isWatching":false},"created":"2011-04-13T09:22:12.730+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315626","id":"12315626","description":"","name":"5.5.0","archived":false,"released":true,"releaseDate":"2011-04-01"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-01-10T16:24:31.420+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"Sometimes the messages stuck in queue and after restart of activemq then this messages redeliver to consumer. There are a lot of of topics:\n\nhttp://activemq.2283324.n4.nabble.com/ActiveMQ-User-f2341805.html\n\nand this some of them:\n\nhttp://activemq.2283324.n4.nabble.com/Stuck-messages-Dispatch-issues-td2367852.html\nhttp://activemq.2283324.n4.nabble.com/Messages-stuck-in-queue-td3244342.html","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12502139","id":"12502139","filename":"activemq.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-03T12:17:29.498+0000","size":436949,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12502139/activemq.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12522106","id":"12522106","filename":"activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-10T14:38:59.387+0000","size":1682,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12522106/activemq.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12522107","id":"12522107","filename":"activemq-jdbc.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-10T14:38:59.394+0000","size":4375,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12522107/activemq-jdbc.xml"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12537870","id":"12537870","filename":"debug.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-25T18:24:16.692+0000","size":341307,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12537870/debug.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"59704","customfield_12312823":null,"summary":"Messages stuck","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux and Windows","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13059887","id":"13059887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"I don't have any idea how we can resolve this problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-05T13:21:25.969+0000","updated":"2011-07-05T13:21:25.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13059917","id":"13059917","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"If you can produce a test case, there is some chance that we can investigate, without that it is impossible to know what is going on.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-05T14:12:16.897+0000","updated":"2011-07-05T14:12:16.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13073018","id":"13073018","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=malcolmdavis","name":"malcolmdavis","key":"malcolmdavis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"malcolm davis","active":true,"timeZone":"Etc/UTC"},"body":"We see a similar problem.  \n\nQueue Block: (only seen in production, unable to recreate)\n* Producer: Transactional, Session.CLIENT_ACKNOWLEDGE\n* Queue: Single consumer thread reading the queue.\n* The queue blocks when under load (receive()) does not work.  We are not sure if this is a memory or CPU issue.\n* The queue will eventually recover.\n\n\nQueue going to a single consumer on restart: (easy to recreate)\n* Create a queue with multiple consumers.\n* Stick a lot of messages on the queue, with consumers slowly pulling messages.\n* Restart ActiveMQ while messages are still on the queue.\n* All existing messages on the queue go to a single consumer.\n* New messages pushed to the queue are distributed to the other consumers as expected.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=malcolmdavis","name":"malcolmdavis","key":"malcolmdavis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"malcolm davis","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-29T21:05:07.817+0000","updated":"2011-07-29T21:05:07.817+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13108189","id":"13108189","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pgopal","name":"pgopal","key":"pgopal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pavithra","active":true,"timeZone":"Etc/UTC"},"body":"We see a similar problem. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pgopal","name":"pgopal","key":"pgopal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pavithra","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-19T22:16:43.040+0000","updated":"2011-09-19T22:16:43.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13108472","id":"13108472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"Please increase the consumer heap size to solve this issue. If you have huge number of producers run concurrent consumers.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-20T09:31:49.929+0000","updated":"2011-09-20T09:31:49.929+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13108475","id":"13108475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"Malcolm it would be great if you could report these two bugs on a different issue/thread. These are diffent from messages not getting dequeued.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-20T09:35:50.884+0000","updated":"2011-09-20T09:35:50.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13108737","id":"13108737","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"Can you please say how we can increase the consumer heap size?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-20T14:22:00.960+0000","updated":"2011-09-20T14:22:00.960+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13109280","id":"13109280","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"if you are starting the system as a java process from a .sh or a .bat supply xms and xmx parameters. http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html this could yu better info.\nIf you are starting it from an IDE like eclipse supply VM parameters in run configurations.\nI am not sure about .Net clients.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-21T05:35:50.575+0000","updated":"2011-09-21T05:35:50.575+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13112602","id":"13112602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"I extend it but that didn't help.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T14:09:21.625+0000","updated":"2011-09-22T14:09:21.625+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13112624","id":"13112624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"Can be that the reason?\n\nhttps://issues.apache.org/jira/browse/AMQ-2484\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T14:36:54.385+0000","updated":"2011-09-22T14:36:54.385+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13112634","id":"13112634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"you have got to ask the computer. Do a test with that new option enabled using a 5.6-SNAPSHOT","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T15:00:10.758+0000","updated":"2011-09-22T15:00:10.758+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13113179","id":"13113179","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"body":"Do you notice any errors on ActiveMQ or consumer?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sreepanchajanyam","name":"sreepanchajanyam","key":"sreepanchajanyam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sree Panchajanyam D","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-23T06:13:42.879+0000","updated":"2011-09-23T06:13:42.879+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13113227","id":"13113227","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"I tested it with the 5.6-SNAPSHOT and it is the same effect. I get the following warnings:\n\nWARN  | Transport failed: java.io.EOFException\nWARN  | Transport failed: java.net.SocketException: Connection reset | org.apache.activemq.broker.TransportConnection.Transport\nWARN  | Transport failed: java.net.SocketException: Software caused connection abort: socket write error | org.apache.activemq.broker.TransportConnection.Transport Async Exception Handler\nWARN  | Duplicate message add attempt rejected. Destination:\n\n\nCan be the duplicate messages the reason so that the duplicate messages can not be consume so they stuck in queue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-23T07:42:50.113+0000","updated":"2011-09-23T08:04:39.471+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13135083","id":"13135083","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"Erkan, can you attach the log files from a 5.6-SNAPSHOT.\nAdd the following to your log4j.properties:\n{code}log4j.logger.org.apache.activemq.broker.region.cursors.AbstractStoreCursor=TRACE\nlog4j.logger.org.apache.activemq.broker.region.PrefetchSubscription=TRACE{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T14:21:03.340+0000","updated":"2011-10-25T14:21:03.340+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13135824","id":"13135824","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"Gary,\n\nI will do that until friday and then upload it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-26T09:11:41.964+0000","updated":"2011-10-26T09:11:41.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13137207","id":"13137207","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"I wonder if this is your problem https://issues.apache.org/jira/browse/AMQ-3568","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-27T15:37:22.362+0000","updated":"2011-10-27T15:37:22.362+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13143067","id":"13143067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"By this log file 124 messages was stuck.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-03T12:17:29.616+0000","updated":"2011-11-03T12:17:29.616+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13143069","id":"13143069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"I uploded the log file with which 124 messages stuck. The messages stuck only after a failover process.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-03T12:18:13.979+0000","updated":"2011-11-03T12:18:13.979+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13236670","id":"13236670","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johno","name":"johno","key":"johno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johno Crawford","active":true,"timeZone":"Etc/UTC"},"body":"Can you provide your activemq.xml?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johno","name":"johno","key":"johno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johno Crawford","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-23T15:24:24.508+0000","updated":"2012-03-23T15:24:24.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13250699","id":"13250699","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"body":"In activemq xml we refence to the activemq jdbc.xml. The both configuration files are from server side not client side.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lernit.2007","name":"lernit.2007","key":"lernit.2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erkan","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-10T14:38:59.514+0000","updated":"2012-04-10T14:38:59.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13422473","id":"13422473","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"body":"Attach screenshot of my code debugging session.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-25T18:14:25.975+0000","updated":"2012-07-25T18:14:25.975+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13422474","id":"13422474","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"body":"Hello, I encountered this issue as well with ActiveMQ 5.6.0.  I attached some debugging screenshots to this issue.  \nIn my case, the messages are consumed fine during normal operation.  It *seems* when JVM becomes busy doing gc, message(s) can be left in the queue forever until the server is restarted.  It's not 100% reproducible but does occur.  In the JConsole screenshot, you see ConsumerCount=1, InFlightCount=0, and QueueSize=1.  A message is left unconsumed.\nI debugged the ActiveMQ library code.  Please see the debug-1.png and debug-2.png.  A thread regularly iterates through the queue, finds the pending messages, and tries to page in messages from kaha db store by filling a batch.  However, AbstractStoreCursor.fillBatch() doesn't  execute doFillBatch().  And the execution thread finishes without dispatching the pending message to the consumer.\nI don't know what the expected behavior should be, and I don't know if I were debugging the wrong part of the ActiveMQ code.  ActiveMQ engineers, please let me know where else I should debug to help identify the problem. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-25T18:16:38.489+0000","updated":"2012-07-25T18:16:38.489+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13422585","id":"13422585","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"@Edwin\n\nyou are in the right space. is it org.apache.activemq.broker.region.cursors.AbstractStoreCursor#storeHasMessages that is false?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-25T20:30:51.771+0000","updated":"2012-07-25T20:30:51.771+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13422587","id":"13422587","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"@Edwin, if you can produce a junit test case that reproduces >60% of the time, it would be a great start.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-25T20:32:15.084+0000","updated":"2012-07-25T20:32:15.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13422784","id":"13422784","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"body":"@Gary, yes, org.apache.activemq.broker.region.cursors.AbstractStoreCursor#storeHasMessages is false in my case.  When I manually set this variable to true in my debugging session, the execution continued into KahaDBStore but didn't get any message back from the BTree (in sd.orderIndex).\nI will try to create a test case hopefully to reproduce this issue easily.\nBest regards.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-26T00:56:14.998+0000","updated":"2012-07-26T00:56:14.998+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13457835","id":"13457835","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"body":"Any update on a test case?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davsclaus","name":"davsclaus","key":"davsclaus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=davsclaus&avatarId=15835","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=davsclaus&avatarId=15835","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=davsclaus&avatarId=15835","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=davsclaus&avatarId=15835"},"displayName":"Claus Ibsen","active":true,"timeZone":"Europe/Berlin"},"created":"2012-09-18T14:07:04.432+0000","updated":"2012-09-18T14:07:04.432+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13457929","id":"13457929","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Claus, I spent a day writing a unit test.  The unit test performed very well and seemed solid.  The issue only happens in our production system, where we also embedded Mule, Quartz, Spring, Hibernate, etc.  It's hard to simulate the right environment in a unit test.  Also, when I allocated more memory to the JVM, and switched to use parallel gc, the issue seemed to happen lot less frequently.  I tend to think that when a long full GC kicks in and application threads are stopped momentarily, it may trigger this issue to occur, but I cannot prove it.\nRegards.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=windeyu","name":"windeyu","key":"windeyu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edwin Yu","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-18T16:36:08.822+0000","updated":"2012-09-18T16:36:08.822+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504150/comment/13549760","id":"13549760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"removing this from the 5.8 critical list (blocking a release) pending a test case that can reproduce.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-10T16:24:31.414+0000","updated":"2013-01-10T16:24:31.414+0000"}],"maxResults":28,"total":28,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3281/votes","votes":8,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0al6f:"}}