{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12483816","self":"https://issues.apache.org/jira/rest/api/2/issue/12483816","key":"AMQ-2860","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2010-08-05T21:26:42.042+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Feb 03 14:39:33 UTC 2017","customfield_12310420":"43743","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_685682367_*|*_6_*:*_2_*:*_94597971_*|*_4_*:*_1_*:*_31971910386","customfield_12312321":null,"resolutiondate":"2011-08-18T15:39:17.698+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2860/watchers","watchCount":3,"isWatching":false},"created":"2010-08-04T13:49:27.395+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315624","id":"12315624","description":"Maintenance release for 5.4.0","name":"5.4.1","archived":false,"released":true,"releaseDate":"2010-09-21"}],"issuelinks":[{"id":"12345487","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12345487","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12531359","key":"AMQ-3593","self":"https://issues.apache.org/jira/rest/api/2/issue/12531359","fields":{"summary":"Messages with empty marshalledProperties","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-02-03T14:39:33.162+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_12310080":null,"description":"I am getting an error once in a while (see the log below).\nI have an impression that the EOFException is caused by the fact that the message has \"properties = null\". This looks like corrupt message. My sender sends messages of the ActiveMQMapMessage type and they all have some properties.\nThis happens to a small number of messages (compare to overall traffic), but very consistently. I handle the exception, but the information is lost.\n\n[2010-08-04 00:01:53.810] ERROR  Thread-36                    com.moon.data.rtfeed.client.ClientSubscription                    Problem reading message ActiveMQMapMessage {commandId = 2797499, responseRequired = true, messageId = ID:mcny9.mooncapital.corp-55291-1280869129156-2:1:1:1:2797495, originalDestination = null, originalTransactionId = null, producerId = ID:mcny9.mooncapital.corp-55291-1280869129156-2:1:1:1, destination = topic://MKTDATA, transactionId = null, expiration = 0, timestamp = 1280894513809, arrival = 0, brokerInTime = 1280894513809, brokerOutTime = 1280894513809, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = org.apache.activemq.util.ByteSequence@6f539d49, marshalledProperties = org.apache.activemq.util.ByteSequence@5a7b5cb8, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = true, readOnlyBody = true, droppable = false} ActiveMQMapMessage{ theTable = {} } javax.jms.JMSException: java.io.EOFException\n        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)\n        at org.apache.activemq.command.ActiveMQMessage.propertyExists(ActiveMQMessage.java:274)\n        at com.moon.data.rtfeed.client.ClientSubscription$DataTransformer.onMessage(ClientSubscription.java:463)\n        at com.moon.data.rtfeed.jms.JmsReceiver$MessageDispatcher.run(JmsReceiver.java:71)\nCaused by: java.io.EOFException: null\n        at java.io.DataInputStream.readInt(DataInputStream.java:375)\n        at org.apache.activemq.util.MarshallingSupport.unmarshalPrimitiveMap(MarshallingSupport.java:83)\n        at org.apache.activemq.util.MarshallingSupport.unmarshalPrimitiveMap(MarshallingSupport.java:73)\n        at org.apache.activemq.command.Message.unmarsallProperties(Message.java:189)\n        at org.apache.activemq.command.Message.getProperties(Message.java:162)\n        at org.apache.activemq.command.ActiveMQMessage.propertyExists(ActiveMQMessage.java:272)\n        ... 2 common frames omitted\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"172307","customfield_12312823":null,"summary":"EOFException and ActiveMQMapMessage with null properties","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483816/comment/12939104","id":"12939104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Can you reproduce this with a test case and attach it to this issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2010-08-05T21:26:42.042+0000","updated":"2010-08-05T21:26:42.042+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483816/comment/12939802","id":"12939802","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"body":"I am not sure what should be the test case. My setup is the following.\nA program with embedded broker publishes messages to a topic. Two other programs are listening to this topic, and they use selectors. The \"properties = null\" shows up for one message out of tens of thousands. basically, I see it once every 5 - 10 minutes, when the traffic is 200 - 300 per second.\n\nHere is the first question: is it even possible for a message to have \"properties = null\"?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"created":"2010-08-06T12:24:10.342+0000","updated":"2010-08-06T12:24:10.342+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483816/comment/12939114","id":"12939114","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"body":"I realized that I was running older release of java (03), so I upgraded to 21 and it looks like the problem disappeared. So it could be java bug, not ActiveMQ.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"created":"2010-08-12T12:17:29.348+0000","updated":"2010-08-12T12:17:29.348+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483816/comment/12938718","id":"12938718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"body":"I see that error again. Let's keep this case open, maybe I will be able to get more evidence later.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"created":"2010-08-13T14:34:07.324+0000","updated":"2010-08-13T14:34:07.324+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483816/comment/12938715","id":"12938715","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"body":"It is still happening in my environment.\nI did some browsing of ActiveMQ source code to understand where it may come from. \nIn my code exception happens right in the beginning of the onMessage() callback, where I am trying to call propertyExists() method on the message.\nI see that since this is the first call that requires properties information, the code in the Message class tries to create properties map from the marshalledProperties, which is a ByteSequence.\nIt fails right at the start, in readInt() call, which means that the sequence does not even have the 4 bytes (I suspect it may be empty).\n\nSo, the only explanation for this problem is that the byte sequence representing the message came from the socket truncated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"created":"2010-08-19T15:48:15.722+0000","updated":"2010-08-19T15:48:15.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483816/comment/12942942","id":"12942942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"body":"Today I upgraded to 5.4.1, and I see that the problem is still there.\nBelow is an example from today's log.\n\nI also looked at the source code. The problem obviously appears when the chunk of the byte stream that is supposed to contain marshaled properties is actually empty, so the readInt() throws exception.\n\nHere is what I think (correct me if I am wrong).\nIt is not normal for a message not to have properties object at all; if there are no properties, at least that integer you are trying to read from the stream should be there and equal to zero.\nSeems like developers had the same assumption, because nowhere I see any checks of that byte stream whether it is empty or not.\n\nSo, it appears that the message gets corrupted somewhere, either at the sender, or the broker, or the receiver.\nWouldn't it make sense to catch this problem earlier, when message object is constructed, not at the point when the user code asks for properties?\n\nUnfortunately I cannot produce any simple example that will demonstrate this problem. I can only say that I have pretty high volume of messages, and my consumers use selectors on topics. I have 3 consumers in separate JVMs.\nThe rate of this error is not high, so for many applications it might be not critical. But it may become critical for the application where each single message is important, even if there are millions of them.\n\n===========================================================================================\n[2010-09-22 14:49:28.350] ERROR  Thread-32                    com.moon.data.rtfeed.client.ClientSubscription                    Problem processing message ActiveMQMapMessage {commandId = 8197064, responseRequired = false, messageId = ID:mcny9.mooncapital.corp-51561-1285170325287-4:1:1:1:8197060, originalDestination = null, originalTransactionId = null, producerId = ID:mcny9.mooncapital.corp-51561-1285170325287-4:1:1:1, destination = topic://MKTDATA, transactionId = null, expiration = 0, timestamp = 1285181368347, arrival = 0, brokerInTime = 1285181368348, brokerOutTime = 1285181368348, correlationId = null, replyTo = null, persistent = false, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = org.apache.activemq.util.ByteSequence@5ff7f9f, marshalledProperties = org.apache.activemq.util.ByteSequence@4913a2cc, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = true, readOnlyBody = true, droppable = false} ActiveMQMapMessage{ theTable = {} } javax.jms.JMSException: java.io.EOFException\n        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)\n        at org.apache.activemq.command.ActiveMQMessage.propertyExists(ActiveMQMessage.java:278)\n        at com.moon.data.rtfeed.client.ClientSubscription$JmsMapMessageWrapper.<init>(ClientSubscription.java:497)\n        at com.moon.data.rtfeed.client.ClientSubscription$DataTransformer.onMessage(ClientSubscription.java:473)\n        at com.moon.data.rtfeed.jms.JmsReceiver$MessageDispatcher.run(JmsReceiver.java:71)\nCaused by: java.io.EOFException: null\n        at java.io.DataInputStream.readInt(DataInputStream.java:375)\n        at org.apache.activemq.util.MarshallingSupport.unmarshalPrimitiveMap(MarshallingSupport.java:83)\n        at org.apache.activemq.util.MarshallingSupport.unmarshalPrimitiveMap(MarshallingSupport.java:73)\n        at org.apache.activemq.command.Message.unmarsallProperties(Message.java:193)\n        at org.apache.activemq.command.Message.getProperties(Message.java:161)\n        at org.apache.activemq.command.ActiveMQMessage.propertyExists(ActiveMQMessage.java:276)\n        ... 3 common frames omitted\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilyevsky","name":"lilyevsky","key":"lilyevsky","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonid Ilyevsky","active":true,"timeZone":"America/New_York"},"created":"2010-09-22T19:41:03.065+0000","updated":"2010-09-22T19:41:03.065+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12483816/comment/15851565","id":"15851565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skpullano","name":"skpullano","key":"skpullano","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott K Pullano","active":true,"timeZone":"Etc/UTC"},"body":"Hey everyone this is happening for me and i am on mq client 5.13.2. Below is my error. I am using apache camel 2.16.2 with mq 5.13.2. This error occurs on the client side. The broker is using 5.10.0. I tried downgrading my client to 5.10.0 and also got the error so i ruled that out. It also only comes when under high load. If i load 1000 messages in 10 seconds i get about 20 of these. Has any seen or fixed this issue? I need a resolution asap.\n```\n2017-02-02 17:50:54,143] [WARN ] [Camel (camel-1) thread #6 - JmsConsumer Execution of JMS message listener failed. Caused by: [org.apache.camel.RuntimeCamelException - javax.jms.JMSException: java.io.EOFException]\norg.apache.camel.RuntimeCamelException: javax.jms.JMSException: java.io.EOFException\n    at org.apache.camel.component.jms.JmsBinding.extractHeadersFromJms(JmsBinding.java:193) ~[camel-jms-2.16.2.jar:2.16.2]\n    at org.apache.camel.component.jms.JmsMessage.populateInitialHeaders(JmsMessage.java:244) ~[camel-jms-2.16.2.jar:2.16.2]\n    at org.apache.camel.impl.DefaultMessage.createHeaders(DefaultMessage.java:203) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.component.jms.JmsMessage.ensureInitialHeaders(JmsMessage.java:229) ~[camel-jms-2.16.2.jar:2.16.2]\n    at org.apache.camel.component.jms.JmsMessage.getHeaders(JmsMessage.java:187) ~[camel-jms-2.16.2.jar:2.16.2]\n    at org.apache.camel.impl.DefaultUnitOfWork.<init>(DefaultUnitOfWork.java:91) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.impl.DefaultUnitOfWork.<init>(DefaultUnitOfWork.java:72) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.impl.DefaultUnitOfWorkFactory.createUnitOfWork(DefaultUnitOfWorkFactory.java:34) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.processor.CamelInternalProcessor$UnitOfWorkProcessorAdvice.createUnitOfWork(CamelInternalProcessor.java:663) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.processor.CamelInternalProcessor$UnitOfWorkProcessorAdvice.before(CamelInternalProcessor.java:631) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.processor.CamelInternalProcessor$UnitOfWorkProcessorAdvice.before(CamelInternalProcessor.java:608) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:138) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:87) ~[camel-core-2.16.2.jar:2.16.2]\n    at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:112) ~[camel-jms-2.16.2.jar:2.16.2]\n    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:689) ~[spring-jms-4.1.9.RELEASE.jar:4.1.9.RELEASE]\n    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:649) ~[spring-jms-4.1.9.RELEASE.jar:4.1.9.RELEASE]\n    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:619) ~[spring-jms-4.1.9.RELEASE.jar:4.1.9.RELEASE]\n    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:307) [spring-jms-4.1.9.RELEASE.jar:4.1.9.RELEASE]\n    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:245) [spring-jms-4.1.9.RELEASE.jar:4.1.9.RELEASE]\n    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1144) [spring-jms-4.1.9.RELEASE.jar:4.1.9.RELEASE]\n    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1136) [spring-jms-4.1.9.RELEASE.jar:4.1.9.RELEASE]\n    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:1033) [spring-jms-4.1.9.RELEASE.jar:4.1.9.RELEASE]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_51]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_51]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_51]\nCaused by: javax.jms.JMSException: java.io.EOFException\n    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:72) ~[activemq-client-5.13.2.jar:5.13.2]\n    at org.apache.activemq.command.ActiveMQMessage.getPropertyNames(ActiveMQMessage.java:331) ~[activemq-client-5.13.2.jar:5.13.2]\n    at org.apache.camel.component.jms.JmsBinding.extractHeadersFromJms(JmsBinding.java:191) ~[camel-jms-2.16.2.jar:2.16.2]\n    ... 25 common frames omitted\nCaused by: java.io.EOFException: null\n    at java.io.DataInputStream.readUnsignedShort(DataInputStream.java:340) ~[na:1.8.0_51]\n    at java.io.DataInputStream.readUTF(DataInputStream.java:589) ~[na:1.8.0_51]\n    at java.io.DataInputStream.readUTF(DataInputStream.java:564) ~[na:1.8.0_51]\n    at org.apache.activemq.util.MarshallingSupport.unmarshalPrimitiveMap(MarshallingSupport.java:97) ~[activemq-client-5.13.2.jar:5.13.2]\n    at org.apache.activemq.util.MarshallingSupport.unmarshalPrimitiveMap(MarshallingSupport.java:78) ~[activemq-client-5.13.2.jar:5.13.2]\n    at org.apache.activemq.util.MarshallingSupport.unmarshalPrimitiveMap(MarshallingSupport.java:70) ~[activemq-client-5.13.2.jar:5.13.2]\n    at org.apache.activemq.command.Message.unmarsallProperties(Message.java:222) ~[activemq-client-5.13.2.jar:5.13.2]\n    at org.apache.activemq.command.Message.getProperties(Message.java:188) ~[activemq-client-5.13.2.jar:5.13.2]\n    at org.apache.activemq.command.ActiveMQMessage.getPropertyNames(ActiveMQMessage.java:316) ~[activemq-client-5.13.2.jar:5.13.2]\n    ... 26 common frames omitted\n```","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skpullano","name":"skpullano","key":"skpullano","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott K Pullano","active":true,"timeZone":"Etc/UTC"},"created":"2017-02-03T14:39:33.162+0000","updated":"2017-02-03T14:39:33.162+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2860/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tuun:"}}