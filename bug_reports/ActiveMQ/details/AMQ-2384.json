{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12482807","self":"https://issues.apache.org/jira/rest/api/2/issue/12482807","key":"AMQ-2384","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315623","id":"12315623","description":"version 5 feature complete","name":"5.4.0","archived":false,"released":true,"releaseDate":"2010-08-17"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-09-14T14:43:23.778+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 12 09:33:03 UTC 2010","customfield_12310420":"74962","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_17407015291_*|*_5_*:*_2_*:*_84862766_*|*_4_*:*_1_*:*_1375318","customfield_12312321":null,"resolutiondate":"2010-04-01T16:57:10.818+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2384/watchers","watchCount":1,"isWatching":false},"created":"2009-09-11T05:42:57.443+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315619","id":"12315619","description":"","name":"5.2.0","archived":false,"released":true,"releaseDate":"2008-11-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-07-12T09:33:22.543+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313893","id":"12313893","name":"Connector"}],"timeoriginalestimate":null,"customfield_12310080":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10091","value":"Regression","id":"10091"}],"description":"On running a Tenable nessus scan against the machine where ActiveMQ is running, we see that the port 61616 , the TCP connector port accepts Low and Medium strength ciphers by default. This may be a security risk and therefore we need a way to specify which ciphers to support.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461530","id":"12461530","filename":"setSslSocketOptions.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-09-17T15:14:30.938+0000","size":3284,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461530/setSslSocketOptions.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12461641","id":"12461641","filename":"SSLEnableCiphers.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"created":"2010-03-30T17:26:57.093+0000","size":5432,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12461641/SSLEnableCiphers.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"159876","customfield_12312823":null,"summary":"The activeMQ port supports low and medium strength ciphers ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schandrashekar","name":"schandrashekar","key":"schandrashekar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shrisha Chandrashekar","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schandrashekar","name":"schandrashekar","key":"schandrashekar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shrisha Chandrashekar","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"We are running the ActiveMQ 5.2.0  over a SLES 11 64 bit  machine. In the configuration file activemq.xml there is no way to specify the supported ciphers. ","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12941621","id":"12941621","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"if introspection support can deal with a string[], uri parameters of the form \"socket.xxx\" could do it on the server url to set the enabled cipher suites on an ssl socket. Configuration of the tls layer could also achieve this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-09-14T14:43:23.778+0000","updated":"2009-09-14T14:43:23.778+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12941020","id":"12941020","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schandrashekar","name":"schandrashekar","key":"schandrashekar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shrisha Chandrashekar","active":true,"timeZone":"Etc/UTC"},"body":"Ya.. i tried specifying the ciphers as a uri parameter \"socket.enabledCipherSuites\" , by using comma separated strings , seems like this does not work. I dont think the introspection support can deal with String[].  We want to do this at the application level rather than at the system level so configuring the tls layer is not a good alternative. I feel we need to provide a tag for specifying the ciphers under the <TransportConnector> , but not sure if its the right way to do this. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schandrashekar","name":"schandrashekar","key":"schandrashekar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shrisha Chandrashekar","active":true,"timeZone":"Etc/UTC"},"created":"2009-09-16T11:26:22.628+0000","updated":"2009-09-16T11:26:22.628+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12941264","id":"12941264","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"this is a patch that makes an effort to get setting ssl options via ?transport.XX options but there is a problem with permissions on it atm","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2009-09-17T15:14:31.080+0000","updated":"2009-09-17T15:14:31.080+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942121","id":"12942121","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"body":"Is this the correct way to set the SSL enabledCipherSuites with this patch applied?\n\n        <transportConnectors>\n            <transportConnector name=\"openwire\" uri=\"ssl://0.0.0.0:61616?transport.enabledCipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA\"/>\n        </transportConnectors>","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"created":"2010-03-23T12:03:11.226+0000","updated":"2010-03-23T12:03:11.226+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942126","id":"12942126","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"The patch just allows list values to be passed as arguments, from the test in the patch, it looks like {code}return \"ssl://localhost:0?transport.enabledCipherSuites=das,ras\"{code} is what is expected.\n\nThe values are passed to http://java.sun.com/j2se/1.5.0/docs/api/javax/net/ssl/SSLSocket.html#setEnabledCipherSuites(java.lang.String[]) so they need to match whatever is returned from http://java.sun.com/j2se/1.5.0/docs/api/javax/net/ssl/SSLSocket.html#getEnabledCipherSuites()\n\nWhat are you seeing?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-03-23T14:02:02.465+0000","updated":"2010-03-23T14:02:02.465+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942117","id":"12942117","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"body":"Gary - That was operator error on my part.  I assumed this was setup with a default of \"das,ras\" but was also configurable in the activemq.xml.  I should have known better since I didn't see anything in the patch to allow that.  I think I picked up exactly what was expected in my scan.  I'll rebuild after setting my preferred cipher suites and check again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"created":"2010-03-23T15:42:41.302+0000","updated":"2010-03-23T15:42:41.302+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942138","id":"12942138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"body":"Actually, I looked at the test case and modified my transport connector config in what I thought was the way to enable the ciphers I wanted with:\n\n<transportConnector name=\"openwire\" uri=\"ssl://0.0.0.0:61616?transport.enabledCipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA\"/>\n\nIt looks to me when running an SSL scan that this is not being set.  When I run a PCI scan against a similarly configured Tomcat instance I see the weak ciphers are disabled.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"created":"2010-03-23T17:47:17.937+0000","updated":"2010-03-23T17:47:17.937+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942258","id":"12942258","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"body":"Gary - Have I enabled the CipherSuites correctly with the URI shown above?  It seems to match the test case.  Thanks, Phil","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"created":"2010-03-25T15:57:16.770+0000","updated":"2010-03-25T15:57:16.770+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942272","id":"12942272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"Phil, recall that I never got this patch to work completely, I got some weird permissions errors. The main bit of the patch was to allow lists to be set as properties. It may need some more work and some more tests. It was only intended as  place holder for a 'good start' to a solution.\nGary.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-03-25T16:47:56.275+0000","updated":"2010-03-25T16:47:56.275+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942366","id":"12942366","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"body":"Gary, I've added a couple mods to the SslTransportServer.java class and created a new 5.3-based patch (SSLEnableCiphers.patch) containing these along your changes.  With the resulting activemq-core-5.3.0.jar and transportConnect:\n\n            <transportConnector name=\"openwire\" uri=\"ssl://0.0.0.0:61616?transport.enabledCipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA\"/>\n\nI am able to disable low ciphers.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"created":"2010-03-30T17:25:09.301+0000","updated":"2010-03-30T17:25:09.301+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942380","id":"12942380","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"body":"ActiveMQ 5.3 based patch to implement transport's enabledCipherSuites option.\n\nMy activemq.xml is standard for 5.3 with the following additions:\n\n        <amq:sslContext>\n            <amq:sslContext\n                protocol=\"SSLv3\"\n                keyStore=\"file:${activemq.base}/SSL/broker.ks\" keyStorePassword=\"changeit\"\n                trustStore=\"file:${activemq.base}/SSL/client.ts\" trustStorePassword=\"changeit\"/>\n        </amq:sslContext>\n\n-- and --\n\n        <transportConnectors>\n            <transportConnector name=\"openwire\" uri=\"ssl://0.0.0.0:61616?transport.enabledCipherSuites=SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA\"/>\n        </transportConnectors>\n\nMy goal was to disable low ciphers as documented here for Tomcat:\n\nhttp://www.cpug.org/forums/check-point-utm-1-appliances/11716-pci-vulnerability-assessment-report-utm-1-total-security-570-a.html\n\nTo test this, I used the ssl-cipher-check.pl script from http://www.unspecific.com/ssl/.  With the above transport URI (and without the enabledCipherSuites option and the patch) the script returns 22 total ciphers and 10 WEAK ciphers.  With the patch and the option, the script returns 6 ciphers found.  See output below.\n\nPhil\n\n[phil@fedora12 perl]$ ./ssl-cipher-check.pl localhost 61616\nTesting localhost:61616\n   SSLv3:RC4-MD5 - ENABLED - STRONG 128 bits \n   SSLv3:EDH-RSA-DES-CBC3-SHA - ENABLED - STRONG 168 bits \n** SSLv3:EDH-RSA-DES-CBC-SHA - ENABLED - WEAK 56 bits **\n   SSLv3:DHE-RSA-AES128-SHA - ENABLED - STRONG 128 bits \n   SSLv3:DES-CBC3-SHA - ENABLED - STRONG 168 bits \n   SSLv3:RC4-SHA - ENABLED - STRONG 128 bits \n** SSLv3:EXP-EDH-RSA-DES-CBC-SHA - ENABLED - WEAK 40 bits **\n** SSLv3:DES-CBC-SHA - ENABLED - WEAK 56 bits **\n** SSLv3:EXP-RC4-MD5 - ENABLED - WEAK 40 bits **\n** SSLv3:EXP-DES-CBC-SHA - ENABLED - WEAK 40 bits **\n   SSLv3:AES128-SHA - ENABLED - STRONG 128 bits \n\n   TLSv1:RC4-MD5 - ENABLED - STRONG 128 bits \n   TLSv1:EDH-RSA-DES-CBC3-SHA - ENABLED - STRONG 168 bits \n** TLSv1:EDH-RSA-DES-CBC-SHA - ENABLED - WEAK 56 bits **\n   TLSv1:DHE-RSA-AES128-SHA - ENABLED - STRONG 128 bits \n   TLSv1:DES-CBC3-SHA - ENABLED - STRONG 168 bits \n   TLSv1:RC4-SHA - ENABLED - STRONG 128 bits \n** TLSv1:EXP-EDH-RSA-DES-CBC-SHA - ENABLED - WEAK 40 bits **\n** TLSv1:DES-CBC-SHA - ENABLED - WEAK 56 bits **\n** TLSv1:EXP-RC4-MD5 - ENABLED - WEAK 40 bits **\n** TLSv1:EXP-DES-CBC-SHA - ENABLED - WEAK 40 bits **\n   TLSv1:AES128-SHA - ENABLED - STRONG 128 bits \n\n\nWARNING: Self Signed Certificate\n*WARNING* 10 WEAK Ciphers Enabled.\nTotal Ciphers Enabled: 22\n[phil@fedora12 perl]$ ./ssl-cipher-check.pl localhost 61616\nTesting localhost:61616\n   SSLv3:RC4-MD5 - ENABLED - STRONG 128 bits \n   SSLv3:EDH-RSA-DES-CBC3-SHA - ENABLED - STRONG 168 bits \n   SSLv3:RC4-SHA - ENABLED - STRONG 128 bits \n\n   TLSv1:RC4-MD5 - ENABLED - STRONG 128 bits \n   TLSv1:EDH-RSA-DES-CBC3-SHA - ENABLED - STRONG 168 bits \n   TLSv1:RC4-SHA - ENABLED - STRONG 128 bits \n\n\nWARNING: Self Signed Certificate\nTotal Ciphers Enabled: 6\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phil.pickett%40springsource.com","name":"phil.pickett@springsource.com","key":"phil.pickett@springsource.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Pickett","active":true,"timeZone":"America/Denver"},"created":"2010-03-30T17:27:00.148+0000","updated":"2010-03-30T19:55:24.699+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942368","id":"12942368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schandrashekar","name":"schandrashekar","key":"schandrashekar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shrisha Chandrashekar","active":true,"timeZone":"Etc/UTC"},"body":"Phil,\n\nSo will this fix be available with 5.4.0 ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schandrashekar","name":"schandrashekar","key":"schandrashekar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shrisha Chandrashekar","active":true,"timeZone":"Etc/UTC"},"created":"2010-03-31T03:36:24.764+0000","updated":"2010-03-31T03:36:24.764+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942082","id":"12942082","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"applied some changes in r929618 to support this so that it will make 5.4\n\nPhil, I did not apply your patch directly but went back to why the introspector was not working and there was a simple fix to ensure we did not reference the internal tls impl class for reflection. With that change, it is possible to set arbitrary options on SSLServerSocket via transportOptions and with the properties editor to pass a string array argument.\n\nI added some test that demonstrate. Thanks for your work on this and the patch, it helped :-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-03-31T16:59:52.713+0000","updated":"2010-03-31T16:59:52.713+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942090","id":"12942090","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djencks","name":"djencks","key":"djencks","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Jencks","active":true,"timeZone":"America/Los_Angeles"},"body":"The change introduces a pretty hard dependency on spring classes, otherwise unnecessary to run amq (geronimo is running amq under aries bluerpint).  Geronimo has some code that produces a StringArrayEditor, I'll look into porting it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djencks","name":"djencks","key":"djencks","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Jencks","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-01T16:34:15.484+0000","updated":"2010-04-01T16:34:15.484+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942096","id":"12942096","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djencks","name":"djencks","key":"djencks","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Jencks","active":true,"timeZone":"America/Los_Angeles"},"body":"Adapted geronimo code for StringArrayEditor in rev 930041.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djencks","name":"djencks","key":"djencks","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Jencks","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-01T16:57:10.817+0000","updated":"2010-04-01T16:57:10.817+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12941332","id":"12941332","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mwc_tonesoft","name":"mwc_tonesoft","key":"mwc_tonesoft","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Chen","active":true,"timeZone":"Etc/UTC"},"body":"David and Gary,\n\nI need to backport this fix to 5.3.2, but I can only see IntrospectionSupport.java and StringArrayEditor.java changes in the trunk. The SslTransportServer.java change attached by Phil (SSLEnableCiphers.patch) is not in the trunk.\n\nWhat are the changes beside those former two?\n\nThanks\n\n--Michael","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mwc_tonesoft","name":"mwc_tonesoft","key":"mwc_tonesoft","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Chen","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-09T23:29:12.015+0000","updated":"2010-07-09T23:29:12.015+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12482807/comment/12942469","id":"12942469","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"body":"There are no more changes required. That is it, http://fisheye6.atlassian.com/changelog/activemq?cs=929618 and 930041\nNote the test  /activemq/trunk/activemq-core/src/test/java/org/apache/activemq/transport/tcp/SslBrokerServiceTest.java  that will show that it works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gtully","name":"gtully","key":"gtully","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gary Tully","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-12T09:33:03.924+0000","updated":"2010-07-12T09:33:22.503+0000"}],"maxResults":17,"total":17,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-2384/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rq4f:"}}