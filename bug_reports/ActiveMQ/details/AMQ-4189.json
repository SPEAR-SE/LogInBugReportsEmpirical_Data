{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12617693","self":"https://issues.apache.org/jira/rest/api/2/issue/12617693","key":"AMQ-4189","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-11-28T23:42:43.895+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 05 21:59:55 UTC 2012","customfield_12310420":"292207","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_779521288_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-12-05T21:56:05.818+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4189/watchers","watchCount":8,"isWatching":false},"created":"2012-11-26T21:24:04.550+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321258","id":"12321258","description":"Next v5 maintenance release","name":"5.7.0","archived":false,"released":true,"releaseDate":"2012-10-08"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-12-05T21:59:55.422+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319603","id":"12319603","name":"activemq-pool","description":"The ActiveMQ Connection Pool"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"  <!-- JMS ConnectionFactory to use, configuring the embedded broker using XML -->\n  <amq:connectionFactory id=\"jmsFactory\" brokerURL=\"vm://localhost\"/>\n  \n\n  <!-- Spring JMS Template -->\n  <bean id=\"myJmsTemplate\" class=\"org.springframework.jms.core.JmsTemplate\">\n    <property name=\"connectionFactory\">\n      <!-- lets wrap in a pool to avoid creating a connection per send -->\n      <bean class=\"org.springframework.jms.connection.SingleConnectionFactory\">\n        <property name=\"targetConnectionFactory\">\n          <ref local=\"jmsFactory\" />\n        </property>\n      </bean>\n    </property>\n  </bean>\n\nhere if we use org.apache.activemq.pool.PooledConnectionFactory  instead of org.springframework.jms.connection.SingleConnectionFactory, \n\nwe are receiving org.springframework.beans.factory.BeanCreationException: Initialization of bean failed; nested exception is java.lang.reflect.MalformedParameterizedTypeException \n\nWe got this when we upgraded from ActiveMQ 5.4 to 5.7","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12555530","id":"12555530","filename":"ConnectionPoolTest.java","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"created":"2012-11-30T17:09:28.511+0000","size":589,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12555530/ConnectionPoolTest.java"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12555531","id":"12555531","filename":"jms-local-test.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"created":"2012-11-30T17:09:28.513+0000","size":2211,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12555531/jms-local-test.xml"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"160267","customfield_12312823":null,"summary":"PooledConnectionFactory with JmsTemplate results in MalformedParameterizedTypeException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Tomcat 7.0.27\nSpring 3.1.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13506053","id":"13506053","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nvilmer","name":"nvilmer","key":"nvilmer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Norm Vilmer","active":true,"timeZone":"Etc/UTC"},"body":"I am having the same issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nvilmer","name":"nvilmer","key":"nvilmer","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Norm Vilmer","active":true,"timeZone":"Etc/UTC"},"created":"2012-11-28T23:42:43.895+0000","updated":"2012-11-28T23:42:43.895+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507285","id":"13507285","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=robinsk","name":"robinsk","key":"robinsk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robin Skoglund","active":true,"timeZone":"Europe/Berlin"},"body":"We had the same issue, and found it to be a version mismatch (transitive dependencies, ahoy!) between commons-pool 1.4 (used by commons-dbcp) and 1.7 (used by activemq-pool). Solved it by excluding commons-pool from the commons-dbcp dependency.\n\nNot saying that this is a proper fix/workaround, or even related to your issues, but it worked for us. Watching this issue to see what the amq guys will say.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=robinsk","name":"robinsk","key":"robinsk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robin Skoglund","active":true,"timeZone":"Europe/Berlin"},"created":"2012-11-30T11:59:00.968+0000","updated":"2012-11-30T11:59:00.968+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507386","id":"13507386","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Can you put together a little unit test to show the problem, we can take a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-11-30T15:45:37.656+0000","updated":"2012-11-30T15:45:37.656+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507457","id":"13507457","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"body":"Attached are spring xml config file and just a simple junit test. It does not test anything. You will be able to see the issue when you actually run the test during loading application context. I have also included the code for singleConnectionFactory (commented out in xml) which runs successfully. \n\nJunit4; Spring 3.1 and ActiveMQ 5.7\n\nStack trace: \njava.lang.IllegalStateException: Failed to load ApplicationContext\n\tat org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jmsPooledConnectionFactory' defined in class path resource [spring/jms-local-test.xml]: Initialization of bean failed; nested exception is java.lang.reflect.MalformedParameterizedTypeException\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)\n\tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)\n\tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)\n\tat org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)\n\tat org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)\n\tat org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)\n\t... 24 more\nCaused by: java.lang.reflect.MalformedParameterizedTypeException\n\tat sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.validateConstructorArguments(ParameterizedTypeImpl.java:42)\n\tat sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.<init>(ParameterizedTypeImpl.java:35)\n\tat sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.make(ParameterizedTypeImpl.java:77)\n\tat sun.reflect.generics.factory.CoreReflectionFactory.makeParameterizedType(CoreReflectionFactory.java:86)\n\tat sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:122)\n\tat sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:31)\n\tat sun.reflect.generics.repository.MethodRepository.getReturnType(MethodRepository.java:50)\n\tat java.lang.reflect.Method.getGenericReturnType(Method.java:236)\n\tat org.springframework.core.GenericTypeResolver.resolveReturnType(GenericTypeResolver.java:98)\n\tat org.springframework.beans.GenericTypeAwarePropertyDescriptor.getPropertyType(GenericTypeAwarePropertyDescriptor.java:129)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.isExcludedFromDependencyCheck(AbstractAutowireCapableBeanFactory.java:1269)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.filterPropertyDescriptorsForDependencyCheck(AbstractAutowireCapableBeanFactory.java:1245)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1101)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n\t... 37 more\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"created":"2012-11-30T17:09:28.515+0000","updated":"2012-11-30T17:09:28.515+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507472","id":"13507472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"body":"[~robinsk]\nWe were using commons-pool 1.5.4 and when I replaced it with 1.6, we are not getting the issue anymore. But, I am concerned as per your comment that this could just be a temporary fix.\n\nwhen using the above, I have run into the following issue that was supposedly fixed in 5.4.2  -  org.apache.activemq.transport.TransportDisposedIOException\nI found the below issue logged in this forum\n\n https://issues.apache.org/jira/browse/AMQ-2902","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"created":"2012-11-30T17:25:02.722+0000","updated":"2012-11-30T19:36:39.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507641","id":"13507641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Ran the test with a 5.8-SNAPSHOT build an everything seems fine. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-11-30T20:48:42.259+0000","updated":"2012-11-30T20:48:42.259+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507644","id":"13507644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"body":"It works in the test. But, 2902 - org.apache.activemq.transport.TransportDisposedIOException occurs while shutting down the application in TC server.\nAlso, 5.8 is an unreleased version and we cant use it in production yet","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"created":"2012-11-30T20:54:50.763+0000","updated":"2012-11-30T20:54:50.763+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507647","id":"13507647","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"You can submit a better unit test that can be added in activemq-spring we can make sure things get fixed up for the v5.8 release. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-11-30T21:06:22.607+0000","updated":"2012-11-30T21:06:22.607+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507649","id":"13507649","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"body":"Thanks Timothy. I appreciate your help.\nIs there a way I can get 5.8 version to test at my end","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"created":"2012-11-30T21:11:11.783+0000","updated":"2012-11-30T21:13:10.673+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13507666","id":"13507666","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Grab the latest one from the SNAPSHOT repo:\nhttps://repository.apache.org/content/repositories/snapshots/org/apache/activemq/apache-activemq/5.8-SNAPSHOT/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-11-30T21:36:25.835+0000","updated":"2012-11-30T21:36:25.835+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13510509","id":"13510509","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiri.patera","name":"jiri.patera","key":"jiri.patera","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jiri Patera","active":true,"timeZone":"Europe/Berlin"},"body":"I can see that the {{activemq-pool}} artifact depends on the {{commons-pool:1.6}} artifact:\n\n{code}\n[INFO] +- org.apache.activemq:activemq-pool:jar:5.7.0:compile\n[INFO] |  +- org.slf4j:slf4j-api:jar:1.6.6:compile\n[INFO] |  +- org.apache.activemq:activemq-core:jar:5.7.0:compile\n[INFO] |  +- org.apache.geronimo.specs:geronimo-jta_1.0.1B_spec:jar:1.0.1:compile\n[INFO] |  \\- commons-pool:commons-pool:jar:1.6:compile\n{code}\n\nWhat happened in our case was that in the project we had the {{commons-pool:1.5.4}} artifact placed closer to the dependency tree root and, thus, it was winning:\n\n{code}\n<dependencies>\n  <dependency>\n    <groupId>org.apache.activemq</groupId>\n    <artifactId>activemq-pool</artifactId>\n    <version>5.7.0</version>\n  </dependency>\n  <dependency>\n    <groupId>commons-pool</groupId>\n    <artifactId>commons-pool</artifactId>\n    <version>1.5.4</version>\n  </dependency>\n</dependencies>\n{code}\n\nThat produces the following dependency tree ({{mvn dependency:tree -Dverbose -Dincludes=:commons-pool:}}):\n\n{code}\n[INFO] com.gk-software.test:test-b:jar:1.0.0-SNAPSHOT\n[INFO] +- org.apache.activemq:activemq-pool:jar:5.7.0:compile\n[INFO] |  \\- (commons-pool:commons-pool:jar:1.6:compile - omitted for conflict with 1.5.4)\n[INFO] \\- commons-pool:commons-pool:jar:1.5.4:compile\n{code}\n\nThe problematic method is: \n{{public org.apache.commons.pool.ObjectPoolFactory org.apache.activemq.pool.PooledConnectionFactory.getPoolFactory()}}\n\nIts return type is being inspected by the following method: {{org.springframework.core.GenericTypeResolver.resolveReturnType(Method, Class)}}\n\nWhich in turn calls Java Reflection API: {{method.getGenericReturnType()}}\n\nAnd this produces the {{java.lang.reflect.MalformedParameterizedTypeException}} exception in case the {{commons-pool:1.5.4}} is on the classpath instead of the correct {{commons-pool:1.6}}. So the key difference between these two versions is [this change of the generic type|http://grepcode.com/file_/repo1.maven.org/maven2/commons-pool/commons-pool/1.5.4/org/apache/commons/pool/ObjectPoolFactory.java/?v=diff&id2=1.6].\n\nSo from my point of view this is not an issue of the {{activemq-pool}} artifact, but of a Maven dependency tree (or classpath) in the user's project.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiri.patera","name":"jiri.patera","key":"jiri.patera","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jiri Patera","active":true,"timeZone":"Europe/Berlin"},"created":"2012-12-05T14:45:03.101+0000","updated":"2012-12-05T14:47:58.481+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13510814","id":"13510814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"I don't see there's a whole lot we can do here as its more of an issue with the mixed versions being pulled in by this particular project configuration.  Can you update your project to use the commons-pool v1.6.0 ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-12-05T21:52:40.115+0000","updated":"2012-12-05T21:52:40.115+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13510818","id":"13510818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"body":"I have already done that. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"created":"2012-12-05T21:54:52.413+0000","updated":"2012-12-05T21:54:52.413+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13510820","id":"13510820","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"body":"The issue was fixed by using commons-pool 1.6 with ActiveMQ 5.7","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pragadeesh","name":"pragadeesh","key":"pragadeesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pragadeesh Prakasam","active":true,"timeZone":"America/Chicago"},"created":"2012-12-05T21:56:05.835+0000","updated":"2012-12-05T21:56:05.835+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12617693/comment/13510823","id":"13510823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"ok, thanks for closing the loop on this. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-12-05T21:59:55.422+0000","updated":"2012-12-05T21:59:55.422+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-4189/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0rsjb:"}}