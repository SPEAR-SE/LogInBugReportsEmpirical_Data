{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12600391","self":"https://issues.apache.org/jira/rest/api/2/issue/12600391","key":"AMQ-3948","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311210","id":"12311210","key":"AMQ","name":"ActiveMQ","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311210&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311210&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311210&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311210&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11160","id":"11160","description":"ActiveMQ","name":"ActiveMQ"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315630","id":"12315630","description":"Issues that need to be reviewed - do we keep 'em or do we kick 'em? ","name":"NEEDS_REVIEW","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2012-07-27T13:27:09.696+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Aug 23 20:12:08 UTC 2012","customfield_12310420":"302759","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2414945413_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-08-23T20:12:08.794+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3948/watchers","watchCount":2,"isWatching":false},"created":"2012-07-26T21:23:03.417+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12318548","id":"12318548","name":"5.4.3","archived":false,"released":true,"releaseDate":"2011-10-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-08-23T20:12:08.826+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313892","id":"12313892","name":"Broker"}],"timeoriginalestimate":null,"customfield_12310080":null,"description":"We have a java web-service (running in Jetty) that dynamically instantiates an ActiveMQ queue and send messages to the queue - the messages are integers (i.e. 1, 2, 3, etc). We have from one to many consumers that read from this queue to process these messages. Each consumer is started from a single process but each consumer is running in it's own thread or process. When we have multiple consumers running, they occasionally will pick up the same integer or message from the queue. This is not desired. If a consumer reads a message, we don't want other consumers to retrieve that same message. We're fairly new to ActiveMQ but those we're telling about this issue said it should not be happening. They think it might be that we have an ActiveMQ configuration issue. Could be we need to set a property to prevent this. Just looking for some help. I've attached our applicationContext-mcp-parallelization-activemq XML. We could have configured this incorrectly. We're using the internalAmqConnectionFactory for this queue.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12538080","id":"12538080","filename":"applicationContext-mcp-parallelization-activemq.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-26T21:25:03.563+0000","size":4441,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12538080/applicationContext-mcp-parallelization-activemq.xml"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310041":null,"customfield_12310921":null,"customfield_12310920":"249809","customfield_12312823":null,"summary":"Multiple consumers retrieving same message from ActiveMQ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"ActiveMQ 5.4.3 running on 64-bit Windows 7 OS. 64-bit JDK. ","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12600391/comment/13423860","id":"13423860","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"Messages can be redelivered if your client fails to ACK them.  Can you provide a unit test that shows your issue?  Since you are on an old release its a good idea to give the latest release a try as well to see if your issue has been addressed. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-07-27T13:27:09.696+0000","updated":"2012-07-27T13:27:09.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12600391/comment/13424872","id":"13424872","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"body":"I have tried using ActiveMQ 5.6 and the same issue is seen there. This typically happens when multiple consumers attempt to retrieve a message at the same time. Our consumers spit out logs and the logged messages occur within the same second. If the timing is outside of that, this issue is not seen and messages are retrieved normally. If our client was failing to do something, I would expect this redelivery to occur all the time. The timing on this also makes it difficult to lock down in a unit test, though we can try. Would our logs or the activemq logs be helpful here?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-30T14:09:11.202+0000","updated":"2012-07-30T14:09:11.202+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12600391/comment/13425200","id":"13425200","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"body":"You can attach any info you have, however without a unit test showing your use-case and the problem being seen it will be hard for anyone to go much further on this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tabish121","name":"tabish121","key":"tabish121","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tabish121&avatarId=25249","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tabish121&avatarId=25249","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tabish121&avatarId=25249","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tabish121&avatarId=25249"},"displayName":"Timothy Bish","active":true,"timeZone":"America/Havana"},"created":"2012-07-30T20:34:21.425+0000","updated":"2012-07-30T20:34:21.425+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12600391/comment/13440609","id":"13440609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"body":"Thanks Timothy. No need to go any further anyway. We couldn't reproduce the problem with a j-unit - activemq worked fine in that scenario. So we looked elsewhere for the issue and found it to be something internal to our application. We've fixed that - works fine now. Resolving.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-23T20:11:31.865+0000","updated":"2012-08-23T20:11:31.865+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12600391/comment/13440611","id":"13440611","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"body":"Problem found in our application, not ActiveMQ.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jroberts2309","name":"jroberts2309","key":"jroberts2309","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joe Roberts","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-23T20:12:08.824+0000","updated":"2012-08-23T20:12:08.824+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/AMQ-3948/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1756v:"}}