[This has been fixed in 4.1, 
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12847
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12846
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12845
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12844
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12843
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12840
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12835
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12834
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12832
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12831
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12828
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12827
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12826
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12825
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12824
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12823
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12822
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12821
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12820
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12819
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12818
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12817
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12816
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12815
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12814
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12813
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12812
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12811
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12810
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12808
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12807
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12806
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12805
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12804
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12802
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12801
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12800
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12799
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12798
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12797
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12796
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12795
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12794
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12793
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12792
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12791
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12790
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12789
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12788
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12787
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12786
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12785
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12784
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12783
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12782
http://www.srcf.ucam.org/curling/forum/phpBB-2.0.17/phpBB2/viewtopic.php?t=12780

http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=451
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=450
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=449
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=448
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=447
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=446
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=445
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=444
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=443
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=442
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=441
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=440
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=439
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=438
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=437
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=436
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=435
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=434
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=433
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=432
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=431
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=430
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=429
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=428
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=427
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=426
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=425
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=424
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=423
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=422
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=421
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=420
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=419
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=418
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=417
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=416
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=415
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=414
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=413
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=412
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=411
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=410
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=409
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=408
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=407
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=406
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=405
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=404
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=403
http://www.ibiblio.org/uncstv/forum/viewtopic.php?t=402
http://tnij.org/qlk
http://tnij.org/qlm
http://tnij.org/qlq
http://tnij.org/qlt
http://tnij.org/qlu
http://tnij.org/qlv
http://tnij.org/qlw
http://tnij.org/qly
http://tnij.org/qlz
http://tnij.org/ql0
http://tnij.org/ql1
http://tnij.org/ql2
http://tnij.org/ql3
http://tnij.org/ql4
http://tnij.org/ql5
http://lame.name/1365
http://lame.name/1366
http://lame.name/1367
http://lame.name/1368
http://lame.name/1369
http://lame.name/1370
http://lame.name/1371
http://lame.name/1372
http://lame.name/1373
http://lame.name/1374
http://lame.name/1375
http://lame.name/1376
http://lame.name/1377
http://lame.name/1378
http://lame.name/1379
http://lame.name/1380
http://lame.name/1381
http://lame.name/1382
http://lame.name/1383
http://lame.name/1384
http://lame.name/1385
http://lame.name/1386
http://lame.name/1387
http://lame.name/1388
http://lame.name/1389
http://lame.name/1390
http://lame.name/1391
http://lame.name/1392
http://lame.name/1393
http://lame.name/1394
http://lame.name/1395
http://lame.name/1396
http://lame.name/1397
http://lame.name/1398
http://lame.name/1399
http://lame.name/1400
http://lame.name/1401
http://lame.name/1402
http://lame.name/1403
http://lame.name/1404
http://lame.name/1405
http://lame.name/1406
http://lame.name/1407
http://lame.name/1408
http://lame.name/1409
http://lame.name/1410
http://lame.name/1411
http://lame.name/1412
http://lame.name/1413
http://lame.name/1414
http://lame.name/1415
http://lame.name/1416
http://lame.name/1417
http://lame.name/1418
http://lame.name/1419
http://lame.name/1420
http://lame.name/1421
http://lame.name/1422
http://lame.name/1423
http://lame.name/1424
http://lame.name/1425
http://lame.name/1426
http://lame.name/1427
http://lame.name/1428
http://lame.name/1429
http://lame.name/1430
http://lame.name/1431
http://lame.name/1432
http://lame.name/1433
http://lame.name/1434
http://lame.name/1435
http://lame.name/1436
http://lame.name/1437
http://lame.name/1438
http://lame.name/1439
http://lame.name/1440
http://lame.name/1441
http://lame.name/1442
http://lame.name/1443
http://lame.name/1444
http://lame.name/1445
http://lame.name/1447
http://lame.name/1448
http://lame.name/1449
http://lame.name/1450
http://lame.name/1451
http://lame.name/1452
http://lame.name/1453
http://lame.name/1454
http://lame.name/1455
http://lame.name/1456
http://lame.name/1457
http://lame.name/1458
http://lame.name/1459
http://lame.name/1460
http://lame.name/1461
http://lame.name/1462
http://lame.name/1463
http://lame.name/1464
http://lame.name/1465
http://www.board-z.de/board12739/
http://www.board-z.de/board12739/forum51689.html
http://www.board-z.de/board12739/topic65887.html
http://www.board-z.de/board12739/topic65886.html
http://www.board-z.de/board12739/topic65885.html
http://www.board-z.de/board12739/topic65884.html
http://www.board-z.de/board12739/topic65883.html
http://www.board-z.de/board12739/topic65882.html
http://www.board-z.de/board12739/topic65881.html
http://www.board-z.de/board12739/topic65880.html
http://www.board-z.de/board12739/topic65879.html
http://www.board-z.de/board12739/topic65878.html
http://www.board-z.de/board12739/topic65876.html
http://www.board-z.de/board12739/topic65875.html
http://www.board-z.de/board12739/topic65874.html
http://www.board-z.de/board12739/topic65873.html
http://www.board-z.de/board12739/topic65872.html
http://www.board-z.de/board12739/topic65871.html
http://www.board-z.de/board12739/topic65870.html
http://www.board-z.de/board12739/topic65868.html
http://www.board-z.de/board12739/topic65866.html
http://www.board-z.de/board12739/topic65865.html
http://www.board-z.de/board12739/topic65863.html
http://www.board-z.de/board12739/topic65862.html
http://www.board-z.de/board12739/topic65861.html
http://www.board-z.de/board12739/topic65860.html
http://www.board-z.de/board12739/topic65859.html
http://www.board-z.de/board12739/topic65857.html
http://www.board-z.de/board12739/topic65856.html
http://www.board-z.de/board12739/topic65855.html
http://www.board-z.de/board12739/topic65854.html
http://www.board-z.de/board12739/topic65853.html
http://www.board-z.de/board12739/topic65852.html
http://www.board-z.de/board12739/topic65850.html
http://www.board-z.de/board12739/topic65849.html
http://www.board-z.de/board12739/topic65848.html
http://www.board-z.de/board12739/topic65847.html
http://www.board-z.de/board12739/topic65846.html
http://www.board-z.de/board12739/topic65844.html
http://www.board-z.de/board12739/topic65843.html
http://www.board-z.de/board12739/topic65840.html
http://www.board-z.de/board12739/topic65838.html
http://www.board-z.de/board12739/topic65837.html
http://www.board-z.de/board12739/topic65836.html
http://www.board-z.de/board12739/topic65835.html
http://www.board-z.de/board12739/topic65834.html
http://www.board-z.de/board12739/topic65833.html
http://www.board-z.de/board12739/topic65832.html
http://www.board-z.de/board12739/topic65830.html
http://www.board-z.de/board12739/topic65829.html
http://www.board-z.de/board12739/topic65823.html
http://www.board-z.de/board12739/topic65822.html
http://www.board-z.de/board12739/topic65821.html
http://www.board-z.de/board12739/topic65820.html
http://www.board-z.de/board12739/topic65819.html
http://www.board-z.de/board12739/topic65818.html
http://www.board-z.de/board12739/topic65817.html
http://www.board-z.de/board12739/topic65816.html
http://www.board-z.de/board12739/topic65815.html
http://www.board-z.de/board12739/topic65814.html
http://www.board-z.de/board12739/topic65813.html
http://www.board-z.de/board12739/topic65812.html
http://www.board-z.de/board12739/topic65811.html
http://www.board-z.de/board12739/topic65809.html
http://www.board-z.de/board12739/topic65808.html
http://www.board-z.de/board12739/topic65806.html
http://www.board-z.de/board12739/topic65805.html
http://www.board-z.de/board12739/topic65804.html
http://www.board-z.de/board12739/topic65803.html
http://www.board-z.de/board12739/topic65802.html
http://www.board-z.de/board12739/topic65801.html
http://www.board-z.de/board12739/topic65800.html
http://www.board-z.de/board12739/topic65799.html
http://www.board-z.de/board12739/topic65798.html
http://www.board-z.de/board12739/topic65797.html
http://www.board-z.de/board12739/topic65795.html
http://www.board-z.de/board12739/topic65794.html
http://www.board-z.de/board12739/topic65793.html
http://www.board-z.de/board12739/topic65791.html
http://www.board-z.de/board12739/topic65790.html
http://www.board-z.de/board12739/topic65788.html
http://www.board-z.de/board12739/topic65787.html
http://www.board-z.de/board12739/topic65786.html
http://www.board-z.de/board12739/topic65783.html
http://www.board-z.de/board12739/topic65782.html
http://www.board-z.de/board12739/topic65780.html
http://www.board-z.de/board12739/topic65779.html
http://www.board-z.de/board12739/topic65778.html
http://www.board-z.de/board12739/topic65777.html
http://www.board-z.de/board12739/topic65775.html
http://www.board-z.de/board12739/topic65773.html
http://www.board-z.de/board12739/topic65771.html
http://www.board-z.de/board12739/topic65768.html
http://www.board-z.de/board12739/topic65767.html
http://www.board-z.de/board12739/topic65766.html
http://www.board-z.de/board12739/topic65765.html
http://www.board-z.de/board12739/topic65764.html
http://www.board-z.de/board12739/topic65763.html
http://www.board-z.de/board12739/topic65761.html
http://www.board-z.de/board12739/topic65759.html
http://www.board-z.de/board12739/topic65758.html
http://www.board-z.de/board12739/topic65756.html
http://www.board-z.de/board12739/topic65728.html
http://www.board-z.de/board12739/topic65723.html
http://www.board-z.de/board12739/topic65722.html
http://www.board-z.de/board12739/topic65681.html
http://www.board-z.de/board12739/topic65679.html
http://www.board-z.de/board12739/topic65678.html
http://www.board-z.de/board12739/topic65677.html
http://www.board-z.de/board12739/topic65673.html
http://www.board-z.de/board12739/topic65671.html
http://www.board-z.de/board12739/topic65664.html



, I believe this issue still exists.

The JmsSendReceiveWithMessageExpirationTest unit test verifies that messages consumed with the receive() method expire properly.  However, if a MessageListener is configured, the messages are received long after they expire.  The unit test does not use a MessageListener, so it does not catch this case.
 
BTW: This is probably the same issue as 936.

, I believe this issue may be related to the behavior I'm observing.  Maybe this is the desired implementation, but it appears to me that in 4.1.1 (possibly others) timeToLive is only enforced by the MessageConsumer receive() method, not the MessageProducer.  This has (for me) the undesired side effect of allowing expired messages to pile up in the MessageProducer queue until the JVM runs out of RAM and the application fails unless a MessageConsumer is connected.  This would also cause MessageListeners to receive all messages, expired or not.

Is that behavior intended?, Fixed by SVN revision 561026, Context:
3 host,  (linux debian) all with DEFERENTS dates (not synchronized)

1- start a broker on machine 1
2- start a producer on machine 2
3- producer send a couple of messages with a short timeToLive (2 or 3 seconds)
4- wait for 5 seconds (or more)
5- start a messageListener on machine 3
6-  surprisingly messageListener recveibe all the messages sent by producer in step 3, when they should not (because of the timeToLive)

The problem is the host where the listener (consumer) runs have a date two or three hours prior of the host for the consumer, and beacause off that the Expiration is always greater than the Listener (consumer) date.

I think expiration should be managed entirelly in the broker not in clientes (ActiveMQQueueReceiver,  etc)
]