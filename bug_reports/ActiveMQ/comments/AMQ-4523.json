[This is a expected behavior.
Since Topic will not save persistent messages before durable subscriber registers.
In other words, when there are no durable subscribers on Topic persistent messages will be discarded or only dispatched to the non-durable subscribers., As far as I can tell this is working as expected., Maybe I did not show the problem clear.
I know that topic will not save persistent messages before durable subscriber registers.
1. I register a durable subscriber("bar1") on the topic(,
2. Send 1000 persistent messages to the topic("test_topic"),
3. Use camel route to transport message from "bar1" to a queue("test_queue")

The result:
The topic "test_topic" :
Messages Enqueued : 1000

The durable subscriber "bar1" :
Pending Queue Size : 7
Enqueue Counter : 1000
Dequeue Counter : 993

The queue "test_queue":
Number Of Pending Messages : 993

The 7 messages lost, they will alaways "pending in the durable subscriber". 
There are no way to get them, although they are still in the kahadb data files.(db-1.log)

I have try these ways:
1. restart the activemq server, the camel route working , but the pending message still pending in "bar1".
2. stop the camel route. start a client with clientID:1, name:"bar1", to get message from the durable subscriber "bar1". It do not work, get nothing.




, I uploaded the data files here:
http://activemq.2283324.n4.nabble.com/The-durable-subscriber-will-lose-some-pending-queue-message-td4666780.html

I think that maybe this issue relate to AMQ-4413.
Beacuse I found the in ActiveMQ5.8, the TransactionManager will active/offline the durable subscriber very frequently. Just with jconsole watch the consumer of a topic, it alaways changeing., Well, to be honest,I faced the same issue(durable subscriber lose messages) when I switched a virtual topic to be the real topic in production.
I had no time to reproduce and investigate the problem and eventually rolled back the upgrade.]