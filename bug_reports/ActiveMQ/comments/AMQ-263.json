[This isn't a bug per se - its that the 2 JVMs are trying to use the journal files in the same directory. If you run each JVM in a different directory, it should be fine - or explicitly configure the ActiveMQ directory to be different for each JVM, Whoops, ignore the last comment. I missed the 'in 1 VM' :)

This sounds like a bug, as in the same JVM it should be using the same broker. Sounds like a bug afterall :), Just retested and the issue has been now fixed.  "peer://development" can now be used in the jmeter sampler.]