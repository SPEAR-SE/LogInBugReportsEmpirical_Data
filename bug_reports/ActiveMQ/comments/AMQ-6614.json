[Commit e67d48680f16061d0a5fbd09129ce8f0a7759255 in activemq's branch refs/heads/master from [~gtully]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=e67d486 ]

[AMQ-6614] fix up jmx blockedSendsCount and producer view blocking flag for async send case. fix and test
, [~gtully], I was looking at this commit and noticed something...

Should this line: https://github.com/apache/activemq/blob/activemq-5.15.0/activemq-broker/src/main/java/org/apache/activemq/broker/region/Queue.java#L707

be changed from {{producerExchangeCopy.blockingOnFlowControl(false);}} to {{producerExchange.blockingOnFlowControl(false);}} ?

The flag is set true later on line 713 on the original producerExchange so the copy would always have the flag be false already (unless I am missing something), [~cshannon] thanks for the second pair of eyes. I think it will be ok. I modified the ProducerBrokerExchange.copy to share that state flag - flowControlInfo so both the copy and original will share it.

https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blobdiff;f=activemq-broker/src/main/java/org/apache/activemq/broker/ProducerBrokerExchange.java;h=26652debe644977fa00fa37f5ec33a4acf279ca7;hp=bf1d21e80022765aeb7611e5b8363c7eeec79af6;hb=e67d486;hpb=eab9a0d05758fd0e8e83e7e482f4f0406cd9af5e, [~gtully], Ok, sounds good, just wanted to double check.]