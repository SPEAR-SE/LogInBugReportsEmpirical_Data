[Yes, this affects obviously not only the chat example but any instance where there is more than one window open within the same session. Even having a single window, message reception is altered by reloading that window, as I found out with some tests in Firefox 3 and Konqueror. Results were quite inconsistent, sometimes missing messages altogether, sometimes the latest window getting all of them, sometimes were alternating between windows.

I'm including a patch that might solve this problem, hopefully keeping compatibility with any previous behaviour. It works by including a "windowId" in the "amq.url" parameter of the HTML page, like this:

<script type="text/javascript">amq.uri='amq/window_'+Math.floor(Math.random()*100000);</script>

This parameter will be different for every window or "window reload", and then it is picked up (through getRequestInfo) by WebClient and MessageListenerServlet to map different windows to different listeners, allowing ALL of them to get the messages. After applying this patch the chat example allows chatting between multiple windows of the same session.

Hope this helps.
Daniel.
, Allow multiple windows within the same session to receive messages., Tested here and its working fine with multiple chat windows.]