[I also faced the similar problem. Here are the steps for the same:
1. Failover setup using JDBC MySQL
2. Start master and slave
3. Send messages - (success)
4. Stop master
5. Send messages - (success, as slave has picked them up)
6. Restart master and stop slave
7. Send messages - (hung, clients waiting for connection), I realise this is a dirty hack and I haven't thought thru the implications but opening class FailoverTransport and commenting out line 1044 " this.uris.remove(uri);" in method "updateURIs()" appears to make it work., We have numerous test cases covering scenarios like this which are all working without issue.  Recommend you upgrade to a newer release such as v5.7.0.  ]