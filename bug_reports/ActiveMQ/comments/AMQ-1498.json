[Are you sure this is the case in the latest ?, I am reopening this issue because I just had this problem in production on 5.1.0. I am unable to restart ActiveMQ with the following log :

{{
2008-07-02 09:25:56,731 [erSimpleAppMain] INFO  AMQPersistenceAdapter          - AMQStore starting using directory: ../../data/quark1
2008-07-02 09:25:56,762 [erSimpleAppMain] INFO  KahaStore                      - Kaha Store using data directory ../../data/quark1/kr-store/state
2008-07-02 09:25:56,811 [erSimpleAppMain] INFO  AMQPersistenceAdapter          - Active data files: []
2008-07-02 09:25:56,814 [erSimpleAppMain] WARN  AMQPersistenceAdapter          - The ReferenceStore is not valid - recovering ...
2008-07-02 09:25:56,843 [erSimpleAppMain] INFO  KahaStore                      - Kaha Store successfully deleted data directory ../../data/quark1/kr-store/data
2008-07-02 09:25:56,845 [erSimpleAppMain] INFO  AMQPersistenceAdapter          - Journal Recovery Started from: DataManager:(data-)
2008-07-02 09:25:56,876 [erSimpleAppMain] INFO  KahaStore                      - Kaha Store using data directory ../../data/quark1/kr-store/data
2008-07-02 09:26:29,189 [erSimpleAppMain] INFO  AMQPersistenceAdapter          - Recovered 348180 operations from redo log in 32.343 seconds.
2008-07-02 09:26:29,189 [erSimpleAppMain] INFO  AMQPersistenceAdapter          - Finished recovering the ReferenceStore
2008-07-02 09:26:29,385 [erSimpleAppMain] ERROR BrokerService                  - Failed to start ActiveMQ JMS Message Broker. Reason: java.io.IOException: Recovery Failed: The subscription does not exist: ID:quarkb1.mrs.experian.fr-57145-1213887853982-0:4:-1:2
java.io.IOException: Recovery Failed: The subscription does not exist: ID:quarkb1.mrs.experian.fr-57145-1213887853982-0:4:-1:2
        at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:27)
        at org.apache.activemq.broker.TransactionBroker.start(TransactionBroker.java:110)
        at org.apache.activemq.broker.BrokerFilter.start(BrokerFilter.java:153)
        at org.apache.activemq.broker.BrokerFilter.start(BrokerFilter.java:153)
        at org.apache.activemq.broker.MutableBrokerFilter.start(MutableBrokerFilter.java:160)
        at org.apache.activemq.broker.BrokerService.start(BrokerService.java:444)
        at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:50)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1288)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1257)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:438)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:383)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:353)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:245)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:169)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:242)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:400)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:736)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:369)
        at org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:64)
        at org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:52)
        at org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:96)
        at org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:52)
        at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)
        at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)
        at org.apache.activemq.console.command.StartCommand.startBroker(StartCommand.java:111)
        at org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:73)
        at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
        at org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:129)
        at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
        at org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:79)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.activemq.console.Main.runTaskClass(Main.java:222)
        at org.apache.activemq.console.Main.main(Main.java:106)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
        at java.lang.Thread.run(Thread.java:595)
Caused by: java.lang.IllegalArgumentException: The subscription does not exist: ID:quarkb1.mrs.experian.fr-57145-1213887853982-0:4:-1:2
        at org.apache.activemq.broker.region.AbstractRegion.acknowledge(AbstractRegion.java:357)
        at org.apache.activemq.broker.region.RegionBroker.acknowledge(RegionBroker.java:470)
        at org.apache.activemq.broker.TransactionBroker.acknowledge(TransactionBroker.java:194)
        at org.apache.activemq.broker.TransactionBroker$1.recover(TransactionBroker.java:100)
        at org.apache.activemq.store.amq.AMQTransactionStore.recover(AMQTransactionStore.java:196)
        at org.apache.activemq.broker.TransactionBroker.start(TransactionBroker.java:92)
        ... 42 more
}}
, I made some improvements in this area with SVN revision http://svn.apache.org/viewvc?view=revision&revision=885488
I didn't however managed to reproduce this issue fully. If someone can give the latest trunk a chance and share more details on the usecase when this exception is encountered (xa transactions, failover, crash???) I will revisit it and try to make a reproducible test case., This should be resolved now on the trunk (and 5.3 branch)]