[Fixed and test added, thanks.]