[Commit 25ff5699f1fb7c73668d5da2eacb53ad2ef14289 in activemq's branch refs/heads/master from [~cshannon]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=25ff569 ]

https://issues.apache.org/jira/browse/AMQ-6158

Computing messageSize for a durable subscription in KahaDB now runs much
faster (n vs n^2) which is noticable when there are a large number of
pending messages for a durable subscription.
, Commit 23e9ecaec1ddd6fe8948aed47aca4767fccc1b6e in activemq's branch refs/heads/activemq-5.13.x from [~cshannon]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=23e9eca ]

https://issues.apache.org/jira/browse/AMQ-6158

Computing messageSize for a durable subscription in KahaDB now runs much
faster (n vs n^2) which is noticable when there are a large number of
pending messages for a durable subscription.

(cherry picked from commit 25ff5699f1fb7c73668d5da2eacb53ad2ef14289)
, Patch applied and the tests were tweaked a bit to make sure everything looks good.]