[I have discovered that the CPU spin loop can happen even on Linux: whenever the process runs out of file descriptors the accept enters a loop that spins the CPU at 100%. I have attached a patch that slows down exception handling in such case., I'm not sure this is the best way to handle it.  For linux the best thing to do is set resource limits. You can set a max connection count below the configured file descriptors for the OS.  This will prevent that from happening.

I'm not very familiar with z/OS so maybe someone else can comment on this issue for that., Thanks, I see it now. The number of open sockets will be capped by the code in org.apache.activemq.transport.tcp.TcpTransportServer#doHandleSocket so on Linux you are unlikely to run into the spin loop and even if you do it can be fixed by correctly setting up limits.

That would make this a z/OS only problem. In our installation the problem is quite common as people recycle the TCPIP stack often to make configuration changes which causes the infinite spin loop.

Unfortunately I can't think of any other way to handle this and if I don't get the fix in mainline ActiveMQ I would have to run with a forked version which is something I would very much like to avoid...

 ]