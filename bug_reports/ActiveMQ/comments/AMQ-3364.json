[Some discussion of this during my initial investigation is [here|http://activemq.2283324.n4.nabble.com/messages-sometimes-lost-during-pure-master-slave-failover-td3570898.html], one thought, there is a shutdownOnSlaveFailure attribute on a broker such that a controlled shutdown of the master can be triggered by a slave failure or shutdown. I wonder if shutting down the slave can provide a workaround. 
But the shutdown order does seem to be problematic in this case. The connectors and active connections should be terminated first so that the clients can see the failure early and failover kicks in., Pure master/slave removed in upcoming v5.8.0]