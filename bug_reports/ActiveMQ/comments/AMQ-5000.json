[Hi Guilhem, can you give us some more details how do to reproduce this? Adding -Dorg.apache.activemq.UseDedicatedTaskRunner=false in ACTIVEMQ_OPTS in bin/activemq works fine. I suspect you set this as an environment variable? In that case you should also include variables necessary for jolokia/hawtio work properly in 5.9.0. Something like

ACTIVEMQ_OPTS="-Dorg.apache.activemq.UseDedicatedTaskRunner=false -Djava.util.logging.config.file=logging.properties -Dhawtio.realm=activemq -Dhawtio.role=admins -Dhawtio.rolePrincipalClasses=org.apache.activemq.jaas.GroupPrincipal -Djava.security.auth.login.config=$ACTIVEMQ_CONF/login.config", I Think is link not with -Dorg.apache.activemq.UseDedicatedTaskRunner=false but  ACTIVEMQ_OPTS with parameter

I put in activemq.conf : 

Not working:
ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M -Dorg.apache.activemq.UseDedicatedTaskRunner=false"

cat /proc/31354/cmdline 
/usr/java/default/bin/java-Xms4096M-Xmx4096M-Dorg.apache.activemq.UseDedicatedTaskRunner=false-Dcom.sun.management.jmxremote.port=11099-Dcom.sun.management.jmxremote.password.file=/hawai/composants/activemq/conf/jmx.password-Dcom.sun.management.jmxremote.access.file=/hawai/composants/activemq/conf/jmx.access-Dcom.sun.management.jmxremote.ssl=false-Dcom.sun.management.jmxremote-Djava.awt.headless=true-Djava.io.tmpdir=/hawai/composants/activemq/tmp-Dactivemq.classpath=/hawai/composants/activemq/conf;-Dactivemq.home=/hawai/composants/activemq-Dactivemq.base=/hawai/composants/activemq-Dactivemq.conf=/hawai/composants/activemq/conf-Dactivemq.data=/hawai/composants/activemq/data-jar/hawai/composants/activemq/bin/activemq.jarstart

Not Working (loose of xms xmx):
ACTIVEMQ_OPTS_MEMORY="-Xms4096M -Xmx4096M"
#ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M -Dorg.apache.activemq.UseDedicatedTaskRunner=false" 
ACTIVEMQ_OPTS="-Dorg.apache.activemq.UseDedicatedTaskRunner=false"
#ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M"

cat /proc/707/cmdline
/usr/java/default/bin/java-Dorg.apache.activemq.UseDedicatedTaskRunner=false-Dcom.sun.management.jmxremote.port=11099-Dcom.sun.management.jmxremote.password.file=/hawai/composants/activemq/conf/jmx.password-Dcom.sun.management.jmxremote.access.file=/hawai/composants/activemq/conf/jmx.access-Dcom.sun.management.jmxremote.ssl=false-Dcom.sun.management.jmxremote-Djava.awt.headless=true-Djava.io.tmpdir=/hawai/composants/activemq/tmp-Dactivemq.classpath=/hawai/composants/activemq/conf;-Dactivemq.home=/hawai/composants/activemq-Dactivemq.base=/hawai/composants/activemq-Dactivemq.conf=/hawai/composants/activemq/conf-Dactivemq.data=/hawai/composants/activemq/data-jar/hawai/composants/activemq/bin/activemq.jarstart

Not working:
#ACTIVEMQ_OPTS_MEMORY="-Xms4096M -Xmx4096M"
#ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M -Dorg.apache.activemq.UseDedicatedTaskRunner=false" 
#ACTIVEMQ_OPTS="-Dorg.apache.activemq.UseDedicatedTaskRunner=false"
ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M
cat /proc/1092/cmdline 
/usr/java/default/bin/java-Xms4096M-Xmx4096M-Dcom.sun.management.jmxremote.port=11099-Dcom.sun.management.jmxremote.password.file=/hawai/composants/activemq/conf/jmx.password-Dcom.sun.management.jmxremote.access.file=/hawai/composants/activemq/conf/jmx.access-Dcom.sun.management.jmxremote.ssl=false-Dcom.sun.management.jmxremote-Djava.awt.headless=true-Djava.io.tmpdir=/hawai/composants/activemq/tmp-Dactivemq.classpath=/hawai/composants/activemq/conf;-Dactivemq.home=/hawai/composants/activemq-Dactivemq.base=/hawai/composants/activemq-Dactivemq.conf=/hawai/composants/activemq/conf-Dactivemq.data=/hawai/composants/activemq/data-jar/hawai/composants/activemq/bin/activemq.jarstart
Working:

# Set jvm memory configuration
ACTIVEMQ_OPTS_MEMORY="-Xms4096M -Xmx4096M"
#ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M -Dorg.apache.activemq.UseDedicatedTaskRunner=false" 
#ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M"


cat /proc/32617/cmdline 
/usr/java/default/bin/java-Xms4096M-Xmx4096M-Djava.util.logging.config.file=logging.properties-Dhawtio.realm=activemq-Dhawtio.role=admins-Dhawtio.rolePrincipalClasses=org.apache.activemq.jaas.GroupPrincipal-Djava.security.auth.login.config=/hawai/composants/activemq/conf/login.config-Dcom.sun.management.jmxremote.port=11099-Dcom.sun.management.jmxremote.password.file=/hawai/composants/activemq/conf/jmx.password-Dcom.sun.management.jmxremote.access.file=/hawai/composants/activemq/conf/jmx.access-Dcom.sun.management.jmxremote.ssl=false-Dcom.sun.management.jmxremote-Djava.awt.headless=true-Djava.io.tmpdir=/hawai/composants/activemq/tmp-Dactivemq.classpath=/hawai/composants/activemq/conf;-Dactivemq.home=/hawai/composants/activemq-Dactivemq.base=/hawai/composants/activemq-Dactivemq.conf=/hawai/composants/activemq/conf-Dactivemq.data=/hawai/composants/activemq/data-jar/hawai/composants/activemq/bin/activemq.jarstart

!!! Working !!!:
#ACTIVEMQ_OPTS_MEMORY="-Xms4096M -Xmx4096M"
#ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M -Dorg.apache.activemq.UseDedicatedTaskRunner=false" 
#ACTIVEMQ_OPTS="-Dorg.apache.activemq.UseDedicatedTaskRunner=false"
ACTIVEMQ_OPTS="-Xms4096M -Xmx4096M -Dorg.apache.activemq.UseDedicatedTaskRunner=false -Djava.util.logging.config.file=logging.properties -Dhawtio.realm=activemq -Dhawtio.role=admins -Dhawtio.rolePrincipalClasses=org.apache.activemq.jaas.GroupPrincipal -Djava.security.auth.login.config=$ACTIVEMQ_CONF/login.config"

cat /proc/1419/cmdline 
/usr/java/default/bin/java-Xms4096M-Xmx4096M-Dorg.apache.activemq.UseDedicatedTaskRunner=false-Djava.util.logging.config.file=logging.properties-Dhawtio.realm=activemq-Dhawtio.role=admins-Dhawtio.rolePrincipalClasses=org.apache.activemq.jaas.GroupPrincipal-Djava.security.auth.login.config=/hawai/composants/activemq/conf/login.config-Dcom.sun.management.jmxremote.port=11099-Dcom.sun.management.jmxremote.password.file=/hawai/composants/activemq/conf/jmx.password-Dcom.sun.management.jmxremote.access.file=/hawai/composants/activemq/conf/jmx.access-Dcom.sun.management.jmxremote.ssl=false-Dcom.sun.management.jmxremote-Djava.awt.headless=true-Djava.io.tmpdir=/hawai/composants/activemq/tmp-Dactivemq.classpath=/hawai/composants/activemq/conf;-Dactivemq.home=/hawai/composants/activemq-Dactivemq.base=/hawai/composants/activemq-Dactivemq.conf=/hawai/composants/activemq/conf-Dactivemq.data=/hawai/composants/activemq/data-jar/hawai/composants/activemq/bin/activemq.jarstart

Sincerely and thanx u., Thanks for confirming. I'll close this issue, Yes .

Maybe you need to improve documentation when using hawtio and want to use ACTIVEMQ_OPTS you need to put :

-Djava.util.logging.config.file=logging.properties -Dhawtio.realm=activemq -Dhawtio.role=admins -Dhawtio.rolePrincipalClasses=org.apache.activemq.jaas.GroupPrincipal -Djava.security.auth.login.config=$ACTIVEMQ_CONF/login.config

Sincerely


 ]