[I get the same ungraceful shutdown when our PostgreSQL shuts down underneath ActiveMQ. We configured a DataSource connection-pool with a validation SQL statement. 
Isn't the ActiveMQ process supposed to be running but not handling incoming or outgoing messages when that happens (at least until the DB goes up again)?, This should be fixed by the fix for AMQ-3342.  Reopen if its still an issue.]