[The thread would already have the lock on clientIdSet before calling removeConnection()  - so not sure why you think there would be a deadlock - do you have a stacktrace ?, Sorry, I've misunderstand in Java synchronization.

Thanks for your comment.
, works as designed.]