[@Torsten do you have any tests for this issue we can use to evaluate?, @Tim, don't have a unit test yet but presumably can create one. It will have to wait until February though as I am currently on vacation., Ok, created a test case that reproduces the issue. , Fixing this is a bit tricky and would involve tracking the location of the subscription commands in the log files for the StoredDestination and the durable subs associated with each.  The downside here is that you can start retaining log files for only that one subscription command which isn't really ideal.  

Fixing this might lead down the path of needing periodic compaction or a means at least of triggering one otherwise its quite hard to control how much wasted spaced you'd have for the leftovers. , the workaround is to archive data files when they are gc'ed by the persistence adapter. Then revert to the archived data before rebuilding the index.
{code}archiveDataLogs="true"{code}  attribute of kahadb, updated test case, Adds additional test to show that when fixed the recovered messages from the journal can be replayed because acks on GC'd files can get lost. , Current patch for this issue and AMQ-2832.  Adding it now so it doesn't get lost, will get back to testing next week., fix and tests added to trunk.]