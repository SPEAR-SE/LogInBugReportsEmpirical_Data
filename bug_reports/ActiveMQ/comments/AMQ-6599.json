[Commit f6bf823dedba54dea40b597f1762ac6d7308ffa6 in activemq's branch refs/heads/master from [~cshannon]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f6bf823 ]

AMQ-6599 - Properly apply soTimeout value to TcpTransport

https://issues.apache.org/jira/browse/AMQ-6599

The soTimeout value needs to be applied to the TcpTransport as well as
the socket because the NIO transports use the value later on when
establishing a connection
, Commit f6bf823dedba54dea40b597f1762ac6d7308ffa6 in activemq's branch refs/heads/master from [~cshannon]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f6bf823 ]

AMQ-6599 - Properly apply soTimeout value to TcpTransport

https://issues.apache.org/jira/browse/AMQ-6599

The soTimeout value needs to be applied to the TcpTransport as well as
the socket because the NIO transports use the value later on when
establishing a connection
, Commit 7c84aca59f89523c20daeced2b5f849d0fac0740 in activemq's branch refs/heads/activemq-5.14.x from [~cshannon]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=7c84aca ]

AMQ-6599 - Properly apply soTimeout value to TcpTransport

The soTimeout value needs to be applied to the TcpTransport as well as
the socket because the NIO transports use the value later on when
establishing a connection

(cherry picked from commit f6bf823dedba54dea40b597f1762ac6d7308ffa6)
, The issue was the soTimeout value was being remove from the options map after being applied to the Socket so it was not applied on the TcpTransport itself.  For normal transports this is not a problem but for the NIO transports this causes the soTimeout value to always be 0 later on when it is used on selector.select(soTimeout) as you found.  I'm planning on working on the 5.14.4 release next week so the fix should be out soon., Thanks for fixing this issue so fast!
:-)]