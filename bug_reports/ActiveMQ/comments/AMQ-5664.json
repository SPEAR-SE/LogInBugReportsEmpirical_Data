[Seeing a similar issue with AMQ broker using v 5.10.  The client is using verison 5.10 of the AMQ libraries.  This happens at least a couple of times a month per client.  The client shows as  connected/Active, but does not process more messages.  The Messages Awaiting Acknowledgement increases up to the prefetch limit for durable subscribers of the topics.  I do not have a test case to reporcude this as it happens randomly.  The only thing of note is that once the error happens the broker and the client exchange bits every 10 seconds (assuming this is the keepalive) until the client is restarted.

2015-05-12_18:59:53.39814 Exception in thread "ActiveMQ Connection Dispatcher: tcp://11.11.11.111:2291" java.util.ConcurrentModificationException
2015-05-12_18:59:53.39830       at java.util.HashMap$HashIterator.nextNode(HashMap.java:1429)
2015-05-12_18:59:53.39831       at java.util.HashMap$KeyIterator.next(HashMap.java:1453)
2015-05-12_18:59:53.39831       at org.apache.activemq.util.MarshallingSupport.marshalPrimitiveMap(MarshallingSupport.java:61)
2015-05-12_18:59:53.39832       at org.apache.activemq.command.Message.beforeMarshall(Message.java:231)
2015-05-12_18:59:53.39832       at org.apache.activemq.command.ActiveMQTextMessage.beforeMarshall(ActiveMQTextMessage.java:115)
2015-05-12_18:59:53.39832       at org.apache.activemq.openwire.v10.MessageMarshaller.looseMarshal(MessageMarshaller.java:281)
2015-05-12_18:59:53.39832       at org.apache.activemq.openwire.v10.ActiveMQMessageMarshaller.looseMarshal(ActiveMQMessageMarshaller.java:111)
2015-05-12_18:59:53.39832       at org.apache.activemq.openwire.v10.ActiveMQTextMessageMarshaller.looseMarshal(ActiveMQTextMessageMarshaller.java:111)
2015-05-12_18:59:53.39832       at org.apache.activemq.openwire.OpenWireFormat.looseMarshalNestedObject(OpenWireFormat.java:480)
2015-05-12_18:59:53.39833       at org.apache.activemq.openwire.v10.BaseDataStreamMarshaller.looseMarshalNestedObject(BaseDataStreamMarshaller.java:471)
2015-05-12_18:59:53.39833       at org.apache.activemq.openwire.v10.MessageDispatchMarshaller.looseMarshal(MessageDispatchMarshaller.java:139)
2015-05-12_18:59:53.39833       at org.apache.activemq.openwire.OpenWireFormat.marshal(OpenWireFormat.java:237)
2015-05-12_18:59:53.39833       at org.apache.activemq.transport.tcp.TcpTransport.oneway(TcpTransport.java:175)
2015-05-12_18:59:53.39834       at org.apache.activemq.transport.AbstractInactivityMonitor.doOnewaySend(AbstractInactivityMonitor.java:304)
2015-05-12_18:59:53.39834       at org.apache.activemq.transport.AbstractInactivityMonitor.oneway(AbstractInactivityMonitor.java:286)
2015-05-12_18:59:53.39834       at org.apache.activemq.transport.TransportFilter.oneway(TransportFilter.java:85)
2015-05-12_18:59:53.39834       at org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:104)
2015-05-12_18:59:53.39835       at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68)
2015-05-12_18:59:53.39836       at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1370)
2015-05-12_18:59:53.39836       at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:889)
2015-05-12_18:59:53.39836       at org.apache.activemq.broker.TransportConnection.iterate(TransportConnection.java:935)
2015-05-12_18:59:53.39836       at org.apache.activemq.thread.DedicatedTaskRunner.runTask(DedicatedTaskRunner.java:112)
2015-05-12_18:59:53.39836       at org.apache.activemq.thread.DedicatedTaskRunner$1.run(DedicatedTaskRunner.java:42), That error is coming from the Broker side and not the client, I'd suggest moving to 5.11.1+ to run with the latest fixes. , We haven't been able to reproduce this in awhile to capture any meaningful diagnostics ]