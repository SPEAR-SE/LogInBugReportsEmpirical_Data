[Attaching patch with fallback strategy if unable to bind to port, thanks. patch applied with with small mods. Left the log at warn as the fallback means that two clients could use the same ids.

http://svn.apache.org/viewvc?rev=1209162&view=rev]