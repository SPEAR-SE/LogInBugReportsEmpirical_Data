[Commit 4ab55f13ae4097de1dad14af36b65a89eda9b81d in activemq's branch refs/heads/master from [~dejanb]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=4ab55f1 ]

https://issues.apache.org/jira/browse/AMQ-5960 - durable sub pendingQueueSize after force shutdown
, [~dejanb],

Looks like your patch caused this failure:

https://builds.apache.org/view/All/job/ActiveMQ-Java8/org.apache.activemq$activemq-kahadb-store/471/testReport/junit/org.apache.activemq.store.kahadb/JournalCorruptionEofIndexRecoveryTest/testRecoverIndex/

Probably just need a null check added., Commit f4a2543def0d7240fc97f850a53f6be48dc74562 in activemq's branch refs/heads/master from [~dejanb]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=f4a2543 ]

https://issues.apache.org/jira/browse/AMQ-5960 - durable sub pendingQueueSize after force shutdown - fix npe test failure
, Thanks [~cshannon]! I missed that, it should be OK now., Commit fcabcd282dc01c6faaff3c7627882f42a64543b4 in activemq's branch refs/heads/master from [~gtully]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=fcabcd2 ]

https://issues.apache.org/jira/browse/AMQ-5960 - rework fix to reset the next sequence so that the next ack position and message reference gets cleared up in normal operation
, I don't believe this issue is fixed, it is still reproducible in 5.14.4.  Same test case, create durable subs with persistent messages, connect consumers and start draining.  Hard-kill the broker and restart it, allow consumers to drain.  There will be "lingering" pendingQueueSize counts, although there is no actual message loss.  KahaDB just doesn't update the ack position.  Tested with LevelDB and cannot recreate, this only happens with Kaha.]