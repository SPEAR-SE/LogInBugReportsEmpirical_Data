[The package javax.servlet.resources is removed from servlet-api 3.1, which is the version used in Karaf 4, so mak the package javax.servlet.resources as optional can make the activemq-web-console works in both karaf 3 & 4 .

Also the activemq-web-console war bundle embed several jars which shouldn't bethere. Per the best practice of OSGi, a bundle should import and use the classes installed in the OSGi container already and avoid embedding classes. 

And there's the split-package issue exist in activemq-web-console bundle.

I attached a patch to fix above issues

Thanks, As javax.servlet.resources is not used at all (in ActiveMQ WebConsole code), I'm cleaning the import and testing. IMHO, it's better than an optional import., I tested by removing the javax.servlet.resources import. The WebConsole installs and works fine with Karaf 2.4.x, Karaf 3.0.x, and 4.0.x. I'm pushing my change., Fixed on master: https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commitdiff;h=471911466b1c0d4acedacd4180ed6b39531a0119, Fixed on activemq-5.11.x: https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commitdiff;h=78f53a13df4651637995c23fc9a11d2877915a3d, Fixed on activemq-5.10.x: https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commitdiff;h=3049623f99ec3c9b9bc2ed7d8b8289da9f4abc7f]