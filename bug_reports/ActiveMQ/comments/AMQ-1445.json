[Forgot to mention: I observed this behaviour with revision 582029.


, Fixed by revision 582574, Hi Rob,

Many thanks - I can confirm that this has fixed the issue.

Cheers,
David
, I have this same problem with ActiveMQ 5.0.0 version that I downloaded 2 days ago. I don't think that this is fixed in the release build.

The log has only this row:
2008-01-18 17:29:10,769 [/127.0.0.1:2257] ERROR RecoveryListenerAdapter        - Message id ID:mycomputer-2250-1200669948525-0:1:30:8:1 could not be recovered from the data store!

ActiveMQ stalls after I do this: send 300 message to a queue, another app replies to each message to another queue.  There's a short delay and I after I try again it will always stall after the 1. message. Really strange. Restarting ActiveMQ doesn't help. The data directory has to be deleted.
The messages sent to the queue are non-persistent. I'm using Kaha store.

Both sides are using Jencks + ActiveMQ RA + Spring TransactionTemplate + JdbcTemplate. The receiving side uses Jencks POJO (inbound) + JDBCTemplate (Jencks outbound configuration), inside XA transaction using Spring Transaction configuration for Jencks. I tested with non-persistent and persistent messages and the result is the same.

I also tried Jdbc persistence (derby), but then some messages are lost (EOFException on client before problem, server side says that some acknowledge cannot be matched).

Maybe Jencks is causing problems? Are there test cases that use Jencks + ActiveMQ RA?, Some other people also have this problem:
http://www.nabble.com/5.0-release-having-%22RecoveryListenerAdapter%22-error-that-stop-msg-fetching-tp14423016s2354p14423016.html, maybe this is the same problem. it also contains a test case., Resolved in trunk]