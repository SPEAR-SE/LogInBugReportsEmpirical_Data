[Patch for stripping leading '/' from MQTT topic names. Also includes unit tests for some other patches I submitted previously. , Do not apply this patch right now. I am testing whether the assumption I started with is correct, i.e. whether the leading '/' is meant to be ignored or not. Upon reading the specification it is not very clear, so I am still investigating this. , The assumption is incorrect I'm afraid.

foo/bar and /foo/bar are distinct topic names. It is easiest to reconcile what is happening if you imagine that the topics are foo/bar and ""/foo/bar - i.e. there is an empty hierarchy element at the beginning. This is consistent with the expectation that foo/bar and foo//bar are distinct topics. Again, think of this as like foo/""/bar with a zero length hierarchy element in the middle.

This also influences the way wildcards work. Subscribing to a topic # returns messages from both foo/bar and /foo/bar, but subscribing to /# would only return messages from /foo/bar. Likewise a subscription to +/foo/bar would return messages from /foo/bar because + matches against the empty hierarchy element., The assumption about leading '/' for MQTT topic levels was incorrect. I am closing this as a non issue. ]