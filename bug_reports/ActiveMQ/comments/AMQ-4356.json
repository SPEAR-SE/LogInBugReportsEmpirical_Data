[Would be helpful if you could create a JUnit test case that demonstrates the issue., Ok , i have a test but is not complete because the broker is remote and i need restart the broker manually let me see if i can imbibe and restart the broker inside the test.
, Have a look at the unit tests for AMQ, a grep for BrokerService will show you lots of examples of creating an embedded broker.  AMQ3445Test.java has some decent broker restart examples, and there already a virtual destination test case for durables you could add to VirtualTopicsAndDurableSubsTest.java, I have a test case that can reproduce this now. , Fix and test added on trunk, should appear in the next nightly 5.9, This fix is superseded by AMQ-4571.]