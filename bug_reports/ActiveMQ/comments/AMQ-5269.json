[Attaching a patch for now as my "git" stuff is in a bit of a mess and I need to clean that up.   , GitHub user dkulp opened a pull request:

    https://github.com/apache/activemq/pull/33

    [AMQ-5269] Update NIO based transports to use a Select mechanism

    Update NIO based transports to use a Select mechanism for the accepts instead of the blocking select.
    
    Cuts about 10 minutes off the activemq-stomp tests, drops the NIO test execution time down to equal to the non-NIO based tests.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/dkulp/activemq AMQ-5269

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/activemq/pull/33.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #33
    
----
commit 52ef9745d9bafbeab940ed4937c014be3abc9655
Author: Daniel Kulp <dkulp@apache.org>
Date:   2014-07-10T14:57:44Z

    [AMQ-5269] Update NIO based transports to use a Select mechanism for the accepts instead of the blocking select.
    Cuts about 10 minutes off the activemq-stomp tests, drops the NIO test execution time down to equal to the non-NIO based tests.

----
, On my Mac:

Before:
{code}
Running org.apache.activemq.transport.stomp.Stomp11NIOSSLTest
Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 126.509 sec - in org.apache.activemq.transport.stomp.Stomp11NIOSSLTest
Running org.apache.activemq.transport.stomp.Stomp11NIOTest
Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 124.051 sec - in org.apache.activemq.transport.stomp.Stomp11NIOTest
Running org.apache.activemq.transport.stomp.Stomp11SslAuthTest
Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 73.105 sec - in org.apache.activemq.transport.stomp.Stomp11SslAuthTest
{code}

After:
{code}
Running org.apache.activemq.transport.stomp.Stomp11NIOSSLTest
Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 71.824 sec - in org.apache.activemq.transport.stomp.Stomp11NIOSSLTest
Running org.apache.activemq.transport.stomp.Stomp11NIOTest
Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 70.408 sec - in org.apache.activemq.transport.stomp.Stomp11NIOTest
Running org.apache.activemq.transport.stomp.Stomp11SslAuthTest
Tests run: 27, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 72.747 sec - in org.apache.activemq.transport.stomp.Stomp11SslAuthTest
{code}, Reviewed and ran a bunch of the tests here and everything seems good, can commit if you are satisfied with the current changeset, Fixed on trunk, thanks., Github user dkulp closed the pull request at:

    https://github.com/apache/activemq/pull/33
]