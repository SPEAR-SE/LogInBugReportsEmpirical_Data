[Class name is still using AMQ-3034., Attached (kind of UT, no assert, just to reproduce it easily for others) UT which could reproduce this issue., Anyone has any comment on it?  

Not sure the workload to fix this, while if anyone could give some hints on how to fix this, I am willing to provide patch for review (though I am quite a newbie for AMQ).

Thanks very much!

Regards,
Yandong, Does seem to be something odd going on here, I updated your test to actually timeout and fail if things don't go as expect as well as run a persistent variant for comparison.  Also remove the need for a config file to make things simpler. , Assigned this to v5.8.0 as its related to some other Producer Flow Control issues which really need to get fixed up before we release. , The issue in this test case is that the temp store limit is set to small and the PList store doesn't have enough room to create a new journal file since the default size is 32mb.  You can make this test case work by setting the temp store limit a bit higher or by reducing the journal file size setting of the PListStore.  , Configuration issue. ]