[Hi JB, is there a way to manually patch activemaq 5.4 to get this issue fixed ( while waiting for official fix 5.5? )

Thanks, I've patched AMQ to run smoothly on karaf-2.2.0. @Dan: Feel free to give the patch attached to this issue a try and report your feedback, Patched applied with svn revision 1077868. Thanks!, I'm trying now to make 5.5.0 work with both karaf 2.1.x and 2.2.0 and newer, but have some difficulties at the moment. I created a separate features for [2.1.x|http://svn.apache.org/viewvc/activemq/trunk/activemq-karaf/src/main/resources/features-2.1.xml?revision=1084635&view=markup].

But trying to do:

{code}
karaf@root> features:addUrl mvn:org.apache.activemq/activemq-karaf/5.5-SNAPSHOT/xml/features-2.1
karaf@root> features:install activemq-spring 
{code}

gets

{code}
Error executing command: Could not start bundle mvn:org.apache.activemq/activemq-karaf/5.5-SNAPSHOT in feature(s) activemq-5.5-SNAPSHOT: Unresolved constraint in bundle activemq-karaf [64]: Unable to resolve 64.0: missing requirement [64.0] package; (&(package=org.apache.felix.gogo.commands)(version>=0.6.0)(!(version>=1.0.0)))
{code}


I tried manually adding gogo commands and runtime (v 0.8.0) but with no luck. Can someone else take a look at it, as I might missing something obvious.

 

, This is strange. I'm sure I've already fixed this. Could you please locally apply my second patch @AMQ-3207, build locally and try again?, This is now solved by using older (5.4.2) activemq-karaf for older versions. It's also documented here 

https://cwiki.apache.org/confluence/display/ACTIVEMQ/OSGi+Integration

Thanks to Andreas for suggestion]