[Actually, I'm not quite sure why the entryLocator becomes NULL. Could you please give me a hint on that?

*Proposed solution*: Use {{messageId.getFutureOrSequenceLong()}} to get the sequence id in case the entryLocator is NULL.

See: https://github.com/apache/activemq/pull/167, GitHub user jenshadlich opened a pull request:

    https://github.com/apache/activemq/pull/167

    [AMQ-6160] fix NPE; use messageId.getFutureOrSequenceLong() as sequen…

    …ceId if entryLocator is NULL

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/jenshadlich/activemq master

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/activemq/pull/167.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #167
    
----
commit 569ab7e4d01913b646f024f097662da5ed7c8797
Author: Jens Hadlich <jns@spreadshirt.net>
Date:   2016-02-05T09:43:12Z

    [AMQ-6160] fix NPE; use messageId.getFutureOrSequenceLong() as sequenceId if entryLocator is NULL

----
]