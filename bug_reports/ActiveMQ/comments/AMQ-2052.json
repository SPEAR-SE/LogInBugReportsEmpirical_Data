[Test case to deomonstrate the problem.  Note that the test passes, you have to put a breakpoint to see the problem., The actual problem causing this is confusion over when to use a file-system-safened ID.  Fixed in rev 730596.

I'm also changing the RecoveryListenerAdapter to throw an exception when it gets into this inconsistent state. Rev 730598.

I may try to simplify when and where the file system safening occurs.  I also plan to move the test case to a better location., Code inspection shows there are still a lot more confusions about when to use a file system safened name., I think rev 730614 is an OK fix.... still need the test case., One more major file name problem... rev 730817.  Surprisingly this only caused 13 test failures., What is the work around after the store gets into this state? Is there one?, David, are you done with this or is there more work needed to get the tck passing?, I've fixed all the problems I can find related to this so I'm closing this.]