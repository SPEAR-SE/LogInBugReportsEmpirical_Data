[Need to be careful with a fix of two things that I was seeing while trying to fix that other issue.  You have to find a way to not send the receipt before you really know if the subscribe worked, and you have to ensure that if it did work that the receipt goes ahead of any dispatched messages to the client.  Lots of fun racing events in there. , fix in http://svn.apache.org/viewvc?rev=1424936&view=rev, @Tim, fix was to run prefetch values propagated through consumer control commands via the policyentry. Failover (setting prefetch to 0 and back) suffered the same problem.]