[LevelDB works quite a bit differently from KahaDB.  Compaction occurs in a much more lazy manner however you can force a compaction by acquiring the LevelDB MBean and calling the compact method.  , I found the compaction occurs,but it only make the data log file increase slowly,after activemq runs a long time the data log file will increase very big (above 7G) and increase continuously.I want the activemq can move all message data logs that are no longer used as kahaDB works.
Thanks for your help., Attached is a test case that shows that against the latest 5.9-SNAPSHOT the level db data is cleared as expected.  , Created a test case that verifies that trunk leveldb store cleans up as the data is consumed from the store., Thanks for your help. I will wait for the official 5.9 version, and now I use kahaDB, In ActiveMQ 5.9.0,leveldb store can't cleans up all as the data is consumed from the store when send messages faster than the rate of consumption.Stop sending messages, the message is consumed when finished, there are many DataLog not cleared., Another scene, first send 2000 messages to the MQ, each message 428kb, stop sending the message, when  the messages all be consumed,more than 400mb of DataLog not cleared, This seems related to https://issues.apache.org/jira/browse/AMQ-4810.

Note the Apollo issue linked from AMQ-4810..., Windows hava this problem,linux is right., +1
!http://reho.st/self/13d16a568bef4156da7793ef3da28f08642890d9.png!, LevelDB is deprecated and no longer maintained.  ]