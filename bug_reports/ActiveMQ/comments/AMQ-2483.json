[resolved in r835874
revert queue back to pooled/dedicated task runner where multiple wake up calls are consolidated. To ensure no  call is ignored, the queue tracks pending wakeupRequests and requests a repeat iteration till all requests are satisfied.
Run of unit tests with -DuseDedicatedTaskRunner=true threw up a few failures, one of which was: https://issues.apache.org/activemq/browse/AMQ-2028
I exposed useDedicatedTaskRunner on connection factory to allow explicit unit test verification and propagated broker.useDedicatedTaskRunner to make it more easily configurable. ]