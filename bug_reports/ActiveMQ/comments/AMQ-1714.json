[this patch provides a test case that shows the problem and a fix that adds additional synchronisation to the queue dispatch method.
removing a subscription needs to be synchronized with the use of subscriptions. This seems to be the intended use of dispatchLock but up till now dispatch() does not lock dispatchLock., Patch applied in SVN  revision 655805]