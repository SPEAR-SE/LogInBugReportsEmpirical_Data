[Test case class, Broker configuration, And related to this bug, I can report a related problem.
The http transport maintains a cache of the connected clients and doesn't flush it. If I restart the client, It cannot reconnect until I restart the broker:

javax.jms.JMSException: Could not connect to broker URL: http://server:61617/broker003. Reason: java.io.IOException: Failed to perform GET on: http://server:61617/broker003 as response was: 400
at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:35)
at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:286)
at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:230)
at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:178)
...., The http transport now has an inactivity monitor, configure the http transport url with a low inactivity timeout value and the server end of the http transport will timeout when the client jvm crashes.

{code}http://localhost:61617??transport.readCheckTime=4000&amp;transport.initialDelayTime=4000{code}, This issue is resolved by the fix for AMQ-2764]