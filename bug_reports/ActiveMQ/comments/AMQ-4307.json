[patch applied.  Would be great if you can get a stack trace of the hung test., Stack trace from a hung test, That's an interesting one, looks like we are stuck when we processing the shutdowninfo command which triggers us calling a stop while the run method is processing some incoming request.  , Kevin, can you retest this one as well and see if the HttpClient update might have also resolved it, not reproducible here. , Sure, I'll start it now.
, Sorry, this is still failing on my old mac.  It failed after 3 iterations on the first attempt, 48 the second time.
, This one is a bit tricky.  The lock occurs because the httpMethod is finishing its write and need to update the SSL Socket's state table and some other internal housekeeping and we come in and try to abort the method and close the socket right away.  We should probably at least give the run method a chance to finish before we hard abort the httpMethod, question is how long do we wait.  Some Google searching seems to indicate that doesn't happen on every JDK version., I worked around it as best I could, on my current 1.7 JVM I don't see the lock so hopefully this disappears as later JVMs are installed. , This now manages to get through 100 iterations on my old slow Mac, so I think we're good.
]