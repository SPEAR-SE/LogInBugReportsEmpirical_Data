[Suggest you add a JUnit test case to demonstrate the issue, then someone can look into it.  , Fixed on trunk, now sets accepted state once Message is received and processed., I reverted the addition of  factory.setSyncPublish(syncPublish);[1]
which seems to require a later version of qpid jms client, trunk amqp tests would not compile.

[1] https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commit;h=a33a4e76, @Tim, can you check what I reverted? it seems important to this scenario, Sorry about that, it's ok to remove that as long as the producer is set to send with DeliveryMode.PERSISTENT.  This simply tests that the test doesn't hang which it shouldn't now since the fix for AMQ-4741 is in.

We should probably think about moving trunk to a 0.26 SNAPSHOT soon as many of the tests are checking that the fixes there are good.  , Revert of the sync option set is fine, will work as expected once 0.26 is our default client dependency.  , makes sense to move to the .26 snap b/c there are a bunch of failing tests in the amqp module atm.]