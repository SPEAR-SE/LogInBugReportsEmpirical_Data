[it looks like that fix needs to be reverted, [~tabish121]  - what do u think?, Seems like it probably should be.  , [~gtully] Looking at that code again I think it might make more sense to change the collectBrokerInfos calls for those null checks such that they call serviceLocationException instead which should result in both the fire of the error and the dispose call on the controlling resource which is the bit that is currently being missed.  Otherwise you end up with the NPE error getting fired out which causes confusion in the logs.  Thoughts?

{code}
diff --git a/activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java b/activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java
index 8e08f95..ad6fd61 100644
--- a/activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java
+++ b/activemq-broker/src/main/java/org/apache/activemq/network/DemandForwardingBridgeSupport.java
@@ -348,7 +348,7 @@
         try {
             remoteBrokerInfo = futureRemoteBrokerInfo.get();
             if (remoteBrokerInfo == null) {
-                fireBridgeFailed(new Throwable("remoteBrokerInfo is null"));
+                serviceLocalException(new Throwable("remoteBrokerInfo is null"));
                 return;
             }
         } catch (Exception e) {
@@ -359,7 +359,7 @@
         try {
             localBrokerInfo = futureLocalBrokerInfo.get();
             if (localBrokerInfo == null) {
-                fireBridgeFailed(new Throwable("localBrokerInfo is null"));
+                serviceLocalException(new Throwable("localBrokerInfo is null"));
                 return;
             }
 {code}
 , Commit a3c8bee1f0696b1d0d9a315b12241eecbf1f2d85 in activemq's branch refs/heads/master from [~tabish121]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a3c8bee ]

https://issues.apache.org/jira/browse/AMQ-5605

Attempt to resolve high CPU usage after error by ensuring that the
transport is disposed along with the fire of the local error. , Thanks. I tested the commit with the current 5.11.x branch and it fixes the issue. 

Is there any possibility to get this issue and AMQ-5082 in a 5.11.x release?, [~tabish121] think that nails it :-), Sweet. I will test the current 5.11.x branch without the patch from AMQ-5082 and let you know. Might take a day or so., [~gtully] and [~tabish121], thanks for your help. Applying the patch to the latest 5.11.x branch fixes the issue for me. 

Any chance of getting this in a release, either 5.11.x or 5.12.x?, Fix included in 5.12.0 code.  , Commit 756fa656b37df24bfe41679f8db238c021fe5f8b in activemq's branch refs/heads/activemq-5.11.x from [~tabish121]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=756fa65 ]

https://issues.apache.org/jira/browse/AMQ-5605

Attempt to resolve high CPU usage after error by ensuring that the
transport is disposed along with the fire of the local error. , Does this bug affect the version 5.10.2 of ActiveMQ? Because we have a similar problem with 100% CPU usage and nothing special in logs.
Our ActiveMQ was working fine until we introduce the Network Connector with {{masterslave:(tcp://host1, tcp://host2)}}, I believe it was introduced in 5.10.1 so the same issue probably exists in 5.10.2 as well since it wasn't fixed until 5.11.3 and 5.12.0.]