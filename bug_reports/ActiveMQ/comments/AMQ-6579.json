[Good catch, this is indeed a bug and the fix you suggest is correct.  The dispatched counter should only increment when messages are added to the dispatched list and not expired., Commit d0c95146c37f96ca69e1fe82c4b2fe9208f8184e in activemq's branch refs/heads/master from [~cshannon]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=d0c9514 ]

https://issues.apache.org/jira/browse/AMQ-6579

Remove incorrect dispatch counter increment on message expiration in
TopicSubscription when a pending limit strategy is set
, Commit 96f312ebe5c7820c06e3ceebdca1e70c5fd6b122 in activemq's branch refs/heads/activemq-5.14.x from [~cshannon]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=96f312e ]

https://issues.apache.org/jira/browse/AMQ-6579

Remove incorrect dispatch counter increment on message expiration in
TopicSubscription when a pending limit strategy is set

(cherry picked from commit d0c95146c37f96ca69e1fe82c4b2fe9208f8184e)
]