[Hello,
I attached 3 files that enable repdrocing the OOM due to Advisory messages.
I think that issue is due to the fact that advisory messages are generating FULL Advisory either due to error in MemoryUsage computation based on parent (as I understant in code).
Thus when many Full Advisory messages are sent, Advisory end up generating advisory for advisory cascading this and ending with OOM , Hi again,
I attached a configuration workaround that solves OOM by disabling Advisory messages on Advisory messages.

Philippe
http://www.ubik-ingenierie.com, Issue present on AMQ 5.3.0 and 5.2.0, Fixed by SVN revision 912497on 5.3.1
and 912496 on trunk, regression test, revised regression test - try harder to avoid interfering with other test cases, attaching revised regression test - this should catch a broader class of errors by failing if the expected number of messages was not received

(part of the failure mode of this issue was that messages were being dropped)]