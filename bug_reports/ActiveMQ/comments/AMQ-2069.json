[great. thanks for the heads up and [contribution|http://activemq.apache.org/contributing.html]
Do you have a test case you could attach to this issue to protect your changes into the future. 
if you do a svn diff > amq-2059.diff  and attach that with a license grant it would be fantastic. , I tried to provide a patch for it, please help to review it.
Thanks !, Patch applied in SVN revision 797052 with thanks ]