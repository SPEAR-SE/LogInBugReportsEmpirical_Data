[Test class org.apache.activemq.transport.stomp.StompLoadTestWithAck, Note about same use case on Apollo 1.6: my original Delphi based test case which detected this problem with ActiveMQ 5.9 works very well with the Apollo broker, ACK frames are accepted at a high rate and for a high message volume (> 100,000 messages)., Fixed test that shows how to accomplish this., The test fails due to a lack of controlling receipt requests that allow the subscription to be put in place prior to producing messages to the topic.  Also the connection close can happen before all data is consumed from the socket causing acks to be missed.  ]