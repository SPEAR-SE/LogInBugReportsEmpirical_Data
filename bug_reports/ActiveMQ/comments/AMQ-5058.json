[Patch for adding support for zero length client id, applied on trunk]