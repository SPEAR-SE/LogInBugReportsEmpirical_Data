[Attached a test case that I am using to test different cluster configurations. It reads the configuration files for the brokers in a cluster starting at index 1. It then sets up consumers/produces to the first defined transport for each broker. The test then sends some queue or topic messages in a round robin fashion checking that each message is delivered to each consumer.

The source code does not conform to the coding standard in ActiveMQ. If you want I can fix that..., this is the same problem as AMQ-90, Perhaps they are related, but the fix of AMQ-90 does not cover this problem. However since it only affects clusters with three or more brokers exchanging topic messages I guess that it is not that urgent to fix..., In my rush to run through closing outstanding issues - I missed the point you was making. Currently, Networks are only valid for store and forward acyclic network topologies, unless the topology is ring containing only two brokers. 

There is still a few things to add to support clusters. But rather than take the approach that you outlined so well, it will probably more optimal to restrict subscription propagation  within a cluster, as messages are only forwarded on this basis., There's a Topic cluster test now in usecases, with a Producer/Consumer on each broker. This seems to work ok]