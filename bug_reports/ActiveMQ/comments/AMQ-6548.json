[Is anyone read this task?

It's not possible to stop wildfly if activeMq is not stopped. Some messages are gone without processing., would it be possible to build a test case or unit test that will demonstrate the problem and protect the fix?, Commit 85181d630c94c7ca7a47cbb40fc55e3f9e27b574 in activemq's branch refs/heads/master from [~gtully]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=85181d6 ]

[AMQ-6548] ensure any pending xa transaction is marked rollback only on delivery failure exception from on message, before delegating to potential clientInternalExceptionListener. Variant of patch applied with additional test - thanks to Andrey Dyachikhin for the patch inspiration
, it makes sense to force rollbackOnly on delivery failure due to an exception.  Thanks for the patch [~Kris_1]]