[Attached a unit test for the issue- JDBCIOExceptionHandlerTest.java, It seems that org.apache.activemq.broker.BrokerService.stopAllConnectors(...) does not unregister the transport connectors MBean., fixed on trunk., The transport connectors are unregistered when stopping the broker service but the transport connector list is not cleared, so when we restart the broker (eg: Database failover) the transport connectors get duplicated and now we try to register them twice leading to a "java.io.IOException: Transport Connector could not be registered in JMX: Failed to bind to server socket"

, Can you create a JUnit test along the lines of the JDBCIOExceptionHandlerTest that was originally added to show the issue you are running into?, Attached a unit test for the issue - Failed to bind to server socket, The file you attached actually appears to be a copy of BrokerService.java.  , Oops! Re-attached the right one now, Ugh. "The transport connectors are unregistered when stopping the broker service but the transport connector list is not cleared". In other words they were NOT being unregistered.]