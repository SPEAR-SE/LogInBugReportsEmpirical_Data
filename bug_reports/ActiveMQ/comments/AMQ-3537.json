[AMQ3537Test.groovy is a test case demonstrating the bug.  The list of interfaces at the top of the test can be manipulated to show that the ClassLoadingAwareObjectInputStream is only choosing the ClassLoader from the first interface in the array., Any chance you can port your unit test to Java, then it could be included in the test suite to validate any future changes.  Also in order to include patches or tests in the source you need to ensure that you tick the license grant to apache when you upload your files., Here is a simple java port of the groovy test case., Apply fix and add provided test case.]