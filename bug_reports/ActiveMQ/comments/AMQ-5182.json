[To fix AMQ-3094, a test was added to check if the current continuation is still suspended to avoid losing messages to be returned on the continuation.

In AMQ-4801, the test was expanded to also check if !continuation.isInitial(). This has nothing to do with the given bug, and causes messages to be postponed, even when a continuation is available., Added patch to revert change from AMQ-4801, patch applied with thanks in http://git-wip-us.apache.org/repos/asf/activemq/commit/b5581166]