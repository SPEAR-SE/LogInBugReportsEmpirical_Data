[AMQ-4180 was the feature that added this regression, Recommend you create a unit test, and even better a patch for the issue. , Attached is test case showing the exception when a string property is copied from an unmarshaled message to another message using setObjectProperty.

Suggested fix is to add UTF8Buffer to the checkValidObject whitelist., fixed on trunk, Thanks!, Fix revision: https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=commit;h=a6e306437efafc13cf2c2e9d681d5685fdfbcfce]