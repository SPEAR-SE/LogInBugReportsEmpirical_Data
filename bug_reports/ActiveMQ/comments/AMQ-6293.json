[Commit 1241e4120a5f4af58be2952a6ec985dcd8ac11c3 in activemq's branch refs/heads/master from [~cshannon]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=1241e41 ]

https://issues.apache.org/jira/browse/AMQ-6293

Fixing Queue destination statistics in dropMessage by adding sync in
between the check for dropped and actually dropping the message plus
fixing dequeue stats so messages aren't counted twice
, Patch applied with a test case.  This can be reopened if there are still issues in the future with wrong counts. , Commit a2720c46530a4e82907888bb0c33c2e41c6565e4 in activemq's branch refs/heads/master from [~tabish121]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=a2720c4 ]

https://issues.apache.org/jira/browse/AMQ-6293

Clean up the test, the times were causing CI failure.  Turn off
persistence and fix a couple other things, reduced time to 2.5 secs
while still reproducing with fix removed.  ]