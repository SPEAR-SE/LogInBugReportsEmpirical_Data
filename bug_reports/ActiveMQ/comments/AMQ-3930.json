[Can't seem to reproduce this on my hardware.  The test is testing AMQ persistence adapter which is not really recommended anymore., It still fails for me, about 1/4 of the time both on my mac and on ubuntu.  Since we don't recommend the persistence adapter anymore should we just mark this test as @Ignore?  

I will attach a patch that does this.
, Update test to JUnit4 and add @Ignore to testForDataFileNotDeletedTransacted.
, Applied the patch to disable to failing test, the AMQ and Kaha stores will be deprecated in v5.8]