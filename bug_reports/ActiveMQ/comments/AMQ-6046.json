[Commit caa6b8e2539132999045c3fbbd627a2dc6d0885c in activemq's branch refs/heads/master from [~tabish121]
[ https://git-wip-us.apache.org/repos/asf?p=activemq.git;h=caa6b8e ]

https://issues.apache.org/jira/browse/AMQ-6046

Prevent concurrent access to protocol handlers which can lead to
transport level deadlocks.  , I ran into a deadlock today when working on MQTT and AMQ-6343.  I verified that it is the same problem as this fix was never applied to MQTT.  I will go ahead and do that in a new Jira.]