[Attaching junit test., is it the prefetch extension that is responsible for the second message dispatch that causes the problem here?, Yes, exactly.  I didn't mention it here before because I had opened a separate JIRA for that and didn't want to confuse the issues., fixed by https://issues.apache.org/jira/browse/AMQ-2651]