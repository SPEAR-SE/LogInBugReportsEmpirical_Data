[We found in our testing that this might be related to using <connectionDotFilePlugin/> and is connected to the issue seen in http://issues.apache.org/activemq/browse/AMQ-2513. It'd be great if you can test against the latest trunk and see if the exception still occurs., resolved similar issue in r891582

jmstemplate and failover - replay of transactions messages needed to also replay dependent producers so message replay can succeed. 
When producers are always closed after transaction commit the extra tracking can be disabled though {code} failover:(...)?trackTransactionProducers=false{code}]