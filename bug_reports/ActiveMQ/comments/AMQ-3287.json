[I am also getting this same behavior, can you please attach your thread dump, so that we can verify if you have the same issue?

Just to let you know, the reason why it failed for me is that failover is holding some messages which were unsent and if I try to shut this down, my application hangs.

Can you please attach your thread dump?


Here is the thread causing this issue for me:
"main" prio=5 tid=101801000 nid=0x100501000 in Object.wait() [1004fe000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <7e68b03e8> (a java.lang.Object)
	at org.apache.activemq.transport.failover.FailoverTransport.oneway(FailoverTransport.java:513)
	- locked <7e68b03e8> (a java.lang.Object)
	at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)
	- locked <7e68b05a8> (a java.lang.Object)
	at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)
	at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86)
	at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1276)
	at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1382)
	- locked <7e68b0b90> (a java.lang.Object)
	at org.apache.activemq.ActiveMQConnection.start(ActiveMQConnection.java:504)
	at org.mule.transport.jms.JmsConnector.doStart(JmsConnector.java:626)
	at org.mule.transport.AbstractConnector$2.onTransition(AbstractConnector.java:459)
	at org.mule.transport.AbstractConnector$2.onTransition(AbstractConnector.java:454)
	at org.mule.lifecycle.AbstractLifecycleManager.invokePhase(AbstractLifecycleManager.java:141)
	at org.mule.transport.ConnectorLifecycleManager.fireStartPhase(ConnectorLifecycleManager.java:63)
	at org.mule.transport.AbstractConnector.startAfterConnect(AbstractConnector.java:453)
	- locked <7e72203d0> (a org.mule.transport.jms.activemq.ActiveMQJmsConnector)
	at org.mule.transport.AbstractConnector$5.doWork(AbstractConnector.java:1601)
	at org.mule.retry.policies.AbstractPolicyTemplate.execute(AbstractPolicyTemplate.java:67)
	at org.mule.transport.AbstractConnector.connect(AbstractConnector.java:1611)
	at org.mule.transport.AbstractConnector.start(AbstractConnector.java:419)
	- locked <7e72203d0> (a org.mule.transport.jms.activemq.ActiveMQJmsConnector)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.mule.lifecycle.phases.DefaultLifecyclePhase.applyLifecycle(DefaultLifecyclePhase.java:225)
	at org.mule.lifecycle.RegistryLifecycleManager$RegistryLifecycleCallback.onTransition(RegistryLifecycleManager.java:276)
	at org.mule.lifecycle.RegistryLifecycleManager.invokePhase(RegistryLifecycleManager.java:155)
	at org.mule.lifecycle.RegistryLifecycleManager.fireLifecycle(RegistryLifecycleManager.java:126)
	at org.mule.registry.AbstractRegistryBroker.fireLifecycle(AbstractRegistryBroker.java:80)
	at org.mule.registry.MuleRegistryHelper.fireLifecycle(MuleRegistryHelper.java:121)
	at org.mule.lifecycle.MuleContextLifecycleManager$MuleContextLifecycleCallback.onTransition(MuleContextLifecycleManager.java:94)
	at org.mule.lifecycle.MuleContextLifecycleManager$MuleContextLifecycleCallback.onTransition(MuleContextLifecycleManager.java:90)
	at org.mule.lifecycle.MuleContextLifecycleManager.invokePhase(MuleContextLifecycleManager.java:72)
	at org.mule.lifecycle.MuleContextLifecycleManager.fireLifecycle(MuleContextLifecycleManager.java:64)
	at org.mule.DefaultMuleContext.start(DefaultMuleContext.java:202)
	- locked <7e6e15050> (a org.mule.DefaultMuleContext)
	at org.mule.config.builders.MuleXmlBuilderContextListener.initialize(MuleXmlBuilderContextListener.java:100)
	at org.mule.config.builders.MuleXmlBuilderContextListener.contextInitialized(MuleXmlBuilderContextListener.java:74)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
	- locked <7e6c80800> (a org.apache.catalina.core.StandardContext)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
	- locked <7e6c49b60> (a java.util.HashMap)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546)
	at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:905)
	at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:740)
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:500)
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
	- locked <7e6c49ac8> (a org.apache.catalina.core.StandardHost)
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
	- locked <7e6c49ac8> (a org.apache.catalina.core.StandardHost)
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
	- locked <7e6c33ed0> (a org.apache.catalina.core.StandardEngine)
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
	at org.apache.catalina.core.StandardService.start(StandardService.java:519)
	- locked <7e6c33ed0> (a org.apache.catalina.core.StandardEngine)
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
	- locked <7e6c4f0a0> (a [Lorg.apache.catalina.Service; )
	at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
, Hi Robert
I have never tried this on windows but here is the doc:
http://www.crazysquirrel.com/computing/java/basics/java-thread-dump.jspx

Try this out..Paste the entire dump here when you get it...

Thanks, I was unable to get a thread dump for this issue.]