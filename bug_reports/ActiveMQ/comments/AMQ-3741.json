[Do you have a unit test that shows the issue?  Have you tested against the latest 5.6-SNAPSHOT?  This sounds like something that's already been fixed., At first I thought about: https://issues.apache.org/jira/browse/AMQ-3070 because threads are hung on: purgeDestinations, addProducer, addConsumer etc.but that's not what causing the deadlock.

I haven't tested it on 5.6 yet only on released: 5.4.3 and 5.5.1. It's rather hard to reproduce., From a code review of trunk this is already resolved by other fixes that have changed the locking strategy for the destinations collection. ]