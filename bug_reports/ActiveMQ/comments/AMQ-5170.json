[This already works, you just need to pass the selector as a HTTP header and not a parameter. See

http://activemq.apache.org/rest.html#REST-Consumingwithselectors

for more information.

For the given example, I'd also suggest using clientId option as it will give more control over subscribing/unsubscribing from the queue without using sessions.

So for this particular example, two producers created like this

{code}wget -qO- --user admin --password admin --header="selector: prop=1" 'http://localhost:8161/api/message/test?type=queue&clientId=consumer1'
wget -qO- --user admin --password admin --header="selector: prop=2" 'http://localhost:8161/api/message/test?type=queue&clientId=consumer2'{code}

should do the trick]