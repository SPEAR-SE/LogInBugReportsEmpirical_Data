[activemq-core patch, activemq-console patch, this class belong to activemq-console org.apache.activemq.console.command package, added --localProcessId to use <pid> to connect to jmx, add --localProcessId to use pid to connect to jmx, updated fix more stopping issue, updated fix more stop issue, Nice patch! 
Any chance you can update against the latest in trunk ?
Also - not sure about introducing dependency on jetty into activemq-core package - maybe better to derive a class in activemq-optional ?, Fixed by revision 813422 and revision 813424, It seems that last time when the patch is applied, a line of code is merged incorrectly. AMQ-2070-5.3.1.patch will fix that and make stopGracefully work properly, Fixed by SVN revision 963104]