[There doesn't seem to be an error here, in the configuration specified the Connection is created and without a broker it will fail to connect to anything.  Creating a ConnectionFactory doesn't initiate a connection to the broker, that starts after you call createConnection.  

It sounds like the behaviour you want requires the use of a combination of failover and the discovery transport.  ]