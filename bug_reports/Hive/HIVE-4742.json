{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [],
        "created": "2013-06-17T09:02:03.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hibou&avatarId=15047",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hibou&avatarId=15047",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hibou&avatarId=15047",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hibou&avatarId=15047"
            },
            "displayName": "Nicolas Lalevée",
            "key": "hibou",
            "name": "hibou",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hibou",
            "timeZone": "Europe/Paris"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2013-06-17T09:18:22.405+0000",
        "customfield_12310222": "1_*:*_1_*:*_5462641614_*|*_5_*:*_1_*:*_0",
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310320": null,
        "customfield_12310420": "333482",
        "customfield_12310920": "333810",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i1lj0f:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Dec 03 19:11:49 UTC 2013",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "I create programmatically a script to create a view which is a union of all kind of event I have. To keep things simple, data are just blindly cast as STRING. It used to work with Hive 0.10, not anymore with 0.11.\n\nI tried to narrow down the simplest script. It seems that it only occurs if a least a view and an union is involved.\n\nHere is a failing script:\n{noformat}\nCREATE TABLE Event1 (d STRING, userid BIGINT, eventData1 STRING);\nCREATE TABLE Event2 (d STRING, userid BIGINT, eventData2 STRING);\nCREATE VIEW AllEventsTest\n  AS SELECT * FROM (\n    SELECT 'Event1' AS eventType, map('d', CAST(`d` AS STRING)) AS eventData FROM Event1\n    UNION ALL\n    SELECT 'Event2' AS eventType, map('d', CAST(`d` AS STRING)) AS eventData FROM Event2\n) d;\n{noformat}\n\nThere are warnings in the logs:\n{noformat}\no.a.h.h.q.parse.TypeCheckProcFactory - Invalid type entry TOK_STRING=null\no.a.h.h.q.parse.TypeCheckProcFactory - Invalid type entry TOK_STRING=null\n{noformat}\n\nAnd the error is:\n{noformat}\nFAILED: IllegalArgumentException replace op boundaries of <ReplaceOp@[@46,103:105='`d`',<26>,3:52]..[@46,103:105='`d`',<26>,3:52]:\"`event1`.`d`\"> overlap with previous <ReplaceOp@[@44,98:101='CAST',<48>,3:47]..[@51,116:116=')',<276>,3:65]:\"`event1`.`d`\">\n10:52:51.024 [scoopMapredScheduler_Worker-9 ] [ERROR] org.apache.hadoop.hive.ql.Driver - FAILED: IllegalArgumentException replace op boundaries of <ReplaceOp@[@46,103:105='`d`',<26>,3:52]..[@46,103:105='`d`',<26>,3:52]:\"`event1`.`d`\"> overlap with previous <ReplaceOp@[@44,98:101='CAST',<48>,3:47]..[@51,116:116=')',<276>,3:65]:\"`event1`.`d`\">\njava.lang.IllegalArgumentException: replace op boundaries of <ReplaceOp@[@46,103:105='`d`',<26>,3:52]..[@46,103:105='`d`',<26>,3:52]:\"`event1`.`d`\"> overlap with previous <ReplaceOp@[@44,98:101='CAST',<48>,3:47]..[@51,116:116=')',<276>,3:65]:\"`event1`.`d`\">\n    at org.antlr.runtime.TokenRewriteStream.reduceToSingleOperationPerIndex(TokenRewriteStream.java:504)\n    at org.antlr.runtime.TokenRewriteStream.toString(TokenRewriteStream.java:374)\n    at org.antlr.runtime.TokenRewriteStream.toString(TokenRewriteStream.java:358)\n    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.saveViewDefinition(SemanticAnalyzer.java:8781)\n    at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:8689)\n    at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:278)\n    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:433)\n    at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:337)\n    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:902)\n    at org.apache.hadoop.hive.service.HiveServer$HiveServerHandler.execute(HiveServer.java:198)\n    at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:192)\n{noformat}\n\nHere is a working script:\n{noformat}\nCREATE TABLE Event1 (d STRING, userid BIGINT, eventData1 STRING);\nCREATE TABLE Event2 (d STRING, userid BIGINT, eventData2 STRING);\nCREATE VIEW AllEventsTest\n  AS SELECT * FROM (\n    SELECT 'Event1' AS eventType, map('d', `d`, 'userid', CAST(`userid` AS STRING)) AS eventData FROM Event1\n    UNION ALL\n    SELECT 'Event2' AS eventType, map('d', `d`, 'userid', CAST(`userid` AS STRING)) AS eventData FROM Event2\n) d;\n{noformat}",
        "duedate": null,
        "environment": null,
        "fixVersions": [{
            "archived": false,
            "description": "released",
            "id": "12324312",
            "name": "0.12.0",
            "releaseDate": "2013-10-15",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12324312"
        }],
        "issuelinks": [{
            "id": "12379375",
            "inwardIssue": {
                "fields": {
                    "issuetype": {
                        "avatarId": 21133,
                        "description": "A problem which impairs or prevents the functions of the product.",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                        "id": "1",
                        "name": "Bug",
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                        "subtask": false
                    },
                    "priority": {
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "id": "3",
                        "name": "Major",
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                    },
                    "status": {
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "id": "6",
                        "name": "Closed",
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "statusCategory": {
                            "colorName": "green",
                            "id": 3,
                            "key": "done",
                            "name": "Done",
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                        }
                    },
                    "summary": "A complex create view statement fails with new Antlr 3.4"
                },
                "id": "12647266",
                "key": "HIVE-4547",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/12647266"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12379375",
            "type": {
                "id": "10030",
                "inward": "is related to",
                "name": "Reference",
                "outward": "relates to",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
            }
        }],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935"
            },
            "id": "12310843",
            "key": "HIVE",
            "name": "Hive",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310843"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hibou&avatarId=15047",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hibou&avatarId=15047",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hibou&avatarId=15047",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=hibou&avatarId=15047"
            },
            "displayName": "Nicolas Lalevée",
            "key": "hibou",
            "name": "hibou",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=hibou",
            "timeZone": "Europe/Paris"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2013-08-19T14:26:04.000+0000",
        "status": {
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "id": "6",
            "name": "Closed",
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "A useless CAST makes Hive fail to create a VIEW based on an UNION",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2013-12-03T19:11:49.000+0000",
        "versions": [{
            "archived": false,
            "description": "Hive 0.11.0",
            "id": "12323587",
            "name": "0.11.0",
            "releaseDate": "2013-05-15",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12323587"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-4742/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-4742/watchers",
            "watchCount": 5
        },
        "workratio": -1
    },
    "id": "12653159",
    "key": "HIVE-4742",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12653159"
}