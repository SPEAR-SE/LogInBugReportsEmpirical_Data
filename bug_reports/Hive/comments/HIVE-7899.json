[Attaching a patch that moves the transaction manager from Driver to SessionState.  This will make it easier to share the transaction manager across queries in the same session., Small change to also track current transaction id and auto commit in SessionState., Posted review https://reviews.apache.org/r/25343/, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12666509/HIVE-7899.2.patch

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 6142 tests executed
*Failed tests:*
{noformat}
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/639/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/639/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-639/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12666509, +1
Will this also fix HIVE-7883 or is that entirely different?, bq. Will this also fix HIVE-7883 or is that entirely different?
No, this doesn't fix that, but it will make it less of a problem.  I need to fix that separately., Committed to trunk. Thanks, Alan!, This has been fixed in 0.14 release. Please open new jira if you see any issues.
]