[The Cloudera release of Hive contains a patched version of lib/datanucleus-core-1.1.2.jar that fixes this issue.  Any chance we can get that checked in to trunk?  Until then, Hive trunk doesn't run on some Cloudera Hadoop releases since they name them with + signs, (eg, hadoop-0.20.1+152)., If we uploaded a patched datanucleus to solve this issue, would folks be alright including it in Hive (and possibly the 0.5 branch)?

I ran into this again recently, trying to run Hive's 0.5 metastore server against the current version of Cloudera's distribution, and it took a while to decipher the error.

Thanks,

-- Philip, The patch submitted for HIVE-1176 would upgrade the data nucleus plugin to the latest stable version which does have a fix for this issue., Should we just mark this as a duplicate of 1176 in that case?, Probably a dependency is more appropriate., I just did a patch that adds connection pooling to DataNucleas. (Sorry that I jumped ahead of you). It should be easy to update now just bump the versions in metastore/ivy.xml. Please make sure the version you pick works with the connect pooling libs, as ivy fetches versions and dependants that do not work well together., A patch for HIVE-1176 has been submitted which addresses this problem by updating the datanucleus plugin as well as dependent libraries for Hive. Marking this JIRA as patch-submitted., Fix incorporated in HIVE-1176]