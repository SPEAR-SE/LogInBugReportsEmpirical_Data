[Attaching a patch for review. With this patch the CLASSPATH now has only the following jars:
{noformat}
$HIVE_HOME/lib/hive-beeline-*.jar
$HIVE_HOME/lib/super-csv-*.jar
$HIVE_HOME/lib/jline-*.jar
$HIVE_HOME/lib/hive-jdbc-*-standalone.jar
{noformat}, +1, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12670145/HIVE-8200.1.patch

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 6297 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.metastore.txn.TestCompactionTxnHandler.testRevokeTimedOutWorkers
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/903/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/903/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-903/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12670145, Committed to trunk. Thanks, Deepesh!, Does this need to be documented in the wiki?

The Beeline sections of the HiveServer2 doc don't mention jars but these sections do:

* [HiveServer2 Clients -- Running the JDBC Sample Code | https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-RunningtheJDBCSampleCode]
* [HiveServer2 Clients -- Using Kerberos with a Pre-Authenticated Subject | https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-UsingKerberoswithaPre-AuthenticatedSubject]
* [HiveServer2 Clients -- Integration with SQuirrel SQL Client | https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-IntegrationwithSQuirrelSQLClient]

The HS2 setup doc doesn't mention jar files at all:

* [Setting Up HiveServer2 | https://cwiki.apache.org/confluence/display/Hive/Setting+Up+HiveServer2]

Also, how about a release note?, [~deepesh] [~ashutoshc] I don't think the hive-jdbc uber jar quite ready yet. I did some investigation and found out that:
1. It is packaging a whole bunch of unrequired classes (from ql, serde, metastore etc).
2. It might not be shading properly to pack some required classes for a secure setup (HadoopThriftAuthBridge23, Configuration). This will require further investigation and more testing. 

I'm creating the following jiras to handle the issue:
1. Revert this patch.
2. Create a more effective & accurate uber jar.

Let me know what you guys think., [~vgumashta] Should it be more simple to fix errors in hive-jdbc uber jar instead of reverting everything?, [~damien.carol] I'm happy if someone takes this over from me: https://issues.apache.org/jira/browse/HIVE-8270. I won't be able to get to it in the next few days. 
Meanwhile, beeline will complain about class loading issues like the following (in a secure cluster): 
{code}
Connecting to jdbc:hive2://ip-172-31-36-90.ec2.internal:10000/;principal=hive/_HOST@EXAMPLE.COM
14/09/25 05:55:04 INFO jdbc.Utils: Supplied authorities: ip-172-31-36-90.ec2.internal:10000
Could not load shims in class org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge23
{code}

I think it is better to revert this (which is an optimization anyway) if we don't plan to fix the uber jar soon., Now that HIVE-8269 is resolved as invalid ("Revert HIVE-8200"), here's a ping for my doc query and request for a release note:

* [doc query & release note request | https://issues.apache.org/jira/browse/HIVE-8200?focusedCommentId=14142906&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14142906], [~leftylev] I'll add the relevant docs as part of HIVE-8270. Thanks for the nudge!, This has been fixed in 0.14 release. Please open new jira if you see any issues.
]