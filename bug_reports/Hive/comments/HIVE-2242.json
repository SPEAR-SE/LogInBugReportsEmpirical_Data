[- use db.getPartitions instead of db.getPartition to accommodate partial specifications, This one has been sitting in Patch Available queue for a while...anything holding it up?
, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1475/
-----------------------------------------------------------

Review request for hive and Paul Yang.


Summary
-------

Currently, when dropping partitions, the DDL Semantic Analyzer only passes partitions that have a full specification to Pre Execution hooks. It should also include all matches from partial specifications.

E.g., suppose you have a table
create table test_table (a string) partitioned by (p1 string, p2 string);
alter table test_table add partition (p1=1, p2=1);
alter table test_table add partition (p1=1, p2=2);
alter table test_table add partition (p1=2, p2=2);

and you run 
alter table test_table drop partition(p1=1);
Pre-execution hooks will not be passed any of the partitions. The expected behavior is for pre-execution hooks to get the WriteEntity's with the partitions "p1=1/p2=1" and "p1=1/p2=2"


This addresses bug HIVE-2242.
    https://issues.apache.org/jira/browse/HIVE-2242


Diffs
-----

  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 1140399 

Diff: https://reviews.apache.org/r/1475/diff


Testing
-------


Thanks,

Sohan

, @Sohan: Patch won't apply cleanly with 'patch -p0'. Can you please rebase and resubmit? Thanks.]