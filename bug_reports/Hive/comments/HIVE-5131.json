[Attach patch extracted from that for HIVE-4568. Will work on a test case., Patch updated with test case, The changes look good. For the unit test, instead of making change to the url used by all tests in TestBeeLineWithArgs, can you change it so that the url can be customized per test ? 
Maybe something like this - 
{code}
 final static String BASE_JDBC_URL = BeeLine.BEELINE_DEFAULT_JDBC_URL + "localhost:10000"
// set JDBC_URL to something else in test case, if it needs to be customized
 String JDBC_URL = BASE_JDBC_URL;

// Use JDBC_URL to connect
{code}, While you are at it, can you also make a minor change to javadoc of TestBeeLineWithArgs.testScriptFile ?
Change " @param expecttedPattern Text to look for in command output" to  "@param expecttedPattern Text to look for in command output/error", Patch is updated based on review comments., +1 . Making it patch available to kick off the tests.
, [~xuefuz] This was never documented in the doc page. So this is actually adding the new feature. Can you add the documentation for this part url format in the release note of the jira ? Once this is committed it can be moved to the wiki page as an upcoming 0.12 feature.
The wiki page - https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients

, [~thejas] I have updated the release note for this JIRA, and let me know if it suffices. Thanks., 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12601225/HIVE-5131.1.patch

{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 2910 tests executed
*Failed tests:*
{noformat}
org.apache.hcatalog.templeton.tool.TestTempletonUtils.testHadoopFsPath
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_smb_mapjoin_8
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/598/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/598/console

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests failed with: TestsFailedException: 2 tests failed
{noformat}

This message is automatically generated., The test failures seemed random and unrelated. Nevertheless, manually reran them and they both passed locally with the patch., [~navis] Do you also want to take a look at this patch, since this is very similar to your change in HIVE-4354 .
The key difference I see in that patch is that in embedded mode it starts the hiveserver2 with the modified hiveconf. Did you have any use case in mind for that ?
, HiveConf specified in URL for embedded mode is not applied to underlying hive infra, which should be fixed regardless of use case. And.. statement of hive jdbc2 is not reusable, so it would throw exception if two or more conf/var is specified., [~thejas] Since this patch has no contradiction with Navis' patch, could we proceed as this blocks HIVE-4568? As to Navis additional fixes (which I believe valid), it will come to the time when the patch is reviewed., bq. statement of hive jdbc2 is not reusable
I was not aware of such an issue. Looks like this and the config overlay are two issues that we need to create jiras for.


[~xuefuz] We can investigate the re-use of statement issue in a separate jira. I will commit this patch.
, Patch committed to trunk. Thanks Xuefu!
, FAILURE: Integrated in Hive-trunk-h0.21 #2313 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2313/])
HIVE-5131: JDBC client's hive variables are not passed to HS2 (Xuefu Zhang via Thejas Nair) (thejas: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1520465)
* /hive/trunk/beeline/src/test/org/apache/hive/beeline/src/test/TestBeeLineWithArgs.java
* /hive/trunk/jdbc/src/java/org/apache/hive/jdbc/HiveConnection.java
, ABORTED: Integrated in Hive-trunk-hadoop2 #409 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/409/])
, FAILURE: Integrated in Hive-trunk-hadoop1-ptest #152 (See [https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/152/])
HIVE-5131: JDBC client's hive variables are not passed to HS2 (Xuefu Zhang via Thejas Nair) (thejas: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1520465)
* /hive/trunk/beeline/src/test/org/apache/hive/beeline/src/test/TestBeeLineWithArgs.java
* /hive/trunk/jdbc/src/java/org/apache/hive/jdbc/HiveConnection.java
, FAILURE: Integrated in Hive-trunk-hadoop2-ptest #85 (See [https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/85/])
HIVE-5131: JDBC client's hive variables are not passed to HS2 (Xuefu Zhang via Thejas Nair) (thejas: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1520465)
* /hive/trunk/beeline/src/test/org/apache/hive/beeline/src/test/TestBeeLineWithArgs.java
* /hive/trunk/jdbc/src/java/org/apache/hive/jdbc/HiveConnection.java
, This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.]