[create table employees (name string, department_id tinyint, salary int);

SELECT name, salary, department_id, PERCENTILE_CONT(0.5) OVER (PARTITION BY department_id ORDER BY salary DESC) FROM employees;, References:

https://docs.microsoft.com/en-us/sql/t-sql/functions/percentile-cont-transact-sql

[https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions110.htm]

https://www.postgresql.org/docs/9.4/static/functions-aggregate.html]