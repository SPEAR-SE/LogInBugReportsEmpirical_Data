[navis requested code review of "HIVE-2901 [jira] Hive union with NULL constant and string in same column returns all null".
Reviewers: JIRA

  DPAL-1029 Hive union with NULL constant and string in same column returns all null

  select x from (select value as x from src union all select NULL as x from src)a;

  This query produces all nulls, where value is a string column.

  Notably,
  select x from (select key as x from src union all select NULL as x from src)a;
  where key is a string, but can be cast to a double, the query returns correct results.

TEST PLAN
  EMPTY

REVISION DETAIL
  https://reviews.facebook.net/D2541

AFFECTED FILES
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java
  ql/src/test/queries/clientpositive/union_null.q

MANAGE HERALD DIFFERENTIAL RULES
  https://reviews.facebook.net/herald/view/differential/

WHY DID I GET THIS EMAIL?
  https://reviews.facebook.net/herald/transcript/5775/

Tip: use the X-Herald-Rules header to filter Herald messages in your client.
, navis updated the revision "HIVE-2901 [jira] Hive union with NULL constant and string in same column returns all null".
Reviewers: JIRA

  Missed test result

REVISION DETAIL
  https://reviews.facebook.net/D2541

AFFECTED FILES
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java
  ql/src/test/queries/clientpositive/union_null.q
  ql/src/test/results/clientpositive/union_null.q.out
, navis updated the revision "HIVE-2901 [jira] Hive union with NULL constant and string in same column returns all null".
Reviewers: JIRA

  1. For union all, common type need not to be compared.

REVISION DETAIL
  https://reviews.facebook.net/D2541

AFFECTED FILES
  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java
  ql/src/test/queries/clientpositive/union_null.q
  ql/src/test/results/clientpositive/union_null.q.out
, njain has accepted the revision "HIVE-2901 [jira] Hive union with NULL constant and string in same column returns all null".

REVISION DETAIL
  https://reviews.facebook.net/D2541

BRANCH
  DPAL-1029
, Committed. Thanks Navis, Integrated in Hive-trunk-h0.21 #1357 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1357/])
    HIVE-2901 Hive union with NULL constant and string in same column returns all null
(Navis via namit) (Revision 1310179)

     Result = SUCCESS
namit : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1310179
Files : 
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java
* /hive/trunk/ql/src/test/queries/clientpositive/union_null.q
* /hive/trunk/ql/src/test/results/clientpositive/union_null.q.out
, This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that., Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])
    HIVE-2901 Hive union with NULL constant and string in same column returns all null
(Navis via namit) (Revision 1310179)

     Result = ABORTED
namit : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1310179
Files : 
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java
* /hive/trunk/ql/src/test/queries/clientpositive/union_null.q
* /hive/trunk/ql/src/test/results/clientpositive/union_null.q.out
]