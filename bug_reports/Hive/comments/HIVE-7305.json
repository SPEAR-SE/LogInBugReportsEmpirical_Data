[I added null check and size check logic.. Please review my patch~~, lgtm

nit:
indentation is off
Please add space between if and '(']