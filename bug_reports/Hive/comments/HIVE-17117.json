[Made a change to notify meta listeners during shutdown.

Also added unit test cases., Added a patch to notify meta listeners on metaconf cleanup., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12877882/HIVE-17117.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 12 failed/errored test(s), 11077 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[cte_mat_4] (batchId=6)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning_2] (batchId=169)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=168)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_use_op_stats] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_use_ts_stats_for_mapjoin] (batchId=168)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=167)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=233)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/6079/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/6079/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-6079/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12877882 - PreCommit-HIVE-Build, Review board link : https://reviews.apache.org/r/60950/, Patch looks good to me. [~ngangam], [~mohitsabharwal], [~thejas], could you please also take a look?, Thanks [~pgolash], left a few comments on RB., +1, looks like the patch attached needs to be refreshed. Not the same as one on RB., Attached the latest patch. Thanks [~mohitsabharwal] & [~csun], [~mohitsabharwal], I have attached the latest patch. Please have a look and let me know the next steps., Thanks. LGTM, +1 pending tests. , Submitting the attached patch to trigger tests., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12878227/HIVE-17117.1.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 12 failed/errored test(s), 11096 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=240)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=240)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[materialized_view_create_rewrite] (batchId=240)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[orc_merge8] (batchId=80)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_scalar] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=168)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=235)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=235)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=179)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=179)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=179)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/6110/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/6110/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-6110/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12878227 - PreCommit-HIVE-Build, [~csun] and [~mohitsabharwal]

Did some analysis on failing tests:

Out of 12 failing tests, 4 passed on my local machine with fix:
		org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[materialized_view_create_rewrite]
		org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1]
		org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed]
		org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[orc_merge8]

8 still failed. the errors don't seem to be related to my change, and i found same error on other builds for these tests.
		org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning]
		org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23]
		org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14]
		org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_scalar]
		org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb]
		org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
		org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema
		org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema



, +1, Tests failures are not related. Committed this to master. Thanks [~pgolash] for the patch, and [~mohitsabharwal] and [~zshao] for the review., Hive 3.0.0 has been released so closing this jira.]