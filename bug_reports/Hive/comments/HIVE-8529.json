[+1, Removing fix version of 1.2.0 in preparation of release, since this is not a blocker for 1.2.0., HS2 provide two fetch types when fetchResult: Query_Output and LOG. When hive.server2.logging.operation.enabled is false, it is normal behavior that HS2 throw exception when client try to fetchResult using LOG. The problem here is that in hive jdbc getQueryLog method, it just blindly call FetchResult method with fetchType LOG without checking if server enable logging or not. 
Fix this issue by checking before call FetchResult. , Need code review. , [~ychena] Thanks for the patch. I'll review it shortly., 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12733631/HIVE-8529.1.patch

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 8947 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_insert_partition_static
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3933/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3933/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3933/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12733631 - PreCommit-HIVE-TRUNK-Build, The failed test is not related (It ages 12).
[~szehon], [~xuefuz], [~csun], could you review the change? Thanks, I'm not entirely sure that we should rely on client checking the flag before fetching logs. It can, but is it reasonable for HS2 to return some standard error if a less responsible client is calling it any way, instead of  throwing an exception?, The client use getQueryLog method to get log information, the check is within the getQueryLog method for the fix. So client will not get the exception when try to getQueryLog. 
But when hive.server2.logging.operation.enabled is false, but less responsible still want to fetchresult by LOG (by setting fetchtype to LOG):
tFetchResultsReq.setFetchType((short)1);  
We should find a way to tell the client it is wrong,  throw Exception is common way for hive to handle error condition, so I think old way of throwing HiveSQLException is fine.
How do you think [~xuefuz]? Thanks 
, And [~xuefuz], one of the usage of the fix is that:
Without the fix, if you set hive.server2.logging.operation.enabled to false in hive-site.xml, then you use beeline. Every query ( select, show table...) you will see the annoying Exception in HS2, although you will get the right query result. That because the getQueryLog calls. 
, [~ychena], I think it's fine to fix it at JDBC client. However, I'm wondering if it also makes sense to further fix HS2 so that it doesn't throw an exception. For instance, it can just return nothing if the flag isn't enabled and have a clear message (instead of a stacktrace) as a warning., [~xuefuz], thanks for advice. Yes, return nothing with a warning in server sounds like a better and clean approach. And there is no need to change  getQueryLog. I create a new patch, please review it. , 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12733936/HIVE-8529.2.patch

{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 8945 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_insert_partition_static
org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler.org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3949/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3949/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3949/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12733936 - PreCommit-HIVE-TRUNK-Build, +1. Could you check if the test failures are related?, The 3 failures is not related.
1. The two pighbase tests all passed in my local tests.
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 48.219 sec - in org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler

Results :

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0


2.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_insert_partition_static failure ages 28.
 , Committed to master. Thanks, Yongzhi.]