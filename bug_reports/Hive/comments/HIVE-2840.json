[On 0.20.1 the values generated by the INPUT__FILE__NAME virtual column are fully qualified:

{noformat}
hive> SELECT INPUT__FILE__NAME FROM src LIMIT 1;
file:/user/hive/warehouse/src/kv1.txt
{noformat}

However, the same query on 0.23.1 produces unqualified results:

{noformat}
hive> SELECT INPUT__FILE__NAME FROM src LIMIT 1;
/user/hive/warehouse/src/kv1.txt
{noformat}
, cwsteinbach requested code review of "HIVE-2840 [jira] INPUT__FILE__NAME virtual column returns unqualified paths on Hadoop 0.23".
Reviewers: JIRA, ashutoshc

  HIVE-2840. INPUT__FILE__NAME virtual column returns unqualified paths on Hadoop 0.23

TEST PLAN
  EMPTY

REVISION DETAIL
  https://reviews.facebook.net/D2127

AFFECTED FILES
  ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java

MANAGE HERALD DIFFERENTIAL RULES
  https://reviews.facebook.net/herald/view/differential/

WHY DID I GET THIS EMAIL?
  https://reviews.facebook.net/herald/transcript/4605/

Tip: use the X-Herald-Rules header to filter Herald messages in your client.
, ashutoshc has accepted the revision "HIVE-2840 [jira] INPUT__FILE__NAME virtual column returns unqualified paths on Hadoop 0.23".

  +1. Will commit if tests pass.

REVISION DETAIL
  https://reviews.facebook.net/D2127

BRANCH
  HIVE-2840-input-file-name
, Committed to trunk., Integrated in Hive-trunk-h0.21 #1297 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1297/])
    HIVE-2840: INPUT__FILE__NAME virtual column returns unqualified paths on Hadoop 0.23 (Carl Steinbach via hashutosh) (Revision 1298042)

     Result = SUCCESS
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1298042
Files : 
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java
, This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that., Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])
    HIVE-2840: INPUT__FILE__NAME virtual column returns unqualified paths on Hadoop 0.23 (Carl Steinbach via hashutosh) (Revision 1298042)

     Result = ABORTED
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1298042
Files : 
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/HiveContextAwareRecordReader.java
]