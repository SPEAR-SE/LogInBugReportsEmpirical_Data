[Attaching pre-lim patch:

* Added new tests that creates two tables on different filesystems and confirmed that {{EXCHANGE PARTITION}} works
* Required some changes to the metastore API
* Had to copy around some code, will re-factor once Hive QA gives me some feedback, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12860506/HIVE-16277.1.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 7 failed/errored test(s), 10512 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[encryption_exchange_partition] (batchId=7)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[exchange_partition] (batchId=86)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_count_distinct] (batchId=107)
org.apache.hadoop.hive.metastore.TestMetaStoreInitListener.testMetaStoreInitListener (batchId=206)
org.apache.hadoop.hive.ql.security.TestExtendedAcls.testPartition (batchId=223)
org.apache.hadoop.hive.ql.security.TestFolderPermissions.testPartition (batchId=211)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/4360/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/4360/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-4360/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12860506 - PreCommit-HIVE-Build, Updated patch to address test failures. Still need to do some re-factoring., Initial round of re-factoring done., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12861361/HIVE-16277.3.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 10545 tests executed
*Failed tests:*
{noformat}
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=173)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/4483/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/4483/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-4483/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12861361 - PreCommit-HIVE-Build, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12861361/HIVE-16277.3.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 10545 tests executed
*Failed tests:*
{noformat}
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=173)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/4489/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/4489/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-4489/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12861361 - PreCommit-HIVE-Build, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12861548/HIVE-16277.4.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 10545 tests executed
*Failed tests:*
{noformat}
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=173)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/4505/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/4505/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-4505/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12861548 - PreCommit-HIVE-Build, [~vihangk1], [~spena], [~mohitsabharwal] anyone chance someone could take a look at this? Right now, I'm looking for some feedback on the approach. I still have some code cleanup + unit testing to do.

I'm trying to add support for exchanging of partitions across filesystems. I introduced a new HiveMetaStore method call {{exchange_partitions_metadata}} which only exchanges the partition metadata in HMS, but doesn't actually move the data. This is different from the existing {{exchange_partitions}} method in HMS which both renames the partition on the physical filesystem and switches the metadata.

I wanted to move the actual renaming of directories to {{Hive.java}} - in the case where a folder needs to be moved cross-filesystem, the partition data needs to be copied. Doing this in HMS doesn't sound like the right approach, as copying the data could take hours, depending on the size of the partition.]