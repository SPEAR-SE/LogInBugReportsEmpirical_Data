[Thank you for having a simple repro.

I created a q file (see attached).  It fails for an older version of trunk but now the query succeeds.  I believe this issue was fixed by HIVE-8663 "Fetching Vectorization scratch column map in Reduce-Side stop working".

However, I noticed the query outputs do not match.  I will create a separate issue for that., This has been fixed in 0.14 release. Please open new jira if you see any issues.
]