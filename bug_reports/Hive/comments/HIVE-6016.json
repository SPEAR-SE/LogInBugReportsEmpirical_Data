[There is a correction to the description. 

I think only (_s,a,b) is a problem. The logic seems not to apply the PathFilter for first file alone. For other cases it works fine as there is a while loop in next() which keeps iterating to next valid file by applying filter. So in case of (a,_s,b), first file is a for which no filter is applied. For the next file _s filter is applied and next becomes null. But the while continues to next valid file in which case its b. So finally only (a,b) is returned. The iterator will not return null under any case., Thanks for the correction, Prashanth, I've edited the bug report to remove that case., This should fix hcatalog unit test failure TestOrcDynamicPartitioned in hadoop2., Making it as patch available for precommit tests., Patch looks good to me. +1.

Paging [~ashutoshc]/[~owen.omalley] for another review. :), 

{color:green}Overall{color}: +1 all checks pass

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12618327/HIVE-6016.1.patch

{color:green}SUCCESS:{color} +1 4763 tests passed

Test results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/619/testReport
Console output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/619/console

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12618327, Instead of doing filter.accept() logic twice (after this patch), it seems like its enough to just do it once in outer loop(as introduced in this patch). Shall we remove existing filter.accept() from inner loop?, Sorry, I was confused those are not 2 loops, but constructor and overloaded method. Patch looks good. +1, Committed to trunk. Thanks, Prasanth!]