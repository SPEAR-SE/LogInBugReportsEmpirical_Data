[GitHub user thejasmn opened a pull request:

    https://github.com/apache/hive/pull/64

    HIVE-12660

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/thejasmn/hive HIVE-12660

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/hive/pull/64.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #64
    
----
commit 2b64f6649efe6d1019c8b4b46953f6b9de9b1e39
Author: Thejas Nair <thejas@hortonworks.com>
Date:   2016-01-09T19:15:05Z

    close operations for init file

commit a28d49227e129d2036a0a287cb9ffd997cc42358
Author: Thejas Nair <thejas@hortonworks.com>
Date:   2016-01-09T19:15:16Z

    test case

commit cc25c3ffe0e0469a448164afc770f6132db1182f
Author: Thejas Nair <thejas@hortonworks.com>
Date:   2016-01-09T21:28:07Z

    fix formatting

commit 7e3d82e7b7a96b743d577a419b6273cf24778231
Author: Thejas Nair <thejas@hortonworks.com>
Date:   2016-01-10T02:00:13Z

    test comment

----
, Can you please take a look ? [~vgumashta] [~szehon] [~dongc]


, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12781432/HIVE-12660.1.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 17 failed/errored test(s), 10000 tests executed
*Failed tests:*
{noformat}
TestHWISessionManager - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_union
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hadoop.hive.ql.exec.spark.session.TestSparkSessionManagerImpl.testMultiSessionMultipleUse
org.apache.hadoop.hive.ql.exec.spark.session.TestSparkSessionManagerImpl.testSingleSessionMultipleUse
org.apache.hadoop.hive.thrift.TestHadoopAuthBridge23.testDelegationTokenSharedStore
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarDataNucleusUnCaching
org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testSparkQuery
org.apache.hive.jdbc.TestSSL.testSSLVersion
org.apache.hive.spark.client.TestSparkClient.testAddJarsAndFiles
org.apache.hive.spark.client.TestSparkClient.testCounters
org.apache.hive.spark.client.TestSparkClient.testErrorJob
org.apache.hive.spark.client.TestSparkClient.testJobSubmission
org.apache.hive.spark.client.TestSparkClient.testMetricsCollection
org.apache.hive.spark.client.TestSparkClient.testRemoteClient
org.apache.hive.spark.client.TestSparkClient.testSimpleSparkJob
org.apache.hive.spark.client.TestSparkClient.testSyncRpc
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6582/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6582/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6582/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 17 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12781432 - PreCommit-HIVE-TRUNK-Build, +1, +1 LGTM. Thanks for the fix! [~thejas], Patch committed to branch-2.0, master and branch-1.

Thanks for the review [~vgumashta] and [~dongc].
, Attaching a small additional change for branch-1. 
This ports the getOperations method in OperationManager used by the new test to branch-1 .
, [~thejas], was this supposed to be committed to branch-1 for 1.3.0, as shown in Fix Version/s?  You committed the original patch and the addendum patch to branch-1.0, which will be 1.0.2., Thanks for catching that [~leftylev]. You are right, it should have been committed to branch-1 and not branch-1.0 . I have reverted the commit from branch-1.0 [1] and its committed in branch-1. 

[1] https://github.com/apache/hive/commit/6adfa5451b5fe00b41eaabf67b128fe79e5c0b06
]