[With this patch mapreduce_stack_trace.q doesn't run for hadoop-1 but mapreduce_stack_trace_hadoop20.q is run against hadoop-1. On hadoop-1 we are able to correctly capture mapreduce stack trace same as with hadoop20, so it make sense to run and check its output against mapreduce_stack_trace_hadoop20.q

With this patch this test passes on all of hadoop 0.20, 1.0 and 0.23.3

though actually mapreduce_stack_trace.q which after this patch will run only on 0.23.3 should fail because mapreduce_stack_trace.q.out contains incorrect  results. In particular, it doesn't capture the stack trace which it should capture. Wil create a separate jira for it.  , Note that regardless of this issue and patch, mapreduce_stack_trace.q.out is incorrect since it doesn't have mapreduce stack trace so that test is bogus for all hadoop version. 
It currently runs and passes on 0.23 which is incorrect. It also runs against 1 and correctly fails, which this patch fixes by turning it off for hadoop-1 and turning mapreduce_stack_trace.q_hadoop20 on for hadoop-1, The mapreduce_stack_trace_turnoff test is also misconfigured. Applied the same fix to both in the second patch., Hi, [~ashutoshc] and [~hagleitn]:
I'd like to say that this is my fault. I did not set the configuration correctly when doing the EXCLUDE/INCLUDE versions. Sorry about that, and thanks a lot for the fix.

Zhenixao, [~zhenxiao] For the bonus, you can tackle HIVE-3761 : ), Sure Will do it., +1, Committed to trunk. Thanks, Gunther!, Integrated in Hive-trunk-h0.21 #1845 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1845/])
    HIVE-3760 : TestNegativeMinimrCliDriver_mapreduce_stack_trace.q fails on hadoop-1 (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1418837)

     Result = FAILURE
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1418837
Files : 
* /hive/trunk/ql/src/test/queries/clientnegative/mapreduce_stack_trace.q
* /hive/trunk/ql/src/test/queries/clientnegative/mapreduce_stack_trace_hadoop20.q
* /hive/trunk/ql/src/test/queries/clientnegative/mapreduce_stack_trace_turnoff.q
* /hive/trunk/ql/src/test/queries/clientnegative/mapreduce_stack_trace_turnoff_hadoop20.q
, Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])
    HIVE-3760 : TestNegativeMinimrCliDriver_mapreduce_stack_trace.q fails on hadoop-1 (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1418837)

     Result = ABORTED
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1418837
Files : 
* /hive/trunk/ql/src/test/queries/clientnegative/mapreduce_stack_trace.q
* /hive/trunk/ql/src/test/queries/clientnegative/mapreduce_stack_trace_hadoop20.q
* /hive/trunk/ql/src/test/queries/clientnegative/mapreduce_stack_trace_turnoff.q
* /hive/trunk/ql/src/test/queries/clientnegative/mapreduce_stack_trace_turnoff_hadoop20.q
]