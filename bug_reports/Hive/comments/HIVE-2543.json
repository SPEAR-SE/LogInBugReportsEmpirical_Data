[
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2667/
-----------------------------------------------------------

Review request for hive, Yongqiang He, Ning Zhang, and namit jain.


Summary
-------

By explicitely setting the two variable HIVEMERGEMAPFILES and HIVEMERGEMAPREDFILES to false before compiling the query to build the index, it guarantees that there will not be a merge task.


This addresses bug HIVE-2543.
    https://issues.apache.org/jira/browse/HIVE-2543


Diffs
-----

  trunk/ql/src/java/org/apache/hadoop/hive/ql/index/AggregateIndexHandler.java 1196155 
  trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java 1196155 

Diff: https://reviews.apache.org/r/2667/diff


Testing
-------

I ran an explain plan on a command to rebuild an index and verified it did not contain a merge task.

I also verified all the index related tests still pass.


Thanks,

Kevin

, +1, Integrated in Hive-trunk-h0.21 #1053 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1053/])
    HIVE-2543 Compact index table's files merged in creation
(Kevin Wilfong via namit)

namit : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196859
Files : 
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/AggregateIndexHandler.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/index/compact/CompactIndexHandler.java
, This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.]