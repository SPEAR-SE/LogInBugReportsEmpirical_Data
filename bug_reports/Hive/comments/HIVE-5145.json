[Added order by to the queries to get a deterministic output. Regenerated the golden file as well. 

Will mark patch as available to trigger the pre-commit tests., Since the test is run only on 23, I think regen'ing the golden file suffices., Removed the order by from the previous patch and regenerated the golden file., +1, Committed to trunk. Thanks, Prasanth!, I think this patch should also fail in Ubuntu (similar to HIVE-4750) as the results are dependent on the order of subdirectories under a partition. Can you please revert the 2nd patch and apply the 1st patch since first patch has order by clause which makes the result consistent across OSes., FAILURE: Integrated in Hive-trunk-hadoop1-ptest #139 (See [https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/139/])
HIVE-5145 : Fix TestCliDriver.list_bucket_query_multiskew_2.q on hadoop 0.23 (Prasanth J via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1517682)
* /hive/trunk/ql/src/test/results/clientpositive/list_bucket_query_multiskew_2.q.out
, FAILURE: Integrated in Hive-trunk-hadoop2-ptest #71 (See [https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/71/])
HIVE-5145 : Fix TestCliDriver.list_bucket_query_multiskew_2.q on hadoop 0.23 (Prasanth J via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1517682)
* /hive/trunk/ql/src/test/results/clientpositive/list_bucket_query_multiskew_2.q.out
, FAILURE: Integrated in Hive-trunk-hadoop2 #384 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/384/])
HIVE-5145 : Fix TestCliDriver.list_bucket_query_multiskew_2.q on hadoop 0.23 (Prasanth J via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1517682)
* /hive/trunk/ql/src/test/results/clientpositive/list_bucket_query_multiskew_2.q.out
, FAILURE: Integrated in Hive-trunk-h0.21 #2291 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2291/])
HIVE-5145 : Fix TestCliDriver.list_bucket_query_multiskew_2.q on hadoop 0.23 (Prasanth J via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1517682)
* /hive/trunk/ql/src/test/results/clientpositive/list_bucket_query_multiskew_2.q.out
, I also think the order by is probably required for jdk7  , I reverted .2 and applied first patch. Tested it on both MacOS and ubuntu. Passed on both OS, so committed that. Thanks, Prasanth! 
[~brocknoland] I don't have jdk7, so couldn't get to test it there., FAILURE: Integrated in Hive-trunk-hadoop2 #403 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/403/])
HIVE-5145 : Fix TestCliDriver.list_bucket_query_multiskew_2.q on hadoop 0.23 (Prasanth J via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1519862)
* /hive/trunk/ql/src/test/queries/clientpositive/list_bucket_query_multiskew_2.q
* /hive/trunk/ql/src/test/results/clientpositive/list_bucket_query_multiskew_2.q.out
, FAILURE: Integrated in Hive-trunk-hadoop2-ptest #83 (See [https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/83/])
HIVE-5145 : Fix TestCliDriver.list_bucket_query_multiskew_2.q on hadoop 0.23 (Prasanth J via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1519862)
* /hive/trunk/ql/src/test/queries/clientpositive/list_bucket_query_multiskew_2.q
* /hive/trunk/ql/src/test/results/clientpositive/list_bucket_query_multiskew_2.q.out
, FAILURE: Integrated in Hive-trunk-hadoop1-ptest #150 (See [https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/150/])
HIVE-5145 : Fix TestCliDriver.list_bucket_query_multiskew_2.q on hadoop 0.23 (Prasanth J via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1519862)
* /hive/trunk/ql/src/test/queries/clientpositive/list_bucket_query_multiskew_2.q
* /hive/trunk/ql/src/test/results/clientpositive/list_bucket_query_multiskew_2.q.out
, SUCCESS: Integrated in Hive-trunk-h0.21 #2309 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2309/])
HIVE-5145 : Fix TestCliDriver.list_bucket_query_multiskew_2.q on hadoop 0.23 (Prasanth J via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1519862)
* /hive/trunk/ql/src/test/queries/clientpositive/list_bucket_query_multiskew_2.q
* /hive/trunk/ql/src/test/results/clientpositive/list_bucket_query_multiskew_2.q.out
, This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.]