[Here's a patch which redacts the password AFTER it has been put in the history. I think this is the wrong approach though. We really should never be accepting the password on the command line. For instance if I forgot the {{!}} before the command, the password would still be logged in the history file. I don't know how big a change that would be though...., Turns out to be trivially easy to get passwords afterwards.... I think we should use this., Marking as incompatible because older commands / scripts where the password was entered on the command line may stop working, If somebody picks this up, keep in mind that the url could contain other passwords as well. See: HIVE-15931, and https://reviews.apache.org/r/56763/, I'm afraid I don't think I'll find the cycles to work on this in the next few months.Â ]