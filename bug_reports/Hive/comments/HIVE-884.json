[For both branch 0.4 and trunk.
, Can we add a test case?

Otherwise changes look good
, can you do print the stack trace to log as well, if logging was initialized? I don't think printing to stdout will result in updating log., i am not sure there are any testcases for stand alone metastore server. we have to start one.

i am testing this patch (along with log message), the main() function exits after printing the exception. when main() returns the whole process should exit. no? The problem may be something else., http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Thread.html

 When a Java Virtual Machine starts up, there is usually a single non-daemon thread (which typically calls the method named main of some designated class). The Java Virtual Machine continues to execute threads until either of the following occurs:

    * The exit method of class Runtime has been called and the security manager has permitted the exit operation to take place.
    * All threads that are not daemon threads have died, either by returning from the call to the run method or by throwing an exception that propagates beyond the run method. , modified zheng's patch by adding an log4j error message in addition to stdout., committed to 0.4 and trunk. Thanks Zheng!]