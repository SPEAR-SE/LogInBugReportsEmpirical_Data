[I am not sure why this didn't result in an error when I ran 'mvn clean install ..' or 'mvn  package  -Pdist ..' , and only showed up when I ran "bin/hive". 
{code}
Exception in thread "main" java.lang.ExceptionInInitializerError
        at org.apache.hadoop.hive.cli.CliDriver.getCommandCompletor(CliDriver.java:541)
        at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:758)
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:686)
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:625)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:115)
        at org.apache.hadoop.hive.ql.exec.FunctionRegistry.registerUDAF(FunctionRegistry.java:1022)
        at org.apache.hadoop.hive.ql.exec.FunctionRegistry.registerUDAF(FunctionRegistry.java:1015)
        at org.apache.hadoop.hive.ql.exec.FunctionRegistry.<clinit>(FunctionRegistry.java:372)
        ... 9 more
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:113)
        ... 12 more
Caused by: java.lang.Error: Unresolved compilation problem:
        The method getLongComparator() is undefined for the type HadoopShims

        at org.apache.hadoop.hive.ql.udf.UDAFPercentile.<init>(UDAFPercentile.java:51)
        ... 17 more

{code}

[~brocknoland], Would you know why the compilation errors such as this one and HIVE-6196 don't result in the mvn commands failing ?



, Weird. Can you verify if the HadoopShims interface it's loading is the latest?, Also with regards to HIVE-6196 I believe that javac will compile classes in the wrong directory, but java just won't run them., I think it's not the reason of the problem. HadoopShims is public interface and all methods in it are all public (isn't it?) what ever it is defined., [~navis] You are right, the methods in interface are implicitly public. I didn't realize this.
[~brocknoland] I think that must have been it, it was some local build issue. I can't reproduce now.
]