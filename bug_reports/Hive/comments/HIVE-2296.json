[add unit test, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1155/
-----------------------------------------------------------

Review request for hive and Siying Dong.


Summary
-------

Fixes problem of bad compressed file names by stripping off the file format (ex ".gz") and reappending it to the path later.


This addresses bug HIVE-2296.
    https://issues.apache.org/jira/browse/HIVE-2296


Diffs
-----

  trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java 1148973 
  trunk/ql/src/test/queries/clientpositive/insert_compressed.q PRE-CREATION 
  trunk/ql/src/test/results/clientpositive/insert_compressed.q.out PRE-CREATION 

Diff: https://reviews.apache.org/r/1155/diff


Testing
-------

Unit tests pass


Thanks,

Franklin

, +1, committed. Thanks Franklin!, Integrated in Hive-trunk-h0.21 #843 (See [https://builds.apache.org/job/Hive-trunk-h0.21/843/])
    HIVE-2296. bad compressed file names from insert into (Franklin Hu via Siying Dong)

sdong : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1149724
Files : 
* /hive/trunk/ql/src/test/queries/clientpositive/insert_compressed.q
* /hive/trunk/ql/src/test/results/clientpositive/insert_compressed.q.out
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java
]