[Patch attached that illustrates the bug with a test, and a simple one-line fix. [~thejas]/[~decster], could you please review?, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12770771/HIVE-12345.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 5 failed/errored test(s), 9768 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_partitioned
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_queries
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hadoop.hive.hwi.TestHWISessionManager.testHiveDriver
org.apache.hive.jdbc.TestSSL.testSSLVersion
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5932/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5932/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5932/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12770771 - PreCommit-HIVE-TRUNK-Build, +1
, [~sushanth] Can you please check if any of the failures are related ?
, None of the test failures look related.

 * org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_partitioned : The explain plan looks different from the golden file. I'd say this looks so different in fact, that this might be indicative of either a test needing update or a bug - but it does not look related.
 * org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_queries : Not related, the golden files are ever so slightly different - there's an extra whitespace at the end of the line in one of them.
 * org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import : Weird holdover after HIVE-11988, but locally running this makes this consistently repeatably succeed. Unsure why this test is failing in ptest framework.
 * org.apache.hadoop.hive.hwi.TestHWISessionManager.testHiveDriver : hit a java.lang.NoClassDefFoundError: org/apache/hadoop/hdfs/DistributedFileSystem . This might be transient, or a test env issue.
 * org.apache.hive.jdbc.TestSSL.testSSLVersion : This one is weird, because it expected an SQLException on trying to connect but didn't find one. Does not seem related, but a good candidate to look into further., Attaching port of patch for branch-1.2 as well. The patch for master already applies on branch-1 cleanly., Committed to master, branch-1 and branch-1.2. Thanks for the review, Thejas!]