[[~mendax], I was facing a similar issue here. Do you mind if I assign this JIRA to myself? Thanks., [~mendax], could you please try the patch and see if the problem is resolved? Thanks., 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12748337/HIVE-11432.01.patch

{color:red}ERROR:{color} -1 due to 4 failed/errored test(s), 9305 tests executed
*Failed tests:*
{noformat}
TestCliDriver-udf_md5.q-join18.q-union11.q-and-12-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_convert_enum_to_string
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynamic_rdd_cache
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4789/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4789/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4789/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12748337 - PreCommit-HIVE-TRUNK-Build, [~pxiong], The patch now works fine. I have tested it in several cases. Thanks a lot by giving a fix very quickly. Is it safe to cherry-pick this change?, [~mendax], it is not committed yet. [~hsubramaniyan], could you please review it? Thanks!, [~pxiong] The patch looks good to me. Can you  please confirm that the test failures are not related to this change after testing them locally.

Thanks
Hari, +1, Patch committed to master, branch-1. Thanks [~pxiong] for the patch., Doc note:  This has been documented in the wiki on the note about version information for macros:

* [Language Manual DDL - Create/Drop Macro | https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-Create/DropMacro]]