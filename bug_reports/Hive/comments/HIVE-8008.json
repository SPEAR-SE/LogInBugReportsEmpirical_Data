[This error is caused by {{HiveDecimal::enforcePrecisionScale}}. Here, calling {{BigDecimal::setScale}} may increase the number of int digits (as in the above example), but we've already passed the int digits check. Therefore, the result {{bd}} may contain more digits than the maximum.
, Moved the {{setScale}} call before int digits check.
, [~csun] Thanks for the patch. The patch looks good. However, could you add a test case with the example you gave above?, Added unit test., Sorry! I put a patch inside a patch by accident. Now it should be fine., Fixing style issue: wrapping long lines., +1, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12666957/HIVE-8008.4.patch

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 6171 tests executed
*Failed tests:*
{noformat}
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/668/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/668/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-668/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12666957, +1. I think the above test failure isn't related., Patch committed to trunk. Thanks to Chao for the contribution., This has been fixed in 0.14 release. Please open new jira if you see any issues.
]