[Correct way to do this is to improve HiveMetaHook interface. We need to add all the methods corresponding to database in the interface, like preCreateDatabase, preDropDatabase etc. and call them before doing the operations from the client. The way its done in dropTable()/createTable() of the metastoreclient., @Vandana,
Are you pursuing this any further ?, Hey Ashutosh, I have been busy with some other project priorities. I will start working on this in the beginning of next year.  , On the second thought, HiveMetaHook is defined per table and not on per db basis. So in dropDatabase() there is no hook to get. Different tables in a db will have different hooks. Approach you have make sense in current design. Can you create a phabricator review request for your patch. I will take a look., I have created a phabricator review request for the patch. , @Vandana: Do you have a link for the review request? Phabricator is supposed to automatically update the JIRA ticket. Did you forget to specify the JIRA ID when you ran arc?, Hey Carl, here is the link to the request: https://reviews.facebook.net/D1347, Hey Ashutosh, 
The arc diff does not seem to pick the moves correctly, so in addition to the above patch, you will have to execute the following commands while committing.

mkdir hbase-handler/src/test/queries/positive
svn add hbase-handler/src/test/queries/positive
svn mv hbase-handler/src/test/queries/*.q hbase-handler/src/test/queries/positive/
svn mv hbase-handler/src/test/queries/*.m hbase-handler/src/test/queries/positive/
mkdir hbase-handler/src/test/results/positive
svn add hbase-handler/src/test/results/positive
svn mv hbase-handler/src/test/results/*.q.out hbase-handler/src/test/results/positive
svn mv hbase-handler/src/test/results/*.m.out hbase-handler/src/test/results/positive


ant test -Dtestcase=TestHBaseNegativeCliDriver
ant test -Dtestcase=TestHBaseCliDriver

commands run successfully. , +1, Committed to trunk. Thanks, Vandana !, Integrated in Hive-trunk-h0.21 #1437 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1437/])
    HIVE-2542 : DROP DATABASE CASCADE does not drop non-native tables ( Vandana Ayyalasomayajula via Ashutosh Chauhan) (Revision 1340130)

     Result = FAILURE
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1340130
Files : 
* /hive/trunk/hbase-handler/build.xml
* /hive/trunk/hbase-handler/src/test/queries/external_table_ppd.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_binary_external_table_queries.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_binary_map_queries.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_binary_storage_queries.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_bulk.m
* /hive/trunk/hbase-handler/src/test/queries/hbase_joins.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_ppd_key_range.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_pushdown.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_queries.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_stats.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_stats2.q
* /hive/trunk/hbase-handler/src/test/queries/positive
* /hive/trunk/hbase-handler/src/test/queries/positive/external_table_ppd.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_external_table_queries.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_map_queries.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_storage_queries.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_bulk.m
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_joins.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_ppd_key_range.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_pushdown.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_queries.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats2.q
* /hive/trunk/hbase-handler/src/test/queries/positive/ppd_key_ranges.q
* /hive/trunk/hbase-handler/src/test/queries/ppd_key_ranges.q
* /hive/trunk/hbase-handler/src/test/results/external_table_ppd.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_binary_external_table_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_binary_map_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_binary_storage_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_bulk.m.out
* /hive/trunk/hbase-handler/src/test/results/hbase_joins.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_ppd_key_range.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_pushdown.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_stats.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_stats2.q.out
* /hive/trunk/hbase-handler/src/test/results/positive
* /hive/trunk/hbase-handler/src/test/results/positive/external_table_ppd.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_external_table_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_map_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_storage_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_bulk.m.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_joins.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_ppd_key_range.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_pushdown.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_stats.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_stats2.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/ppd_key_ranges.q.out
* /hive/trunk/hbase-handler/src/test/results/ppd_key_ranges.q.out
* /hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java
, Integrated in Hive-trunk-h0.21 #1438 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1438/])
    HIVE-2542 : Forgot to do svn add for new  files in previous patch. (Revision 1340158)

     Result = SUCCESS
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1340158
Files : 
* /hive/trunk/hbase-handler/src/test/queries/negative
* /hive/trunk/hbase-handler/src/test/queries/negative/cascade_dbdrop.q
* /hive/trunk/hbase-handler/src/test/results/negative
* /hive/trunk/hbase-handler/src/test/results/negative/cascade_dbdrop.q.out
* /hive/trunk/hbase-handler/src/test/templates/TestHBaseNegativeCliDriver.vm
, Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])
    HIVE-2542 : Forgot to do svn add for new  files in previous patch. (Revision 1340158)
HIVE-2542 : DROP DATABASE CASCADE does not drop non-native tables ( Vandana Ayyalasomayajula via Ashutosh Chauhan) (Revision 1340130)

     Result = ABORTED
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1340158
Files : 
* /hive/trunk/hbase-handler/src/test/queries/negative
* /hive/trunk/hbase-handler/src/test/queries/negative/cascade_dbdrop.q
* /hive/trunk/hbase-handler/src/test/results/negative
* /hive/trunk/hbase-handler/src/test/results/negative/cascade_dbdrop.q.out
* /hive/trunk/hbase-handler/src/test/templates/TestHBaseNegativeCliDriver.vm

hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1340130
Files : 
* /hive/trunk/hbase-handler/build.xml
* /hive/trunk/hbase-handler/src/test/queries/external_table_ppd.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_binary_external_table_queries.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_binary_map_queries.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_binary_storage_queries.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_bulk.m
* /hive/trunk/hbase-handler/src/test/queries/hbase_joins.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_ppd_key_range.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_pushdown.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_queries.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_stats.q
* /hive/trunk/hbase-handler/src/test/queries/hbase_stats2.q
* /hive/trunk/hbase-handler/src/test/queries/positive
* /hive/trunk/hbase-handler/src/test/queries/positive/external_table_ppd.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_external_table_queries.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_map_queries.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_binary_storage_queries.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_bulk.m
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_joins.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_ppd_key_range.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_pushdown.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_queries.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats.q
* /hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats2.q
* /hive/trunk/hbase-handler/src/test/queries/positive/ppd_key_ranges.q
* /hive/trunk/hbase-handler/src/test/queries/ppd_key_ranges.q
* /hive/trunk/hbase-handler/src/test/results/external_table_ppd.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_binary_external_table_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_binary_map_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_binary_storage_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_bulk.m.out
* /hive/trunk/hbase-handler/src/test/results/hbase_joins.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_ppd_key_range.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_pushdown.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_stats.q.out
* /hive/trunk/hbase-handler/src/test/results/hbase_stats2.q.out
* /hive/trunk/hbase-handler/src/test/results/positive
* /hive/trunk/hbase-handler/src/test/results/positive/external_table_ppd.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_external_table_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_map_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_binary_storage_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_bulk.m.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_joins.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_ppd_key_range.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_pushdown.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_queries.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_stats.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/hbase_stats2.q.out
* /hive/trunk/hbase-handler/src/test/results/positive/ppd_key_ranges.q.out
* /hive/trunk/hbase-handler/src/test/results/ppd_key_ranges.q.out
* /hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java
, This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.]