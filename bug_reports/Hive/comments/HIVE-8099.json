[bq. We need to change partition pruning code to consider the partition column as the type given in table definition.
This change is complicated as all of the partition pruning code considers the partition col type as string and changing it could cause regressions. Instead modified the GenericUDFIn operator to make use of implicit cast in determining the return type and evaluating. , 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12679594/HIVE-8099.1.patch

{color:red}ERROR:{color} -1 due to 3 failed/errored test(s), 6672 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_ppd_decimal
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.hcatalog.streaming.TestStreaming.testEndpointConnection
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1646/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1646/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1646/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12679594 - PreCommit-HIVE-TRUNK-Build, Nice find! The patch LGTM with the exception of the two commented out "ALTER TABLE" statements. Can you remove them if they are not required?, Thanks [~brocknoland] for reviewing. Attaching new patch with commented ALTER statements removed., Please hold on committing this. I want to take a look to see how hard it is to fix the right way and what impact it has fixing it wrong way., [~ashutoshc]: Attached patch is the fix which changed the partition pruning code. However it currently fails in PartitionPruner.prunePartitionNames, where we pass the input as Strings and not as the partition type object (Date in this case). I could change it create the Date (or corresponding object depending upon the type) and try it, but again we may hit the same issue somewhere else., Thanks, [~vkorukanti] I will take a look, also, cc: [~sershe] who has expertise in this area., [~ashutoshc] & [~sershe]

Attaching new patch (HIVE-8099.3) which completes the fix in ppr. I ran partition related .q tests ({{ls -l \*partition\*}} in clientpositive directory). No regressions found. However the following query doesn't work because IN operator is not implicitly casting string literals to date.

{code}
SELECT * FROM testTbl WHERE date_prt IN ('2014-08-09', '2014-08-08');
{code}

Casting the string literals to date works fine.

{code}
SELECT * FROM testTbl WHERE date_prt IN (CAST('2014-08-09' AS DATE), CAST('2014-08-08' AS DATE));
{code}

If we want the first query to work, we need to include the fix in HIVE-8099.2.patch.

Let me know if you want me to create reviewboard link., I think its reasonable in such cases to expect user to explicitly cast. Yeah, please create RB entry for it., RB Link: https://reviews.apache.org/r/27714/, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12680043/HIVE-8099.4.patch

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 6659 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1676/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1676/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1676/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12680043 - PreCommit-HIVE-TRUNK-Build, looks good to me; +1 if [~ashutoshc] has no reservations, +1 new logic is more type-safe. Failure is unrelated., Committed to trunk. Thanks, Venki!, [~ashutoshc] backport to .14?, Backported to 0.14, Updating release version for jiras resolved in 1.0.0 .
, This issue has been fixed in Apache Hive 1.0.0. If there is any issue with the fix, please open a new jira to address it.
]