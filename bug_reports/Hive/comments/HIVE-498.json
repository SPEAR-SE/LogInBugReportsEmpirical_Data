[This patch fixes the problem., +1

Running tests now. Will checkin when they are done. , committed. Thanks Zheng!!
]