[Cc [~ekoifman], +1, [~ekoifman], new patch uploaded addressing the issue with locks over non-table entities. Please, let me know if it looks fine or if you prefer that I split the patch. Thanks, Patch fixes also the NPE for the txn list.

While checking this issue, I discovered HIVE-19893 that needs to be fixed too., | (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  7m 45s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m  0s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 39s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 48s{color} | {color:blue} ql in master has 2279 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 53s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 23s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m  1s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  1m  1s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 40s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m  5s{color} | {color:green} ql generated 0 new + 2278 unchanged - 1 fixed = 2278 total (was 2279) {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 55s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 13s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 22m 55s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-11775/dev-support/hive-personality.sh |
| git revision | master / bcbd2d5 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| modules | C: ql U: ql |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-11775/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.

, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12927793/HIVE-19876.02.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 132 failed/errored test(s), 14519 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[autoColumnStats_4] (batchId=13)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[update_after_multiple_inserts_special_characters] (batchId=75)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[acid_vectorization_original] (batchId=174)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dp_counter_mm] (batchId=155)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization_acid] (batchId=165)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[enforce_constraint_notnull] (batchId=158)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[materialized_view_create_rewrite_3] (batchId=166)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[materialized_view_create_rewrite_4] (batchId=157)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[materialized_view_create_rewrite_5] (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[materialized_view_create_rewrite_rebuild_dummy] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[mm_bhif] (batchId=157)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[acid_vectorization_original_tez] (batchId=106)
org.apache.hadoop.hive.ql.TestTxnCommands.testDelete (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testDeleteIn (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeCardinalityViolation (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeDeleteUpdate (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeType2SCD01 (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeType2SCD02 (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeUpdateDelete (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeUpdateDeleteNoCardCheck (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMmExim (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMoreBucketsThanReducers (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testMultipleDelete (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testQuotedIdentifier (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testQuotedIdentifier2 (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testTimeOutReaper (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testUpdateDeleteOfInserts (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands.testUpdateOfInserts (batchId=305)
org.apache.hadoop.hive.ql.TestTxnCommands2.testACIDwithSchemaEvolutionAndCompaction (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testBucketCodec (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testCompactWithDelete (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDeleteIn (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDynamicPartitionsMerge (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDynamicPartitionsMerge2 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testInsertOverwrite1 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testInsertOverwrite2 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge2 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge3 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMergeWithPredicate (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMultiInsert (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion02 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion2 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion3 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testOrcNoPPD (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testOrcPPD (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testOriginalFileReaderWhenNonAcidConvertedToAcid (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.testUpdateMixedCase (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.updateDeletePartitioned (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2.writeBetweenWorkerAndCleaner (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testACIDwithSchemaEvolutionAndCompaction (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testBucketCodec (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testCompactWithDelete (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDeleteIn (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDynamicPartitionsMerge (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDynamicPartitionsMerge2 (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testInsertOverwrite1 (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testInsertOverwrite2 (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge2 (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge3 (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMergeWithPredicate (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMultiInsert (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion02 (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion2 (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion3 (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testOrcNoPPD (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testOrcPPD (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testOriginalFileReaderWhenNonAcidConvertedToAcid (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testUpdateMixedCase (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.updateDeletePartitioned (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.writeBetweenWorkerAndCleaner (batchId=300)
org.apache.hadoop.hive.ql.TestTxnCommandsForMmTable.testInsertOverwriteForMmTable (batchId=267)
org.apache.hadoop.hive.ql.TestTxnCommandsForMmTable.testInsertOverwriteForPartitionedMmTable (batchId=267)
org.apache.hadoop.hive.ql.TestTxnCommandsForMmTable.testInsertOverwriteWithDynamicPartition (batchId=267)
org.apache.hadoop.hive.ql.TestTxnCommandsForMmTable.testInsertOverwriteWithUnionAll (batchId=267)
org.apache.hadoop.hive.ql.TestTxnCommandsForOrcMmTable.testInsertOverwriteForMmTable (batchId=286)
org.apache.hadoop.hive.ql.TestTxnCommandsForOrcMmTable.testInsertOverwriteForPartitionedMmTable (batchId=286)
org.apache.hadoop.hive.ql.TestTxnCommandsForOrcMmTable.testInsertOverwriteWithDynamicPartition (batchId=286)
org.apache.hadoop.hive.ql.TestTxnCommandsForOrcMmTable.testInsertOverwriteWithUnionAll (batchId=286)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testDelete (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testDeleteIn (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMergeCardinalityViolation (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMergeDeleteUpdate (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMergeType2SCD01 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMergeType2SCD02 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMergeUpdateDelete (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMergeUpdateDeleteNoCardCheck (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMmExim (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMoreBucketsThanReducers (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testMultipleDelete (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testQuotedIdentifier (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testQuotedIdentifier2 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testTimeOutReaper (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testUpdateDeleteOfInserts (batchId=289)
org.apache.hadoop.hive.ql.TestTxnCommandsWithSplitUpdateAndVectorization.testUpdateOfInserts (batchId=289)
org.apache.hadoop.hive.ql.TestTxnConcatenate.testConcatenate (batchId=276)
org.apache.hadoop.hive.ql.TestTxnConcatenate.testConcatenatePart (batchId=276)
org.apache.hadoop.hive.ql.TestTxnConcatenate.testRenameTable (batchId=276)
org.apache.hadoop.hive.ql.TestTxnExIm.testExportMerge (batchId=289)
org.apache.hadoop.hive.ql.TestTxnExIm.testImport (batchId=289)
org.apache.hadoop.hive.ql.TestTxnExIm.testImportNoTarget (batchId=289)
org.apache.hadoop.hive.ql.TestTxnExIm.testImportVectorized (batchId=289)
org.apache.hadoop.hive.ql.TestTxnLoadData.loadData (batchId=267)
org.apache.hadoop.hive.ql.TestTxnLoadData.loadDataNonAcid2AcidConversion (batchId=267)
org.apache.hadoop.hive.ql.TestTxnLoadData.loadDataNonAcid2AcidConversionVectorized (batchId=267)
org.apache.hadoop.hive.ql.TestTxnLoadData.loadDataPartitioned (batchId=267)
org.apache.hadoop.hive.ql.TestTxnLoadData.loadDataUpdate (batchId=267)
org.apache.hadoop.hive.ql.TestTxnLoadData.loadDataUpdateVectorized (batchId=267)
org.apache.hadoop.hive.ql.TestTxnLoadData.loadDataVectorized (batchId=267)
org.apache.hadoop.hive.ql.TestTxnNoBuckets.testNoBuckets (batchId=289)
org.apache.hadoop.hive.ql.TestTxnNoBuckets.testNonAcidToAcidVectorzied (batchId=289)
org.apache.hadoop.hive.ql.TestTxnNoBuckets.testToAcidConversion02 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnNoBuckets.testToAcidConversionMultiBucket (batchId=289)
org.apache.hadoop.hive.ql.TestTxnNoBucketsVectorized.testNoBuckets (batchId=289)
org.apache.hadoop.hive.ql.TestTxnNoBucketsVectorized.testNonAcidToAcidVectorzied (batchId=289)
org.apache.hadoop.hive.ql.TestTxnNoBucketsVectorized.testToAcidConversion02 (batchId=289)
org.apache.hadoop.hive.ql.TestTxnNoBucketsVectorized.testToAcidConversionMultiBucket (batchId=289)
org.apache.hadoop.hive.ql.txn.compactor.TestCompactor.dynamicPartitioningDelete[0] (batchId=233)
org.apache.hadoop.hive.ql.txn.compactor.TestCompactor.dynamicPartitioningDelete[1] (batchId=233)
org.apache.hadoop.hive.ql.txn.compactor.TestCompactor.schemaEvolutionAddColDynamicPartitioningUpdate[0] (batchId=233)
org.apache.hadoop.hive.ql.txn.compactor.TestCompactor.schemaEvolutionAddColDynamicPartitioningUpdate[1] (batchId=233)
org.apache.hive.hcatalog.streaming.TestStreaming.testNoBuckets (batchId=208)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerCustomCreatedDynamicPartitions (batchId=243)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerCustomCreatedDynamicPartitionsMultiInsert (batchId=243)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerCustomCreatedDynamicPartitionsUnionAll (batchId=243)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerCustomNonExistent (batchId=243)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerHighBytesRead (batchId=243)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerHighShuffleBytes (batchId=243)
org.apache.hive.jdbc.TestTriggersWorkloadManager.testTriggerVertexRawInputSplitsNoKill (batchId=243)
org.apache.hive.streaming.TestStreaming.testAutoRollTransactionBatch (batchId=312)
org.apache.hive.streaming.TestStreaming.testNoBuckets (batchId=312)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/11775/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/11775/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-11775/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 132 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12927793 - PreCommit-HIVE-Build, | (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  7m 36s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m  5s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 38s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 55s{color} | {color:blue} ql in master has 2277 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m  0s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 22s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m  2s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  1m  2s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 39s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m 11s{color} | {color:green} ql generated 0 new + 2276 unchanged - 1 fixed = 2276 total (was 2277) {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 56s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 23m  6s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-11813/dev-support/hive-personality.sh |
| git revision | master / 73ee8a1 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| modules | C: ql U: ql |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-11813/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.

, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12927927/HIVE-19876.06.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:green}SUCCESS:{color} +1 due to 14536 tests passed

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/11813/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/11813/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-11813/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12927927 - PreCommit-HIVE-Build, [~ekoifman], can you take a look at latest patch (already +1 from ptest)? This fixes the issues discovered in internal testing. I moved the global txn list issue to HIVE-19907. Thanks, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12927927/HIVE-19876.06.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/11819/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/11819/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-11819/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Tests exited with: Exception: Patch URL https://issues.apache.org/jira/secure/attachment/12927927/HIVE-19876.06.patch was found in seen patch url's cache and a test was probably run already on it. Aborting...
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12927927 - PreCommit-HIVE-Build, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12927927/HIVE-19876.06.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/11829/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/11829/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-11829/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Tests exited with: Exception: Patch URL https://issues.apache.org/jira/secure/attachment/12927927/HIVE-19876.06.patch was found in seen patch url's cache and a test was probably run already on it. Aborting...
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12927927 - PreCommit-HIVE-Build, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12927927/HIVE-19876.06.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/11830/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/11830/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-11830/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Tests exited with: Exception: Patch URL https://issues.apache.org/jira/secure/attachment/12927927/HIVE-19876.06.patch was found in seen patch url's cache and a test was probably run already on it. Aborting...
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12927927 - PreCommit-HIVE-Build, +1 patch 6.

Incidentally, acid (i.e. DbTxnManager always uses DbLockManager) ignores 

hive.lock.manager setting so 

isValidTxnListState() does not need any logic for other LMs.  This is just FYI, for future., Pushed to master, branch-3. Thanks [~ekoifman], This is released in Hive 3.1.0.]