[Candidate patch, including a unit test.

I noticed that there's already UDFTestLength and UDFTestLength2 defined by the unit test framework for testing purposes. I didn't remove either of these, but I can if people would like., Thanks for patch.  Worked for me., +1

running  the tests - will commit if the tests pass, Committed. Thanks Neil]