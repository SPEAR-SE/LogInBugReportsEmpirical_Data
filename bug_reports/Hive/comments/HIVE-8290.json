[[~vikram.dixit] I'd like to get this into 0.14 as I believe not having it is a big usability issue, and it will be a backwards incompatible change if we add it later., This patch changes the SemanticAnalyzer to look for a table property "transactional" before treating a table as requiring transactions.  I also added a number of negative tests for things such as making sure the buckets aren't sorted, etc., +1 for 0.14., 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12671827/HIVE-8290.patch

{color:red}ERROR:{color} -1 due to 24 failed/errored test(s), 6379 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_delete
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_delete_own_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_update
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_update_own_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_schemeAuthority
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_acid_overwrite
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_delete_nodeletepriv
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_update_noupdatepriv
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testDeleteAllNonPartitioned
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testDeleteAllPartitioned
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testDeleteAllWherePartitioned
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testDeleteOnePartition
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testDeleteOnePartitionWhere
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testDeleteWhereNoPartition
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testUpdateAllNonPartitioned
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testUpdateAllNonPartitionedWhere
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testUpdateAllPartitioned
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testUpdateAllPartitionedWhere
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testUpdateOnePartition
org.apache.hadoop.hive.ql.parse.TestUpdateDeleteSemanticAnalyzer.testUpdateOnePartitionWhere
org.apache.hadoop.hive.ql.security.authorization.plugin.TestHiveAuthorizerCheckInvocation.testDelete
org.apache.hadoop.hive.ql.security.authorization.plugin.TestHiveAuthorizerCheckInvocation.testUpdateSomeColumnsUsed
org.apache.hadoop.hive.ql.security.authorization.plugin.TestHiveAuthorizerCheckInvocation.testUpdateSomeColumnsUsedExprInSet
org.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1040/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1040/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1040/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 24 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12671827, Canceling patch to fix failing tests. , New version of the patch with fixes for the breaking tests., 

{color:green}Overall{color}: +1 all checks pass

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12671955/HIVE-8290.2.patch

{color:green}SUCCESS:{color} +1 6380 tests passed

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1054/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1054/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1054/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12671955, There is unused import "hive_metastoreConstants".  Also, could you add a comment on ACID_TABLE_PROPERTY, basically the equivalent of the the Description of this Jira ticket?  

This is minor, but would it make sense to move the constant to AcidInputFormat or some other more directly ACID related class?

Otherwise, LGTM +1., bq. This is minor, but would it make sense to move the constant to AcidInputFormat or some other more directly ACID related class?
I didn't see a general place to put table parameter keys.  According to the Hive jedi master (Ashutosh), there is no central place for them.  I agree it makes sense to collect ACID related ones into one place.  In addition to ACID_TABLE_PROPERTY there's NO_AUTO_COMPACT in Initiator.  I'll file a separate ticket to collect those together, and then the patch to do that will be trivial., Patch committed to trunk and branch.  I will also be making the associated documentation changes., [~leftylev] I've added a note to the Hive Transactions page under Table Parameters at the bottom to reflect this change.  Let me know if it looks ok., Looks good, [~alangates].  I'll add a link to the TBLPROPERTIES information in the DDL doc and include TRANSACTIONAL and NO_AUTO_COMPACTION there too.  They're both boolean, right?

Was *hive.support.concurrency* required for transactions in 0.13.0?  If not, the configuration table should include version information.  In either case, I'll update the Configuration Properties doc.

* [LanguageManual DDL -- Create Table | https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateTable]  (TBLPROPERTIES described in bullet list after the syntax)
* [Configuration Properties -- Transactions and Compactor | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-TransactionsandCompactor] (list of parameters that turn on transactions)
* [Configuration Properties -- hive.support.concurrency | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.support.concurrency] (mention that it's needed for transactions, with link to Transactions doc), P.S.  Since TRANSACTIONAL is new in 0.14.0, it needs version information in the wiki.  I'll do that too, and you can tinker with it if you want any changes.

* [Hive Transactions -- Table Properties | https://cwiki.apache.org/confluence/display/Hive/Hive+Transactions#HiveTransactions-TableProperties], [~alangates], does NO_AUTO_COMPACTION have to be all caps, or can it be no_auto_compaction like other table properties?

I see that TRANSACTIONAL is lowercase in the patch, so I'll assume the same goes for no_auto_compaction even though it's all caps in its patch (HIVE-6319).  You can fix it in the wiki if that's wrong, or tell me to fix it., [~leftylev], actually looking at the code, both are case sensitive, but one I made all caps and one all lower.  That doesn't seem good.  I've added this to HIVE-8308 to fix., Thanks [~alangates], I've changed the docs to show case-sensitive table properties:

* [Hive Transactions -- Table Properties | https://cwiki.apache.org/confluence/display/Hive/Hive+Transactions#HiveTransactions-TableProperties]
* [LanguageManual DDL -- Create Table | https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateTable] (bullet list after the syntax)

Open question:  Was *hive.support.concurrency* required for transactions in 0.13.0?, Pinging [~alangates]:  Was *hive.support.concurrency* required for transactions in 0.13.0?

I'll finish updating the docs as soon as I get the answer., bq. Was hive.support.concurrency required for transactions in 0.13.0?
Yes., [~alangates], in the Hive Transactions doc I moved *hive.support.concurrency* from the table of new transactions to the next section, and revised various parameter descriptions there and in Configuration Properties.

* [Hive Transactions -- Configuration | https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=40509723#HiveTransactions-Configuration]
** [New Configuration Parameters for Transactions | https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=40509723#HiveTransactions-NewConfigurationParametersforTransactions]
** [Configuration Values to Set for INSERT, UPDATE, DELETE | https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=40509723#HiveTransactions-ConfigurationValuestoSetforINSERT,UPDATE,DELETE]
* [Configuration Properties -- Transactions and Compactor | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-TransactionsandCompactor] (list of turn ons)
** [hive.txn.manager | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.txn.manager]
** [hive.compactor.initiator.on | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.compactor.initiator.on]
** [hive.compactor.worker.threads | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.compactor.worker.threads]
* Configuration Properties -- other parameters
** [hive.support.concurrency | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.support.concurrency]
** [hive.enforce.bucketing | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.enforce.bucketing]
** [hive.exec.dynamic.partition.mode | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.exec.dynamic.partition.mode]

If these changes pass muster, equivalent changes can be made in HiveConf.java (HIVE-6586)., This has been fixed in 0.14 release. Please open new jira if you see any issues.
]