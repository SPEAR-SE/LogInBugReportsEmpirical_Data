[It is a straight-forward simple fix. Maybe not a perfect one. I verified that it fixed the scenario., will take a look. 

Siying, can you give an example to show why we need to restore the jobtracker?, One case:

set hive.exec.mode.local.auto=true;
select transform(*) using 'non_exist_program' from small_table;
select count(1) from big_table;

The second query will also be executed as local mode though it is not qualified., running tests., Committed. Thanks Siying!]