[Hmm.. IncompleteCb-s result from ORC RG end estimation over-shoot. We could add special handling to remember them across reads, but ideally we should fix ORC to store RG end. I think I filed a JIRA for that ages ago., Here's the patch. I am doing something else so I haven't tried it yet. Will try after fixing HiveQA, Should probably be disabled by default too. [~gopalv] wdyt?, HIVE-13241.patch review:
In the description of *hive.llap.orc.gap.cache* it isn't necessary to include "(Hive 2.1?)" -- eventually, it would have to be updated and that's a waste of developer cycles:

{quote}
+    LLAP_CACHE_ENABLE_ORC_GAP_CACHE("hive.llap.orc.gap.cache", true,
+        "Whether LLAP cache for ORC should remember gaps in ORC RG read estimates, to avoid\n" +
+        "re-reading the data that was read once and discarded because it is unneeded. This is\n" +
+        "only necessary for ORC files written before HIVE-9660 (Hive 2.1?)."),
{quote}

Also, could you explain what RG means?  My guess is row group, but the ORC wikidoc doesn't use that abbreviation., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12793858/HIVE-13241.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7306/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7306/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7306/

Messages:
{noformat}
**** This message was trimmed, see log for full details ****
[INFO] skip non existing resourceDirectory /data/hive-ptest/working/apache-github-source-source/hplsql/src/test/resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (setup-test-dirs) @ hive-hplsql ---
[INFO] Executing tasks

main:
    [mkdir] Created dir: /data/hive-ptest/working/apache-github-source-source/hplsql/target/tmp
    [mkdir] Created dir: /data/hive-ptest/working/apache-github-source-source/hplsql/target/warehouse
    [mkdir] Created dir: /data/hive-ptest/working/apache-github-source-source/hplsql/target/tmp/conf
     [copy] Copying 16 files to /data/hive-ptest/working/apache-github-source-source/hplsql/target/tmp/conf
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ hive-hplsql ---
[INFO] Compiling 2 source files to /data/hive-ptest/working/apache-github-source-source/hplsql/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.16:test (default-test) @ hive-hplsql ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.2:jar (default-jar) @ hive-hplsql ---
[INFO] Building jar: /data/hive-ptest/working/apache-github-source-source/hplsql/target/hive-hplsql-2.1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-site-plugin:3.3:attach-descriptor (attach-descriptor) @ hive-hplsql ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ hive-hplsql ---
[INFO] Installing /data/hive-ptest/working/apache-github-source-source/hplsql/target/hive-hplsql-2.1.0-SNAPSHOT.jar to /data/hive-ptest/working/maven/org/apache/hive/hive-hplsql/2.1.0-SNAPSHOT/hive-hplsql-2.1.0-SNAPSHOT.jar
[INFO] Installing /data/hive-ptest/working/apache-github-source-source/hplsql/pom.xml to /data/hive-ptest/working/maven/org/apache/hive/hive-hplsql/2.1.0-SNAPSHOT/hive-hplsql-2.1.0-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive HWI 2.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ hive-hwi ---
[INFO] Deleting /data/hive-ptest/working/apache-github-source-source/hwi/target
[INFO] Deleting /data/hive-ptest/working/apache-github-source-source/hwi (includes = [datanucleus.log, derby.log], excludes = [])
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-no-snapshots) @ hive-hwi ---
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.5:process (default) @ hive-hwi ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ hive-hwi ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /data/hive-ptest/working/apache-github-source-source/hwi/src/main/resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (define-classpath) @ hive-hwi ---
[INFO] Executing tasks

main:
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ hive-hwi ---
[INFO] Compiling 6 source files to /data/hive-ptest/working/apache-github-source-source/hwi/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ hive-hwi ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /data/hive-ptest/working/apache-github-source-source/hwi/src/test/resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (setup-test-dirs) @ hive-hwi ---
[INFO] Executing tasks

main:
    [mkdir] Created dir: /data/hive-ptest/working/apache-github-source-source/hwi/target/tmp
    [mkdir] Created dir: /data/hive-ptest/working/apache-github-source-source/hwi/target/warehouse
    [mkdir] Created dir: /data/hive-ptest/working/apache-github-source-source/hwi/target/tmp/conf
     [copy] Copying 16 files to /data/hive-ptest/working/apache-github-source-source/hwi/target/tmp/conf
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ hive-hwi ---
[INFO] Compiling 2 source files to /data/hive-ptest/working/apache-github-source-source/hwi/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.16:test (default-test) @ hive-hwi ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.2:jar (default-jar) @ hive-hwi ---
[INFO] Building jar: /data/hive-ptest/working/apache-github-source-source/hwi/target/hive-hwi-2.1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-site-plugin:3.3:attach-descriptor (attach-descriptor) @ hive-hwi ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ hive-hwi ---
[INFO] Installing /data/hive-ptest/working/apache-github-source-source/hwi/target/hive-hwi-2.1.0-SNAPSHOT.jar to /data/hive-ptest/working/maven/org/apache/hive/hive-hwi/2.1.0-SNAPSHOT/hive-hwi-2.1.0-SNAPSHOT.jar
[INFO] Installing /data/hive-ptest/working/apache-github-source-source/hwi/pom.xml to /data/hive-ptest/working/maven/org/apache/hive/hive-hwi/2.1.0-SNAPSHOT/hive-hwi-2.1.0-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive Llap Server 2.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ hive-llap-server ---
[INFO] Deleting /data/hive-ptest/working/apache-github-source-source/llap-server/target
[INFO] Deleting /data/hive-ptest/working/apache-github-source-source/llap-server (includes = [datanucleus.log, derby.log], excludes = [])
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-no-snapshots) @ hive-llap-server ---
[INFO] 
[INFO] --- build-helper-maven-plugin:1.8:add-source (add-source) @ hive-llap-server ---
[INFO] Source directory: /data/hive-ptest/working/apache-github-source-source/llap-server/src/gen/protobuf/gen-java added.
[INFO] Source directory: /data/hive-ptest/working/apache-github-source-source/llap-server/src/gen/thrift/gen-javabean added.
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.5:process (default) @ hive-llap-server ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ hive-llap-server ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 17 resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (define-classpath) @ hive-llap-server ---
[INFO] Executing tasks

main:
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ hive-llap-server ---
[INFO] Compiling 88 source files to /data/hive-ptest/working/apache-github-source-source/llap-server/target/classes
[INFO] -------------------------------------------------------------
[WARNING] COMPILATION WARNING : 
[INFO] -------------------------------------------------------------
[WARNING] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/cache/SimpleAllocator.java:[29,16] sun.misc.Cleaner is internal proprietary API and may be removed in a future release
[WARNING] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/cache/SimpleAllocator.java:[29,16] sun.misc.Cleaner is internal proprietary API and may be removed in a future release
[WARNING] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/cache/SimpleAllocator.java:[29,16] sun.misc.Cleaner is internal proprietary API and may be removed in a future release
[WARNING] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/cache/SimpleAllocator.java:[74,9] sun.misc.Cleaner is internal proprietary API and may be removed in a future release
[WARNING] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/daemon/impl/TaskRunnerCallable.java: Some input files use or override a deprecated API.
[WARNING] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/daemon/impl/TaskRunnerCallable.java: Recompile with -Xlint:deprecation for details.
[WARNING] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/shufflehandler/DirWatcher.java: Some input files use unchecked or unsafe operations.
[WARNING] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/shufflehandler/DirWatcher.java: Recompile with -Xlint:unchecked for details.
[INFO] 8 warnings 
[INFO] -------------------------------------------------------------
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/io/metadata/OrcFileEstimateErrors.java:[98,10] method addError in class org.apache.hadoop.hive.llap.io.metadata.OrcFileEstimateErrors cannot be applied to given types;
  required: long,int,long
  found: long,int
  reason: actual and formal argument lists differ in length
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Hive .............................................. SUCCESS [12.553s]
[INFO] Hive Shims Common ................................. SUCCESS [16.532s]
[INFO] Hive Shims 0.23 ................................... SUCCESS [14.955s]
[INFO] Hive Shims Scheduler .............................. SUCCESS [2.668s]
[INFO] Hive Shims ........................................ SUCCESS [2.638s]
[INFO] Hive Storage API .................................. SUCCESS [6.657s]
[INFO] Hive ORC .......................................... SUCCESS [13.682s]
[INFO] Hive Common ....................................... SUCCESS [27.313s]
[INFO] Hive Serde ........................................ SUCCESS [17.337s]
[INFO] Hive Metastore .................................... SUCCESS [55.183s]
[INFO] Hive Ant Utilities ................................ SUCCESS [1.842s]
[INFO] Hive Llap Common .................................. SUCCESS [18.581s]
[INFO] Hive Llap Client .................................. SUCCESS [11.432s]
[INFO] Hive Llap Tez ..................................... SUCCESS [11.645s]
[INFO] Hive Service RPC .................................. SUCCESS [7.398s]
[INFO] Spark Remote Client ............................... SUCCESS [12.820s]
[INFO] Hive Query Language ............................... SUCCESS [2:12.171s]
[INFO] Hive Service ...................................... SUCCESS [14.615s]
[INFO] Hive Accumulo Handler ............................. SUCCESS [6.017s]
[INFO] Hive JDBC ......................................... SUCCESS [18.657s]
[INFO] Hive Beeline ...................................... SUCCESS [3.759s]
[INFO] Hive CLI .......................................... SUCCESS [3.165s]
[INFO] Hive Contrib ...................................... SUCCESS [2.105s]
[INFO] Hive HBase Handler ................................ SUCCESS [9.307s]
[INFO] Hive HCatalog ..................................... SUCCESS [0.982s]
[INFO] Hive HCatalog Core ................................ SUCCESS [4.968s]
[INFO] Hive HCatalog Pig Adapter ......................... SUCCESS [3.310s]
[INFO] Hive HCatalog Server Extensions ................... SUCCESS [2.534s]
[INFO] Hive HCatalog Webhcat Java Client ................. SUCCESS [2.651s]
[INFO] Hive HCatalog Webhcat ............................. SUCCESS [18.794s]
[INFO] Hive HCatalog Streaming ........................... SUCCESS [3.405s]
[INFO] Hive HPL/SQL ...................................... SUCCESS [18.546s]
[INFO] Hive HWI .......................................... SUCCESS [1.699s]
[INFO] Hive Llap Server .................................. FAILURE [4.609s]
[INFO] Hive Shims Aggregator ............................. SKIPPED
[INFO] Hive TestUtils .................................... SKIPPED
[INFO] Hive Packaging .................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8:07.817s
[INFO] Finished at: Fri Mar 18 17:27:26 EDT 2016
[INFO] Final Memory: 238M/1120M
[INFO] ------------------------------------------------------------------------
[WARNING] The requested profile "hadoop-2" could not be activated because it does not exist.
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project hive-llap-server: Compilation failure
[ERROR] /data/hive-ptest/working/apache-github-source-source/llap-server/src/java/org/apache/hadoop/hive/llap/io/metadata/OrcFileEstimateErrors.java:[98,10] method addError in class org.apache.hadoop.hive.llap.io.metadata.OrcFileEstimateErrors cannot be applied to given types;
[ERROR] required: long,int,long
[ERROR] found: long,int
[ERROR] reason: actual and formal argument lists differ in length
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :hive-llap-server
+ exit 1
'
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12793858 - PreCommit-HIVE-TRUNK-Build, [~gopalv] [~prasanth_j] can you review? https://reviews.apache.org/r/45062/, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12794285/HIVE-13241.01.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 9 failed/errored test(s), 9801 tests executed
*Failed tests:*
{noformat}
TestMiniTezCliDriver-auto_join30.q-vector_data_types.q-filter_join_breaktask.q-and-12-more - did not produce a TEST-*.xml file
TestMiniTezCliDriver-explainuser_4.q-orc_merge6.q-mapreduce1.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-groupby3_map.q-sample2.q-auto_join14.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-groupby_map_ppr_multi_distinct.q-table_access_keys_stats.q-groupby4_noskew.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-join_rc.q-insert1.q-vectorized_rcfile_columnar.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-ppd_join4.q-join9.q-ppd_join3.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-timestamp_lazy.q-bucketsortoptimize_insert_4.q-date_udf.q-and-12-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap_auto_partitioned
org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testSparkQuery
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7330/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7330/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7330/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12794285 - PreCommit-HIVE-TRUNK-Build, I don't think test failures are related., [~prasanth_j] [~gopalv] ping?, la la la..., +1, Committed to master after some rebasing., [~sershe], you committed without addressing my review comments (https://reviews.apache.org/r/45062/) and I didn't have time to remind you because there were only a few hours after the +1.

My suggestions weren't a big deal, but they deserved better treatment.  Now that I've whined in public, I forgive you.  ;), Doc note:  This adds *hive.llap.orc.gap.cache* to HiveConf.java, so it needs to be documented in the LLAP section of Configuration Properties for release 2.1.0 with a crossreference at the beginning of the ORC section.

* [Configuration Properties -- LLAP | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-LLAP]
* [Configuration Properties -- ORC File Format | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-ORCFileFormat], Sorry, I will do a follow-up patch, Committed the description change in the addendum patch, Thanks for the addendum patch, [~sershe]!]