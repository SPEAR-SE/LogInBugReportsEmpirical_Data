[The fix uses /etc/alternatives/java link to determine the JAVA_HOME when running derby client., I run these commands in my machine:
{noformat}
sergio@victory:~/Development/hive⟫ JAVA_PATH=($(readlink /etc/alternatives/java))
sergio@victory:~/Development/hive⟫ JAVA_PATH=`dirname $JAVA_PATH`
sergio@victory:~/Development/hive⟫ JAVA_HOME=$JAVA_PATH/..
sergio@victory:~/Development/hive⟫ echo $JAVA_HOME
/usr/lib/jvm/java-7-openjdk-amd64/jre/bin/..
{noformat}

Shouldn't JAVA_HOME point to a previous directory? Like, /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/../.. ?, 
Both work fine because all its looking to do is find the executable java in $JAVA_HOME/bin. The etc/alternatives/java points to the HOME/jre/bin/java. Since the script installs JDK and jre packages, its under both. , Cool, then the code is ok
+1, Thanks [~ngangam]. I pushed this code to master.]