[+1. Will commit when tests pass.
, I cannot apply the patch. Can you regenerate it from open-source branch-0.4?

{code}
[zshao@dev /xxx/hadoop_hive/branch-0.4] patch -p0 -i ../HIVE-1099.1.patch
patching file ql/src/test/results/clientpositive/input40.q.out
Hunk #1 FAILED at 19.
Hunk #2 FAILED at 535.
2 out of 2 hunks FAILED -- saving rejects to file ql/src/test/results/clientpositive/input40.q.out.rej
patching file ql/src/test/queries/clientpositive/input40.q
{code}
, Re-generated patch for open source repository., +1

looks good - will commit if the tests pass, Committed. Thanks Paul, 

{color:red}Overall{color}: -1 no tests executed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12739930/HIVE-10999.1-spark.patc

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-SPARK-Build/884/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-SPARK-Build/884/console
Test logs: http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-SPARK-Build-884/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Tests exited with: InterruptedException: null
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12739930 - PreCommit-HIVE-SPARK-Build]