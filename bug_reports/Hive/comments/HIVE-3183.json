[This patch removes the restriction on 'when' clause. So some negative testcases become positive, namely:

udf_when_type_wrong2.q 
udf_when_type_wrong3.q

They should be moved from 'ql/src/test/queries/clientnegative/' to 'ql/src/test/queries/clientpositive/', and be renamed to reflect its positive nature.

Also in ql/src/test/results/clientpositive/

udf_when_type_wrong2.q.out
udf_when_type_wrong3.q.out

need to be added., Would you like to format this as a patch and submit for review?, I am not planning to commit code changes to Apache. I'll leave that to
Cloudera, Hortonworks and others who are incrementally improving Hive-QL :-)

The intent is to enable others in the public domain to understand the bugs
and opportunities that exist re Hive-QL types and SQL support distinct from
working within the the supplied grammar or hand writing work arounds etc






, Seems like this is already resolved by HIVE-5825.  Tried to the example in the JIRA, and issue no longer occurs., I guess we can resolve this one as duplicate, unless there is something of this JIRA not captured by the other?]