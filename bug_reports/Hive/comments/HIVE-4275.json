[Without the change, hive generates count as 4 (when it should be 2)., I get following error after I applied your patch and ran the included test.
{noformat}
   [junit] Failed query: schemeAuthority.q
    [junit] mkdir: Incomplete HDFS URI, no host: hdfs:///tmp/test
{noformat}, The test was actually for TestMinimrCliDriver. I had missed the changes in build-common.xml., Review board request.

https://reviews.apache.org/r/10429/, +1, Following tests failed:
* Test org.apache.hadoop.hive.ql.exec.TestExecDriver FAILED
* Test org.apache.hadoop.hive.ql.exec.TestOperators FAILED, Fixes issue in test cases., Addressed issues mentioned by Ashutosh., +1 running test will commit if tests pass., Committed to trunk. Thanks, Vikram!, Integrated in Hive-trunk-hadoop2 #162 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/162/])
    HIVE-4275 : Hive does not differentiate scheme and authority in file uris (Vikram Dixit via Ashutosh Chauhan) (Revision 1468445)

     Result = FAILURE
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1468445
Files : 
* /hive/trunk/build-common.xml
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestExecDriver.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestOperators.java
* /hive/trunk/ql/src/test/queries/clientpositive/schemeAuthority.q
* /hive/trunk/ql/src/test/results/clientpositive/schemeAuthority.q.out
, Integrated in Hive-trunk-h0.21 #2067 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2067/])
    HIVE-4275 : Hive does not differentiate scheme and authority in file uris (Vikram Dixit via Ashutosh Chauhan) (Revision 1468445)

     Result = FAILURE
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1468445
Files : 
* /hive/trunk/build-common.xml
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestExecDriver.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestOperators.java
* /hive/trunk/ql/src/test/queries/clientpositive/schemeAuthority.q
* /hive/trunk/ql/src/test/results/clientpositive/schemeAuthority.q.out
, hadoop-0.20.2-cdh3u1 is not working with this patch. After upgrading to cdh3u6, it worked.]