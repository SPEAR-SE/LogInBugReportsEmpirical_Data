[I have a diff ready for this - https://reviews.facebook.net/D3741, @Santosh: Please see my comments on phabricator. Thanks., @Santosh, are you still working on this ?
Otherwise, I can take it over., Since the old diff and new diff are pretty different, I have created a new diff for this:

https://reviews.facebook.net/D4167

, @Santhosh, is it ready for review ?
Please 'Submit Patch' in that case, The new diff can be found here:

https://reviews.facebook.net/D4167]