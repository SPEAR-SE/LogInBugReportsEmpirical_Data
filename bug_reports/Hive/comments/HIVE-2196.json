[For each one of these, we need to verify that the parameter is actually used.  For example, I searched the code for references to hive.optimize.pruner, and could not find any.  In such cases, we should delete from xml rather than add to HiveConf.

For cases where the parameter is still used (e.g. hive.io.exception.handlers), we should change the points of reference to go through the HiveConf symbol.
, Patch updated with below information

*The below configurations are not used in the code base so removed from the hive-default.xml*

hive.mapjoin.hashtable.initialCapacity 
hive.mapjoin.hashtable.loadfactor 
hive.mapjoin.smalltable.filesize 
hive.optimize.pruner 
hive.stats.jdbc.atomic 
hive.concurrency.manager 

*The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java*

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 
, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1423/
-----------------------------------------------------------

Review request for hive, Carl Steinbach and John Sichi.


Summary
-------

The below configurations are not used in the code base so removed from the hive-default.xml

hive.mapjoin.hashtable.initialCapacity 
hive.mapjoin.hashtable.loadfactor 
hive.mapjoin.smalltable.filesize 
hive.optimize.pruner 
hive.stats.jdbc.atomic 
hive.concurrency.manager 

The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 


This addresses bug HIVE-2196.
    https://issues.apache.org/jira/browse/HIVE-2196


Diffs
-----

  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1155275 
  trunk/conf/hive-default.xml 1155275 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1155275 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1155275 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMarkPartitionRemote.java 1155275 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java 1155275 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreEventListener.java 1155275 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java 1155275 
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java 1155275 
  trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1155275 

Diff: https://reviews.apache.org/r/1423/diff


Testing
-------

All unit tests passed


Thanks,

chinna

, Added review board request.

https://reviews.apache.org/r/1423/
, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1423/#review1451
-----------------------------------------------------------


bq. > The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java

Actually, everything that appears in hive-default.xml should also appear in HiveConf and vice-versa.

- Carl


On 2011-08-09 19:11:13, chinna wrote:
bq.  
bq.  -----------------------------------------------------------
bq.  This is an automatically generated e-mail. To reply, visit:
bq.  https://reviews.apache.org/r/1423/
bq.  -----------------------------------------------------------
bq.  
bq.  (Updated 2011-08-09 19:11:13)
bq.  
bq.  
bq.  Review request for hive, Carl Steinbach and John Sichi.
bq.  
bq.  
bq.  Summary
bq.  -------
bq.  
bq.  The below configurations are not used in the code base so removed from the hive-default.xml
bq.  
bq.  hive.mapjoin.hashtable.initialCapacity 
bq.  hive.mapjoin.hashtable.loadfactor 
bq.  hive.mapjoin.smalltable.filesize 
bq.  hive.optimize.pruner 
bq.  hive.stats.jdbc.atomic 
bq.  hive.concurrency.manager 
bq.  
bq.  The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java
bq.  
bq.  javax.jdo.option.ConnectionDriverName 
bq.  javax.jdo.PersistenceManagerFactoryClass 
bq.  javax.jdo.option.DetachAllOnCommit 
bq.  javax.jdo.option.NonTransactionalRead 
bq.  javax.jdo.option.ConnectionUserName 
bq.  fs.har.impl 
bq.  
bq.  
bq.  This addresses bug HIVE-2196.
bq.      https://issues.apache.org/jira/browse/HIVE-2196
bq.  
bq.  
bq.  Diffs
bq.  -----
bq.  
bq.    trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1155275 
bq.    trunk/conf/hive-default.xml 1155275 
bq.    trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1155275 
bq.    trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1155275 
bq.    trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMarkPartitionRemote.java 1155275 
bq.    trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java 1155275 
bq.    trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreEventListener.java 1155275 
bq.    trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java 1155275 
bq.    trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java 1155275 
bq.    trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1155275 
bq.  
bq.  Diff: https://reviews.apache.org/r/1423/diff
bq.  
bq.  
bq.  Testing
bq.  -------
bq.  
bq.  All unit tests passed
bq.  
bq.  
bq.  Thanks,
bq.  
bq.  chinna
bq.  
bq.

, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1423/
-----------------------------------------------------------

(Updated 2011-08-16 14:51:32.766435)


Review request for hive, Carl Steinbach and John Sichi.


Changes
-------

These configurations are added to HiveConf.java

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 


Summary
-------

The below configurations are not used in the code base so removed from the hive-default.xml

hive.mapjoin.hashtable.initialCapacity 
hive.mapjoin.hashtable.loadfactor 
hive.mapjoin.smalltable.filesize 
hive.optimize.pruner 
hive.stats.jdbc.atomic 
hive.concurrency.manager 

The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 


This addresses bug HIVE-2196.
    https://issues.apache.org/jira/browse/HIVE-2196


Diffs (updated)
-----

  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1158213 
  trunk/conf/hive-default.xml 1158213 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1158213 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1158213 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMarkPartitionRemote.java 1158213 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java 1158213 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreEventListener.java 1158213 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java 1158213 
  trunk/shims/src/common/java/org/apache/hadoop/hive/io/HiveIOExceptionHandlerChain.java 1158213 
  trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1158213 

Diff: https://reviews.apache.org/r/1423/diff


Testing
-------

All unit tests passed


Thanks,

chinna

, These configurations are added to HiveConf.java

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 
, +1. Will commit if tests pass., I get a compilation error in HiveIOExceptionHandlerChain. Looks like you need to import HiveConf.
, Hi Carl,
   i applied the patch on trunk i did not get compilation failure and in HiveIOExceptionHandlerChain  HiveConf is improted in this patch. Can u check one more time. I am submitting the same patch., @Chinna: Compilation still fails for me. Please see the attached ant build log for more details., @Chinna: I suspect this is working for you because you haven't run 'ant clean'. If you
do you'll see that your changes have introduced a circular build dependency: hive-shims
depends on hive-common and vice-versa, whereas previously hive-common only depended
on hive-shims. If you revert your changes to the shims/ directory I think this patch
will build cleanly and should be ready to commit., What about the values? Some keys have different default value in HiveConf then from hive-default.xml. Shouldn't the values should also match up in two places?, @Chinna: Please followup on the issue raised by Ashutosh. Configuration property values should match in HiveConf and hive-default.xml. If they don't match then the value that appears in hive-default.xml should be copied over to HiveConf. Thanks., @Carl: Reworked on the patch and latest patch taken care the below issues
1) Configuration property values verified and made it sync with the hive-default.xml
2) Compilation failure corrected., 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1423/
-----------------------------------------------------------

(Updated 2011-09-06 06:16:26.733090)


Review request for hive, Carl Steinbach and John Sichi.


Changes
-------

Reworked on the patch and latest patch taken care the below issues
1) Configuration property values verified and made it sync with the hive-default.xml
2) Compilation failure corrected.


Summary
-------

The below configurations are not used in the code base so removed from the hive-default.xml

hive.mapjoin.hashtable.initialCapacity 
hive.mapjoin.hashtable.loadfactor 
hive.mapjoin.smalltable.filesize 
hive.optimize.pruner 
hive.stats.jdbc.atomic 
hive.concurrency.manager 

The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 


This addresses bug HIVE-2196.
    https://issues.apache.org/jira/browse/HIVE-2196


Diffs (updated)
-----

  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java 1165244 
  trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1165244 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMarkPartitionRemote.java 1165244 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java 1165244 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreEventListener.java 1165244 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1165244 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1165244 
  trunk/conf/hive-default.xml 1165244 
  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1165244 

Diff: https://reviews.apache.org/r/1423/diff


Testing
-------

All unit tests passed


Thanks,

chinna

, Please run the tests before submitting a patch. All of the tests currently fail due to an assertion error in HiveConf:

{noformat}
java.lang.AssertionError
	at org.apache.hadoop.hive.conf.HiveConf.getVar(HiveConf.java:638)
	at org.apache.hadoop.hive.conf.HiveConf.getVar(HiveConf.java:648)
	at org.apache.hadoop.hive.ql.lockmgr.zookeeper.ZooKeeperHiveLockManager.getQuorumServers(ZooKeeperHiveLockManager.java:80)
	at org.apache.hadoop.hive.ql.lockmgr.zookeeper.ZooKeeperHiveLockManager.setContext(ZooKeeperHiveLockManager.java:92)
	at org.apache.hadoop.hive.ql.Driver.setLockManager(Driver.java:168)
	at org.apache.hadoop.hive.ql.Driver.checkLockManager(Driver.java:141)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:908)
	at org.apache.hadoop.hive.ql.QTestUtil.runLoadCmd(QTestUtil.java:394)
	at org.apache.hadoop.hive.ql.QTestUtil.createSources(QTestUtil.java:441)
	at org.apache.hadoop.hive.cli.TestCliDriver.<clinit>(TestCliDriver.java:38)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:169)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:337)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:785)
{noformat}

Also, please update the contents of data/conf/hive-site.xml

Thanks., 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1423/
-----------------------------------------------------------

(Updated 2011-09-27 15:51:37.029125)


Review request for hive, Carl Steinbach and John Sichi.


Changes
-------

All tests passed


Summary
-------

The below configurations are not used in the code base so removed from the hive-default.xml

hive.mapjoin.hashtable.initialCapacity 
hive.mapjoin.hashtable.loadfactor 
hive.mapjoin.smalltable.filesize 
hive.optimize.pruner 
hive.stats.jdbc.atomic 
hive.concurrency.manager 

The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 


This addresses bug HIVE-2196.
    https://issues.apache.org/jira/browse/HIVE-2196


Diffs (updated)
-----

  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1175859 
  trunk/conf/hive-default.xml 1175859 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1175859 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1175859 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMarkPartitionRemote.java 1175859 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java 1175859 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreEventListener.java 1175859 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java 1175859 
  trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1175859 

Diff: https://reviews.apache.org/r/1423/diff


Testing
-------

All unit tests passed


Thanks,

chinna

, All tests passed. Changes make it sink the contents of hive-default.xml to Hiveconf.java. After hive-default.xml loaded hive-site.xml will load so no need to change the contents of hive-site.xml, @Chinna,

I guess you need to mark it as Patch Available so that committers know that its ready for review. We should get this in, lest some other property get introduced which again violates this. 

Others,
HiveConf first loads hive-default.xml and then loads hive-site.xml Isn't loading hive-default.xml will be redundant after this change. Default values should come from HiveConf not from external xml file, if user wishes to override he should provide that value in hive-site.xml. We should stop loading hive-default.xml while initializing HiveConf. , Looks like HIVE-1571 will get fixed alongwith this., Rebase the patch on the trunk, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1423/
-----------------------------------------------------------

(Updated 2011-10-14 16:54:00.383612)


Review request for hive, Carl Steinbach and John Sichi.


Changes
-------

Rebase the patch on the trunk


Summary
-------

The below configurations are not used in the code base so removed from the hive-default.xml

hive.mapjoin.hashtable.initialCapacity 
hive.mapjoin.hashtable.loadfactor 
hive.mapjoin.smalltable.filesize 
hive.optimize.pruner 
hive.stats.jdbc.atomic 
hive.concurrency.manager 

The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 


This addresses bug HIVE-2196.
    https://issues.apache.org/jira/browse/HIVE-2196


Diffs (updated)
-----

  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1182263 
  trunk/conf/hive-default.xml 1182263 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1182263 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java 1182263 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMarkPartitionRemote.java 1182263 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java 1182263 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreEventListener.java 1182263 
  trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestRemoteHiveMetaStore.java 1182263 
  trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1182263 

Diff: https://reviews.apache.org/r/1423/diff


Testing
-------

All unit tests passed


Thanks,

chinna

, @Chinna, this slipped through the cracks and is not generating a lot of merge conflicts.
I think this is a really good idea - Can you refresh ? I will definitely go over it this time and try to get it in., And, also please mark it as 'Patch Available' so that everyone takes a look, 
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1423/
-----------------------------------------------------------

(Updated 2011-11-08 07:07:28.602261)


Review request for hive, Carl Steinbach and John Sichi.


Changes
-------

refreshed the patch


Summary
-------

The below configurations are not used in the code base so removed from the hive-default.xml

hive.mapjoin.hashtable.initialCapacity 
hive.mapjoin.hashtable.loadfactor 
hive.mapjoin.smalltable.filesize 
hive.optimize.pruner 
hive.stats.jdbc.atomic 
hive.concurrency.manager 

The below configurations are not used in the code base but these configurations are required for the system so need to maintain in the hive-default.xml and no need to add in the HiveConf.java

javax.jdo.option.ConnectionDriverName 
javax.jdo.PersistenceManagerFactoryClass 
javax.jdo.option.DetachAllOnCommit 
javax.jdo.option.NonTransactionalRead 
javax.jdo.option.ConnectionUserName 
fs.har.impl 


This addresses bug HIVE-2196.
    https://issues.apache.org/jira/browse/HIVE-2196


Diffs (updated)
-----

  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1198626 
  trunk/conf/hive-default.xml 1198626 
  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1198626 

Diff: https://reviews.apache.org/r/1423/diff


Testing
-------

All unit tests passed


Thanks,

chinna

, Integrated in Hive-trunk-h0.21 #1085 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1085/])
    HIVE-2196 Ensure HiveConf includes all properties defined in
hive-default.xml (Chinna Rao Lalam via namit)

namit : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1201872
Files : 
* /hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
* /hive/trunk/conf/hive-default.xml
* /hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java
, Committed. Thanks Chinna]