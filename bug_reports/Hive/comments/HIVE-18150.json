[[~stakiar]:  any progress on this jira? If you have not time on it, can I take this? Now I am working on compiling and running spark with scala-2.12 and jdk9(SPARK-22660), so I need to upgrade hive on spark to 2.2.0 to enable Hive on Spark on JDK9., trigger HIVE-QA to find the failed test cases, [~kellyzly] I probably can't work on it anytime soon, so yes feel free to take it over., test two qfiles by TestMiniSparkOnYarnCliDriver, seems no failures., reattach patch to trigger Hive QA., | (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  5m 48s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  4m  1s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  5m  7s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  5m  1s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  4m 14s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  4m 14s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  1s{color} | {color:green} The patch has no ill-formed XML file. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  5m 27s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 30m  8s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  xml  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus/dev-support/hive-personality.sh |
| git revision | master / 95dadac |
| Default Java | 1.8.0_111 |
| modules | C: . U: . |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-8130/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.

, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12900790/HIVE-18150.1.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 4 failed/errored test(s), 11512 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[hybridgrace_hashjoin_2] (batchId=157)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=165)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sysdb] (batchId=160)
org.apache.hadoop.hive.ql.parse.TestReplicationScenarios.testConstraints (batchId=227)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/8130/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/8130/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-8130/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12900790 - PreCommit-HIVE-Build, [~ferd], [~lirui],[~xuefuz] and [~stakiar]:  4 unit tests failed but it seems not related to this patch. [Jenkins|https://builds.apache.org/job/PreCommit-HIVE-Build/8137/#showFailuresLink] still failed on these 4 unit tests when applying other patch. Can you help review?, +1, [~ferd] : as we have finished the review of the patch, please help commit, thanks!, Thanks [~kellyzly] for the patch. I am wondering whether we need to bump up the version of Spark for QTest. [~spena], [~stakiar] any thoughts on this?, [~Ferd]:  [~stakiar] has uploaded the spark-2.2.0 package. So we need not bump up the version of Spark for QTest., Committed to the upstream., This jira is resolved and released with Hive 3.0 If you find an issue with it, please create a new jira.]