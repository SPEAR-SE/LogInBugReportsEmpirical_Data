[This patch should fix the bug., +1

looks good - will commit if the tests pass, committed. Thanks John]