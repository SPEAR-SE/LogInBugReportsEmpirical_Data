[Thanks for this fix!  Left a comment on the review-board., 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12682485/HIVE-8916.patch

{color:red}ERROR:{color} -1 due to 11 failed/errored test(s), 6598 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.beeline.TestBeeLineWithArgs.testEmbeddedBeelineConnection
org.apache.hive.hcatalog.streaming.TestStreaming.testRemainingTransactions
org.apache.hive.jdbc.TestJdbcDriver2.org.apache.hive.jdbc.TestJdbcDriver2
org.apache.hive.service.cli.operation.TestOperationLoggingAPI.testFetchResultsOfLog
org.apache.hive.service.cli.operation.TestOperationLoggingAPI.testFetchResultsOfLogAsync
org.apache.hive.service.cli.operation.TestOperationLoggingAPI.testFetchResultsOfLogCleanup
org.apache.hive.service.cli.operation.TestOperationLoggingAPI.testFetchResultsOfLogWithOrientation
org.apache.hive.service.cli.session.TestSessionGlobalInitFile.testSessionGlobalInitDir
org.apache.hive.service.cli.session.TestSessionGlobalInitFile.testSessionGlobalInitFile
org.apache.hive.service.cli.session.TestSessionGlobalInitFile.testSessionGlobalInitFileAndConfOverlay
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1844/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1844/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1844/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12682485 - PreCommit-HIVE-TRUNK-Build, Looks like we need to handle the case of null:

{noformat}
2014-11-19 17:39:22,829 WARN  thrift.ThriftCLIService (ThriftCLIService.java:OpenSession(242)) - Error opening session: 
java.lang.NullPointerException
	at org.apache.hive.service.ServiceUtils.indexOfDomainMatch(ServiceUtils.java:30)
	at org.apache.hive.service.cli.thrift.ThriftCLIService.getShortName(ThriftCLIService.java:307)
	at org.apache.hive.service.cli.thrift.ThriftCLIService.getUserName(ThriftCLIService.java:300)
	at org.apache.hive.service.cli.thrift.ThriftCLIService.getSessionHandle(ThriftCLIService.java:323)
	at org.apache.hive.service.cli.thrift.ThriftCLIService.OpenSession(ThriftCLIService.java:236)
	at org.apache.hive.service.cli.thrift.ThriftCLIServiceClient.openSession(ThriftCLIServiceClient.java:57)
	at org.apache.hive.service.cli.session.TestSessionGlobalInitFile.doTestSessionGlobalInitFile(TestSessionGlobalInitFile.java:126)
	at org.apache.hive.service.cli.session.TestSessionGlobalInitFile.testSessionGlobalInitFile(TestSessionGlobalInitFile.java:112)
{noformat}, Fix tests by addressing null case. 

Created HIVE-8928 to explore moving format detection to authentication handlers., +1 pending tests, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12682756/HIVE-8916.3.patch

{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 6666 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1860/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1860/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1860/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12682756 - PreCommit-HIVE-TRUNK-Build, Both tests pass for me locally., Thank you very much Mohit! I have committed this to trunk., Does this need documentation?

Possible locations:

* [Configuration Properties -- hive.server2.authentication.ldap.Domain | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.authentication.ldap.Domain]
* [HiveServer2 Clients | https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients]
* [Setting Up HiveServer2 -- Authentication/Security Configuration | https://cwiki.apache.org/confluence/display/Hive/Setting+Up+HiveServer2#SettingUpHiveServer2-Authentication/SecurityConfiguration], We could add documentation to [Configuration Properties -- hive.server2.authentication.ldap.Domain | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.authentication.ldap.Domain]

In case of LDAP authentication, {{hive.server2.authentication.ldap.Domain}}, if configured, is appended to the LDAP username passed in the client connection. This is because LDAP providers like Active Directory expect a fully qualified username that includes the domain.

Starting 0.15.0 (HIVE-8916), if the username passed in the client connection already includes the domain, any value configured in {{hive.server2.authentication.ldap.Domain}} is not appended to the username.]