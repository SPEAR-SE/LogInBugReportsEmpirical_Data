[Here's a tentative fix. I've added a retry to use the full file-path, in case the file can't be found using just the file-name., Java 7 has added Files.exists() method which I think can be used here. In addition to concise code, I think it will also generate precise exception message., 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12692448/HIVE-9386.1.patch

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 7315 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2391/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2391/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2391/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12692448 - PreCommit-HIVE-TRUNK-Build, Hey, [~ashutoshc]. Thanks for the review. Good idea. Is the following acceptable?

(On a tangential note, I've removed the superfluous boxing around the return-value in {{evaluate()}})., Forgot to mention: I've deprecated the {{public void load(InputStream is)}} method. That should've never been public., * Seems like we are never closing BufferedReader stream and thus leaking fd. 
* No need for deprecate, you can just delete that method. Its an internal method, not meant as public api., [~ashutoshc] Oops, thanks for catching that.

On the subject of Java7, the following fix doesn't work:

{code:title=GenericUDFInFile.java|borderStyle=solid}
  private void loadFromFile(String filePath) throws HiveException {
    set = new HashSet<String>();
    try (BufferedReader reader = getReaderFor(filePath)) {
      String line;
      while((line = reader.readLine()) != null) {
        set.add(line);
      }
    } catch (Exception e) {
      throw new HiveException(e);
    }
  }
{code}

The main pom.xml sets maven-compiler-plugin to use source=1.6,target=1.6. :/ Any chance we'll be changing that to 1.7? {{AutoCloseable}} beckons.

In the meantime, here's a 1.6 patch., ugh.. I see.  changing pom.xml will require discussion on dev list. Lets go with 1.6 patch for now.
+1, Actually, can you use hadoop commons IOUtils.closeQuitely() I am not sure we send apache commons jar to task nodes., Sure thing. I've used {{o.a.h.io.IOUtils.closeStream()}}, if that works., +1, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12692898/HIVE-9386.4.patch

{color:red}ERROR:{color} -1 due to 7 failed/errored test(s), 7272 tests executed
*Failed tests:*
{noformat}
TestMiniTezCliDriver-vector_coalesce.q-dynamic_partition_pruning.q-tez_union_group_by.q-and-12-more - did not produce a TEST-*.xml file
TestMiniTezCliDriver-vector_decimal_10_0.q-vector_decimal_trailing.q-lvj_mapjoin.q-and-12-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-leftsemijoin_mr.q-bucket5.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file
TestNegativeMinimrCliDriver-mapreduce_stack_trace_hadoop20.q - did not produce a TEST-*.xml file
org.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2406/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2406/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2406/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12692898 - PreCommit-HIVE-TRUNK-Build, Committed to trunk. Thanks, Mithun!]