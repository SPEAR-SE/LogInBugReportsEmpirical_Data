[

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12884794/HIVE-17421.1.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 6 failed/errored test(s), 11022 tests executed
*Failed tests:*
{noformat}
TestTxnCommandsBase - did not produce a TEST-*.xml file (likely timed out) (batchId=280)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=61)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=169)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=100)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/6628/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/6628/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-6628/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12884794 - PreCommit-HIVE-Build, Attach patch with better test.

We can divide the issue into 4 scenario:
1. Bootstrap non partition table: it is replicated with create_table + move task. create_table generates empty stats, move task clear the stats. So we don't have table stats summary on the destination
2. Bootstrap partition table: it is replicated with add_partition + move task. add_partition generates empty stats, move task clear the stats. So we don't have partition stats summary on the destination
3. Incremental non partition table: there is a alter_table task suppose to update the stats, however, due to HIVE-17428 (the table does not exist at the time we parse alter_table event), Hive treat it as a create_table task and will generate empty stats
4. Incremental partition table: there is a alter_partition task suppose to update the stats, however, due to HIVE-17428 (the table does not exist at the time we parse alter_table event), Hive treat it as a create_table task and will generate empty stats

Bootstrap replication don't have issue since there is no stats on destination side. The issue in incremental is likely to be fixed in HIVE-17428. However, in case we can not fix HIVE-17428 in time (or additional issues similarly), I attach a patch nullify the empty stats, so we won't get wrong result assuming stats is correct., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12885541/HIVE-17421.2.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 7 failed/errored test(s), 11027 tests executed
*Failed tests:*
{noformat}
TestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestTxnCommandsBase - did not produce a TEST-*.xml file (likely timed out) (batchId=280)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=61)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=143)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=234)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/6690/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/6690/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-6690/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12885541 - PreCommit-HIVE-Build, [~anishek], can you review?, +1 , cc [~thejas], +1
, Patch pushed to master., This jira is resolved and released with Hive 3.0 If you find an issue with it, please create a new jira.]