[

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12865510/HIVE-16558.1.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 3 failed/errored test(s), 10635 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_index] (batchId=225)
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver[hbase_handler_snapshot] (batchId=93)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=143)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/4929/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/4929/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-4929/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12865510 - PreCommit-HIVE-Build, Test failures are unrelated., [~xuefuz],can you plz take a quick review?, [~nzhang],Can you plz take a quick review?, +1, [~xuefuz]     
     This patch can only solve Drilldown read data from the cache when the Chinese show abnormal, and can not solve the Explain plan from the database query Chinese garbled, because the Chinese stored in the database is garbled.
     If you want to solve this problem, you need to modify the database encoding format.
     I try to modify the mysql 'columns_v2' table field 'comment' encoding utf8，Is this okay？, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12867055/HIVE-16558.2.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 10657 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_join30] (batchId=148)
org.apache.hive.hcatalog.pig.TestTextFileHCatStorer.testWriteDate (batchId=178)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/5133/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/5133/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-5133/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12867055 - PreCommit-HIVE-Build, Through logging，test failures are unrelated,please check it!, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12867055/HIVE-16558.2.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/7855/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/7855/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-7855/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command 'bash /data/hiveptest/working/scratch/source-prep.sh' failed with exit status 1 and output '+ date '+%Y-%m-%d %T.%3N'
2017-11-16 14:01:24.795
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export 'ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m '
+ ANT_OPTS='-Xmx1g -XX:MaxPermSize=256m '
+ export 'MAVEN_OPTS=-Xmx1g '
+ MAVEN_OPTS='-Xmx1g '
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-7855/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date '+%Y-%m-%d %T.%3N'
2017-11-16 14:01:24.797
+ cd apache-github-source-source
+ git fetch origin
From https://github.com/apache/hive
   cc62c91..0fe7811  master     -> origin/master
+ git reset --hard HEAD
HEAD is now at cc62c91 HIVE-18069: MetaStoreDirectSql to get tables has misplaced comma (Jesus Camacho Rodriguez, reviewed by Aihua Xu) (addendum)
+ git clean -f -d
Removing ql/src/test/queries/clientpositive/autoColumnStats_3a.q
Removing ql/src/test/queries/clientpositive/stats15a.q
Removing ql/src/test/queries/clientpositive/stats_noscan_2a.q
+ git checkout master
Already on 'master'
Your branch is behind 'origin/master' by 2 commits, and can be fast-forwarded.
  (use "git pull" to update your local branch)
+ git reset --hard origin/master
HEAD is now at 0fe7811 HIVE-17717: Enable rule to push post-aggregations into Druid (Jesus Camacho Rodriguez, reviewed by Ashutosh Chauhan)
+ git merge --ff-only origin/master
Already up-to-date.
+ date '+%Y-%m-%d %T.%3N'
2017-11-16 14:01:31.038
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: a/metastore/scripts/upgrade/mysql/hive-schema-3.0.0.mysql.sql: No such file or directory
error: a/service/src/java/org/apache/hive/service/servlet/QueryProfileServlet.java: No such file or directory
The patch does not appear to apply with p0, p1, or p2
+ exit 1
'
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12867055 - PreCommit-HIVE-Build]