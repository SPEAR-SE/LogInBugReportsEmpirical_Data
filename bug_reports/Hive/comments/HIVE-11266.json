[This is not just external tables - any tables where users are directly modifying the underlying data can be impacted by this., Yes, I agree with you, external table is just my personal use case., Hello there, which version of hive are you using? I saw you put a label 1.1.0 as affected versions. Does that mean that you are using Hive 1.1? Thanks., It was Hive 1.1.0 in CDH distribution, I see. We changed a lot since then. This should be already fixed in the recent Hive versions., If Hive is still serving results directly from the stats then with external tables it cannot guarantee their accuracy., [~pxiong] the issue is still there for external tables. The semantics for external tables in Hive are not well defined, but many people assume (and I agree) that it's ok to manually manage these using file operations, which invalidates the stats without Hive knowing about it.
I don't think this setting should be used for external tables.
Thoughts?
cc [~ashutoshc] [~hagleitn]
, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12890844/HIVE-11266.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 5 failed/errored test(s), 11190 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_predicate_pushdown] (batchId=231)
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_single_sourced_multi_insert] (batchId=231)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[optimize_nullscan] (batchId=162)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=171)
org.apache.hadoop.hive.cli.TestTezPerfCliDriver.testCliDriver[query23] (batchId=239)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/7181/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/7181/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-7181/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12890844 - PreCommit-HIVE-Build, +1, Adding test to the patch., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12891109/HIVE-11266.01.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 4 failed/errored test(s), 11191 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[optimize_nullscan] (batchId=162)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=171)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=101)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[stats_noscan_2] (batchId=117)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/7197/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/7197/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-7197/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12891109 - PreCommit-HIVE-Build, Regenerated q file for Spark test and pushed to master, thanks for reviewing [~ashutoshc]!, Hive 3.0.0 has been released so closing this jira.]