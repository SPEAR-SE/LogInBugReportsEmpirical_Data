[Same environment(CDH 4), same version of Hive, I also met the problem.

I use avro.schema.url to specify the url of the avsc
{code}
TBLPROPERTIES (
    'avro.schema.url'='hdfs:///user/qos/workspaces/avro/Message.avsc')
{code}

During the query, the log also print the same error message.

But it does not affect the execution of Hive query.

, This doesn't seem reproducible with latest trunk, so it might have been fixed already., Ok, thanks!


2013/11/14 Xuefu Zhang (JIRA) <jira@apache.org>

, I have the same issue on CDH 4.3.0.
$ rpm -qa | grep hive
hive-hbase-0.10.0+121-1.cdh4.3.0.p0.16.el6.noarch
hive-metastore-0.10.0+121-1.cdh4.3.0.p0.16.el6.noarch
hive-jdbc-0.10.0+121-1.cdh4.3.0.p0.16.el6.noarch
hive-0.10.0+121-1.cdh4.3.0.p0.16.el6.noarch

Here is Hive steps:
hive> CREATE TABLE avro_price_internal
    > PARTITIONED BY (year int, month int, day int, hour int)
    > ROW FORMAT SERDE
    >   'org.apache.hadoop.hive.serde2.avro.AvroSerDe'
    > STORED AS INPUTFORMAT
    >   'org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat'
    > OUTPUTFORMAT
    >   'org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat'
    > TBLPROPERTIES (
    >   'avro.schema.url'='hdfs:///user/wzhu00/camus/camus-avsc/PriceSchema.avsc'
    > );
OK
Time taken: 2.762 seconds
hive> ALTER TABLE avro_price_internal ADD IF NOT EXISTS PARTITION (year=2014, month=03, day=31, hour=19) LOCATION '/user/wzhu00/camus/dest/pricesingle/hourly/2014/03/31/19';
OK
Time taken: 0.595 seconds
hive> select * from avro_price_internal;
OK
Failed with exception java.io.IOException:org.apache.hadoop.hive.serde2.avro.BadSchemaException
Time taken: 0.463 seconds, Can you post your schema?



, Sergy,
Thanks for looking into it again. Here is the schema. 
{
	"namespace":"greenbox.ecom.sears.com",
	"type":"record",
	"name":"PriceSchema",
	"fields":[
		{
			"name":"price_id",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_programType",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_sale_salePrice",
			"type":"float",
			"default" : "0"
		},
		{
			"name":"price_sale_saleEndDate",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_regPrice",
			"type":"float",
			"default" : "0"
		},
		{
			"name":"price_promotext",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_mapVal",
			"type":"float",
			"default" : "0"
		},
		{
			"name":"price_shipping_minRate",
			"type": "float",
			"default" : "0"
		},
		{
			"name":"price_shipping_isSywrMaxShipElig",
			"type": "boolean",
			"default" : false
		},
		{
			"name":"price_shipping_handlingFee",
			"type":"float",
			"default" : "0"
		},
		{
			"name":"price_shipping_mode_exp_excluded",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_shipping_mode_exp_price",
			"type":"float",
			"default" : "0"
		},
		{
			"name":"price_shipping_mode_gnd_excluded",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_shipping_mode_gnd_free_startDt",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_shipping_mode_gnd_free_endDt",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_shipping_mode_gnd_free_promoTxt",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_shipping_mode_gnd_free_price",
			"type": "boolean",
			"default" : false
		},
		{
			"name":"price_shipping_mode_prem_excluded",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_shipping_mode_prem_price",
			"type":"float",
			"default" : "0"
		},
		{
			"name":"price_handlingFee",
			"type": "boolean",
			"default" : false
		},
		{
			"name":"price_meta_createdTs",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_meta_lastModifiedBy",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_meta_modifiedTs",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_meta_schemaVer",
			"type":"string",
			"default" : ""
		},
		{
			"name":"price_isCENotExist",
			"type": "boolean",
			"default" : false
		}
	]
}

The table without partition works fine., It is working now when I removed the data from the partition.
hive> select * from avro_price_external limit 1;
OK
Time taken: 0.245 seconds
So something is wrong when Hive tries to read the data.

Here is what I tried with the external table.
CREATE EXTERNAL TABLE avro_price_external
PARTITIONED BY (year int, month int, day int, hour int)
ROW FORMAT SERDE
  'org.apache.hadoop.hive.serde2.avro.AvroSerDe'
STORED AS INPUTFORMAT
  'org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat'
OUTPUTFORMAT
  'org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat'
TBLPROPERTIES (
  'avro.schema.url'='hdfs:///user/wzhu00/camus/camus-avsc/PriceSchema.avsc'
);
hive> ALTER TABLE avro_price_external ADD IF NOT EXISTS PARTITION (year=2014, month=03, day=31, hour=19) LOCATION '/user/wzhu00/camus/dest/pricesingle/hourly/2014/03/31/19';
hive> select * from avro_price_external;                                                                      OK
Failed with exception java.io.IOException:org.apache.hadoop.hive.serde2.avro.BadSchemaException
Time taken: 0.301 seconds
]