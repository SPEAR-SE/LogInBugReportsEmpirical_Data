[null check seems ok. don't see any other problem since it is used only in sampling.
+1, Committed revision 752624. Thanks Namit!]