[
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/1299/
-----------------------------------------------------------

Review request for hive and Carl Steinbach.


Summary
-------

Pass the Login timeout to thrift/socket layer when connecting to the hive server.


This addresses bug HIVE-2110.
    https://issues.apache.org/jira/browse/HIVE-2110


Diffs
-----

  jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveConnection.java 7c5df83 
  jdbc/src/java/org/apache/hadoop/hive/jdbc/HiveDriver.java c61425f 

Diff: https://reviews.apache.org/r/1299/diff


Testing
-------

simple repro to verify the timeout. JDBC tests.


Thanks,

Prasad

, +1. Will commit if tests pass., @Prasad: The patch does not apply cleanly with patch -p0. Please see the HowToContribute page on the wiki for more info., Support socketTimeout(ms) at HiveDriver.

{code}
jdbc:hive2://se-ubuntu:10000?socketTimeout=10000
{code}

, [~prasadm], [~cwsteinbach] I think socketTimeout is the basic function for connection and necessary. If you don't mind, I'd like to update rebased patch used for JDBC2. , azrael requested code review of "HIVE-2110 [jira] Hive Client is indefenitely waiting for reading from Socket".

Reviewers: JIRA

HIVE-2110 : Hive Client is indefenitely waiting for reading from Socket

TEST PLAN
  Unit test

REVISION DETAIL
  https://reviews.facebook.net/D12813

AFFECTED FILES
  jdbc/src/java/org/apache/hive/jdbc/HiveConnection.java
  jdbc/src/java/org/apache/hive/jdbc/Utils.java
  jdbc/src/test/org/apache/hive/jdbc/TestJdbcDriver2.java

MANAGE HERALD RULES
  https://reviews.facebook.net/herald/view/differential/

WHY DID I GET THIS EMAIL?
  https://reviews.facebook.net/herald/transcript/30735/

To: JIRA, azrael
, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12602138/HIVE-2110.D12813.1.patch

{color:red}ERROR:{color} -1 due to 4 failed/errored test(s), 3087 tests executed
*Failed tests:*
{noformat}
org.apache.hive.hcatalog.mapreduce.TestSequenceFileReadWrite.testSequenceTableWriteRead
org.apache.hive.hcatalog.mapreduce.TestSequenceFileReadWrite.testTextTableWriteRead
org.apache.hive.hcatalog.mapreduce.TestSequenceFileReadWrite.testSequenceTableWriteReadMR
org.apache.hive.hcatalog.mapreduce.TestSequenceFileReadWrite.testTextTableWriteReadMR
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/672/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/672/console

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests failed with: TestsFailedException: 4 tests failed
{noformat}

This message is automatically generated.]