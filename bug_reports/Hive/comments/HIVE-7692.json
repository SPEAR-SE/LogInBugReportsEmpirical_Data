[This is not a problem. I had misread virtual_column.q test where it seemed like it was dropping an index after dropping the table, but it was actually dropping an index that was never created on that table.
, This is a problem. When index table was stored in HBase, but HiveMetaStore (drop_table_core), when hive meta store dropt tables. it dropt indexs first, and just deleted the index table location dir.

But in HiveMetaStoreClient, when it dropt index, it will drop index table first. it get the index table's storagehandler.commitDropTable  and really drop index table data., [~daisy_yu] Not related to the issue you raised ( I will need to dig more into it to understand it better). But your use case of hbase for indexes is interesting. Can you share any more information about it ? Have you found it very useful ? What sort of queries do you see benefiting out of it ?
]