[[~sushanth] [~ashutoshc] can you take a look?, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12835222/HIVE-15062.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 202 failed/errored test(s), 10466 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.metastore.TestFilterHooks.testDefaultFilter (batchId=188)
org.apache.hadoop.hive.metastore.TestFilterHooks.testDummyFilterForDb (batchId=188)
org.apache.hadoop.hive.metastore.TestFilterHooks.testDummyFilterForIndex (batchId=188)
org.apache.hadoop.hive.metastore.TestFilterHooks.testDummyFilterForPartition (batchId=188)
org.apache.hadoop.hive.metastore.TestFilterHooks.testDummyFilterForTables (batchId=188)
org.apache.hadoop.hive.metastore.TestHiveMetaTool.testExecuteJDOQL (batchId=200)
org.apache.hadoop.hive.metastore.TestHiveMetaTool.testListFSRoot (batchId=200)
org.apache.hadoop.hive.metastore.TestHiveMetaTool.testUpdateFSRootLocation (batchId=200)
org.apache.hadoop.hive.metastore.TestMetaStoreEventListener.testListener (batchId=195)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterPartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterTable (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterViewParititon (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testColumnStatistics (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testComplexTable (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testComplexTypeApi (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testConcurrentMetastores (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDBOwner (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDBOwnerChange (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDatabase (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDatabaseLocation (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDatabaseLocationWithPermissionProblems (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDropTable (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testFilterLastPartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testFilterSinglePartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testFunctionWithResources (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testGetConfigValue (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testGetTableObjects (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testListPartitionNames (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testListPartitions (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testListPartitionsWihtLimitEnabled (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testNameMethods (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testPartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testPartitionFilter (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testRenamePartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testSimpleFunction (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testSimpleTable (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testSimpleTypeApi (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testStatsFastTrivial (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testSynchronized (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTableDatabase (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTableFilter (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTransactionalValidation (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testValidateTableCols (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterPartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterTable (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterViewParititon (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testColumnStatistics (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testComplexTable (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testComplexTypeApi (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testConcurrentMetastores (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDBOwner (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDBOwnerChange (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDatabase (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDatabaseLocation (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDatabaseLocationWithPermissionProblems (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDropTable (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testFilterLastPartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testFilterSinglePartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testFunctionWithResources (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testGetConfigValue (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testGetTableObjects (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testListPartitionNames (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testListPartitions (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testListPartitionsWihtLimitEnabled (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testNameMethods (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testPartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testPartitionFilter (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testRenamePartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testSimpleFunction (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testSimpleTable (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testSimpleTypeApi (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testStatsFastTrivial (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testSynchronized (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTableDatabase (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTableFilter (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTransactionalValidation (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testValidateTableCols (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterPartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterTable (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterViewParititon (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testColumnStatistics (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testComplexTable (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testComplexTypeApi (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testConcurrentMetastores (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDBOwner (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDBOwnerChange (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDatabase (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDatabaseLocation (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDatabaseLocationWithPermissionProblems (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDropTable (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testFilterLastPartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testFilterSinglePartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testFunctionWithResources (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testGetConfigValue (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testGetTableObjects (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testListPartitionNames (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testListPartitions (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testListPartitionsWihtLimitEnabled (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testNameMethods (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testPartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testPartitionFilter (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testRenamePartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testSimpleFunction (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testSimpleTable (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testSimpleTypeApi (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testStatsFastTrivial (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testSynchronized (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTableDatabase (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTableFilter (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTransactionalValidation (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testValidateTableCols (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterPartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterTable (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterViewParititon (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testColumnStatistics (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testComplexTable (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testComplexTypeApi (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testConcurrentMetastores (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDBOwner (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDBOwnerChange (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDatabase (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDatabaseLocation (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDatabaseLocationWithPermissionProblems (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDropTable (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testFilterLastPartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testFilterSinglePartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testFunctionWithResources (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testGetConfigValue (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testGetTableObjects (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testListPartitionNames (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testListPartitions (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testListPartitionsWihtLimitEnabled (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testNameMethods (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testPartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testPartitionFilter (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testRenamePartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testSimpleFunction (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testSimpleTable (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testSimpleTypeApi (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testStatsFastTrivial (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testSynchronized (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTableDatabase (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTableFilter (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTransactionalValidation (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testValidateTableCols (batchId=198)
org.apache.hadoop.hive.metastore.hbase.TestHBaseMetastoreSql.insertIntoPartitionTable (batchId=191)
org.apache.hadoop.hive.metastore.hbase.TestHBaseMetastoreSql.insertIntoTable (batchId=191)
org.apache.hadoop.hive.metastore.hbase.TestHBaseMetastoreSql.partitionedTable (batchId=191)
org.apache.hadoop.hive.metastore.hbase.TestHBaseMetastoreSql.table (batchId=191)
org.apache.hadoop.hive.ql.metadata.TestHiveRemote.testAutoPurgeTablesAndPartitions (batchId=254)
org.apache.hadoop.hive.ql.metadata.TestHiveRemote.testDropPartitionsWithPurge (batchId=254)
org.apache.hadoop.hive.ql.metadata.TestHiveRemote.testIndex (batchId=254)
org.apache.hadoop.hive.ql.metadata.TestHiveRemote.testPartition (batchId=254)
org.apache.hadoop.hive.ql.metadata.TestHiveRemote.testTable (batchId=254)
org.apache.hadoop.hive.ql.metadata.TestHiveRemote.testThriftTable (batchId=254)
org.apache.hadoop.hive.ql.security.TestMetastoreAuthorizationProvider.testSimplePrivileges (batchId=204)
org.apache.hive.beeline.TestBeeLineWithArgs.org.apache.hive.beeline.TestBeeLineWithArgs (batchId=207)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
org.apache.hive.beeline.TestBeelinePasswordOption.org.apache.hive.beeline.TestBeelinePasswordOption (batchId=207)
org.apache.hive.beeline.cli.TestHiveCli.testSourceCmd (batchId=164)
org.apache.hive.beeline.cli.TestHiveCli.testSourceCmd2 (batchId=164)
org.apache.hive.beeline.cli.TestHiveCli.testVariablesForSource (batchId=164)
org.apache.hive.hcatalog.api.repl.commands.TestCommands.testBasicReplEximCommands (batchId=166)
org.apache.hive.hcatalog.api.repl.commands.TestCommands.testDropPartitionCommand (batchId=166)
org.apache.hive.hcatalog.api.repl.commands.TestCommands.testDropTableCommand (batchId=166)
org.apache.hive.hcatalog.api.repl.commands.TestCommands.testDropTableCommand2 (batchId=166)
org.apache.hive.hcatalog.api.repl.commands.TestCommands.testMetadataReplEximCommands (batchId=166)
org.apache.hive.hcatalog.api.repl.commands.TestCommands.testNoopReplEximCommands (batchId=166)
org.apache.hive.hcatalog.cli.TestPermsGrp.testCustomPerms (batchId=172)
org.apache.hive.hcatalog.mapreduce.TestHCatMultiOutputFormat.org.apache.hive.hcatalog.mapreduce.TestHCatMultiOutputFormat (batchId=177)
org.apache.hive.hcatalog.mapreduce.TestHCatPartitionPublish.testPartitionPublish (batchId=172)
org.apache.hive.hcatalog.streaming.TestStreaming.testConcurrentTransactionBatchCommits (batchId=179)
org.apache.hive.jdbc.TestJdbcDriver2.org.apache.hive.jdbc.TestJdbcDriver2 (batchId=210)
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testNonSparkQuery (batchId=213)
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testPermFunc (batchId=213)
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testSparkQuery (batchId=213)
org.apache.hive.jdbc.TestJdbcWithMiniHA.testMrQuery (batchId=212)
org.apache.hive.jdbc.TestJdbcWithMiniHA.testNonMrQuery (batchId=212)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testEmptyResultsetThriftSerializeInTasks (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testEnableThriftSerializeInTasks (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testFloatCast2DoubleThriftSerializeInTasks (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testMetadataQueriesWithSerializeThriftInTasks (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testSelectThriftSerializeInTasks (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testURIDatabaseName (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testEscapedStrings (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testLlapInputFormatEndToEnd (batchId=211)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testNonAsciiStrings (batchId=211)
org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testNonSparkQuery (batchId=213)
org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testSparkQuery (batchId=213)
org.apache.hive.jdbc.TestSSL.testSSLFetch (batchId=209)
org.apache.hive.jdbc.TestSSL.testSSLFetchHttp (batchId=209)
org.apache.hive.jdbc.TestServiceDiscoveryWithMiniHS2.testConnectionWithConfigsPublished (batchId=214)
org.apache.hive.jdbc.TestServiceDiscoveryWithMiniHS2.testConnectionWithoutConfigsPublished (batchId=214)
org.apache.hive.jdbc.TestXSRFFilter.testFilterDisabledNoInjection (batchId=211)
org.apache.hive.jdbc.TestXSRFFilter.testFilterDisabledWithInjection (batchId=211)
org.apache.hive.jdbc.TestXSRFFilter.testFilterEnabledWithInjection (batchId=211)
org.apache.hive.jdbc.authorization.TestJdbcWithSQLAuthorization.testAuthorization1 (batchId=213)
org.apache.hive.minikdc.TestJdbcWithMiniKdcCookie.testCookie (batchId=225)
org.apache.hive.minikdc.TestJdbcWithMiniKdcSQLAuthBinary.testAuthorization1 (batchId=225)
org.apache.hive.minikdc.TestJdbcWithMiniKdcSQLAuthHttp.testAuthorization1 (batchId=225)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/1800/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/1800/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-1800/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 202 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12835222 - PreCommit-HIVE-Build, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12835245/HIVE-15062.01.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 141 failed/errored test(s), 10621 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver[hbase_bulk] (batchId=89)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterPartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterTable (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testAlterViewParititon (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testColumnStatistics (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testComplexTable (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testComplexTypeApi (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testConcurrentMetastores (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDBOwner (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDBOwnerChange (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDatabase (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDatabaseLocation (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDatabaseLocationWithPermissionProblems (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testDropTable (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testFilterLastPartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testFilterSinglePartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testFunctionWithResources (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testGetConfigValue (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testGetTableObjects (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testListPartitionNames (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testListPartitions (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testListPartitionsWihtLimitEnabled (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testNameMethods (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testPartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testPartitionFilter (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testRenamePartition (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testSimpleFunction (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testSimpleTable (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testSimpleTypeApi (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testStatsFastTrivial (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testSynchronized (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTableDatabase (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTableFilter (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testTransactionalValidation (batchId=193)
org.apache.hadoop.hive.metastore.TestRemoteHiveMetaStore.testValidateTableCols (batchId=193)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterPartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterTable (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testAlterViewParititon (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testColumnStatistics (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testComplexTable (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testComplexTypeApi (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testConcurrentMetastores (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDBOwner (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDBOwnerChange (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDatabase (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDatabaseLocation (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDatabaseLocationWithPermissionProblems (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testDropTable (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testFilterLastPartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testFilterSinglePartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testFunctionWithResources (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testGetConfigValue (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testGetTableObjects (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testListPartitionNames (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testListPartitions (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testListPartitionsWihtLimitEnabled (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testNameMethods (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testPartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testPartitionFilter (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testRenamePartition (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testSimpleFunction (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testSimpleTable (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testSimpleTypeApi (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testStatsFastTrivial (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testSynchronized (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTableDatabase (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTableFilter (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testTransactionalValidation (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnBothClientServer.testValidateTableCols (batchId=189)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterPartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterTable (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testAlterViewParititon (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testColumnStatistics (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testComplexTable (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testComplexTypeApi (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testConcurrentMetastores (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDBOwner (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDBOwnerChange (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDatabase (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDatabaseLocation (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDatabaseLocationWithPermissionProblems (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testDropTable (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testFilterLastPartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testFilterSinglePartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testFunctionWithResources (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testGetConfigValue (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testGetTableObjects (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testListPartitionNames (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testListPartitions (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testListPartitionsWihtLimitEnabled (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testNameMethods (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testPartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testPartitionFilter (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testRenamePartition (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testSimpleFunction (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testSimpleTable (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testSimpleTypeApi (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testStatsFastTrivial (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testSynchronized (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTableDatabase (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTableFilter (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testTransactionalValidation (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyClient.testValidateTableCols (batchId=187)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterPartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterTable (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testAlterViewParititon (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testColumnStatistics (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testComplexTable (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testComplexTypeApi (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testConcurrentMetastores (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDBOwner (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDBOwnerChange (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDatabase (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDatabaseLocation (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDatabaseLocationWithPermissionProblems (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testDropTable (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testFilterLastPartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testFilterSinglePartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testFunctionWithResources (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testGetConfigValue (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testGetTableObjects (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testListPartitionNames (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testListPartitions (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testListPartitionsWihtLimitEnabled (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testNameMethods (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testPartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testPartitionFilter (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testRenamePartition (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testSimpleFunction (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testSimpleTable (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testSimpleTypeApi (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testStatsFastTrivial (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testSynchronized (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTableDatabase (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTableFilter (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testTransactionalValidation (batchId=198)
org.apache.hadoop.hive.metastore.TestSetUGIOnOnlyServer.testValidateTableCols (batchId=198)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
org.apache.hive.spark.client.TestSparkClient.testJobSubmission (batchId=272)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/1806/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/1806/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-1806/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 141 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12835245 - PreCommit-HIVE-Build, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12835406/HIVE-15062.02.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 4 failed/errored test(s), 10621 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver[hbase_bulk] (batchId=89)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/1830/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/1830/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-1830/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12835406 - PreCommit-HIVE-Build, The HBase test seems to have failed due to some issues w/the cluster, there are a lot of ZK ConnectionLoss/transient errors.
I will try locally..
[~sseth] what do we do with such failures?, [~sershe] - if you're referring to the following
{code}
org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver[hbase_bulk] (batchId=89)
{code}
There's already a flaky test jira for this under https://issues.apache.org/jira/browse/HIVE-15058. (That's tracking currently known flaky tests to make it a little easier to analyze ptest reports, cite jiras, and commit). Of course if you have an idea on how this test can be fixed, that would be awesome. (Looks like you know more than anyone else on what is going on with the test :))
This specific failure, I think we should just disable, it fails often enough to not be useful., Some notes on the feature after discussion with Sergey 
 * The current api would call the new API will NULL for the capabilities
 * This give an error only if the table being accessed has additional capabilities that client should have to be able to access the data correctly.

[~sershe]
 * Enum have been causing issues in HiveServer2. See HIVE-6050
 * Call the current VERSION capability NULL_VERSION or so ?
, [~thejas] tested it locally by writing to file, removing the value, rebuilding and reading the file; the unknown value is simply converted to null. It may break in the cases where the enum field is required, but it is ok for lists.
, Renamed the value and added the comment to make it more explicit, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12835862/HIVE-15062.03.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 5 failed/errored test(s), 10626 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_4] (batchId=91)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_5] (batchId=90)
org.apache.hadoop.hive.druid.TestHiveDruidQueryBasedInputFormat.testCreateSplitsIntervals (batchId=229)
org.apache.hive.spark.client.TestSparkClient.testJobSubmission (batchId=272)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/1868/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/1868/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-1868/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12835862 - PreCommit-HIVE-Build, Known flaky tests for Spark, and for explain - https://issues.apache.org/jira/browse/HIVE-15084

The Druid test fails on master for me too - filed https://issues.apache.org/jira/browse/HIVE-15095

[~thejas] does the patch make sense now?, I like the fundamental idea, and I think this makes sense. I would suggest a couple of things, though.

a) checkClient is not really handling "checking" client compatibility. Instead, it is instead acting as a gating assert for entering sections of code where we make an assumption that feature exists. I think that an api style that did the following would be more usable:

{code}
private boolean checkClientCompatible(ClientCapabilities capabilities,
	        ClientCapability value, String what, String call) {
     // return true if compatible, false, if not. Simply test, no more.
    ...
}

private boolean assertClientCompatible(ClientCapabilities capabilities,
	        ClientCapability value, String what, String call) throws MetaException {
    if (!checkClientCompatible(capabilities, value, what, call) {
        // throw exception similar to existing checkClient
    }
}

{code}

Then, this allows us to assert that something should be compatible if it requires it, and allows us to write backward compatible code if possible by checking capability.

b) Also, I would advise cautionary use of the capabilities notion, since the metastore api is a public api (also, the HCatClient api that sits on top of this), and thus, all manners of tools use it, not just hive. For eg., in the example you use, of ACID tables not being visible, or worse, erroring out if a user has their capabilities as null, this will then break other existing tools written against the metastore api, such as tools that do a UI display of the warehouse (data explorers/etc), or will break existing wh management tools which set table properties for expiry/cleanup, etc. They can be updated(with recompiling), by adding capabilities to each explicitly, but that then becomes a moving target for them unless we define something like ALL, at which point everyone starts using ALL and the point gets lost. On the other hand, warehouses that have tools like that could also disable the compatibility check altogether, and it's a good thing you include that - this allows them to continue unbroken. But.. that then causes issues if we write code that then necessarily depends on the compatibility check acting as a gate.

Thus, while this is a useful capability, the possibility for accidental misuse leading to breaking backward compatibility is high. I would still like this to be introduced, however, but maybe with more documented warnings on usage, about why one must be careful of implementing this?, Thanks for the feedback.
I have added the usage guidelines in the exception text; the setting is also settable from the client (added that to the error message now), so such tools should be able to set it per session.
I don't think there's a way around this for external tools - at worst, they will have to disable this globally, which is no worse than the current situation, or they can disable it per session. However, we would have proper handling for different versions of Hive, such as in heterogeneous clusters and for rolling upgrade., Changed the API layout and error message., [~sershe] Thanks for clarifying (offline) that this config is settable from the client because it has been added to HiveConf.metaConfVars.

+1
, Will commit today/tomorrow if there's no more feedback., Thanks for the update, [~sershe], looks good, +1. :), Committed to master.
Thanks for the reviews!, Doc note:  This adds *hive.metastore.client.capability.check* to HiveConf.java, so it needs to be documented in the Metastore section of Configuration Properties.

* [Configuration Properties -- Metastore | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-MetaStore]]