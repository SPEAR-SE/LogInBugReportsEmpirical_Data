[it's useful to log these, there can be user errors that are useful to see in logs; also there can be metastore bug that looks to metastore like user error (for example, some error in JDO filter parsing).

I think the code that does this check should be changed to do it differently., One possibility is using something like dropTable("nonexistenttable") with ifExists options - that should avoid the stack trace, The problem with that is that if it exists, it will be dropped... I linked jira which I coincidentally filed today morning. This class has access to all the HiveMetastoreClient calls, so it can remember the name of existing database and call getDatabase on it instead, sershe requested code review of "HIVE-5225 [jira] There is no database named nonexistentdatabaseusedforhealthcheck".

Reviewers: JIRA

Replace with getDatabases, which should not cause the error

TEST PLAN
  EMPTY

REVISION DETAIL
  https://reviews.facebook.net/D12831

AFFECTED FILES
  hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java

MANAGE HERALD RULES
  https://reviews.facebook.net/herald/view/differential/

WHY DID I GET THIS EMAIL?
  https://reviews.facebook.net/herald/transcript/30759/

To: JIRA, sershe
, +1 , Committed to trunk. Thanks, Sergey!, Hey guys, this caused a checkstyle failure in Hcatalog. I submitted for this HIVE-5266. It also modifies org.apache.hcatalog.commong.HiveClientCache to do this same as this change., FAILURE: Integrated in Hive-trunk-hadoop1-ptest #161 (See [https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/161/])
HIVE-5225 : There is no database named nonexistentdatabaseusedforhealthcheck (Sergey Shelukhin via Navis) (navis: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1521704)
* /hive/trunk/hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java
, FAILURE: Integrated in Hive-trunk-hadoop2-ptest #94 (See [https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/94/])
HIVE-5225 : There is no database named nonexistentdatabaseusedforhealthcheck (Sergey Shelukhin via Navis) (navis: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1521704)
* /hive/trunk/hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java
, FAILURE: Integrated in Hive-trunk-h0.21 #2324 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2324/])
HIVE-5225 : There is no database named nonexistentdatabaseusedforhealthcheck (Sergey Shelukhin via Navis) (navis: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1521704)
* /hive/trunk/hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java
, ABORTED: Integrated in Hive-trunk-hadoop2 #421 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/421/])
HIVE-5225 : There is no database named nonexistentdatabaseusedforhealthcheck (Sergey Shelukhin via Navis) (navis: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1521704)
* /hive/trunk/hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java
]