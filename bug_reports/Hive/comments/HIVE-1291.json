[This patch fixes the bug., +1

will commit if the tests pass, Committed. Thanks Zheng]