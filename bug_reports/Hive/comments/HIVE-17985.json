[

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12896146/HIVE-17985-branch-2.3.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 5 failed/errored test(s), 10560 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=142)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion02 (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion02 (batchId=275)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion02 (batchId=272)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/7657/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/7657/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-7657/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12896146 - PreCommit-HIVE-Build, I have just fix a NullPointerException,But the build have some unexpected error which I never meet before .
Could [~thejas] or [~gopalv] take a look?

Many thanks!, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12896146/HIVE-17985-branch-2.3.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 4 failed/errored test(s), 10560 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion02 (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion02 (batchId=275)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion02 (batchId=272)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/7658/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/7658/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-7658/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12896146 - PreCommit-HIVE-Build, HIVE-17965 will remove this option from master
for other branches it looks good +1
could you given an example how to reproduce this issue? I've tried to reproduce it....but only legit errors were outputted - I've not seen any NPE, Hi [~kgyrtkirk] ,thank you for you reply!
I have reproduce this issue with qtest table srcpart.

{code:sql}
set hive.limit.query.max.table.partition=1;

CREATE TABLE srcpart_like (key STRING COMMENT 'default', value STRING COMMENT 'default')
PARTITIONED BY (ds STRING, hr STRING)
STORED AS TEXTFILE;

INSERT OVERWRITE TABLE srcpart_like PARTITION (ds='2008-04-08', hr='12')
select key,value from srcpart;
{code}, [~kgyrtkirk] 
  I have upload the patch file to https://reviews.apache.org/r/63692/ 
  Could you help me to review the code ?]