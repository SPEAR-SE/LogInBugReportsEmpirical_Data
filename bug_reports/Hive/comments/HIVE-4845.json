[I am running tests here https://builds.apache.org/user/brock/my-views/view/hive/job/Hive-Test-Patch-trunk-hadoop1-ptest/9/., Tests pass, results are here: https://builds.apache.org/user/brock/my-views/view/hive/job/Hive-Test-Patch-trunk-hadoop1-ptest/9/testReport/, https://reviews.facebook.net/D11685, Updated patch based on review. Cleaned up auto-gen'ed equals/hashcode., [~brocknoland]
I have an idea. Can you please add some traditional unit tests that exersize the equals and hashCode methods. , +1 I am bit confused about two patches. Do I need to apply the two patches in sequence one over the other?, Hopefully this will be eclipsed by HIVE-4838, which has unit tests, but I always thing unit tests are a fair request. Will do :), Hey, sorry for being unclear. So this patch, HIVE-4845 fixes the immediate correctness issue as you requested over in [HIVE-4838|https://issues.apache.org/jira/browse/HIVE-4838?focusedCommentId=13707205&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13707205] where as HIVE-4838 is the refactor of the MapJoin code to make it more readable and testable., I would like to apply this first. Let's correct the immediate issue (with this patch). Then follow up with the optimization patch., Updated patch includes unit tests including the tests I used to find this issue originally., I meant your previous two patches on this same jira. (the second one looked like is on top of the first one, instead of including it). But, now that you have regenerated patch, the new one supercedes earlier two., Testing now. See you tomorrow :) , [~ashutoshc] Yeah you are right. Sorry about that.

[~appodictic] Sounds good and thanks!, Marking patch available as I am testing patch available testing for HIVE-4862, 

{color:green}Overall:{color}: +1 all checks pass

{color:green}SUCCESS:{color} +1 all tests passed

Executing org.apache.hive.ptest.execution.CleanupPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase, The comment from "Hive QA" was from my experimental pre-commit build. Results can be seen here: https://builds.apache.org/user/brock/my-views/view/hive/job/Hive-Precommit-trunk-hadoop1-ptest/3/testReport/, Committed to trunk. Thanks, Brock!, SUCCESS: Integrated in Hive-trunk-hadoop1-ptest #87 (See [https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/87/])
HIVE-4845 : Correctness issue with MapJoins using the null safe operator (Brock Noland via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1503818)
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinDoubleKeys.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinObjectKey.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence/TestMapJoinKeys.java
* /hive/trunk/ql/src/test/results/clientpositive/join_nullsafe.q.out
, FAILURE: Integrated in Hive-trunk-hadoop2-ptest #17 (See [https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/17/])
HIVE-4845 : Correctness issue with MapJoins using the null safe operator (Brock Noland via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1503818)
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinDoubleKeys.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinObjectKey.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence/TestMapJoinKeys.java
* /hive/trunk/ql/src/test/results/clientpositive/join_nullsafe.q.out
, ABORTED: Integrated in Hive-trunk-hadoop2 #291 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/291/])
HIVE-4845 : Correctness issue with MapJoins using the null safe operator (Brock Noland via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1503818)
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinDoubleKeys.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinObjectKey.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence/TestMapJoinKeys.java
* /hive/trunk/ql/src/test/results/clientpositive/join_nullsafe.q.out
, ABORTED: Integrated in Hive-trunk-h0.21 #2202 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2202/])
HIVE-4845 : Correctness issue with MapJoins using the null safe operator (Brock Noland via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1503818)
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinDoubleKeys.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinObjectKey.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence/TestMapJoinKeys.java
* /hive/trunk/ql/src/test/results/clientpositive/join_nullsafe.q.out
, FAILURE: Integrated in Hive-trunk-h0.21 #2203 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2203/])
HIVE-4845 : Correctness issue with MapJoins using the null safe operator (Brock Noland via Ashutosh Chauhan) (hashutosh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1503818)
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinDoubleKeys.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/MapJoinObjectKey.java
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence
* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/persistence/TestMapJoinKeys.java
* /hive/trunk/ql/src/test/results/clientpositive/join_nullsafe.q.out
, This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.]