[cc: [~spena], 

{color:green}Overall{color}: +1 all checks pass

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12704490/HIVE-9957.1.patch

{color:green}SUCCESS:{color} +1 7764 tests passed

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3038/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3038/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3038/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12704490 - PreCommit-HIVE-TRUNK-Build, +1 , welcome fix, Committed to trunk. Thanks, Sergio., Thanks all for quick resolution.


, Since this is broken in 1.1.0 and fixed in 1.2.0, should it be documented in the wiki?

* [Getting Started -- Requirements | https://cwiki.apache.org/confluence/display/Hive/GettingStarted#GettingStarted-Requirements]
* [Installing Hive | https://cwiki.apache.org/confluence/display/Hive/AdminManual+Installation#AdminManualInstallation-InstallingHive], [~spena] Thanks for fix! However, there is one improvement that can be made in this fix. Exceptions are expensive, so rather than throwing them every time, we can use this design pattern followed for some other functions in Hadoop23Shims - 

{code}
  protected static final Method accessMethod;
  protected static final Method getPasswordMethod;

  static {
    Method m = null;
    try {
      m = FileSystem.class.getMethod("access", Path.class, FsAction.class);
    } catch (NoSuchMethodException err) {
      // This version of Hadoop does not support FileSystem.access().
    }
    accessMethod = m;

    try {
      m = Configuration.class.getMethod("getPassword", String.class);
    } catch (NoSuchMethodException err) {
      // This version of Hadoop does not support getPassword(), just retrieve password from conf.
      m = null;
    }
    getPasswordMethod = m;
  }
{code}

Would you be able to make that improvement ? We can use a new jira for that.
, [~leftylev] Yes, I think it would be useful to document it under those two sections. [~spena] Do you know the hadoop version that introduced this api ? (we should list that its broken for all 2.x versions earlier than that)., Yes, I will use this way to detect the method incompatibility. I see that using it as static, this try/catch will be called only once.
Thanks [~thejas]

[~leftylev] The hadoop version that introduces encryption is 2.6.0., Added a TODOC1.2 label.

Does this only apply to Hive 1.1.0?, Yes. Encryption was merged on 1.1.0., Thanks to change requirements (https://cwiki.apache.org/confluence/display/Hive/GettingStarted#GettingStarted-Requirements) to precise that Hive 1.1.0 runs only with Hadoop 2.6.x
Thanks to change download page (http://hive.apache.org/downloads.html):
> 8 March 2015: release 1.1.0 available
> This release works with Hadoop 1.x.y, 2.x.y
> You can look at the complete JIRA change log for this release.
To
> 8 March 2015: release 1.1.0 available
> This release works only with Hadoop 2.6.y
> You can look at the complete JIRA change log for this release.
, Hi guys,
I am new to hadoop and finally installed hive but while loading the data i am getting the same error as above and i have noticed from you guys that we need to apply patch ...... So Please guide me how to apply this above patch file ....
Thanks , The Hive wiki has a section explaining how to apply a patch in the "How to Contribute" doc:

* [How To Contribute -- Applying a Patch | https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-ApplyingaPatch], [~subhashmv] If you don't want to build hive , you can also use Hive 1.0.0 (unless you are looking for some specific hive 1.1.0 feature).

, Actually i installed hive 1.0 version and hadoop 2.5 version it is saying that it is incompatible with the software so please tell me how to apply the patch i can't understand in the link provided by Lefty, [~subhashmv] What error do you get with 1.0 and hadoop 2.5 ? I wasn't aware of such an issue.

To apply the patch, you need to checkout the code, apply the patch and build new hive package (tar.gz).
Additional build instructions are here -https://cwiki.apache.org/confluence/display/Hive/HiveDeveloperFAQ, This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.]