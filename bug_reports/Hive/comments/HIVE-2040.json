[change to use a do{}while(); just in case the user set an incorrect retry number., +1, Committed. Thanks Yongqiang]