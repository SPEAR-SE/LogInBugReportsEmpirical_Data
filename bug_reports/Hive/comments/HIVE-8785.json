[[~hagleitn] If time permits, I would like to include this in hive 0.14 .
, HIVE-8785.2.patch - test fixes
, With the change this is what query output looks like -

{code}
0: jdbc:hive2://node-1.example.com:10000/> select count(*) from tab1 ;
INFO  : Number of reduce tasks determined at compile time: 1
INFO  : In order to change the average load for a reducer (in bytes):
INFO  :   set hive.exec.reducers.bytes.per.reducer=<number>
INFO  : In order to limit the maximum number of reducers:
INFO  :   set hive.exec.reducers.max=<number>
INFO  : In order to set a constant number of reducers:
INFO  :   set mapreduce.job.reduces=<number>
WARN  : Hadoop command-line option parsing not performed. Implement the Tool interface and execute your application with ToolRunner to remedy this.
INFO  : number of splits:1
INFO  : Submitting tokens for job: job_1415322996593_0016
INFO  : Kind: HDFS_DELEGATION_TOKEN, Service: 240.0.0.10:8020, Ident: (HDFS_DELEGATION_TOKEN token 18 for hadoopqe)
INFO  : The url to track the job: http://node-1.example.com:8088/proxy/application_1415322996593_0016/
INFO  : Starting Job = job_1415322996593_0016, Tracking URL = http://node-1.example.com:8088/proxy/application_1415322996593_0016/
INFO  : Kill Command = /usr/hdp/2.2.0.0-1799/hadoop/bin/hadoop job  -kill job_1415322996593_0016
INFO  : Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1
INFO  : 2014-11-07 18:45:07,240 Stage-1 map = 0%,  reduce = 0%
{code}
, HIVE-8785.3.patch - fixed a comment, Left a couple of minor comments on the RB. Would like to retain the date time fields at least for the logging, mostly because on the client we have no idea about the lag before it appears (class name is also alright, but not necessary).

I tested this and found out that the beeline go to stderr and the query output goes to stdout.

{code}
beeline -u jdbc:hive2://localhost:10002 -f query.sql > /dev/null
{code}

works very well. 

LGTM, +1 tests pending., HIVE-8785.4.patch - addressing review comments from Gopal. Added comments in review board about logging format suggestions.

, Two .4 patches?

I'm guessing the only real diff in [~hagleitn]'s patch is 

{code}
+          && conf.getBoolVar(conf, HiveConf.ConfVars.TEZ_EXEC_SUMMARY)) 
{code}

in TezTask to prevent printing counter summaries for each query?, Yup, race condition! Serializing now -
HIVE-8785.5.patch - includes Gunther's 1 line change to TezTask logging
, Lol. Thanks [~thejas], Yes - that's my only change., 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12680353/HIVE-8785.3.patch

{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 6672 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert_nonacid_from_acid
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1701/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1701/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1701/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12680353 - PreCommit-HIVE-TRUNK-Build, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12680378/HIVE-8785.5.patch

{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 6672 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert_nonacid_from_acid
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1702/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1702/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1702/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12680378 - PreCommit-HIVE-TRUNK-Build, Test failures are unrelated.
, Patch committed to trunk and 0.14 branch.
Thanks for the reviews [~gopalv] [~hagleitn], Doc note:  This changes the description of *hive.server2.logging.operation.enabled* (created by HIVE-4629) and adds *hive.server2.logging.operation.verbose* in HiveConf.java, so they need to be documented in the HiveServer2 section of Configuration Properties.

* [Configuration Properties -- HiveServer2 | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-HiveServer2], This has been fixed in 0.14 release. Please open new jira if you see any issues.
, Doc done:  *hive.server2.logging.operation.enabled* and *hive.server2.logging.operation.verbose* are documented in the wiki.

* [hive.server2.logging.operation.enabled | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.logging.operation.enabled]
* [hive.server2.logging.operation.verbose | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.logging.operation.verbose]

Some guidance about how to use them could be added to one of the HiveServer2 docs (probably Setting Up HS2), with links to & from the logging section in Getting Started.  If that is not needed, the TODOC14 label can be removed.

* [Setting Up HiveServer2 | https://cwiki.apache.org/confluence/display/Hive/Setting+Up+HiveServer2]
* [HiveServer2 Clients | https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients]
* [Getting Started -- Error Logs | https://cwiki.apache.org/confluence/display/Hive/GettingStarted#GettingStarted-ErrorLogs], Will this get more documentation (see previous comment) or can we remove the TODOC14 label now?]