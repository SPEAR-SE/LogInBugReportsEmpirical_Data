[Here's what the output of DESCRIBE EXTENDED looks like after it gets processed with QTestUtil.checkCliDriverResults:

{noformat}
PREHOOK: query: desc extended tbl2
PREHOOK: type: DESCTABLE
POSTHOOK: query: desc extended tbl2
POSTHOOK: type: DESCTABLE
col	string	
p	string	
	 	 
#### A masked pattern was here ####
{noformat}

And here's what it looked like before diff masking:

{noformat}
col	string	
p	string	
	 	 
Detailed Table Information	Table(tableName:tbl2, dbName:default, owner:carl, createTime:1339652050, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[FieldSchema(name:col, type:string, comment:null), FieldSchema(name:p, type:string, comment:null)], location:pfile:/Users/carl/Work/repos/hive-test/build/ql/test/data/warehouse/tbl2, inputFormat:org.apache.hadoop.mapred.TextInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe, parameters:{serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}), partitionKeys:[FieldSchema(name:p, type:string, comment:null)], parameters:{last_modified_by=carl, last_modified_time=1339652051, PROTECT_MODE=NO_DROP_CASCADE, transient_lastDdlTime=1339652051}, viewOriginalText:null, viewExpandedText:null, tableType:MANAGED_TABLE)
{noformat}

The problem with this is that many tests depend on DESC EXTENDED to verify the contents of the StorageDescriptor, view properties, tableType, etc, etc, and all of that information is currently getting masked out., @Carl @JQ HIVE-3148 test case needs to use DESCRIBE FORMATTED to show the partition Locations. But the original QTestUtil masks out the Location related lines. I changed QTestUtil in HIVE-3148's patch to allow transforming output before result is checked. This could be generalized to support other test cases. ]