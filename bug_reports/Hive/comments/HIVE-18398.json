[We are also hitting the same issue on Hive 1.2.2

Repro steps:

1. Create a table like below:

 
{code:java}
CREATE external TABLE `sample5`(`id1` int,`id2` int) ROW FORMAT DELIMITED FIELDS TERMINATED BY ',' ESCAPED BY '\\'
LOCATION 
'hdfs://localhost:9000/user/hive/warehouse/sample';
{code}
2. Get the table schema

 

 
{code:java}
show create table sample5
{code}
Result: 

 

 
{code:java}
+-----------------------------------------------------------------+--+
| createtab_stmt |
+-----------------------------------------------------------------+--+
| CREATE EXTERNAL TABLE `sample5`( |
| `id1` int, |
| `id2` int) |
| ROW FORMAT DELIMITED |
| FIELDS TERMINATED BY ',' |
| WITH SERDEPROPERTIES ( |
| 'escape.delim'='\\') |
| STORED AS INPUTFORMAT |
| 'org.apache.hadoop.mapred.TextInputFormat' |
| OUTPUTFORMAT |
| 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' |
| LOCATION |
| 'hdfs://localhost:9000/user/hive/warehouse/sample' |
| TBLPROPERTIES ( |
| 'COLUMN_STATS_ACCURATE'='false', |
| 'numFiles'='0', |
| 'numRows'='-1', |
| 'rawDataSize'='-1', |
| 'totalSize'='0', |
| 'transient_lastDdlTime'='1515808983') |
+-----------------------------------------------------------------+--+
{code}
Using the above create table command throws the same exception explained above.

 

 

Some more observations:
 # The issue doesnt happen in hive 2.3
 # However the show table command outputs the below result

{code:java}
+----------------------------------------------------+
| createtab_stmt |
+----------------------------------------------------+
| CREATE EXTERNAL TABLE `sample5`( |
| `id1` int, |
| `id2` int) |
| ROW FORMAT SERDE |
| 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe' |
| WITH SERDEPROPERTIES ( |
| 'escape.delim'='\\', |
| 'field.delim'=',', |
| 'serialization.format'=',') |
| STORED AS INPUTFORMAT |
| 'org.apache.hadoop.mapred.TextInputFormat' |
| OUTPUTFORMAT |
| 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' |
| LOCATION |
| 'hdfs://localhost:9000/user/hive/warehouse/sample' |
| TBLPROPERTIES ( |
| 'transient_lastDdlTime'='1515807845') |
+----------------------------------------------------+
{code}

 

 , Looks like this behavior is different in Hive 2.X version due to fix done in https://issues.apache.org/jira/browse/HIVE-12506. That Jira says that fix was committed to branch 2.1, 2.0.0 and 1.3. I am not sure if 1.3 ever went out.

Anyhow As per [https://cwiki.apache.org/confluence/display/Hive/HowToContribute#HowToContribute-UnderstandingHiveBranches]   and [https://cwiki.apache.org/confluence/display/Hive/Home#Home-HiveVersionsandBranches] what I understand is that branch-1 acts as source of all 1.X releases now. branch-1 or branch-1.X doesn't contain that commit.

 

So I think commit for above Jira

[https://github.com/apache/hive/commit/ed9736080aa960ad7d7c2af58d692e6b4f9d6df5]

would need to be back ported to latest hive 1.X branch (branch-1)]