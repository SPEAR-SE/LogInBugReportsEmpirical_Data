[<a href=https://issues.apache.org/jira/browse/HIVE-3025?focusedCommentId=13422589&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13422589>Link</a> to comment, There is one issue that is not resolved. For the archive.q test, the golden results with 0.20 hadoop seem incorrect.

The last queries are:
SELECT SUM(hash(col)) FROM (SELECT transform(*) using 'tr "\t" "_"' AS col
FROM (SELECT * FROM old_name WHERE ds='1') subq1) subq2;
ALTER TABLE old_name RENAME TO new_name;
SELECT SUM(hash(col)) FROM (SELECT transform(*) using 'tr "\t" "_"' AS col
FROM (SELECT * FROM new_name WHERE ds='1') subq1) subq2;

The select queries seem to produce different results in 20. The first one produces 48656137. But, after rename of the table, it produces NULL. This doesn't make sense to me. With my changes for 1.0, I see the proper results of 48656137 in both cases. It would be great if someone can explain to me why we expect NULL in the case of 20.

Thanks,
Vikram, This resolves the issues in 1.0. The renaming of an archived table does not work in case of 20. This patch does not address that issue., Missed the .out file for the new test., build file change reverted., @Vikram,
Can you create either a phabricator or review board entry of your patch ?, Vikram,
I left some comments on https://reviews.apache.org/r/6533/ 
Also patch needs to be rebased., Addressed Ashutosh's comments., +1 will commit if tests pass., Committed to trunk. Thanks, Vikram!, Integrated in Hive-trunk-h0.21 #1642 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1642/])
    HIVE-3338 : Archives broken for hadoop 1.0 (Vikram Dixit via Ashutosh Chauhan) (Revision 1379908)

     Result = FAILURE
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1379908
Files : 
* /hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
* /hive/trunk/conf/hive-default.xml.template
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ArchiveUtils.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java
* /hive/trunk/ql/src/test/queries/clientpositive/archive.q
* /hive/trunk/ql/src/test/queries/clientpositive/archive_excludeHadoop20.q
* /hive/trunk/ql/src/test/results/clientpositive/archive.q.out
* /hive/trunk/ql/src/test/results/clientpositive/archive_excludeHadoop20.q.out
* /hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java
* /hive/trunk/shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java
* /hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java
, Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])
    HIVE-3338 : Archives broken for hadoop 1.0 (Vikram Dixit via Ashutosh Chauhan) (Revision 1379908)

     Result = ABORTED
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1379908
Files : 
* /hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java
* /hive/trunk/conf/hive-default.xml.template
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ArchiveUtils.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java
* /hive/trunk/ql/src/test/queries/clientpositive/archive.q
* /hive/trunk/ql/src/test/queries/clientpositive/archive_excludeHadoop20.q
* /hive/trunk/ql/src/test/results/clientpositive/archive.q.out
* /hive/trunk/ql/src/test/results/clientpositive/archive_excludeHadoop20.q.out
* /hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java
* /hive/trunk/shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java
* /hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java
, This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira., This removed the configuration parameter *hive.archive.har.parentdir.settable* in Hive 0.10.0.

The wiki has been updated (at last):

* [hive.archive.har.parentdir.settable | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.archive.har.parentdir.settable]]