[would one still be able to get it via "set javax.jdo.option.ConnectionPassword"?, Right, should check get single conf case too, thanks for the review! Update the patch., Can you add some message if it's restricted for single-property case? Otherwise +1, 1. Add exception when get restricted conf, like set restricted conf does.
2. add javax.jdo.option.ConnectionPassword to RESTRICTED_LIST by default

, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12685240/HIVE-9013.3.patch

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 6695 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_decimal_aggregate
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1967/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1967/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1967/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12685240 - PreCommit-HIVE-TRUNK-Build, Thanks for creating the jira and your patch [~decster]!

I think we should make the solution for this consistent with what was done in HIVE-10508.  The problem is same. I think the same rules should be used in both places.

Another comment I have is that we should distinguish between settings that user should not be allowed to change from client and ones that user should be allowed to read.
For debugging purposes, it is helpful to read config values such as hive.security.authenticator.manager,hive.security.authorization.manager,hive.users.in.admin.role .
, Hi [~decster], please let me know if you're planning on updating this jira per [~thejas]'s suggestions above - if you don't mind, I can help update this patch to get it in. I think this will be a very useful patch to have in.

Thanks!, Sorry for the late, update the patch, changes:
# add a config hive.conf.hidden.list, like hive.conf.restricted.list
# dumpOptions and dumpOptions and dumpOption will filter out hidden configs
# also add hive.conf.hidden.list to hive.conf.restricted.list, maybe not necessary, cause conf is not reinitialized. 

, Thanks for updated patch [~decster]!
Can you please update it in review board as well ?
, Oh sorry, just updated review board, same RB link, thanks., Hi Binglin, thanks for your update. I think we could use two more minor changes:

a) It'd be good to have a .q test added to this that simply sets one hidden variable and non-hidden variable, and then runs a set (to show all) and a set on each of these individual variables (to show individual behaviour) - that way, we'll have a .q.out test that we can check against in the future for regressions.
b) There's another jira, HIVE-10518, which introduced behaviour to strip out password details from a jobconf before passing it on. Could you please also make a change, so that these two are integrated together better? i.e. The goal behaviour for Utilities.stripHivePasswordDetails after your patch should not be Utilities.stripHivePasswordDetails but Utilities.stripRestrictedConfigurations, thereby stripping all other config params that match your new enum as well.

Thanks!, I agree with comments from [~sushanth] . Please let us know if you have any questions or need any further suggestions.
, Thanks for the review Sushanth and Thejas.

bq. The goal behaviour for Utilities.stripHivePasswordDetails after your patch should not be Utilities.stripHivePasswordDetails but Utilities.stripRestrictedConfigurations

Did you mean Utilities.stripHiddenConfigurations?, [~decster] Yes, I think he meant to say Utilities.stripHiddenConfigurations not Utilities.stripRestrictedConfigurations.

Also, for testing "set " command case, I think a java unit test would be better than a .q file based one, as .q.out file would have many entries including some that depend on local environment, and might end up needing additional logic for masking/ignoring those during comparison. , 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12768057/HIVE-9013.4.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 5 failed/errored test(s), 9700 tests executed
*Failed tests:*
{noformat}
TestCustomAuthentication - did not produce a TEST-*.xml file
org.apache.hadoop.hive.ql.io.orc.TestColumnStatistics.testHasNull
org.apache.hadoop.hive.ql.io.orc.TestJsonFileDump.testJsonDump
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
org.apache.hive.jdbc.TestSSL.testSSLVersion
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5746/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5746/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5746/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12768057 - PreCommit-HIVE-TRUNK-Build, Update patch, changes:
# change list to map
# change stripHivePasswordDetails to stripHiddenConfigurations
# add 2 tests to cover changes in HiveConf and SetProcessor
, Hi [~decster], thanks for the update and the patch.

I'd ask for one last update if you don't mind (or we can do that as a separate patch):

It's better to have HiveConf.stripHiddenConfigurations(Configuration conf) as you have introduced to be static, I think. That way, it avoids one notion of confusion later on in the code (as in your patch) where we have to call it like this:

{code}
    conf.stripHiddenConfigurations(job);
{code}

In that scenario, it becomes unclear if we're stripping it from conf, or from job, and the truth of the matter is that we're stripping it from job. If we made that call static, we can call HiveConf.stripHiddenConfigurations(job), which would be much clearer.

I think, with that, I'm +1 on this. Thanks for adding in tests. Normally, for ql changes, such as with set behaviour, we make changes to .q files, which is easier to develop, but having a proper junit test as you have done is good too. :), 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12768254/HIVE-9013.5.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5762/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5762/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5762/

Messages:
{noformat}
**** This message was trimmed, see log for full details ****
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseConnection.java:[68,13] error: cannot find symbol
[ERROR] interface HBaseConnection
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseConnection.java:[84,2] error: cannot find symbol
[ERROR] interface HBaseConnection
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseConnection.java:[94,2] error: cannot find symbol
[ERROR] interface HBaseConnection
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[27,30] error: package org.apache.hadoop.hbase does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[28,30] error: package org.apache.hadoop.hbase does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[29,30] error: package org.apache.hadoop.hbase does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[30,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[31,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[32,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[33,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[34,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[35,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[36,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[37,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[38,37] error: package org.apache.hadoop.hbase.filter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[39,37] error: package org.apache.hadoop.hbase.filter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[40,37] error: package org.apache.hadoop.hbase.filter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[41,37] error: package org.apache.hadoop.hbase.filter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/PartitionKeyComparator.java:[30,37] error: package org.apache.hadoop.hbase.filter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/PartitionKeyComparator.java:[45,44] error: cannot find symbol
[ERROR] class ByteArrayComparable
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseConnection.java:[22,37] error: package org.apache.hadoop.hbase.client does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[749,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[810,55] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[2006,10] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[2025,19] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[2030,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[2029,19] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[2034,46] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[2034,19] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[2039,58] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[2038,19] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseConnection.java:[68,13] error: cannot find symbol
[ERROR] interface HBaseConnection
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseConnection.java:[84,2] error: cannot find symbol
[ERROR] interface HBaseConnection
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseConnection.java:[94,2] error: cannot find symbol
[ERROR] interface HBaseConnection
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/PartitionKeyComparator.java:[179,2] error: method does not override or implement a method from a supertype
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/PartitionKeyComparator.java:[223,2] error: method does not override or implement a method from a supertype
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[210,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[354,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[356,19] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[356,42] error: package CompareFilter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[356,64] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[358,13] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[362,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[420,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[422,19] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[422,42] error: package CompareFilter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[422,64] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[424,13] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[428,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[512,10] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[512,35] error: unexpected type
[ERROR] 
[ERROR] E extends Object declared in class ArrayList
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[515,7] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[515,21] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[519,5] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[520,5] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[580,9] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[580,34] error: unexpected type
[ERROR] 
[ERROR] E extends Object declared in class ArrayList
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[586,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[586,18] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[591,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[600,9] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[600,34] error: unexpected type
[ERROR] 
[ERROR] E extends Object declared in class ArrayList
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[614,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[614,18] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[624,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[729,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[731,19] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[731,42] error: package CompareFilter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[812,13] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[818,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[867,9] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[867,34] error: unexpected type
[ERROR] 
[ERROR] E extends Object declared in class ArrayList
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[868,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[871,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[871,18] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[876,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[916,13] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[918,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1055,9] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1055,34] error: unexpected type
[ERROR] 
[ERROR] E extends Object declared in class ArrayList
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1070,8] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1070,22] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1082,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1104,8] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1104,22] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1111,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1127,12] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1127,26] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1136,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1161,13] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1164,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1194,15] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1196,8] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1244,9] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1244,34] error: unexpected type
[ERROR] 
[ERROR] E extends Object declared in class ArrayList
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1245,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1249,6] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1249,18] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1253,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1286,4] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1288,19] error: cannot find symbol
[ERROR] class HBaseReadWrite
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1288,42] error: package CompareFilter does not exist
[ERROR] /data/hive-ptest/working/apache-github-source-source/metastore/src/java/org/apache/hadoop/hive/metastore/hbase/HBaseReadWrite.java:[1288,64] error: cannot find symbol
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :hive-metastore
+ exit 1
'
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12768254 - PreCommit-HIVE-TRUNK-Build, Hi Sushanth, thanks for the review.
bq. If we made that call static, we can call HiveConf.stripHiddenConfigurations(job), which would be much clearer.
HiveConf instance contains hiddenList information, so make HiveConf.stripHiddenConfigurations static would add another parameter I think, is that OK?, Hi Sushanth, thanks for the review.
bq. If we made that call static, we can call HiveConf.stripHiddenConfigurations(job), which would be much clearer.
HiveConf instance contains hiddenList information, so make HiveConf.stripHiddenConfigurations static would add another parameter I think, is that OK?, bq. HiveConf instance contains hiddenList information, so make HiveConf.stripHiddenConfigurations static would add another parameter I think, is that OK?
I agree, leaving it the way it is, is better. The operation is being performed on a JobConf object, and not a HiveConf object. HiveConf already has this variable initialized. 
, Uploading HIVE-9013.5.patch again to kick off tests again. Looks like master was broken for sometime.

, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12768485/HIVE-9013.5.patch

{color:green}SUCCESS:{color} +1 due to 2 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 5 failed/errored test(s), 9688 tests executed
*Failed tests:*
{noformat}
TestMiniTezCliDriver-auto_join30.q-vector_data_types.q-filter_join_breaktask.q-and-12-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.ql.io.orc.TestColumnStatistics.testHasNull
org.apache.hadoop.hive.ql.io.orc.TestJsonFileDump.testJsonDump
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
org.apache.hive.jdbc.TestSSL.testSSLVersion
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5776/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5776/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5776/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12768485 - PreCommit-HIVE-TRUNK-Build, Ah, I see the issue with making it static in terms of adding another parameter there. If the hidden configs were not configurable themselves, it would be possible to make it static, but not otherwise. I'm okay with the patch as-is, +1. I'll go ahead and commit this.

Thanks, Binglin and Thejas!, Committed to master., Attaching branch-1 version of patch., Committed to branch-1 as well., Attaching branch-1.2 version of patch as well, committed there too., The branch-1.2 version of this patch incorporates HIVE-11670's fix as well., Doc note:  This adds configuration parameter *hive.conf.hidden.list* to HiveConf.java, so it needs to be documented in the wiki for releases 1.2.2 and 1.3.0.

* [Configuration Properties -- Restricted List and Whitelist | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-RestrictedListandWhitelist] (might want a new section title)
* [Configuration Properties -- hive.security.authorization.sqlstd.confwhitelist | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.security.authorization.sqlstd.confwhitelist]
The whitelist description ends with this sentence:  "Note that the hive.conf.restricted.list checks are still enforced after the white list check."  Should *hive.conf.hidden.list* be added?, Thanks for the remind, [~leftylev]
bq. Configuration Properties â€“ Restricted List and Whitelist (might want a new section title)
Updated
bq. Should hive.conf.hidden.list be added?
Hidden list and whitelist are not directly related, so I don't think so.
, The doc looks good, thanks [~decster]!, Here are the new doc links:

* [Configuration Properties -- Restricted/Hidden List and Whitelist | https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=27842758#ConfigurationProperties-Restricted/HiddenListandWhitelist]
* [Configuration Properties -- hive.conf.hidden.list | https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=27842758#ConfigurationProperties-hive.conf.hidden.list], Thanks for this fix folks! We also found that when we use the {{!connect}} command with a password, the password gets logged to ~/.beeline/history. I've filed https://issues.apache.org/jira/browse/HIVE-13091 . Could you please suggest how to fix that leak over on that JIRA?]