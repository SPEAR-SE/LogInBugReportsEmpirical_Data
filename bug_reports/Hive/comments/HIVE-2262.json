[That looks like a possible solution to me. I would like to see what others think as well. Yu, can you generate a svn friendly patch. That will be easier to review., This is no longer reproducible on trunk. Feel free to reopen if there is some other variant which can produce this.]