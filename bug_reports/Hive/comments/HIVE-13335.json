[on 2nd thought it's better to keep this to safeguard against extremely large number of Hive transactions to abort (and keep DB undo log reasonable) but increase the batch size so that we run fewer queries, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12855248/HIVE-13335.01.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 8 failed/errored test(s), 10256 tests executed
*Failed tests:*
{noformat}
TestCommandProcessorFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=271)
TestDbTxnManager - did not produce a TEST-*.xml file (likely timed out) (batchId=271)
TestDummyTxnManager - did not produce a TEST-*.xml file (likely timed out) (batchId=271)
TestHiveInputSplitComparator - did not produce a TEST-*.xml file (likely timed out) (batchId=271)
TestIndexType - did not produce a TEST-*.xml file (likely timed out) (batchId=271)
TestSplitFilter - did not produce a TEST-*.xml file (likely timed out) (batchId=271)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_table] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/3853/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/3853/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-3853/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12855248 - PreCommit-HIVE-Build, no related failures
[~wzheng], could you review please?, +1. May need to edit the jira subject to reflect the change, committed to master https://github.com/apache/hive/commit/6dace60af4b6ab4d5200310a0ad94c4530c2bec3
thanks Wei for the review, [~ekoifman], the commit to master omitted the JIRA number.  Please update errata.txt for commit 6dace60af4b6ab4d5200310a0ad94c4530c2bec3.  Thanks.

Example of updating errata.txt:  HIVE-11876.]