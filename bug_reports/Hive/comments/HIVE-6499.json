[Attaching patch., Created review board link : https://reviews.apache.org/r/18456/

[~thejas], could you please review this?

[~owen.omalley], this is a bug that you pinged me about, if you could test that it works for your usecase as well, that'd be great., +1, canceling patch and re-marking as available to make the precommit tests pick it up, now that it's running again., HIVE-6499.patch - uploading a copy of the patch, in case the pre-commit tests have marked earlier file as processed., 

{color:red}Overall{color}: -1 no tests executed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12634158/HIVE-6499.patch

Test results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1767/testReport
Console output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1767/console

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command 'bash /data/hive-ptest/working/scratch/source-prep.sh' failed with exit status 1 and output '+ [[ -n '' ]]
+ export 'ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m '
+ ANT_OPTS='-Xmx1g -XX:MaxPermSize=256m '
+ export 'M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'
+ M2_OPTS='-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-Build-1767/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n '' ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted 'contrib/src/test/results/clientnegative/udtf_explode2.q.out'
Reverted 'contrib/src/test/results/clientnegative/case_with_row_sequence.q.out'
Reverted 'contrib/src/test/results/clientnegative/invalid_row_sequence.q.out'
Reverted 'contrib/src/test/results/clientpositive/udaf_example_min_n.q.out'
Reverted 'contrib/src/test/results/clientpositive/udaf_example_max_n.q.out'
Reverted 'contrib/src/test/results/clientpositive/lateral_view_explode2.q.out'
Reverted 'contrib/src/test/results/clientpositive/udaf_example_avg.q.out'
Reverted 'contrib/src/test/results/clientpositive/udf_example_arraymapstruct.q.out'
Reverted 'contrib/src/test/results/clientpositive/udaf_example_group_concat.q.out'
Reverted 'contrib/src/test/results/clientpositive/udaf_example_min.q.out'
Reverted 'contrib/src/test/results/clientpositive/udf_row_sequence.q.out'
Reverted 'contrib/src/test/results/clientpositive/udaf_example_max.q.out'
Reverted 'contrib/src/test/results/clientpositive/udf_example_add.q.out'
Reverted 'contrib/src/test/results/clientpositive/udf_example_format.q.out'
Reverted 'contrib/src/test/results/clientpositive/udtf_output_on_close.q.out'
Reverted 'contrib/src/test/results/clientpositive/udtf_explode2.q.out'
Reverted 'contrib/src/test/results/clientpositive/dboutput.q.out'
Reverted 'ql/src/test/results/clientnegative/udf_local_resource.q.out'
Reverted 'ql/src/test/results/clientnegative/udf_function_does_not_implement_udf.q.out'
Reverted 'ql/src/test/results/clientnegative/create_unknown_udf_udaf.q.out'
Reverted 'ql/src/test/results/clientnegative/create_function_nonudf_class.q.out'
Reverted 'ql/src/test/results/clientnegative/create_function_nonexistent_db.q.out'
Reverted 'ql/src/test/results/clientnegative/udf_test_error_reduce.q.out'
Reverted 'ql/src/test/results/clientnegative/drop_native_udf.q.out'
Reverted 'ql/src/test/results/clientnegative/create_udaf_failure.q.out'
Reverted 'ql/src/test/results/clientnegative/udf_nonexistent_resource.q.out'
Reverted 'ql/src/test/results/clientnegative/create_unknown_genericudf.q.out'
Reverted 'ql/src/test/results/clientnegative/cluster_tasklog_retrieval.q.out'
Reverted 'ql/src/test/results/clientnegative/udf_test_error.q.out'
Reverted 'ql/src/test/results/clientnegative/create_function_nonexistent_class.q.out'
Reverted 'ql/src/test/results/clientpositive/create_func1.q.out'
Reverted 'ql/src/test/results/clientpositive/macro.q.out'
Reverted 'ql/src/test/results/clientpositive/create_view.q.out'
Reverted 'ql/src/test/results/clientpositive/udaf_sum_list.q.out'
Reverted 'ql/src/test/results/clientpositive/create_genericudaf.q.out'
Reverted 'ql/src/test/results/clientpositive/udf_logic_java_boolean.q.out'
Reverted 'ql/src/test/results/clientpositive/udf_compare_java_string.q.out'
Reverted 'ql/src/test/results/clientpositive/udf_testlength.q.out'
Reverted 'ql/src/test/results/clientpositive/udf_testlength2.q.out'
Reverted 'ql/src/test/results/clientpositive/drop_udf.q.out'
Reverted 'ql/src/test/results/clientpositive/autogen_colalias.q.out'
Reverted 'ql/src/test/results/clientpositive/create_udaf.q.out'
Reverted 'ql/src/test/results/clientpositive/create_genericudf.q.out'
Reverted 'ql/src/test/results/clientpositive/ptf_register_tblfn.q.out'
Reverted 'ql/src/test/results/clientpositive/udf_context_aware.q.out'
Reverted 'ql/src/test/results/clientpositive/windowing_udaf2.q.out'
Reverted 'ql/src/test/results/clientpositive/compile_processor.q.out'
Reverted 'ql/src/test/results/clientpositive/udf_using.q.out'
Reverted 'ql/src/java/org/apache/hadoop/hive/ql/parse/FunctionSemanticAnalyzer.java'
Reverted 'ql/src/java/org/apache/hadoop/hive/ql/parse/MacroSemanticAnalyzer.java'
Reverted 'ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/Operation2Privilege.java'
++ awk '{print $2}'
++ egrep -v '^X|^Performing status on external'
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/storage-handlers/hbase/target hcatalog/server-extensions/target hcatalog/core/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target ql/src/test/results/clientnegative/authorization_create_macro1.q.out ql/src/test/results/clientnegative/authorization_create_func1.q.out ql/src/test/results/clientnegative/authorization_create_func2.q.out ql/src/test/results/clientpositive/authorization_create_func1.q.out ql/src/test/results/clientpositive/authorization_create_macro1.q.out ql/src/test/queries/clientnegative/authorization_create_macro1.q ql/src/test/queries/clientnegative/authorization_create_func1.q ql/src/test/queries/clientnegative/authorization_create_func2.q ql/src/test/queries/clientpositive/authorization_create_macro1.q ql/src/test/queries/clientpositive/authorization_create_func1.q
+ svn update

Fetching external item into 'hcatalog/src/test/e2e/harness'
External at revision 1577348.

At revision 1577348.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
'
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12634158, Looks like the patch needed to be updated after the changes in HIVE-3938. Regenerating., Updated patch to latest trunk., 

{color:red}Overall{color}: -1 no tests executed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12634599/HIVE-6499.2.patch

Test results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1795/testReport
Console output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1795/console

Messages:
{noformat}
**** This message was trimmed, see log for full details ****
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /data/hive-ptest/working/apache-svn-trunk-source/hwi/src/test/resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (setup-test-dirs) @ hive-hwi ---
[INFO] Executing tasks

main:
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/hwi/target/tmp
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/hwi/target/warehouse
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/hwi/target/tmp/conf
     [copy] Copying 5 files to /data/hive-ptest/working/apache-svn-trunk-source/hwi/target/tmp/conf
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ hive-hwi ---
[INFO] Compiling 2 source files to /data/hive-ptest/working/apache-svn-trunk-source/hwi/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.16:test (default-test) @ hive-hwi ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.2:jar (default-jar) @ hive-hwi ---
[INFO] Building jar: /data/hive-ptest/working/apache-svn-trunk-source/hwi/target/hive-hwi-0.14.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-site-plugin:3.3:attach-descriptor (attach-descriptor) @ hive-hwi ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ hive-hwi ---
[INFO] Installing /data/hive-ptest/working/apache-svn-trunk-source/hwi/target/hive-hwi-0.14.0-SNAPSHOT.jar to /data/hive-ptest/working/maven/org/apache/hive/hive-hwi/0.14.0-SNAPSHOT/hive-hwi-0.14.0-SNAPSHOT.jar
[INFO] Installing /data/hive-ptest/working/apache-svn-trunk-source/hwi/pom.xml to /data/hive-ptest/working/maven/org/apache/hive/hive-hwi/0.14.0-SNAPSHOT/hive-hwi-0.14.0-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive ODBC 0.14.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ hive-odbc ---
[INFO] Deleting /data/hive-ptest/working/apache-svn-trunk-source/odbc (includes = [datanucleus.log, derby.log], excludes = [])
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.5:process (default) @ hive-odbc ---
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (define-classpath) @ hive-odbc ---
[INFO] Executing tasks

main:
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (setup-test-dirs) @ hive-odbc ---
[INFO] Executing tasks

main:
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/odbc/target/tmp
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/odbc/target/warehouse
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/odbc/target/tmp/conf
     [copy] Copying 5 files to /data/hive-ptest/working/apache-svn-trunk-source/odbc/target/tmp/conf
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-site-plugin:3.3:attach-descriptor (attach-descriptor) @ hive-odbc ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ hive-odbc ---
[INFO] Installing /data/hive-ptest/working/apache-svn-trunk-source/odbc/pom.xml to /data/hive-ptest/working/maven/org/apache/hive/hive-odbc/0.14.0-SNAPSHOT/hive-odbc-0.14.0-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive Shims Aggregator 0.14.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ hive-shims-aggregator ---
[INFO] Deleting /data/hive-ptest/working/apache-svn-trunk-source/shims (includes = [datanucleus.log, derby.log], excludes = [])
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.5:process (default) @ hive-shims-aggregator ---
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (define-classpath) @ hive-shims-aggregator ---
[INFO] Executing tasks

main:
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (setup-test-dirs) @ hive-shims-aggregator ---
[INFO] Executing tasks

main:
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/shims/target/tmp
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/shims/target/warehouse
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/shims/target/tmp/conf
     [copy] Copying 5 files to /data/hive-ptest/working/apache-svn-trunk-source/shims/target/tmp/conf
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-site-plugin:3.3:attach-descriptor (attach-descriptor) @ hive-shims-aggregator ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ hive-shims-aggregator ---
[INFO] Installing /data/hive-ptest/working/apache-svn-trunk-source/shims/pom.xml to /data/hive-ptest/working/maven/org/apache/hive/hive-shims-aggregator/0.14.0-SNAPSHOT/hive-shims-aggregator-0.14.0-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive TestUtils 0.14.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ hive-testutils ---
[INFO] Deleting /data/hive-ptest/working/apache-svn-trunk-source/testutils (includes = [datanucleus.log, derby.log], excludes = [])
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.5:process (default) @ hive-testutils ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ hive-testutils ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /data/hive-ptest/working/apache-svn-trunk-source/testutils/src/main/resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (define-classpath) @ hive-testutils ---
[INFO] Executing tasks

main:
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ hive-testutils ---
[INFO] Compiling 2 source files to /data/hive-ptest/working/apache-svn-trunk-source/testutils/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ hive-testutils ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /data/hive-ptest/working/apache-svn-trunk-source/testutils/src/test/resources
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-antrun-plugin:1.7:run (setup-test-dirs) @ hive-testutils ---
[INFO] Executing tasks

main:
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/testutils/target/tmp
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/testutils/target/warehouse
    [mkdir] Created dir: /data/hive-ptest/working/apache-svn-trunk-source/testutils/target/tmp/conf
     [copy] Copying 5 files to /data/hive-ptest/working/apache-svn-trunk-source/testutils/target/tmp/conf
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ hive-testutils ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.16:test (default-test) @ hive-testutils ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.2:jar (default-jar) @ hive-testutils ---
[INFO] Building jar: /data/hive-ptest/working/apache-svn-trunk-source/testutils/target/hive-testutils-0.14.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-site-plugin:3.3:attach-descriptor (attach-descriptor) @ hive-testutils ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ hive-testutils ---
[INFO] Installing /data/hive-ptest/working/apache-svn-trunk-source/testutils/target/hive-testutils-0.14.0-SNAPSHOT.jar to /data/hive-ptest/working/maven/org/apache/hive/hive-testutils/0.14.0-SNAPSHOT/hive-testutils-0.14.0-SNAPSHOT.jar
[INFO] Installing /data/hive-ptest/working/apache-svn-trunk-source/testutils/pom.xml to /data/hive-ptest/working/maven/org/apache/hive/hive-testutils/0.14.0-SNAPSHOT/hive-testutils-0.14.0-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hive Packaging 0.14.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: http://repository.apache.org/snapshots/org/apache/hive/hcatalog/hive-hcatalog-hbase-storage-handler/0.14.0-SNAPSHOT/maven-metadata.xml
Downloading: http://repository.apache.org/snapshots/org/apache/hive/hcatalog/hive-hcatalog-hbase-storage-handler/0.14.0-SNAPSHOT/hive-hcatalog-hbase-storage-handler-0.14.0-SNAPSHOT.pom
[WARNING] The POM for org.apache.hive.hcatalog:hive-hcatalog-hbase-storage-handler:jar:0.14.0-SNAPSHOT is missing, no dependency information available
Downloading: http://repository.apache.org/snapshots/org/apache/hive/hcatalog/hive-hcatalog-hbase-storage-handler/0.14.0-SNAPSHOT/hive-hcatalog-hbase-storage-handler-0.14.0-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Hive .............................................. SUCCESS [9.127s]
[INFO] Hive Ant Utilities ................................ SUCCESS [5.951s]
[INFO] Hive Shims Common ................................. SUCCESS [3.471s]
[INFO] Hive Shims 0.20 ................................... SUCCESS [2.533s]
[INFO] Hive Shims Secure Common .......................... SUCCESS [4.117s]
[INFO] Hive Shims 0.20S .................................. SUCCESS [2.592s]
[INFO] Hive Shims 0.23 ................................... SUCCESS [7.958s]
[INFO] Hive Shims ........................................ SUCCESS [1.290s]
[INFO] Hive Common ....................................... SUCCESS [7.409s]
[INFO] Hive Serde ........................................ SUCCESS [10.438s]
[INFO] Hive Metastore .................................... SUCCESS [32.268s]
[INFO] Hive Query Language ............................... SUCCESS [1:21.803s]
[INFO] Hive Service ...................................... SUCCESS [7.569s]
[INFO] Hive JDBC ......................................... SUCCESS [2.978s]
[INFO] Hive Beeline ...................................... SUCCESS [2.881s]
[INFO] Hive CLI .......................................... SUCCESS [1.891s]
[INFO] Hive Contrib ...................................... SUCCESS [2.513s]
[INFO] Hive HBase Handler ................................ SUCCESS [2.736s]
[INFO] Hive HCatalog ..................................... SUCCESS [0.586s]
[INFO] Hive HCatalog Core ................................ SUCCESS [1.839s]
[INFO] Hive HCatalog Pig Adapter ......................... SUCCESS [2.468s]
[INFO] Hive HCatalog Server Extensions ................... SUCCESS [1.244s]
[INFO] Hive HCatalog Webhcat Java Client ................. SUCCESS [2.251s]
[INFO] Hive HCatalog Webhcat ............................. SUCCESS [10.352s]
[INFO] Hive HWI .......................................... SUCCESS [1.245s]
[INFO] Hive ODBC ......................................... SUCCESS [0.883s]
[INFO] Hive Shims Aggregator ............................. SUCCESS [0.166s]
[INFO] Hive TestUtils .................................... SUCCESS [0.625s]
[INFO] Hive Packaging .................................... FAILURE [1.676s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3:37.399s
[INFO] Finished at: Sat Mar 15 03:25:32 EDT 2014
[INFO] Final Memory: 74M/440M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project hive-packaging: Could not resolve dependencies for project org.apache.hive:hive-packaging:pom:0.14.0-SNAPSHOT: Could not find artifact org.apache.hive.hcatalog:hive-hcatalog-hbase-storage-handler:jar:0.14.0-SNAPSHOT in apache.snapshots (http://repository.apache.org/snapshots) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :hive-packaging
+ exit 1
'
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12634599, Ran the tests locally, all tests pass., Committed to trunk and 0.13 branches.
[~alangates] thanks for running the tests]