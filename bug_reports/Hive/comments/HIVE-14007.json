[GitHub user omalley opened a pull request:

    https://github.com/apache/hive/pull/81

    HIVE-14007. Replace ORC module with ORC 1.1.1 release

    This patch replaces the inline ORC module with the ORC 1.1.1 release.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/omalley/hive hive-14007

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/hive/pull/81.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #81
    
----
commit 4fde122f06709a750dcbbe867be754f04698e9d9
Author: Owen O'Malley <omalley@apache.org>
Date:   2016-06-13T21:53:56Z

    HIVE-14007. Replace ORC module with ORC 1.1.1 release

----
, This patch makes the change and deletes the files., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12810403/HIVE-14007.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 35 failed/errored test(s), 9438 tests executed
*Failed tests:*
{noformat}
TestBitFieldReader - did not produce a TEST-*.xml file
TestBitPack - did not produce a TEST-*.xml file
TestColumnStatistics - did not produce a TEST-*.xml file
TestColumnStatisticsImpl - did not produce a TEST-*.xml file
TestDataReaderProperties - did not produce a TEST-*.xml file
TestDynamicArray - did not produce a TEST-*.xml file
TestFileDump - did not produce a TEST-*.xml file
TestInStream - did not produce a TEST-*.xml file
TestIntegerCompressionReader - did not produce a TEST-*.xml file
TestJsonFileDump - did not produce a TEST-*.xml file
TestMemoryManager - did not produce a TEST-*.xml file
TestNewIntegerEncoding - did not produce a TEST-*.xml file
TestOrcNullOptimization - did not produce a TEST-*.xml file
TestOrcTimezone1 - did not produce a TEST-*.xml file
TestOrcTimezone2 - did not produce a TEST-*.xml file
TestOrcWideTable - did not produce a TEST-*.xml file
TestOutStream - did not produce a TEST-*.xml file
TestRLEv2 - did not produce a TEST-*.xml file
TestReaderImpl - did not produce a TEST-*.xml file
TestRecordReaderImpl - did not produce a TEST-*.xml file
TestRunLengthByteReader - did not produce a TEST-*.xml file
TestRunLengthIntegerReader - did not produce a TEST-*.xml file
TestSerializationUtils - did not produce a TEST-*.xml file
TestStreamName - did not produce a TEST-*.xml file
TestStringDictionary - did not produce a TEST-*.xml file
TestStringRedBlackTree - did not produce a TEST-*.xml file
TestTypeDescription - did not produce a TEST-*.xml file
TestUnrolledBitPack - did not produce a TEST-*.xml file
TestVectorOrcFile - did not produce a TEST-*.xml file
TestZlib - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_globallimit
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_index_bitmap3
org.apache.hadoop.hive.ql.TestTxnCommands.testSimpleAcidInsert
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/123/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/123/console
Test logs: http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-123/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 35 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12810403 - PreCommit-HIVE-MASTER-Build, This doesn't remove any ORC parameters from HiveConf.java.  Will that be done in a separate jira?

Also, what should happen to the ORC documentation in the Hive wiki?

* [Hive Configuration Properties -- ORC File Format | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-ORCFileFormat]
* [Hive Language Manual -- ORC Files | https://cwiki.apache.org/confluence/display/Hive/LanguageManual+ORC], I wasn't sure whether deleting variables out of HiveConf would break any users.

I believe all of the ORC documentation has already moved to http://orc.apache.org . In particular, it should be:

The Hive Configuration Properties - ORC File format is in http://orc.apache.org/docs/hive-config.html

The Hive Language Manual -ORC files is in http://orc.apache.org/docs/spec-intro.html .

, This patch is rebased and moves to ORC 1.1.2., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12817049/HIVE-14007.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/456/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/456/console
Test logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-456/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command 'bash /data/hive-ptest/working/scratch/source-prep.sh' failed with exit status 1 and output '+ [[ -n /usr/java/jdk1.8.0_25 ]]
+ export JAVA_HOME=/usr/java/jdk1.8.0_25
+ JAVA_HOME=/usr/java/jdk1.8.0_25
+ export PATH=/usr/java/jdk1.8.0_25/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/java/jdk1.8.0_25/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export 'ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m '
+ ANT_OPTS='-Xmx1g -XX:MaxPermSize=256m '
+ export 'M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'
+ M2_OPTS='-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-MASTER-Build-456/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ cd apache-github-source-source
+ git fetch origin
From https://github.com/apache/hive
   82b84ac..d09969b  master     -> origin/master
+ git reset --hard HEAD
HEAD is now at 82b84ac HIVE-14173: NPE was thrown after enabling directsql in the middle of session (Chaoyu Tang, reviewed by Sergey Shelukhin)
+ git clean -f -d
Removing hbase-handler/src/test/org/apache/hadoop/hive/hbase/HBaseStorageHandlerTest.java
+ git checkout master
Already on 'master'
Your branch is behind 'origin/master' by 1 commit, and can be fast-forwarded.
  (use "git pull" to update your local branch)
+ git reset --hard origin/master
HEAD is now at d09969b HIVE-14115 : Custom FetchFormatter is not supported (Ryu Kobayashi via Ashutosh Chauhan)
+ git merge --ff-only origin/master
Already up-to-date.
+ git gc
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
'
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12817049 - PreCommit-HIVE-MASTER-Build, In regards to Lefty's question on the config params, what happens when users set the config params in hive-site.xml.  Will they now be ignored?  That is a massively backward incompatible change if so.  At the very least there should be a warning.

I'm +1 on the patch in general.  We need sign off from some of the people working on LLAP since they have been doing a lot of work in ORC as well., All of the configuration settings have been copied over so the settings in hive-site.xml or sql session are all the same. 

The settings are duplicated in HiveConf right now. That will likely lead to confusion in the future. I'll go ahead and delete them as part of this patch., Ok, I've updated the patch with deleting the duplicated HiveConf variables and moving the tests that were using them to the OrcConf equivalents., [~owen.omalley], why are some ORC parameters (*hive.orc.splits.include.file.footer, hive.orc.cache.stripe.details.size, hive.orc.compute.splits.num.threads, hive.exec.orc.split.strategy, hive.merge.orcfile.stripe.level, hive.exec.orc.base.delta.ratio*) not being removed from HiveConf? Are these not duplicates?, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12817200/HIVE-14007.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/475/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/475/console
Test logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-475/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command 'bash /data/hive-ptest/working/scratch/source-prep.sh' failed with exit status 1 and output '+ [[ -n /usr/java/jdk1.8.0_25 ]]
+ export JAVA_HOME=/usr/java/jdk1.8.0_25
+ JAVA_HOME=/usr/java/jdk1.8.0_25
+ export PATH=/usr/java/jdk1.8.0_25/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/java/jdk1.8.0_25/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export 'ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m '
+ ANT_OPTS='-Xmx1g -XX:MaxPermSize=256m '
+ export 'M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'
+ M2_OPTS='-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-MASTER-Build-475/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at a61c351 HIVE-14200: Tez: disable auto-reducer parallelism when reducer-count * min.partition.factor < 1.0 (Gopal V, reviewed by Gunther Hagleitner)
+ git clean -f -d
+ git checkout master
Already on 'master'
Your branch is up-to-date with 'origin/master'.
+ git reset --hard origin/master
HEAD is now at a61c351 HIVE-14200: Tez: disable auto-reducer parallelism when reducer-count * min.partition.factor < 1.0 (Gopal V, reviewed by Gunther Hagleitner)
+ git merge --ff-only origin/master
Already up-to-date.
+ git gc
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
'
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12817200 - PreCommit-HIVE-MASTER-Build, Those variables actually control Hive's use of ORC rather than ORC itself. Thus those variables only exist in Hive and aren't duplicated., Ah, that makes sense.  Thanks!, This patch replaces the module with ORC 1.2.2., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12842058/HIVE-14007.patch

{color:green}SUCCESS:{color} +1 due to 5 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 50 failed/errored test(s), 9907 tests executed
*Failed tests:*
{noformat}
TestBitFieldReader - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestColumnStatistics - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestColumnStatisticsImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestDataReaderProperties - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestDynamicArray - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestInStream - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestIntegerCompressionReader - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestJsonFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestMemoryManager - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestMiniLlapCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=132)
	[mapreduce2.q,orc_llap_counters1.q,bucket6.q,insert_into1.q,empty_dir_in_table.q,orc_merge1.q,script_env_var1.q,orc_merge_diff_fs.q,llapdecider.q,load_hdfs_file_with_space_in_the_name.q,llap_nullscan.q,orc_ppd_basic.q,transform_ppr1.q,rcfile_merge4.q,orc_merge3.q]
TestMiniLlapCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=136)
	[orc_merge2.q,insert_into2.q,reduce_deduplicate.q,orc_llap_counters.q,cte_4.q,schemeAuthority2.q,file_with_header_footer.q,rcfile_merge3.q]
TestMiniLlapLocalCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=143)
	[vectorized_rcfile_columnar.q,vector_elt.q,explainuser_1.q,multi_insert.q,tez_dml.q,vector_bround.q,schema_evol_orc_acid_table.q,vector_when_case_null.q,orc_ppd_schema_evol_1b.q,vector_join30.q,vectorization_11.q,cte_3.q,update_tmp_table.q,vector_decimal_cast.q,groupby_grouping_id2.q,vector_decimal_round.q,tez_smb_empty.q,orc_merge6.q,vector_decimal_trailing.q,cte_5.q,tez_union.q,cbo_rp_subq_not_in.q,vector_decimal_2.q,columnStatsUpdateForStatsOptimizer_1.q,vector_outer_join3.q,schema_evol_text_vec_part_all_complex.q,tez_dynpart_hashjoin_2.q,auto_sortmerge_join_12.q,offset_limit.q,tez_union_multiinsert.q]
TestNewIntegerEncoding - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcNullOptimization - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestOrcTimezone1 - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestOrcTimezone2 - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestOrcTimezone3 - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestOrcWideTable - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestOutStream - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestRLEv2 - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestRecordReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestRunLengthByteReader - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRunLengthIntegerReader - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSchemaEvolution - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSerializationUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=95)
	[parallel_join1.q,union27.q,union12.q,groupby7_map_multi_single_reducer.q,varchar_join1.q,join7.q,join_reorder4.q,skewjoinopt2.q,bucketsortoptimize_insert_2.q,smb_mapjoin_17.q,script_env_var1.q,groupby7_map.q,groupby3.q,bucketsortoptimize_insert_8.q,union20.q]
TestStreamName - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestStringDictionary - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestStringRedBlackTree - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestTypeDescription - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestUnrolledBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestVectorOrcFile - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestZlib - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[auto_sortmerge_join_2] (batchId=44)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[dbtxnmgr_showlocks] (batchId=71)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample2] (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample4] (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample6] (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample7] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample9] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_merge10] (batchId=135)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_schema_evol_3a] (batchId=134)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=134)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[orc_merge11] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[stats_based_fetch_decision] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[orc_merge12] (batchId=91)
org.apache.hadoop.hive.ql.io.orc.TestVectorizedOrcAcidRowBatchReader.testVectorizedOrcAcidRowBatchReader (batchId=252)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/2460/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/2460/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-2460/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 50 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12842058 - PreCommit-HIVE-Build, Moving the config vars over to ORC and removing them from HiveConf will still break existing apps, because hive throws an error when it doesn't know about a config var that starts with hive as a precaution afaik.

Why is this patch changing test files? Seems this is changing behavior in addition to removing the files?
, Ok, I've updated the pull request https://github.com/apache/hive/pull/81 and will post a new patch once ORC 1.2.3 is released.

The patch ensures that the moved config variables don't create an error by adding them to the exception map. https://github.com/omalley/hive/commit/d078aea84ecb1fe7d3e9b95cc845dfbdee63587c#diff-7f16e0de4170e5b6c031990da80f5643

As to why the patch is changing test files, it is because the ORC project has a couple of fixes and features that hadn't been back ported to Hive.

In particular,
* ORC-101 fixes the bloom filters to use utf-8 rather than the jvm default encoding. This changes the size of the ORC files and their write version. There is an option to write the old broken bloom filters in addition to the new ones.
* ORC-54 makes the default for schema evolution to be by name instead of position if the ORC files has real column names. Some of the tests required the old behavior and so I changed the names to match for the intended matches. Note that Hive 1.x never got the fix to encode the real column names in the file metadata, so all files written by Hive 1.x will use positional matching.
, Another consideration is whether users configs will break. Do the configs all have the same name? Perhaps it's possible to add a fallback option to old names in OrcConf otherwise, [~owen.omalley] thanks for the info, but I don't understand the argument about ORC 54. The current behavior and the fix to encode column names was shipped in hive 2 and this patch fundamentally changes how alter table statements/schema evolution works. You're not saying what the impact is, but I think it could be as bad as ending up with situations where you can't read any of your data anymore after upgrade within hive 2, right? And I don't see a fallback option or migration path.

Resolution of this should probably be tracked in it's own blocking jira, instead of coming in through this.


, The other thing I think we need community wide clarity on before you rip out orc is how we’re going to keep developing hive afterwards. Right now there’s a cyclic dependency. Hive -> ORC -> Hive - because of a shared storage api. 

There are features that touch all three. And it turns out these are more frequent than expected. Examples: HIVE-15335 ([~mmccline]), HIVE-14453 ([~sershe]), HIVE-15269 ([~jdere]). I’m sure there there are more given how vectorization, llap and acid are interlinked.

How do you propose to handle development and release of these features given the cyclic dependency? How do you work out feature branches/ snapshots?

If a successful feature commit requires sequential hive and orc releases, then that means minimum several months before commit and that's not great. How will this be done?

Side note: None of the features above actually change the actual format (bits on disk), so maybe you’re just removing too much.

Final concern: Looking over the PMC and committer lists in ORC it looks like many people working on ACID, vectorization or llap will lose the ability to do what they are doing today with this change. I don't think we should move ahead w/o closing this gap., Sergey, all of the configs have compatibility with the old names. 

https://github.com/apache/orc/blob/master/java/core/src/java/org/apache/orc/OrcConf.java, {quote}
The other thing I think we need community wide clarity on before you rip out orc is how we’re going to keep developing hive afterwards. Right now there’s a cyclic dependency. Hive -> ORC -> Hive - because of a shared storage api.
{quote}

There is agreement within Hive to release the storage-api independently from Hive. That would break the cycle and allow a non-cyclic release process. I'll file a Hive jira to do that work. Avoiding have two copies of code makes the whole ecosystem stronger by making sure that fixes get applied everywhere. I'd suggest leaving storage-api in the Hive source tree rather than making its own git repository.

{quote}
There are features that touch all three. And it turns out these are more frequent than expected.
{quote}

They come in waves. In the last three months, there have been 2 changes to storage-api. Most of the patches are in either storage-api or ORC. For example, HIVE-14453 only touches ORC.

{quote}
How do you propose to handle development and release of these features given the cyclic dependency? How do you work out feature branches/ snapshots?
{quote}

For changes that touch one or the other, you'd commit the relevant change and release either storage-api or ORC and have a jira that updates the version in Hive. In the worst case, where the change spreads among the three artifacts, you would:

* commit to storage-api & ORC
* release them
* upgrade the pom in Hive

{quote}
If a successful feature commit requires sequential hive and orc releases, then that means minimum several months before commit and that's not great. How will this be done?
{quote}

No, ORC releases typically take 3 days. Storage API is much simpler and should also take 3 days. By being much smaller and more focused, they are much more nimble. Furthermore, the two votes could completely overlap, so the total time to get the change into Hive would be roughly 3 days.

{quote}
Looking over the PMC and committer lists in ORC it looks like many people working on ACID, vectorization or llap will lose the ability to do what they are doing today with this change.
{quote}

When we set up the ORC project, we were pretty inclusive in the committer list and we continue to add new committers and PMC members. I'll take at the contributors to the Hive ORC module to look for new committers., [~owen.omalley] this partially addresses my concerns but you're being vague about what exactly and when. So I will try to be clear. I'm -1 on this. Blockers for me are:

a) change breaks compatibility. (schema evolution)

b) there's no documented and proven way to actually be able to turn these features/bugs around in 3 days. (many open questions, what's considered public v private, backwards compat criteria of the api, documentation for api itself, documentation of release mechanics, what are the version numbers, who votes on it, do a feature end to end to demonstrate.)

c) not sure why it's up to you who gets to play and who doesn't. for me at the very least anyone who's been working on ACID, ORC, LLAP, cloud/s3 or vectorization should keep their committership/pmc in ORC (or have it transferred/added). i'm fine if folks explicitly opt out of that. 

given how these things are interrelated, anything else will just make it harder/impossible for hive devs to do their work.

, {quote}
The current behavior and the fix to encode column names was shipped in hive 2 and this patch fundamentally changes how alter table statements/schema evolution works.
{quote}

Ok, it is trivial to add a configuration knob like "orc.ignore.names.for.evolution", which we can do. I've filed ORC-120 to handle the transition to the richer schema evolution.

As for your other concerns, I've presented a solution and you keep raising the same vague concerns. Having the two implementations of ORC is *really* problematic and is leading to Hive not getting bug fixes and new features. That will continue to worsen as the two code branches continue to diverge., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12842906/HIVE-14007.patch

{color:green}SUCCESS:{color} +1 due to 6 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 45 failed/errored test(s), 9958 tests executed
*Failed tests:*
{noformat}
TestBitFieldReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestColumnStatistics - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestColumnStatisticsImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestDataReaderProperties - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestDynamicArray - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestInStream - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestIntegerCompressionReader - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestJsonFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestMemoryManager - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestMiniLlapCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=133)
	[mapreduce2.q,orc_llap_counters1.q,bucket6.q,insert_into1.q,empty_dir_in_table.q,orc_merge1.q,script_env_var1.q,orc_merge_diff_fs.q,llapdecider.q,load_hdfs_file_with_space_in_the_name.q,llap_nullscan.q,orc_ppd_basic.q,transform_ppr1.q,rcfile_merge4.q,orc_merge3.q]
TestMiniLlapCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=137)
	[orc_merge2.q,insert_into2.q,reduce_deduplicate.q,orc_llap_counters.q,cte_4.q,schemeAuthority2.q,file_with_header_footer.q,rcfile_merge3.q]
TestMiniLlapLocalCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=144)
	[vectorized_rcfile_columnar.q,vector_elt.q,explainuser_1.q,multi_insert.q,tez_dml.q,vector_bround.q,schema_evol_orc_acid_table.q,vector_when_case_null.q,orc_ppd_schema_evol_1b.q,vector_join30.q,vectorization_11.q,cte_3.q,update_tmp_table.q,vector_decimal_cast.q,groupby_grouping_id2.q,vector_decimal_round.q,tez_smb_empty.q,orc_merge6.q,vector_decimal_trailing.q,cte_5.q,tez_union.q,cbo_rp_subq_not_in.q,vector_decimal_2.q,columnStatsUpdateForStatsOptimizer_1.q,vector_outer_join3.q,schema_evol_text_vec_part_all_complex.q,tez_dynpart_hashjoin_2.q,auto_sortmerge_join_12.q,offset_limit.q,tez_union_multiinsert.q]
TestNewIntegerEncoding - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestOrcNullOptimization - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestOrcTimezone1 - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestOrcTimezone2 - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestOrcTimezone3 - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestOrcWideTable - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOutStream - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRLEv2 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRecordReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRunLengthByteReader - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestRunLengthIntegerReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestSchemaEvolution - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestSerializationUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestStreamName - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestStringDictionary - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestStringRedBlackTree - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestTypeDescription - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestUnrolledBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestVectorOrcFile - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestVectorizedColumnReaderBase - did not produce a TEST-*.xml file (likely timed out) (batchId=251)
TestZlib - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample2] (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample4] (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample6] (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample7] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample9] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_schema_evol_3a] (batchId=135)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=135)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[stats_based_fetch_decision] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[orc_merge12] (batchId=92)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/2553/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/2553/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-2553/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 45 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12842906 - PreCommit-HIVE-Build, Fix one more case of the ORC writer version changing., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12843303/HIVE-14007.patch

{color:green}SUCCESS:{color} +1 due to 6 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 43 failed/errored test(s), 9991 tests executed
*Failed tests:*
{noformat}
TestBitFieldReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestColumnStatistics - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestColumnStatisticsImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestDataReaderProperties - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestDynamicArray - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestInStream - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestIntegerCompressionReader - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestJsonFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestMemoryManager - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestMiniLlapCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=133)
	[mapreduce2.q,orc_llap_counters1.q,bucket6.q,insert_into1.q,empty_dir_in_table.q,orc_merge1.q,script_env_var1.q,orc_merge_diff_fs.q,llapdecider.q,load_hdfs_file_with_space_in_the_name.q,llap_nullscan.q,orc_ppd_basic.q,transform_ppr1.q,rcfile_merge4.q,orc_merge3.q]
TestMiniLlapCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=137)
	[orc_merge2.q,insert_into2.q,reduce_deduplicate.q,orc_llap_counters.q,cte_4.q,schemeAuthority2.q,file_with_header_footer.q,rcfile_merge3.q]
TestNewIntegerEncoding - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestOrcNullOptimization - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestOrcTimezone1 - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestOrcTimezone2 - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestOrcTimezone3 - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestOrcWideTable - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOutStream - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRLEv2 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRecordReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRunLengthByteReader - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestRunLengthIntegerReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestSchemaEvolution - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestSerializationUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestStreamName - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestStringDictionary - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestStringRedBlackTree - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestTypeDescription - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestUnrolledBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestVectorOrcFile - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestVectorizedColumnReaderBase - did not produce a TEST-*.xml file (likely timed out) (batchId=251)
TestZlib - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample2] (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample4] (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample6] (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample7] (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[sample9] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=135)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[metadataonly1] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[stats_based_fetch_decision] (batchId=151)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/2581/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/2581/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-2581/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 43 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12843303 - PreCommit-HIVE-Build, Gunther, I've written up https://cwiki.apache.org/confluence/display/Hive/Storage+API+Release+Proposal about how the releases will work. Also look at HIVE-15419 for separating out the poms and the changes we'll need on master., This patch uses ORC 1.3.0, which includes a superset of Hive's ORC (hive-orc) module., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12848713/HIVE-14007.patch

{color:green}SUCCESS:{color} +1 due to 6 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 51 failed/errored test(s), 10175 tests executed
*Failed tests:*
{noformat}
TestBitFieldReader - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestColumnStatistics - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestColumnStatisticsImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestDataReaderProperties - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestDynamicArray - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestInStream - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestIntegerCompressionReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestJsonFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMemoryManager - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestNewIntegerEncoding - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestOrcNullOptimization - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone1 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone2 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone3 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcWideTable - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestOutStream - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRLEv2 - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRecordReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRunLengthByteReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRunLengthIntegerReader - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSchemaEvolution - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSerializationUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestStreamName - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestStringDictionary - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestStringRedBlackTree - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestTypeDescription - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestUnrolledBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestVectorOrcFile - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestZlib - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[llap_text] (batchId=68)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[materialized_view_drop] (batchId=9)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[stats_aggregator_error_1] (batchId=68)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_nullscan] (batchId=135)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_llap_counters1] (batchId=135)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_llap_counters] (batchId=137)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=135)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_schema_evol_3a] (batchId=136)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[offset_limit_ppd_optimizer] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[orc_analyze] (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_nonvec_part_all_primitive] (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_vec_part_all_primitive] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_text_vec_part] (batchId=149)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hadoop.hive.ql.io.orc.TestVectorizedOrcAcidRowBatchReader.testCanCreateVectorizedAcidRowBatchReaderOnSplit (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestVectorizedOrcAcidRowBatchReader.testVectorizedOrcAcidRowBatchReader (batchId=255)
org.apache.hadoop.hive.ql.txn.compactor.TestCompactor.testMinorCompactionForSplitUpdateWithInsertsAndDeletes (batchId=205)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/3111/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/3111/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-3111/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 51 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12848713 - PreCommit-HIVE-Build, Ok, this patch handles the recent changes that have gone into ORC and storage-api. It also addresses some test failures. The vast majority of the test differences are because ORC was adding extra bytes in some circumstances. With that bug fixed, the sizes of the files and streams inside the files change., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12849623/HIVE-14007.patch

{color:green}SUCCESS:{color} +1 due to 7 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 50 failed/errored test(s), 10183 tests executed
*Failed tests:*
{noformat}
TestBitFieldReader - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestColumnStatistics - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestColumnStatisticsImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestDataReaderProperties - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestDynamicArray - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestInStream - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestIntegerCompressionReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestJsonFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMemoryManager - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMiniSparkOnYarnCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=161)
	[infer_bucket_sort_num_buckets.q,gen_udf_example_add10.q,insert_overwrite_directory2.q,orc_merge5.q,bucketmapjoin6.q,import_exported_table.q,vector_outer_join0.q,orc_merge4.q,temp_table_external.q,orc_merge_incompat1.q,root_dir_external_table.q,constprog_semijoin.q,auto_sortmerge_join_16.q,schemeAuthority.q,index_bitmap3.q,external_table_with_space_in_location_path.q,parallel_orderby.q,infer_bucket_sort_map_operators.q,bucketizedhiveinputformat.q,remote_script.q]
TestNewIntegerEncoding - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestOrcNullOptimization - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone1 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone2 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone3 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcWideTable - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestOutStream - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRLEv2 - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRecordReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRunLengthByteReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRunLengthIntegerReader - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSchemaEvolution - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSerializationUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestStreamName - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestStringDictionary - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestStringRedBlackTree - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestTypeDescription - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestUnrolledBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestVectorOrcFile - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestZlib - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_table_stats] (batchId=48)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynpart_sort_optimization_acid] (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[orc_analyze] (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_nonvec_part_all_primitive] (batchId=155)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[schema_evol_orc_vec_part_all_primitive] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3] (batchId=93)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testConnection (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testIsValid (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testIsValidNeg (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testNegativeProxyAuth (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testNegativeTokenAuth (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testProxyAuth (batchId=229)
org.apache.hive.minikdc.TestJdbcWithDBTokenStore.testTokenAuth (batchId=229)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/3216/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/3216/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-3216/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 50 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12849623 - PreCommit-HIVE-Build, Updated the ORC version to 1.3.1 so that we get ORC-134 and ORC-138., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12850654/HIVE-14007.patch

{color:green}SUCCESS:{color} +1 due to 7 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 40 failed/errored test(s), 10208 tests executed
*Failed tests:*
{noformat}
TestBitFieldReader - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestColumnStatistics - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestColumnStatisticsImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestDataReaderProperties - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestDynamicArray - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestInStream - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestIntegerCompressionReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestJsonFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMemoryManager - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestNewIntegerEncoding - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestOrcNullOptimization - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone1 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone2 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone3 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcWideTable - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestOutStream - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRLEv2 - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRecordReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRunLengthByteReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRunLengthIntegerReader - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSchemaEvolution - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSerializationUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=95)
	[bucketmapjoin4.q,bucket_map_join_spark4.q,union21.q,groupby2_noskew.q,timestamp_2.q,date_join1.q,mergejoins.q,smb_mapjoin_11.q,auto_sortmerge_join_3.q,mapjoin_test_outer.q,vectorization_9.q,merge2.q,groupby6_noskew.q,auto_join_without_localtask.q,multi_join_union.q]
TestStreamName - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestStringDictionary - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestStringRedBlackTree - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestTypeDescription - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestUnrolledBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestVectorOrcFile - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestZlib - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=135)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_schema_evol_3a] (batchId=136)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_char_simple] (batchId=147)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=223)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/3332/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/3332/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-3332/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 40 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12850654 - PreCommit-HIVE-Build, Update orc_ppd_basic.q.out and orc_ppd_schema_evol_3a.q.out with the counters., 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12850678/HIVE-14007.patch

{color:green}SUCCESS:{color} +1 due to 7 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 146 failed/errored test(s), 10224 tests executed
*Failed tests:*
{noformat}
TestBitFieldReader - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestColumnStatistics - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestColumnStatisticsImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestDataReaderProperties - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestDerbyConnector - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestDynamicArray - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestInStream - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestIntegerCompressionReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestJsonFileDump - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMemoryManager - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestNewIntegerEncoding - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestOrcNullOptimization - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone1 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone2 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcTimezone3 - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestOrcWideTable - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestOutStream - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRLEv2 - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRecordReaderImpl - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRunLengthByteReader - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRunLengthIntegerReader - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSchemaEvolution - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestSerializationUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestStreamName - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestStringDictionary - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestStringRedBlackTree - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestTypeDescription - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestUnrolledBitPack - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestVectorOrcFile - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestZlib - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver[encryption_join_with_different_encryption_keys] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_varchar_simple] (batchId=153)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=223)
org.apache.hadoop.hive.llap.cache.TestIncrementalObjectSizeEstimator.testMetadata (batchId=282)
org.apache.hadoop.hive.llap.cache.TestOrcMetadataCache.testGetPut (batchId=282)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeDeleteUpdate (batchId=275)
org.apache.hadoop.hive.ql.TestTxnCommands.testMergeUpdateDelete (batchId=275)
org.apache.hadoop.hive.ql.TestTxnCommands2.testACIDwithSchemaEvolutionAndCompaction (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testAcidWithSchemaEvolution (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testBucketizedInputFormat (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDeleteIn (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDynamicPartitionsMerge (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testDynamicPartitionsMerge2 (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testETLSplitStrategyForACID (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testInsertOverwriteWithSelfJoin (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge2 (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMerge3 (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMergeWithPredicate (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testMultiInsertStatement (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidInsert (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion1 (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion2 (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion3 (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2.testOriginalFileReaderWhenNonAcidConvertedToAcid (batchId=263)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testACIDwithSchemaEvolutionAndCompaction (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testAcidWithSchemaEvolution (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testBucketizedInputFormat (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testCompactWithDelete (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testDeleteIn (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testDynamicPartitionsMerge (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testDynamicPartitionsMerge2 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testETLSplitStrategyForACID (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testInsertOverwriteWithSelfJoin (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge2 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMerge3 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMergeWithPredicate (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testMultiInsertStatement (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNoHistory (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidInsert (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion1 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion2 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion3 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidSplitUpdateConversion1 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidSplitUpdateConversion2 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidSplitUpdateConversion3 (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testOrcNoPPD (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testOrcPPD (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testOriginalFileReaderWhenNonAcidConvertedToAcid (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testUpdateMixedCase (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.updateDeletePartitioned (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.writeBetweenWorkerAndCleaner (batchId=273)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testACIDwithSchemaEvolutionAndCompaction (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testAcidWithSchemaEvolution (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testBucketizedInputFormat (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testCompactWithDelete (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDeleteIn (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDynamicPartitionsMerge (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testDynamicPartitionsMerge2 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testETLSplitStrategyForACID (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testInsertOverwriteWithSelfJoin (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge2 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMerge3 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMergeWithPredicate (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testMultiInsertStatement (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNoHistory (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidInsert (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion1 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion2 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion3 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidSplitUpdateConversion1 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidSplitUpdateConversion2 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidSplitUpdateConversion3 (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testOrcNoPPD (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testOrcPPD (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testOriginalFileReaderWhenNonAcidConvertedToAcid (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testUpdateMixedCase (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.updateDeletePartitioned (batchId=270)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.writeBetweenWorkerAndCleaner (batchId=270)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testACIDReaderFooterSerialize (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testACIDReaderFooterSerializeWithDeltas (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testACIDReaderNoFooterSerialize (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testACIDReaderNoFooterSerializeWithDeltas (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testDefaultTypes (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testDoAs (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testInOutFormat (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testMROutput (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testNonVectorReaderFooterSerialize (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testNonVectorReaderNoFooterSerialize (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testProjectedColumnSize (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testRowNumberUniquenessInDifferentSplits (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitElimination (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitEliminationNullStats (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitGenReadOps (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitGenReadOpsLocalCache (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitGenReadOpsLocalCacheChangeFileLen (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitGenReadOpsLocalCacheChangeModificationTime (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitGenerator (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testVectorReaderFooterSerialize (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testVectorReaderNoFooterSerialize (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testVectorization (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testVectorizationWithAcid (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testVectorizationWithBuckets (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestNewInputOutputFormat.testNewInputFormat (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestNewInputOutputFormat.testNewInputFormatPruning (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestOrcRawRecordMerger.testRecordReaderIncompleteDelta (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestOrcRawRecordMerger.testRecordReaderNewBaseAndDelta (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestOrcRawRecordMerger.testRecordReaderOldBaseAndDelta (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestOrcSplitElimination.testSplitEliminationComplexExpr (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestOrcSplitElimination.testSplitEliminationLargeMaxSplit (batchId=255)
org.apache.hadoop.hive.ql.io.orc.TestOrcSplitElimination.testSplitEliminationSmallMaxSplit (batchId=255)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/3337/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/3337/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-3337/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 146 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12850678 - PreCommit-HIVE-Build, I just committed this. Thanks for the review, Prasanth., Doc note:  This needs to be explained on the Hive ORC wiki page, and Configuration Properties needs to be updated for the removal of many configuration parameters in release 2.2.0.

* [ORC Files | https://cwiki.apache.org/confluence/display/Hive/LanguageManual+ORC]
* [Configuration Properties -- ORC File Format | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-ORCFileFormat]

Added a TODOC2.2 label.

For search purposes, here are the removed configs:
hive.exec.orc.memory.pool, hive.exec.orc.write.format, hive.exec.orc.default.stripe.size, hive.exec.orc.default.block.size, hive.exec.orc.dictionary.key.size.threshold, hive.exec.orc.default.row.index.stride, hive.orc.row.index.stride.dictionary.check, hive.exec.orc.default.buffer.size, hive.exec.orc.default.block.padding, hive.exec.orc.block.padding.tolerance, hive.exec.orc.default.compress, hive.exec.orc.encoding.strategy, hive.exec.orc.compression.strategy, hive.exec.orc.skip.corrupt.data, hive.exec.orc.zerocopy, This doesn't have parity with ORC module. In particular ORC-141 is blocking, because the memory management will now be turned on for the writers that didn't use path before.
The ctor that created WriterImpl with null path was replaced to provide a path, which is unacceptable. 
ORC-141 is now blocking any future Hive release., Github user omalley closed the pull request at:

    https://github.com/apache/hive/pull/81
]