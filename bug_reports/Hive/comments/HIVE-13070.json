[

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12788230/HIVE-13070.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 8 failed/errored test(s), 9775 tests executed
*Failed tests:*
{noformat}
TestMiniTezCliDriver-vector_decimal_round.q-cbo_windowing.q-tez_schema_evolution.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-timestamp_lazy.q-bucketsortoptimize_insert_4.q-date_udf.q-and-12-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_coltype_literals
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_stats_only_null
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats_only_null
org.apache.hadoop.hive.metastore.TestHiveMetaStorePartitionSpecs.testGetPartitionSpecs_WithAndWithoutPartitionGrouping
org.apache.hive.jdbc.TestSSL.testSSLVersion
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7015/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7015/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7015/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12788230 - PreCommit-HIVE-TRUNK-Build, [~ashutoshc], could you review this one (it is blocking QA run of HIVE-12994)? What do we need to do to deploy the new script? Thanks, Changes look good to me. [~szehon] Would you also like to take a look? Do we need to restart test master for having these changes take effect?, I think Sergio worked on this.  +[~spena] can you look at the patch and answer the question?, Thanks. The patch looks good. 

I was thinking if we can move the {{export BUILD_POSTFIX=...}} inside the process_jira function, and also add a {{test -n "$BUILD_TAG" ...}} at the beginning of the process_jira function. That way we only edit one file, and process_jira will not depend on BUILD_POSTFIX to be set from whoever makes the process_jira call., [~spena], thanks for checking.

The problem with the change you proposed is that process\_jira is called in _jenkins-submit-build.sh_ script too, before the call to the tests execution is done: at that point, {{BUILD_TAG}} is not set, and hence {{BUILD_POSTFIX}} cannot be either. Thus, we cannot add {{test -n}}.

Nevertheless, I have uploaded a new patch to derive {{build_postfix}} within process\_jira iff {{BUILD_TAG}} is set., Got it. The change looks good to me.
+1

It is not necessary to restart Jenkins once this is committed. Jenkins always downloads a new copy of the jenkins-*.sh scripts everytime a new job is triggered., No need to waste QA on this one; pushed to master.

Thanks for the help [~spena]!]