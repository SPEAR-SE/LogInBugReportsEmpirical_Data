[I've confirmed above query work in trunk, but cannot tell which issue made so.
{noformat}
hive> select * from t;                                                                           
OK
3	beijing
2	shanghai
{noformat}, this patch can fix HIVE-6042.]