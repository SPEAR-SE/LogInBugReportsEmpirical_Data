[+1 will commit when tests pass. , Namit, I ran ant test -Dtestcase=TestContribCliDriver -Dhadoop.version=0.20.0 in hive's root directory and it succeeded. but if I run ant test in contrib subdirectory, there are diffs (related to the hooks). Do you know which is the correct way?, Both of them should work.

Can you post some of the diffs ?, I cleaned up and ran it again under contrib/ and there are compilation errors (QTestUtil was not found). So I'm not sure if it is a good way to run it inside contrib, so I'm running it in hive's root directory. 

BTW, if I run 'ant test' in hive's root directory, it seems the TestContrib* were not tested. Is it expected?, All the TestContrib* test cases passed in Hive root directory., Committed. Thanks Namit!, >> BTW, if I run 'ant test' in hive's root directory, it seems the TestContrib* were not tested. Is it expected?


No, this is not expected. Because of this, we missed it in the first place.
I will file a follow-up on this

, I got a failure running ant test just now for the HBase portion.

    [junit] diff -a -I file: -I pfile: -I /tmp/ -I invalidscheme: -I lastUpdate\
Time -I lastAccessTime -I owner -I transient_lastDdlTime -I java.lang.RuntimeEx\
ception -I at org -I at sun -I at java -I at junit -I Caused by: -I [.][.][.] [\
0-9]* more /data/users/jsichi/open/commit-trunk/build/hbase-handler/test/logs/h\
base-handler/hbase_bulk.m.out /data/users/jsichi/open/commit-trunk/hbase-handle\
r/src/test/results/hbase_bulk.m.out                                             
    [junit] 109,110d108                                                         
    [junit] < PREHOOK: Input: default@hbsort                                    
    [junit] < PREHOOK: Output: default@hbsort                                   
    [junit] 118d115                                                             
    [junit] < POSTHOOK: Input: default@hbsort                                   
    [junit] 126,127d122                                                         
    [junit] < PREHOOK: Input: default@hbpartition                               
    [junit] < PREHOOK: Output: default@hbpartition                              
    [junit] 130d124                                                             
    [junit] < POSTHOOK: Input: default@hbpartition                              
    [junit] Exception: Client execution results failed with error code = 1      
    [junit] junit.framework.AssertionFailedError: Client execution results fail\
ed with error code = 1                                                          
    [junit]     at junit.framework.Assert.fail(Assert.java:47)                  
    [junit]     at org.apache.hadoop.hive.cli.TestHBaseMinimrCliDriver.testCliD\
river_hbase_bulk(TestHBaseMinimrCliDriver.java:102)                             
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAcce\
ssorImpl.java:39)                                                               
    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMe\
thodAccessorImpl.java:25)                                                       
    [junit]     at java.lang.reflect.Method.invoke(Method.java:597)             
    [junit]     at junit.framework.TestCase.runTest(TestCase.java:154)          
    [junit]     at junit.framework.TestCase.runBare(TestCase.java:127)          
 , Could also because of HIVE-1548. Is HBaseHandler also excluded from ant test?, HBaseHandler does run with ant test on Hadoop 0.20, but not with 0.17, so it's important to run tests against both configurations.
, I'll regenerate the test output and post a separate JIRA.]