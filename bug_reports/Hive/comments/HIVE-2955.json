[navis requested code review of "HIVE-2955 [jira] Queries consists of metadata-only-query returns always empty value".
Reviewers: JIRA

  DPAL-1108 Queries consists of metadata-only-query returns always empty value

  For partitioned table, simple query on partition column returns always null or empty value, for example,

  create table emppart(empno int, ename string) partitioned by (deptno int);
  .. load partitions..

  select distinct deptno from emppart; // empty
  select min(deptno), max(deptno) from emppart;  // NULL and NULL

TEST PLAN
  EMPTY

REVISION DETAIL
  https://reviews.facebook.net/D2817

AFFECTED FILES
  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/MetadataOnlyOptimizer.java
  ql/src/test/queries/clientpositive/metadataonly1.q
  ql/src/test/results/clientpositive/metadataonly1.q.out

MANAGE HERALD DIFFERENTIAL RULES
  https://reviews.facebook.net/herald/view/differential/

WHY DID I GET THIS EMAIL?
  https://reviews.facebook.net/herald/transcript/6411/

Tip: use the X-Herald-Rules header to filter Herald messages in your client.
, passed all tests, minor comments on phabricator.

The diff is not applying cleanly.
, +1

Running tests, Committed. Thanks Navis, Integrated in Hive-trunk-h0.21 #1504 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1504/])
    HIVE-2955 Queries consists of metadata-only-query returns always empty value
(Navis via namit) (Revision 1352771)

     Result = SUCCESS
namit : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1352771
Files : 
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/MetadataOnlyOptimizer.java
* /hive/trunk/ql/src/test/queries/clientpositive/metadataonly1.q
* /hive/trunk/ql/src/test/results/clientpositive/metadataonly1.q.out
, @Namit: Please remember to set the fix version field when you mark a ticket as resolved. Thanks., Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])
    HIVE-2955 Queries consists of metadata-only-query returns always empty value
(Navis via namit) (Revision 1352771)

     Result = ABORTED
namit : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1352771
Files : 
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java
* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/MetadataOnlyOptimizer.java
* /hive/trunk/ql/src/test/queries/clientpositive/metadataonly1.q
* /hive/trunk/ql/src/test/results/clientpositive/metadataonly1.q.out
, This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.]