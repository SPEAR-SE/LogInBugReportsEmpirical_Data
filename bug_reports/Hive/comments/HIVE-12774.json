[This is probably not the same bug as [HIVE-10308]. I'm using Cloudera Hadoop 5.5 and don't know if [HIVE-10308] has been applied to my binary.

However, the final stack trace is the same. This bug may require a fix similar to [HIVE-10308]. I'm not up to speed on Hive internals and cannot contribute a fix or a unit test., This bug surfaced immediately after we switched from MapReduce v1 to YARN. However, post hoc does not mean propter hoc.
, Can't really figure out why it would try to vectorize a TextInputFormat file (LazySimpleSerDe isn't vectorized, yet).

if the vectorizer is working correctly, this query should not contain a VectorFilterOperator at all.

But I'm guessing that it does generate a vectorized operator tree because it has no rows at all (NullInputFormat)., If you simplify the example by removing the group by/SUM aspect, or by removing the partition, or by putting data in the table, the problem does not occur.
It seems to need all of these complications in order to trigger the bug.]