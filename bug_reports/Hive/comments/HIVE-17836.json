[+1
just one note: restricting the fix to only apply to pg might hide future problems which might arise from the fact that we are handling pg differently
I think in this case it would be probably ok to remove the database specific condition, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12892962/HIVE-17836.1.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 9 failed/errored test(s), 11302 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[llap_acid_fast] (batchId=156)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[optimize_nullscan] (batchId=163)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=101)
org.apache.hadoop.hive.cli.TestSparkPerfCliDriver.testCliDriver[query16] (batchId=243)
org.apache.hadoop.hive.cli.TestSparkPerfCliDriver.testCliDriver[query94] (batchId=243)
org.apache.hadoop.hive.cli.TestTezPerfCliDriver.testCliDriver[query14] (batchId=241)
org.apache.hadoop.hive.cli.TestTezPerfCliDriver.testCliDriver[query16] (batchId=241)
org.apache.hadoop.hive.cli.TestTezPerfCliDriver.testCliDriver[query94] (batchId=241)
org.apache.hadoop.hive.cli.control.TestDanglingQOuts.checkDanglingQOut (batchId=204)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/7380/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/7380/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-7380/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12892962 - PreCommit-HIVE-Build, [~kgyrtkirk] I think its wise to keep it specific to pg since we didnt find this issue with other databases. Longer term this needs to be fixed in DN and this workaround should be removed altogether from hive.
Pushed to master., This jira is resolved and released with Hive 3.0 If you find an issue with it, please create a new jira.]