[diff request at https://reviews.apache.org/r/2554/, +1. Will commit if tests pass. , Committed. Thanks Robert!]