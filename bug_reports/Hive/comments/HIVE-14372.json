[Hi Vihang Karajgaonkar

I can reproduce case 1 and case 2, but cannot reproduce case 3. Can you run klist -k <keytab> to check whether you added server hostname to some principle? Or could you please dump klist -k <keytab>? 

Furthermore, if would be better if you can set beeline log level to debug and paste output for case 1 and case 2. , Hi [~vihangk1]

Ether the JDK API createSaslClient do not accept the realm parameter,  see: createSaslClient(String[] mechanisms, String authorizationId, String protocol, String serverName, Map<String,?> props, CallbackHandler cbh) or underlying security provider com.sun.security.sasl.Provider (GssKrb5Client.java in com.sun.security.sasl.gsskerb.GssKrb5Client) do not accept realm parameter, since Kerberos V5 mechanism will map hostname to canonical principal format in three ways (refer to [1] and [2]). For example,  the underlying security provider will read your kerberos configuration krb5.conf to generate a realm through the [domain_realm] section. 

Currently, though the hive code check whether there is a realm part, it doesn't use it at all. I think the realm check should be removed according to java API definition, and user could configure realm in krb5.conf.  what do you think?

[1]: https://web.mit.edu/kerberos/krb5-1.13/doc/admin/realm_config.html 
[2]: https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/single-signon.html]