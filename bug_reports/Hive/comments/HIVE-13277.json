[I managed to reproduce the issue and I found {{StackOverflowError}} in the full stack trace. I suppose that's the root cause. Possibly duplicates HIVE-12677. And may be related to this [kryo issue|https://github.com/EsotericSoftware/kryo/issues/341]., I built a local snapshot of kryo with latest code and verified the query can pass. So the root cause should be the kryo (3.0.3) we use. I'm afraid there's not much we can do at the moment because the fix hasn't been released yet.
[~xuefuz] what do you think?, Pinging [~xuefuz], [~lirui], thanks for for your investigation. While new Kryo may fix the problem, do we know what's caused the issue? Will the problem go away if we register the class in question? Thanks., Not sure about it. I'll do some investigation to see if we have a workaround for this problem., [~lirui] Are you using ORC data-set to run this query? 

Given the TPCx-BB query set, is this is the only query failing? , Yes I'm using ORC table. Pinging [~xhao1] regarding whether there're other queries that have this issue., Hi, Kapil & Rui,
TPCx-BB query2 is only an example here. Many queries in TPCx-BB failed due to similar reason. , Fixed by HIVE-14092]