[To fix this, we can do two things :

a) Provide a jobconf parameter that allows users to disable usage of the cache altogether. Useful for massively multithreaded cases.
b) In the cases that use a cache, we should spawn a separate maintenance thread that will prune and expire from time to time.

Attaching a patch which does both of the above., Note also, that the default behaviour is to continue to have the cache enabled, so as to not surprise any users. The new parameter is called "hcatalog.hive.client.cache.disabled", and would need to be set to "true" by the HCat user to disable the cache., [~thejas]/[~daijy], could I bother either of you for a review?, [~sushanth] Can you please create a reviewboard link and also document the configuration in release notes of jira?
, Reviewboard link : https://reviews.apache.org/r/17297/, Where should *hcatalog.hive.client.cache.disabled* be documented, besides the release notes?

AFAIK, none of the configuration properties in HCatConstants.java are mentioned in the wiki.  HCatConstants itself is only mentioned a couple of times in "Notification for a New Partition":  https://cwiki.apache.org/confluence/display/Hive/HCatalog+Notification#HCatalogNotification-NotificationforaNewPartition., 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12624843/HIVE-6268.patch

{color:red}ERROR:{color} -1 due to 5 failed/errored test(s), 4958 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucketizedhiveinputformat
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucketmapjoin6
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_import_exported_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_load_hdfs_file_with_space_in_the_name
org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_file_with_header_footer_negative
{noformat}

Test results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1022/testReport
Console output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1022/console

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12624843, (Attaching updated patch), One more modification to try and have the first interval where it checks whether to expire from cache or not be early if the user has set a short timeout., @Lefty : The parameters documentation for HCat, I'm afraid is lacking. I will take that on as a todo. I've created another hive jira and  assigned it to myself : https://issues.apache.org/jira/browse/HIVE-6332, +1, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12625972/HIVE-6268.3.patch

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 4972 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucket_num_reducers
{noformat}

Test results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1110/testReport
Console output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1110/console

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12625972, Patch committed to trunk. Thanks for the contribution Sushanth!
, *hcatalog.hive.client.cache.disabled* will be documented with HIVE-6332:  HCatConstants Documentation needed.

Should it also be documented here in a release note?  (I'd say yes, because HIVE-6332 might not get done in time for release 0.13.0.), Hi Lefty, Yes, I think we should document it in a release note. I'm planning on finishing HIVE-6332 in a week but it's good to have it in a release note as well.]