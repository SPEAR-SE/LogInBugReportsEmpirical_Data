[Operations related to table creation will normally lowercase the db/table names before doing certain tasks.

But for ALTER TABLE things are different. Specifically, if a table is renamed and given a new mixed-case name, HDFS directory is created with mixed case as is. That is not consistent to CREATE TABLE behavior. Moreover, this will cause issue for example if users want to load data directly to HDFS under the table directory, or use some scripts to check data size on HDFS path.

Example
{code}
hive> create table OldName (a int);
OK
Time taken: 3.125 seconds
hive> desc formatted oldname;
OK
# col_name            	data_type           	comment

a                   	int

# Detailed Table Information
Database:           	default
Owner:              	hive
CreateTime:         	Mon Feb 29 23:29:33 UTC 2016
LastAccessTime:     	UNKNOWN
Protect Mode:       	None
Retention:          	0
Location:           	hdfs://sandbox.hortonworks.com:8020/apps/hive/warehouse/oldname
Table Type:         	MANAGED_TABLE
Table Parameters:
	transient_lastDdlTime	1456788573

# Storage Information
SerDe Library:      	org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe
InputFormat:        	org.apache.hadoop.mapred.TextInputFormat
OutputFormat:       	org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat
Compressed:         	No
Num Buckets:        	-1
Bucket Columns:     	[]
Sort Columns:       	[]
Storage Desc Params:
	serialization.format	1
Time taken: 0.754 seconds, Fetched: 26 row(s)
hive> alter table oldname rename to newName;
OK
Time taken: 1.625 seconds
hive> desc formatted newname;
OK
# col_name            	data_type           	comment

a                   	int

# Detailed Table Information
Database:           	default
Owner:              	hive
CreateTime:         	Mon Feb 29 23:29:33 UTC 2016
LastAccessTime:     	UNKNOWN
Protect Mode:       	None
Retention:          	0
Location:           	hdfs://sandbox.hortonworks.com:8020/apps/hive/warehouse/newName
Table Type:         	MANAGED_TABLE
Table Parameters:
	last_modified_by    	hive
	last_modified_time  	1456788604
	transient_lastDdlTime	1456788604

# Storage Information
SerDe Library:      	org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe
InputFormat:        	org.apache.hadoop.mapred.TextInputFormat
OutputFormat:       	org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat
Compressed:         	No
Num Buckets:        	-1
Bucket Columns:     	[]
Sort Columns:       	[]
Storage Desc Params:
	serialization.format	1
Time taken: 0.485 seconds, Fetched: 28 row(s)
{code}, 

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12790628/HIVE-13186.1.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 8 failed/errored test(s), 9780 tests executed
*Failed tests:*
{noformat}
TestSparkCliDriver-groupby3_map.q-sample2.q-auto_join14.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-groupby_map_ppr_multi_distinct.q-table_access_keys_stats.q-groupby4_noskew.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-join_rc.q-insert1.q-vectorized_rcfile_columnar.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-ppd_join4.q-join9.q-ppd_join3.q-and-12-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hive.jdbc.TestSSL.testSSLVersion
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7138/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7138/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7138/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12790628 - PreCommit-HIVE-TRUNK-Build, Test failures don't fail locally on my laptop, and they don't seem related to the change.

[~jdere] Can you take a look?, +1, Committed to master/branch-1]