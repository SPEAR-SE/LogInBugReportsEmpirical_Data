[Link: goo.gl/fAoRn, http://mail-archives.apache.org/mod_mbox/db-jdo-dev/201302.mbox/%3CCAGZB7RguuEJnpVbtaqOgYEbsUNzP3aMSmM8SM8aOxcb-hLWwjg@mail.gmail.com%3E, Upgraded jdo-api to 3.0.1. Running test., navis requested code review of "HIVE-4089 [jira] javax.jdo : jdo2-api dependency not in Maven Central".

Reviewers: JIRA

HIVE-4089 javax.jdo : jdo2-api dependency not in Maven Central

The latest open source hive release (0.10.0) depends on javax.jdo artifact jdo2-api version 2.3-ec. This version is not actually in maven central, which means everyone who uses hive requires custom maven repository definitions which is discouraged by maven folks. I pinged the javax.jdo guys about it and they recommended we upgrade to 3.0. See http://goo.gl/fAoRn for the conversation.

TEST PLAN
  EMPTY

REVISION DETAIL
  https://reviews.facebook.net/D11253

AFFECTED FILES
  ivy/libraries.properties
  metastore/ivy.xml

MANAGE HERALD RULES
  https://reviews.facebook.net/herald/view/differential/

WHY DID I GET THIS EMAIL?
  https://reviews.facebook.net/herald/transcript/26775/

To: JIRA, navis
, Passed all tests, +1, Going down to the eb version works as well. Passing tests is good but you REALLY need to try this in combination with the pooling implementations and real databases, like mysql. In the past tests with derby will pass but behind the scenes and it will not work with mysql, or will not work correctly with the pooling implementation., DN author [~andy] comments on mail thread above is worth considering.
{quote}
> "jdo2-api-2.3-ec" was an artifact created by DataNucleus as a temporary
> measure so that we could continue to provide new features for things that
> were
> not officially released on Apache JDO (due to the time it was taking to
> get an
> official release).
>
> I can't see how Apache JDO can push something to Maven Central when they
> didn't provide it in the first place. You would be better advised to
> upgrade
> your project to use "jdo-api-3.0.jar" which was released 2 years ago and
> superceded "v2.3-ec" and _likely_ would be compatible.
{quote}

In light of this I strongly believe we should upgrade to 3.0.1 
[~appodictic] If you test it as you suggested above and find out that for some arcane reason our current version 2.3-ec turns out to be better than 3.0.1 even in that case since 2.3-ec is not a supported version, if there are bugs or other issues in future we need to upgrade than. Since we already have 1 issue at hand, I think we should upgrade now. What do you think?, Upgrading is a good idea. I wanted to point out that passing all tests may not necessarily indicate there are no issues and some manual testing with mysql might be a good idea., Yes I also think test cases in hive does not confirm the safety of upgrade but it confirms APIs are compatible at least. We've some time till next release, so let's see what's happening with 3.0.1 and rollback if it's not good. 
, Committed to trunk. Thanks, Navis!, Integrated in Hive-trunk-h0.21 #2181 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2181/])
    HIVE-4089 : javax.jdo : jdo2-api dependency not in Maven Central (Navis via Ashutosh Chauhan) (Revision 1500186)

     Result = FAILURE
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1500186
Files : 
* /hive/trunk/ivy/libraries.properties
* /hive/trunk/metastore/ivy.xml
, Integrated in Hive-trunk-hadoop2-ptest #9 (See [https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/9/])
    HIVE-4089 : javax.jdo : jdo2-api dependency not in Maven Central (Navis via Ashutosh Chauhan) (Revision 1500186)

     Result = FAILURE
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1500186
Files : 
* /hive/trunk/ivy/libraries.properties
* /hive/trunk/metastore/ivy.xml
, Integrated in Hive-trunk-hadoop1-ptest #28 (See [https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/28/])
    HIVE-4089 : javax.jdo : jdo2-api dependency not in Maven Central (Navis via Ashutosh Chauhan) (Revision 1500186)

     Result = SUCCESS
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1500186
Files : 
* /hive/trunk/ivy/libraries.properties
* /hive/trunk/metastore/ivy.xml
, Integrated in Hive-trunk-hadoop2 #273 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/273/])
    HIVE-4089 : javax.jdo : jdo2-api dependency not in Maven Central (Navis via Ashutosh Chauhan) (Revision 1500186)

     Result = ABORTED
hashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1500186
Files : 
* /hive/trunk/ivy/libraries.properties
* /hive/trunk/metastore/ivy.xml
, This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.]