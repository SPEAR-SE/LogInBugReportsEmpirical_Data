[

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12657554/HIVE-6978.1.patch.txt

{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 5756 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/42/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/42/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-42/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12657554, +1, Thanks for fixing my bug :)

I may be missing something, but it looks like the only error condition covered by unit-tests is an error involving unmatched args.
Can we also add a tests that validates that we get an error code when the query fails (for example as result of SemanticException)? Otherwise this issue may return in the future and we won't know about it., Committed to trunk. Thanks, Navis!, [~gwenshap] Sorry missed your comment. [~navis] Gwen's request is legit, it will be good to add such a test case. Can be done in a follow-up., This has been fixed in 0.14 release. Please open new jira if you see any issues.
]