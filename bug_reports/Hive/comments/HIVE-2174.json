[Yes, that's a documentation bug. We should always run 'ant package' before running tests or anything. ant package will download some necessary ivy packages and put necessary jar files under build/ directory. For the particular error, I think it is because the derby.jar is not present in the build/ directory without 'ant package'. 

A fix to the code would be to make 'ant test' dependent on 'package'. But the downside is that each time your run some test it calls 'package', which is not necessary for the 2nd time. , Thanks Ning, I updated the following page, perhaps you can review: http://wiki.apache.org/hadoop/Hive/HowToContribute

Any suggestions where else to look for instructions that should be fixed up? I grepped the latest codebase but didn't see anything obvious., If the "test" target has a dependency on "package", then this dependency should be made explicit in build.xml. right now "test" indirectly depends on "jar", which is why running 'ant test -Dtestcase=TestCliDriver -Dqfile=bucketmapjoin1.q" fails.

Also, instead of modifying the "test" target dependencies, I think we should instead try to adhere to ant conventions and instead modify the test.classpath so that it will work after running the "jar" target.
 , @Patrick, thanks for fixing the wiki!

@Carl, fixing the test.classpath would work too. Currently without 'ant package' (which is actually the installation process) there is no build/dist/lib created. If we can make test.classpath depend on build/dist/lib, that should implicitly make 'ant test' dependent on 'ant package', but without running 'ant package' every time 'ant test' is run.   ]