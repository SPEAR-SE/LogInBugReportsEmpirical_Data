[FYI [~aihuaxu], I will work on that. , Only create hmsHandler when DBTokenStore is used., [~szehon] Can you take a look at the change?, Can you create a rb for this?, RB: https://reviews.apache.org/r/32551/, Address comments., Thanks, +1 on latest patch pending test, 

{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12707669/HIVE-10093.patch

{color:red}ERROR:{color} -1 due to 3 failed/errored test(s), 8678 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testMetastoreProxyUser
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore
org.apache.hive.jdbc.TestSSL.testSSLFetchHttp
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3178/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3178/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3178/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12707669 - PreCommit-HIVE-TRUNK-Build, I ran those tests locally and didn't see the issues. Seems random failures as well., Aihua, .reviewboardrc is modified by mistake right?  If so I can commit the patch without it.  Thanks, Whoops. I included it by accident. , Committed to trunk, thanks Aihua!, Thanks Szehon., This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.]