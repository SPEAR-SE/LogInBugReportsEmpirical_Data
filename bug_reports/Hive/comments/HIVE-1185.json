[adopted the patch from hadoop-5476, +1. Will test and commit.
(Please do "Submit Patch" after you uploaded the patch file next time), Unfortunately it does not compile with hadoop 0.17.

Can you add "IOUtils.cleanup" to shims?

{code}
    [javac] Compiling 22 source files to /data/users/zshao/hadoop_hive_trunk/build/ql/classes
    [javac] /data/users/zshao/hadoop_hive_trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFile.java:988: cannot find symbol
    [javac] symbol  : method cleanup(org.apache.commons.logging.Log,org.apache.hadoop.fs.FSDataInputStream)
    [javac] location: class org.apache.hadoop.io.IOUtils
    [javac]           IOUtils.cleanup(LOG, in);
{code}
,  we need to close that stream no matter what the current hadoop version is. So i just closed that stream inside rcfile reader., Committed to both branch-0.5 and trunk. Thanks Yongqiang!
, This was not backported to 0.5.0.]