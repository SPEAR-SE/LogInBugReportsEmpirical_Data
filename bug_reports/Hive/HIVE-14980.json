{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "percent": 0,
            "progress": 0,
            "total": 345600
        },
        "aggregatetimeestimate": 345600,
        "aggregatetimeoriginalestimate": 345600,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Mahipal Jupalli",
            "key": "mahipal.jupalli",
            "name": "mahipal.jupalli",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=mahipal.jupalli",
            "timeZone": "America/Los_Angeles"
        },
        "components": [
            {
                "description": "Tracks issue dealing with metastore.",
                "id": "12312584",
                "name": "Metastore",
                "self": "https://issues.apache.org/jira/rest/api/2/component/12312584"
            },
            {
                "description": "Transaction management and ACID",
                "id": "12322671",
                "name": "Transactions",
                "self": "https://issues.apache.org/jira/rest/api/2/component/12322671"
            }
        ],
        "created": "2016-10-15T23:00:55.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Mahipal Jupalli",
            "key": "mahipal.jupalli",
            "name": "mahipal.jupalli",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=mahipal.jupalli",
            "timeZone": "America/Los_Angeles"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2016-10-17T19:23:30.140+0000",
        "customfield_12310222": "1_*:*_1_*:*_30399643027_*|*_5_*:*_1_*:*_0",
        "customfield_12310230": null,
        "customfield_12310250": [
            {
                "id": "10430",
                "self": "https://issues.apache.org/jira/rest/api/2/customFieldOption/10430",
                "value": "Patch"
            },
            {
                "id": "10431",
                "self": "https://issues.apache.org/jira/rest/api/2/customFieldOption/10431",
                "value": "Important"
            }
        ],
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12310920": "9223372036854775807",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i34y3z:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Oct 02 19:21:38 UTC 2017",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "I have two tables (TABLEA, TABLEB). If I manually trigger compaction after each INSERT into TABLEB from TABLEA, compactions are triggered on random metastore asynchronously and are stepping on each other which is causing the data to be deleted.\n\nExample here: \nTABLEA - has 10k rows. \n\ninsert into mj.tableb select * from mj.tablea;\nalter table mj.tableb compact 'MINOR';\ninsert into mj.tableb select * from mj.tablea;\nalter table mj.tableb compact 'MINOR';\n\nOnce all the compactions are complete, I should ideally see 20k rows in TABLEB. But I see only 10k rows (Only the rows INSERTED before the last compaction persist, the old rows are deleted. I believe the old delta files are deleted). \n\nTo further confirm the bug, if I do only one compaction after two inserts, I see 20k rows in TABLEB.\n\nProposed Fix:\nI have identified the bug in the code, it requires an additional check in the org.apache.hadoop.hive.ql.txn.compactor.Worker class to check for any active compactions on the table/partition. I will 'share the details of the fix once I test it.",
        "duedate": null,
        "environment": null,
        "fixVersions": [],
        "issuelinks": [{
            "id": "12486734",
            "inwardIssue": {
                "fields": {
                    "issuetype": {
                        "avatarId": 21133,
                        "description": "A problem which impairs or prevents the functions of the product.",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                        "id": "1",
                        "name": "Bug",
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                        "subtask": false
                    },
                    "priority": {
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "id": "3",
                        "name": "Major",
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                    },
                    "status": {
                        "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                        "id": "6",
                        "name": "Closed",
                        "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                        "statusCategory": {
                            "colorName": "green",
                            "id": 3,
                            "key": "done",
                            "name": "Done",
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                        }
                    },
                    "summary": "Concurrent compactions for the same partition may generate malformed folder structure"
                },
                "id": "13020715",
                "key": "HIVE-15202",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13020715"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12486734",
            "type": {
                "id": "10030",
                "inward": "is related to",
                "name": "Reference",
                "outward": "relates to",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
            }
        }],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/critical.svg",
            "id": "2",
            "name": "Critical",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/2"
        },
        "progress": {
            "percent": 0,
            "progress": 0,
            "total": 345600
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935"
            },
            "id": "12310843",
            "key": "HIVE",
            "name": "Hive",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310843"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Mahipal Jupalli",
            "key": "mahipal.jupalli",
            "name": "mahipal.jupalli",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=mahipal.jupalli",
            "timeZone": "America/Los_Angeles"
        },
        "resolution": {
            "description": "Not A Bug",
            "id": "10004",
            "name": "Not A Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/10004"
        },
        "resolutiondate": "2017-10-02T19:21:38.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "Minor compaction when triggered simultaniously on the same table/partition deletes data",
        "timeestimate": 345600,
        "timeoriginalestimate": 345600,
        "timespent": null,
        "updated": "2017-10-02T19:21:38.000+0000",
        "versions": [{
            "archived": false,
            "id": "12334255",
            "name": "2.1.0",
            "releaseDate": "2016-06-20",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12334255"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-14980/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-14980/watchers",
            "watchCount": 5
        },
        "workratio": 0
    },
    "id": "13012644",
    "key": "HIVE-14980",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13012644"
}