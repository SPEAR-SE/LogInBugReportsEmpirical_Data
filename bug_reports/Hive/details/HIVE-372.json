{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12419540","self":"https://issues.apache.org/jira/rest/api/2/issue/12419540","key":"HIVE-372","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313637","id":"12313637","description":"released","name":"0.3.0","archived":false,"released":true,"releaseDate":"2009-04-30"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-03-26T18:01:22.267+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Apr 15 19:19:48 UTC 2009","customfield_12310420":"73581","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1741094311_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2009-04-15T19:19:48.366+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-372/watchers","watchCount":2,"isWatching":false},"created":"2009-03-26T15:41:34.055+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12324248","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12324248","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12422840","key":"HIVE-415","self":"https://issues.apache.org/jira/rest/api/2/issue/12422840","fields":{"summary":"Long queries does not parse in Hive","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12324173","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12324173","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"12409611","key":"HIVE-95","self":"https://issues.apache.org/jira/rest/api/2/issue/12409611","fields":{"summary":"improve cli error messages by lowering backtracking to 1","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:23.417+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312586","id":"12312586","name":"Query Processor","description":"Tracks issues dealing with query processing."},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313585","id":"12313585","name":"UDF","description":"This includes the UDFs and UDAFs"}],"timeoriginalestimate":null,"description":"When nesting UDFs, the Hive Query processor takes a large amount of time+memory to process the query. For example, I ran something along the lines of:\n\nselect trim( trim( trim(trim( trim( trim( trim( trim( trim(column))))))))) from test_table;\n\nThis query needs 10GB+ of memory to process before it'll launch the job. The amount of memory increases exponentially with each nested UDF.\n\nObviously, I am using trim() in this case as a simple example that causes the same problem to occur. In my actual use-case I had a bunch of nested regexp_replaces.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12405145","id":"12405145","filename":"HIVE-372.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-10T07:40:52.399+0000","size":4992,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12405145/HIVE-372.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12405150","id":"12405150","filename":"HIVE-372.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-10T10:48:04.700+0000","size":6456,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12405150/HIVE-372.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12405476","id":"12405476","filename":"HIVE-372.2.trunk.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-14T23:14:38.906+0000","size":6464,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12405476/HIVE-372.2.trunk.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"122178","customfield_12312823":null,"summary":"Nested UDFs cause _very_ high memory usage when processing query","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scorona","name":"scorona","key":"scorona","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Corona","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scorona","name":"scorona","key":"scorona","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Corona","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Fedora Linux, 10x Amazon EC2 (Large Instance w/ 8GB Ram)","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12689578","id":"12689578","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rl337","name":"rl337","key":"rl337","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard Lee","active":true,"timeZone":"Etc/UTC"},"body":"I've also noticed this problem.   based on the thread dump i saw... it looks like there's some bigtime indirect recursion... i'm guessing the parser is implemented recursive descent and each time we recurse into the next level of function some sizable amount of memory is used up.\n\nHere's a stacktrace of a select with 8 nested trims:\n       at org.antlr.runtime.CommonTokenStream.LB(CommonTokenStream.java:289)\n        at org.antlr.runtime.CommonTokenStream.LT(CommonTokenStream.java:244)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedencePlusExpression(HiveParser.java:14723)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAmpersandExpression(HiveParser.java:14819)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseOrExpression(HiveParser.java:14956)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceEqualExpression(HiveParser.java:15100)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceNotExpression(HiveParser.java:15264)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAndExpression(HiveParser.java:15367)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceOrExpression(HiveParser.java:15504)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.expression(HiveParser.java:13455)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.function(HiveParser.java:12888)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.atomExpression(HiveParser.java:13624)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceFieldExpression(HiveParser.java:13728)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163_fragment(HiveParser.java:16523)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163(HiveParser.java:16734)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceUnaryExpression(HiveParser.java:14059)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseXorExpression(HiveParser.java:14394)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceStarExpression(HiveParser.java:14538)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedencePlusExpression(HiveParser.java:14682)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAmpersandExpression(HiveParser.java:14819)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseOrExpression(HiveParser.java:14956)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceEqualExpression(HiveParser.java:15100)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceNotExpression(HiveParser.java:15264)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAndExpression(HiveParser.java:15367)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceOrExpression(HiveParser.java:15504)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.expression(HiveParser.java:13455)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.function(HiveParser.java:12888)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.atomExpression(HiveParser.java:13624)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceFieldExpression(HiveParser.java:13728)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceUnaryExpression(HiveParser.java:14289)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseXorExpression(HiveParser.java:14394)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceStarExpression(HiveParser.java:14538)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedencePlusExpression(HiveParser.java:14682)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAmpersandExpression(HiveParser.java:14819)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseOrExpression(HiveParser.java:14956)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceEqualExpression(HiveParser.java:15100)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceNotExpression(HiveParser.java:15264)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAndExpression(HiveParser.java:15367)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceOrExpression(HiveParser.java:15504)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.expression(HiveParser.java:13455)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.function(HiveParser.java:12888)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred155_fragment(HiveParser.java:16479)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred155(HiveParser.java:16804)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.atomExpression(HiveParser.java:13537)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceFieldExpression(HiveParser.java:13728)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceUnaryExpression(HiveParser.java:14289)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseXorExpression(HiveParser.java:14394)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceStarExpression(HiveParser.java:14538)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedencePlusExpression(HiveParser.java:14682)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAmpersandExpression(HiveParser.java:14819)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseOrExpression(HiveParser.java:14956)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceEqualExpression(HiveParser.java:15100)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceNotExpression(HiveParser.java:15264)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAndExpression(HiveParser.java:15367)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceOrExpression(HiveParser.java:15504)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.expression(HiveParser.java:13455)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.function(HiveParser.java:12888)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.atomExpression(HiveParser.java:13624)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceFieldExpression(HiveParser.java:13728)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163_fragment(HiveParser.java:16523)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163(HiveParser.java:16734)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceUnaryExpression(HiveParser.java:14059)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseXorExpression(HiveParser.java:14394)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceStarExpression(HiveParser.java:14538)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedencePlusExpression(HiveParser.java:14682)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAmpersandExpression(HiveParser.java:14819)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseOrExpression(HiveParser.java:14956)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceEqualExpression(HiveParser.java:15100)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceNotExpression(HiveParser.java:15264)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAndExpression(HiveParser.java:15367)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceOrExpression(HiveParser.java:15504)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.expression(HiveParser.java:13455)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.function(HiveParser.java:12888)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.atomExpression(HiveParser.java:13624)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceFieldExpression(HiveParser.java:13728)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163_fragment(HiveParser.java:16523)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163(HiveParser.java:16734)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceUnaryExpression(HiveParser.java:14059)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseXorExpression(HiveParser.java:14394)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceStarExpression(HiveParser.java:14538)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedencePlusExpression(HiveParser.java:14682)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAmpersandExpression(HiveParser.java:14819)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseOrExpression(HiveParser.java:14956)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceEqualExpression(HiveParser.java:15100)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceNotExpression(HiveParser.java:15264)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAndExpression(HiveParser.java:15367)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceOrExpression(HiveParser.java:15504)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.expression(HiveParser.java:13455)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.function(HiveParser.java:12888)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.atomExpression(HiveParser.java:13624)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceFieldExpression(HiveParser.java:13728)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163_fragment(HiveParser.java:16523)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163(HiveParser.java:16734)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceUnaryExpression(HiveParser.java:14059)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseXorExpression(HiveParser.java:14394)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceStarExpression(HiveParser.java:14538)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedencePlusExpression(HiveParser.java:14682)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAmpersandExpression(HiveParser.java:14819)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseOrExpression(HiveParser.java:14956)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceEqualExpression(HiveParser.java:15100)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceNotExpression(HiveParser.java:15264)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAndExpression(HiveParser.java:15367)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceOrExpression(HiveParser.java:15504)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.expression(HiveParser.java:13455)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.function(HiveParser.java:12888)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred155_fragment(HiveParser.java:16479)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred155(HiveParser.java:16804)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.atomExpression(HiveParser.java:13537)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceFieldExpression(HiveParser.java:13728)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163_fragment(HiveParser.java:16523)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.synpred163(HiveParser.java:16734)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceUnaryExpression(HiveParser.java:14059)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseXorExpression(HiveParser.java:14394)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceStarExpression(HiveParser.java:14538)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedencePlusExpression(HiveParser.java:14682)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAmpersandExpression(HiveParser.java:14819)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceBitwiseOrExpression(HiveParser.java:14956)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceEqualExpression(HiveParser.java:15100)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceNotExpression(HiveParser.java:15264)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceAndExpression(HiveParser.java:15367)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.precedenceOrExpression(HiveParser.java:15504)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.expression(HiveParser.java:13455)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.selectExpression(HiveParser.java:10075)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.selectItem(HiveParser.java:9655)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.selectList(HiveParser.java:9536)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.selectClause(HiveParser.java:9284)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.regular_body(HiveParser.java:7893)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.queryStatement(HiveParser.java:7527)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.queryStatementExpression(HiveParser.java:7332)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.execStatement(HiveParser.java:583)\n        at org.apache.hadoop.hive.ql.parse.HiveParser.statement(HiveParser.java:369)\n        at org.apache.hadoop.hive.ql.parse.ParseDriver.parse(ParseDriver.java:355)\n        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:184)\n        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:174)\n        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:207)\n        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:306)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:165)\n        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:54)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)\n        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:68)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rl337","name":"rl337","key":"rl337","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard Lee","active":true,"timeZone":"Etc/UTC"},"created":"2009-03-26T18:01:22.267+0000","updated":"2009-03-26T18:01:22.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12697701","id":"12697701","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"The reason is that \"backtrack\" is enabled in Hive.g. However in order to disable \"backtrack\" we need to do some other cleanup of the grammar to make sure it's LL(k).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-10T01:03:41.129+0000","updated":"2009-04-10T01:03:41.129+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12697705","id":"12697705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"By just modifying \"k=1\" to \"k=3\", the compilation was much faster. We were also able to identify the correct error like the following:\n\n{code}\nhive> create table test (a int b);\nFAILED: Parse Error: line 2:25 mismatched input 'b' expecting ) in create statement\n{code}\n\nOriginally it was:\n{code}\nhive> create table test (a int b);\nFAILED: Parse Error: line 2:7 mismatched input 'table' expecting TEMPORARY in create function statement\n{code}\n\n\nI guess the reason is that k=3 makes sure in most cases, we don't need to backtrack. (We still need backtracking in some cases, since when I switch backtracking I saw some warnings from antlr).\n\nI will make a patch to change k=1 to k=3, and add a test case for the above, then I will leave the backtracking problem a bit later.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-10T01:25:20.306+0000","updated":"2009-04-10T01:25:20.306+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12697761","id":"12697761","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Changed k=1 to k=3. Added 3 test cases. Fix an existing test case.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-10T07:40:52.444+0000","updated":"2009-04-10T07:40:52.444+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12697790","id":"12697790","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"This attached patch contains changed output files.\n\nThere is one regression - \"CREATE TABL test ...\" is reporting error in \"CREATE\" now.  I tried to fix that but I didn't succeed. It probably needs much more effort.  Basically, we may see this kind of problems for any consecutive keywords.\n\nHowever this patch does detect a lot of the syntax errors much better than before (See other new/changed test cases), so I still think we should still include this in 0.3.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-10T10:48:04.814+0000","updated":"2009-04-10T10:48:04.814+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12697865","id":"12697865","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"body":"should we first figure out why create table is misreporting things? I fear that we may be swapping one set of bad error messages with another.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"created":"2009-04-10T17:18:39.526+0000","updated":"2009-04-10T17:18:39.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12697999","id":"12697999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"The patch is mainly for fixing the long-query problem - like 80-union query and this long-udf query.\n\nThe error message is kind of a side effect - and overall we are seeing more error messages (Just see all the changed error messages in the diff)\n\nWe could also do a more thorough fix of the grammar, but that will potentially take much longer, and it may not be that prioritized compared wtih other to-do items.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-10T22:13:11.111+0000","updated":"2009-04-10T22:13:11.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12698507","id":"12698507","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"body":"+1.\n\nLooks good to me.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"created":"2009-04-13T19:24:41.755+0000","updated":"2009-04-13T19:24:41.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12698566","id":"12698566","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"While committing, I got the following errors:\n\n    [junit] diff -a -I \\(file:\\)\\|\\(/tmp/.*\\) /data/users/njain/hive_br3_commit/hive_br3_commit/build/ql/test/logs/clientnegative/invalid_create_tbl2.q.out /data/users/njain/hive_br3_commit/hive_br3_commit/ql/src/test/results/clientnegative/invalid_create_tbl2.q.out\n    [junit] 1c1\n    [junit] < FAILED: Parse Error: line 1:0 cannot recognize input 'create' in ddl statement\n    [junit] ---\n    [junit] > FAILED: Parse Error: line 1:7 mismatched input 'tabl' expecting TEMPORARY in create function statement\n    [junit] Exception: Client execution results failed with error code = 1\n    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1\n    [junit] \tat junit.framework.Assert.fail(Assert.java:47)\n    [junit] \tat org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_invalid_create_tbl2(TestNegativeCliDriver.java:591)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:597)\n    [junit] \tat junit.framework.TestCase.runTest(TestCase.java:154)\n    [junit] \tat junit.framework.TestCase.runBare(TestCase.java:127)\n    [junit] \tat junit.framework.TestResult$1.protect(TestResult.java:106)\n    [junit] \tat junit.framework.TestResult.runProtected(TestResult.java:124)\n    [junit] \tat junit.framework.TestResult.run(TestResult.java:109)\n    [junit] \tat junit.framework.TestCase.run(TestCase.java:118)\n    [junit] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n    [junit] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:297)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:672)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:567)\n    [junit] Begin query: invalid_select_expression.q\n    [junit] Hive history file=/data/users/njain/hive_br3_commit/hive_br3_commit/ql/../build/ql/tmp/hive_job_log_njain_200904131444_1922313556.txt\n    [junit] diff -a -I \\(file:\\)\\|\\(/tmp/.*\\) /data/users/njain/hive_br3_commit/hive_br3_commit/build/ql/test/logs/clientnegative/invalid_select_expression.q.out /data/users/njain/hive_br3_commit/hive_br3_commit/ql/src/test/results/clientnegative/invalid_select_expression.q.out\n    [junit] 1c1\n    [junit] < FAILED: Parse Error: line 1:32 cannot recognize input '.' in expression specification\n    [junit] ---\n    [junit] > FAILED: Parse Error: line 1:32 cannot recognize input '.' in table column identifier\n    [junit] Exception: Client execution results failed with error code = 1\n    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1\n    [junit] \tat junit.framework.Assert.fail(Assert.java:47)\n    [junit] \tat org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_invalid_select_expression(TestNegativeCliDriver.java:616)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:597)\n    [junit] \tat junit.framework.TestCase.runTest(TestCase.java:154)\n    [junit] \tat junit.framework.TestCase.runBare(TestCase.java:127)\n    [junit] \tat junit.framework.TestResult$1.protect(TestResult.java:106)\n    [junit] \tat junit.framework.TestResult.runProtected(TestResult.java:124)\n    [junit] \tat junit.framework.TestResult.run(TestResult.java:109)\n    [junit] \tat junit.framework.TestCase.run(TestCase.java:118)\n    [junit] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n    [junit] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:297)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:672)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:567)\n    [junit] Begin query: invalid_tbl_name.q\n    [junit] Hive history file=/data/users/njain/hive_br3_commit/hive_br3_commit/ql/../build/ql/tmp/hive_job_log_njain_200904131444_1797516854.txt\n    [junit] diff -a -I \\(file:\\)\\|\\(/tmp/.*\\) /data/users/njain/hive_br3_commit/hive_br3_commit/build/ql/test/logs/clientnegative/invalid_tbl_name.q.out /data/users/njain/hive_br3_commit/hive_br3_commit/ql/src/test/results/clientnegative/invalid_tbl_name.q.out\n    [junit] 1c1\n    [junit] < FAILED: Parse Error: line 1:20 mismatched input '-' expecting EOF\n    [junit] ---\n    [junit] > FAILED: Parse Error: line 1:20 mismatched input '-' expecting EOF in statement\n\ncan you fix and regenerate the patch ?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2009-04-13T21:58:13.552+0000","updated":"2009-04-13T21:58:13.552+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12698611","id":"12698611","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"the .2 patch also failed for sort.q\n\n    [junit] 09/04/13 18:10:01 ERROR exec.ExecDriver: Job Submission failed with exception 'java.io.IOExcep\\\ntion(Failed to get the current user's information.)'\n    [junit] java.io.IOException: Failed to get the current user's information.\n    [junit]   at org.apache.hadoop.mapred.JobClient.getUGI(JobClient.java:717)\n    [junit]   at org.apache.hadoop.mapred.JobClient.configureCommandLineOptions(JobClient.java:592)\n    [junit]   at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:774)\n    [junit]   at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:393)\n    [junit]   at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:556)\n    [junit]   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit]   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [junit]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [junit]   at java.lang.reflect.Method.invoke(Method.java:597)\n    [junit]   at org.apache.hadoop.util.RunJar.main(RunJar.java:165)\n    [junit]   at org.apache.hadoop.mapred.JobShell.run(JobShell.java:54)\n    [junit]   at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)\n    [junit]   at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)\n    [junit]   at org.apache.hadoop.mapred.JobShell.main(JobShell.java:68)\n    [junit] Caused by: javax.security.auth.login.LoginException: Login failed: whoami: cannot find usernam\\\ne for UID 1688\n\n\n\nI dont think this has anything to do with your patch, but will run the tests again and see\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2009-04-14T01:35:19.375+0000","updated":"2009-04-14T01:35:19.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12698817","id":"12698817","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"committed in branch 3. \nHowever, I am getting the following error in trunk:\n\n    [junit] diff -a -I \\(file:\\)\\|\\(/tmp/.*\\) /data/users/njain/hive_commit/tru\\\nnk/build/ql/test/logs/clientpositive/udf_10_trims.q.out /data/users/njain/hive_\\\ncommit/trunk/ql/src/test/results/clientpositive/udf_10_trims.q.out\n    [junit] 30c30\n    [junit] <                         output format: org.apache.hadoop.hive.ql.\\\nio.HiveIgnoreKeyTextOutputFormat\n    [junit] ---\n    [junit] >                         output format: org.apache.hadoop.hive.ql.\\\nio.IgnoreKeyTextOutputFormat\n    [junit] 40c40\n    [junit] <                 output format: org.apache.hadoop.hive.ql.io.HiveI\\\ngnoreKeyTextOutputFormat\n    [junit] ---\n    [junit] >                 output format: org.apache.hadoop.hive.ql.io.Ignor\\\neKeyTextOutputFormat\n\n\n\nZheng, can you create a new patch for trunk ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2009-04-14T15:54:22.795+0000","updated":"2009-04-14T15:54:22.795+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12698979","id":"12698979","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Adapted to trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-04-14T23:14:38.938+0000","updated":"2009-04-14T23:14:38.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419540/comment/12699322","id":"12699322","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"committed. Thanks Zheng","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2009-04-15T19:19:48.317+0000","updated":"2009-04-15T19:19:48.317+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-372/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0l9fj:"}}