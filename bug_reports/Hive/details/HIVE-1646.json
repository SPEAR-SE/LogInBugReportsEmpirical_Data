{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12474303","self":"https://issues.apache.org/jira/rest/api/2/issue/12474303","key":"HIVE-1646","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2010-09-16T18:59:00.916+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Sep 30 01:22:32 UTC 2010","customfield_12310420":"72796","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3732572830_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-10-29T22:50:00.990+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1646/watchers","watchCount":0,"isWatching":false},"created":"2010-09-16T18:00:28.160+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314156","id":"12314156","description":"released","name":"0.5.0","archived":false,"released":true,"releaseDate":"2010-02-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-10-29T22:50:00.969+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312590","id":"12312590","name":"Testing Infrastructure","description":"Tracks issues with tests and testing infrastructure."}],"timeoriginalestimate":null,"description":"I've tried this on a variety of configurations. Operating Systems SLES 10 SP2, SLES 11, RHEL 5.4 on a variety of machines using both ANT 1.8.1 and ANT 1.7.1 and SUN JDK 1.6.14. I've tried building this by going to the Hive Release page and download hive-0.5.0-src and using that. I've tried building by obtaining the branch tag release using svn checkout http://svn.apache.org/repos/asf/hadoop/hive/tags/release-0.5.0/ hive-0.5.0-dev. Always the same thing:\n\nWhen I run the Hive 0.5 build it runs for just under 2 hours and then crashes with the following message (tail end of ant.log):\n- - -\n    [junit] diff /home/hive/hive-0.5.0-build/hive-0.5.0-dev/build/ql/test/logs/negative/wrong_distinct2.q.out /home/hive/hive-0.5.0-build/hive-0.5.0-dev/ql/src/test/results/compiler/errors/wrong_distinct2.q.out\n    [junit] Done query: wrong_distinct2.q\n    [junit] Tests run: 31, Failures: 0, Errors: 0, Time elapsed: 90.974 sec\n    [junit] Running org.apache.hadoop.hive.ql.tool.TestLineageInfo\n    [junit] Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.525 sec\n\nBUILD FAILED\n/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build.xml:151: The following error occurred while executing this line:\n/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build.xml:91: The following error occurred while executing this line:\n/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build-common.xml:327: Tests failed!\n\nTotal time: 94 minutes 43 seconds\n- - -\n\nMy build script is very simplistic :\n\n#!/bin/sh\n\n# Set Build Dependencies\nset PATH=$PATH:/home/hive/Java-Versions/jdk1.6.0_14/bin/\n\nexport JAVA_HOME=/home/hive/Java-Versions/jdk1.6.0_14\nexport BUILD_DIR=/home/hive/hive-0.5.0-build\nexport ANT_HOME=$BUILD_DIR/apache-ant-1.8.1\nexport HIVE_INSTALL=$BUILD_DIR/hive-0.5.0-dev/\nexport PATH=$PATH:$ANT_HOME/bin\n\n# Run Build and Unit Test\ncd $HIVE_INSTALL\n\nant clean test tar -logfile ant.log","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"123271","customfield_12312823":null,"summary":"Hive 0.5 Build Crashing","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wattsteve","name":"wattsteve","key":"wattsteve","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wattsteve&avatarId=21033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wattsteve&avatarId=21033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wattsteve&avatarId=21033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wattsteve&avatarId=21033"},"displayName":"Stephen Watt","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wattsteve","name":"wattsteve","key":"wattsteve","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wattsteve&avatarId=21033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wattsteve&avatarId=21033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wattsteve&avatarId=21033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wattsteve&avatarId=21033"},"displayName":"Stephen Watt","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"SLES 10 SP2, SLES 11, RHEL 5.4, ANT 1.8.1 and ANT 1.7.1, SUN JDK 1.6.14","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474303/comment/12910266","id":"12910266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slider","name":"slider","key":"slider","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven K. Wong","active":true,"timeZone":"America/Los_Angeles"},"body":"A suggestion: Search through your ant test output to look for nonzero values of \"Failures:\" or \"Errors:\". That will tell you which test class(es) failed. Suppose you find that TestCliDriver failed. Then look at the file TEST-org.apache.hadoop.hive.cli.TestCliDriver.xml to identify which specific test case(s) failed. (I don't remember the exact location of the file, but you can find it somewhere under build.)\n\nNot sure if this is related, but when I ran ant test on trunk on my Mac OS X, 2 test cases failed because they called sed, and OS X's sed behaved differently than Linux's sed. I had to change the test cases a little for them to pass (not committed yet).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slider","name":"slider","key":"slider","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven K. Wong","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-16T18:59:00.916+0000","updated":"2010-09-16T18:59:00.916+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474303/comment/12910278","id":"12910278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wattsteve","name":"wattsteve","key":"wattsteve","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wattsteve&avatarId=21033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wattsteve&avatarId=21033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wattsteve&avatarId=21033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wattsteve&avatarId=21033"},"displayName":"Stephen Watt","active":true,"timeZone":"America/Chicago"},"body":"@Steven thanks for the comment. When a build is successful I would it expect it to complete, and then provide a report of which test cases failed. You can then use that to debug each test case individually in eclipse. This is at least the way it works with the Hadoop build. With this Hive build, it appears the actual build is crashing as it never gets to the point where the build completes and it provides the ant build report. I would expect for an official Hive release for the build to at least complete without crashing, even if there are one or two test cases that fail. \n\nDoes your build on OS/X actually complete and you see the build report? i.e.  You are not seeing this failure message?\n/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build.xml:151: The following error occurred while executing this line:\n/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build.xml:91: The following error occurred while executing this line:\n/home/hive/hive-0.5.0-build/hive-0.5.0-dev/build-common.xml:327: Tests failed!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wattsteve","name":"wattsteve","key":"wattsteve","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wattsteve&avatarId=21033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wattsteve&avatarId=21033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wattsteve&avatarId=21033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wattsteve&avatarId=21033"},"displayName":"Stephen Watt","active":true,"timeZone":"America/Chicago"},"created":"2010-09-16T19:29:20.957+0000","updated":"2010-09-16T19:29:20.957+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474303/comment/12910285","id":"12910285","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slider","name":"slider","key":"slider","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven K. Wong","active":true,"timeZone":"America/Los_Angeles"},"body":"I ran ant package and ant test as 2 separate commands. The former succeeded, the latter failed. The last few output lines of my ant test are:\n\n    [junit] Done query: wrong_distinct2.q\n    [junit] Tests run: 31, Failures: 0, Errors: 0, Time elapsed: 340.872 sec\n    [junit] Running org.apache.hadoop.hive.ql.tool.TestLineageInfo\n    [junit] Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.498 sec\n    [junit] Running org.apache.hadoop.hive.ql.udf.TestUDFDateAdd\n    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.264 sec\n    [junit] Running org.apache.hadoop.hive.ql.udf.TestUDFDateDiff\n    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.214 sec\n    [junit] Running org.apache.hadoop.hive.ql.udf.TestUDFDateSub\n    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.147 sec\n\nBUILD FAILED\n/Users/swong/dev/svn/asf/hadoop/hive/trunk/build.xml:168: The following error occurred while executing this line:\n/Users/swong/dev/svn/asf/hadoop/hive/trunk/build.xml:105: The following error occurred while executing this line:\n/Users/swong/dev/svn/asf/hadoop/hive/trunk/build-common.xml:446: Tests failed!\n\nTotal time: 190 minutes 53 seconds\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slider","name":"slider","key":"slider","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven K. Wong","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-16T19:58:16.254+0000","updated":"2010-09-16T19:58:16.254+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474303/comment/12910335","id":"12910335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wattsteve","name":"wattsteve","key":"wattsteve","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wattsteve&avatarId=21033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wattsteve&avatarId=21033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wattsteve&avatarId=21033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wattsteve&avatarId=21033"},"displayName":"Stephen Watt","active":true,"timeZone":"America/Chicago"},"body":"@Steven Many thanks for taking the time to reproduce the error ! I greatly appreciate it.\n\nI ran the ant targets individually and like yourself, the \"package\" and \"tar\" targets works just fine for me also. I am also seeing the failure occurring in the \"test\" target. I did a bit more digging and ran the dependency targets for \"test\" (clean-test and jar) and they completed successfully as well. This leaves me to believe that the build failure is occurring with the <iterate target=\"test\"/> command below:\n\n  <target name=\"test\"\n          depends=\"clean-test,jar\"\n          description=\"Run tests\">\n    <iterate target=\"test\"/>\n    <iterate-cpp target=\"test\"/>\n  </target>","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wattsteve","name":"wattsteve","key":"wattsteve","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wattsteve&avatarId=21033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wattsteve&avatarId=21033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wattsteve&avatarId=21033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wattsteve&avatarId=21033"},"displayName":"Stephen Watt","active":true,"timeZone":"America/Chicago"},"created":"2010-09-16T21:46:59.579+0000","updated":"2010-09-16T21:46:59.579+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474303/comment/12910400","id":"12910400","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slider","name":"slider","key":"slider","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven K. Wong","active":true,"timeZone":"America/Los_Angeles"},"body":"@Stephen I just looked at the saved output of my past ant runs. It hardly took any time. :)\n\nAnt test will fail if any test case fails.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slider","name":"slider","key":"slider","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven K. Wong","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-16T23:52:08.139+0000","updated":"2010-09-16T23:52:08.139+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474303/comment/12916336","id":"12916336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wattsteve","name":"wattsteve","key":"wattsteve","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wattsteve&avatarId=21033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wattsteve&avatarId=21033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wattsteve&avatarId=21033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wattsteve&avatarId=21033"},"displayName":"Stephen Watt","active":true,"timeZone":"America/Chicago"},"body":"I finally have this working. Apparently, the src tree from the Release TAR is what does not build. i.e. the tarball you get from \"Hive Downloads\". If you go ahead and do an svn checkout of \"http://svn.apache.org/repos/asf/hadoop/hive/tags/release-0.5.0/\" it will build. For the record, I was using ANT 1.8.1 and SUN JDK 1.6.14 \n\nI'm going to leave this open as there is still an issue as the Tarball is clearly different to the tagged release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wattsteve","name":"wattsteve","key":"wattsteve","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wattsteve&avatarId=21033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wattsteve&avatarId=21033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wattsteve&avatarId=21033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wattsteve&avatarId=21033"},"displayName":"Stephen Watt","active":true,"timeZone":"America/Chicago"},"created":"2010-09-30T01:22:32.968+0000","updated":"2010-09-30T01:22:32.968+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1646/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0lg6f:"}}