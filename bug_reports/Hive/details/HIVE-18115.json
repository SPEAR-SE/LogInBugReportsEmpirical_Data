{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13119984","self":"https://issues.apache.org/jira/rest/api/2/issue/13119984","key":"HIVE-18115","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340338","id":"12340338","name":"2.4.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2017-11-21T18:36:16.591+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Apr 02 16:56:54 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_12300_*|*_3_*:*_2_*:*_7633022_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_2_*:*_11375227678","customfield_12312321":null,"resolutiondate":"2018-04-02T09:49:27.939+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-18115/watchers","watchCount":4,"isWatching":false},"created":"2017-11-21T15:54:54.963+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341418","id":"12341418","name":"2.3.1","archived":false,"released":true,"releaseDate":"2017-10-24"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342053","id":"12342053","name":"2.3.2","archived":false,"released":true,"releaseDate":"2017-11-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-04-02T16:56:54.237+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Error while starting HiveMeta\r\n\r\n{code}\r\nCaused by: org.apache.hadoop.hive.metastore.api.MetaException: Hive Schema version 2.3.2 does not match metastore's schema version 2.3.0 Metastore is not upgraded or corrupt\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.checkSchema(ObjectStore.java:7600) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at org.apache.hadoop.hive.metastore.ObjectStore.verifySchema(ObjectStore.java:7563) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_141]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_141]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_141]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_141]\r\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.invoke(RawStoreProxy.java:101) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at com.sun.proxy.$Proxy23.verifySchema(Unknown Source) ~[?:?]\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMSForConf(HiveMetaStore.java:591) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:584) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:651) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:427) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_141]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_141]\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_141]\r\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_141]\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invokeInternal(RetryingHMSHandler.java:148) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:107) ~[hive-exec-2.3.2.jar:2.3.2]\r\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.<init>(RetryingHMSHandler.java:79) ~[hive-exec-2.3.2.jar:2.3.2]\r\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12898821","id":"12898821","filename":"HIVE-18115.02-branch-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-22T09:03:28.647+0000","size":1516,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12898821/HIVE-18115.02-branch-2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12898698","id":"12898698","filename":"HIVE-18115.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-21T17:56:45.927+0000","size":1519,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12898698/HIVE-18115.1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Fix schema version info for Hive-2.3.2","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16261169","id":"16261169","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"body":"*ROOT-CAUSE:*\r\n\r\nTable {{VERSION}} column {{SCHEMA_VERSION}} has value 2.3.0:\r\n\r\n{code}\r\nmysql> select * from VERSION;\r\n+--------+----------------+----------------------------+\r\n| VER_ID | SCHEMA_VERSION | VERSION_COMMENT            |\r\n+--------+----------------+----------------------------+\r\n|      1 | 2.3.0          | Hive release version 2.3.0 |\r\n+--------+----------------+----------------------------+\r\n{code}\r\n\r\nBut version of Hive is 2.3.2.\r\n\r\n*SOLUTION:*\r\n\r\nAdd into {{EQUIVALENT_VERSIONS}} new key/value \"2.3.2\", \"2.3.0\".","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-21T17:57:55.775+0000","updated":"2017-11-21T17:57:55.775+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16261246","id":"16261246","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"LGTM +1 [~stakiar] I think this should go in 2.3.2 else HMS will not start up when {{hive.metastore.schema.verification}} is true","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-21T18:36:16.591+0000","updated":"2017-11-21T18:36:16.591+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16261381","id":"16261381","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Shall this also include :  .put(\"2.3.1\", \"2.3.0\") ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-21T19:42:49.210+0000","updated":"2017-11-21T19:42:49.210+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16261399","id":"16261399","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12898698/HIVE-18115.1.patch\n\n{color:red}ERROR:{color} -1 due to no test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 39 failed/errored test(s), 11387 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[dbtxnmgr_showlocks] (batchId=77)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[unionDistinct_1] (batchId=146)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[insert_values_orig_table_use_metadata] (batchId=162)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_fail_2] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_fail_3] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_fail_4] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_fail_5] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_fail_6] (batchId=93)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_fail_7] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_fail_create_db] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_fail_drop_db] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_part] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_1] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_2] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_3] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_4] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_5] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_6] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_7] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_disable_cbo_1] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_disable_cbo_2] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_disable_cbo_3] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_disable_cbo_4] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_disable_cbo_5] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_disable_cbo_6] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[authorization_view_disable_cbo_7] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[exim_22_export_authfail] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[exim_23_import_exist_authfail] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[exim_24_import_part_authfail] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[exim_25_import_nonexist_authfail] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[load_exist_part_authfail] (batchId=91)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[load_nonpart_authfail] (batchId=92)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[load_part_authfail] (batchId=92)\norg.apache.hadoop.hive.ql.parse.TestReplicationScenarios.testConstraints (batchId=223)\norg.apache.hadoop.hive.ql.security.TestClientSideAuthorizationProvider.testSimplePrivileges (batchId=225)\norg.apache.hive.hcatalog.pig.TestHCatLoaderEncryption.testReadDataFromEncryptedHiveTableByPig[0] (batchId=187)\norg.apache.hive.jdbc.TestSSL.testConnectionMismatch (batchId=229)\norg.apache.hive.jdbc.TestSSL.testConnectionWrongCertCN (batchId=229)\norg.apache.hive.jdbc.TestSSL.testMetastoreConnectionWrongCertCN (batchId=229)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/7945/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/7945/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-7945/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 39 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12898698 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-11-21T19:52:27.429+0000","updated":"2017-11-21T19:52:27.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16261432","id":"16261432","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"[~ashutoshc] yes, you are right. {{.put(\"2.3.1\", \"2.3.0\") }} should be included as well. So technically this affects 2.3.1 version as well. [~osayankin] Can you reattach the patch with the suggested fixes. Please name the patch with format <JIRA number>.<patch_version>-branch-2.patch so that the precommit tests run on that branch. So in your case the next patch should be named {{HIVE-18115.02-branch-2.patch}}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-21T20:18:11.886+0000","updated":"2017-11-21T20:18:11.886+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16261531","id":"16261531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stakiar","name":"stakiar","key":"stakiar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sahil Takiar","active":true,"timeZone":"Etc/UTC"},"body":"2.3.2 has already been released. So I guess this will have to go into 2.3.3","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stakiar","name":"stakiar","key":"stakiar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sahil Takiar","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-21T21:43:59.719+0000","updated":"2017-11-21T21:43:59.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16262183","id":"16262183","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"body":"{quote}\r\nCan you reattach the patch with the suggested fixes? So in your case the next patch should be named HIVE-18115.02-branch-2.patch.\r\n{quote}\r\n\r\nDone.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-22T09:04:40.208+0000","updated":"2017-11-22T09:04:40.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16262988","id":"16262988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stakiar","name":"stakiar","key":"stakiar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sahil Takiar","active":true,"timeZone":"Etc/UTC"},"body":"[~vihangk1] is this something that will need to be done for every release? If thats the case maybe we can make this a bit easier. By default we can assume all 2.3.x versions are equivalent to 2.3.0 unless otherwise specified? Or more generally, all x.y.z versions are equivalent to x.y.0 versions.\r\n\r\nMaybe we need to add a snippet in the How to Release section of the Apache Hive Wiki?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stakiar","name":"stakiar","key":"stakiar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sahil Takiar","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-22T17:42:27.419+0000","updated":"2017-11-22T17:42:27.419+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16263023","id":"16263023","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Yes, based on the current implementation it looks like it needs to be done for every release. We should definitely update the wiki and/or add a automated test to make sure this is not broken. The problem with adding a test to cover this scenario is that by default our unit tests have {{hive.metastore.schema.verification}} turned off because of which this was not caught. I wonder why the schematool tests did not catch this though.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-22T18:06:05.265+0000","updated":"2017-11-22T18:06:05.265+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16263203","id":"16263203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"I looked into the schema tool tests in the hope of finding that a test that is broken but I found surprisingly, that this error should not happen in the first place in 2.3.2 (and 2.3.1 as well). {{MetaStoreSchemaInfo.getHiveSchemaVersion()}} which is used to find the version of Hive from the binaries should return 2.3.0 and it should match with the schema version in the database which is also 2.3.0 from the init files.\r\n\r\n{{MetaStoreSchemaInfo.getHiveSchemaVersion()}} gets the shortVersion from the {{HiveVersionAnnotation}} which is generated in the build time using {{saveVersion.sh}} and it injects the hive version from pom.xml's property which is {{<hive.version.shortname>2.3.0</hive.version.shortname>}} for the 2.3.2 release.\r\n\r\n[~osayankin] did you build the source code from the release-2.3.2 or you just downloaded the binaries? If its the former can you paste the contents of package-info.java from the hive-common project? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-22T19:24:12.710+0000","updated":"2017-11-22T19:24:12.710+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16264178","id":"16264178","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"body":"{quote}\r\nOleksiy Sayankin did you build the source code from the release-2.3.2 or you just downloaded the binaries?\r\n{quote}\r\n\r\nI built  source code from the release-2.3.2. This is my last [commit|https://github.com/apache/hive/commit/857a9fd8ad725a53bd95c1b2d6612f9b1155f44d]. It worked fine after I had applied the patch, so I filed an issue here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"created":"2017-11-23T11:04:10.228+0000","updated":"2017-11-23T11:17:52.608+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16416200","id":"16416200","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daijy","name":"daijy","key":"daijy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Dai","active":true,"timeZone":"America/Los_Angeles"},"body":"[~vihangk1][~ashutoshc], do we plan to get it into 2.3.3? I am about to release 2.3.3.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daijy","name":"daijy","key":"daijy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Dai","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-03-27T20:40:05.618+0000","updated":"2018-03-27T20:40:05.618+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16416205","id":"16416205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"yes.. I think so.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-03-27T20:42:10.831+0000","updated":"2018-03-27T20:42:10.831+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16418199","id":"16418199","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"I took a relook at this and I don't think this is a problem. Like I explained in my comment above {{MetaStoreSchemaInfo.getHiveSchemaVersion()}} will return 2.3.0 and the database VERSION table will store 2.3.0 assuming the schema is initialized/upgraded using the right scripts. I tried to reproduce this issue on the current branch-2.3 (pointing to 2.3.3) and also the released tag 2.3.2 (git checkout tags/rel/release-2.3.2). I set {{hive.metastore.schema.verification}} to true and in both the cases I didn't hit the issue. The line number in the ObjectStore.java in the stack above {{ObjectStore.checkSchema(ObjectStore.java:7600)}} also doesn't match with 2.3.2 with this exception so I think the reporter is not using release build of Hive 2.3.2\r\n\r\nI think it is okay to ignore this issue for 2.3.3 and we should close this JIRA as not reproducible unless someone can advise what  I am doing wrong above.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-03-28T22:20:22.504+0000","updated":"2018-03-28T22:20:22.504+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16418241","id":"16418241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daijy","name":"daijy","key":"daijy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Dai","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~vihangk1], move it to 2.4.0 for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daijy","name":"daijy","key":"daijy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Dai","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-03-28T23:27:25.881+0000","updated":"2018-03-28T23:27:25.881+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16418377","id":"16418377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12898821/HIVE-18115.02-branch-2.patch\n\n{color:red}ERROR:{color} -1 due to no test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 14 failed/errored test(s), 10667 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_queries] (batchId=227)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[avro_tableproperty_optimize] (batchId=22)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[explaindenpendencydiffengs] (batchId=38)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=142)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=139)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[table_nonprintable] (batchId=140)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=158)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=153)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_parquet_types] (batchId=155)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[merge_negative_5] (batchId=88)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[explaindenpendencydiffengs] (batchId=115)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorization_input_format_excludes] (batchId=117)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorized_ptf] (batchId=125)\norg.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=176)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/9895/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/9895/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-9895/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 14 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12898821 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-03-29T03:32:07.890+0000","updated":"2018-03-29T03:32:07.890+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16419259","id":"16419259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~osayankin] Can you please confirm my analysis above? I am inclined to close this issue as not reproducible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-03-29T16:07:28.680+0000","updated":"2018-03-29T16:07:28.680+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16422072","id":"16422072","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"body":"[~vihangk1] wrote:\r\n\r\n{quote}\r\nI looked into the schema tool tests in the hope of finding that a test that is broken but I found surprisingly, that this error should not happen in the first place in 2.3.2 (and 2.3.1 as well). MetaStoreSchemaInfo.getHiveSchemaVersion() which is used to find the version of Hive from the binaries should return 2.3.0 and it should match with the schema version in the database which is also 2.3.0 from the init files.\r\n\r\nMetaStoreSchemaInfo.getHiveSchemaVersion() gets the shortVersion from the HiveVersionAnnotation which is generated in the build time using saveVersion.sh and it injects the hive version from pom.xml's property which is <hive.version.shortname>2.3.0</hive.version.shortname> for the 2.3.2 release.\r\n{quote}\r\n\r\nAgree. The root cause was in that I mistakenly changed\r\n\r\n{code}\r\n<hive.version.shortname>2.3.0</hive.version.shortname>\r\n{code}\r\n\r\nto\r\n\r\n{code}\r\n<hive.version.shortname>2.3.2</hive.version.shortname>\r\n{code}\r\n\r\nthinking it as a typo in {{pom.xml}}, because the release version was 2.3.2. After that I had the exception \r\n\r\n{code}\r\nCaused by: org.apache.hadoop.hive.metastore.api.MetaException: Hive Schema version 2.3.2 does not match metastore's schema version 2.3.0 Metastore is not upgraded or corrupt\r\n{code}\r\n\r\nwhich in its own turn forced me to find out the fix:\r\n\r\n{code}\r\n  private static final Map<String, String> EQUIVALENT_VERSIONS =\r\n    ImmutableMap.<String, String>builder()\r\n      .put(\"0.13.1\", \"0.13.0\")\r\n      .put(\"1.0.0\", \"0.14.0\")\r\n      .put(\"1.0.1\", \"1.0.0\")\r\n      .put(\"1.1.1\", \"1.1.0\")\r\n      .put(\"1.2.1\", \"1.2.0\")\r\n      .put(\"2.3.2\", \"2.3.0\")\r\n      .build();\r\n{code}\r\n\r\nWell guys, this is my mistake and my fault. Sorry :-(.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-02T09:49:03.352+0000","updated":"2018-04-02T09:49:03.352+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119984/comment/16422766","id":"16422766","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~osayankin] for confirmation. I think we can close this as a not reproducible in this case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-04-02T16:56:54.237+0000","updated":"2018-04-02T16:56:54.237+0000"}],"maxResults":19,"total":19,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-18115/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3n227:"}}