{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12605327","self":"https://issues.apache.org/jira/rest/api/2/issue/12605327","key":"HIVE-3413","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-08-29T09:08:31.127+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jan 10 19:52:59 UTC 2013","customfield_12310420":"242362","customfield_12312320":null,"customfield_12310222":"10002_*:*_3_*:*_499168673_*|*_1_*:*_3_*:*_40208789_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-09-04T08:01:34.402+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-3413/watchers","watchCount":4,"isWatching":false},"created":"2012-08-29T02:11:56.955+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317742","id":"12317742","description":"released","name":"0.9.0","archived":false,"released":true,"releaseDate":"2012-04-30"}],"issuelinks":[{"id":"12357418","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12357418","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12606303","key":"HIVE-3435","self":"https://issues.apache.org/jira/rest/api/2/issue/12606303","fields":{"summary":"Get pdk pluginTest passed when triggered from both builtin tests and pdk tests on hadoop23 ","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-01-10T19:52:59.638+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317406","id":"12317406","name":"Tests"}],"timeoriginalestimate":null,"description":"When running Hive test on Hadoop0.23, pdk.PluginTest is failing:\n\ntest:\n    [junit] Running org.apache.hive.pdk.PluginTest\n    [junit] Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_172375530.txt\n    [junit] Total MapReduce jobs = 1\n    [junit] Launching Job 1 out of 1\n    [junit] Number of reduce tasks determined at compile time: 1\n    [junit] In order to change the average load for a reducer (in bytes):\n    [junit]   set hive.exec.reducers.bytes.per.reducer=<number>\n    [junit] In order to limit the maximum number of reducers:\n    [junit]   set hive.exec.reducers.max=<number>\n    [junit] In order to set a constant number of reducers:\n    [junit]   set mapred.reduce.tasks=<number>\n    [junit] WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.\n    [junit] Execution log at: /tmp/cloudera/cloudera_20120828184545_6deeb166-7dd4-40d3-9ff7-c5d5277aee39.log\n    [junit] java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.\n    [junit]     at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:123)\n    [junit]     at org.apache.hadoop.mapreduce.Cluster.<init>(Cluster.java:85)\n    [junit]     at org.apache.hadoop.mapreduce.Cluster.<init>(Cluster.java:78)\n    [junit]     at org.apache.hadoop.mapred.JobClient.init(JobClient.java:487)\n    [junit]     at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:466)\n    [junit]     at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:424)\n    [junit]     at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:688)\n    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    [junit]     at java.lang.reflect.Method.invoke(Method.java:616)\n    [junit]     at org.apache.hadoop.util.RunJar.main(RunJar.java:200)\n    [junit] Job Submission failed with exception 'java.io.IOException(Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.)'\n    [junit] Execution failed with exit status: 1\n    [junit] Obtaining error information\n    [junit]\n    [junit] Task failed!\n    [junit] Task ID:\n    [junit]   Stage-1\n    [junit]\n    [junit] Logs:\n    [junit]\n    [junit] /tmp/cloudera/hive.log\n    [junit] FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask]>)\n    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 33.9 sec\n\nWith details in ./build/builtins/TEST-org.apache.hive.pdk.PluginTest.txt:\n\n\nTestsuite: org.apache.hive.pdk.PluginTest\nTests run: 1, Failures: 1, Errors: 0, Time elapsed: 33.9 sec\n------------- Standard Error -----------------\nGLOBAL SETUP:  Copying file: file:/home/cloudera/Code/hive2/builtins/test/onerow.txt\nDeleted /home/cloudera/Code/hive2/build/builtins/warehouse/onerow\nCopying file: file:/home/cloudera/Code/hive2/builtins/test/iris.txt\nDeleted /home/cloudera/Code/hive2/build/builtins/warehouse/iris\norg.apache.hive.builtins.UDAFUnionMap TEARDOWN:\nHive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_840355011.txt\nGLOBAL TEARDOWN:\nHive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_252250000.txt\nOK\nTime taken: 6.874 seconds\nOK\nTime taken: 0.512 seconds\n------------- ---------------- ---------------\n\nTestcase: SELECT size(UNION_MAP(MAP(sepal_width, sepal_length))) FROM iris took 4.428 sec\n    FAILED\nexpected:<[23]> but was:<[\nHive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_172375530.txt\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks determined at compile time: 1\nIn order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\nIn order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\nIn order to set a constant number of reducers:\n  set mapred.reduce.tasks=<number>\nWARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.\nExecution log at: /tmp/cloudera/cloudera_20120828184545_6deeb166-7dd4-40d3-9ff7-c5d5277aee39.log\njava.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.\n    at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:123)\n    at org.apache.hadoop.mapreduce.Cluster.<init>(Cluster.java:85)\n    at org.apache.hadoop.mapreduce.Cluster.<init>(Cluster.java:78)\n    at org.apache.hadoop.mapred.JobClient.init(JobClient.java:487)\n    at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:466)\n    at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:424)\n    at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:688)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:616)\n    at org.apache.hadoop.util.RunJar.main(RunJar.java:200)\nJob Submission failed with exception 'java.io.IOException(Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.)'\nExecution failed with exit status: 1\nObtaining error information\n\nTask failed!\nTask ID:\n  Stage-1\n\nLogs:\n\n/tmp/cloudera/hive.log\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12542888","id":"12542888","filename":"HIVE-3413.1.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-29T02:41:36.481+0000","size":5463,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12542888/HIVE-3413.1.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12542970","id":"12542970","filename":"HIVE-3413.2.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-29T19:46:33.733+0000","size":4987,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12542970/HIVE-3413.2.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12543209","id":"12543209","filename":"HIVE-3413.3.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-31T00:44:03.200+0000","size":5565,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12543209/HIVE-3413.3.patch.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"14479","customfield_12312823":null,"summary":"Fix pdk.PluginTest on hadoop23","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13443753","id":"13443753","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"There are two problems with this bug:\n\n#1. Missing Dependency:\nThe compile and test classpath in pdk/scripts/build-plugin.xml is based on build/ivy/lib/default, the following dependencies are missing when building hive-exec*.jar:\n\nhadoop-mapreduce-client-jobclient\nhadoop-minicluster\n\nThis dependency should be added to ql/ivy.xml, which is the place for hive-exec dependencies.\n\nNote that hadoop-mapreduce-client-jobclient dependency should be updated by just changing the jar placement. putting the jar in build/ivy/lib/test/ would not be included in pdk PluginTest classpath.\n\n#2. After fixing #1, the following log4j warning message appears in the output stream, which fails the testcase(pdk PluginTest diffs expected output with the output stream):\n\ntest:\n    [junit] Running org.apache.hive.pdk.PluginTest\n    [junit] 2012-08-28 19:05:20,679 WARN  [main] conf.Configuration (Configuration.java:loadProperty(1621)) - file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.\n    [junit] 2012-08-28 19:05:20,680 WARN  [main] conf.Configuration (Configuration.java:loadProperty(1621)) - file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.\n    [junit] 2]3>)\n    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 42.318 sec\n\n\nAnd the details in: ./build/builtins/TEST-org.apache.hive.pdk.PluginTest.txt\n\nTestsuite: org.apache.hive.pdk.PluginTest\nTests run: 1, Failures: 1, Errors: 0, Time elapsed: 42.318 sec\n------------- Standard Error -----------------\nGLOBAL SETUP:  Copying file: file:/home/cloudera/Code/hive2/builtins/test/onerow.txt\nDeleted /home/cloudera/Code/hive2/build/builtins/warehouse/onerow\nCopying file: file:/home/cloudera/Code/hive2/builtins/test/iris.txt\nDeleted /home/cloudera/Code/hive2/build/builtins/warehouse/iris\norg.apache.hive.builtins.UDAFUnionMap TEARDOWN:\nHive history file=/tmp/cloudera/hive_job_log_cloudera_201208281905_427044653.txt\nGLOBAL TEARDOWN:\nHive history file=/tmp/cloudera/hive_job_log_cloudera_201208281905_95794698.txt\nOK\nTime taken: 6.585 seconds\nOK\nTime taken: 0.415 seconds\n------------- ---------------- ---------------\n\nTestcase: SELECT size(UNION_MAP(MAP(sepal_width, sepal_length))) FROM iris took 9.435 sec\n    FAILED\nexpected:<2[]3> but was:<2[012-08-28 19:05:20,464 WARN  [main] conf.HiveConf (HiveConf.java:<clinit>(75)) - hive-site.xml not found on CLASSPATH\n2012-08-28 19:05:20,679 WARN  [main] conf.Configuration (Configuration.java:loadProperty(1621)) - file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.\n2012-08-28 19:05:20,680 WARN  [main] conf.Configuration (Configuration.java:loadProperty(1621)) - file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.\n2]3>\njunit.framework.ComparisonFailure: expected:<2[]3> but was:<2[012-08-28 19:05:20,464 WARN  [main] conf.HiveConf (HiveConf.java:<clinit>(75)) - hive-site.xml not found on CLASSPATH\n2012-08-28 19:05:20,679 WARN  [main] conf.Configuration (Configuration.java:loadProperty(1621)) - file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.\n2012-08-28 19:05:20,680 WARN  [main] conf.Configuration (Configuration.java:loadProperty(1621)) - file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.\n2]3>\n    at org.apache.hive.pdk.PluginTest.runTest(PluginTest.java:59)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:23)\n    at junit.extensions.TestSetup.run(TestSetup.java:27)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:23)\n    at junit.extensions.TestSetup.run(TestSetup.java:27)\n\nThis warning is printed to console, since it happens before hive configure its log4j(which happens in HiveConf.java static initialization), and hadoop's default log4j configuration is INFA,console. This does not happen on previous branches, since on hadoop0.23, there are code execution path change, and these warnings just appeared when running hive on hadoop0.23.\n\nMy proposed solution is to configure hadoop log4j, so that its warning message are printed to the log file, instead of printing on the console, log4j.properties file is added, which configure hadoop log4j to be DEBUG,DRFA.\n\nA new log4j.properties file is added, not using hive-log4j.properties, because:\n\n##1 this is for hadoop log4j configuration, not for hive log4j configuration(which configuration file named hive-log4j.properties), it might be possible for us to have different configuration for each\n\n##2 hadoop defaults to find the configuration named log4j.properties(there is no such named file existed in hive configuration data)\n\nI still take log file named hive.log, not hadoop.log, since these warning info are actually from running hive.\n\nTo make the pdk test running OK, without a full hive installation, I put the new log4j.properties file in pdk test directory.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-29T02:16:45.599+0000","updated":"2012-08-29T02:16:45.599+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13443764","id":"13443764","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"review request submitted at:\nhttps://reviews.facebook.net/D5001","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-29T02:40:15.563+0000","updated":"2012-08-29T02:40:15.563+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13443765","id":"13443765","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"A quick note, to build hive on hadoop23:\n$ant very-clean package.-Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23\n\nAnd run test:\n$ant test -Dhadoop.version=0.23.1.-Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-29T02:41:22.261+0000","updated":"2012-08-29T02:41:22.261+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13443923","id":"13443923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"@Zhenxiao: Please see my comments on phabricator.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-29T09:08:31.127+0000","updated":"2012-08-29T09:08:31.127+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13444353","id":"13444353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"There is an error in my Jira ticket comment, actually, not necessary to put these dependencies in compile->default\n\npdk/scripts/build-plugin.xml has the following line(line 125):\n  <fileset dir=\"${build.ivy.lib.dir}/test\" includes=\"*.jar\" excludes=\"hive*.jar\"/>\n\nwhich makes the build/ivy/lib/test directory also included in its test running classpath.\nAs Carl pointed, putting the dependency in compile->default will break 0.20 build. It should be put into hadoop0.23.test\n\n@Carl: my updated patch is submitted at:\nhttps://reviews.facebook.net/D5001\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-29T19:46:17.052+0000","updated":"2012-08-29T19:46:17.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13445520","id":"13445520","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"the missing hadoop-minicluster dependency should not go into ql/ivy.xml.\nIt should be in hadoop23.test, putting into build/ivy/lib/test\npdk plugin test is triggered via builtin/build.xml\nadd the dependency in builtin/ivy.xml, and also update builtin/build.xml,\nso that ivy-retrieve-test dependency is added to target test\n\nUpdated patch submitted for review at:\nhttps://reviews.facebook.net/D5001","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-31T00:42:30.518+0000","updated":"2012-08-31T00:42:30.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13445728","id":"13445728","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"+1. Will commit if tests pass.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-31T06:46:14.204+0000","updated":"2012-08-31T06:46:14.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13447548","id":"13447548","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to trunk. Thanks Zhenxiao!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-04T08:01:34.412+0000","updated":"2012-09-04T08:01:34.412+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13447695","id":"13447695","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #1645 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1645/])\n    HIVE-3413. Fix pdk.PluginTest on hadoop23 (Zhenxiao Luo via cws) (Revision 1380478)\n\n     Result = FAILURE\ncws : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1380478\nFiles : \n* /hive/trunk/builtins/build.xml\n* /hive/trunk/builtins/ivy.xml\n* /hive/trunk/pdk/scripts/build-plugin.xml\n* /hive/trunk/pdk/test-plugin/test/conf\n* /hive/trunk/pdk/test-plugin/test/conf/log4j.properties\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-04T13:55:58.822+0000","updated":"2012-09-04T13:55:58.822+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13548037","id":"13548037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])\n    HIVE-3413. Fix pdk.PluginTest on hadoop23 (Zhenxiao Luo via cws) (Revision 1380478)\n\n     Result = ABORTED\ncws : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1380478\nFiles : \n* /hive/trunk/builtins/build.xml\n* /hive/trunk/builtins/ivy.xml\n* /hive/trunk/pdk/scripts/build-plugin.xml\n* /hive/trunk/pdk/test-plugin/test/conf\n* /hive/trunk/pdk/test-plugin/test/conf/log4j.properties\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-09T10:24:09.271+0000","updated":"2013-01-09T10:24:09.271+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12605327/comment/13549998","id":"13549998","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-10T19:52:59.626+0000","updated":"2013-01-10T19:52:59.626+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-3413/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02u3z:"}}