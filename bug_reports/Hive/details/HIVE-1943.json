{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12497414","self":"https://issues.apache.org/jira/rest/api/2/issue/12497414","key":"HIVE-1943","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316178","id":"12316178","description":"released","name":"0.8.0","archived":false,"released":true,"releaseDate":"2011-12-16"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-04-12T22:14:06.246+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Apr 15 04:53:18 UTC 2011","customfield_12310420":"72613","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_6227850444_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-04-15T04:53:18.557+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1943/watchers","watchCount":2,"isWatching":false},"created":"2011-02-02T02:55:48.151+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-12-16T23:55:39.950+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."}],"timeoriginalestimate":null,"description":"Currently, metastore operations with associated hdfs operations like drop_partition doesn't do a rollback if the hdfs operation fails. The metastore first updates the metadata, and then tries to do hdfs operation. If the hdfs operation fails for any reason, the data on the hdfs will be orphaned. We should improve the situation.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12476299","id":"12476299","filename":"hive-metastore-auth.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2011-04-14T05:55:47.209+0000","size":21880,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12476299/hive-metastore-auth.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"30096","customfield_12312823":null,"summary":"Metastore operations (like drop_partition) could be improved in terms of maintaining consistency of metadata and data","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12497414/comment/13019083","id":"13019083","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"Created a reviewboard review request - https://reviews.apache.org/r/586/\n\nThe patch basically adds checks before updating metadata during operations like drop_table, drop_database, etc. The checks are at the Warehouse layer to see whether the associated data can be really deleted by the user in question. If the data can't be deleted then the metadata operation is not done. \n\nThis check is configurable and can be disabled.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2011-04-12T22:12:07.998+0000","updated":"2011-04-12T22:12:07.998+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12497414/comment/13019086","id":"13019086","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/586/\n-----------------------------------------------------------\n\nReview request for hive.\n\n\nSummary\n-------\n\nThis is a patch to handle the issue described in HIVE-1943\n\n\nThis addresses bug HIVE-1943.\n    https://issues.apache.org/jira/browse/HIVE-1943\n\n\nDiffs\n-----\n\n  http://svn.apache.org/repos/asf/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/conf/hive-default.xml 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/build.xml 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java PRE-CREATION \n  http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1090038 \n  http://svn.apache.org/repos/asf/hive/trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1090038 \n\nDiff: https://reviews.apache.org/r/586/diff\n\n\nTesting\n-------\n\nUnit tests added.\n\n\nThanks,\n\nDevaraj\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-12T22:14:06.246+0000","updated":"2011-04-12T22:14:06.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12497414/comment/13019226","id":"13019226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/586/#review437\n-----------------------------------------------------------\n\n\n\nhttp://svn.apache.org/repos/asf/hive/trunk/metastore/build.xml\n<https://reviews.apache.org/r/586/#comment851>\n\n    Did not understand why this change is required?\n\n\n\nhttp://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java\n<https://reviews.apache.org/r/586/#comment850>\n\n    change Table metadata to databse metadata? \n\n\n\nhttp://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java\n<https://reviews.apache.org/r/586/#comment849>\n\n    change Table metadata to partition metadata?\n\n\n\nhttp://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java\n<https://reviews.apache.org/r/586/#comment848>\n\n    change Table metadata to partition metadata?\n\n\n\nhttp://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java\n<https://reviews.apache.org/r/586/#comment845>\n\n    Can this be changed to assert statement instead of throwing exception?\n\n\n\nhttp://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java\n<https://reviews.apache.org/r/586/#comment846>\n\n    Can this be changed to assert statement instead of throwing exception?\n\n\n\nhttp://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java\n<https://reviews.apache.org/r/586/#comment847>\n\n    Can we add the test for group writable also?\n\n\n- Amareshwari\n\n\nOn 2011-04-12 22:12:32, Devaraj Das wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/586/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-04-12 22:12:32)\nbq.  \nbq.  \nbq.  Review request for hive.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  This is a patch to handle the issue described in HIVE-1943\nbq.  \nbq.  \nbq.  This addresses bug HIVE-1943.\nbq.      https://issues.apache.org/jira/browse/HIVE-1943\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    http://svn.apache.org/repos/asf/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/conf/hive-default.xml 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/build.xml 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java PRE-CREATION \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1090038 \nbq.  \nbq.  Diff: https://reviews.apache.org/r/586/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Unit tests added.\nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  Devaraj\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-13T06:22:06.178+0000","updated":"2011-04-13T06:22:06.178+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12497414/comment/13019232","id":"13019232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n\nbq.  On 2011-04-13 06:21:06, Amareshwari Sriramadasu wrote:\nbq.  > http://svn.apache.org/repos/asf/hive/trunk/metastore/build.xml, lines 25-46\nbq.  > <https://reviews.apache.org/r/586/diff/1/?file=15648#file15648line25>\nbq.  >\nbq.  >     Did not understand why this change is required?\n\nRight. This is not needed (it was needed in an earlier version of the TestMetaStoreAuthorization).\n\n\nbq.  On 2011-04-13 06:21:06, Amareshwari Sriramadasu wrote:\nbq.  > http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java, line 649\nbq.  > <https://reviews.apache.org/r/586/diff/1/?file=15649#file15649line649>\nbq.  >\nbq.  >     change Table metadata to databse metadata?\n\nCopy-paste problem :(\n\n\nbq.  On 2011-04-13 06:21:06, Amareshwari Sriramadasu wrote:\nbq.  > http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java, line 1399\nbq.  > <https://reviews.apache.org/r/586/diff/1/?file=15649#file15649line1399>\nbq.  >\nbq.  >     change Table metadata to partition metadata?\n\nCopy-paste problem :(\n\n\nbq.  On 2011-04-13 06:21:06, Amareshwari Sriramadasu wrote:\nbq.  > http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java, line 1411\nbq.  > <https://reviews.apache.org/r/586/diff/1/?file=15649#file15649line1411>\nbq.  >\nbq.  >     change Table metadata to partition metadata?\n\nCopy-paste problem :(\n\n\nbq.  On 2011-04-13 06:21:06, Amareshwari Sriramadasu wrote:\nbq.  > http://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java, lines 63-65\nbq.  > <https://reviews.apache.org/r/586/diff/1/?file=15652#file15652line63>\nbq.  >\nbq.  >     Can this be changed to assert statement instead of throwing exception?\n\nOkay, will make it an assert.\n\n\nbq.  On 2011-04-13 06:21:06, Amareshwari Sriramadasu wrote:\nbq.  > http://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java, lines 67-69\nbq.  > <https://reviews.apache.org/r/586/diff/1/?file=15652#file15652line67>\nbq.  >\nbq.  >     Can this be changed to assert statement instead of throwing exception?\n\nOkay, will make it an assert.\n\n\nbq.  On 2011-04-13 06:21:06, Amareshwari Sriramadasu wrote:\nbq.  > http://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java, line 73\nbq.  > <https://reviews.apache.org/r/586/diff/1/?file=15652#file15652line73>\nbq.  >\nbq.  >     Can we add the test for group writable also?\n\nThat's a bit tricky. The reason being that the test might give out false positives, since the isWritable call doesn't take any argument to signify for which entity (owner or group) we are doing the check. For example, isWritable(foo) will return true for both 570 and 750 permissions on foo. We really can't say whether the test passed because the check for the owner part returned true, or, the check for the group part returned true. If i break up the method isWritable to three methods that do checks on owner, group, and, others, respectively, i can do the tests for all three, but have a feeling that that will be an overkill.. Thoughts?\n\n\n- Devaraj\n\n\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/586/#review437\n-----------------------------------------------------------\n\n\nOn 2011-04-12 22:12:32, Devaraj Das wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/586/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-04-12 22:12:32)\nbq.  \nbq.  \nbq.  Review request for hive.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  This is a patch to handle the issue described in HIVE-1943\nbq.  \nbq.  \nbq.  This addresses bug HIVE-1943.\nbq.      https://issues.apache.org/jira/browse/HIVE-1943\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    http://svn.apache.org/repos/asf/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/conf/hive-default.xml 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/build.xml 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java PRE-CREATION \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1090038 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1090038 \nbq.  \nbq.  Diff: https://reviews.apache.org/r/586/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Unit tests added.\nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  Devaraj\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-13T07:06:05.946+0000","updated":"2011-04-13T07:06:05.946+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12497414/comment/13019646","id":"13019646","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/586/\n-----------------------------------------------------------\n\n(Updated 2011-04-14 00:57:35.688239)\n\n\nReview request for hive.\n\n\nChanges\n-------\n\nThe new patch addresses Amareshwari's comments. The testcase is modified to do checks for write permissions for everyone in this patch (that will avoid the confusion that was created in the earlier patch where i was checking the owner write permissions only).\n\n\nSummary\n-------\n\nThis is a patch to handle the issue described in HIVE-1943\n\n\nThis addresses bug HIVE-1943.\n    https://issues.apache.org/jira/browse/HIVE-1943\n\n\nDiffs (updated)\n-----\n\n  http://svn.apache.org/repos/asf/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1091578 \n  http://svn.apache.org/repos/asf/hive/trunk/conf/hive-default.xml 1091578 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1091578 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1091578 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java 1091578 \n  http://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java PRE-CREATION \n  http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1091578 \n  http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1091578 \n  http://svn.apache.org/repos/asf/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1091578 \n  http://svn.apache.org/repos/asf/hive/trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1091578 \n\nDiff: https://reviews.apache.org/r/586/diff\n\n\nTesting\n-------\n\nUnit tests added.\n\n\nThanks,\n\nDevaraj\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-14T00:58:05.895+0000","updated":"2011-04-14T00:58:05.895+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12497414/comment/13019698","id":"13019698","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/586/#review459\n-----------------------------------------------------------\n\nShip it!\n\n\n+1\nPlease upload the patch to jira.\n\n- Amareshwari\n\n\nOn 2011-04-14 00:57:35, Devaraj Das wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/586/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-04-14 00:57:35)\nbq.  \nbq.  \nbq.  Review request for hive.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  This is a patch to handle the issue described in HIVE-1943\nbq.  \nbq.  \nbq.  This addresses bug HIVE-1943.\nbq.      https://issues.apache.org/jira/browse/HIVE-1943\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    http://svn.apache.org/repos/asf/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1091578 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/conf/hive-default.xml 1091578 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1091578 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java 1091578 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java 1091578 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestMetaStoreAuthorization.java PRE-CREATION \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java 1091578 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java 1091578 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java 1091578 \nbq.    http://svn.apache.org/repos/asf/hive/trunk/shims/src/test/org/apache/hadoop/hive/thrift/TestHadoop20SAuthBridge.java 1091578 \nbq.  \nbq.  Diff: https://reviews.apache.org/r/586/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Unit tests added.\nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  Devaraj\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-14T05:51:05.847+0000","updated":"2011-04-14T05:51:05.847+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12497414/comment/13019699","id":"13019699","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"Attaching the patch that I uploaded last on reviewboard.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2011-04-14T05:55:47.236+0000","updated":"2011-04-14T05:55:47.236+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12497414/comment/13020189","id":"13020189","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"I just committed this. Thanks Devaraj !","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-04-15T04:53:18.565+0000","updated":"2011-04-15T04:53:18.565+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1943/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i05iif:"}}