{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12627543","self":"https://issues.apache.org/jira/rest/api/2/issue/12627543","key":"HIVE-3894","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-08-04T16:03:25.173+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Aug 11 22:11:33 UTC 2015","customfield_12310420":"304327","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_81121533956_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-08-11T22:11:41.877+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-3894/watchers","watchCount":3,"isWatching":false},"created":"2013-01-15T00:26:07.982+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-08-11T22:11:41.935+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313461","id":"12313461","name":"HBase Handler"}],"timeoriginalestimate":null,"description":"{{HBaseStorageHandler}} does not delete managed tables from HBase.\n\n{code}\nhive> CREATE TABLE foo (bar INT, baz INT) STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler' WITH SERDEPROPERTIES ('hbase.columns.mapping' = 'f1:baz') TBLPROPERTIES ('hbase.table.name' = 'foo');\nOK\nTime taken: 1.277 seconds\nhive> drop table foo;\nFAILED: Error in metadata: MetaException(message:org.apache.hadoop.hbase.TableNotDisabledException: org.apache.hadoop.hbase.TableNotDisabledException: foo\n\tat org.apache.hadoop.hbase.master.HMaster.checkTableModifiable(HMaster.java:1396)\n\tat org.apache.hadoop.hbase.master.handler.TableEventHandler.<init>(TableEventHandler.java:70)\n\tat org.apache.hadoop.hbase.master.handler.DeleteTableHandler.<init>(DeleteTableHandler.java:42)\n\tat org.apache.hadoop.hbase.master.HMaster.deleteTable(HMaster.java:1249)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)\n\tat org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1426)\n\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n\tat org.apache.hadoop.hbase.RemoteExceptionHandler.decodeRemoteException(RemoteExceptionHandler.java:96)\n\tat org.apache.hadoop.hbase.client.HBaseAdmin.deleteTable(HBaseAdmin.java:482)\n\tat org.apache.hadoop.hbase.client.HBaseAdmin.deleteTable(HBaseAdmin.java:465)\n\tat org.apache.hadoop.hive.hbase.HBaseStorageHandler.commitDropTable(HBaseStorageHandler.java:120)\n\tat org.apache.hadoop.hive.metastore.HiveMetaStoreClient.dropTable(HiveMetaStoreClient.java:599)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:74)\n\tat $Proxy9.dropTable(Unknown Source)\n\tat org.apache.hadoop.hive.ql.metadata.Hive.dropTable(Hive.java:846)\n\tat org.apache.hadoop.hive.ql.metadata.Hive.dropTable(Hive.java:813)\n\tat org.apache.hadoop.hive.ql.exec.DDLTask.dropTable(DDLTask.java:3398)\n\tat org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:279)\n\tat org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:138)\n\tat org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)\n\tat org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1334)\n\tat org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1120)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:934)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:259)\n\tat org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:216)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:413)\n\tat org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:756)\n\tat org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:614)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:156)\n)\nFAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask\n{code}\n\nThe table is gone from Hive metadata though:\n\n{code}\nhive> show tables;    \nOK\nTime taken: 0.029 seconds\n{code}\n\nAttempting to recreate it results in the expected:\n\n{code}\nhive> CREATE TABLE foo (bar INT, baz INT) STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler' WITH SERDEPROPERTIES ('hbase.columns.mapping' = 'f1:baz') TBLPROPERTIES ('hbase.table.name' = 'foo');\nFAILED: Error in metadata: MetaException(message:Table foo already exists within HBase; use CREATE EXTERNAL TABLE instead to register it in Hive.)\nFAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12647605","id":"12647605","filename":"hbase_managed_table.q","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-30T14:48:11.104+0000","size":459,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12647605/hbase_managed_table.q"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12647606","id":"12647606","filename":"hbase_managed_table.q.out","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-30T14:48:11.110+0000","size":1995,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12647606/hbase_managed_table.q.out"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"252498","customfield_12312823":null,"summary":"Dropping managed HBase table fails","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ndimiduk","name":"ndimiduk","key":"ndimiduk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ndimiduk&avatarId=17533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ndimiduk&avatarId=17533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ndimiduk&avatarId=17533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ndimiduk&avatarId=17533"},"displayName":"Nick Dimiduk","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ndimiduk","name":"ndimiduk","key":"ndimiduk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ndimiduk&avatarId=17533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ndimiduk&avatarId=17533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ndimiduk&avatarId=17533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ndimiduk&avatarId=17533"},"displayName":"Nick Dimiduk","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627543/comment/13728910","id":"13728910","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"body":"[~ndimiduk] Could you please give more details on the hive and hbase version? I am currently trying to test it out with CDH4.2.1 and hive 0.10 and unable to reproduce what you are seeing. The tables seem to be created and getting dropped properly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"created":"2013-08-04T16:03:25.173+0000","updated":"2013-08-04T16:03:25.173+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627543/comment/13730902","id":"13730902","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ndimiduk","name":"ndimiduk","key":"ndimiduk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ndimiduk&avatarId=17533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ndimiduk&avatarId=17533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ndimiduk&avatarId=17533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ndimiduk&avatarId=17533"},"displayName":"Nick Dimiduk","active":true,"timeZone":"America/Los_Angeles"},"body":"IIRC, this was Hive 0.10.0 via HDP-1.2.1, but I didn't take notes. git-blame indicates {{HBaseStorageHandler}} has support for dropping non-external HBase tables as of HIVE-705.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ndimiduk","name":"ndimiduk","key":"ndimiduk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ndimiduk&avatarId=17533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ndimiduk&avatarId=17533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ndimiduk&avatarId=17533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ndimiduk&avatarId=17533"},"displayName":"Nick Dimiduk","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-06T16:20:53.291+0000","updated":"2013-08-06T16:20:53.291+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627543/comment/13867657","id":"13867657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emmanuel.guiton%40gmail.com","name":"emmanuel.guiton@gmail.com","key":"emmanuel.guiton@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=emmanuel.guiton%40gmail.com&avatarId=17684","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=emmanuel.guiton%40gmail.com&avatarId=17684","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=emmanuel.guiton%40gmail.com&avatarId=17684","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=emmanuel.guiton%40gmail.com&avatarId=17684"},"displayName":"Emmanuel Guiton","active":true,"timeZone":"Europe/Berlin"},"body":"Hello,\nI just ran into the same issue.\nI created a table using Hive (0.10) :\n{code}\ncreate table is_mappings(key struct<id:int, name: string>, props map<string, string>) \nstored by 'org.apache.hadoop.hive.hbase.HBaseStorageHandler' \nwith serdeproperties (\"hbase.columns.mapping\"=\":key, p:\") \ntblproperties (\"hbase.table.name\"=\"is_mappings\");\n{code}\n\nThen I ran\n{code}hive> DROP TABLE is_mappings;{code}\n\nwhich resulted in\n{code}\nFAILED: Error in metadata: MetaException(message:org.apache.hadoop.hbase.TableNotDisabledException: org.apache.hadoop.hbase.TableNotDisabledException: is_mappings\n        at org.apache.hadoop.hbase.master.HMaster.checkTableModifiable(HMaster.java:1508)\n        at org.apache.hadoop.hbase.master.handler.TableEventHandler.<init>(TableEventHandler.java:72)\n        at org.apache.hadoop.hbase.master.handler.DeleteTableHandler.<init>(DeleteTableHandler.java:47)\n        at org.apache.hadoop.hbase.master.HMaster.deleteTable(HMaster.java:1358)\n        at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:320)\n        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1426)\n\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n        at org.apache.hadoop.hbase.RemoteExceptionHandler.decodeRemoteException(RemoteExceptionHandler.java:96)\n        at org.apache.hadoop.hbase.client.HBaseAdmin.deleteTable(HBaseAdmin.java:482)\n        at org.apache.hadoop.hbase.client.HBaseAdmin.deleteTable(HBaseAdmin.java:465)\n        at org.apache.hadoop.hive.hbase.HBaseStorageHandler.commitDropTable(HBaseStorageHandler.java:120)\n        at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.dropTable(HiveMetaStoreClient.java:599)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:74)\n        at com.sun.proxy.$Proxy10.dropTable(Unknown Source)\n        at org.apache.hadoop.hive.ql.metadata.Hive.dropTable(Hive.java:841)\n        at org.apache.hadoop.hive.ql.metadata.Hive.dropTable(Hive.java:808)\n        at org.apache.hadoop.hive.ql.exec.DDLTask.dropTable(DDLTask.java:3372)\n        at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:278)\n        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:138)\n        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)\n        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1336)\n        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1122)\n        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:935)\n        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:259)\n        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:216)\n        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:412)\n        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:755)\n        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:613)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:160)\n)\nFAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask\n{code}\n\nWhen executing\n{code}hive> show tables;{code}\n\nthe table does not appear anymore.\nHowever, in HBase the table still exists\n{code}\nhbase(main):010:0* describe 'is_mappings'\nDESCRIPTION                                                                                                                        ENABLED                                                                \n 'is_mappings', {NAME => 'p', BLOOMFILTER => 'NONE', REPLICATION_SCOPE => '0', VERSIONS => '3', COMPRESSION => 'NONE', MIN_VERSION true                                                                   \n S => '0', TTL => '2147483647', BLOCKSIZE => '65536', IN_MEMORY => 'false', BLOCKCACHE => 'true'}                                                                                                         \n1 row(s) in 5.1630 seconds\n{code}\n\nAnd as stated in the exception, the HBase table is still enabled :\n{code}\nhbase(main):014:0> drop 'is_mappings'\n\nERROR: Table is_mappings is enabled. Disable it first.'\n\nHere is some help for this command:\nDrop the named table. Table must first be disabled: e.g. \"hbase> drop 't1'\"\n\n\nhbase(main):015:0> disable 'is_mappings'\n0 row(s) in 7.0690 seconds\n\nhbase(main):016:0> drop 'is_mappings'\n0 row(s) in 1.1220 seconds\n{code}\n\nVersion of HBase is\n{code}\nhbase(main):017:0> version\n0.94.10, r1504995, Fri Jul 19 20:24:16 UTC 2013\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emmanuel.guiton%40gmail.com","name":"emmanuel.guiton@gmail.com","key":"emmanuel.guiton@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=emmanuel.guiton%40gmail.com&avatarId=17684","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=emmanuel.guiton%40gmail.com&avatarId=17684","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=emmanuel.guiton%40gmail.com&avatarId=17684","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=emmanuel.guiton%40gmail.com&avatarId=17684"},"displayName":"Emmanuel Guiton","active":true,"timeZone":"Europe/Berlin"},"created":"2014-01-10T09:29:57.058+0000","updated":"2014-01-10T09:29:57.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627543/comment/14013714","id":"14013714","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"body":"[~ndimiduk] [~emmanuel.guiton@gmail.com] I have attached queries and results file as part of my attempt to try and reproduce this. But unfortunately I haven't been able to. I am currently running on hive trunk but it works great for me with hive 0.13 as well. Would you guys mind giving a short with trunk(and or 0.13) and see if this still persists?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-30T14:51:29.177+0000","updated":"2014-05-30T14:51:29.177+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627543/comment/14687385","id":"14687385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"body":"Ping [~ndimiduk]. I know this was a while back but is this still an issue or we are good to close this one? I just tested this out on hive 1.1.0 and confirmed that this problem does not exist anymore.\n\n{noformat}\nhive> CREATE TABLE test_hbase(key string, col1 string, col2 string) \n    > STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'\n    > WITH SERDEPROPERTIES (\"hbase.columns.mapping\" = \":key,cf:col1,cf:col2\")\n    > TBLPROPERTIES (\"hbase.table.name\" = \"test_hbase\");\nOK\nTime taken: 0.928 seconds\n\nhive> drop table test_hbase;\nOK\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-11T21:08:54.735+0000","updated":"2015-08-11T21:08:54.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627543/comment/14692329","id":"14692329","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ndimiduk","name":"ndimiduk","key":"ndimiduk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ndimiduk&avatarId=17533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ndimiduk&avatarId=17533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ndimiduk&avatarId=17533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ndimiduk&avatarId=17533"},"displayName":"Nick Dimiduk","active":true,"timeZone":"America/Los_Angeles"},"body":"I haven't tried this recently; I'll take your word for it :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ndimiduk","name":"ndimiduk","key":"ndimiduk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ndimiduk&avatarId=17533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ndimiduk&avatarId=17533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ndimiduk&avatarId=17533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ndimiduk&avatarId=17533"},"displayName":"Nick Dimiduk","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-11T22:01:35.484+0000","updated":"2015-08-11T22:01:35.484+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12627543/comment/14692350","id":"14692350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"body":"{quote}\nI'll take your word for it \n{quote}\n\nAlways helpful ;). Resolving.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-11T22:11:33.089+0000","updated":"2015-08-11T22:11:33.089+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-3894/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i17ls7:"}}