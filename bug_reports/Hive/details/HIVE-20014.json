{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13168650","self":"https://issues.apache.org/jira/rest/api/2/issue/13168650","key":"HIVE-20014","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jun 27 19:37:27 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_16992371_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2018-06-27T19:37:27.606+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-20014/watchers","watchCount":1,"isWatching":false},"created":"2018-06-27T14:54:15.264+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nishantbangarwa","name":"nishantbangarwa","key":"nishantbangarwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Bangarwa","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-07-04T10:41:24.160+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Reported by [~dileep529] - \r\n\r\nQuery SELECT  MINUTE(`time1`) FROM calcs; returns null when the String column only contains timestamp and does not contain any date information in the column. The Druid parser fails to parse the time string values and returns null. \r\n\r\n{code} \r\n1: jdbc:hive2://ctr-e138-1518143905142-379982> SELECT  MINUTE(`time1`) FROM calcs;\r\nINFO  : Compiling command(queryId=hive_20180627145215_05147329-b8d8-491c-9bab-6fd5045542db): SELECT  MINUTE(`time1`) FROM calcs\r\nINFO  : Semantic Analysis Completed (retrial = false)\r\nINFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:vc, type:int, comment:null)], properties:null)\r\nINFO  : Completed compiling command(queryId=hive_20180627145215_05147329-b8d8-491c-9bab-6fd5045542db); Time taken: 0.134 seconds\r\nINFO  : Executing command(queryId=hive_20180627145215_05147329-b8d8-491c-9bab-6fd5045542db): SELECT  MINUTE(`time1`) FROM calcs\r\nINFO  : Completed executing command(queryId=hive_20180627145215_05147329-b8d8-491c-9bab-6fd5045542db); Time taken: 0.002 seconds\r\nINFO  : OK\r\n+-------+\r\n|  vc   |\r\n+-------+\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n| NULL  |\r\n+-------+\r\n17 rows selected (0.266 seconds)\r\n1: jdbc:hive2://ctr-e138-1518143905142-379982> SELECT time1 from calcs;\r\nINFO  : Compiling command(queryId=hive_20180627145225_93b872de-a698-4859-9730-983eede6935d): SELECT time1 from calcs\r\nINFO  : Semantic Analysis Completed (retrial = false)\r\nINFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:time1, type:string, comment:null)], properties:null)\r\nINFO  : Completed compiling command(queryId=hive_20180627145225_93b872de-a698-4859-9730-983eede6935d); Time taken: 0.116 seconds\r\nINFO  : Executing command(queryId=hive_20180627145225_93b872de-a698-4859-9730-983eede6935d): SELECT time1 from calcs\r\nINFO  : Completed executing command(queryId=hive_20180627145225_93b872de-a698-4859-9730-983eede6935d); Time taken: 0.003 seconds\r\nINFO  : OK\r\n+-----------+\r\n|   time1   |\r\n+-----------+\r\n| 22:20:14  |\r\n| 22:50:16  |\r\n| 19:36:22  |\r\n| 19:48:23  |\r\n| 00:05:57  |\r\n| NULL      |\r\n| 04:48:07  |\r\n| NULL      |\r\n| 19:57:33  |\r\n| NULL      |\r\n| 04:40:49  |\r\n| 02:05:25  |\r\n| NULL      |\r\n| NULL      |\r\n| 12:33:57  |\r\n| 18:58:41  |\r\n| 09:33:31  |\r\n+-----------+\r\n17 rows selected (0.202 seconds)\r\n1: jdbc:hive2://ctr-e138-1518143905142-379982> EXPLAIN SELECT  MINUTE(`time1`) FROM calcs;\r\nINFO  : Compiling command(queryId=hive_20180627145237_39e53a7e-35cb-4e17-8ccb-884c6f6358cd): EXPLAIN SELECT  MINUTE(`time1`) FROM calcs\r\nINFO  : Semantic Analysis Completed (retrial = false)\r\nINFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:Explain, type:string, comment:null)], properties:null)\r\nINFO  : Completed compiling command(queryId=hive_20180627145237_39e53a7e-35cb-4e17-8ccb-884c6f6358cd); Time taken: 0.107 seconds\r\nINFO  : Executing command(queryId=hive_20180627145237_39e53a7e-35cb-4e17-8ccb-884c6f6358cd): EXPLAIN SELECT  MINUTE(`time1`) FROM calcs\r\nINFO  : Starting task [Stage-1:EXPLAIN] in serial mode\r\nINFO  : Completed executing command(queryId=hive_20180627145237_39e53a7e-35cb-4e17-8ccb-884c6f6358cd); Time taken: 0.003 seconds\r\nINFO  : OK\r\n+----------------------------------------------------+\r\n|                      Explain                       |\r\n+----------------------------------------------------+\r\n| Plan optimized by CBO.                             |\r\n|                                                    |\r\n| Stage-0                                            |\r\n|   Fetch Operator                                   |\r\n|     limit:-1                                       |\r\n|     Select Operator [SEL_1]                        |\r\n|       Output:[\"_col0\"]                             |\r\n|       TableScan [TS_0]                             |\r\n|         Output:[\"vc\"],properties:{\"druid.fieldNames\":\"vc\",\"druid.fieldTypes\":\"int\",\"druid.query.json\":\"{\\\"queryType\\\":\\\"scan\\\",\\\"dataSource\\\":\\\"druid_tableau.calcs\\\",\\\"intervals\\\":[\\\"1900-01-01T00:00:00.000Z/3000-01-01T00:00:00.000Z\\\"],\\\"virtualColumns\\\":[{\\\"type\\\":\\\"expression\\\",\\\"name\\\":\\\"vc\\\",\\\"expression\\\":\\\"timestamp_extract(timestamp_parse(\\\\\\\"time1\\\\\\\",null,'UTC'),'MINUTE','UTC')\\\",\\\"outputType\\\":\\\"LONG\\\"}],\\\"columns\\\":[\\\"vc\\\"],\\\"resultFormat\\\":\\\"compactedList\\\"}\",\"druid.query.type\":\"scan\"} |\r\n|                                                    |\r\n+----------------------------------------------------+\r\n10 rows selected (0.136 seconds)\r\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Druid SECOND/HOUR/MINUTE does not return correct values when applied to String Columns","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nishantbangarwa","name":"nishantbangarwa","key":"nishantbangarwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Bangarwa","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nishantbangarwa","name":"nishantbangarwa","key":"nishantbangarwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Bangarwa","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13168650/comment/16525502","id":"16525502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nishantbangarwa","name":"nishantbangarwa","key":"nishantbangarwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Bangarwa","active":true,"timeZone":"Asia/Kolkata"},"body":"Verified that this is the same behavior with orc tables. \r\nThis is an expected behavior change in 3.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nishantbangarwa","name":"nishantbangarwa","key":"nishantbangarwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Bangarwa","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-06-27T19:37:27.629+0000","updated":"2018-06-27T19:37:27.629+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-20014/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3varz:"}}