{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12960067","self":"https://issues.apache.org/jira/rest/api/2/issue/12960067","key":"HIVE-13548","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-04-20T22:15:14.982+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 11 02:56:54 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13548/watchers","watchCount":1,"isWatching":false},"created":"2016-04-19T17:41:51.588+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nasron%40gmail.com","name":"nasron@gmail.com","key":"nasron@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nasron Cheong","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-07-11T02:56:54.010+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314178","id":"12314178","name":"JDBC"}],"timeoriginalestimate":null,"description":"Calling setString on a prepared statement with a string containing a '\\' will cause the SQL construction to fail.\n\nI believe the slash should be escaped by the setString function.\n\nThere may be other characters that require escaping during the same call.\n\nFailure from the unittest without the patch:\n\n{code}\nRunning org.apache.hive.jdbc.TestJdbcDriver2\nTests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 9.738 sec <<< FAILURE! - in org.apache.hive.jdbc.TestJdbcDriver2\ntestSlashPreparedStatement(org.apache.hive.jdbc.TestJdbcDriver2)  Time elapsed: 3.867 sec  <<< FAILURE!\njava.lang.AssertionError: java.lang.StringIndexOutOfBoundsException: String index out of range: -1\n\tat org.junit.Assert.fail(Assert.java:88)\n\tat org.apache.hive.jdbc.TestJdbcDriver2.testSlashPreparedStatement(TestJdbcDriver2.java:522)\n\n\nResults :\n\nFailed tests: \n  TestJdbcDriver2.testSlashPreparedStatement:522 java.lang.StringIndexOutOfBoundsException: String index out of range: -1\n\nTests run: 1, Failures: 1, Errors: 0, Skipped: 0\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12799539","id":"12799539","filename":"HIVE-13548.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nasron%40gmail.com","name":"nasron@gmail.com","key":"nasron@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nasron Cheong","active":true,"timeZone":"America/New_York"},"created":"2016-04-19T17:44:13.541+0000","size":1691,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12799539/HIVE-13548.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"hive-jdbc isn't escaping slashes during PreparedStatement","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nasron%40gmail.com","name":"nasron@gmail.com","key":"nasron@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nasron Cheong","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nasron%40gmail.com","name":"nasron@gmail.com","key":"nasron@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nasron Cheong","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12960067/comment/15248266","id":"15248266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nasron%40gmail.com","name":"nasron@gmail.com","key":"nasron@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nasron Cheong","active":true,"timeZone":"America/New_York"},"body":"Escaping '\\' during prepared statement setString","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nasron%40gmail.com","name":"nasron@gmail.com","key":"nasron@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nasron Cheong","active":true,"timeZone":"America/New_York"},"created":"2016-04-19T17:43:49.217+0000","updated":"2016-04-19T17:43:49.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12960067/comment/15250823","id":"15250823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12799539/HIVE-13548.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 38 failed/errored test(s), 9484 tests executed\n*Failed tests:*\n{noformat}\nTestCliDriver-alter_table_not_sorted.q-cbo_udf_max.q-udf_equal.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-bool_literal.q-authorization_cli_createtab.q-explain_ddl.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-bucketmapjoin3.q-vector_partition_diff_num_cols.q-stats2.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-cbo_rp_join1.q-union_top_level.q-insert_update_delete.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-create_func1.q-enforce_order.q-interval_comparison.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-cte_mat_1.q-groupby_sort_6.q-udf_regexp.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-describe_xpath.q-autogen_colalias.q-skewjoinopt3.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-encryption_join_with_different_encryption_keys.q-bucketcontext_3.q-udf_divide.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-groupby4.q-convert_enum_to_string.q-load_dyn_part3.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-groupby_complex_types.q-auto_join9.q-vector_decimal_round.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-groupby_map_ppr_multi_distinct.q-vectorization_16.q-multi_insert_mixed.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-infer_bucket_sort_multi_insert.q-vector_custom_udf_configure.q-udf4.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-lateral_view_noalias.q-input11_limit.q-orc_llap.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-metadataonly1.q-union13.q-udf1.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-orc_merge10.q-groupby8_map.q-exim_14_managed_location_over_existing.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-order_null.q-part_inherit_tbl_props_with_star.q-join_filters.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-parquet_ppd_decimal.q-vector_complex_join.q-cluster.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-ppd_union.q-udf_round_3.q-groupby12.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-ptf_general_queries.q-unionDistinct_1.q-groupby1_noskew.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-rcfile_merge1.q-multigroupby_singlemr.q-vectorization_limit.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-rename_column.q-index_compact.q-merge_dynamic_partition2.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-sample_islocalmode_hook_use_metadata.q-cbo_rp_semijoin.q-custom_input_output_format.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-showparts.q-skewjoinopt21.q-udaf_percentile_approx_20.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-smb_mapjoin_4.q-udf_to_unix_timestamp.q-tez_union.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-stats13.q-join_parse.q-sort_merge_join_desc_2.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-stats_publisher_error_1.q-auto_join1.q-cast_to_int.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-tez_joins_explain.q-varchar_serde.q-ivyDownload.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-tez_smb_empty.q-char_2.q-udf_date_sub.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-udf_asin.q-windowing_multipartitioning.q-bucketcontext_1.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-udf_double.q-join11.q-join18.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-udf_locate.q-join32_lessSize.q-correlationoptimizer8.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-udf_to_float.q-decimal_precision2.q-ppd_gby_join.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-udtf_posexplode.q-udf_exp.q-alter_numbuckets_partitioned_table_h23.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-unicode_notation.q-gen_udf_example_add10.q-ppd_join4.q-and-12-more - did not produce a TEST-*.xml file\nTestCliDriver-vector_distinct_2.q-update_after_multiple_inserts_special_characters.q-nullscript.q-and-12-more - did not produce a TEST-*.xml file\nTestHWISessionManager - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_index_bitmap3\norg.apache.hive.beeline.TestSchemaTool.testSchemaInit\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-MASTER-Build/20/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-MASTER-Build/20/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-20/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 38 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12799539 - PreCommit-HIVE-MASTER-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-04-20T22:15:14.982+0000","updated":"2016-04-20T22:15:14.982+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12960067/comment/15369918","id":"15369918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch on HIVE-13625 should resolve this too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-10T19:41:33.787+0000","updated":"2016-07-10T19:41:33.787+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12960067/comment/15370109","id":"15370109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12799539/HIVE-13548.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 7 failed/errored test(s), 10298 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_globallimit\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_13\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_vector_complex_all\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_vector_complex_join\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_acid_globallimit\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.org.apache.hadoop.hive.cli.TestMinimrCliDriver\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/460/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/460/console\nTest logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-460/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 7 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12799539 - PreCommit-HIVE-MASTER-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-07-11T02:56:54.010+0000","updated":"2016-07-11T02:56:54.010+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13548/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2wbzr:"}}