{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12611735","self":"https://issues.apache.org/jira/rest/api/2/issue/12611735","key":"HIVE-3576","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323587","id":"12323587","description":"Hive 0.11.0","name":"0.11.0","archived":false,"released":true,"releaseDate":"2013-05-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2013-07-15T06:31:57.485+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Mar 26 07:48:25 UTC 2014","customfield_12310420":"248543","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_45617853269_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-03-26T07:48:25.091+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-3576/watchers","watchCount":4,"isWatching":false},"created":"2012-10-14T08:10:51.856+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317742","id":"12317742","description":"released","name":"0.9.0","archived":false,"released":true,"releaseDate":"2012-04-30"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-03-26T07:48:25.120+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312586","id":"12312586","name":"Query Processor","description":"Tracks issues dealing with query processing."}],"timeoriginalestimate":null,"description":"Doing a simple \"{{ALTER TABLE testtable DROP IF EXISTS PARTITION(dt=NONEXISTENTPARTITION)}}\" fails with a SemanticException of the 10006 kind (INVALID_PARTITION).\n\nThis does not respect the {{hive.exec.drop.ignorenonexistent}} condition either, since there are no if-check-wraps around this area, when fetching partitions from the store.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"55614","customfield_12312823":null,"summary":"Regression: ALTER TABLE DROP IF EXISTS PARTITION throws a SemanticException if Partition is not found","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12611735/comment/13475878","id":"13475878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"Sorry, let me explain with an example:\n\nOn 0.7.1:\n\n{code}\nhive> create table test(a string) partitioned by (dt string);\nOK\nTime taken: 21.049 seconds\nhive> alter table test drop if exists partition(dt=2007);\nOK\nTime taken: 1.297 seconds\n{code}\n\nOn 0.9.0:\n\n{code}\nhive> create table test(a string) partitioned by (dt string);\nOK\nTime taken: 2.133 seconds\nhive> alter table test drop if exists partition(dt=2007);\nFAILED: SemanticException [Error 10006]: Partition not found dt = 2007\n{code}\n\nAgain, if we make sure to use 'strings', on 0.9.0, it works:\n\n{code}\nhive> alter table test drop if exists partition(dt='2007');\nOK\nTime taken: 0.684 seconds\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-10-14T18:37:51.346+0000","updated":"2012-10-14T18:37:51.346+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12611735/comment/13484004","id":"13484004","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"This also only happens on tables partitioned by a string type key, not int types, for example:\n\n{code}\nhive> create table str_part_table (a string) partitioned by (dt string);\nOK\nTime taken: 0.054 seconds\nhive> create table int_part_table (a string) partitioned by (dt int);   \nOK\nTime taken: 0.031 seconds\nhive> alter table str_part_table drop if exists partition (dt=2007);\nFAILED: SemanticException [Error 10006]: Partition not found dt = 2007\nhive> alter table int_part_table drop if exists partition (dt=2007);\nOK\nTime taken: 0.091 seconds\nhive> alter table str_part_table drop if exists partition (dt='2007');\nOK\nTime taken: 0.06 seconds\nhive> alter table int_part_table drop if exists partition (dt='2007');\nOK\nTime taken: 0.065 seconds\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-10-25T09:31:32.867+0000","updated":"2012-10-25T09:31:32.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12611735/comment/13708263","id":"13708263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kjsingh","name":"kjsingh","key":"kjsingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kjsingh&avatarId=22338","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kjsingh&avatarId=22338","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kjsingh&avatarId=22338","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kjsingh&avatarId=22338"},"displayName":"Kanwaljit Singh","active":true,"timeZone":"Asia/Kolkata"},"body":"Any updates on this issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kjsingh","name":"kjsingh","key":"kjsingh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kjsingh&avatarId=22338","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kjsingh&avatarId=22338","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kjsingh&avatarId=22338","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kjsingh&avatarId=22338"},"displayName":"Kanwaljit Singh","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-07-15T06:31:57.485+0000","updated":"2013-07-15T06:31:57.485+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12611735/comment/13947638","id":"13947638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"Unable to reproduce in 0.11+. Resolving.\n\n{code}\nhive> create table str_part_table (a string) partitioned by (dt string);\nOK\nTime taken: 16.108 seconds\nhive> create table int_part_table (a string) partitioned by (dt int);\nOK\nTime taken: 0.705 seconds\nhive> alter table str_part_table drop if exists partition (dt=2007);\nOK\nTime taken: 1.38 seconds\nhive> alter table int_part_table drop if exists partition (dt=2007);\nOK\nTime taken: 3.494 seconds\nhive> alter table str_part_table drop if exists partition (dt='2007');\nOK\nTime taken: 0.091 seconds\nhive> alter table int_part_table drop if exists partition (dt='2007');\nOK\nTime taken: 0.101 seconds\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-03-26T07:48:25.116+0000","updated":"2014-03-26T07:48:25.116+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-3576/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i09vxj:"}}