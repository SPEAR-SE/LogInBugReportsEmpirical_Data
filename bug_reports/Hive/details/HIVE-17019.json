{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13084504","self":"https://issues.apache.org/jira/rest/api/2/issue/13084504","key":"HIVE-17019","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2017-07-04T12:17:47.143+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 24 21:33:39 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-17019/watchers","watchCount":4,"isWatching":false},"created":"2017-07-04T10:44:35.624+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-07-24T21:33:39.618+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[],"timeoriginalestimate":null,"description":"Given a queryId or dagId, get all information related to it: like, tez am, task logs, hive ats data, tez ats data, slider am status, etc. Package it into and archive.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12875614","id":"12875614","filename":"HIVE-17019.01.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-07-04T10:47:26.141+0000","size":105674,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12875614/HIVE-17019.01.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12877805","id":"12877805","filename":"HIVE-17019.02.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-07-18T14:00:16.345+0000","size":138034,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12877805/HIVE-17019.02.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12877960","id":"12877960","filename":"HIVE-17019.03.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-07-19T10:49:31.248+0000","size":138032,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12877960/HIVE-17019.03.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Add support to download debugging information as an archive.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16073564","id":"16073564","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12875614/HIVE-17019.01.patch\n\n{color:green}SUCCESS:{color} +1 due to 3 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 40 failed/errored test(s), 10498 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=162)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=163)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=164)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=165)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=166)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=139)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=140)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=141)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=142)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=143)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=167)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=168)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=169)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=98)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=99)\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.org.apache.hadoop.hive.cli.TestMinimrCliDriver (batchId=86)\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.org.apache.hadoop.hive.cli.TestMinimrCliDriver (batchId=87)\norg.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver (batchId=91)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.org.apache.hadoop.hive.cli.TestPerfCliDriver (batchId=232)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=102)\norg.apache.hive.beeline.TestBeeLineWithArgs.org.apache.hive.beeline.TestBeeLineWithArgs (batchId=220)\norg.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)\norg.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)\norg.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)\norg.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler.org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler (batchId=230)\norg.apache.hive.hcatalog.mapreduce.TestHCatMultiOutputFormat.org.apache.hive.hcatalog.mapreduce.TestHCatMultiOutputFormat (batchId=187)\norg.apache.hive.hcatalog.mapreduce.TestHCatPartitionPublish.org.apache.hive.hcatalog.mapreduce.TestHCatPartitionPublish (batchId=182)\norg.apache.hive.hcatalog.mapreduce.TestMultiOutputFormat.org.apache.hive.hcatalog.mapreduce.TestMultiOutputFormat (batchId=187)\norg.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark (batchId=226)\norg.apache.hive.jdbc.TestJdbcWithMiniHA.org.apache.hive.jdbc.TestJdbcWithMiniHA (batchId=225)\norg.apache.hive.jdbc.TestJdbcWithMiniLlap.org.apache.hive.jdbc.TestJdbcWithMiniLlap (batchId=226)\norg.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark (batchId=226)\norg.apache.hive.jdbc.TestSchedulerQueue.testFairSchedulerPrimaryQueueMapping (batchId=229)\norg.apache.hive.jdbc.TestSchedulerQueue.testFairSchedulerQueueMapping (batchId=229)\norg.apache.hive.jdbc.TestSchedulerQueue.testFairSchedulerSecondaryQueueMapping (batchId=229)\norg.apache.hive.jdbc.TestSchedulerQueue.testQueueMappingCheckDisabled (batchId=229)\norg.apache.hive.service.TestHS2ImpersonationWithRemoteMS.org.apache.hive.service.TestHS2ImpersonationWithRemoteMS (batchId=222)\norg.apache.hive.service.cli.operation.TestOperationLoggingAPIWithTez.org.apache.hive.service.cli.operation.TestOperationLoggingAPIWithTez (batchId=221)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/5880/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/5880/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-5880/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 40 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12875614 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-07-04T12:17:47.143+0000","updated":"2017-07-04T12:17:47.143+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16083111","id":"16083111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for posting the patch. Will be useful to get relevant data for a query.\n- Change the top level package from llap-debug to tez-debug? (Works with both I believe) [~ashutoshc], [~thejas] - any recommendations on whether the code gets a top level module, or goes under an existing module. This allows downloading of various debug artifacts for a tez job - logs, metrics for llap, hiveserver2 logs (soon), tez am logs, ATS data for the query (hive and tez).\n- In the new pom.xml, dependency on hive-llap-server. 1) Is it required?, 2) Will need to exclude some dependent artifacts. See service/pom.xml llap-server dependency handling\n- LogDownloadServlet - Should this throw an error as soon as the filename pattern validation fails?\n- LogDownloadServlet - change to dagId/queryId validation instead\n- LogDownloadServlet - thread being created inside of the request handler? This should be limited outside of the request? so that only a controlled number of parallel artifact downloads can run.\n- LogDownloadServlet - what happens in case of aggregator failure? Exception back to the user?\n- LogDownloadServlet - seems to be generating the file to disk and then streaming it over. Can this be streamed over directly instead. Otherwise there's the possibility of leaking files. (Artifact.downloadIntoStream or some such?) Guessing this is complicated further by the multi-threaded artifact downloader.\nAlternately need to have a cleanup mechanism. \n- Timeout on the tests\n- Apache header needs to be added to files where it is missing.\n- Main - Please rename to something more indicative of what the tool does.\n- Main - Likely a follow up jira - parse using a standard library, instead of trying to parse the arguments to main directly.\n- Server - Enabling the artifact should be controlled via a config. Does not always need to be hosted in HS2 (Default disabled, at least till security can be sorted out)\n- Is it possible to support a timeout on the downloads? (Can be a follow up jira)\n- ArtifactAggregator - I believe this does 2 stages of dependent artifacts / downloads? Stage1 - download whatever it can. Information from this should should be adequate for stage2 downloads ?\n- For the ones not implemented yet (DummyArtifact) - think it's better to just comment out the code, instead of invoking the DummyArtifacts downloader\n- Security - ACL enforcement required on secure clusters to make sure users can only download what they have access to. This is a must fix before this can be enabled by default.\n- Security - this can work around yarn restrictions on log downloads, since the files are being accessed by the hive user.\nCould you please add some details on cluster testing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-07-11T22:37:29.686+0000","updated":"2017-07-11T22:37:29.686+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16083774","id":"16083774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"body":"Thanks [~sseth].\n\n- Change the top level package from llap-debug to tez-debug? (Works with both I believe) [~ashutoshc], [~thejas] - any recommendations on whether the code gets a top level module, or goes under an existing module. This allows downloading of various debug artifacts for a tez job - logs, metrics for llap, hiveserver2 logs (soon), tez am logs, ATS data for the query (hive and tez).\n\nWill change the directory.\n\n- In the new pom.xml, dependency on hive-llap-server. 1) Is it required?, 2) Will need to exclude some dependent artifacts. See service/pom.xml llap-server dependency handling\n\nThe llap status is fetched using LlapStatusServiceDriver which is part of hive-llap-server.\n\n- LogDownloadServlet - Should this throw an error as soon as the filename pattern validation fails?\n\nThe filename check is to prevent any injection attack into the file name/http header, not to validate the id.\n\n- LogDownloadServlet - change to dagId/queryId validation instead\n\nCan do, but it will be sensitive to changes to the id format. Currently its passed down to ATS and nothing will be retrieved for it.\n\n- LogDownloadServlet - thread being created inside of the request handler? This should be limited outside of the request? so that only a controlled number of parallel artifact downloads can run.\n\nCreating a shared executor, does it make sense to use Guava's direct executor, which will schedule task in current thread.\n\n- LogDownloadServlet - what happens in case of aggregator failure? Exception back to the user?\n\nJetty will handle the exception, returning 500 to the user. Not sure if exception trace is part of it. Will try and see.\n\n- LogDownloadServlet - seems to be generating the file to disk and then streaming it over. Can this be streamed over directly instead. Otherwise there's the possibility of leaking files. (Artifact.downloadIntoStream or some such?) Guessing this is complicated further by the multi-threaded artifact downloader.\nAlternately need to have a cleanup mechanism.\n\nFor streaming directly, it would not be possible because of multithreading. If its single threaded then I can use a ZipOutputStream and add entry one at a time.\n\nOops, sorry the finally got moved down since aggregator had to be closed before streaming the file. I'll handle it using a try finally to cleanup.\n\n- Timeout on the tests\n\nSetting timeouts on tests.\n\n- Apache header needs to be added to files where it is missing.\n\nSorry, will add the licence header to all files.\n\n- Main - Please rename to something more indicative of what the tool does.\n\nI was planning to remove this and integrate with hive cli, --service <download_logs>. This does not work without lot of classpath fixes, or I'll have to create a script to add hive jars.\n\n- Main - Likely a follow up jira - parse using a standard library, instead of trying to parse the arguments to main directly.\n\nWill check a few libs, apache commons OptionBuilder uses a static instance in its builder. Should be ok, for a cli based invoke once app, but will look at something better on lines of python argparse.\n\n- Server - Enabling the artifact should be controlled via a config. Does not always need to be hosted in HS2 (Default disabled, at least till security can be sorted out)\n\nI'll add a config.\n\n- Is it possible to support a timeout on the downloads? (Can be a follow up jira)\n\nSure, will do. Global or per download or both?\n\n- ArtifactAggregator - I believe this does 2 stages of dependent artifacts / downloads? Stage1 - download whatever it can. Information from this should should be adequate for stage2 downloads ?\n\nIt could be more stages:\nEx: given dag_id\nstage 1: will fetch tez ats info which is used to extract hive id, task container/node list.\nstage 2: will fetch hive ats info, tez container log list.\nstage 3: llap containers log list, tez task logs.\nstage 4: llap container logs.\n\naggregator iterates through the list of sources and finds those which can download using info in the params.\nIt schedules the sources and waits for them to complete everything and the repeats.\nStop if no new sources could download or all sources are exhausted.\n\n\n- For the ones not implemented yet (DummyArtifact) - think it's better to just comment out the code, instead of invoking the DummyArtifacts downloader\n\nSorry, will do.\n\n- Security - ACL enforcement required on secure clusters to make sure users can only download what they have access to. This is a must fix before this can be enabled by default.\n\nWorking on this.\n\n- Security - this can work around yarn restrictions on log downloads, since the files are being accessed by the hive user.\n\nYes this should work.\n\nCould you please add some details on cluster testing.\n\nI'll add another comment with the details of testing.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-07-12T10:32:04.036+0000","updated":"2017-07-12T10:32:04.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16088180","id":"16088180","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. The llap status is fetched using LlapStatusServiceDriver which is part of hive-llap-server.\nOK. llap-status should really be under it's own module. Anyway, that can be changed later. Another alternate is to have llap-status hosted as a webservice. That can happen in a follow up. Would be really good to skip the llap-server dependency, which in turn pulls in a lot of others.\n\nbq. Creating a shared executor, does it make sense to use Guava's direct executor, which will schedule task in current thread.\nSure. It could just be done inline otherwise? The main question is how the total number of downloads are restricted. Restricting the number of handlers on the web interface does not help, since that serves out a lot more than download debug artifacts.\n\nbq. For streaming directly, it would not be possible because of multithreading. If its single threaded then I can use a ZipOutputStream and add entry one at a time.\nThink this is ok as long as files are cleaned up. May want to cap file sizes as well, since logs can get really large.\n\nbq. I was planning to remove this and integrate with hive cli, --service <download_logs>. This does not work without lot of classpath fixes, or I'll have to create a script to add hive jars.\nSounds good.\n\nbq. Will check a few libs, apache commons OptionBuilder uses a static instance in its builder. Should be ok, for a cli based invoke once app, but will look at something better on lines of python argparse.\nSounds good. Maybe in a follow up jira to get this in faster?\n\nbq. Sure, will do. Global or per download or both?\nGlobal, defined by the server.\n\nbq. Stop if no new sources could download or all sources are exhausted.\nSounds good. I misread the code, sorry.\n\nbq. Jetty will handle the exception, returning 500 to the user. Not sure if exception trace is part of it. Will try and see.\nThink this is ok as long as the error has enough information to let the user know what happened.\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-07-14T22:03:09.045+0000","updated":"2017-07-14T22:03:09.045+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16091580","id":"16091580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"body":"* Addressing review comments from [~sseth]\n* Adding a new service to hive --service command.\n* Adding support to download and check acls.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-07-18T14:02:18.941+0000","updated":"2017-07-18T14:02:18.941+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16091723","id":"16091723","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12877805/HIVE-17019.02.patch\n\n{color:green}SUCCESS:{color} +1 due to 3 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 41 failed/errored test(s), 10737 tests executed\n*Failed tests:*\n{noformat}\nTestSSL - did not produce a TEST-*.xml file (likely timed out) (batchId=225)\norg.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=239)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=162)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=163)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=164)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=165)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver (batchId=166)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=139)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=140)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=141)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=142)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=143)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=167)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=168)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=169)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=170)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=98)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=99)\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.org.apache.hadoop.hive.cli.TestMinimrCliDriver (batchId=86)\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.org.apache.hadoop.hive.cli.TestMinimrCliDriver (batchId=87)\norg.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver (batchId=91)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.org.apache.hadoop.hive.cli.TestPerfCliDriver (batchId=234)\norg.apache.hive.beeline.TestBeeLineWithArgs.org.apache.hive.beeline.TestBeeLineWithArgs (batchId=222)\norg.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)\norg.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)\norg.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)\norg.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler.org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler (batchId=232)\norg.apache.hive.hcatalog.mapreduce.TestHCatMultiOutputFormat.org.apache.hive.hcatalog.mapreduce.TestHCatMultiOutputFormat (batchId=188)\norg.apache.hive.hcatalog.mapreduce.TestHCatPartitionPublish.org.apache.hive.hcatalog.mapreduce.TestHCatPartitionPublish (batchId=183)\norg.apache.hive.hcatalog.mapreduce.TestMultiOutputFormat.org.apache.hive.hcatalog.mapreduce.TestMultiOutputFormat (batchId=188)\norg.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark (batchId=228)\norg.apache.hive.jdbc.TestJdbcWithMiniHA.org.apache.hive.jdbc.TestJdbcWithMiniHA (batchId=227)\norg.apache.hive.jdbc.TestJdbcWithMiniLlap.org.apache.hive.jdbc.TestJdbcWithMiniLlap (batchId=228)\norg.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark (batchId=228)\norg.apache.hive.jdbc.TestSchedulerQueue.testFairSchedulerPrimaryQueueMapping (batchId=231)\norg.apache.hive.jdbc.TestSchedulerQueue.testFairSchedulerQueueMapping (batchId=231)\norg.apache.hive.jdbc.TestSchedulerQueue.testFairSchedulerSecondaryQueueMapping (batchId=231)\norg.apache.hive.jdbc.TestSchedulerQueue.testQueueMappingCheckDisabled (batchId=231)\norg.apache.hive.service.TestHS2ImpersonationWithRemoteMS.org.apache.hive.service.TestHS2ImpersonationWithRemoteMS (batchId=224)\norg.apache.hive.service.cli.operation.TestOperationLoggingAPIWithTez.org.apache.hive.service.cli.operation.TestOperationLoggingAPIWithTez (batchId=223)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/6073/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/6073/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-6073/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 41 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12877805 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-07-18T15:37:27.112+0000","updated":"2017-07-18T15:37:27.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16091794","id":"16091794","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"body":"Investigating test case failures, one of them seem to be because of guice version mismatch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-07-18T16:32:32.100+0000","updated":"2017-07-18T16:32:32.100+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16092916","id":"16092916","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"body":"Downgrading guice version to 3.0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=harishjp","name":"harishjp","key":"harishjp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=harishjp&avatarId=27096","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=harishjp&avatarId=27096","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=harishjp&avatarId=27096","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=harishjp&avatarId=27096"},"displayName":"Harish Jaiprakash","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-07-19T10:48:23.359+0000","updated":"2017-07-19T10:48:23.359+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16092968","id":"16092968","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12877960/HIVE-17019.03.patch\n\n{color:green}SUCCESS:{color} +1 due to 3 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 17 failed/errored test(s), 11084 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=239)\norg.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=239)\norg.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[smb_mapjoin_1] (batchId=239)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning] (batchId=167)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning_2] (batchId=169)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=168)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_use_op_stats] (batchId=167)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_use_ts_stats_for_mapjoin] (batchId=168)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=167)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=234)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=234)\norg.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)\norg.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)\norg.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)\norg.apache.hive.service.cli.session.TestSessionManagerMetrics.testAbandonedSessionMetrics (batchId=194)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/6086/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/6086/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-6086/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 17 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12877960 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-07-19T11:59:34.578+0000","updated":"2017-07-19T11:59:34.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13084504/comment/16099157","id":"16099157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Re-looked at the patch. Mostly looks good. Some comments and questions.\n- How is the context set up for LogDownloadServlet. e.g.CONF_LOG_DOWNLODER_NUM_EXECUTORS. The config should likely be set up in HiveConf in some way.\n- init for the servlet will happen once at startup? So if there's multiple requests to download, and the limit is hit, all webserver threads will block? Should we just return an error if there's too many parallel downloads, so that other parts of the UI continue to be functional.\n- In terms of the security - this becomes interesting. Essentially says that the feature will only work if authentication is enabled on secure clusters.\n- Timeout for the downloads as a separate jira?\n- Are any credentials required on the HttpClient created to download artifacts from various end points?\n- For Constants like TIMELINE_PATH_PREFIX - any chance YARN has a helper method? Otherwise we should file a jira to ask yarn to expose such utilities.\n- Both dagId and queryId cannot be specified at the same time?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-07-24T21:33:39.618+0000","updated":"2017-07-24T21:33:39.618+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-17019/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3h2nj:"}}