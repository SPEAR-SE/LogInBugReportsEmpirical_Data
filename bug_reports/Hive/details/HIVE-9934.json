{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12781323","self":"https://issues.apache.org/jira/rest/api/2/issue/12781323","key":"HIVE-9934","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329345","id":"12329345","description":"Hive 1.2.0","name":"1.2.0","archived":false,"released":true,"releaseDate":"2015-05-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-03-12T07:58:28.952+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 18 19:50:15 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_519885542_*|*_1_*:*_1_*:*_1824444_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-03-17T22:06:48.333+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-9934/watchers","watchCount":7,"isWatching":false},"created":"2015-03-11T21:11:38.407+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329363","id":"12329363","name":"1.1.0","archived":false,"released":true,"releaseDate":"2015-03-07"}],"issuelinks":[{"id":"12410885","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12410885","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12782573","key":"HIVE-9990","self":"https://issues.apache.org/jira/rest/api/2/issue/12782573","fields":{"summary":"TestMultiSessionsHS2WithLocalClusterSpark is failing","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-05-18T19:50:15.206+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313866","id":"12313866","name":"Security"}],"timeoriginalestimate":null,"description":"Vulnerability in LdapAuthenticationProviderImpl enables HiveServer2 client to degrade the authentication mechanism to \"none\", allowing authentication without password.\n\nSee: http://docs.oracle.com/javase/jndi/tutorial/ldap/security/simple.html\n“If you supply an empty string, an empty byte/char array, or null to the Context.SECURITY_CREDENTIALS environment property, then the authentication mechanism will be \"none\". This is because the LDAP requires the password to be nonempty for simple authentication. The protocol automatically converts the authentication to \"none\" if a password is not supplied.”\n \nSince the LdapAuthenticationProviderImpl.Authenticate method is relying on a NamingException being thrown during creation of initial context, it does not fail when the context result is an “unauthenticated” positive response from the LDAP server. The end result is, one can authenticate with HiveServer2 using the LdapAuthenticationProviderImpl with only a user name and an empty password.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12704024","id":"12704024","filename":"HIVE-9934.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-11T21:41:56.494+0000","size":1014,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12704024/HIVE-9934.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12704870","id":"12704870","filename":"HIVE-9934.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-16T20:55:46.374+0000","size":2818,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12704870/HIVE-9934.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12705088","id":"12705088","filename":"HIVE-9934.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-17T14:16:58.951+0000","size":2723,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12705088/HIVE-9934.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12704981","id":"12704981","filename":"HIVE-9934.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-17T02:47:44.181+0000","size":2723,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12704981/HIVE-9934.3.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Vulnerability in LdapAuthenticationProviderImpl enables HiveServer2 client to degrade the authentication mechanism to \"none\", allowing authentication without password","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14357669","id":"14357669","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"body":"Check if password is null or blank. If so, throw exception.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-11T21:41:56.501+0000","updated":"2015-03-11T21:41:56.501+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14358251","id":"14358251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:green}Overall{color}: +1 all checks pass\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12704024/HIVE-9934.1.patch\n\n{color:green}SUCCESS:{color} +1 7762 tests passed\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3012/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3012/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3012/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12704024 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-03-12T07:58:28.952+0000","updated":"2015-03-12T07:58:28.952+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14363920","id":"14363920","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"body":"(cc [~prasadm] [~xuefuz]). I was able to reproduce the issue after disabling JDBC authentication and use the Hadoop provided {{SaslPlainServerFactory}}. I need to do the latter because Hive provided Sasl server implementation checks the case when password is empty, therefore the issue could be prevented. However, if the Hadoop version class gets loaded first (which doesn't check whether password is null or empty), then the issue could still happen.\n\nIn this patch I also included a simple uni test. Desirably we should write an end-to-end test, however that involves non-trivial work. I'll put that in a follow-up JIRA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-16T20:55:46.380+0000","updated":"2015-03-16T20:55:46.380+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14364092","id":"14364092","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-16T22:26:41.952+0000","updated":"2015-03-16T22:26:41.952+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14364424","id":"14364424","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12704870/HIVE-9934.2.patch\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 7769 tests executed\n*Failed tests:*\n{noformat}\nTestCustomAuthentication - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udaf_percentile_approx_23\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3047/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3047/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3047/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12704870 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-03-17T02:09:23.404+0000","updated":"2015-03-17T02:09:23.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14364462","id":"14364462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"body":"There's a redundant field {{hiveServer2}} in the previous patch. This patch removes it - it shouldn't affect test results.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-17T02:47:44.187+0000","updated":"2015-03-17T02:47:44.187+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14365024","id":"14365024","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12704981/HIVE-9934.3.patch\n\n{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 7770 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testSparkQuery\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3053/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3053/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3053/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 1 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12704981 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-03-17T11:55:38.338+0000","updated":"2015-03-17T11:55:38.338+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14365037","id":"14365037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"body":"Found this in log: \n\n{noformat}\n2015-03-17 04:33:32,728 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - 2015-03-17 04:33:32,725 INFO  [pool-1-thread-1] client.RemoteDriver (RemoteDriver.java:call(371)) - Failed to run job 681ccfbe-bf9f-491c-a2e7-ad513f62d1dc\n2015-03-17 04:33:32,728 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - java.util.concurrent.ExecutionException: Exception thrown by job\n2015-03-17 04:33:32,728 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.JavaFutureActionWrapper.getImpl(FutureAction.scala:311)\n2015-03-17 04:33:32,728 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.JavaFutureActionWrapper.get(FutureAction.scala:316)\n2015-03-17 04:33:32,728 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.hive.spark.client.RemoteDriver$JobWrapper.call(RemoteDriver.java:364)\n2015-03-17 04:33:32,728 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.hive.spark.client.RemoteDriver$JobWrapper.call(RemoteDriver.java:317)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat java.lang.Thread.run(Thread.java:744)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - Caused by: org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 0.0 failed 4 times, most recent failure: Lost task 0.3 in stage 0.0 (TID 3, ip-10-182-56-7.ec2.internal): java.io.FileNotFoundException: http://10.182.56.7:34690/jars/hive-exec-1.2.0-SNAPSHOT.jar\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1624)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.util.Utils$.doFetchFile(Utils.scala:452)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.util.Utils$.fetchFile(Utils.scala:383)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.executor.Executor$$anonfun$org$apache$spark$executor$Executor$$updateDependencies$6.apply(Executor.scala:350)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.executor.Executor$$anonfun$org$apache$spark$executor$Executor$$updateDependencies$6.apply(Executor.scala:347)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.TraversableLike$WithFilter$$anonfun$foreach$1.apply(TraversableLike.scala:772)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:98)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.mutable.HashMap$$anonfun$foreach$1.apply(HashMap.scala:98)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.mutable.HashTable$class.foreachEntry(HashTable.scala:226)\n2015-03-17 04:33:32,729 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:39)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.mutable.HashMap.foreach(HashMap.scala:98)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.TraversableLike$WithFilter.foreach(TraversableLike.scala:771)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.executor.Executor.org$apache$spark$executor$Executor$$updateDependencies(Executor.scala:347)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:177)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat java.lang.Thread.run(Thread.java:744)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - Driver stacktrace:\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGScheduler.org$apache$spark$scheduler$DAGScheduler$$failJobAndIndependentStages(DAGScheduler.scala:1214)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1203)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1202)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:1202)\n2015-03-17 04:33:32,730 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:696)\n2015-03-17 04:33:32,731 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:696)\n2015-03-17 04:33:32,731 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat scala.Option.foreach(Option.scala:236)\n2015-03-17 04:33:32,731 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:696)\n2015-03-17 04:33:32,731 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGSchedulerEventProcessActor$$anonfun$receive$2.applyOrElse(DAGScheduler.scala:1420)\n2015-03-17 04:33:32,731 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat akka.actor.Actor$class.aroundReceive(Actor.scala:465)\n2015-03-17 04:33:32,731 INFO  [stdout-redir-1]: client.SparkClientImpl (SparkClientImpl.java:run(537)) - \tat org.apache.spark.scheduler.DAGSchedulerEventProcessActor.aroundReceive(DAGScheduler.scala:137\n{noformat}\n\nI don't think this is relevant to my patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-17T12:11:26.854+0000","updated":"2015-03-17T12:11:26.854+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14365161","id":"14365161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Attached the same patch for another test run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-17T14:16:58.957+0000","updated":"2015-03-17T14:16:58.957+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14365402","id":"14365402","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:green}Overall{color}: +1 all checks pass\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12705088/HIVE-9934.3.patch\n\n{color:green}SUCCESS:{color} +1 7770 tests passed\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3056/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3056/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3056/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12705088 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-03-17T16:08:09.024+0000","updated":"2015-03-17T16:08:09.024+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14365584","id":"14365584","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasadm","name":"prasadm","key":"prasadm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasad Mujumdar","active":true,"timeZone":"Etc/UTC"},"body":"Looks fine to me.\nBTW, testLdapEmptyPassword() is missing the Test annotation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasadm","name":"prasadm","key":"prasadm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasad Mujumdar","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-17T17:26:14.418+0000","updated":"2015-03-17T17:26:14.418+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14365832","id":"14365832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"[~prasadm], I think lacking @Test seems fine in this case, as the class is extended from TestCase. I also saw the added test case was run in previous test result. Thus, patch #3 is good as far as I can see. Let me know if you see differently.\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-17T19:14:09.352+0000","updated":"2015-03-17T19:14:09.352+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14365839","id":"14365839","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasadm","name":"prasadm","key":"prasadm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasad Mujumdar","active":true,"timeZone":"Etc/UTC"},"body":"That's fine. The test did get run in the pre-commit run for patch #3. sorry about the noise.\n\n+1\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasadm","name":"prasadm","key":"prasadm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasad Mujumdar","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-17T19:18:46.748+0000","updated":"2015-03-17T19:18:46.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14366184","id":"14366184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to trunk. Thanks, Chao.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-17T22:06:48.371+0000","updated":"2015-03-17T22:06:48.371+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14369465","id":"14369465","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I was able to reproduce the issue after disabling JDBC authentication and use the Hadoop provided SaslPlainServerFactory. \n[~csun] Can you please elaborate on what you had do to reproduce this ? What do you mean by disabling JDBC authentication ? (I assume we need to set hive.server2.authentication=LDAP for this scenario). Also, since the SaslPlainServerFactory in hive in a different package, does changing the classpath alone result in the Hadoop provided SaslPlainServerFactory getting used ?\n\ncc [~vgumashta]\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-19T15:02:12.384+0000","updated":"2015-03-19T15:02:12.384+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14369918","id":"14369918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"What documentation does this need?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2015-03-19T19:03:09.882+0000","updated":"2015-03-19T19:03:09.882+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14369942","id":"14369942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasadm","name":"prasadm","key":"prasadm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasad Mujumdar","active":true,"timeZone":"Etc/UTC"},"body":"Hive's SaslPlainServer actually throws an exception for empty or null password. When Hadoop implemented it's own plain Sasl server, we are potentially exposed to this LDAP vulnerability. The sasl service registration happens via static code block and hence we can't guarantee which Sasl server will be used.\nAnycase, since this is LDAP specific behavior, it's better to guard it in LDAP provider rather than depending on the underlying Sasl implementation.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasadm","name":"prasadm","key":"prasadm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasad Mujumdar","active":true,"timeZone":"Etc/UTC"},"created":"2015-03-19T19:14:57.910+0000","updated":"2015-03-19T19:14:57.910+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14370174","id":"14370174","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Apache has special guidelines regarding security vulnerabilities. Here is the link:\n\nhttp://www.apache.org/security/committers\n\nWe are all new to this, so what we have done so far may not comply to this. However, we should try to do so from now on.\n\nFor doc, please also refer to the document.\n\nAS to the vulnerability, discussion is still ongoing in the community. Thus, we will act based on the conclusions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-19T21:38:15.502+0000","updated":"2015-03-19T21:38:15.502+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14370441","id":"14370441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~thejas], for JDBC, I need to modify the code. In HiveConnection, when password is empty, it will change it to \"anonymous\". Since I'm using JDBC + Beeline to reproduce the issue, I need to change it so that the password will still remain empty.\n\nFor SaslPlainServerFactory, sorry my previous comment wasn't precise. Here, even though from different packages. they are added via different Providers with the same key (\"SaslServerFactory.PLAIN\"). Later, when searching for a particular key, it always choose the first Provider that matches. Since the Providers are added in static blocks, the order may not be deterministic. Hence, if the Hadoop one is picked, security issue could happen.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-20T00:29:20.792+0000","updated":"2015-03-20T00:29:20.792+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14370602","id":"14370602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~csun] [~prasadm] !\nHowever, looking at the hadoop code, it does not seem to get added via static code blocks (unlike the hive one). It gets initialized through calls to SaslRpcServer.init(). So it looks like the hive one would get added first, and the hadoop one would get added next (when hive functions such as HadoopThriftAuthBridge23.getHadoopSaslProperties are called. This is then getting stored in a HashTable, which means that the second one is what would get used. It seems like the hadoop one would always get used. (I haven't verified this by testing).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-20T02:39:42.915+0000","updated":"2015-03-20T02:44:37.644+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14370664","id":"14370664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"body":"Yes, hadoop doesn't use static blocks. But, since Hive class still have it, the order could still vary depending on when the class is loaded, right?\nLooks like SaslRpcServer.init() is called in several places. I debugged it a little, there's one call site in org.apache.hadoop.ipc.RPC which is surrounded by a conditional stat. It might be called before the static block is called (although in different thread), if the condition is true. The execution didn't reach HadoopThriftAuthBridge23.getHadoopSaslProperties in my test.\n\nLooks like new Provider is always added to the end of an ArrayList, and therefore the one added earlier will be used.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=csun","name":"csun","key":"csun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=csun&avatarId=23340","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=csun&avatarId=23340","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=csun&avatarId=23340","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=csun&avatarId=23340"},"displayName":"Chao Sun","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-20T03:52:01.636+0000","updated":"2015-03-20T03:52:01.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12781323/comment/14548725","id":"14548725","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-18T19:50:15.195+0000","updated":"2015-05-18T19:50:15.195+0000"}],"maxResults":22,"total":22,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-9934/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i26npr:"}}