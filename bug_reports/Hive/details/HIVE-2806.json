{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12542835","self":"https://issues.apache.org/jira/rest/api/2/issue/12542835","key":"HIVE-2806","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"2012-02-16 07:43:43.928","customfield_12310420":"228121","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2806/watchers","watchCount":0,"isWatching":false},"created":"2012-02-16T07:43:43.928+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316178","id":"12316178","description":"released","name":"0.8.0","archived":false,"released":true,"releaseDate":"2011-12-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-02-16T07:43:43.928+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"Below are the two queries that result in exception when executed on hive 0.8.0:\n1.   SELECT T5.C47 AS C56, ((T5.C48 + T5.C49) - T5.C50) AS C57 FROM (SELECT count(T1.b2) AS C47, sum(T2.b2) AS C48, max(T3.e2) AS C49, max(T4.e3) AS C50 FROM default.qutest2 T1 JOIN default.qutest2 T2 JOIN default.qutest2 T3 JOIN default.qutest3 T4 WHERE (((T4.a3 = T3.a2) AND (T3.a2 = T2.a2)) AND (T2.a2 = T1.a2))) T5 ORDER BY C56 ASC, C57 DESC;\n\n2.   SELECT  (T5.C43 - T5.C44) AS C58, T5.C45 AS C59, T5.C46 AS C60, T5.C47 AS C61 FROM (SELECT sum(T1.a2) AS C43, count(T4.b2) AS C44, count(T1.b2) AS C45, sum(T3.b1) AS C46, max(T3.b1) AS C47 FROM default.qutest2 T1 JOIN default.qutest2 T2 JOIN default.qutest1 T3 JOIN default.qutest2 T4 WHERE (((T4.a2 = T3.a1) AND (T4.a2 = T2.a2)) AND (T4.a2 = T1.a2))) T5 ORDER BY C58 ASC, C59 ASC, C60 DESC, C61 ASC;\n\n\nThe queries keep on running for a long time ( more than an hour) and finally result in exception\n\nThe exception is as follows:\nDatabase has reported an Exception: Query returned non-zero code: 9; cause: FAILED: Execution Error; return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask (SQLState: 08S01; Vendor code: 9)\n\nSchema of all the tables used is same. All have four columns [(INT),(INT),(STRING),(INT)]\nFor qutest1, columns are a1, b1, d1, e1\nFor qutest2, columns are a2, b2, d2, e2 [This tables has 1000 rows and has been used thrice in JOIN condition in both queries]\nFor qutest3, columns are a3, b3, d3, e3\nFor qutest4, columns are a4, b4, d4, e4","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"124155","customfield_12312823":null,"summary":"'The database has reported an Exception: Query returned non-zero code: 9; cause: FAILED' - Queries that have 'JOIN' on tables that have huge data result in this exception","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=archit15","name":"archit15","key":"archit15","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Archit Garg","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=archit15","name":"archit15","key":"archit15","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Archit Garg","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2806/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0llmv:"}}