{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12827483","self":"https://issues.apache.org/jira/rest/api/2/issue/12827483","key":"HIVE-10616","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340268","id":"12340268","name":"3.0.0","archived":false,"released":true,"releaseDate":"2018-05-21"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-05-15T01:17:42.408+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 22 23:57:36 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_2_*:*_63411852679_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_2_*:*_5018533546","customfield_12312321":null,"resolutiondate":"2017-07-06T00:46:44.820+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10616/watchers","watchCount":6,"isWatching":false},"created":"2015-05-06T00:20:18.657+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329278","id":"12329278","description":"Branch 1.0 release","name":"1.0.0","archived":false,"released":true,"releaseDate":"2015-02-04"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tfriedr","name":"tfriedr","key":"tfriedr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Friedrich","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-05-22T23:57:36.500+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312585","id":"12312585","name":"Serializers/Deserializers","description":"Tracks issues dealing with serdes"}],"timeoriginalestimate":null,"description":"The parseType method in TypeInfoUtils doesn't handle decimal types with just precision specified although that's a valid type definition. \nAs a result, TypeInfoUtils.getTypeInfoFromTypeString will always return decimal(10,0) for any decimal(<precision>) string. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12730666","id":"12730666","filename":"HIVE-10616.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tfriedr","name":"tfriedr","key":"tfriedr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Friedrich","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-06T00:24:55.626+0000","size":1006,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12730666/HIVE-10616.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12875317","id":"12875317","filename":"HIVE-10616.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-30T20:54:24.015+0000","size":3010,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12875317/HIVE-10616.2.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"TypeInfoUtils doesn't handle DECIMAL with just precision specified","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tfriedr","name":"tfriedr","key":"tfriedr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Friedrich","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tfriedr","name":"tfriedr","key":"tfriedr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Friedrich","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/14544722","id":"14544722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apivovarov","name":"apivovarov","key":"apivovarov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apivovarov&avatarId=25851","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apivovarov&avatarId=25851","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apivovarov&avatarId=25851","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apivovarov&avatarId=25851"},"displayName":"Alexander Pivovarov","active":true,"timeZone":"America/Los_Angeles"},"body":"I tried to create table with decimal(30) column, load data, select data. Everything works fine.\n{code}\nhive> create table dec_test (a decimal(30));\nOK\nTime taken: 0.853 seconds\n{code}\n{code}\nhive> desc dec_test;\nOK\na                   \tdecimal(30,0)       \t                    \nTime taken: 0.467 seconds, Fetched: 1 row(s)\n{code}\n{code}\nhive> insert into dec_test values (123456789012345);\nQuery ID = apivovarov_20150514181058_b8de7b66-d691-4a1a-9afa-4a605b2d296a\nTotal jobs = 3\nLaunching Job 1 out of 3\nNumber of reduce tasks is set to 0 since there's no reduce operator\nStarting Job = job_1431652081178_0001, Tracking URL = http://c11.example.com:8088/proxy/application_1431652081178_0001/\nKill Command = /usr/lib/hadoop-2.6.0/bin/hadoop job  -kill job_1431652081178_0001\nHadoop job information for Stage-1: number of mappers: 1; number of reducers: 0\n2015-05-14 18:11:10,098 Stage-1 map = 0%,  reduce = 0%\n2015-05-14 18:11:17,666 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 1.99 sec\nMapReduce Total cumulative CPU time: 1 seconds 990 msec\nEnded Job = job_1431652081178_0001\nStage-4 is selected by condition resolver.\nStage-3 is filtered out by condition resolver.\nStage-5 is filtered out by condition resolver.\nMoving data to: hdfs://localhost/apps/apivovarov/warehouse/dec_test/.hive-staging_hive_2015-05-14_18-10-58_355_1605293869887130934-1/-ext-10000\nLoading data to table default.dec_test\nTable default.dec_test stats: [numFiles=1, numRows=1, totalSize=16, rawDataSize=15]\nMapReduce Jobs Launched: \nStage-Stage-1: Map: 1   Cumulative CPU: 1.99 sec   HDFS Read: 3446 HDFS Write: 88 SUCCESS\nTotal MapReduce CPU Time Spent: 1 seconds 990 msec\nOK\nTime taken: 21.828 seconds\n{code}\n{code}\nhive> select * from dec_test;\nOK\n123456789012345\nTime taken: 0.144 seconds, Fetched: 1 row(s)\n{code}\n{code}\nhive> select max(*) from dec_test;\nFAILED: SemanticException The specified syntax for UDAF invocation is invalid.\nhive> select max(a) from dec_test;\nQuery ID = apivovarov_20150514181227_144b5d8c-c656-4e4e-ae59-696979eef94a\nTotal jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks determined at compile time: 1\nIn order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\nIn order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\nIn order to set a constant number of reducers:\n  set mapreduce.job.reduces=<number>\nStarting Job = job_1431652081178_0002, Tracking URL = http://c11.example.com:8088/proxy/application_1431652081178_0002/\nKill Command = /usr/lib/hadoop-2.6.0/bin/hadoop job  -kill job_1431652081178_0002\nHadoop job information for Stage-1: number of mappers: 1; number of reducers: 1\n2015-05-14 18:12:35,733 Stage-1 map = 0%,  reduce = 0%\n2015-05-14 18:12:42,277 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 1.39 sec\n2015-05-14 18:12:49,692 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 3.11 sec\nMapReduce Total cumulative CPU time: 3 seconds 110 msec\nEnded Job = job_1431652081178_0002\nMapReduce Jobs Launched: \nStage-Stage-1: Map: 1  Reduce: 1   Cumulative CPU: 3.11 sec   HDFS Read: 6866 HDFS Write: 16 SUCCESS\nTotal MapReduce CPU Time Spent: 3 seconds 110 msec\nOK\n123456789012345\nTime taken: 23.982 seconds, Fetched: 1 row(s)\n{code}\n{code}\nhive> create table dec_test2 like dec_test;\nOK\nTime taken: 0.117 seconds\n{code}\n{code}\nhive> desc  dec_test2;\nOK\na                   \tdecimal(30,0)       \t                    \nTime taken: 0.101 seconds, Fetched: 1 row(s)\n{code}\n{code}\nhive> desc formatted dec_test2;\nOK\n# col_name            \tdata_type           \tcomment             \n\t \t \na                   \tdecimal(30,0)       \t                    \n\t \t \n# Detailed Table Information\t \t \nDatabase:           \tdefault             \t \nOwner:              \tapivovarov          \t \nCreateTime:         \tThu May 14 18:13:04 PDT 2015\t \nLastAccessTime:     \tUNKNOWN             \t \nProtect Mode:       \tNone                \t \nRetention:          \t0                   \t \nLocation:           \thdfs://localhost/apps/apivovarov/warehouse/dec_test2\t \nTable Type:         \tMANAGED_TABLE       \t \nTable Parameters:\t \t \n\ttransient_lastDdlTime\t1431652384          \n\t \t \n# Storage Information\t \t \nSerDe Library:      \torg.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe\t \nInputFormat:        \torg.apache.hadoop.mapred.TextInputFormat\t \nOutputFormat:       \torg.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat\t \nCompressed:         \tNo                  \t \nNum Buckets:        \t-1                  \t \nBucket Columns:     \t[]                  \t \nSort Columns:       \t[]                  \t \nStorage Desc Params:\t \t \n\tserialization.format\t1                   \nTime taken: 0.072 seconds, Fetched: 26 row(s)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apivovarov","name":"apivovarov","key":"apivovarov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apivovarov&avatarId=25851","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apivovarov&avatarId=25851","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apivovarov&avatarId=25851","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apivovarov&avatarId=25851"},"displayName":"Alexander Pivovarov","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-15T01:17:42.408+0000","updated":"2015-05-15T01:17:42.408+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/14544723","id":"14544723","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apivovarov","name":"apivovarov","key":"apivovarov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apivovarov&avatarId=25851","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apivovarov&avatarId=25851","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apivovarov&avatarId=25851","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apivovarov&avatarId=25851"},"displayName":"Alexander Pivovarov","active":true,"timeZone":"America/Los_Angeles"},"body":"hive-1.3.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apivovarov","name":"apivovarov","key":"apivovarov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apivovarov&avatarId=25851","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apivovarov&avatarId=25851","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apivovarov&avatarId=25851","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apivovarov&avatarId=25851"},"displayName":"Alexander Pivovarov","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-15T01:18:16.337+0000","updated":"2015-05-15T01:18:16.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/14604430","id":"14604430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~tfriedr] can you answer [~apivovarov] question?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-27T23:40:25.098+0000","updated":"2015-06-27T23:40:25.098+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/14604478","id":"14604478","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Agreed with Alex, I don't think there is any issue. Metadata always comes with two parameters, even if user omits some in which case default is filled in. As noted in the comments, the only chance that you might no parameters at all is in the metadata migrated from that prior to decimal precision/scale support where no parameters are stored. I believe that it's impossible to have a case where there is only one parameter (precision) stored in the metadata.\n\nPlease provide a repro case otherwise.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-28T02:57:14.192+0000","updated":"2015-06-28T02:57:14.192+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/14607568","id":"14607568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tfriedr","name":"tfriedr","key":"tfriedr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Friedrich","active":true,"timeZone":"America/Los_Angeles"},"body":"The CLI has no issue, that's why I opened the defect against the Serializers/Deserializers component.\nWe are using the TypeInfoUtils class (package org.apache.hadoop.hive.serde2.typeinfo) in one of our own serdes to parse the datatype and call the static method getTypeInfoFromTypeString which should treat the decimal data type according to the spec.\nHowever, if you pass in a string for the decimal type with just one argument, the precision is always 10 and the scale is 0 because the parseType method doesn't handle the one argument decimal type.\n\nYou can run a simple test like this:\nTypeInfo t = TypeInfoUtils.getTypeInfoFromTypeString(\"decimal(20)\");      \nDecimalTypeInfo dti = (DecimalTypeInfo)t;\nSystem.out.println(dti.getPrecision());  // prints 10\nSystem.out.println(dti.getScale());       // prints 0\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tfriedr","name":"tfriedr","key":"tfriedr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Friedrich","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-30T06:13:47.542+0000","updated":"2015-06-30T06:13:47.542+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/14608216","id":"14608216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"[~tfriedr], thanks for the info. I believe you're using these classes as if they were public APIs. Since these classes are not meant for this consumption, I'm not convinced that there is a need for a fix on Hive side.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-30T12:34:07.331+0000","updated":"2015-06-30T12:34:07.331+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/14608893","id":"14608893","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tfriedr","name":"tfriedr","key":"tfriedr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Friedrich","active":true,"timeZone":"America/Los_Angeles"},"body":"The TypeInfoUtils class is documented as part of the public APIs https://hive.apache.org/javadocs/r1.2.1/api/index.html. I don't see where the class is marked as internal. \nThe ParseUtils class, method getDecimalTypeTypeInfo handles the case correctly:\n      int precision = HiveDecimal.USER_DEFAULT_PRECISION;\n      int scale = HiveDecimal.USER_DEFAULT_SCALE;\n\n      if (node.getChildCount() >= 1) {\n        String precStr = node.getChild(0).getText();\n        precision = Integer.valueOf(precStr);\n      }\n\n      if (node.getChildCount() == 2) {\n        String scaleStr = node.getChild(1).getText();\n        scale = Integer.valueOf(scaleStr);\n      }\n\nWhy can't the TypeInfoUtils have the same behavior instead of returning the wrong values.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tfriedr","name":"tfriedr","key":"tfriedr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Friedrich","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-30T19:13:28.921+0000","updated":"2015-06-30T19:13:28.921+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/16067269","id":"16067269","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"body":"A bit late to the dance here, but the behavior here is definitely odd, should be either\n1) correctly parse decimal(precision)\n2) raise an error because decimal(precision, scale) is required\nReturning decimal(10,0) in this case is just wrong - if we do make a change, might as well use [~tfriedr]'s patch. Do you mind adding a testcase to TestTypeInfoUtils for this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-28T21:32:16.361+0000","updated":"2017-06-28T21:32:16.361+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/16070713","id":"16070713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"body":"Added test case for patch. [~hagleitn], can you take a look?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-30T20:54:47.081+0000","updated":"2017-06-30T20:54:47.081+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/16070774","id":"16070774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-30T21:54:05.861+0000","updated":"2017-06-30T21:54:05.861+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/16071472","id":"16071472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12875317/HIVE-10616.2.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 12 failed/errored test(s), 10825 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[skewjoin_union_remove_1] (batchId=81)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=140)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[columnstats_part_coltype] (batchId=157)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)\norg.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=239)\norg.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)\norg.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)\norg.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/5860/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/5860/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-5860/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 12 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12875317 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-07-02T02:01:01.526+0000","updated":"2017-07-02T02:01:01.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/16075688","id":"16075688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"body":"Failures do not look related - [~jdere]?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-07-06T00:31:27.805+0000","updated":"2017-07-06T00:31:27.805+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/16075707","id":"16075707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"body":"Failures do not look related. I've committed to master.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-07-06T00:46:44.862+0000","updated":"2017-07-06T00:46:44.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12827483/comment/16485783","id":"16485783","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgarg","name":"vgarg","key":"vgarg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vgarg&avatarId=30430","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vgarg&avatarId=30430","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vgarg&avatarId=30430","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vgarg&avatarId=30430"},"displayName":"Vineet Garg","active":true,"timeZone":"America/Los_Angeles"},"body":"Hive 3.0.0 has been released so closing this jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgarg","name":"vgarg","key":"vgarg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vgarg&avatarId=30430","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vgarg&avatarId=30430","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vgarg&avatarId=30430","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vgarg&avatarId=30430"},"displayName":"Vineet Garg","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-22T23:57:36.486+0000","updated":"2018-05-22T23:57:36.486+0000"}],"maxResults":14,"total":14,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10616/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ec13:"}}