{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13086501","self":"https://issues.apache.org/jira/rest/api/2/issue/13086501","key":"HIVE-17077","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2017-07-12T07:59:07.571+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 24 20:01:44 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-17077/watchers","watchCount":4,"isWatching":false},"created":"2017-07-12T07:55:01.059+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chitin","name":"chitin","key":"chitin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Lingang Deng","active":true,"timeZone":"Asia/Shanghai"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-07-24T20:01:44.757+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"lpad(rpad) throw a exception when the second argument a negative number, as follows,\n{code:java}\nhive> select lpad(\"hello\", -1 ,\"h\");\nFAILED: StringIndexOutOfBoundsException String index out of range: -1\nhive> select rpad(\"hello\", -1 ,\"h\");\nFAILED: StringIndexOutOfBoundsException String index out of range: -1\n{code}\nMaybe we should return friendly result such as mysql.\n{code:java}\nmysql> select lpad(\"hello\", -1 ,\"h\");\n+----------------------+\n| lpad(\"hello\", -1 ,\"h\") |\n+----------------------+\n| NULL                 |\n+----------------------+\n1 row in set (0.00 sec)\n\nmysql> select rpad(\"hello\", -1 ,\"h\");\n+----------------------+\n| rpad(\"hello\", -1 ,\"h\") |\n+----------------------+\n| NULL                 |\n+----------------------+\n1 row in set (0.00 sec)\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Hive should raise StringIndexOutOfBoundsException when LPAD/RPAD len character's value is negative number","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chitin","name":"chitin","key":"chitin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Lingang Deng","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chitin","name":"chitin","key":"chitin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Lingang Deng","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13086501/comment/16083611","id":"16083611","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user chitin opened a pull request:\n\n    https://github.com/apache/hive/pull/203\n\n    HIVE-17077 Hive should raise StringIndexOutOfBoundsException when LPAD/RPAD len character's value is negative number\n\n    [HIVE-17077] Hive should raise StringIndexOutOfBoundsException when LPAD/RPAD len character's value is negative number\n    - return null when len character's value is negative number\n    \n    https://issues.apache.org/jira/browse/HIVE-17077\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/chitin/hive hive17077\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/hive/pull/203.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #203\n    \n----\ncommit 8715915839f76f6d60d6b40400d3bb826cbeb8b5\nAuthor: chitin <chitin1027@gmail.com>\nDate:   2017-07-12T07:56:47Z\n\n    HIVE-17077 Hive should raise StringIndexOutOfBoundsException when LPAD/RPAD len character's value is negative number\n    - Add len judgment logic\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-12T07:59:07.571+0000","updated":"2017-07-12T07:59:07.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13086501/comment/16083673","id":"16083673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chitin","name":"chitin","key":"chitin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Lingang Deng","active":true,"timeZone":"Asia/Shanghai"},"body":"CC [~sershe]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chitin","name":"chitin","key":"chitin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Lingang Deng","active":true,"timeZone":"Asia/Shanghai"},"created":"2017-07-12T09:01:48.195+0000","updated":"2017-07-12T09:01:48.195+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13086501/comment/16099006","id":"16099006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"cc [~ashutoshc] what's the default behavior in Hive for these things? I think throwing a better exception (invalid argument) would be better. But we do return null for some invalid type conversions iirc","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-07-24T19:16:11.110+0000","updated":"2017-07-24T19:16:11.110+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13086501/comment/16099054","id":"16099054","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"General principle in such cases is to throw exception at query compile time if we can detect illegal argument in udf. But to return null if its runtime since there likely it depends on data and we don't fail query for malformed rows.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-07-24T20:01:44.757+0000","updated":"2017-07-24T20:01:44.757+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-17077/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3hewn:"}}