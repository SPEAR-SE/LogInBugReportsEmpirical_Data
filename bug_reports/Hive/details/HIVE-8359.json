{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12746196","self":"https://issues.apache.org/jira/rest/api/2/issue/12746196","key":"HIVE-8359","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329363","id":"12329363","name":"1.1.0","archived":false,"released":true,"releaseDate":"2015-03-07"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-10-22T21:22:20.836+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Nov 19 19:06:46 UTC 2014","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_584546269_*|*_10002_*:*_3_*:*_1736535842_*|*_1_*:*_3_*:*_1487086670_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-11-19T19:06:46.923+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-8359/watchers","watchCount":5,"isWatching":false},"created":"2014-10-06T17:17:18.186+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326829","id":"12326829","description":"0.13 maintenance release 1","name":"0.13.1","archived":false,"released":true,"releaseDate":"2014-06-06"}],"issuelinks":[{"id":"12399620","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12399620","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"inwardIssue":{"id":"12750155","key":"HIVE-8577","self":"https://issues.apache.org/jira/rest/api/2/issue/12750155","fields":{"summary":"Cannot deserialize Avro schema with a map<string,string> with null values","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12401278","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12401278","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12711521","key":"HIVE-6994","self":"https://issues.apache.org/jira/rest/api/2/issue/12711521","fields":{"summary":"parquet-hive createArray strips null elements","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12401956","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12401956","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12708602","key":"HIVE-6914","self":"https://issues.apache.org/jira/rest/api/2/issue/12708602","fields":{"summary":"parquet-hive cannot write nested map (map value is map)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-02-12T23:40:33.376+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12320633","id":"12320633","name":"File Formats","description":"File Formats"}],"timeoriginalestimate":null,"description":"Tried write a map<string,string> column in a Parquet file. The table should contain :\n{code}\n{\"key3\":\"val3\",\"key4\":null}\n{\"key3\":\"val3\",\"key4\":null}\n{\"key1\":null,\"key2\":\"val2\"}\n{\"key3\":\"val3\",\"key4\":null}\n{\"key3\":\"val3\",\"key4\":null}\n{code}\n... and when you do a query like {code}SELECT * from mytable{code}\nWe can see that the table is corrupted :\n{code}\n{\"key3\":\"val3\"}\n{\"key4\":\"val3\"}\n{\"key3\":\"val2\"}\n{\"key4\":\"val3\"}\n{\"key1\":\"val3\"}\n{code}\n\nI've not been able to read the Parquet file in our software afterwards, and consequently I suspect it to be corrupted. \n\nFor those who are interested, I generated this Parquet table from an Avro file. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12678229","id":"12678229","filename":"HIVE-8359.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-10-30T16:43:34.515+0000","size":8594,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12678229/HIVE-8359.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12681943","id":"12681943","filename":"HIVE-8359.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"created":"2014-11-17T18:04:17.996+0000","size":40162,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12681943/HIVE-8359.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12681988","id":"12681988","filename":"HIVE-8359.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-11-17T20:34:38.575+0000","size":29898,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12681988/HIVE-8359.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12682178","id":"12682178","filename":"HIVE-8359.5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-11-18T16:08:12.756+0000","size":41365,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12682178/HIVE-8359.5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12673130","id":"12673130","filename":"map_null_val.avro","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Akryus","name":"Akryus","key":"akryus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fr√©d√©ric TERRAZZONI","active":true,"timeZone":"Etc/UTC"},"created":"2014-10-06T17:25:24.594+0000","size":341,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12673130/map_null_val.avro"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Map containing null values are not correctly written in Parquet files","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Akryus","name":"Akryus","key":"akryus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fr√©d√©ric TERRAZZONI","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Akryus","name":"Akryus","key":"akryus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fr√©d√©ric TERRAZZONI","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14160535","id":"14160535","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Akryus","name":"Akryus","key":"akryus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fr√©d√©ric TERRAZZONI","active":true,"timeZone":"Etc/UTC"},"body":"Avro file containing the sample data. To reproduce the issue, just create a Hive table from this file and issue a \n{code}\nCREATE TABLE broken_parquet_table STORED AS PARQUET\nAS SELECT * FROM the_avro_table;\n\nSELECT * FROM broken_parquet_table;\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Akryus","name":"Akryus","key":"akryus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fr√©d√©ric TERRAZZONI","active":true,"timeZone":"Etc/UTC"},"created":"2014-10-06T17:25:24.601+0000","updated":"2014-10-06T17:25:24.601+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14180558","id":"14180558","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"body":"Hi [~Akryus]\n\nWhat is the command you used to create the avro table from the file you attached?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-10-22T21:22:20.836+0000","updated":"2014-10-22T21:22:20.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14181138","id":"14181138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Akryus","name":"Akryus","key":"akryus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fr√©d√©ric TERRAZZONI","active":true,"timeZone":"Etc/UTC"},"body":"Here is how you can create the sample Avro table:\n{code}\nCREATE EXTERNAL TABLE my_test_table(`avreau_col_1` map<string,string>) \nROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.avro.AvroSerDe' STORED AS  \nINPUTFORMAT 'org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat'   \nOUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat' \nLOCATION '/user/fterrazzoni/my_test_table' \nTBLPROPERTIES(\"avro.schema.url\"=\"hdfs://localhost:9000/user/fterrazzoni/path/to/avro.schema\") ;\n{code}\n\nWhere : \n- /user/fterrazzoni/my_test_table/ is a directory containing the file I provided (map_null_val.avro).\n- /user/fterrazzoni/path/to/avro.schema is a text file containing the Avro schema corresponding to the data, which is:\n  {code}\n  {\"type\":\"record\",\"name\":\"dku_record_0\",\"namespace\":\"com.dataiku.dss\",\"doc\":\"\",\"fields\":[{\"name\":\"avreau_col_1\",\"type\":[\"null\",{\"type\":\"map\",\"values\":[\"null\",\"string\"]}],\"default\":null}]}\n  {code}\n\nNow, you can simply try :\n{code} SELECT * from my_test_table; {code}\n... and observe that the result is correct.\n\nHowever, if you copy that into a Parquet table:\n{code} \nCREATE TABLE test_parquet STORED AS PARQUET AS SELECT * FROM my_test_table;\nSELECT * FROM test_parquet;\n{code}\n... the output is corrupted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Akryus","name":"Akryus","key":"akryus","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fr√©d√©ric TERRAZZONI","active":true,"timeZone":"Etc/UTC"},"created":"2014-10-23T08:46:15.705+0000","updated":"2014-10-23T08:46:15.705+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14181735","id":"14181735","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"body":"I cannot deserialize the avro schema on the current hive version 0.14.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-10-23T18:35:39.709+0000","updated":"2014-10-23T18:35:39.709+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14190348","id":"14190348","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"body":"Attach patch that supports map null values on parquet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-10-30T16:44:11.930+0000","updated":"2014-10-30T16:44:11.930+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14191038","id":"14191038","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12678229/HIVE-8359.1.patch\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 6609 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_transform_acid\norg.apache.hive.minikdc.TestJdbcWithMiniKdc.testNegativeTokenAuth\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1561/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1561/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1561/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12678229 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-10-30T23:33:29.244+0000","updated":"2014-10-30T23:33:29.244+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14191049","id":"14191049","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"body":"I submitted the patch to code review.\nhttps://reviews.apache.org/r/27404/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-10-30T23:44:09.513+0000","updated":"2014-10-30T23:44:09.513+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14209586","id":"14209586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"body":"This is the same issue as HIVE-6994. I made a fix also to handle map and array. We can also write nested complex type.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"created":"2014-11-13T11:07:20.246+0000","updated":"2014-11-13T11:07:20.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14211423","id":"14211423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"[~mickaellcr] - [~spena] and [~rdblue] have done a ton of review work on this issue. Thus I am inclined to commit this one. If we do, will there be any work in HIVE-6994 or are they complete duplicates?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-13T23:00:59.685+0000","updated":"2014-11-13T23:01:07.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14211431","id":"14211431","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks, Brock. De-duplicating this and HIVE-6994 is on my list of to-do items for today. I really like the tests that Sergio has put together for this, but I still need to see what Mickael has done that isn't done by Sergio's patch. I think it would be good if we all looked over both and then discussed what is needed for both of them.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-13T23:07:04.192+0000","updated":"2014-11-13T23:07:04.192+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14211466","id":"14211466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"body":"I'll take a look at the code. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-11-13T23:27:00.142+0000","updated":"2014-11-13T23:27:00.142+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14212048","id":"14212048","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"body":"Yes, I will take a look too and it's totally fine for me to take this patch !","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"created":"2014-11-14T09:29:39.683+0000","updated":"2014-11-14T09:29:39.683+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14212071","id":"14212071","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"body":"+1 for me.\n\nThe patch works fine for map containing null values, but it doesn't solve the HIVE-6994. So it's not duplicate. Can I remove the duplicate link ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"created":"2014-11-14T09:54:16.066+0000","updated":"2014-11-14T09:54:16.066+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14212632","id":"14212632","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"body":"Linking to the review, which I think has a newer patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-14T18:57:53.301+0000","updated":"2014-11-14T18:57:53.301+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14212639","id":"14212639","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"body":"[~mickaellcr], it looks HIVE-6994 fixes the read and write handling of Arrays to ensure that null values are written and read correctly. Is that a good summary?\n\nThis issue fixes writing null values in maps and arrays. So I think there is still some duplication between the two where arrays are written. Given that [~spena]'s work includes unit tests for the write side, would you mind solving the duplication by working on the write side on this issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-14T19:01:26.409+0000","updated":"2014-11-14T19:01:26.409+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14214470","id":"14214470","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"body":"Ok , I will work on this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"created":"2014-11-17T09:55:33.534+0000","updated":"2014-11-17T09:55:33.534+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14214915","id":"14214915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"body":"I only did two minor changes on :\n\n* ql/src/java/org/apache/hadoop/hive/ql/io/parquet/convert/ArrayWritableGroupConverter.java\n* ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java\n\nAnd added a qtest (same as HIVE-6994). I used the patch available on the review link.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"created":"2014-11-17T18:04:18.002+0000","updated":"2014-11-17T18:04:18.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14214974","id":"14214974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~mickaellcr],\n\nI believe that [~spena] is still working this one based on the Review Board discussion here: https://reviews.apache.org/r/27404/\n\nSorry for the crossed wires!\n\nBrock","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-17T18:48:35.904+0000","updated":"2014-11-17T18:48:35.904+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14215220","id":"14215220","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 no tests executed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12681943/HIVE-8359.2.patch\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1822/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1822/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1822/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nTests exited with: NonZeroExitCodeException\nCommand 'bash /data/hive-ptest/working/scratch/source-prep.sh' failed with exit status 1 and output '+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]\n+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera\n+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera\n+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin\n+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin\n+ export 'ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m '\n+ ANT_OPTS='-Xmx1g -XX:MaxPermSize=256m '\n+ export 'M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'\n+ M2_OPTS='-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'\n+ cd /data/hive-ptest/working/\n+ tee /data/hive-ptest/logs/PreCommit-HIVE-TRUNK-Build-1822/source-prep.txt\n+ [[ false == \\t\\r\\u\\e ]]\n+ mkdir -p maven ivy\n+ [[ svn = \\s\\v\\n ]]\n+ [[ -n '' ]]\n+ [[ -d apache-svn-trunk-source ]]\n+ [[ ! -d apache-svn-trunk-source/.svn ]]\n+ [[ ! -d apache-svn-trunk-source ]]\n+ cd apache-svn-trunk-source\n+ svn revert -R .\n++ egrep -v '^X|^Performing status on external'\n++ awk '{print $2}'\n++ svn status --no-ignore\n+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target shims/scheduler/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/core/target hcatalog/streaming/target hcatalog/server-extensions/target hcatalog/hcatalog-pig-adapter/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target accumulo-handler/target hwi/target common/target common/src/gen contrib/target service/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target\n+ svn update\nU    ql/src/test/results/clientnegative/udf_assert_true.q.out\nU    ql/src/test/results/clientnegative/udf_assert_true2.q.out\nU    ql/src/test/results/clientpositive/lateral_view_noalias.q.out\nU    ql/src/test/results/clientpositive/lateral_view.q.out\nU    ql/src/test/results/clientpositive/udtf_stack.q.out\nU    ql/src/java/org/apache/hadoop/hive/ql/optimizer/ColumnPrunerProcCtx.java\nU    ql/src/java/org/apache/hadoop/hive/ql/optimizer/ColumnPrunerProcFactory.java\n\nFetching external item into 'hcatalog/src/test/e2e/harness'\nUpdated external to revision 1640231.\n\nUpdated to revision 1640231.\n+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh\n+ patchFilePath=/data/hive-ptest/working/scratch/build.patch\n+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]\n+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh\n+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch\nThe patch does not appear to apply with p0, p1, or p2\n+ exit 1\n'\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12681943 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-11-17T21:37:29.891+0000","updated":"2014-11-17T21:37:29.891+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14215464","id":"14215464","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12681988/HIVE-8359.4.patch\n\n{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 6657 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1824/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1824/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1824/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 1 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12681988 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-11-18T00:15:00.343+0000","updated":"2014-11-18T00:15:00.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14215481","id":"14215481","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"[~mickaellcr],\n\nI was confused earlier... my mistake! The patch you attached to this JIRA is actually for HIVE-6994. Can you upload it there?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-18T00:29:02.250+0000","updated":"2014-11-18T00:29:02.250+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14215985","id":"14215985","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"body":"[~brocknoland], normally I picked the patch that [~rdblue] told me about (the review on the Review Board), but maybe not the last version.\n\n[~rdblue] wanted me to update this patch to handle the HIVE-6994 instead of having two patches that will have the same behavior/code. And I like the way [~spena] wrote the solution (better than mine in my opinion).\n\n[~spena], basically I modified the WritableGroupConverter to clean the 'current value'. If you don't do that, you will never have a null value inside an array, but the previous one.\n{code}\ndiff --git ql/src/java/org/apache/hadoop/hive/ql/io/parquet/convert/ArrayWritableGroupConverter.java ql/src/java/org/apache/hadoop/hive/ql/io/parquet/convert/ArrayWritableGroupConverter.java\nindex 582a5df..052b36d 100644\n--- ql/src/java/org/apache/hadoop/hive/ql/io/parquet/convert/ArrayWritableGroupConverter.java\n+++ ql/src/java/org/apache/hadoop/hive/ql/io/parquet/convert/ArrayWritableGroupConverter.java\n@@ -54,6 +54,7 @@ public void start() {\n     if (isMap) {\n       mapPairContainer = new Writable[2];\n     }\n+    currentValue = null;\n   }\n \n   @Override\n{code}\n\nAnd the second part was to add \"Null\" values from the ParquetHiveSerDe (values that I was skipping before for no valid reason).\n\n{code}\ndiff --git ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java\nindex b689336..4b36767 100644\n--- ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java\n+++ ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java\n@@ -202,13 +202,11 @@ private ArrayWritable createArray(final Object obj, final ListObjectInspector in\n     if (sourceArray != null) {\n       for (final Object curObj : sourceArray) {\n-        final Writable newObj = createObject(curObj, subInspector);\n-        if (newObj != null) {\n-          array.add(newObj);\n-        }\n+        array.add(createObject(curObj, subInspector));\n       }\n     }\n     if (array.size() > 0) {\n-      final ArrayWritable subArray = new ArrayWritable(array.get(0).getClass(),\n+      final ArrayWritable subArray = new ArrayWritable(Writable.class,\n           array.toArray(new Writable[array.size()]));\n       return new ArrayWritable(Writable.class, new Writable[] {subArray});\n     } else {\n{code}\n\nAnd the qtest was just to be sure to handle empty array, null array, array with null, and the same for map.\n\n{code}\n+++ data/files/parquet_array_null_element.txt\n@@ -0,0 +1,3 @@\n+1|,7|CARRELAGE,MOQUETTE|key11:value11,key12:value12,key13:value13\n+2|,|CAILLEBOTIS,|\n+3|,42,||key11:value11,key12:,key13:\n{code}\n\n\nIf you want to integrate them into your patch, feel free to do it, else I might want to duplicate your patch (:p) and add this fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mickaellcr","name":"mickaellcr","key":"mickaellcr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mickael Lacour","active":true,"timeZone":"Europe/Paris"},"created":"2014-11-18T09:36:15.923+0000","updated":"2014-11-18T09:36:15.923+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14216336","id":"14216336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"body":"Thanks [~mickaellcr].\n\nSorry for the confusion. I did not see you uploaded another patch here. \nI just added two extra lines to the patch you uploaded. I will integrate your fixes there, and upload the patch again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-11-18T15:53:52.894+0000","updated":"2014-11-18T15:53:52.894+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14216357","id":"14216357","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"body":"Attach new patch that integrates Mickael Lacour HIVE-6994 fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=spena","name":"spena","key":"spena","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergio Pe√±a","active":true,"timeZone":"America/Chicago"},"created":"2014-11-18T16:08:12.763+0000","updated":"2014-11-18T16:08:12.763+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14216562","id":"14216562","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12682178/HIVE-8359.5.patch\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 6659 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan\norg.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1835/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1835/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1835/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12682178 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-11-18T18:36:21.179+0000","updated":"2014-11-18T18:36:21.179+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14216579","id":"14216579","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"body":"I think with [~mickaellcr]'s addition, this is ready to go in.\n\nGood catch in the SerDe code, I didn't realize that the nulls were stripped at that point as well. I'm a little confused about why we're translating the ArrayWritable again though: isn't this properly constructed by the Converter code? Why can't we just pass the ArrayWritable that was created already? It seems like we're doing a lot of unnecessary work here that we might be able to remove (in future patches). Ideally, we would detect that the structure matches what is expected by the following Hive code and pass it along.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-18T18:45:31.597+0000","updated":"2014-11-18T18:45:31.597+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14217192","id":"14217192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. this is ready to go in.....It seems like we're doing a lot of unnecessary work here that we might be able to remove (in future patches). \n\nIt sounds like this change can be done in a future patch and you are +1 on committing this change?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-19T01:11:31.316+0000","updated":"2014-11-19T01:11:31.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14217203","id":"14217203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"body":"Yes. +1 on this change and we'll clean up the rest in a future patch and after I confirm what I think is happening.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rdblue","name":"rdblue","key":"rdblue","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rdblue&avatarId=20387","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rdblue&avatarId=20387","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rdblue&avatarId=20387","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rdblue&avatarId=20387"},"displayName":"Ryan Blue","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-19T01:16:56.358+0000","updated":"2014-11-19T01:16:56.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14217211","id":"14217211","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-19T01:22:56.538+0000","updated":"2014-11-19T01:22:56.538+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12746196/comment/14218321","id":"14218321","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you so much Sergio, Ryan and Mickael!! I have committed this contribution to trunk!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-19T19:06:46.956+0000","updated":"2014-11-19T19:06:46.956+0000"}],"maxResults":30,"total":30,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-8359/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i20ujz:"}}