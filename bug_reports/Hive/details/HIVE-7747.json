{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12734562","self":"https://issues.apache.org/jira/rest/api/2/issue/12734562","key":"HIVE-7747","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329363","id":"12329363","name":"1.1.0","archived":false,"released":true,"releaseDate":"2015-03-07"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-08-20T00:35:31.463+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Oct 30 08:53:38 UTC 2014","customfield_12310420":"412502","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_62097205_*|*_1_*:*_1_*:*_340934257_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-08-20T17:50:02.576+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-7747/watchers","watchCount":3,"isWatching":false},"created":"2014-08-16T01:52:51.146+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327352","id":"12327352","description":"Dev branch for Hive on Spark","name":"spark-branch","archived":false,"released":false}],"issuelinks":[{"id":"12394317","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12394317","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"12723734","key":"HIVE-7292","self":"https://issues.apache.org/jira/rest/api/2/issue/12723734","fields":{"summary":"Hive on Spark","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12394386","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12394386","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12728027","key":"HIVE-7437","self":"https://issues.apache.org/jira/rest/api/2/issue/12728027","fields":{"summary":"Check if servlet-api and jetty module in Spark library are an issue for hive-spark integration [Spark Branch]","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype","name":"Task","subtask":false,"avatarId":21148}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-05-29T02:27:38.845+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12323200","id":"12323200","name":"Spark","description":"Hive on Spark"}],"timeoriginalestimate":null,"description":"{{spark.serializer}} is set to {{org.apache.spark.serializer.KryoSerializer}}. Same configuration works fine from Hive CLI.\n\nSpark tasks fails with following error:\n{code}\nJob aborted due to stage failure: Task 0 in stage 1.0 failed 4 times, most recent failure: Lost task 0.3 in stage 1.0 (TID 9, 192.168.168.216): java.lang.IllegalStateException: unread block data\n        java.io.ObjectInputStream$BlockDataInputStream.setBlockDataMode(ObjectInputStream.java:2421)\n        java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1382)\n        java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1990)\n        java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1915)\n        java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1798)\n        java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1350)\n        java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)\n        org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:62)\n        org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:84)\n        org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:181)\n        java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        java.lang.Thread.run(Thread.java:744)\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12662930","id":"12662930","filename":"HIVE-7747.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T00:33:17.901+0000","size":794,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12662930/HIVE-7747.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12663103","id":"12663103","filename":"HIVE-7747.2-spark.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T10:13:55.484+0000","size":701,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12663103/HIVE-7747.2-spark.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"412489","customfield_12312823":null,"summary":"Submitting a query to Spark from HiveServer2 fails [Spark Branch]","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14102589","id":"14102589","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"body":"When I run the spark job locally (spark.master=local), it completes successfully. It repros only on the Spark cluster. Similar exception is seen in HIVE-7437. HIVE-7437 suggested shading jetty/servlet classes, but I still see the same exception.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-19T18:16:52.607+0000","updated":"2014-08-19T18:16:52.607+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14103138","id":"14103138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"body":"Problem is that we ship a wrong jar to Spark cluster. Instead of hive-exec, we ship hive-common. In SparkClient, we get the jar from HiveConf.getJar() which returns that jar that contains the initialization class. Initialization class given to HiveConf is different in HS2 versus CLI. In CliDriver (see run() method), SessionState.class (contained in hive-exec jar) is passed to HiveConf. In HS2 no initialization class is passed which defaults to HiveConf.class (contained in hive-common). \n\nThe error thrown in Spark task is strange. Not sure if it is the standard error that is throw if no classes are found on classpath. Attaching a fix to pass SessionState.class as initilization class to HiveConf in HiveSessionImpl. It is a general fix, not specific to spark branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T00:29:18.963+0000","updated":"2014-08-20T00:29:18.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14103150","id":"14103150","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"+1\n\nI think we can apply this to trunk if the tests pass!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T00:35:31.463+0000","updated":"2014-08-20T00:35:31.463+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14103354","id":"14103354","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12662930/HIVE-7747.1.patch\n\n{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 6003 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hive.jdbc.TestJdbcWithMiniMr.org.apache.hive.jdbc.TestJdbcWithMiniMr\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/412/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/412/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-412/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 1 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12662930","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-08-20T04:22:50.934+0000","updated":"2014-08-20T04:22:50.934+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14103706","id":"14103706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"body":"Test failure here is related to the change. Failure is complicated. It turns out that output of {{HiveConf(srcHiveConf, SessionState.class)}} is not same as srcHiveConf in terms of (property, value) pairs. Executed as part of constructor, the {{HiveConf.initialize}} method applies system properties on top of copied properties from srcHiveConf. So from the moment srcHiveConf is created to the moment of cloning HiveConf if there are any System properties set, cloned HiveConf inherits those properties. In the test case ({{MiniHS2}}) scratchdir property is modified in System properties (See [here|https://github.com/apache/hive/blob/trunk/itests/hive-unit/src/main/java/org/apache/hive/jdbc/miniHS2/MiniHS2.java#L184]), but the default scratchdir value is {{$\\{test.tmp.dir\\}/scratchdir}} from hive-site.xml. Scrathdir set in {{MiniHS2}} is never used before, but with this change HS2 started using it. Scratchdir created in {{MiniHS2}} (See [here|https://github.com/apache/hive/blob/trunk/itests/hive-unit/src/main/java/org/apache/hive/jdbc/miniHS2/MiniHS2.java#L183]) doesn't have 777 permissions, so whenever we have user impersonation there are issues (thats where the test is failing). Before this change, scratchdir is always {{$\\{test.tmp.dir\\}/scratchdir}} which is created in HS2 with 777 permissions (See [here|https://github.com/apache/hive/blob/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java#L3458]), so there were no issues with the impersonation. \n\nI think it is better to fix this in SparkClient by fetching the jar directly than through HiveConf, to avoid unexpected issues.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T10:01:58.949+0000","updated":"2014-08-20T10:01:58.949+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14103717","id":"14103717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching v2 patch specific to spark-branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vkorukanti","name":"vkorukanti","key":"vkorukanti","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venki Korukanti","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T10:13:55.488+0000","updated":"2014-08-20T10:13:55.488+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14103793","id":"14103793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12663103/HIVE-7747.2-spark.patch\n\n{color:red}ERROR:{color} -1 due to 9 failed/errored test(s), 5958 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample_islocalmode_hook\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union3\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union5\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union7\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union8\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union9\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_fs_default_name2\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-SPARK-Build/66/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-SPARK-Build/66/console\nTest logs: http://ec2-54-176-176-199.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-SPARK-Build-66/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 9 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12663103","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-08-20T11:58:51.538+0000","updated":"2014-08-20T11:58:51.538+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14104205","id":"14104205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"Wow, nice analysis! +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T17:48:53.676+0000","updated":"2014-08-20T17:48:53.676+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14104211","id":"14104211","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you so much Venki! I have committed this to spark!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T17:50:02.602+0000","updated":"2014-08-20T17:50:02.602+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12734562/comment/14189815","id":"14189815","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qiaohaijun","name":"qiaohaijun","key":"qiaohaijun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"qiaohaijun","active":true,"timeZone":"Asia/Shanghai"},"body":"\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\nError: org.apache.spark.SparkException: Job aborted due to stage failure: Task 7 in stage 2.0 failed 4 times, most recent failure: Lost task 7.3 in stage 2.0 (TID 28, cloud1014113114.wd.nm.ss.nop.sogou-op.org): java.lang.IllegalStateException: unread block data\n        java.io.ObjectInputStream$BlockDataInputStream.setBlockDataMode(ObjectInputStream.java:2421)\n        java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1382)\n        java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1990)\n        java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1915)\n        java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1798)\n        java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1350)\n        java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)\n        org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:62)\n        org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:87)\n        org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:160)\n        java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        java.lang.Thread.run(Thread.java:745)\nDriver stacktrace: (state=,code=0)\n\n---\n\nspark 1.1.1 ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qiaohaijun","name":"qiaohaijun","key":"qiaohaijun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"qiaohaijun","active":true,"timeZone":"Asia/Shanghai"},"created":"2014-10-30T08:53:38.146+0000","updated":"2014-10-30T08:53:38.146+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-7747/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1yyo7:"}}