{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12494304","self":"https://issues.apache.org/jira/rest/api/2/issue/12494304","key":"HIVE-1872","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-01-24T06:04:17.829+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 31 17:51:07 UTC 2011","customfield_12310420":"42349","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1872/watchers","watchCount":0,"isWatching":false},"created":"2010-12-30T13:35:52.839+0000","customfield_12310192":"Avoiding System.exit () for killing the MR Process , instead kill the task ( which are not required to be executed ) ","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314524","id":"12314524","description":"released","name":"0.6.0","archived":false,"released":true,"releaseDate":"2010-10-29"}],"issuelinks":[{"id":"12364820","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12364820","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12512993","key":"HIVE-2264","self":"https://issues.apache.org/jira/rest/api/2/issue/12512993","fields":{"summary":"Hive server is SHUTTING DOWN when invalid queries beeing executed.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12338067","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12338067","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12494049","key":"HIVE-1867","self":"https://issues.apache.org/jira/rest/api/2/issue/12494049","fields":{"summary":"Add mechanism for disabling tests with intermittent failures","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12337873","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12337873","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12500098","key":"HIVE-2017","self":"https://issues.apache.org/jira/rest/api/2/issue/12500098","fields":{"summary":"Driver.execute() should maintaining SessionState in case of runtime errors","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathr","name":"bharathr","key":"bharathr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath R ","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-02-25T21:39:18.845+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/3","description":"This issue is being actively worked on at the moment by the assignee.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/inprogress.png","name":"In Progress","id":"3","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313604","id":"12313604","name":"CLI","description":"Command-line interpreter for Hive.\n"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312588","id":"12312588","name":"Server Infrastructure","description":"Tracks issues dealing with Server infrastructure"}],"timeoriginalestimate":null,"description":"Hive process is exiting on executing the below queries in the same order as mentioned\n\n1) CREATE TABLE SAMPLETABLE(IP STRING , showtime BIGINT ) partitioned by (ds string,ipz int) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\\040'\n\n2) ALTER TABLE SAMPLETABLE add Partition(ds='sf') location '/user/hive/warehouse' Partition(ipz=100) location '/user/hive/warehouse'\n\nAfter the second query execution , the hive throws the below exception and exiting the process\n\n10:09:03 ERROR exec.DDLTask: FAILED: Error in metadata: table is partitioned but partition spec is not specified or tab: {ipz=100}\norg.apache.hadoop.hive.ql.metadata.HiveException: table is partitioned but partition spec is not specified or tab: {ipz=100}\n        at org.apache.hadoop.hive.ql.metadata.Table.isValidSpec(Table.java:341)\n        at org.apache.hadoop.hive.ql.metadata.Hive.getPartition(Hive.java:902)\n        at org.apache.hadoop.hive.ql.exec.DDLTask.addPartition(DDLTask.java:282)\n        at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:191)\n        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:107)\n        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:55)\n        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:633)\n        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:506)\n        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:384)\n        at org.apache.hadoop.hive.service.HiveServer$HiveServerHandler.execute(HiveServer.java:114)\n        at org.apache.hadoop.hive.service.ThriftHive$Processor$execute.process(ThriftHive.java:378)\n        at org.apache.hadoop.hive.service.ThriftHive$Processor.process(ThriftHive.java:366)\n        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:252)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:619)\n\n\nAs the \"alter\" query is incorrect the exception was thrown, ideally it should be \"ALTER TABLE SAMPLETABLE add Partition(ds='sf',ipz=100) location '/user/hive/warehouse'\". \n\nIt is not good to exit the HIVE process when the query is incorrect.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12468949","id":"12468949","filename":"HIVE-1872.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathr","name":"bharathr","key":"bharathr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath R ","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-21T06:36:53.082+0000","size":2174,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12468949/HIVE-1872.1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"123469","customfield_12312823":null,"summary":"Hive process is exiting on executing ALTER query","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathr","name":"bharathr","key":"bharathr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath R ","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathr","name":"bharathr","key":"bharathr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath R ","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"SUSE Linux Enterprise Server 10 SP2 (i586) - Kernel 2.6.16.60-0.21-smp (3)\nHadoop 0.20.1\nHive 0.6.0","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/12976628","id":"12976628","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathr","name":"bharathr","key":"bharathr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath R ","active":true,"timeZone":"Etc/UTC"},"body":"As per the \"Alter\" query , two DDL tasks will be created. \nWhen the first task execution is failed, the \"taskCleanup\" is internally stopping the VM. \n\n\n{code}\n\n\nif (running.size() != 0) {\n\t\ttaskCleanup();\n}\n\npublic void taskCleanup()\n{\n\t    // The currently existing Shutdown hooks will be automatically called, \n\t    // killing the map-reduce processes. \n\t    // The non MR processes will be killed as well.\n\t    System.exit(9);\n}\n\n{code}\n\nHere, the System.exit(9) is used to kill all the \"map-reduce\" and \"non-MR\" process. \nInstead of killing all the MR and non-MR process , we can kill only the current running processes \n\nThe update code will be ,. \n\n{code}\npublic void taskCleanup(Map<TaskResult, TaskRunner> running) {\n\t\n\t    // get all the remaining running process , \n\t    Set < Entry < TaskResult, TaskRunner >> entrySet = running.entrySet ();\n\t    for(Entry <TaskResult, TaskRunner> entry : entrySet)\n\t    {\n\t        TaskRunner value = entry.getValue ();\n\t\t// Interrupt. \n\t        value.interrupt ();\n\t    }\n\t}\n{code}\n\nThis will internally kills the task ( which need not required to be exeuted ).  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathr","name":"bharathr","key":"bharathr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath R ","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-03T06:24:56.001+0000","updated":"2011-01-03T06:24:56.001+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/12985529","id":"12985529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"Yongqiang, can you take a look ?\nI dont remember the exact usecase, but remember some discussions around it","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-01-24T06:04:17.829+0000","updated":"2011-01-24T06:04:17.829+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/12985864","id":"12985864","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"Bharath, i am not sure about your use case. Ignoring an error maybe not a good idea, especially this 'set location' command, because it may cause the following queries give wrong results.\n\nAnd i saw there is a .q file added to negativequeries, you need to also include a .q.out file using 'ant test -Dtestcase=TestNegativeCliDriver -Dqfile=xxx.q -Doverwrite=true'","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-24T18:15:48.184+0000","updated":"2011-01-24T18:15:48.184+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/12987222","id":"12987222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"I don't know about the solution, but I think the System.exit is also the cause of HIVE-1867, which has been intermittently preventing ant test from passing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-26T21:15:07.759+0000","updated":"2011-01-26T21:15:07.759+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/12987236","id":"12987236","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Note that the System.exit was introduced in HIVE-549; maybe worth revisiting some of the discussion at the end of the comments there regarding refactoring to use JobControl.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-26T21:34:52.034+0000","updated":"2011-01-26T21:34:52.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/12987395","id":"12987395","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathr","name":"bharathr","key":"bharathr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath R ","active":true,"timeZone":"Etc/UTC"},"body":"Based on the thread  HIVE-549 ,  there was a comment to cleanup the running jobs if one of them have failed. \n\n\t* Shall we immediately stop all other running jobs if one of them have failed?\n\t\t+ console.printError(errorMessage);\n\t\t+ taskCleanup(runnable); \n\nThis comment was implemented by calling System.exit(9). This makes the JVM to exit. \n\nRather than relying on the ShutdownHook , we could directly invoke that functionality in the taskCleanUp\n\nAs per my proposed solution , in taskCleanup. \n\n                 1)  Sending an interrupt to runningJobs \"TaskRunner\" so that the task associated will be interrupted. \n                 2)  And  if the task is \"MapRed\" task, then the task cleanup should post the \"kill url\" from \"runningJobKillURIs\" hashmap in ExecDriver\n\nComments?  \n\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bharathr","name":"bharathr","key":"bharathr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bharath R ","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-27T06:08:57.603+0000","updated":"2011-01-27T06:08:57.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/12987712","id":"12987712","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Calling System.exit is definitely a problem since for HIVE-549, this causes JUnit to treat the JVM as crashed.  It seems like just returning 9 should be good enough, since all the same System.exit processing (thread-killing and shutdown hook execution) will take place as soon as the main thread returns; the only difference is that JUnit gets a chance to clean up as the stack unwinds.\n\ninterrupt isn't really guaranteed to do much more, e.g. threads can catch and ignore InterruptedException, so I don't think we should bother adding it.\n\nIf there's a reason we need to leave the explicit System.exit call there, then maybe we need a conf to tell it not to do that during tests.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-27T19:16:30.103+0000","updated":"2011-01-27T19:16:30.103+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/13013960","id":"13013960","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"body":" Here i have few doubts. Just returning 9 will solve the problem of exiting jvm, but all the tasks (Mapred task and Non mapred task) that are running  will still continue to run if main thread is not returning (In case of HiveServer), there by wasting the cluster resources.  So the problem here is not only exiting the JVM but also the running tasks. Any suggestions on this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-03-31T13:13:59.816+0000","updated":"2011-03-31T13:13:59.816+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494304/comment/13014096","id":"13014096","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Good point about Hive server.  As a short-term solution to flaky tests, adding a config param that is only enabled for tests should still work fine, but I agree that it would be best to address the bigger issues.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-03-31T17:51:07.096+0000","updated":"2011-03-31T17:51:07.096+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1872/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0lhef:"}}