{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12527638","self":"https://issues.apache.org/jira/rest/api/2/issue/12527638","key":"HIVE-2510","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316178","id":"12316178","description":"released","name":"0.8.0","archived":false,"released":true,"releaseDate":"2011-12-16"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-10-18T19:47:02.911+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Nov 02 05:09:16 UTC 2011","customfield_12310420":"88890","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_252242019_*|*_1_*:*_2_*:*_972860644_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-11-01T23:05:07.684+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2510/watchers","watchCount":1,"isWatching":false},"created":"2011-10-18T18:46:45.084+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-12-16T23:56:55.376+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":null,"customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12499580","id":"12499580","filename":"HIVE-2510.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-18T18:57:59.084+0000","size":859,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12499580/HIVE-2510.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12499791","id":"12499791","filename":"HIVE-2510.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-20T00:51:02.559+0000","size":6760,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12499791/HIVE-2510.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12499882","id":"12499882","filename":"HIVE-2510.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-20T16:18:34.742+0000","size":7077,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12499882/HIVE-2510.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12500292","id":"12500292","filename":"HIVE-2510.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-22T04:48:08.958+0000","size":8922,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12500292/HIVE-2510.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12500765","id":"12500765","filename":"HIVE-2510.5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T22:23:15.651+0000","size":8429,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12500765/HIVE-2510.5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12501800","id":"12501800","filename":"HIVE-2510.6.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-01T17:10:39.766+0000","size":9142,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12501800/HIVE-2510.6.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"123944","customfield_12312823":null,"summary":"Hive throws Null Pointer Exception upon CREATE TABLE <db_name>.<table_name> ....     if the given <db_name> doesn't exist","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13129944","id":"13129944","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"The diff request is at: https://reviews.apache.org/r/2426/diff/#index_header","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-18T18:57:59.157+0000","updated":"2011-10-18T18:57:59.157+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13129978","id":"13129978","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Robert,\nCan you add a test case as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-18T19:47:02.911+0000","updated":"2011-10-18T19:47:02.911+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13130151","id":"13130151","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"Yes, but where can I read how a new test case should be added? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-19T00:01:23.976+0000","updated":"2011-10-19T00:01:23.976+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13130332","id":"13130332","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"https://cwiki.apache.org/Hive/howtocontribute.html#HowToContribute-AddaUnitTest\nHas relevant info","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-19T03:26:59.897+0000","updated":"2011-10-19T03:26:59.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13131236","id":"13131236","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"New diff request at https://reviews.apache.org/r/2426/diff/2/\n\nChanged fix to be more general and added tests.\n\nThere is still an issue that: \n\ncreate table <existing db>.<new table> (a string); \n\ndoesn't work. But that's a topic for another Jira. \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-20T00:51:02.636+0000","updated":"2011-10-20T00:51:02.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13131713","id":"13131713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"Actually I was wrong, create table <existing db>.<new table> (a string); seems to work ok, must have done something wrong when checking it before.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-20T16:00:08.267+0000","updated":"2011-10-20T16:00:08.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13131724","id":"13131724","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"current diff request at https://reviews.apache.org/r/2426/diff/#index_header","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-20T16:18:34.806+0000","updated":"2011-10-20T16:18:34.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13131784","id":"13131784","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like RB is no longer posting back on jira. I had the comment there about error message.\n\nThere are two concerns I have while doing such metastore related checks in SemanticAnalyzer. First it introduces TOCTTOU bug ( http://en.wikipedia.org/wiki/Time-of-check-to-time-of-use ) since there is a small window when its possible that database get dropped after this call to metastore has completed but before actual table creation happens. Second concern which is a bigger concern is that it adds load on metastore server (if running as independent server) and on backend sql server to service these additional requests. Ideally, all such checks should be bundled together in a create table call to MetaStore (instead of few of them being done in SemanticAnalyzer) which then do all the checks and then take appropriate action. This will help for both concerns as first it will reduce extra calls and second if there is a need of multiple calls on mysql they can potentially be done in a scope of one transaction.  \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-20T17:16:48.143+0000","updated":"2011-10-20T17:16:48.143+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13131905","id":"13131905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"I see. Could you point me to where in code this \"create table call to MetaStore\" is done? \n\nIf it is done at the moment of executing a task, I think it will be better to check for existence of the database 2 times - once at the moment of Semantic Analysis and once during the transaction. The reason is, if database doesn't exist from the beginning we can faster tell user about it and we use less resources (especially if table is created as select). Furthermore the null-pointer exception this Jira is about is thrown before the task starts execution, so if that check for database existence was only during the task execute, we would need to \"wrap\" that null pointer exception and \"carry it\" until that moment.   ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-20T18:56:56.618+0000","updated":"2011-10-20T18:56:56.618+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13132823","id":"13132823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Sigh. I typed in my reply yesterday but lost it when jira went down : (\n\nSemantic Analyzer creates tasks which are then later executed in Driver::execute() In this case DDLTask gets created. Actual execution of this happens in HiveMetaStore::create_table_core()\n\nApart from CTAS, it never make sense to do it twice, since metastore operation is the only thing happening in create table statement. For CTAS, it has already been special cased, where it make such a check in Semantic Analysis.\n\nNPE arises because Hive::getDatabases swallows NoSuchObjectException and instead returns null. We can either fix that so that it throws the exception or can check for null at the time of usage.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-21T16:59:31.570+0000","updated":"2011-10-21T16:59:31.570+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13132826","id":"13132826","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"Cancelling the patch.\n\nRobert, please address Ashutosh's comments ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-10-21T17:02:09.488+0000","updated":"2011-10-21T17:02:09.488+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13133244","id":"13133244","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"Done and done (hopefully).\n\nNoSuchObjectException can't be propagated further since that would require changes to ThriftHiveMetastore.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-22T04:48:09.043+0000","updated":"2011-10-22T04:48:09.043+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13134609","id":"13134609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"This has started to look good. Robert, can you update the diff on RB. I have few minor comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-24T23:07:23.234+0000","updated":"2011-10-24T23:07:23.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13134635","id":"13134635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"Thank you. I always add the current diff to RB, so it's always at head: https://reviews.apache.org/r/2426/diff/#index_header","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-24T23:35:35.359+0000","updated":"2011-10-24T23:35:35.359+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13135251","id":"13135251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Oh. Since RB is not posting back on jira (earlier it used to). I have left couple of comments on RB. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-25T17:24:44.315+0000","updated":"2011-10-25T17:24:44.315+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13135311","id":"13135311","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"In order for RB to post back to JIRA, you have to set the Bugs field in the RB diff (e.g. to HIVE-2510 in this case).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T18:27:28.909+0000","updated":"2011-10-25T18:27:28.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13135347","id":"13135347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"body":"Ok, thank you for this advice, I will try to make sure to do that in the future. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rsurowka","name":"rsurowka","key":"rsurowka","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Surówka","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T19:22:20.161+0000","updated":"2011-10-25T19:22:20.161+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13135349","id":"13135349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/2426/\n-----------------------------------------------------------\n\n(Updated 2011-10-25 19:25:02.433521)\n\n\nReview request for Yongqiang He, Ning Zhang and Kevin Wilfong.\n\n\nSummary\n-------\n\nNow when creating table in specific database, if that database doesn't exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.\n\n\nThis addresses bug HIVE-2510.\n    https://issues.apache.org/jira/browse/HIVE-2510\n\n\nDiffs\n-----\n\n  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1187647 \n  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1187647 \n  trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION \n  trunk/ql/src/test/queries/clientpositive/input45.q PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientpositive/input45.q.out PRE-CREATION \n\nDiff: https://reviews.apache.org/r/2426/diff\n\n\nTesting\n-------\n\nRun some sample queries and it seemed to work. \n\n\nThanks,\n\nRobert\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T19:24:32.279+0000","updated":"2011-10-25T19:24:32.279+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13135455","id":"13135455","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n\nbq.  On 2011-10-25 17:24:41, Ashutosh Chauhan wrote:\nbq.  > trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java, lines 6923-6926\nbq.  > <https://reviews.apache.org/r/2426/diff/4/?file=52450#file52450line6923>\nbq.  >\nbq.  >     Not sure if we need this. Checking of existing table already happens in analyzeCreateTable() around line 7847. So, this check at this point is redundant.\nbq.  \nbq.  Robert Surówka wrote:\nbq.      Without this check a null pointer exception was being thrown (for table created as select).\n\n(Here I check for existing database, not table)\n\n\n- Robert\n\n\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/2426/#review2823\n-----------------------------------------------------------\n\n\nOn 2011-10-25 19:25:02, Robert Surówka wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/2426/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-10-25 19:25:02)\nbq.  \nbq.  \nbq.  Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  Now when creating table in specific database, if that database doesn't exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.\nbq.  \nbq.  \nbq.  This addresses bug HIVE-2510.\nbq.      https://issues.apache.org/jira/browse/HIVE-2510\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1187647 \nbq.    trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1187647 \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientpositive/input45.q PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientpositive/input45.q.out PRE-CREATION \nbq.  \nbq.  Diff: https://reviews.apache.org/r/2426/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Run some sample queries and it seemed to work. \nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  Robert\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T21:48:32.101+0000","updated":"2011-10-25T21:48:32.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13135495","id":"13135495","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/2426/\n-----------------------------------------------------------\n\n(Updated 2011-10-25 22:24:42.563999)\n\n\nReview request for Yongqiang He, Ning Zhang and Kevin Wilfong.\n\n\nChanges\n-------\n\nRemove is_database_exist() method from HiveMetaStore, now check whether database exist is done directly with use of getDatabase().\n\n\nSummary\n-------\n\nNow when creating table in specific database, if that database doesn't exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.\n\n\nThis addresses bug HIVE-2510.\n    https://issues.apache.org/jira/browse/HIVE-2510\n\n\nDiffs (updated)\n-----\n\n  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1188369 \n  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1188369 \n  trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION \n  trunk/ql/src/test/queries/clientpositive/input45.q PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientpositive/input45.q.out PRE-CREATION \n\nDiff: https://reviews.apache.org/r/2426/diff\n\n\nTesting\n-------\n\nRun some sample queries and it seemed to work. \n\n\nThanks,\n\nRobert\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T22:24:32.218+0000","updated":"2011-10-25T22:24:32.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13135708","id":"13135708","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"It would be better to check for table existence and db existence together in CTAS within analyzeCreateTable(). Its little awkward that we check for table existence first and db existence later. But, I don't you want you to force into doing another patch. Will leave it upto committers. Otherwise, looks good to me. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-26T04:55:50.022+0000","updated":"2011-10-26T04:55:50.022+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13141266","id":"13141266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/2426/#review2984\n-----------------------------------------------------------\n\n\n\ntrunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java\n<https://reviews.apache.org/r/2426/#comment6690>\n\n    A better place to check DB existence is around line 7840, where table existence is checked.\n\n\n- Ning\n\n\nOn 2011-10-25 22:24:42, Robert Surówka wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/2426/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-10-25 22:24:42)\nbq.  \nbq.  \nbq.  Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  Now when creating table in specific database, if that database doesn't exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.\nbq.  \nbq.  \nbq.  This addresses bug HIVE-2510.\nbq.      https://issues.apache.org/jira/browse/HIVE-2510\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1188369 \nbq.    trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1188369 \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientpositive/input45.q PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientpositive/input45.q.out PRE-CREATION \nbq.  \nbq.  Diff: https://reviews.apache.org/r/2426/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Run some sample queries and it seemed to work. \nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  Robert\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-01T16:01:32.406+0000","updated":"2011-11-01T16:01:32.406+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13141337","id":"13141337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/2426/\n-----------------------------------------------------------\n\n(Updated 2011-11-01 17:10:08.840622)\n\n\nReview request for Yongqiang He, Ning Zhang and Kevin Wilfong.\n\n\nChanges\n-------\n\nMade the requested change (not for CTAS database existence is checked in AnalyzeCreateTable)\n\n\nSummary\n-------\n\nNow when creating table in specific database, if that database doesn't exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.\n\n\nThis addresses bug HIVE-2510.\n    https://issues.apache.org/jira/browse/HIVE-2510\n\n\nDiffs (updated)\n-----\n\n  trunk/ql/src/test/queries/clientpositive/input46.q PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION \n  trunk/ql/src/test/results/clientpositive/input46.q.out PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION \n  trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION \n  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1196082 \n  trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1196082 \n  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1196082 \n\nDiff: https://reviews.apache.org/r/2426/diff\n\n\nTesting\n-------\n\nRun some sample queries and it seemed to work. \n\n\nThanks,\n\nRobert\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-01T17:11:32.338+0000","updated":"2011-11-01T17:11:32.338+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13141342","id":"13141342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/2426/#review2985\n-----------------------------------------------------------\n\n\n\ntrunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java\n<https://reviews.apache.org/r/2426/#comment6691>\n\n    better to use the new DATABASE_NOT_EXISTS error message as well. \n    \n    Otherwise it looks good. \n\n\n- Ning\n\n\nOn 2011-11-01 17:10:08, Robert Surówka wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/2426/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-11-01 17:10:08)\nbq.  \nbq.  \nbq.  Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  Now when creating table in specific database, if that database doesn't exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.\nbq.  \nbq.  \nbq.  This addresses bug HIVE-2510.\nbq.      https://issues.apache.org/jira/browse/HIVE-2510\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    trunk/ql/src/test/queries/clientpositive/input46.q PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientpositive/input46.q.out PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION \nbq.    trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1196082 \nbq.    trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1196082 \nbq.    trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1196082 \nbq.  \nbq.  Diff: https://reviews.apache.org/r/2426/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Run some sample queries and it seemed to work. \nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  Robert\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-01T17:15:32.337+0000","updated":"2011-11-01T17:15:32.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13141354","id":"13141354","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"+1. Will commit if tests pass. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-11-01T17:23:29.134+0000","updated":"2011-11-01T17:23:29.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13141441","id":"13141441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/2426/#review2990\n-----------------------------------------------------------\n\nShip it!\n\n\nRoll back my last comment. The hive-metastore*.jar doesn't contain ErrorMsg.java. \n\n- Ning\n\n\nOn 2011-11-01 17:10:08, Robert Surówka wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/2426/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-11-01 17:10:08)\nbq.  \nbq.  \nbq.  Review request for Yongqiang He, Ning Zhang and Kevin Wilfong.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  Now when creating table in specific database, if that database doesn't exist Hive will return an error informing about that, instead of throwing Null Pointer Exception. Null Pointer happens during semantic analysis, so it seems reasonable to return an error before the code that would throw null pointer (Warehouse.getDatabasePath()) executes.\nbq.  \nbq.  \nbq.  This addresses bug HIVE-2510.\nbq.      https://issues.apache.org/jira/browse/HIVE-2510\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    trunk/ql/src/test/queries/clientpositive/input46.q PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out PRE-CREATION \nbq.    trunk/ql/src/test/results/clientpositive/input46.q.out PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure3.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure4.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure1.q PRE-CREATION \nbq.    trunk/ql/src/test/queries/clientnegative/create_table_failure2.q PRE-CREATION \nbq.    trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java 1196082 \nbq.    trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java 1196082 \nbq.    trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java 1196082 \nbq.  \nbq.  Diff: https://reviews.apache.org/r/2426/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Run some sample queries and it seemed to work. \nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  Robert\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-01T18:31:32.248+0000","updated":"2011-11-01T18:31:32.248+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13141729","id":"13141729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed. Thanks Robert!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-11-01T23:05:07.726+0000","updated":"2011-11-01T23:05:07.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13141921","id":"13141921","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #1051 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1051/])\n    HIVE-2510. Hive throws Null Pointer Exception upon CREATE TABLE <db>.<tbl>if <db> does not exists\n\nnzhang : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1196354\nFiles : \n* /hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java\n* /hive/trunk/ql/src/test/queries/clientnegative/create_table_failure1.q\n* /hive/trunk/ql/src/test/queries/clientnegative/create_table_failure2.q\n* /hive/trunk/ql/src/test/queries/clientnegative/create_table_failure3.q\n* /hive/trunk/ql/src/test/queries/clientnegative/create_table_failure4.q\n* /hive/trunk/ql/src/test/queries/clientpositive/input46.q\n* /hive/trunk/ql/src/test/results/clientnegative/create_table_failure1.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/create_table_failure2.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/create_table_failure3.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/create_table_failure4.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/input46.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-02T04:48:02.675+0000","updated":"2011-11-02T04:48:02.675+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527638/comment/13141925","id":"13141925","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"Someone complained to me that EXPLAIN CREATE TABLE <existing-table> is executed successful, but EXPLAIN CTAS fails neither creating table is exist or selecting table is not exist. Should it be needed more consistent? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2011-11-02T05:09:16.341+0000","updated":"2011-11-02T05:09:16.341+0000"}],"maxResults":29,"total":29,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2510/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0lkbz:"}}