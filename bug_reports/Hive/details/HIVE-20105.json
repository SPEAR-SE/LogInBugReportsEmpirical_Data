{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13170488","self":"https://issues.apache.org/jira/rest/api/2/issue/13170488","key":"HIVE-20105","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12343343","id":"12343343","name":"4.0.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343559","id":"12343559","description":"","name":"3.2.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-07-06T21:21:09.841+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Jul 28 15:25:42 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7081545_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_1900261946","customfield_12312321":null,"resolutiondate":"2018-07-28T15:25:42.346+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-20105/watchers","watchCount":2,"isWatching":false},"created":"2018-07-06T13:36:38.916+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12340268","id":"12340268","name":"3.0.0","archived":false,"released":true,"releaseDate":"2018-05-21"}],"issuelinks":[{"id":"12539258","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12539258","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"13173309","key":"HIVE-20213","self":"https://issues.apache.org/jira/rest/api/2/issue/13173309","fields":{"summary":"Upgrade Calcite to 1.17.0","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nishantbangarwa","name":"nishantbangarwa","key":"nishantbangarwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Bangarwa","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-07-28T15:25:42.395+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12325007","id":"12325007","name":"Hive"}],"timeoriginalestimate":null,"description":"Druid-Hive: tpcds query on timestamp trows java.lang.IllegalArgumentException: Cannot create timestamp, parsing error.\r\n\r\n{code}\r\nSELECT `__time`, max(ss_quantity), sum(ss_wholesale_cost)\r\n\r\n                          FROM misc_store_sales_denormalized_subset\r\n\r\n                          GROUP BY `__time`;\r\n\r\n\r\n\r\nINFO  : Compiling command(queryId=hive_20180705123007_dd94e295-9e3e-440e-9818-2e7f8458f06d): SELECT `__time`, max(ss_quantity), sum(ss_wholesale_cost)\r\nFROM misc_store_sales_denormalized_subset\r\nGROUP BY `__time`\r\nINFO  : Semantic Analysis Completed (retrial = false)\r\nINFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:__time, type:timestamp, comment:null), FieldSchema(name:$f1, type:int, comment:null), FieldSchema(name:$f2, type:double, comment:null)], properties:null)\r\nINFO  : Completed compiling command(queryId=hive_20180705123007_dd94e295-9e3e-440e-9818-2e7f8458f06d); Time taken: 0.143 seconds\r\nINFO  : Executing command(queryId=hive_20180705123007_dd94e295-9e3e-440e-9818-2e7f8458f06d): SELECT `__time`, max(ss_quantity), sum(ss_wholesale_cost)\r\nFROM misc_store_sales_denormalized_subset\r\nGROUP BY `__time`\r\nINFO  : Completed executing command(queryId=hive_20180705123007_dd94e295-9e3e-440e-9818-2e7f8458f06d); Time taken: 0.003 seconds\r\nINFO  : OK\r\norg.apache.hive.service.cli.HiveSQLException: java.io.IOException: java.lang.IllegalArgumentException: Cannot create timestamp, parsing error\r\nClosing: 0: jdbc:hive2://ctr-e138-1518143905142-397384-01-000006.hwx.site:2181,ctr-e138-1518143905142-397384-01-000005.hwx.site:2181,ctr-e138-1518143905142-397384-01-000004.hwx.site:2181,ctr-e138-1518143905142-397384-01-000007.hwx.site:2181,ctr-e138-1518143905142-397384-01-000008.hwx.site:2181/;serviceDiscoveryMode=zooKeeper;zooKeeperNamespace=hiveserver2-interactive;principal=hive/_HOST@HWQE.HORTONWORKS.COM\r\n{code}\r\n\r\nFacing this issue after removed condition to create Druid Hive table with (TIMESTAMP with local time zone)\r\n{code}\r\n-SELECT CAST(d_date AS TIMESTAMP with local time zone) AS `__time`,\r\n+SELECT CAST(d_date AS TIMESTAMP) AS `__time`,\r\n{code}\r\n\r\ncreate table with\r\nSELECT CAST(d_date AS TIMESTAMP with local time zone) AS `__time . works fine\r\n\r\nHSI log:\r\n{code}\r\n2018-07-05T12:30:08,297 INFO  [6b9ca95f-3aee-44cc-b2eb-2aa9bdec2b38 HiveServer2-Handler-Pool: Thread-326]: session.SessionState (SessionState.java:resetThreadName(449)) - Resetting thread name to  HiveServer2-Handler-Pool: Thread-326\r\n2018-07-05T12:30:08,297 WARN  [HiveServer2-Handler-Pool: Thread-326]: thrift.ThriftCLIService (ThriftCLIService.java:FetchResults(795)) - Error fetching results:\r\norg.apache.hive.service.cli.HiveSQLException: java.io.IOException: java.lang.IllegalArgumentException: Cannot create timestamp, parsing error\r\n        at org.apache.hive.service.cli.operation.SQLOperation.getNextRowSet(SQLOperation.java:465) ~[hive-service-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hive.service.cli.operation.OperationManager.getOperationNextRowSet(OperationManager.java:309) ~[hive-service-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hive.service.cli.session.HiveSessionImpl.fetchResults(HiveSessionImpl.java:905) ~[hive-service-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hive.service.cli.CLIService.fetchResults(CLIService.java:561) ~[hive-service-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hive.service.cli.thrift.ThriftCLIService.FetchResults(ThriftCLIService.java:786) [hive-service-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hive.service.rpc.thrift.TCLIService$Processor$FetchResults.getResult(TCLIService.java:1837) [hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hive.service.rpc.thrift.TCLIService$Processor$FetchResults.getResult(TCLIService.java:1822) [hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39) [hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39) [hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:647) [hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286) [hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_112]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_112]\r\n        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_112]\r\nCaused by: java.io.IOException: java.lang.IllegalArgumentException: Cannot create timestamp, parsing error\r\n        at org.apache.hadoop.hive.ql.exec.FetchOperator.getNextRow(FetchOperator.java:602) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:509) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:146) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:2695) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.reexec.ReExecDriver.getResults(ReExecDriver.java:229) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hive.service.cli.operation.SQLOperation.getNextRowSet(SQLOperation.java:460) ~[hive-service-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        ... 13 more\r\nCaused by: java.lang.IllegalArgumentException: Cannot create timestamp, parsing error\r\n        at org.apache.hadoop.hive.common.type.Timestamp.valueOf(Timestamp.java:163) ~[hive-common-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.druid.serde.DruidSerDe.deserialize(DruidSerDe.java:403) ~[hive-druid-handler-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.exec.FetchOperator.getNextRow(FetchOperator.java:583) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:509) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:146) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:2695) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hadoop.hive.ql.reexec.ReExecDriver.getResults(ReExecDriver.java:229) ~[hive-exec-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        at org.apache.hive.service.cli.operation.SQLOperation.getNextRowSet(SQLOperation.java:460) ~[hive-service-3.1.0.3.0.0.0-1602.jar:3.1.0.3.0.0.0-1602]\r\n        ... 13 more\r\n\r\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12930544","id":"12930544","filename":"HIVE-20105.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nishantbangarwa","name":"nishantbangarwa","key":"nishantbangarwa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nishant Bangarwa","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-07-06T15:34:14.331+0000","size":23021,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12930544/HIVE-20105.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Druid-Hive: tpcds query on timestamp throws java.lang.IllegalArgumentException: Cannot create timestamp, parsing error","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dileep529","name":"dileep529","key":"dileep529","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dileep Kumar Chiguruvada","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dileep529","name":"dileep529","key":"dileep529","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dileep Kumar Chiguruvada","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13170488/comment/16534832","id":"16534832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dileep529","name":"dileep529","key":"dileep529","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dileep Kumar Chiguruvada","active":true,"timeZone":"Etc/UTC"},"body":"Table ddl:\r\n{code}\r\ndrop table if exists misc_store_sales_denormalized_subset;\r\nSET hive.ctas.external.tables=true;\r\n\r\nCREATE EXTERNAL TABLE misc_store_sales_denormalized_subset\r\nSTORED BY 'org.apache.hadoop.hive.druid.DruidStorageHandler'\r\nTBLPROPERTIES (\"external.table.purge\" = \"true\") AS\r\nSELECT CAST(d_date AS TIMESTAMP) AS `__time`,\r\n       ss_ticket_number,\r\n       ss_quantity,\r\n       CAST(ss_wholesale_cost AS DOUBLE) AS `ss_wholesale_cost`,\r\n       CAST(ss_list_price AS DOUBLE) AS `ss_list_price`,\r\n       CAST(ss_sales_price AS DOUBLE) AS `ss_sales_price`,\r\n       CAST(ss_ext_discount_amt AS DOUBLE) AS `ss_ext_discount_amt`,\r\n       CAST(ss_ext_sales_price AS DOUBLE) AS `ss_ext_sales_price`,\r\n       CAST(ss_ext_wholesale_cost AS DOUBLE) AS `ss_ext_wholesale_cost`,\r\n       CAST(ss_ext_list_price AS DOUBLE) AS `ss_ext_list_price`,\r\n       CAST(ss_ext_tax AS DOUBLE) AS `ss_ext_tax`,\r\n       CAST(ss_coupon_amt AS DOUBLE) AS `ss_coupon_amt`,\r\n       CAST(ss_net_paid AS DOUBLE) AS `ss_net_paid`,\r\n       CAST(ss_net_paid_inc_tax AS DOUBLE) AS `ss_net_paid_inc_tax`,\r\n       CAST(ss_net_profit AS DOUBLE) AS `ss_net_profit`,\r\n       i_item_id,\r\n       i_rec_start_date,\r\n       i_rec_end_date,\r\n       i_item_desc,\r\n       CAST(i_current_price AS DOUBLE) AS `i_current_price`,\r\n       CAST(i_wholesale_cost AS DOUBLE) AS `i_wholesale_cost`,\r\n       CAST(i_brand_id AS STRING) AS `i_brand_id`,\r\n       i_brand,\r\n       CAST(i_class_id AS STRING) AS `i_class_id`,\r\n       i_class,\r\n       CAST(i_category_id AS STRING) AS `i_category_id`,\r\n       i_category,\r\n       CAST(i_manufact_id AS STRING) AS `i_manufact_id`,\r\n       i_manufact,\r\n       i_size,\r\n       i_formulation,\r\n       i_color,\r\n       i_units,\r\n       i_container,\r\n       CAST(i_manager_id AS STRING) AS `i_manager_id`,\r\n       i_product_name,\r\n       c_customer_id,\r\n       c_salutation,\r\n       c_first_name,\r\n       c_last_name,\r\n       c_preferred_cust_flag,\r\n       CAST(c_birth_day AS STRING) AS `c_birth_day`,\r\n       CAST(c_birth_month AS STRING) AS `c_birth_month`,\r\n       CAST(c_birth_year AS STRING) AS `c_birth_year`,\r\n       c_birth_country,\r\n       c_login,\r\n       c_email_address,\r\n       c_last_review_date,\r\n       ca_address_id,\r\n       ca_street_number,\r\n       ca_street_name,\r\n       ca_street_type,\r\n       ca_suite_number,\r\n       ca_city,\r\n       ca_county,\r\n       ca_state,\r\n       ca_zip,\r\n       ca_country,\r\n       CAST(ca_gmt_offset AS STRING) AS `ca_gmt_offset`,\r\n       ca_location_type,\r\n       s_store_id,\r\n       s_rec_start_date,\r\n       s_rec_end_date,\r\n       s_store_name,\r\n       CAST(s_number_employees AS BIGINT) AS `s_number_employees`,\r\n       CAST(s_floor_space AS BIGINT) AS `s_floor_space`,\r\n       s_hours,\r\n       s_manager,\r\n       CAST(s_market_id AS STRING) AS `s_market_id`,\r\n       s_geography_class,\r\n       s_market_desc,\r\n       s_market_manager,\r\n       CAST(s_division_id AS STRING) AS `s_division_id`,\r\n       s_division_name,\r\n       CAST(s_company_id AS STRING) AS `s_company_id`,\r\n       s_company_name,\r\n       s_street_number,\r\n       s_street_name,\r\n       s_street_type,\r\n       s_suite_number,\r\n       s_city,\r\n       s_county,\r\n       s_state,\r\n       s_zip,\r\n       s_country,\r\n       CAST(s_gmt_offset AS STRING) AS `s_gmt_offset`,\r\n       CAST(s_tax_precentage AS DOUBLE) AS `s_tax_precentage`\r\nFROM date_dim,\r\n     store_sales,\r\n     item,\r\n     customer,\r\n     customer_address,\r\n     store\r\nWHERE d_date_sk = ss_sold_date_sk\r\n   AND ss_item_sk = i_item_sk\r\n   AND ss_customer_sk = c_customer_sk \r\n   AND c_current_addr_sk = ca_address_sk\r\n   AND ss_store_sk = s_store_sk\r\n   AND i_manager_id=7\r\n   AND EXTRACT(MONTH FROM CAST(d_date AS TIMESTAMP))=11\r\n   AND EXTRACT(YEAR FROM CAST(d_date AS TIMESTAMP))=1999\r\n   AND substr(ca_zip,1,5) <> substr(s_zip,1,5);\r\n{code}\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dileep529","name":"dileep529","key":"dileep529","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dileep Kumar Chiguruvada","active":true,"timeZone":"Etc/UTC"},"created":"2018-07-06T13:40:10.246+0000","updated":"2018-07-06T13:40:10.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13170488/comment/16535368","id":"16535368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-07-06T21:21:09.841+0000","updated":"2018-07-06T21:21:09.841+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13170488/comment/16535765","id":"16535765","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12930544/HIVE-20105.patch\n\n{color:red}ERROR:{color} -1 due to build exiting with an error\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/12443/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/12443/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-12443/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nTests exited with: NonZeroExitCodeException\nCommand 'bash /data/hiveptest/working/scratch/source-prep.sh' failed with exit status 1 and output '+ date '+%Y-%m-%d %T.%3N'\n2018-07-07 14:03:41.867\n+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]\n+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games\n+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games\n+ export 'ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m '\n+ ANT_OPTS='-Xmx1g -XX:MaxPermSize=256m '\n+ export 'MAVEN_OPTS=-Xmx1g '\n+ MAVEN_OPTS='-Xmx1g '\n+ cd /data/hiveptest/working/\n+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-12443/source-prep.txt\n+ [[ false == \\t\\r\\u\\e ]]\n+ mkdir -p maven ivy\n+ [[ git = \\s\\v\\n ]]\n+ [[ git = \\g\\i\\t ]]\n+ [[ -z master ]]\n+ [[ -d apache-github-source-source ]]\n+ [[ ! -d apache-github-source-source/.git ]]\n+ [[ ! -d apache-github-source-source ]]\n+ date '+%Y-%m-%d %T.%3N'\n2018-07-07 14:03:41.871\n+ cd apache-github-source-source\n+ git fetch origin\n+ git reset --hard HEAD\nHEAD is now at 8494522 HIVE-20098 : Statistics: NPE when getting Date column partition statistics (Andrii via Gopal V)\n+ git clean -f -d\n+ git checkout master\nAlready on 'master'\nYour branch is up-to-date with 'origin/master'.\n+ git reset --hard origin/master\nHEAD is now at 8494522 HIVE-20098 : Statistics: NPE when getting Date column partition statistics (Andrii via Gopal V)\n+ git merge --ff-only origin/master\nAlready up-to-date.\n+ date '+%Y-%m-%d %T.%3N'\n2018-07-07 14:03:43.334\n+ rm -rf ../yetus_PreCommit-HIVE-Build-12443\n+ mkdir ../yetus_PreCommit-HIVE-Build-12443\n+ git gc\n+ cp -R . ../yetus_PreCommit-HIVE-Build-12443\n+ mkdir /data/hiveptest/logs/PreCommit-HIVE-Build-12443/yetus\n+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh\n+ patchFilePath=/data/hiveptest/working/scratch/build.patch\n+ [[ -f /data/hiveptest/working/scratch/build.patch ]]\n+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh\n+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch\nerror: a/druid-handler/src/java/org/apache/hadoop/hive/druid/serde/DruidSerDe.java: does not exist in index\nerror: a/ql/src/test/queries/clientpositive/druid_timestamptz.q: does not exist in index\nerror: a/ql/src/test/results/clientpositive/druid/druid_timestamptz.q.out: does not exist in index\nerror: patch failed: druid-handler/src/java/org/apache/hadoop/hive/druid/serde/DruidSerDe.java:393\nerror: repository lacks the necessary blob to fall back on 3-way merge.\nerror: druid-handler/src/java/org/apache/hadoop/hive/druid/serde/DruidSerDe.java: patch does not apply\nerror: src/java/org/apache/hadoop/hive/druid/serde/DruidSerDe.java: does not exist in index\nerror: src/test/queries/clientpositive/druid_timestamptz.q: does not exist in index\nerror: src/test/results/clientpositive/druid/druid_timestamptz.q.out: does not exist in index\nThe patch does not appear to apply with p0, p1, or p2\n+ result=1\n+ '[' 1 -ne 0 ']'\n+ rm -rf yetus_PreCommit-HIVE-Build-12443\n+ exit 1\n'\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12930544 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-07-07T14:04:24.977+0000","updated":"2018-07-07T14:04:24.977+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13170488/comment/16560776","id":"16560776","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"Tests run as part of HIVE-20213. Pushed to master, branch-3. Thanks [~nishantbangarwa]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-07-28T15:25:42.382+0000","updated":"2018-07-28T15:25:42.382+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-20105/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3vm3z:"}}