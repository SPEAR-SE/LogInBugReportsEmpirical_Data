{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12837981","self":"https://issues.apache.org/jira/rest/api/2/issue/12837981","key":"HIVE-11010","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-06-15T22:55:47.379+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jun 29 01:15:36 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-11010/watchers","watchCount":3,"isWatching":false},"created":"2015-06-15T22:47:25.036+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329345","id":"12329345","description":"Hive 1.2.0","name":"1.2.0","archived":false,"released":true,"releaseDate":"2015-05-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12332384","id":"12332384","name":"1.2.1","archived":false,"released":true,"releaseDate":"2015-06-26"}],"issuelinks":[{"id":"12427970","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12427970","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12833584","key":"HIVE-10857","self":"https://issues.apache.org/jira/rest/api/2/issue/12833584","fields":{"summary":"Accumulo storage handler fail throwing java.lang.IllegalArgumentException: Cannot determine SASL mechanism for token class: class org.apache.accumulo.core.client.security.tokens.PasswordToken","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elserj","name":"elserj","key":"elserj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elserj&avatarId=17258","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elserj&avatarId=17258","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elserj&avatarId=17258","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elserj&avatarId=17258"},"displayName":"Josh Elser","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-06-29T01:15:36.611+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12325007","id":"12325007","name":"Hive"}],"timeoriginalestimate":null,"description":"On Kerberized cluster, accumulo storage handler throws an error, \"[usrname]@[principlaname] is not allowed to impersonate [username]\" ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Accumulo storage handler queries via HS2 fail","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taksaito","name":"taksaito","key":"taksaito","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Takahiko Saito","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taksaito","name":"taksaito","key":"taksaito","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Takahiko Saito","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Secure","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837981/comment/14587091","id":"14587091","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elserj","name":"elserj","key":"elserj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elserj&avatarId=17258","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elserj&avatarId=17258","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elserj&avatarId=17258","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elserj&avatarId=17258"},"displayName":"Josh Elser","active":true,"timeZone":"America/New_York"},"body":"Thanks for filing this. Was doing some debugging with [~taksaito] with the AccumuloStorageHandler -- loaded some data in both HBase and Accumulo, ran some Hive queries against both and found that when we ran the Accumulo queries via hiveserver (but not in the local client) both the queries would fail on the RPC handshakes. Short story, AccumuloStorageHandler queries with Kerberos on don't work with HiveServer2.\n\nI think what was happening is that the additions to the AccumuloStorageHandler in HIVE-10857 don't work as expected because HS2 is going to be running with its own Kerberos credentials. I think we need to change how we set up the credentials inside of AccumuloStorageHandler so that it will work regardless of a local hive client or hs2 -- running a doAs with a PROXY instead of replacing the HS2 credentials.\n\nThe second half is that we'd need to make sure Accumulo itself is configured to allow HS2 to proxy on behalf of users -- not relevant for Hive code, but something to document for users to set up in Accumulo.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elserj","name":"elserj","key":"elserj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elserj&avatarId=17258","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elserj&avatarId=17258","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elserj&avatarId=17258","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elserj&avatarId=17258"},"displayName":"Josh Elser","active":true,"timeZone":"America/New_York"},"created":"2015-06-15T22:55:47.379+0000","updated":"2015-06-15T22:55:47.379+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837981/comment/14605019","id":"14605019","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"Removing fix version of 1.2.1 since this is not part of the already-released 1.2.1 release. Please set appropriate commit version when this fix is committed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-29T01:15:36.611+0000","updated":"2015-06-29T01:15:36.611+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-11010/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2g2lz:"}}