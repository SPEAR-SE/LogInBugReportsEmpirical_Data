{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12659841","self":"https://issues.apache.org/jira/rest/api/2/issue/12659841","key":"HIVE-4934","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-07-25T17:13:20.457+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Aug 04 09:21:56 UTC 2014","customfield_12310420":"340033","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_31937524505_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-30T08:26:51.943+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4934/watchers","watchCount":5,"isWatching":false},"created":"2013-07-25T16:54:47.468+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-08-04T09:21:56.900+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"{code}\nCREATE TABLE test (foo INT);\nSELECT ntile(10), foo OVER (PARTITION BY foo) FROM test;\nFAILED: SemanticException org.apache.hadoop.hive.ql.metadata.HiveException: Only COMPLETE mode supported for NTile function\n\nSELECT foo, ntile(10) OVER (PARTITION BY foo) FROM test;\n...works...\n{code}\n\nI'm not sure if that is a bug or necessary. Either way the error message is not helpful as it's not documented anywhere what {{COMPLETE}} mode is. A cursory glance at the code didn't help me either.\n\nEdit: It is not a bug, it wasn't clear to me that the OVER clause only applies to the directly preceding function.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"340351","customfield_12312823":null,"summary":"Improve documentation of OVER clause","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12659841/comment/13719786","id":"13719786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Here is the definition in the code for COMPLETE\n{code}\n    /**\n     * COMPLETE: from original data directly to full aggregation: iterate() and\n     * terminate() will be called.\n     */\n    COMPLETE\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-07-25T17:13:20.457+0000","updated":"2013-07-25T17:13:20.457+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12659841/comment/13720312","id":"13720312","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"I think you should do like this,\n{noformat}\nSELECT ntile(10) OVER (PARTITION BY foo), foo FROM test;\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2013-07-26T00:55:56.959+0000","updated":"2013-07-26T00:55:56.959+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12659841/comment/13722548","id":"13722548","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"body":"I see. A misunderstanding on my side then I guess. So at most it's a documentation issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"created":"2013-07-29T15:37:53.419+0000","updated":"2013-07-29T15:37:53.419+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12659841/comment/14079061","id":"14079061","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"body":"This was a misunderstanding on my part. I'll add a sentence to the documentation to clear this up for other.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"created":"2014-07-30T08:26:51.966+0000","updated":"2014-07-30T08:26:51.966+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12659841/comment/14080569","id":"14080569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"Thanks [~lars_francke].  Was there a reason for the line break that put \"SELECT\" and \"a,\" on separate lines?  (I removed it to match all the other examples, but you can restore it if it has a purpose.)\n\n{code}\nSELECT\n a,\n COUNT(b) OVER (PARTITION BY c),\n SUM(b) OVER (PARTITION BY c)\nFROM T;\n{code}\n\nAlso thanks for changing the formatting of code samples.\n\n* [PARTITION BY with partitioning, ORDER BY, and window specification | https://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics#LanguageManualWindowingAndAnalytics-PARTITIONBYwithpartitioning,ORDERBY,andwindowspecification]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2014-07-31T06:37:24.755+0000","updated":"2014-07-31T06:37:24.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12659841/comment/14080623","id":"14080623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"body":"Yeah, I thought it was easier to see that each OVER has only one associated function call but I'm not overly attached to the line breaks so if you feel it looks better on one line feel free to change it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"created":"2014-07-31T07:58:12.676+0000","updated":"2014-07-31T07:58:12.676+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12659841/comment/14081337","id":"14081337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"Hm, that's a good point.  The line break after SELECT adds helpful emphasis so feel free to restore it, or I will.\n\nA bit of text explaining the obvious would also be good, such as \"In this example, the first OVER clause applies to COUNT(b) and the second OVER clause applies to SUM(b).\"  Maybe with \"only\" thrown in.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2014-07-31T19:37:41.746+0000","updated":"2014-07-31T19:37:41.746+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12659841/comment/14084462","id":"14084462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"body":"I just wanted to add the clarification and saw that you've been - once more - faster than me. Thanks for helping out!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lars_francke","name":"lars_francke","key":"lars_francke","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lars_francke&avatarId=24833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lars_francke&avatarId=24833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lars_francke&avatarId=24833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lars_francke&avatarId=24833"},"displayName":"Lars Francke","active":true,"timeZone":"Europe/Berlin"},"created":"2014-08-04T09:21:56.900+0000","updated":"2014-08-04T09:21:56.900+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4934/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1mnb3:"}}