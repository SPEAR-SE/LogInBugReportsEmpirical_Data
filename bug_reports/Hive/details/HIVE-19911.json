{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13166367","self":"https://issues.apache.org/jira/rest/api/2/issue/13166367","key":"HIVE-19911","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-06-21T05:51:59.925+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 29 10:40:29 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-19911/watchers","watchCount":4,"isWatching":false},"created":"2018-06-15T13:59:07.853+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12342162","id":"12342162","name":"2.3.3","archived":false,"released":false,"releaseDate":"2018-04-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-06-29T10:40:29.334+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12322671","id":"12322671","name":"Transactions","description":"Transaction management and ACID"}],"timeoriginalestimate":null,"description":"Env:\r\nhadoop-2.7.0\r\nhive-2.3.3\r\n\r\nOS:\r\ncentos-release-7-5.1804.el7.centos.x86_64\r\n\r\nSteps to reproduce (at hive cli):\r\n\r\n{code}\r\nset hive.support.concurrency=true;\r\nset hive.txn.manager=org.apache.hadoop.hive.ql.lockmgr.DbTxnManager;\r\nDROP TABLE IF EXISTS detaillineitem_all;\r\nDROP TABLE IF EXISTS detaillineitem_all_delete_1526330755128;\r\n\r\nCREATE TABLE `detaillineitem_all`(\r\n  `detailid` decimal(20,0),\r\n  `branchnumber` varchar(3)\r\n) PARTITIONED BY (\r\n  `branchnumber_p` varchar(3))\r\nCLUSTERED BY (\r\n  detailid)\r\nINTO 25 BUCKETS\r\nSTORED AS ORC\r\nTBLPROPERTIES (\r\n  'orc.compress'='NONE',\r\n  'transactional'='true');\r\n\r\nCREATE TABLE `detaillineitem_all_delete_1526330755128`(\r\n  `detailid` decimal(20,0),\r\n  `branchnumber` varchar(3),\r\n  `branchnumber_p` varchar(3));\r\n\r\nDELETE from detaillineitem_all WHERE EXISTS (\r\n    SELECT\r\n        1\r\n    FROM\r\n        detaillineitem_all_delete_1526330755128 AS t1\r\n    WHERE\r\n        (detaillineitem_all.detailid = t1.detailid)\r\n      AND\r\n        (detaillineitem_all.branchnumber = CAST(t1.branchnumber AS STRING)));\r\n{code}\r\n\r\nException:\r\n\r\n{code}\r\n2018-06-15T16:51:48,625 ERROR [f6bd86a7-04e5-4284-9031-3b9a0ccc80f3 main] ql.Driver: FAILED: SemanticException Line 0:-1 Invalid table alias or column reference 'sq_1': (possible column names are: mber)) sq_corr_1)) (tok_where (= 1 1), (. (tok_table_or_col sq_1) sq_corr_1))\r\norg.apache.hadoop.hive.ql.parse.SemanticException: Line 0:-1 Invalid table alias or column reference 'sq_1': (possible column names are: mber)) sq_corr_1)) (tok_where (= 1 1), (. (tok_table_or_col sq_1) sq_corr_1))\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genAllExprNodeDesc(SemanticAnalyzer.java:11620)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:11568)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:11536)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genExprNodeDesc(SemanticAnalyzer.java:11514)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genMapGroupByForSemijoin(SemanticAnalyzer.java:8416)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genJoinOperator(SemanticAnalyzer.java:8305)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genFilterPlan(SemanticAnalyzer.java:3278)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genBodyPlan(SemanticAnalyzer.java:9592)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genPlan(SemanticAnalyzer.java:10549)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genPlan(SemanticAnalyzer.java:10427)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genOPTree(SemanticAnalyzer.java:11125)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:11138)\r\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:10807)\r\n        at org.apache.hadoop.hive.ql.parse.UpdateDeleteSemanticAnalyzer.analyzeInternal(UpdateDeleteSemanticAnalyzer.java:73)\r\n        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:258)\r\n        at org.apache.hadoop.hive.ql.parse.UpdateDeleteSemanticAnalyzer.reparseAndSuperAnalyze(UpdateDeleteSemanticAnalyzer.java:462)\r\n        at org.apache.hadoop.hive.ql.parse.UpdateDeleteSemanticAnalyzer.analyzeDelete(UpdateDeleteSemanticAnalyzer.java:111)\r\n        at org.apache.hadoop.hive.ql.parse.UpdateDeleteSemanticAnalyzer.analyzeInternal(UpdateDeleteSemanticAnalyzer.java:81)\r\n        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:258)\r\n        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:512)\r\n        at org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1317)\r\n        at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1457)\r\n        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1237)\r\n        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1227)\r\n        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:233)\r\n        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:184)\r\n        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403)\r\n        at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:821)\r\n        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:759)\r\n        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:686)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n{code}\r\n\r\nAfter some debugging, I investigated that start and end indexes of ASTNode to retrieve string is incorrect. It happens at genFilterPlan after rewriting the where expression. When ASTNode tries to retrieve string representation of current node it returns incorrect string because of incorrect indexes and therefore the query crashes. \r\nIf we rewrite the astStr inside debugging, then all query string becomes correct and query runs fine.\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12928374","id":"12928374","filename":"HIVE-19911.1-branch-2.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"created":"2018-06-19T15:43:22.573+0000","size":14935,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12928374/HIVE-19911.1-branch-2.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12929386","id":"12929386","filename":"HIVE-19911.2-branch-2.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"created":"2018-06-27T11:04:51.109+0000","size":13549,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12929386/HIVE-19911.2-branch-2.3.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Hive delete queries fail with Invalid table alias or column reference","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13166367/comment/16514002","id":"16514002","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"body":"Without CAST function query works fine. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"created":"2018-06-15T15:50:46.194+0000","updated":"2018-06-15T15:59:26.032+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13166367/comment/16518942","id":"16518942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12928374/HIVE-19911.1-branch-2.3.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 18 failed/errored test(s), 10579 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[semijoin2] (batchId=51)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[constprog_semijoin] (batchId=153)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[constprog_semijoin] (batchId=165)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_join12] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[mapreduce2] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[semijoin] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[skewjoin] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[skewjoinopt9] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[smb_mapjoin_3] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[smb_mapjoin_4] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[stats10] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union5] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union_remove_10] (batchId=107)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vector_left_outer_join] (batchId=107)\norg.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion02 (batchId=263)\norg.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion02 (batchId=275)\norg.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion02 (batchId=272)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/11960/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/11960/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-11960/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 18 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12928374 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-06-21T05:51:59.925+0000","updated":"2018-06-21T05:51:59.925+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13166367/comment/16520977","id":"16520977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12928674/HIVE-19911.2-branch-2.3.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 14 failed/errored test(s), 10565 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_count_distinct] (batchId=145)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=110)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_join15] (batchId=104)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucketmapjoin9] (batchId=104)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[multi_insert_gby] (batchId=104)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[ptf] (batchId=104)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[sample4] (batchId=104)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[skewjoinopt13] (batchId=104)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union18] (batchId=104)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorized_nested_mapjoin] (batchId=104)\norg.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion02 (batchId=263)\norg.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion02 (batchId=275)\norg.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion02 (batchId=272)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/12009/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/12009/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-12009/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 14 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12928674 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-06-23T05:48:18.682+0000","updated":"2018-06-23T05:48:18.682+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13166367/comment/16521052","id":"16521052","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12928674/HIVE-19911.2-branch-2.3.patch\n\n{color:red}ERROR:{color} -1 due to build exiting with an error\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/12015/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/12015/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-12015/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nTests exited with: Exception: Patch URL https://issues.apache.org/jira/secure/attachment/12928674/HIVE-19911.2-branch-2.3.patch was found in seen patch url's cache and a test was probably run already on it. Aborting...\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12928674 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-06-23T10:58:42.955+0000","updated":"2018-06-23T10:58:42.955+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13166367/comment/16526387","id":"16526387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12929386/HIVE-19911.2-branch-2.3.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 10 failed/errored test(s), 10565 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[comments] (batchId=35)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=113)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucketmapjoin2] (batchId=98)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[cbo_udf_udaf] (batchId=98)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[ptf_decimal] (batchId=98)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union23] (batchId=98)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union31] (batchId=98)\norg.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion02 (batchId=263)\norg.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion02 (batchId=275)\norg.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion02 (batchId=272)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/12212/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/12212/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-12212/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 10 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12929386 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-06-28T14:48:47.389+0000","updated":"2018-06-28T14:48:47.389+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13166367/comment/16527456","id":"16527456","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"body":"[~ekoifman] [~ashutoshc] [~jcamachorodriguez]\r\nHi,\r\nCould you review please my patch?\r\nTest failures are not related. These tests are fluky. Locally they runs fine.\r\nTransactional tests failed even without fix. They are broken.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkysliuk","name":"mkysliuk","key":"mkysliuk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mykhailo Kysliuk","active":true,"timeZone":"Etc/UTC"},"created":"2018-06-29T10:40:29.334+0000","updated":"2018-06-29T10:40:29.334+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-19911/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3uwy7:"}}