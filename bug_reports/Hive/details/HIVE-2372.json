{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12518679","self":"https://issues.apache.org/jira/rest/api/2/issue/12518679","key":"HIVE-2372","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-10-18T02:56:50.196+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jun 11 19:53:40 UTC 2014","customfield_12310420":"42146","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_24850048491_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-05-25T23:55:02.508+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2372/watchers","watchCount":10,"isWatching":false},"created":"2011-08-12T09:07:34.113+0000","customfield_12310192":"Committed thanks","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324312","id":"12324312","description":"released","name":"0.12.0","archived":false,"released":true,"releaseDate":"2013-10-15"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-06-11T19:53:40.082+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312586","id":"12312586","name":"Query Processor","description":"Tracks issues dealing with query processing."}],"timeoriginalestimate":null,"description":"I execute a huge query on a table with a lot of 2-level partitions. There is a perl reducer in my query. Maps worked ok, but every reducer fails with the following exception:\n\n2011-08-11 04:58:29,865 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: Executing [/usr/bin/perl, <reducer.pl>, <my_argument>]\n2011-08-11 04:58:29,866 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: tablename=null\n2011-08-11 04:58:29,866 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: partname=null\n2011-08-11 04:58:29,866 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: alias=null\n2011-08-11 04:58:29,935 FATAL ExecReducer: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row (tag=0) {\"key\":{\"reducesinkkey0\":129390185139228,\"reducesinkkey1\":\"00008AF10000000063CA6F\"},\"value\":{\"_col0\":\"00008AF10000000063CA6F\",\"_col1\":\"2011-07-27 22:48:52\",\"_col2\":129390185139228,\"_col3\":2006,\"_col4\":4100,\"_col5\":\"10017388=6\",\"_col6\":1063,\"_col7\":\"NULL\",\"_col8\":\"address.com\",\"_col9\":\"NULL\",\"_col10\":\"NULL\"},\"alias\":0}\n\tat org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:256)\n\tat org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:468)\n\tat org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:416)\n\tat org.apache.hadoop.mapred.Child$4.run(Child.java:268)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)\n\tat org.apache.hadoop.mapred.Child.main(Child.java:262)\nCaused by: org.apache.hadoop.hive.ql.metadata.HiveException: Cannot initialize ScriptOperator\n\tat org.apache.hadoop.hive.ql.exec.ScriptOperator.processOp(ScriptOperator.java:320)\n\tat org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)\n\tat org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)\n\tat org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)\n\tat org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)\n\tat org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:744)\n\tat org.apache.hadoop.hive.ql.exec.ExtractOperator.processOp(ExtractOperator.java:45)\n\tat org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)\n\tat org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:247)\n\t... 7 more\nCaused by: java.io.IOException: Cannot run program \"/usr/bin/perl\": java.io.IOException: error=7, Argument list too long\n\tat java.lang.ProcessBuilder.start(ProcessBuilder.java:460)\n\tat org.apache.hadoop.hive.ql.exec.ScriptOperator.processOp(ScriptOperator.java:279)\n\t... 15 more\nCaused by: java.io.IOException: java.io.IOException: error=7, Argument list too long\n\tat java.lang.UNIXProcess.<init>(UNIXProcess.java:148)\n\tat java.lang.ProcessImpl.start(ProcessImpl.java:65)\n\tat java.lang.ProcessBuilder.start(ProcessBuilder.java:453)\n\t... 16 more\n\nIt seems to me, I found the cause. ScriptOperator.java puts a lot of configs as environment variables to the child reduce process. One of variables is mapred.input.dir, which in my case more than 150KB. There are a huge amount of input directories in this variable. In short, the problem is that Linux (up to 2.6.23 kernel version) limits summary size of environment variables for child processes to 132KB. This problem could be solved by upgrading the kernel. But strings limitations still be 132KB per string in environment variable. So such huge variable doesn't work even on my home computer (2.6.32). You can read more information on (http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html).\n\nFor now all our work has been stopped because of this problem and I can't find the solution. The only solution, which seems to me more reasonable is to get rid of this variable in reducers.\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12512758","id":"12512758","filename":"HIVE-2372.1.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-01T15:00:41.668+0000","size":4595,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12512758/HIVE-2372.1.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12516666","id":"12516666","filename":"HIVE-2372.2.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-01T09:35:53.879+0000","size":7180,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12516666/HIVE-2372.2.patch.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"14542","customfield_12312823":null,"summary":"java.io.IOException: error=7, Argument list too long","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13089459","id":"13089459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"I've added a quick fix on our cluster. The fix just erases mapred_input_dir from environment of child process.\nql/src/java/org/apache/hadoop/hive/ql/exec/ScriptOperator.java:\n         ProcessBuilder pb = new ProcessBuilder(wrappedCmdArgs);\n         Map<String, String> env = pb.environment();\n         addJobConfToEnvironment(hconf, env);\n+\n+        LOG.info(\"HIVE-2372. HOTFIX. Removing mapred_input_dir from environment variables\");\n+        env.remove(\"mapred_input_dir\");\n+\n         env.put(safeEnvVarName(HiveConf.ConfVars.HIVEALIAS.varname), String\n             .valueOf(alias));\n\nAll queries are work fine now. If anyone proposes more correct decision (add a property which will disable this property), I'll try to make code changes and prepare a patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-23T13:33:13.632+0000","updated":"2011-08-23T13:33:13.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13129442","id":"13129442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"Sergey Tryuber, can you put a patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-18T02:56:50.196+0000","updated":"2011-10-18T02:56:50.196+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13129560","id":"13129560","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"body":"Instead of simply removing the key, we should truncate the value to a shorter one if it is too long.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-18T07:18:03.364+0000","updated":"2011-10-18T07:18:03.364+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13130793","id":"13130793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Siying, what the limit we should set on this property? Limiting it to 132KB won't work on kernels prior to 2.6.23, because there are other properties exist and sum limit will exceed 132KB threshold for those kernels. May be we could introduce on more property that (if set to true) will remove the key?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-19T17:24:29.571+0000","updated":"2011-10-19T17:24:29.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13134710","id":"13134710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"body":"I'm thinking a very short limit, like 1024 chars or so. A longer chars won't get user any information.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T03:05:08.252+0000","updated":"2011-10-25T03:05:08.252+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13135111","id":"13135111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"body":"I am surprised no one has ran into this sooner. I had assumed the limit was much shorter. Streaming is 'a neat hack' but with the UDF/UDAF frameworks I have never been convinced it is needed. Most often I see use it improperly to make hacky map side joins etc. Maybe your real problem is having to many input files and you should merge your input first, or use bucketing instead of two level partitioning.   ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-25T14:56:29.676+0000","updated":"2011-10-25T14:56:29.676+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13139745","id":"13139745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Edward, firstly, I also was the same problems/questions on other forums, unsolved. The issue is that we need hourly based access to our data in HDFS. Sometimes, we just need to process couple of ours quickly, and, sometimes, we need to process several monthes of data. We don't use \"hacky map side joins\". Our custom reducer performs only aggregations (quite complicated), nothing more.\nHive manages all our workflow quite well. Actually, this still be our only problem and we hope to use Hive later on.\nOk, what's the final decision: cut this option's lenght to 1,5,10KB? Or imply another option which enables this option removing from environment variables?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-30T20:32:41.296+0000","updated":"2011-10-30T20:32:41.296+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13173554","id":"13173554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lramos85","name":"lramos85","key":"lramos85","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Ramos","active":true,"timeZone":"Etc/UTC"},"body":"We are running into the same problem here, my list of input files is even larger. In my case we are using a TRANSFORM() python script to convert the output of the reducers to csv format. I confirmed that lowering the number of input files works by specifying a limited partition or merging the inputs. Either way, I don't think it should pass that entire list through environment variables. I can go with an option to remove that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lramos85","name":"lramos85","key":"lramos85","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Ramos","active":true,"timeZone":"Etc/UTC"},"created":"2011-12-20T22:11:37.455+0000","updated":"2011-12-20T22:11:37.455+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13173795","id":"13173795","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lramos85","name":"lramos85","key":"lramos85","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Ramos","active":true,"timeZone":"Etc/UTC"},"body":"I just wanted to note, that in my case where I use a stream script for TRANSFORM, which only happens at the very end, a workaround was to simply force it to have 2 stages so that by the last stage, the input list has been merged. I understand that REDUCE scripts will work differently. \n\nAlso +1 on Sergey Triuber quick fix. But might not be a solid solution. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lramos85","name":"lramos85","key":"lramos85","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Ramos","active":true,"timeZone":"Etc/UTC"},"created":"2011-12-21T03:00:39.304+0000","updated":"2011-12-21T03:00:39.304+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13188263","id":"13188263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"body":"is there anyone still working on this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"created":"2012-01-18T03:59:03.675+0000","updated":"2012-01-18T03:59:03.675+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13188326","id":"13188326","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lramos85","name":"lramos85","key":"lramos85","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Ramos","active":true,"timeZone":"Etc/UTC"},"body":"That's a good question, if anyone official wants to vote on a patch or Sergey Tryuber HOTFIX. \n\nAfter applying the HOTFIX and running \"ant test\" I didn't see any issues. And this definitely fixed our current problems with the limitation. +1 Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lramos85","name":"lramos85","key":"lramos85","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Ramos","active":true,"timeZone":"Etc/UTC"},"created":"2012-01-18T08:05:01.503+0000","updated":"2012-01-18T08:05:01.503+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13194602","id":"13194602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Well, guys, give me a week to prepare a patch (just have no time right now) that will truncate this variable to 20KB if string length is too large (I'm going to hardcode this value) and prints WARN to log if such thing happend. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-01-27T10:46:27.224+0000","updated":"2012-01-27T10:46:27.224+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13197887","id":"13197887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Patch, 1st version","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-01T15:00:41.760+0000","updated":"2012-02-01T15:00:41.760+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13197895","id":"13197895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"I've attached a patch (as an attachment, not by \"submit patch\", as described on wiki HowToContribute). When I cloned trunk and run tests without any changes, for about 5 hours, there was several test errors((( Build and testing with my changes showed the same errors count. So, please, review this patch and make remarks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-01T15:09:10.841+0000","updated":"2012-02-01T15:09:10.841+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13199411","id":"13199411","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"body":"Is 2048 per value too long?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-03T00:34:11.779+0000","updated":"2012-02-03T00:34:11.779+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13199587","id":"13199587","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Limitation in my patch is 20KB, I don't think, that smaller limit is good idea, because in some cases user might be really want to set long values. Actually, in some cases 2KB (as you proposed) is even not enough for for \"hive.query.string\". But, of course, if you insist, I'll set limitation to 1KB, just let me know about it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-03T08:25:25.447+0000","updated":"2012-02-03T08:25:25.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13203105","id":"13203105","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"body":"How about make it configurable? (though I hate to add more and more parameters.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdong","name":"sdong","key":"sdong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siying Dong","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-08T01:30:27.394+0000","updated":"2012-02-08T01:30:27.394+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13203684","id":"13203684","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"That's was my initial idea (you even can see that in my comments). But after that I've changed my mind because I also \"hate to add more and more parameters\". This bug affects may be 0.001% of Hive users and I can't figure out the case of those 0.001% users when 20KB is not enough. Make this limit less then 20KB also has no sense, because that's not a bottleneck on modern environment. So, introducing one more useless option, prepare documentation for it and compel new Hive users to read/understand it... ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-08T15:54:54.733+0000","updated":"2012-02-08T15:54:54.733+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13204037","id":"13204037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lramos85","name":"lramos85","key":"lramos85","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Ramos","active":true,"timeZone":"Etc/UTC"},"body":"As a hive user affected by this bug, I would have no problem with truncating the variable to 20KB. That should be enough to give you an idea of the input list. 2KB sounds low to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lramos85","name":"lramos85","key":"lramos85","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Ramos","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-08T21:54:40.413+0000","updated":"2012-02-08T21:54:40.413+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13214997","id":"13214997","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"body":"Lets get this committed. I think we should introduce the variables. In the normal case we want someone to get all the input they would expect. If they run into an exception they can turn the variable on to get out of the problem. \n\nLets do this. Rebase your patch and add hive.scriptoperator.truncate.env=true|false to control this feature. Default it to false which would be how hive works now. I will review and commit. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-23T20:06:23.877+0000","updated":"2012-02-23T20:06:23.877+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13217938","id":"13217938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Ok, got your point. Edward, could you answer some questions:\n1. As I understood from sources, there is no hive-default.xml (it is deprecated)? \n2. I'm going to add one more entry to HiveConf#ConfVars. Is that right way? \n3. Where is place (in code base) for inserting comments for properties, or it just hive wiki? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-28T06:08:22.932+0000","updated":"2012-02-28T06:08:22.932+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13218339","id":"13218339","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"body":"1. There is a hive-default.xml.template you should add it there along with a short description\n2. Yes adding a ConfVar is the right way\n3. You can add some inline comments if you wish although generally if the property name is chosen correctly it usually explains itself.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-28T16:40:16.820+0000","updated":"2012-02-28T16:40:16.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13219942","id":"13219942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Patch that has hive.script.operator.truncate.env option that enables truncation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-01T09:35:54.205+0000","updated":"2012-03-01T09:35:54.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13219946","id":"13219946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Edward, I've named my option hive.script.operator.truncate.env (instead of hive.scriptoperator.truncate.env as you proposed), to be analogous of hive.script.operator.id.env.var. Actually, I have a question, why do we have hive-default.xml.template if all options (their names and default values) are hardcoded in ConfVar?\n\nAlso, as I wrote in previous posts, there was some Hive tests failures in my \"ant test\" before. I just want to share this information with other developers: this problem was solved by changing locale in my system from Russian to EN. So, I have all tests successfully completed.\n\nAnd the last notice. Edward, could you add *.iml files to gitignore. I use Idea as IDE and it creates all those files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-01T09:45:53.083+0000","updated":"2012-03-01T09:45:53.083+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13262330","id":"13262330","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"body":"I will take take a look at this. You should mark as match available when you are ready for review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-26T02:36:11.002+0000","updated":"2012-04-26T02:36:11.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13283808","id":"13283808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"body":"+1 tests pass will commit","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-25T23:17:02.056+0000","updated":"2012-05-25T23:17:02.056+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13283924","id":"13283924","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #1450 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1450/])\n    HIVE-2372 Argument list too long when streaming (Sergey Tryuber via egc) (Revision 1342841)\n\n     Result = FAILURE\necapriolo : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1342841\nFiles : \n* /hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n* /hive/trunk/conf/hive-default.xml.template\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ScriptOperator.java\n* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestOperators.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-26T06:49:15.437+0000","updated":"2012-05-26T06:49:15.437+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13547980","id":"13547980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])\n    HIVE-2372 Argument list too long when streaming (Sergey Tryuber via egc) (Revision 1342841)\n\n     Result = ABORTED\necapriolo : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1342841\nFiles : \n* /hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n* /hive/trunk/conf/hive-default.xml.template\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ScriptOperator.java\n* /hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TestOperators.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-09T10:23:50.008+0000","updated":"2013-01-09T10:23:50.008+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/13550088","id":"13550088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-10T19:53:20.241+0000","updated":"2013-01-10T19:53:20.241+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/14002734","id":"14002734","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rharris","name":"rharris","key":"rharris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ryan Harris","active":true,"timeZone":"America/Los_Angeles"},"body":"While creating a table with a large number of columns, a large hive variable is temporarily created using SET, the variable contains the columns and column descriptions.\n\nA CREATE TABLE statement then successfully uses that large variable.\n\nAfter successfully creating the table the hive script attempts to load data into the table using a TRANSFORM script, triggering the error:\njava.io.IOException: error=7, Argument list too long\n\nSince the variable is no longer used after the table is created, the hive script was updated to SET the large variable to empty.\nAfter setting the variable empty the second statement in the hive script ran fine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rharris","name":"rharris","key":"rharris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ryan Harris","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-20T03:05:58.593+0000","updated":"2014-05-20T03:05:58.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/14027993","id":"14027993","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"body":"Hi Ryan,\n\nYes, your issue is very related. Hive passes properties to TRANSFORM script via environment variables. In the scope of this ticket I've shortened only environment variable which stores information about partitions.\n\nIn case of user-defined variables (via SET statement), I'm not even sure that approach to shorten them is correct. May be it would be better just to fail with error before map-reduce job execution and ask user to unset the variable (as you did). But it is quite hard to judge what is length limitation, because it depends on OS (even in my patch, as I remember, I hardcoded the length and now it seems to be not the best choice). As an alternative, Hive can print a warning, but continue the execution. \n\nAnyway, this issue had been closed so much time ago (and applied patch really solves the problem in issue description) that I think it would be better to create a new one and lead all the discussion there. Don't you mind to do it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergeant","name":"sergeant","key":"sergeant","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Tryuber","active":true,"timeZone":"Etc/UTC"},"created":"2014-06-11T16:42:51.162+0000","updated":"2014-06-11T16:42:51.162+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12518679/comment/14028312","id":"14028312","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rharris","name":"rharris","key":"rharris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ryan Harris","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Sergey, HIVE-7218 created for continued tracking","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rharris","name":"rharris","key":"rharris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ryan Harris","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-11T19:53:40.082+0000","updated":"2014-06-11T19:53:40.082+0000"}],"maxResults":32,"total":32,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2372/votes","votes":4,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02uhz:"}}