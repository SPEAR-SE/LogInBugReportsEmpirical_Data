{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12647890","self":"https://issues.apache.org/jira/rest/api/2/issue/12647890","key":"HIVE-4569","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2013-05-22T12:43:41.499+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Aug 17 00:02:42 UTC 2013","customfield_12310420":"328246","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4569/watchers","watchCount":14,"isWatching":false},"created":"2013-05-16T06:17:20.763+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12369536","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369536","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12647892","key":"HIVE-4570","self":"https://issues.apache.org/jira/rest/api/2/issue/12647892","fields":{"summary":"More information to user on GetOperationStatus in Hive Server2 when query is still executing","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12369534","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369534","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12649545","key":"HIVE-4617","self":"https://issues.apache.org/jira/rest/api/2/issue/12649545","fields":{"summary":"Asynchronous execution in HiveServer2 to run a query in non-blocking mode","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12372538","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12372538","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12659475","key":"HIVE-4923","self":"https://issues.apache.org/jira/rest/api/2/issue/12659475","fields":{"summary":"Provide compile + run method for HiveServer2","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12369530","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369530","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12647892","key":"HIVE-4570","self":"https://issues.apache.org/jira/rest/api/2/issue/12647892","fields":{"summary":"More information to user on GetOperationStatus in Hive Server2 when query is still executing","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12369529","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369529","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12641741","key":"HIVE-4321","self":"https://issues.apache.org/jira/rest/api/2/issue/12641741","fields":{"summary":"Add Compile/Execute support to Hive Server","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12369533","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369533","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12649545","key":"HIVE-4617","self":"https://issues.apache.org/jira/rest/api/2/issue/12649545","fields":{"summary":"Asynchronous execution in HiveServer2 to run a query in non-blocking mode","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-08-17T00:02:42.694+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12320408","id":"12320408","name":"HiveServer2","description":"Tracks issues related to HiveServer2"}],"timeoriginalestimate":null,"description":"It would nice to have GetQueryPlan as thrift api. I do not see GetQueryPlan api available in HiveServer2, though the wiki https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Thrift+API contains, not sure why it was not added.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12584436","id":"12584436","filename":"git-4569.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-05-23T04:01:30.912+0000","size":102515,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12584436/git-4569.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12584439","id":"12584439","filename":"HIVE-4569.D10887.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-23T04:53:21.168+0000","size":99209,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12584439/HIVE-4569.D10887.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12589384","id":"12589384","filename":"HIVE-4569.D11469.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-06-24T09:25:21.063+0000","size":195721,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12589384/HIVE-4569.D11469.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12597893","id":"12597893","filename":"HIVE-4569.D12231.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-08-14T06:12:49.647+0000","size":47118,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12597893/HIVE-4569.D12231.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12597895","id":"12597895","filename":"HIVE-4569.D12237.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-08-14T06:20:48.983+0000","size":459921,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12597895/HIVE-4569.D12237.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12598373","id":"12598373","filename":"HIVE-4569.D12333.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-08-16T06:35:49.947+0000","size":507949,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12598373/HIVE-4569.D12333.1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"328590","customfield_12312823":null,"summary":"GetQueryPlan api in Hive Server2","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13664059","id":"13664059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"Added new thrift API - GetQueryPlan to return query plan of a SQL query.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-05-22T12:43:41.499+0000","updated":"2013-05-22T12:43:41.499+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13664636","id":"13664636","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I do not see GetQueryPlan api available in HiveServer2, though the wiki https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Thrift+API contains, not sure why it was not added.\n\nIt was not added because it became clear during implementation of HiveServer2 that it was a bad idea to extend (i.e. depend on) any of the existing legacy Hive Thrift APIs. We also were narrowly focused on supporting JDBC/ODBC, and neither of these APIs provide explicit support for retrieving the execution plan.\n\n@Jaideep: I think it would be a good idea to post some notes about how you plan to modify the HS2 Thrift API and get feedback before spending time doing the implementation work.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-05-22T22:51:33.830+0000","updated":"2013-05-22T22:51:33.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13664832","id":"13664832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"Attaching patch somehow it got skipped earlier.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-05-23T04:01:30.915+0000","updated":"2013-05-23T04:01:30.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13664836","id":"13664836","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"@Carl: This change will not affect JDBC/ODBC clients. Currently clients using Thrift have no way to get query plan, which is why we wanted to add this.\n\nHere are the changes proposed:\n\n\n# Add GetQueryPlan with arguments same as ExecuteStatement -\n   {code}TGetQueryPlanResp GetQueryPlan(1:TExecuteStatementReq req);{code}\n# Run a SQLOperation for the request, calling Driver.compile with the statement and return the plan object. Throw HiveSQLException with return code of compile if it fails.\n# New response type for the above call -\n{code}\nstruct TGetQueryPlanResp {\n\t1: required TStatus status\n\t// Queryplan\n\t2: required queryplan.Query plan\n}\n{code}\n\n\nWe'll have to include queryplan.thrift in TCLIService.thrift for the return type\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-05-23T04:12:05.180+0000","updated":"2013-05-23T04:12:05.180+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13664841","id":"13664841","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"Please post a review request on reviewboard or phabricator.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-05-23T04:24:10.054+0000","updated":"2013-05-23T04:24:10.054+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13664862","id":"13664862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jaideepdhok requested code review of \"HIVE-4569 [jira] GetQueryPlan api in Hive Server2\".\n\nReviewers: JIRA\n\nHIVE-4569\n\nIt would nice to have GetQueryPlan as thrift api. I do not see GetQueryPlan api available in HiveServer2, though the wiki https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Thrift+API contains, not sure why it was not added.\n\nTEST PLAN\n  Added unit test CLIServiceTest.testGetQueryPlan\n\nREVISION DETAIL\n  https://reviews.facebook.net/D10887\n\nAFFECTED FILES\n  service/if/TCLIService.thrift\n  service/src/gen/thrift/gen-cpp/TCLIService.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService.h\n  service/src/gen/thrift/gen-cpp/TCLIService_server.skeleton.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService_types.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService_types.h\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TCLIService.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetQueryPlanResp.java\n  service/src/gen/thrift/gen-php/TCLIService.php\n  service/src/gen/thrift/gen-py/TCLIService/TCLIService-remote\n  service/src/gen/thrift/gen-py/TCLIService/TCLIService.py\n  service/src/gen/thrift/gen-py/TCLIService/ttypes.py\n  service/src/gen/thrift/gen-rb/t_c_l_i_service.rb\n  service/src/gen/thrift/gen-rb/t_c_l_i_service_types.rb\n  service/src/java/org/apache/hive/service/cli/CLIService.java\n  service/src/java/org/apache/hive/service/cli/CLIServiceClient.java\n  service/src/java/org/apache/hive/service/cli/EmbeddedCLIServiceClient.java\n  service/src/java/org/apache/hive/service/cli/ICLIService.java\n  service/src/java/org/apache/hive/service/cli/operation/SQLOperation.java\n  service/src/java/org/apache/hive/service/cli/session/HiveSession.java\n  service/src/java/org/apache/hive/service/cli/session/HiveSessionImpl.java\n  service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIService.java\n  service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIServiceClient.java\n  service/src/test/org/apache/hive/service/cli/CLIServiceTest.java\n\nMANAGE HERALD RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/26055/\n\nTo: JIRA, jaideepdhok\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-05-23T04:53:21.110+0000","updated":"2013-05-23T04:53:21.110+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13668072","id":"13668072","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"Work from HIVE-4570 and HIVE-4617 have been moved to this issue.\n\nTo restate the scope of the issue, here are the proposed changes:\n# Add GetQueryPlan Thrift API. This will return plan object containing Stage and Task information for the query. This call will not run the query.\n# A way to run query asynchronously so that query progress can be monitored without waiting them to complete.\n# Extend OperationState struct returned by GetOperationState to include more information like job IDs launched for sub-tasks, query progress indicator.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-05-28T04:11:18.532+0000","updated":"2013-05-28T04:11:18.532+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13668326","id":"13668326","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"I will create a new patch with combined changes for query progress and query plan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-05-28T14:13:42.478+0000","updated":"2013-05-28T14:13:42.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13675698","id":"13675698","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"Update on the work done so far -\n\n# h5. Added getQueryPlan API with Thrift\n# h5. Added support for non-blocking queries.\n## Right now I have done this by passing a boolean flag while calling executeStatement\n## If the flag is set to true, query runs in non-blocking mode. The flag defaults to false.\n## I've implemented this by adding a fixed size thread pool in the OperationManager, for running non-blocking operations. A reference to the future is kept in the operation, so that it can be cancelled.\n## Once the query is running in the background, users can poll status using GetOperationStatus.\n## Users can cancel the query by calling CancelOperation\n# h5. Additions in GetOperationStatus\n## OperationManager calls operation.getTaskStatuses(), Each operation can override this method to customize reporting\n## SQLOperation returns the task statuses by calling getTaskStatuses() on the current driver.\n## Driver reports task statuses by iterating through all tasks in the plan\n## Changes in HS2 thrift API -\n{code}\n// GetOperationStatus()\n//\n// Get the status of an operation running on the server.\nstruct TGetOperationStatusReq {\n  // Session to run this request against\n  1: required TOperationHandle operationHandle\n}\n\n// State of a sub task in an operation\nenum TTaskState {\n  // The task has been initialized\n  INITIALIZED_STATE,\n\n  // Driver is currently running the task\n  RUNNING_STATE,\n\n  // Task is completed\n  FINISHED_STATE,\n\n  // Task is queued in the driver\n  QUEUED_STATE,\n  \n  // State is unkown\n  UNKOWN_STATE\n}\n\n// Status of a sub task in an operation\nstruct TTaskStatus {\n // Task ID\n 1: required string taskId\n // External ID for this task, For example MapRedTask can return job ID of the Hadoop job\n 2: optional string externalHandle\n // Current state of the task as seen by driver\n 3: required TTaskState state\n}\n\nstruct TGetOperationStatusResp {\n  1: required TStatus status\n  // State of the whole operation\n  2: optional TOperationState operationState\n  // List of statuses of sub tasks\n  3: optional list<TTaskStatus> taskStatuses\n}\n{code}\n\n\nh5. Things pending as of now\n# If the Task runs in a sub-process, then external handle (job ID) is returned as null.\n        \n        \n        ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-06-05T08:19:15.234+0000","updated":"2013-06-05T08:19:15.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13681858","id":"13681858","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Right now I have done this by passing a boolean flag while calling executeStatement\n[~jaideepdhok] I assume this is going to be an optional field, and that adding optional fields to thrift argument would keep the api backwards compatible to old clients that don't set this field. Can you please confirm ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-13T02:35:01.431+0000","updated":"2013-06-13T02:35:01.431+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13681905","id":"13681905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"[~thejas] It's an optional field in the Thrift request object for execute statement.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-06-13T04:27:48.570+0000","updated":"2013-06-13T04:27:48.570+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13691831","id":"13691831","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jaideepdhok requested code review of \"HIVE-4569 [jira] GetQueryPlan api in Hive Server2\".\n\nReviewers: JIRA\n\nHIVE-4569\n\nIt would nice to have GetQueryPlan as thrift api. I do not see GetQueryPlan api available in HiveServer2, though the wiki https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Thrift+API contains, not sure why it was not added.\n\nTEST PLAN\n  Unit tests included\n\nREVISION DETAIL\n  https://reviews.facebook.net/D11469\n\nAFFECTED FILES\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/java/org/apache/hadoop/hive/ql/Driver.java\n  ql/src/java/org/apache/hadoop/hive/ql/TaskStatus.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java\n  service/if/TCLIService.thrift\n  service/src/gen/thrift/gen-cpp/TCLIService.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService.h\n  service/src/gen/thrift/gen-cpp/TCLIService_server.skeleton.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService_types.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService_types.h\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TCLIService.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TExecuteStatementReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetOperationStatusResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetQueryPlanResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TTaskState.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TTaskStatus.java\n  service/src/gen/thrift/gen-php/TCLIService.php\n  service/src/gen/thrift/gen-py/TCLIService/TCLIService-remote\n  service/src/gen/thrift/gen-py/TCLIService/TCLIService.py\n  service/src/gen/thrift/gen-py/TCLIService/ttypes.py\n  service/src/gen/thrift/gen-rb/t_c_l_i_service.rb\n  service/src/gen/thrift/gen-rb/t_c_l_i_service_types.rb\n  service/src/java/org/apache/hive/service/cli/CLIService.java\n  service/src/java/org/apache/hive/service/cli/CLIServiceClient.java\n  service/src/java/org/apache/hive/service/cli/EmbeddedCLIServiceClient.java\n  service/src/java/org/apache/hive/service/cli/ICLIService.java\n  service/src/java/org/apache/hive/service/cli/operation/ExecuteStatementOperation.java\n  service/src/java/org/apache/hive/service/cli/operation/Operation.java\n  service/src/java/org/apache/hive/service/cli/operation/OperationManager.java\n  service/src/java/org/apache/hive/service/cli/operation/SQLOperation.java\n  service/src/java/org/apache/hive/service/cli/session/HiveSession.java\n  service/src/java/org/apache/hive/service/cli/session/HiveSessionImpl.java\n  service/src/java/org/apache/hive/service/cli/session/SessionManager.java\n  service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIService.java\n  service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIServiceClient.java\n  service/src/test/org/apache/hive/service/cli/CLIServiceTest.java\n\nMANAGE HERALD RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/27165/\n\nTo: JIRA, jaideepdhok\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-06-24T09:25:20.980+0000","updated":"2013-06-24T09:25:20.980+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13691935","id":"13691935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"@Jaideep: Thanks for posting an updated patch. I plan to spend some more time tonight looking this over closely, but in the meantime I wanted to raise one high-level concern. I think the HS2 Thrift API should be as self-contained as possible. In particular I don't think it's a good idea to inherit functionality from any of the quasi-public Thrift APIs that already exist (e.g. queryplan.thrift) for the following reasons:\n\n* We version the HS2 Thrift API in order to maintain backward compatibility with older clients, and I'm worried that people will forget to bump the version number in TCLIService.thrift when they make a change in queryplan.thrift.\n* One of the original design goals of HS2 was to decouple the network serialization layer from the service layer in the interest of eventually being able to easily support multiple different serialization formats (e.g. Protobufs, Avro, Thrift, etc). I think depending on queryplan.thrift will make it harder to do this.\n* At the moment TCLIService.thrift doesn't expose anything that ties it directly to Hive, and I'd like to keep it that way. For example, there's no reason why we couldn't also embed the Pig language runtime in HS2 and expose it through the HS2 API (see the [AccessServer proposal|https://cwiki.apache.org/confluence/display/Hive/AccessServer+Design+Proposal] for more details). Tying the new QueryPlan RPC to queryplan.thrift will make this harder to do.\n\nInstead of depending on queryplan.thrift I'd like to propose that TGetQueryPlanResp return a JSON or XML encoded version of the queryplan.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-24T12:39:15.514+0000","updated":"2013-06-24T12:39:15.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13692731","id":"13692731","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"[~cwsteinbach] Thanks for the reply. I was not aware of AccessServer. If we don't need a dependency on queryplan.thrift, then I guess it would make sense to use XML encoding, since there is already code to serialize/deserialize query plan to/from XML.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-06-25T04:25:10.796+0000","updated":"2013-06-25T04:25:10.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13692748","id":"13692748","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jaideepdhok] Thrift also supports two different types of JSON serialization: TJSONProtocol and TSimpleJSONProtcol. I have no preference either way, but I've noticed that JSON seems to be more popular than XML these days.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-25T05:05:07.972+0000","updated":"2013-06-25T05:05:07.972+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13694605","id":"13694605","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"[~cwsteinbach] Do you have any comments on the rest of the patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-06-27T10:40:56.463+0000","updated":"2013-06-27T10:40:56.463+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13695920","id":"13695920","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"cwsteinbach has commented on the revision \"HIVE-4569 [jira] GetQueryPlan api in Hive Server2\".\n\nINLINE COMMENTS\n  ql/src/java/org/apache/hadoop/hive/ql/TaskStatus.java:1 Missing ASF license header.\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExecDriver.java:1019 This looks like a debug statement. Should it be removed?\n  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java:95 Can you add some comments here explaining what each one of these states actually means? Also, do we need an UNKNOWN state? I included one in the Thrift IDL OperationState, but in retrospect that was probably a mistake.\n  service/if/TCLIService.thrift:34 As discussed earlier we shouldn't add this dependency to the HS2 API. Please remove it and return the Task information in JSON or XML.\n  service/if/TCLIService.thrift:41 We need to bump the version number since this patch extends the HS2 API with new functionality. Can you also please add a comment here briefly summarize what was added in the new version?\n  service/if/TCLIService.thrift:594 Thrift allows you specify default values for optional fields. I think we should set this value to 'false' by default.\n  service/if/TCLIService.thrift:866 Just want to double-check that TTaskState and TTaskStatus will be removed since the plan state will be serialized as JSON or XML, right?\n  service/if/TCLIService.thrift:1003 Where is TGetQueryPlanReq? The comments at the top stipulate that every RPC has it's own req/resp message pair.\n  service/if/TCLIService.thrift:1006 Just double-checking that this will be changed to a string.\n  service/if/TCLIService.thrift:1043 Please don't overload TExecuteStatementReq.\n  service/src/java/org/apache/hive/service/cli/CLIService.java:149 Thrift makes it easy to add additional optional parameters without breaking backward compatibility, but not Java. I'd recommend creating a new executeStatementAsync call to ICLIService (and here) instead of modifying the method signature. Also, that probably indicates that we should add a new complimentary RPC to the HS2 Thrift IDL instead of using adding an optional parameter to ExecuteStatement just to keep these things in sync.\n  service/src/java/org/apache/hive/service/cli/CLIService.java:318 s/:getQueryPlan/: getQueryPlan/\n  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java:367 I don't think this method is thread-safe. I recommend replacing the four boolean state variables (started, initialized, isdone, queued, wth??) with the single TaskState enum you added and make sure that all access to this state variable is synchronized.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D11469\n\nTo: JIRA, jaideepdhok\nCc: cwsteinbach\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-06-28T23:35:20.358+0000","updated":"2013-06-28T23:35:20.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13695923","id":"13695923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jaideepdhok] I made it through half the patch and left comments on phabricator. I'll aim to get through the rest sometime this weekend. Sorry for the delay. Also, I just wanted to say thanks for tackling this problem. Support for async execution was a big hole in the API and I'm excited that it's going to be fixed soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-28T23:37:07.636+0000","updated":"2013-06-28T23:37:07.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13699773","id":"13699773","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"{quote}\nThrift makes it easy to add additional optional parameters without breaking backward compatibility, but not Java. I'd recommend creating a new executeStatementAsync call to ICLIService (and here) instead of modifying the method signature. Also, that probably indicates that we should add a new complimentary RPC to the HS2 Thrift IDL instead of using adding an optional parameter to ExecuteStatement just to keep these things in sync.\n{quote}\n\nDo we need explicit new request and response objects for both executeStatement and executeStatementAsync calls? I think the same request call should do?\n\nAlso, I found in the code that conf overlay is not actually being applied before executing an operation. I suppose there should be another JIRA for that.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-07-04T05:04:48.258+0000","updated":"2013-07-04T05:04:48.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13699775","id":"13699775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"bq. I think the same request call should do?\nSorry, I meant the same request and response objects used in ExecuteStatement at the moment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-07-04T05:07:19.132+0000","updated":"2013-07-04T05:07:19.132+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13736885","id":"13736885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"body":"Although {{executeStatement}} is implemented synchronously in Hive, was it meant to be synchronous from the outset? The comment in the Thrift definition suggests otherwise:\n\n{code}\n// ExecuteStatement()\n//\n// Execute a statement.\n// The returned OperationHandle can be used to check on the\n// status of the statement, and to fetch results once the\n// statement has finished executing.\n{code}\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-12T14:07:59.025+0000","updated":"2013-08-12T14:07:59.025+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13738575","id":"13738575","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"body":"It seems that this JIRA is handling two different use cases: \n\n1. Implement ExecuteStatement asynchronously (and the related GetOperationStatus api)\n2. Implement GetQueryPlan api.\n\nI see that these are fairly independent features. How about we split it into 2 JIRAS to have independent focussed discussion?\n\nAlso, I can volunteer to continue the work.\nThanks. \n  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-13T17:58:03.073+0000","updated":"2013-08-13T17:58:03.073+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739271","id":"13739271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jaideepdhok requested code review of \"Changes based on previous code review HIVE-4569 [jira] GetQueryPlan api in Hive Server2\".\n\nReviewers: JIRA\n\nHIVE-4569 changes to service package\n\nIt would nice to have GetQueryPlan as thrift api. I do not see GetQueryPlan api available in HiveServer2, though the wiki https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Thrift+API contains, not sure why it was not added.\n\nTEST PLAN\n  Unit tests included\n\nREVISION DETAIL\n  https://reviews.facebook.net/D12231\n\nAFFECTED FILES\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/java/org/apache/hadoop/hive/ql/Driver.java\n  ql/src/java/org/apache/hadoop/hive/ql/QueryPlan.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/mr/MapRedTask.java\n  service/if/TCLIService.thrift\n  service/src/java/org/apache/hive/service/cli/CLIService.java\n  service/src/java/org/apache/hive/service/cli/CLIServiceClient.java\n  service/src/java/org/apache/hive/service/cli/EmbeddedCLIServiceClient.java\n  service/src/java/org/apache/hive/service/cli/ICLIService.java\n  service/src/java/org/apache/hive/service/cli/operation/ExecuteStatementOperation.java\n  service/src/java/org/apache/hive/service/cli/operation/Operation.java\n  service/src/java/org/apache/hive/service/cli/operation/OperationManager.java\n  service/src/java/org/apache/hive/service/cli/operation/SQLOperation.java\n  service/src/java/org/apache/hive/service/cli/session/HiveSession.java\n  service/src/java/org/apache/hive/service/cli/session/HiveSessionImpl.java\n  service/src/java/org/apache/hive/service/cli/session/SessionManager.java\n  service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIService.java\n  service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIServiceClient.java\n  service/src/test/org/apache/hive/service/cli/CLIServiceTest.java\n\nMANAGE HERALD RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/29235/\n\nTo: JIRA, jaideepdhok\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-08-14T06:12:49.559+0000","updated":"2013-08-14T06:12:49.559+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739274","id":"13739274","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jaideepdhok requested code review of \"HIVE-4569 [jira] GetQueryPlan api in Hive Server2 changes post last review\".\n\nReviewers: JIRA\n\nChanges for HIVE-4569 post review\n\nIt would nice to have GetQueryPlan as thrift api. I do not see GetQueryPlan api available in HiveServer2, though the wiki https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Thrift+API contains, not sure why it was not added.\n\nTEST PLAN\n  unit tests included\n\nREVISION DETAIL\n  https://reviews.facebook.net/D12237\n\nAFFECTED FILES\n  ql/src/java/org/apache/hadoop/hive/ql/TaskStatus.java\n  service/src/gen/thrift/gen-cpp/TCLIService.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService.h\n  service/src/gen/thrift/gen-cpp/TCLIService_server.skeleton.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService_types.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService_types.h\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TCLIService.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TExecuteStatementAsyncReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TExecuteStatementReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TExecuteStatementAsyncResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetOperationStatusResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetQueryPlanReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetQueryPlanResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetTablesReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TOpenSessionReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TOpenSessionResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TStructTypeEntry.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TUnionTypeEntry.java\n  service/src/gen/thrift/gen-php/TCLIService.php\n  service/src/gen/thrift/gen-py/TCLIService/TCLIService-remote\n  service/src/gen/thrift/gen-py/TCLIService/TCLIService.py\n  service/src/gen/thrift/gen-py/TCLIService/ttypes.py\n  service/src/gen/thrift/gen-py/hive_service/ThriftHive-remote\n  service/src/gen/thrift/gen-rb/t_c_l_i_service.rb\n  service/src/gen/thrift/gen-rb/t_c_l_i_service_types.rb\n  service/src/java/org/apache/hive/service/cli/OperationStatus.java\n\nMANAGE HERALD RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/29241/\n\nTo: JIRA, jaideepdhok\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-08-14T06:20:48.605+0000","updated":"2013-08-14T06:20:48.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739276","id":"13739276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"[~vgumashta] Initially it was split into three JIRAs, but other people suggested that it would be easier to track progress in a single JIRA.\n\nI've completed most of the changes, and have updated based on last review by [~cwsteinbach]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-08-14T06:22:37.655+0000","updated":"2013-08-14T06:22:37.655+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739279","id":"13739279","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"Sorry for the duplicate review request. Please refer to the last one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-08-14T06:24:11.749+0000","updated":"2013-08-14T06:24:11.749+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739334","id":"13739334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jaideepdhok] The patch on phabricator links look incomplete, for example it is missing service/if/TCLIService.thrift. Can you update the patch in the phabricator link with original review comments (https://reviews.facebook.net/D11469) ? That way it is easier to track changes across patches.\nHaving a new phabricator link for each patch iteration makes it difficult to follow the changes between patches.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-14T07:11:22.498+0000","updated":"2013-08-14T07:11:22.498+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739363","id":"13739363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jaideepdhok] [~cwsteinbach] Should we keep the api simple (small) by just making the current execute function asynchronous instead of adding an additional execute function in the api ? I think [~henryr] has a good point that it was always documented to be asynchronous (it just happened that it always was so late in returning the call that the operation was finished :) ).\n\nAlso, I think it makes sense to make the GetResultSetMetadata and FetchResults api blocking until operation finishes, instead of throwing an error if status is not FINISHED. This will also help to prevent breakage of any user code that was written with the assumption that execute is blocking.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-14T07:37:32.429+0000","updated":"2013-08-14T07:37:32.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739385","id":"13739385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"bq. Having a new phabricator link for each patch iteration makes it difficult to follow the changes between patches.\n[~thejas]\nLooks like the changes got split into two requests.\nUnfortunately I am unable to update the previous revision, as I had lost the previous arc commit. I will put up a new  request, and keep updating it if there are further comments?\n\nbq.  Should we keep the api simple (small) by just making the current execute function asynchronous instead of adding an additional execute function in the api ?\n\n[~thejas] I think making executeStatement async by default may break users' expectations since it's a blocking call. [~cwsteinbach] Had suggested earlier to create two separate calls executeStatement and executeStatementAsync so that the API is easier to understand. I agree with that approach. If we have two different calls, then users can pick one based on their need.\n\nFor getting result set in case of async the flow would be - ExecuteStatementAsync, GetOperationStatus (until query completes), then fetch result set. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-08-14T08:07:07.249+0000","updated":"2013-08-14T08:07:07.249+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739420","id":"13739420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~thejas] I think you mean by making GetResultSetMetadata and FetchResults API blocking, we can change the executeStatement to async by default but at the same time not break any user code? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-14T08:44:07.773+0000","updated":"2013-08-14T08:44:07.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13739435","id":"13739435","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"I think it makes sense to have two apis as JDBC drivers can call one with sync and other users interested in async can call async api. Though the documentation of execute() has to be changed to say that it is executed synchronously.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-08-14T09:07:14.903+0000","updated":"2013-08-14T09:07:14.903+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13740420","id":"13740420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jaideep@research.iiit.ac.in] [~amareshwari] I have some concern regarding the GetQueryPlan api that we are exposing regarding backward compatibility. What could be the use case for returning the query plan? And how will it be consumed by the client? Making it public means that any change to the query plan in future will break the consumer code. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-14T23:39:14.898+0000","updated":"2013-08-14T23:39:14.898+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13740760","id":"13740760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I will put up a new request, and keep updating it if there are further comments? \nSounds good. Looking forward to it. And thanks for working on this!\n\nRegarding [~vaibhavgumashta]'s comment about GetQueryPlan backward compatibility. We need to examine what guarantees can be given regarding backward compatibility of the json string queryplan. Is the thrift json structure stable if used by generic json parsers ? I think we should at least state that the operator types and stage types can change across versions.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T06:41:19.473+0000","updated":"2013-08-15T06:41:19.473+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13740787","id":"13740787","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"Here are some comments about the async execution api changes from a jdbc/odbc driver implementation perspective -\n\nh3. jdbc/odbc requirements:\n\nI think the asynchronous execution api is going to be very useful for jdbc/odbc as well. For a long running query there are higher chances of interruptions in the network connection to HS2. This is specially true for HS2 over http (HIVE-4763), where it might pass through http proxy servers.\n\nThe downside of the async call is that the *dbc client moves to a pull model instead of what was like a push equivalent. It will have to poll with some sleep in between the poll requests to avoid too much load on the server. But this sleep can cause delays in getting notified when the execution is finished. So it will be useful to have support for long poll in such a case to simulate a push (http://en.wikipedia.org/wiki/Push_technology#Long_polling).\n\nSo that clients can tell the server that it is actually interested in doing a long poll, we need support for it in the HS2 api.\n\nAnother difference for jdbc/odbc requirement from GetOperationStatus api is that it won't make use of the status of each task. Only the completion of the query execution matters from jdbc/odbc perspective.\nSo for odbc/jdbc the long poll should return before a 'long poll timeout' only if the query has completed.\n\nh3. Question about api:\nWhile the actual implementation of long poll can be in a different followup jira, I thought it will be useful to discuss if this should have an impact on the async api changes.\nHow should we meet this odbc/jdbc need ? If we follow the pattern we have followed with async execute, this would result in a new GetOperationStatusLongPoll call.\n\nIt doesn't look like this requirement will have impact on changes planned in this jira, but I just wanted to put my thoughts out incase there were other opinions.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T07:44:25.626+0000","updated":"2013-08-15T07:44:25.626+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13740808","id":"13740808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I think we should at least state that the operator types and stage types can change across versions.\n\nGood luck with that. As soon as you have a couple third-party applications that depend on this serialization format you will be locked in regardless of how many warnings you place in the code.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T08:35:03.737+0000","updated":"2013-08-15T08:35:03.737+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13740809","id":"13740809","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jaideepdhok] If I call GetQueryPlan for a statement x, and then subsequently call ExecuteStatement on the same statement, is it guaranteed that ExecuteStatement will always use the same plan that was returned earlier by GetQueryPlan? The names of the functions seem to imply this, but the comments in TCLIService.thrift don't stipulate that ExecuteStatement will use the plan generated by the previous GetQueryPlan call instead of recompiling the statement and possibly creating a different plan. Adding a PrepareStatement call (e.g. PrepareStatement[, GetQueryPlan], ExecuteStatement) is one way of resolving this ambiguity, and at the same time it will help to maintain the close alignment between the HS2 API and ODBC/JDBC.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T08:35:10.522+0000","updated":"2013-08-15T08:35:10.522+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13740811","id":"13740811","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Thejas M Nair I think making executeStatement async by default may break users' expectations since it's a blocking call. Carl Steinbach Had suggested earlier to create two separate calls executeStatement and executeStatementAsync so that the API is easier to understand. I agree with that approach. If we have two different calls, then users can pick one based on their need.\n\nIt's possible to overload ExecuteStatement to support both synchronous and asynchronous modes without breaking backward compatibility by adding an optional boolean isAsync flag to the request message and setting the default value to false. Whether or not this makes more sense than the current approach hinges largely on how many more optional variables we expect to add to the ExecuteStatement[Async] request messages in the future. If we have two functions then we'll need to make the same changes in two different places.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T08:45:27.299+0000","updated":"2013-08-15T08:45:27.299+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741259","id":"13741259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Good luck with that. As soon as you have a couple third-party applications that depend on this serialization format you will be locked in regardless of how many warnings you place in the code.\nYes, I agree that risk is very real. Do we want to put these commitments on the still young hive ? Trying to keep this api backward compatible can be a big burden for hive. Should we go for something more minimalistic instead ? Just a compile() function instead of getQueryPlan() like what was put forward in HIVE-4321 ?\n\nbq. It's possible to overload ExecuteStatement to support both synchronous and asynchronous modes without breaking backward compatibility by adding an optional boolean isAsync flag to the request message and setting the default value to false.\nI am ok with having different functions for this. But I think function overloading is a more natural way of doing this. Deciding whether it should be async or not based on a parameter seems more natural way of programming, compared to using different functions for that. We can either have one function with default value or have two with same name. ie, Instead of ExecuteStatementAsync, I think having a ExecuteStatement with additional isAsync parameter is more clean. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T17:49:34.349+0000","updated":"2013-08-15T17:49:34.349+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741298","id":"13741298","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~cwsteinbach] [~thejas] With respect to overloading ExecuteStatement, I think the previous patch by [~jaideep@research.iiit.ac.in] was probably doing that. But there was a suggestion in the rb that overloading ExecuteStatement in the thrift API may not correspond to overloading in CLIService/ICLIService. Are you suggesting that the thrift api has just ExecuteStatement, and based on whether the async flag is set to true/false in the corresponding TExecuteStatementReq, we branch off to using ICLIService#executeStatementAsync or ICLIService#executeStatement?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T18:19:34.003+0000","updated":"2013-08-15T18:19:34.003+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741324","id":"13741324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Whether or not this makes more sense than the current approach hinges largely on how many more optional variables we expect to add to the ExecuteStatement[Async] request messages in the future.\nI think it is reasonable to expect the unexpected, ie expect more optional parameters coming up in future.\n\nThis is what I am thinking. [~cwsteinbach] Please let me know if you think this is reasonable. \n1. In TCLDriver.thrift, as in the original patch, add \"optional bool runAsync\" to TExecuteStatementReq \n2. In ICLIService (and its implementation CLIService), introduce a executeAsync function that gets called if runAsync==true.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T18:44:41.031+0000","updated":"2013-08-15T18:44:41.031+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741335","id":"13741335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~thejas] Only addition I would make is setting runAsync to false by default in TExecuteStatementReq.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-15T18:49:00.286+0000","updated":"2013-08-15T18:49:00.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741823","id":"13741823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"bq. [~vgumashta] What could be the use case for returning the query plan? And how will it be consumed by the client? Making it public means that any change to the query plan in future will break the consumer code.\nIt was outlined in the HS2 spec, but not implemented. Having a query plan is useful for tracking query progress. We have another use case where we want to access query plan through code, but currently there's no way to do that.\n\nIf you want to guard against changes to query plan code, then plan object needs to be declared at the thrift layer, and implementation has to convert between internal query plan (ql layer) to thrift query plan (and vice versa), like it is being done for data types and operation states.\n\nbq. [~thejas] Is the thrift json structure stable if used by generic json parsers ?  I think we should at least state that the operator types and stage types can change across versions.\n\nYou need the Thrift JSON parsers to encode/decode the JSON query plan into the corresponding Java object.\n\nbq. [~cwsteinbach] If I call GetQueryPlan for a statement x, and then subsequently call ExecuteStatement on the same statement, is it guaranteed that ExecuteStatement will always use the same plan that was returned earlier by GetQueryPlan? \nYes, unless configuration was altered between the two calls through SET operations, or the conf overlay is different.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-08-16T02:33:30.910+0000","updated":"2013-08-16T02:33:30.910+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741828","id":"13741828","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"[~thejas] I think having two calls with different names, ExecuteStatement and ExecuteStatementAsync will be less confusing for the user.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-08-16T02:38:05.598+0000","updated":"2013-08-16T02:38:05.598+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741952","id":"13741952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Seems like there is a general consensus that async execute statement is a good idea. So, lets unblock it and get that part of the patch in. In the meanwhile we can continue to discuss the way to add getQueryPlan. [~jaideepdhok] I understand we have went back n forth on doing these two issues in one patch Vs multiple, but looks like thats a good way to make progress. If you agree, can you put up a patch containing async execute statement.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-16T05:47:55.476+0000","updated":"2013-08-16T05:47:55.476+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741977","id":"13741977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jaideepdhok requested code review of \"HIVE-4569 [jira] GetQueryPlan api in Hive Server2\".\n\nReviewers: JIRA\n\nHIVE-4569 commit post review\n\nIt would nice to have GetQueryPlan as thrift api. I do not see GetQueryPlan api available in HiveServer2, though the wiki https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Thrift+API contains, not sure why it was not added.\n\nTEST PLAN\n  Unit Tests for async execute and get query plan\n\nREVISION DETAIL\n  https://reviews.facebook.net/D12333\n\nAFFECTED FILES\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/java/org/apache/hadoop/hive/ql/Driver.java\n  ql/src/java/org/apache/hadoop/hive/ql/QueryPlan.java\n  ql/src/java/org/apache/hadoop/hive/ql/TaskStatus.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/mr/ExecDriver.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/mr/MapRedTask.java\n  service/if/TCLIService.thrift\n  service/src/gen/thrift/gen-cpp/TCLIService.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService.h\n  service/src/gen/thrift/gen-cpp/TCLIService_server.skeleton.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService_types.cpp\n  service/src/gen/thrift/gen-cpp/TCLIService_types.h\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TCLIService.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TExecuteStatementAsyncReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TExecuteStatementReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TExecuteStatementAsyncResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetOperationStatusResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetQueryPlanReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetQueryPlanResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TGetTablesReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TOpenSessionReq.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TOpenSessionResp.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TStructTypeEntry.java\n  service/src/gen/thrift/gen-javabean/org/apache/hive/service/cli/thrift/TUnionTypeEntry.java\n  service/src/gen/thrift/gen-php/TCLIService.php\n  service/src/gen/thrift/gen-py/TCLIService/TCLIService-remote\n  service/src/gen/thrift/gen-py/TCLIService/TCLIService.py\n  service/src/gen/thrift/gen-py/TCLIService/ttypes.py\n  service/src/gen/thrift/gen-rb/t_c_l_i_service.rb\n  service/src/gen/thrift/gen-rb/t_c_l_i_service_types.rb\n  service/src/java/org/apache/hive/service/cli/CLIService.java\n  service/src/java/org/apache/hive/service/cli/CLIServiceClient.java\n  service/src/java/org/apache/hive/service/cli/EmbeddedCLIServiceClient.java\n  service/src/java/org/apache/hive/service/cli/ICLIService.java\n  service/src/java/org/apache/hive/service/cli/OperationStatus.java\n  service/src/java/org/apache/hive/service/cli/operation/ExecuteStatementOperation.java\n  service/src/java/org/apache/hive/service/cli/operation/Operation.java\n  service/src/java/org/apache/hive/service/cli/operation/OperationManager.java\n  service/src/java/org/apache/hive/service/cli/operation/SQLOperation.java\n  service/src/java/org/apache/hive/service/cli/session/HiveSession.java\n  service/src/java/org/apache/hive/service/cli/session/HiveSessionImpl.java\n  service/src/java/org/apache/hive/service/cli/session/SessionManager.java\n  service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIService.java\n  service/src/java/org/apache/hive/service/cli/thrift/ThriftCLIServiceClient.java\n  service/src/test/org/apache/hive/service/cli/CLIServiceTest.java\n\nMANAGE HERALD RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/29445/\n\nTo: JIRA, jaideepdhok\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-08-16T06:35:49.511+0000","updated":"2013-08-16T06:35:49.511+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13741980","id":"13741980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"body":"I have put up a patch on the work done so far. In this patch, ExecuteStatement and ExecutestatementAsync are two separate calls.\n\nThis also has GetQueryPlan.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jaideepdhok","name":"jaideepdhok","key":"jaideepdhok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jaideep Dhok","active":true,"timeZone":"Asia/Singapore"},"created":"2013-08-16T06:39:35.518+0000","updated":"2013-08-16T06:39:35.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13742335","id":"13742335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"body":"As an alternative suggestion, what about considering a {{WaitUntilComplete(TOperationStatus)}} call? The benefit would be that there was immediately a way to block on the result of every operation (rather than adding {{*Async}} APIs to the interface and doubling its size). Then {{executeStatement}} doesn't need to change its documented semantics, and Hive can immediately be compatible by making {{WaitUntilComplete}} a no-op until asynchronous support is completely ready.\n\nI also agree that it might be worth splitting this discussion into a separate JIRA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=henryr","name":"henryr","key":"henryr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Henry Robinson","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-16T15:56:52.593+0000","updated":"2013-08-16T15:56:52.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647890/comment/13742735","id":"13742735","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~ashutoshc][~henryr][~jaideep@research.iiit.ac.in] [~thejas] I definitely think execute async is quite ready and would be a good idea to have that in, while we discuss concerns on GetQueryPlan/TaskStatus. Without splitting, it might be kind of hard to focus on each. While reviewing this patch, I was actually trying to group the changes in two sets - I have a document which kind of summarizes the changes of each group (1. ExecuteAsync 2. GetQueryPlan + TaskStatus). I can upload that if you guys find use for it (if we decide on splitting, we can use it to see what we want in each JIRA).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-17T00:02:42.694+0000","updated":"2013-08-17T00:02:42.694+0000"}],"maxResults":48,"total":48,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4569/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1kmun:"}}