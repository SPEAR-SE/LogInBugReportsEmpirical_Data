{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12538597","self":"https://issues.apache.org/jira/rest/api/2/issue/12538597","key":"HIVE-2723","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323587","id":"12323587","description":"Hive 0.11.0","name":"0.11.0","archived":false,"released":true,"releaseDate":"2013-05-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-01-17T10:58:39.779+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jan 09 10:25:18 UTC 2013","customfield_12310420":"224101","customfield_12312320":null,"customfield_12310222":"10002_*:*_2_*:*_16256090571_*|*_1_*:*_2_*:*_11748433536_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-12-06T06:16:50.994+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2723/watchers","watchCount":7,"isWatching":false},"created":"2012-01-17T03:14:46.907+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["exception-handling","query","queryparser"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12359320","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12359320","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12613095","key":"HIVE-3609","self":"https://issues.apache.org/jira/rest/api/2/issue/12613095","fields":{"summary":"Nested sub select queries with duplicate column aliases should throw an error instead of truncating columns","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12362945","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12362945","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12626898","key":"HIVE-3882","self":"https://issues.apache.org/jira/rest/api/2/issue/12626898","fields":{"summary":"config for enabling HIVE-2723","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-16T21:10:31.813+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312586","id":"12312586","name":"Query Processor","description":"Tracks issues dealing with query processing."}],"timeoriginalestimate":null,"description":" ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12510829","id":"12510829","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2723.D1275.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-01-17T10:58:40.694+0000","size":3528,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12510829/ASF.LICENSE.NOT.GRANTED--HIVE-2723.D1275.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12523072","id":"12523072","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2723.D1275.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-18T04:39:05.025+0000","size":17307,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12523072/ASF.LICENSE.NOT.GRANTED--HIVE-2723.D1275.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12556213","id":"12556213","filename":"hive.2723.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-12-06T04:18:27.714+0000","size":19012,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12556213/hive.2723.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12550414","id":"12550414","filename":"HIVE-2723.D1275.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-10-23T04:41:11.771+0000","size":18447,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12550414/HIVE-2723.D1275.3.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"61931","customfield_12312823":null,"summary":"should throw  \"Ambiguous column reference key\"  Exception in particular join condition","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=caofangkun","name":"caofangkun","key":"caofangkun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=caofangkun&avatarId=23151","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=caofangkun&avatarId=23151","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=caofangkun&avatarId=23151","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=caofangkun&avatarId=23151"},"displayName":"caofangkun","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=caofangkun","name":"caofangkun","key":"caofangkun","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=caofangkun&avatarId=23151","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=caofangkun&avatarId=23151","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=caofangkun&avatarId=23151","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=caofangkun&avatarId=23151"},"displayName":"caofangkun","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux zongren-VirtualBox 3.0.0-14-generic #23-Ubuntu SMP Mon Nov 21 20:34:47 UTC 2011 i686 i686 i386 GNU/Linux\n\njava version \"1.6.0_25\"\n\nhadoop-0.20.2-cdh3u0\n\nhive-0.7.0-cdh3u0\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13187586","id":"13187586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"navis requested code review of \"HIVE-2723 [jira] should throw  \"Ambiguous column reference key\"  Exception in particular join condition\".\nReviewers: JIRA\n\n  DPAL-638 Does not throw \"Ambiguous column reference key\" exception in sub query with select star/pattern\n\n  This Bug can be Repeated as following :\n\n  create table test(key string, value string);\n  create table test1(key string, value string);\n\n  1: Correct!\n  select t.key\n  from\n  (select a.key, b.key from (select * from src ) a right outer join (select * from src1) b on (a.key = b.key)) t;\n  FAILED: Error in semantic analysis: Ambiguous column reference key\n\n  2: Uncorrect!! Should throw Exception as above too!\n  select t.key --Is this a.key or b.key ? It's ambiduous!\n  from\n  (select a.*, b.* from (select * from src ) a right outer join (select * from src1) b on (a.value = b.value)) t;\n  Total MapReduce jobs = 1\n  Launching Job 1 out of 1\n  Number of reduce tasks not specified. Defaulting to jobconf value of: 1\n  In order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\n  In order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\n  In order to set a constant number of reducers:\n  set mapred.reduce.tasks=<number>\n  Starting Job = job_201201170959_0004, Tracking URL = http://zongren-VirtualBox:50030/jobdetails.jsp?jobid=job_201201170959_0004\n  Kill Command = /home/zongren/workspace/hadoop-adh/bin/hadoop job  -Dmapred.job.tracker=zongren-VirtualBox:9001 -kill job_201201170959_0004\n  Hadoop job information for Stage-1: number of mappers: 2; number of reducers: 1\n  2012-01-17 11:02:47,507 Stage-1 map = 0%,  reduce = 0%\n  2012-01-17 11:02:55,002 Stage-1 map = 100%,  reduce = 0%\n  2012-01-17 11:03:04,240 Stage-1 map = 100%,  reduce = 33%\n  2012-01-17 11:03:05,258 Stage-1 map = 100%,  reduce = 100%\n  Ended Job = job_201201170959_0004\n  MapReduce Jobs Launched:\n  Job 0: Map: 2  Reduce: 1   HDFS Read: 669 HDFS Write: 216 SUCESS\n  Total MapReduce CPU Time Spent: 0 msec\n  OK\n\nTEST PLAN\n  EMPTY\n\nREVISION DETAIL\n  https://reviews.facebook.net/D1275\n\nAFFECTED FILES\n  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java\n  ql/src/test/queries/clientnegative/ambiguous_col_patterned.q\n  ql/src/test/results/clientnegative/ambiguous_col_patterned.q.out\n\nMANAGE HERALD DIFFERENTIAL RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/2673/\n\nTip: use the X-Herald-Rules header to filter Herald messages in your client.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-01-17T10:58:39.779+0000","updated":"2012-01-17T10:58:39.779+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13256199","id":"13256199","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"navis updated the revision \"HIVE-2723 [jira] should throw  \"Ambiguous column reference key\"  Exception in particular join condition\".\nReviewers: JIRA\n\n  1. Added test cases\n  2. Avoid throwing exception if it's possible\n\nREVISION DETAIL\n  https://reviews.facebook.net/D1275\n\nAFFECTED FILES\n  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java\n  ql/src/test/queries/clientnegative/ambiguous_col0.q\n  ql/src/test/queries/clientnegative/ambiguous_col1.q\n  ql/src/test/queries/clientnegative/ambiguous_col2.q\n  ql/src/test/queries/clientpositive/ambiguous_col.q\n  ql/src/test/results/clientnegative/ambiguous_col0.q.out\n  ql/src/test/results/clientnegative/ambiguous_col1.q.out\n  ql/src/test/results/clientnegative/ambiguous_col2.q.out\n  ql/src/test/results/clientnegative/ambiguous_col_patterned.q.out\n  ql/src/test/results/clientpositive/ambiguous_col.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-18T04:38:57.290+0000","updated":"2012-04-18T04:38:57.290+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13257099","id":"13257099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"Passed all tests","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2012-04-18T23:51:24.738+0000","updated":"2012-04-18T23:51:24.738+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13258504","id":"13258504","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Unlinking from 0.9","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-04-20T19:29:21.763+0000","updated":"2012-04-20T19:29:21.763+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13482093","id":"13482093","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"@Navis: Looks like this patch almost applies cleanly except for one small reject in SemanticAnalyzer.java. Would you be willing to rebase this patch and submit it for review? Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-23T04:02:47.647+0000","updated":"2012-10-23T04:02:47.647+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13482107","id":"13482107","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"navis updated the revision \"HIVE-2723 [jira] should throw  \"Ambiguous column reference key\"  Exception in particular join condition\".\nReviewers: JIRA\n\n  Moved column checking logic into RowResolver\n\n\nREVISION DETAIL\n  https://reviews.facebook.net/D1275\n\nAFFECTED FILES\n  ql/src/java/org/apache/hadoop/hive/ql/parse/RowResolver.java\n  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java\n  ql/src/test/queries/clientnegative/ambiguous_col0.q\n  ql/src/test/queries/clientnegative/ambiguous_col1.q\n  ql/src/test/queries/clientnegative/ambiguous_col2.q\n  ql/src/test/queries/clientpositive/ambiguous_col.q\n  ql/src/test/results/clientnegative/ambiguous_col0.q.out\n  ql/src/test/results/clientnegative/ambiguous_col1.q.out\n  ql/src/test/results/clientnegative/ambiguous_col2.q.out\n  ql/src/test/results/clientnegative/ambiguous_col_patterned.q.out\n  ql/src/test/results/clientpositive/ambiguous_col.q.out\n\nTo: JIRA, navis\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-10-23T04:41:11.726+0000","updated":"2012-10-23T04:41:11.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13511099","id":"13511099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"+1\n\nLooks good. running tests","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-12-06T04:18:46.856+0000","updated":"2012-12-06T04:18:46.856+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13511142","id":"13511142","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"Committed. Thanks Navis","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-12-06T06:16:51.009+0000","updated":"2012-12-06T06:16:51.009+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13511257","id":"13511257","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #1836 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1836/])\n    HIVE-2723 should throw \"Ambiguous column reference key\" Exception in particular\njoin condition (Navis via namit) (Revision 1417743)\n\n     Result = ABORTED\nnamit : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1417743\nFiles : \n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/RowResolver.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java\n* /hive/trunk/ql/src/test/queries/clientnegative/ambiguous_col0.q\n* /hive/trunk/ql/src/test/queries/clientnegative/ambiguous_col1.q\n* /hive/trunk/ql/src/test/queries/clientnegative/ambiguous_col2.q\n* /hive/trunk/ql/src/test/queries/clientpositive/ambiguous_col.q\n* /hive/trunk/ql/src/test/results/clientnegative/ambiguous_col0.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/ambiguous_col1.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/ambiguous_col2.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/ambiguous_col_patterned.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/ambiguous_col.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-12-06T09:08:14.430+0000","updated":"2012-12-06T09:08:14.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13526777","id":"13526777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinwilfong","name":"kevinwilfong","key":"kevinwilfong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Wilfong","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi, I realize I'm a little late but why should the following query fail (from the clientnegative test cases)?\n\nexplain select * from (select * from (select * from src) a join (select * from src1) b on (a.key = b.key)) t;","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinwilfong","name":"kevinwilfong","key":"kevinwilfong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Wilfong","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-12-07T21:19:34.192+0000","updated":"2012-12-07T21:19:34.192+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13527350","id":"13527350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"I will let Navis confirm, but the output columns from the sub-query have the same name.\n\nselect * from (select * from src) a join (select * from src1) b on (a.key = b.key)\n\nThis will return a.key, a.value, b.key, b.value with column names key, value, key, value respectively.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-12-09T06:11:04.486+0000","updated":"2012-12-09T06:11:04.486+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13527672","id":"13527672","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"As Namit said, output columns is duplicating. \n\nI've thought replacing names of those with auto-generated one, but that seemed making another problem. And also, mysql throws exception for that query something like \"ERROR 1060 (42S21): Duplicate column name 'akey'\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2012-12-10T01:05:22.909+0000","updated":"2012-12-10T01:05:22.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13527705","id":"13527705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"[~kevinwilfong], what do you think ? I feel that throwing an error is reasonable.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-12-10T04:01:51.500+0000","updated":"2012-12-10T04:01:51.500+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13528135","id":"13528135","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinwilfong","name":"kevinwilfong","key":"kevinwilfong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Wilfong","active":true,"timeZone":"America/Los_Angeles"},"body":"I ran the query on a version of Hive without this patch and it gave only 2 columns of output.  Given that it's giving wrong answers today anyway, I'm fine with throwing an error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinwilfong","name":"kevinwilfong","key":"kevinwilfong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Wilfong","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-12-10T18:25:55.289+0000","updated":"2012-12-10T18:25:55.289+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538597/comment/13548327","id":"13548327","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])\n    HIVE-2723 should throw \"Ambiguous column reference key\" Exception in particular\njoin condition (Navis via namit) (Revision 1417743)\n\n     Result = ABORTED\nnamit : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1417743\nFiles : \n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/RowResolver.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java\n* /hive/trunk/ql/src/test/queries/clientnegative/ambiguous_col0.q\n* /hive/trunk/ql/src/test/queries/clientnegative/ambiguous_col1.q\n* /hive/trunk/ql/src/test/queries/clientnegative/ambiguous_col2.q\n* /hive/trunk/ql/src/test/queries/clientpositive/ambiguous_col.q\n* /hive/trunk/ql/src/test/results/clientnegative/ambiguous_col0.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/ambiguous_col1.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/ambiguous_col2.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/ambiguous_col_patterned.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/ambiguous_col.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-09T10:25:18.423+0000","updated":"2013-01-09T10:25:18.423+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2723/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ayxb:"}}