{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13003337","self":"https://issues.apache.org/jira/rest/api/2/issue/13003337","key":"HIVE-14717","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2016-09-08T02:04:55.265+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Sep 09 23:22:17 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_192155220_*|*_4_*:*_1_*:*_16505_*|*_5_*:*_2_*:*_6432602811","customfield_12312321":null,"resolutiondate":"2016-11-23T10:12:36.803+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-14717/watchers","watchCount":3,"isWatching":false},"created":"2016-09-07T17:59:42.438+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12479963","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12479963","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12961507","key":"HIVE-13589","self":"https://issues.apache.org/jira/rest/api/2/issue/12961507","fields":{"summary":"beeline support prompt for password with '-p' option","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-11-23T10:12:36.922+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"If you run mvn clean test in beeline you see the following errors:\n\n{noformat}\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning org.apache.hive.beeline.cli.TestHiveCli\nRunning org.apache.hive.beeline.TestBeelineArgParsing\nTests run: 32, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.584 sec - in org.apache.hive.beeline.TestBeelineArgParsing\nRunning org.apache.hive.beeline.TestBeeLineHistory\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.198 sec - in org.apache.hive.beeline.TestBeeLineHistory\nRunning org.apache.hive.beeline.TestBeeLineOpts\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.338 sec - in org.apache.hive.beeline.TestBeeLineOpts\nRunning org.apache.hive.beeline.TestBufferedRows\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.382 sec - in org.apache.hive.beeline.TestBufferedRows\nRunning org.apache.hive.beeline.TestClientCommandHookFactory\nTests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.546 sec - in org.apache.hive.beeline.TestClientCommandHookFactory\nRunning org.apache.hive.beeline.TestIncrementalRowsWithNormalization\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.379 sec - in org.apache.hive.beeline.TestIncrementalRowsWithNormalization\nRunning org.apache.hive.beeline.TestTableOutputFormat\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.402 sec - in org.apache.hive.beeline.TestTableOutputFormat\n\nResults :\n\nTests run: 44, Failures: 0, Errors: 0, Skipped: 0\n\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 01:03 min\n[INFO] Finished at: 2016-09-07T10:57:28-07:00\n[INFO] Final Memory: 65M/949M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.19.1:test (default-test) on project hive-beeline: ExecutionException The forked VM terminated without properly saying goodbye. VM crash or System.exit called?\n[ERROR] Command was /bin/sh -c cd /Users/vihang/work/src/upstream/hive/beeline && /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/bin/java -Xmx2048m -XX:MaxPermSize=512m -jar /Users/vihang/work/src/upstream/hive/beeline/target/surefire/surefirebooter8133887423099901737.jar /Users/vihang/work/src/upstream/hive/beeline/target/surefire/surefire6528142441948588259tmp /Users/vihang/work/src/upstream/hive/beeline/target/surefire/surefire_05570572112194455658tmp\n[ERROR] -> [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n{noformat}\n\nMy guess is this is related to recent fix for HIVE-13589 but needs more investigation.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12827493","id":"12827493","filename":"HIVE-14717.01.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-08T04:23:32.836+0000","size":3518,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12827493/HIVE-14717.01.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Beeline tests failing","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15471971","id":"15471971","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like the TestHiveCli tests are not completing after the patch for HIVE-13589. The tests connect beeline in embedded mode which doesn't have any password and due to the patch tests try to prompt for password and hang until the maven process terminates. [~Ferd] [~Ke Jia] I think we should revert this patch because it is breaking tests. Also, it can potentially break backwards compatibility for users who have scripts written already which assumes beeline -u \"jdbc:hive2://localhost:10000\" to connect in an unsecure cluster. What do you think?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-07T22:22:14.866+0000","updated":"2016-09-07T22:22:14.866+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15472244","id":"15472244","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"I investigated this more. I think we can satisfy the requirement in HIVE-13589 without breaking any backwards compatibility by making the password option \"optional\" using the OptionBuilder. That way we are not breaking backwards compatibility since we are widening the scope of the option. So {noformat}beeline -u url -n user -p pass{noformat} {noformat}beeline -u url -p -n user{noformat} and {noformat}beeline -u url -n user -p{noformat} will work.\n\nIf the user provides -p on the commandline the user can provide the password on the commandline like current behavior or choose not provide password. In that case Beeline will prompt for the password. So following cases should successfully connect without prompting any password (assuming the authentication mode is default) to make sure it is backwards compatible.\n\n{noformat}\nbeeline -u url -n user -p pass\nbeeline -u url -p pass -n user\nbeeline -u url\nbeeline -u url -n user\nbeeline -u url -p password\nbeeline -u \"jdbc:hive2://localhost:10000/default;user=username;password=password\"\nbeeline -u \"jdbc:hive2://\"\n{noformat}\n\nIn case the user does not want the password to be seen on the command line or command history he/she can issue the following way to connect and beeline will prompt for password in each case below\n\n{noformat}\nbeeline -u url -n user -p\nbeeline -u url -p -n user\nbeeline -p -u url -n user\nbeeline -u url -p\nbeeline -u url -p -n user -e \"show tables;\"\n{noformat}\n\nI have done some testing and it is working as expected. [~Ferd] Let me know if you have any thoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-08T00:24:56.750+0000","updated":"2016-09-08T00:24:56.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15472439","id":"15472439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"body":"Hi [~vihangk1] Thank you for this suggestion. There's a major issue as discussed in HIVE-13589. e.g. \n{noformat}\nbeeline -u user -p --property-file <file>\n{noformat}\n\nBeeline will treat the string after option p as a password since \"-property-file\" is not a key in Beeline which is defined in BeeLineOpts instead of BeeLine. So we have to put it in the last place to avoid this case. One possible remedy is to bypass the password check if user name is not specified. Any thoughts? [~Jk_Self] [~vihangk1]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-09-08T02:04:55.265+0000","updated":"2016-09-08T02:04:55.265+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15472659","id":"15472659","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jk_Self","name":"Jk_Self","key":"jk_self","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ke Jia","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~vihangk1] [~Ferd], Thank  for you suggestion. Before HIVE-13589, Beeline work with the follow cases:\n{noformat}\n1. beeline –u url –n user –p pass\n2. beeline –u url –n user\n3. beeline –u url –p pass\n4. beeline –u url\n5. beeline {noformat}\nWhen the password is null, the code block below set it to empty string.\n{noformat}\nprivate String constructCmd(String url, String user, String pass, String driver, boolean stripPasswd) {\n    String com = \"!connect \"\n        + url + \" \"\n        + (user == null || user.length() == 0 ? \"''\" : user) + \" \";\n    if (stripPasswd) {\n      com += PASSWD_MASK + \" \";\n    } else {\n      com += (pass == null || pass.length() == 0 ? \"''\" : pass) + \" \";\n    }\n    com += (driver == null ? \"\" : driver);\n    return com;\n  } {noformat}\nBeeline prompt user to enter password when the password is null in follow code. However,  because the above code have assigned the empty string to the password, Beeline will never prompt user to enter password.\n{noformat}\nif (password == null) {\n        password = beeLine.getConsoleReader().readLine(\"Enter password for \" + url + \": \",\n          new Character('*'));\n      } {noformat}\nIn the patch of Hive-13589, we add a judgement(password == null || password.length() == 0)) in the follow code.\n{noformat}\n if (password == null || password.length() == 0) {\n        password = beeLine.getConsoleReader().readLine(\"Enter password for \" + url + \": \",\n          new Character('*'));\n      } {noformat}\nSo, After HIVE-13589, if the password is null or empty string, Beeline will prompt user to enter password. So, for case 2 and 4, Beeline will ask user to enter the password. So if want to achieve the goal that prompt user to enter password, we need to add the judgement(password == null || password.length() == 0)) even though we adopt the optional -p argument, I think. And this issue will also occur. What about you?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jk_Self","name":"Jk_Self","key":"jk_self","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ke Jia","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-08T04:00:47.822+0000","updated":"2016-09-08T04:00:47.822+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15472685","id":"15472685","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Do we support ./beeline -n user -p --property-file <file> syntax? For what I looked at the code, --property-file will load all the properties from the file and use it to connect ignoring any other parameters. So I am not sure ./beeline -n user -p --property-file <file> is a valid command.\n\nIf you concern is that the argument after -p will be used to assign the value of password by CommandLine then that is not a concern if we make the argument value as optional.\n\nThis is what I tried just now and it works as expected:\n\n{noformat}\nvihang-MBP:bin vihang$ ./beeline -n hive -p --property-file ~/beeline.properties\nConnecting to jdbc:hive2://localhost:10000\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/Users/vihang/work/src/upstream/hive/packaging/target/apache-hive-2.2.0-SNAPSHOT-bin/apache-hive-2.2.0-SNAPSHOT-bin/lib/log4j-slf4j-impl-2.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/local/Cellar/hadoop/2.7.2/libexec/share/hadoop/common/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\nConnected to: Apache Hive (version 2.2.0-SNAPSHOT)\nDriver: Hive JDBC (version 2.2.0-SNAPSHOT)\n16/09/07 21:03:38 [main]: WARN jdbc.HiveConnection: Request to set autoCommit to false; Hive does not support autoCommit=false.\nTransaction isolation: TRANSACTION_REPEATABLE_READ\nBeeline version 2.2.0-SNAPSHOT by Apache Hive\n0: jdbc:hive2://localhost:10000>\n{noformat}\n\n\nAlso, this works as expected too\n\n{noformat}\nvihang-MBP:bin vihang$ ./beeline -u \"jdbc:hive2://localhost:10000\" -n hive -p -e \"show tables;\"\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/Users/vihang/work/src/upstream/hive/packaging/target/apache-hive-2.2.0-SNAPSHOT-bin/apache-hive-2.2.0-SNAPSHOT-bin/lib/log4j-slf4j-impl-2.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/local/Cellar/hadoop/2.7.2/libexec/share/hadoop/common/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\nConnecting to jdbc:hive2://localhost:10000\nEnter password for jdbc:hive2://localhost:10000: ****\nConnected to: Apache Hive (version 2.2.0-SNAPSHOT)\nDriver: Hive JDBC (version 2.2.0-SNAPSHOT)\n16/09/07 21:10:02 [main]: WARN jdbc.HiveConnection: Request to set autoCommit to false; Hive does not support autoCommit=false.\nTransaction isolation: TRANSACTION_REPEATABLE_READ\nOK\n+----------------+\n|    tab_name    |\n+----------------+\n| dummy          |\n| likes          |\n| longkeyvalues  |\n| mydummy        |\n| names          |\n| s3dummy        |\n| s3dummy_ext    |\n| s3dummybucket  |\n| s3dummypart    |\n| s3dummyskewed  |\n| src            |\n| src2           |\n| test123        |\n+----------------+\n13 rows selected (0.162 seconds)\nBeeline version 2.2.0-SNAPSHOT by Apache Hive\nClosing: 0: jdbc:hive2://localhost:10000\nvihang-MBP:bin vihang$\n{noformat}\n\nLet me submit a patch for this so that you can take a closer look. That way it is easier to review and discuss perhaps. Thanks for your input [~Ferd]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-08T04:13:33.103+0000","updated":"2016-09-08T04:13:33.103+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15472707","id":"15472707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"[~Ferd] [~Ke Jia] Uploading a patch for you to check. I thought it would be easier to discuss when you take a look at the change. Let me know if there are any concerns.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-08T04:23:32.863+0000","updated":"2016-09-08T04:23:32.863+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15472990","id":"15472990","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"body":"\"-property-file\" may be not a good example since options in BeeLine contains this key. The issue comes when you pass in a property not included in options. e.g. \"--force\" \nAFAIK, if one argument is marked as optional, CommandLine will firstly check if the following string is a key. If it is, it will set its value empty, otherwise, it will treat the following string as password. This is how optional works. The tricky part is that Beeline option consists of two parts: 1) BeeLineOpts 2) BeeLine. For options like \"- r\", \"- n \", they're contained in options in BeeLine. For \"- - force\" or some other options defined BeeLineOpts(https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommands), it will not be parsed as a key when it follows \"- p\" and will be treated as the password because it's not part of the keyset in options from Beeline.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-09-08T06:44:44.443+0000","updated":"2016-09-08T06:44:44.443+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15473031","id":"15473031","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jk_Self","name":"Jk_Self","key":"jk_self","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ke Jia","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~vihangk1], I run \"beeline -u url -n root -p --force=true  -e 'show tables;'\" with your uploaded patch. However Beeline assign --force as the value of password and not prompt user to enter the password.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Jk_Self","name":"Jk_Self","key":"jk_self","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ke Jia","active":true,"timeZone":"Etc/UTC"},"created":"2016-09-08T07:04:39.890+0000","updated":"2016-09-08T07:04:39.890+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15474541","id":"15474541","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Ah .. I see now. Let me look into it. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-08T17:45:47.109+0000","updated":"2016-09-08T17:45:47.109+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15478612","id":"15478612","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Closing this issue now since the change which caused the test failure has been reverted. We can continue this discussion on the original JIRA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-09T23:21:18.642+0000","updated":"2016-09-09T23:21:18.642+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13003337/comment/15478629","id":"15478629","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Change which caused the failure was reverted. Tests are working now. See HIVE-13589 for more details.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-09T23:22:17.394+0000","updated":"2016-09-09T23:22:17.394+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-14717/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i33crb:"}}