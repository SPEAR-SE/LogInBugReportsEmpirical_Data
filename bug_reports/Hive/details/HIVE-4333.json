{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12641875","self":"https://issues.apache.org/jira/rest/api/2/issue/12641875","key":"HIVE-4333","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323587","id":"12323587","description":"Hive 0.11.0","name":"0.11.0","archived":false,"released":true,"releaseDate":"2013-05-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-04-17T23:03:05.164+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Apr 23 00:04:50 UTC 2013","customfield_12310420":"322290","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_944184984_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-04-21T16:11:54.235+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4333/watchers","watchCount":6,"isWatching":false},"created":"2013-04-10T17:55:29.276+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323587","id":"12323587","description":"Hive 0.11.0","name":"0.11.0","archived":false,"released":true,"releaseDate":"2013-05-15"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-16T21:10:33.377+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12320378","id":"12320378","name":"PTF-Windowing","description":"Partitioned Table Functions & Windowing"}],"timeoriginalestimate":null,"description":"Problem is different order of results on hadoop 2","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12579367","id":"12579367","filename":"HIVE-4333.1.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-18T17:06:24.557+0000","size":435422,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12579367/HIVE-4333.1.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12579567","id":"12579567","filename":"HIVE-4333.D10389.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-19T16:19:15.108+0000","size":434578,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12579567/HIVE-4333.D10389.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12579699","id":"12579699","filename":"HIVE-4333.D10389.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-21T00:49:15.154+0000","size":433793,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12579699/HIVE-4333.D10389.2.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"322635","customfield_12312823":null,"summary":"most windowing tests fail on hadoop 2","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13634570","id":"13634570","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mweaverh","name":"mweaverh","key":"mweaverh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mweaverh&avatarId=16761","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mweaverh&avatarId=16761","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mweaverh&avatarId=16761","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mweaverh&avatarId=16761"},"displayName":"Matthew Weaver","active":true,"timeZone":"America/Los_Angeles"},"body":"The OVER clauses don't fully specify the ordering, causing different ordering of results and different values for FIRST and LAST.  The fix is just to add enough fields to guarantee an unambiguous ordering in the window.  This will fix many of the queries, maybe all.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mweaverh","name":"mweaverh","key":"mweaverh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mweaverh&avatarId=16761","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mweaverh&avatarId=16761","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mweaverh&avatarId=16761","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mweaverh&avatarId=16761"},"displayName":"Matthew Weaver","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-17T23:03:05.164+0000","updated":"2013-04-17T23:03:05.164+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13635362","id":"13635362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"Attached a patch. The changes fall into these categories:\n\n- some queries had 'partition by p_mfgr order by p_mfgr' or just 'partition by p_mfgr'. In these cases rows within a partition are not coming in the same order as in hadoop 1. Changed to 'partition by p_mfgr order by p_name'\n- Manufacturer 1 has 2 rows with exactly the same data; so if we use a 'row based window' there are diffs between 1 & 2. Changed to using a 'range based window'\n- There are diffs because of precision. Some of the avg and sum functions are now wrapped in 'round'\n- Finally tests with the empty over() on fns that relied on order had to changed. \nFor e.g. leadlag.q Query 8. I tried the following change:\n{noformat}\nselect p_name, p_retailprice,\nlead(p_retailprice) over() as l1 ,\nlag(p_retailprice)  over() as l2\nfrom (select p_name, p_retailprice from part where p_mfgr = 'Manufacturer#1' order by p_name, p_retailprice ) p;\n{noformat}\n\nThe output in hadoop 1 is:\n{noformat}\nalmond antique burnished rose metallic\t1173.15\t1173.15\tNULL\nalmond antique burnished rose metallic\t1173.15\t1753.76\t1173.15\nalmond antique chartreuse lavender yellow\t1753.76\t1602.59\t1173.15\nalmond antique salmon chartreuse burlywood\t1602.59\t1414.42\t1753.76\nalmond aquamarine burnished black steel\t1414.42\t1632.66\t1602.59\nalmond aquamarine pink moccasin thistle\t1632.66\tNULL\t1414.42\n{noformat}\n\nThe input to lead and lag query is ordered on p_name and p_retailprice and is very small, just 6 rows(so only 1 mapper is involved) In 1.0 the rows are coming to the reducer in the same order as the input\n\n\nIn hadoop 2.0 the result is:\n{noformat}\nalmond aquamarine pink moccasin thistle\t1632.66\t1414.42\tNULL\nalmond aquamarine burnished black steel\t1414.42\t1602.59\t1632.66\nalmond antique salmon chartreuse burlywood\t1602.59\t1753.76\t1414.42\nalmond antique chartreuse lavender yellow\t1753.76\t1173.15\t1602.59\nalmond antique burnished rose metallic\t1173.15\t1173.15\t1753.76\nalmond antique burnished rose metallic\t1173.15\tNULL\t1173.15\n{noformat}\n\nLooks like the shuffle in 2.0 reorders the rows even in this case. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-18T17:17:30.487+0000","updated":"2013-04-18T17:17:30.487+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13636446","id":"13636446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~rhbutani] Can you create phabricator entry for this? Since its a huge patch, its hard to read diff file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-19T14:54:02.930+0000","updated":"2013-04-19T14:54:02.930+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13636456","id":"13636456","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. There are diffs because of precision. Some of the avg and sum functions are now wrapped in 'round'\nI didn't get this part. All this computation is within Hive, it shouldn't be affected by hadoop version. wrapped in 'round' ? in Hive or Hadoop?\n\nbq. Looks like the shuffle in 2.0 reorders the rows even in this case.\nYeah thats possible. Since in over() partitioning is by constant so all rows have same value for partitioning column so they can arrive in any order. We need to come up with clever way of writing test which still test over() but gives ordered result for both hadoop 1 and hadoop2\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-19T15:01:17.772+0000","updated":"2013-04-19T15:01:17.772+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13636546","id":"13636546","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"hbutani requested code review of \"HIVE-4333 [jira] most windowing tests fail on hadoop 2\".\n\nReviewers: JIRA, ashutoshc\n\nfix tests for hadoop 2\n\nProblem is different order of results on hadoop 2\n\nTEST PLAN\n  change existing tests\n\nREVISION DETAIL\n  https://reviews.facebook.net/D10389\n\nAFFECTED FILES\n  data/files/flights_tiny.txt\n  data/files/part.rc\n  data/files/part.seq\n  ql/src/test/queries/clientpositive/leadlag.q\n  ql/src/test/queries/clientpositive/ptf.q\n  ql/src/test/queries/clientpositive/ptf_general_queries.q\n  ql/src/test/queries/clientpositive/windowing.q\n  ql/src/test/queries/clientpositive/windowing_expressions.q\n  ql/src/test/queries/clientpositive/windowing_multipartitioning.q\n  ql/src/test/queries/clientpositive/windowing_navfn.q\n  ql/src/test/queries/clientpositive/windowing_ntile.q\n  ql/src/test/queries/clientpositive/windowing_rank.q\n  ql/src/test/queries/clientpositive/windowing_udaf.q\n  ql/src/test/queries/clientpositive/windowing_windowspec.q\n  ql/src/test/results/clientpositive/leadlag.q.out\n  ql/src/test/results/clientpositive/ptf.q.out\n  ql/src/test/results/clientpositive/ptf_general_queries.q.out\n  ql/src/test/results/clientpositive/windowing.q.out\n  ql/src/test/results/clientpositive/windowing_expressions.q.out\n  ql/src/test/results/clientpositive/windowing_multipartitioning.q.out\n  ql/src/test/results/clientpositive/windowing_navfn.q.out\n  ql/src/test/results/clientpositive/windowing_ntile.q.out\n  ql/src/test/results/clientpositive/windowing_rank.q.out\n  ql/src/test/results/clientpositive/windowing_udaf.q.out\n  ql/src/test/results/clientpositive/windowing_windowspec.q.out\n\nMANAGE HERALD RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/24867/\n\nTo: JIRA, ashutoshc, hbutani\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-19T16:19:14.751+0000","updated":"2013-04-19T16:19:14.751+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13636548","id":"13636548","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"I think the diffs due to precision are for the same ordering issue. Since the rows in the partitions are not in the same order there are differences in the overall sum/avg beyond 2 decimal places.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-19T16:19:40.879+0000","updated":"2013-04-19T16:19:40.879+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13637305","id":"13637305","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"ashutoshc has requested changes to the revision \"HIVE-4333 [jira] most windowing tests fail on hadoop 2\".\n\n  Few comments. Also, you need to apply HIVE-4369 to test on hadoop 2\n\nINLINE COMMENTS\n  ql/src/test/queries/clientpositive/ptf.q:200 Is it one of those which are deferring in precision after 2 decimal places. Shall we use round (sum (p_size),1) for these ?\n  ql/src/test/queries/clientpositive/leadlag.q:76 It will be better to rewrite this query as\n  select p_name, p_retailprice,\n  lead(p_retailprice) over() as l1 ,\n  lag(p_retailprice)  over() as l2\n  from part\n  where p_retailprice = 1173.15;\n\n  we want to test over() here, so adding order by effectively defeats the purpose.\n  I tested this query and it passes with 23 as well.\n  ql/src/test/queries/clientpositive/windowing.q:278 Shall we use round (sum(p_size), 1) here ?\n\nREVISION DETAIL\n  https://reviews.facebook.net/D10389\n\nBRANCH\n  HIVE-4333\n\nARCANIST PROJECT\n  hive\n\nTo: JIRA, ashutoshc, hbutani\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-20T17:05:14.635+0000","updated":"2013-04-20T17:05:14.635+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13637423","id":"13637423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"hbutani updated the revision \"HIVE-4333 [jira] most windowing tests fail on hadoop 2\".\n\n  more fixes\n\nReviewers: ashutoshc, JIRA\n\nREVISION DETAIL\n  https://reviews.facebook.net/D10389\n\nCHANGE SINCE LAST DIFF\n  https://reviews.facebook.net/D10389?vs=32469&id=32559#toc\n\nAFFECTED FILES\n  ql/src/test/queries/clientpositive/leadlag.q\n  ql/src/test/queries/clientpositive/ptf.q\n  ql/src/test/queries/clientpositive/ptf_general_queries.q\n  ql/src/test/queries/clientpositive/windowing.q\n  ql/src/test/queries/clientpositive/windowing_expressions.q\n  ql/src/test/queries/clientpositive/windowing_multipartitioning.q\n  ql/src/test/queries/clientpositive/windowing_navfn.q\n  ql/src/test/queries/clientpositive/windowing_ntile.q\n  ql/src/test/queries/clientpositive/windowing_rank.q\n  ql/src/test/queries/clientpositive/windowing_udaf.q\n  ql/src/test/queries/clientpositive/windowing_windowspec.q\n  ql/src/test/results/clientpositive/leadlag.q.out\n  ql/src/test/results/clientpositive/ptf.q.out\n  ql/src/test/results/clientpositive/ptf_general_queries.q.out\n  ql/src/test/results/clientpositive/windowing.q.out\n  ql/src/test/results/clientpositive/windowing_expressions.q.out\n  ql/src/test/results/clientpositive/windowing_multipartitioning.q.out\n  ql/src/test/results/clientpositive/windowing_navfn.q.out\n  ql/src/test/results/clientpositive/windowing_ntile.q.out\n  ql/src/test/results/clientpositive/windowing_rank.q.out\n  ql/src/test/results/clientpositive/windowing_udaf.q.out\n  ql/src/test/results/clientpositive/windowing_windowspec.q.out\n\nTo: JIRA, ashutoshc, hbutani\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-21T00:49:14.824+0000","updated":"2013-04-21T00:49:14.824+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13637474","id":"13637474","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 will commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-21T04:45:11.790+0000","updated":"2013-04-21T04:45:11.790+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13637586","id":"13637586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to trunk. Thanks, Harish!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-21T16:11:54.253+0000","updated":"2013-04-21T16:11:54.253+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13638131","id":"13638131","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-hadoop2 #169 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/169/])\n    HIVE-4333 : most windowing tests fail on hadoop 2 (Harish Butani via Ashutosh Chauhan) (Revision 1470317)\n\n     Result = ABORTED\nhashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1470317\nFiles : \n* /hive/trunk/ql/src/test/queries/clientpositive/leadlag.q\n* /hive/trunk/ql/src/test/queries/clientpositive/ptf.q\n* /hive/trunk/ql/src/test/queries/clientpositive/ptf_general_queries.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_expressions.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_multipartitioning.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_navfn.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_ntile.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_rank.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_udaf.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_windowspec.q\n* /hive/trunk/ql/src/test/results/clientpositive/leadlag.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/ptf.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/ptf_general_queries.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_expressions.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_multipartitioning.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_navfn.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_ntile.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_rank.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_udaf.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_windowspec.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-22T16:07:10.354+0000","updated":"2013-04-22T16:07:10.354+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12641875/comment/13638591","id":"13638591","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #2074 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2074/])\n    HIVE-4333 : most windowing tests fail on hadoop 2 (Harish Butani via Ashutosh Chauhan) (Revision 1470317)\n\n     Result = FAILURE\nhashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1470317\nFiles : \n* /hive/trunk/ql/src/test/queries/clientpositive/leadlag.q\n* /hive/trunk/ql/src/test/queries/clientpositive/ptf.q\n* /hive/trunk/ql/src/test/queries/clientpositive/ptf_general_queries.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_expressions.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_multipartitioning.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_navfn.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_ntile.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_rank.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_udaf.q\n* /hive/trunk/ql/src/test/queries/clientpositive/windowing_windowspec.q\n* /hive/trunk/ql/src/test/results/clientpositive/leadlag.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/ptf.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/ptf_general_queries.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_expressions.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_multipartitioning.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_navfn.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_ntile.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_rank.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_udaf.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/windowing_windowspec.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-23T00:04:50.798+0000","updated":"2013-04-23T00:04:50.798+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4333/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1jlun:"}}