{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13072835","self":"https://issues.apache.org/jira/rest/api/2/issue/13072835","key":"HIVE-16695","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2017-05-17T18:03:24.866+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 23 03:39:36 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_477003981_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-05-23T03:39:52.482+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-16695/watchers","watchCount":5,"isWatching":false},"created":"2017-05-17T15:09:48.539+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12503842","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12503842","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"13072795","key":"HIVE-16693","self":"https://issues.apache.org/jira/rest/api/2/issue/13072795","fields":{"summary":"beeline \"source\" command freezes if you have a comment in it?","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-05-23T03:39:52.515+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12324409","id":"12324409","name":"Beeline"}],"timeoriginalestimate":null,"description":"If you source multiple multi-line queries back-to-back, beeline crashes.\n\nThis reproduces with version 3.0.0-SNAPSHOT re97734b1ca010d9690bbb0d6bdddf92082a20688\n\nIf the sourced query is only 1 line rather than >1 line, there is no crash.\n\nConsider this query:\n\n{code}\n[vagrant@trunk queries]$ cat repro.sql\nselect 1,\n2;\n{code}\n\nHere is a session that shows the problem in action:\n\n{code}\n[vagrant@trunk queries]$ beeline -u jdbc:hive2://localhost:10000/default --verbose=true\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/hdp/2.6.1.0-78/hive2/lib/log4j-slf4j-impl-2.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/hdp/2.6.1.0-78/hadoop/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\nissuing: !connect jdbc:hive2://localhost:10000/default '' [passwd stripped]\nConnecting to jdbc:hive2://localhost:10000/default\nConnected to: Apache Hive (version 3.0.0-SNAPSHOT)\nDriver: Hive JDBC (version 2.1.0.2.6.1.0-78)\nTransaction isolation: TRANSACTION_REPEATABLE_READ\nBeeline version 2.1.0.2.6.1.0-78 by Apache Hive\n0: jdbc:hive2://localhost:10000/default> select version();\ngoing to print operations logs\nprinted operations logs\nGetting log thread is interrupted, since query is done!\nINFO  : Compiling command(queryId=hive_20170517150532_10b373f0-a4d9-4ce4-b61e-c899dc6e2b86): select version()\nINFO  : Semantic Analysis Completed\nINFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:_c0, type:string, comment:null)], properties:null)\nINFO  : Completed compiling command(queryId=hive_20170517150532_10b373f0-a4d9-4ce4-b61e-c899dc6e2b86); Time taken: 0.036 seconds\nINFO  : Executing command(queryId=hive_20170517150532_10b373f0-a4d9-4ce4-b61e-c899dc6e2b86): select version()\nINFO  : Completed executing command(queryId=hive_20170517150532_10b373f0-a4d9-4ce4-b61e-c899dc6e2b86); Time taken: 0.002 seconds\nINFO  : OK\n+-----------------------------------------------------------+--+\n|                            _c0                            |\n+-----------------------------------------------------------+--+\n| 3.0.0-SNAPSHOT re97734b1ca010d9690bbb0d6bdddf92082a20688  |\n+-----------------------------------------------------------+--+\n1 row selected (0.163 seconds)\n0: jdbc:hive2://localhost:10000/default> source repro.sql;\ngoing to print operations logs\nprinted operations logs\nGetting log thread is interrupted, since query is done!\nINFO  : Compiling command(queryId=hive_20170517150535_c707de54-9540-4dc2-816e-6e1e491dc591): select 1,\n2\nINFO  : Semantic Analysis Completed\nINFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:_c0, type:int, comment:null), FieldSchema(name:_c1, type:int, comment:null)], properties:null)\nINFO  : Completed compiling command(queryId=hive_20170517150535_c707de54-9540-4dc2-816e-6e1e491dc591); Time taken: 0.432 seconds\nINFO  : Executing command(queryId=hive_20170517150535_c707de54-9540-4dc2-816e-6e1e491dc591): select 1,\n2\nINFO  : Completed executing command(queryId=hive_20170517150535_c707de54-9540-4dc2-816e-6e1e491dc591); Time taken: 0.001 seconds\nINFO  : OK\n+------+------+--+\n| _c0  | _c1  |\n+------+------+--+\n| 1    | 2    |\n+------+------+--+\n1 row selected (0.473 seconds)\n0: jdbc:hive2://localhost:10000/default> source repro.sql;\njava.lang.ArrayIndexOutOfBoundsException: 1\n\tat org.apache.hive.beeline.Commands.addConf(Commands.java:827)\n\tat org.apache.hive.beeline.Commands.getHiveConfHelper(Commands.java:773)\n\tat org.apache.hive.beeline.Commands.getHiveConf(Commands.java:765)\n\tat org.apache.hive.beeline.Commands.sourceFile(Commands.java:853)\n\tat org.apache.hive.beeline.Commands.executeInternal(Commands.java:933)\n\tat org.apache.hive.beeline.Commands.execute(Commands.java:1161)\n\tat org.apache.hive.beeline.Commands.sql(Commands.java:1076)\n\tat org.apache.hive.beeline.BeeLine.dispatch(BeeLine.java:1145)\n\tat org.apache.hive.beeline.BeeLine.execute(BeeLine.java:976)\n\tat org.apache.hive.beeline.BeeLine.begin(BeeLine.java:886)\n\tat org.apache.hive.beeline.BeeLine.mainWithInputRedirection(BeeLine.java:502)\n\tat org.apache.hive.beeline.BeeLine.main(BeeLine.java:485)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hadoop.util.RunJar.run(RunJar.java:233)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:148)\nClosing: 0: jdbc:hive2://localhost:10000/default\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"beeline throws ArrayIndexOutOfBoundsException sourcing multiple multi-line queries","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cartershanklin","name":"cartershanklin","key":"cartershanklin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carter Shanklin","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cartershanklin","name":"cartershanklin","key":"cartershanklin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carter Shanklin","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13072835/comment/16014527","id":"16014527","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"cc [~xuefuz] [~Ferd]\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-05-17T18:03:24.866+0000","updated":"2017-05-17T18:03:24.866+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13072835/comment/16020461","id":"16020461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"body":"Hi [~thejas], could you still reproduce this issue? I can't reproduce it locally on the latest master. Sorry for some delays.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2017-05-23T00:28:13.820+0000","updated":"2017-05-23T00:28:13.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13072835/comment/16020615","id":"16020615","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cartershanklin","name":"cartershanklin","key":"cartershanklin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carter Shanklin","active":true,"timeZone":"America/Chicago"},"body":"I'm unable to repro the issue now after the other patch you produced. I'm not sure what happened. I'll re open the ticket if it happens again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cartershanklin","name":"cartershanklin","key":"cartershanklin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carter Shanklin","active":true,"timeZone":"America/Chicago"},"created":"2017-05-23T03:39:36.994+0000","updated":"2017-05-23T03:39:36.994+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-16695/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3f4cf:"}}