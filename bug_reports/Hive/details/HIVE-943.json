{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12441141","self":"https://issues.apache.org/jira/rest/api/2/issue/12441141","key":"HIVE-943","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2010-06-04T14:10:08.870+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 02 14:23:22 UTC 2010","customfield_12310420":"73199","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_84290_*|*_1_*:*_2_*:*_35568117699_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-01-04T20:13:34.529+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-943/watchers","watchCount":1,"isWatching":false},"created":"2009-11-19T04:10:12.540+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":"hadoop hive mapred mapreduce","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313714","id":"12313714","description":"released","name":"0.4.0","archived":false,"released":true,"releaseDate":"2009-10-12"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-01-04T20:13:34.509+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314178","id":"12314178","name":"JDBC"}],"timeoriginalestimate":null,"description":"- some main output messages i got from console:\n\nTotal MapReduce jobs = 1\n09/11/18 15:56:03 INFO ql.Driver: Total MapReduce jobs = 1\n09/11/18 15:56:03 INFO exec.ExecDriver: BytesPerReducer=1000000000 maxReducers=999 totalInputFileSize=1289288953\nNumber of reduce tasks not specified. Estimated from input data size: 2\n09/11/18 15:56:03 INFO exec.ExecDriver: Number of reduce tasks not specified. Estimated from input data size: 2\nIn order to change the average load for a reducer (in bytes):\n09/11/18 15:56:03 INFO exec.ExecDriver: In order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\n09/11/18 15:56:03 INFO exec.ExecDriver:   set hive.exec.reducers.bytes.per.reducer=<number>\nIn order to limit the maximum number of reducers:\n09/11/18 15:56:03 INFO exec.ExecDriver: In order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\n09/11/18 15:56:03 INFO exec.ExecDriver:   set hive.exec.reducers.max=<number>\nIn order to set a constant number of reducers:\n09/11/18 15:56:03 INFO exec.ExecDriver: In order to set a constant number of reducers:\n  set mapred.reduce.tasks=<number>\n09/11/18 15:56:03 INFO exec.ExecDriver:   set mapred.reduce.tasks=<number>\n09/11/18 15:56:03 INFO exec.ExecDriver: Using org.apache.hadoop.hive.ql.io.HiveInputFormat\n\nStarting Job = job_200911122011_0639, Tracking URL = http://**********/jobdetails.jsp?jobid=job_200911122011_0639\n09/11/18 15:56:04 INFO exec.ExecDriver: Starting Job = job_200911122011_0639, Tracking URL = http://**********/jobdetails.jsp?jobid=job_200911122011_0639\nKill Command = /data/hadoop-hive/bin/../bin/hadoop job  -Dmapred.job.tracker=********** -kill job_200911122011_0639\n09/11/18 15:56:04 INFO exec.ExecDriver: Kill Command = /data/hadoop-hive/bin/../bin/hadoop job  -Dmapred.job.tracker=********** -kill job_200911122011_0639\n2009-11-18 03:56:05,701 map = 0%,  reduce = 0%\n09/11/18 15:56:05 INFO exec.ExecDriver: 2009-11-18 03:56:05,701 map = 0%,  reduce = 0%\n2009-11-18 03:56:21,798 map = 4%,  reduce = 0%\n09/11/18 15:56:21 INFO exec.ExecDriver: 2009-11-18 03:56:21,798 map = 4%,  reduce = 0%\n2009-11-18 03:56:22,818 map = 8%,  reduce = 0%\n09/11/18 15:56:22 INFO exec.ExecDriver: 2009-11-18 03:56:22,818 map = 8%,  reduce = 0%\n2009-11-18 03:56:23,832 map = 13%,  reduce = 0%\n09/11/18 15:56:23 INFO exec.ExecDriver: 2009-11-18 03:56:23,832 map = 13%,  reduce = 0%\n2009-11-18 03:56:24,854 map = 17%,  reduce = 0%\n09/11/18 15:56:24 INFO exec.ExecDriver: 2009-11-18 03:56:24,854 map = 17%,  reduce = 0%\n2009-11-18 03:56:25,864 map = 21%,  reduce = 0%\n09/11/18 15:56:25 INFO exec.ExecDriver: 2009-11-18 03:56:25,864 map = 21%,  reduce = 0%\n2009-11-18 03:56:29,890 map = 25%,  reduce = 0%\n09/11/18 15:56:29 INFO exec.ExecDriver: 2009-11-18 03:56:29,890 map = 25%,  reduce = 0%\n2009-11-18 03:56:30,900 map = 29%,  reduce = 0%\n09/11/18 15:56:30 INFO exec.ExecDriver: 2009-11-18 03:56:30,900 map = 29%,  reduce = 0%\n2009-11-18 03:56:31,909 map = 33%,  reduce = 0%\n09/11/18 15:56:31 INFO exec.ExecDriver: 2009-11-18 03:56:31,909 map = 33%,  reduce = 0%\n2009-11-18 03:56:33,933 map = 37%,  reduce = 0%\n09/11/18 15:56:33 INFO exec.ExecDriver: 2009-11-18 03:56:33,933 map = 37%,  reduce = 0%\n2009-11-18 03:56:35,946 map = 50%,  reduce = 0%\n09/11/18 15:56:35 INFO exec.ExecDriver: 2009-11-18 03:56:35,946 map = 50%,  reduce = 0%\n2009-11-18 03:56:36,956 map = 54%,  reduce = 0%\n09/11/18 15:56:36 INFO exec.ExecDriver: 2009-11-18 03:56:36,956 map = 54%,  reduce = 0%\n2009-11-18 03:56:37,965 map = 58%,  reduce = 0%\n09/11/18 15:56:37 INFO exec.ExecDriver: 2009-11-18 03:56:37,965 map = 58%,  reduce = 0%\n2009-11-18 03:56:38,978 map = 79%,  reduce = 0%\n09/11/18 15:56:38 INFO exec.ExecDriver: 2009-11-18 03:56:38,978 map = 79%,  reduce = 0%\n2009-11-18 03:56:39,988 map = 83%,  reduce = 0%\n09/11/18 15:56:39 INFO exec.ExecDriver: 2009-11-18 03:56:39,988 map = 83%,  reduce = 0%\n2009-11-18 03:56:40,998 map = 96%,  reduce = 0%\n09/11/18 15:56:41 INFO exec.ExecDriver: 2009-11-18 03:56:40,998 map = 96%,  reduce = 0%\n2009-11-18 03:56:42,006 map = 100%,  reduce = 0%\n09/11/18 15:56:42 INFO exec.ExecDriver: 2009-11-18 03:56:42,006 map = 100%,  reduce = 0%\n2009-11-18 03:56:46,031 map = 100%,  reduce = 13%\n09/11/18 15:56:46 INFO exec.ExecDriver: 2009-11-18 03:56:46,031 map = 100%,  reduce = 13%\n2009-11-18 03:56:51,060 map = 100%,  reduce = 25%\n09/11/18 15:56:51 INFO exec.ExecDriver: 2009-11-18 03:56:51,060 map = 100%,  reduce = 25%\n2009-11-18 03:56:56,091 map = 100%,  reduce = 67%\n09/11/18 15:56:56 INFO exec.ExecDriver: 2009-11-18 03:56:56,091 map = 100%,  reduce = 67%\n2009-11-18 03:56:57,102 map = 100%,  reduce = 100%\n09/11/18 15:56:57 INFO exec.ExecDriver: 2009-11-18 03:56:57,102 map = 100%,  reduce = 100%\nEnded Job = job_200911122011_0639\n09/11/18 15:56:59 INFO exec.ExecDriver: Ended Job = job_200911122011_0639\n09/11/18 15:56:59 INFO exec.FileSinkOperator: Moving tmp dir: hdfs://**********/tmp/hive-asadm/1751400872/_tmp.10001 to: hdfs://**********/tmp/hive-asadm/1751400872/_tmp.10001.intermediate\n09/11/18 15:56:59 INFO exec.FileSinkOperator: Moving tmp dir: hdfs://**********/tmp/hive-asadm/1751400872/_tmp.10001.intermediate to: hdfs://**********/tmp/hive-asadm/1751400872/10001\nOK\n09/11/18 15:56:59 INFO ql.Driver: OK\n09/11/18 15:56:59 INFO ql.Driver: Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:_col0, type:string, comment:from deserializer)], properties:null)\n09/11/18 15:56:59 INFO ql.Driver: Returning Thrift schema: Schema(fieldSchemas:[FieldSchema(name:_col0, type:string, comment:from deserializer)], properties:null)\n09/11/18 15:56:59 INFO service.HiveServer: Returning schema: Schema(fieldSchemas:[FieldSchema(name:_col0, type:string, comment:from deserializer)], properties:null)\n09/11/18 15:56:59 INFO mapred.FileInputFormat: Total input paths to process : 2\n\n||_col0||\n|NULL|\n\n- this problem DOES NOT appear when mapreduce was not running ?\n- i made something wrong at configuration from Hive jdbc api ?\n- temporary data has been moved twice, that's reason why ?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"122688","customfield_12312823":null,"summary":"Hive jdbc client - result is NULL when I run a query to select a large of data (with starting mapreduce)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vushogerts","name":"vushogerts","key":"vushogerts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vu Hoang","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vushogerts","name":"vushogerts","key":"vushogerts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vu Hoang","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441141/comment/12783522","id":"12783522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vushogerts","name":"vushogerts","key":"vushogerts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vu Hoang","active":true,"timeZone":"Etc/UTC"},"body":"If I use hive shell script (dont use hive jdbc api), it returns values normally","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vushogerts","name":"vushogerts","key":"vushogerts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vu Hoang","active":true,"timeZone":"Etc/UTC"},"created":"2009-11-30T02:35:33.027+0000","updated":"2009-11-30T02:35:33.027+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441141/comment/12875609","id":"12875609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"body":"hi Vu, Can you please post the details of the query you tired to execute and the Client code that you used.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-04T14:10:08.870+0000","updated":"2010-06-04T14:10:08.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441141/comment/12880095","id":"12880095","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vushogerts","name":"vushogerts","key":"vushogerts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vu Hoang","active":true,"timeZone":"Etc/UTC"},"body":"I used the method like this:\n{code:java|title=ClientCodeTest|borderStyle=solid}\nselect(\"default\", \"select * from keyword_frequency\", \"/home/vhoang/hadoop/hive\", true);\n{code}\n\nmethod definition select(String schema, String query, String path, boolean header)\n{code:java|title=ClientCode.select(String schema, String query, String path, boolean header)|borderStyle=solid}\ntry\n{\n\tString url = METADATA_URL.replace(VAR_META_HOST, getConfig().get(HIVE_JDBC_SERVER)).replace(VAR_META_NAME, schema);\n\tClass.forName(METADATA_DRIVER);\n\t\t\t\n\tLog.debug(getLogString() + \"url='\" + url + \"'\");\n\tConnection conn = DriverManager.getConnection(url, \"\", \"\");\n\tStatement stmt = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);\n\t\t\t\n\tResultSet recs = stmt.executeQuery(query);\n\tResultSetMetaData meta = recs.getMetaData();\n\t\t\t\n\tif (path == null) print(recs, meta);\n\telse write(recs, meta, new File(path), header);\n}\ncatch (ClassNotFoundException ex) { error(ex); }\ncatch (SQLException ex) { error(ex); }\n{code}\n\nmethod definition print(ResultSet recs, ResultSetMetaData meta)\n{code:java|title=ClientCode.print(ResultSet recs, ResultSetMetaData meta)|borderStyle=solid}\nif (getLogString().equals(BLANK))\n\tsetLogString(\"HiveQuery.print()|\");\n\t\t\ninit();\ntry\n{\n\tint columnSize = meta.getColumnCount();\n\tLog.debug(getLogString() + \"columnSize=\" + columnSize);\n\tfor (int index = 0; index < columnSize; index++)\n\t{\n\t\tString columnName = meta.getColumnName(index + 1);\n\t\tLog.debug(getLogString() + \"column='\" + columnName + \"'\");\n\t\tif (index == columnSize - 1) System.out.print(columnName);\n\t\telse System.out.print(columnName + StringConst.COMMA);\n\t}\n\tSystem.out.println();\n\t\t\n\twhile (recs.next())\n\t{\n\t\tfor (int index = 0; index < columnSize; index++)\n\t\t{\n\t\t\tString record = recs.getString(index + 1);\n\t\t\tLog.debug(getLogString() + \"record='\" + record + \"'\");\n\t\t\tif (index == columnSize - 1) System.out.print(record);\n\t\t\telse System.out.print(record + StringConst.COMMA);\n\t\t}\n\t\tSystem.out.println();\n\t}\n}\ncatch (SQLException ex) { error(ex); }\n{code}\n\nsorry about the delay feedback","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vushogerts","name":"vushogerts","key":"vushogerts","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vu Hoang","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-18T07:19:41.714+0000","updated":"2010-06-18T07:19:41.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441141/comment/12884688","id":"12884688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"body":"Vu, I tried this piece of code and it works just fine, the only change I had to do was to replace the createstatement method with the default method with no arguments. It will be good if you can let us know the exact problem that you are facing here. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raj_velu","name":"raj_velu","key":"raj_velu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Soundararajan Velu","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-02T14:23:22.050+0000","updated":"2010-07-02T14:23:22.050+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-943/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0lckv:"}}