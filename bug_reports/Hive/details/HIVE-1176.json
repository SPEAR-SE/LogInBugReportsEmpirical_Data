{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12456570","self":"https://issues.apache.org/jira/rest/api/2/issue/12456570","key":"HIVE-1176","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314524","id":"12314524","description":"released","name":"0.6.0","archived":false,"released":true,"releaseDate":"2010-10-29"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-02-18T18:28:30.672+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jun 24 05:23:29 UTC 2010","customfield_12310420":"73052","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_5656105877_*|*_1_*:*_1_*:*_5270403066_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-06-24T05:23:29.384+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1176/watchers","watchCount":4,"isWatching":false},"created":"2010-02-17T18:15:00.441+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12332506","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332506","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12434107","key":"HIVE-802","self":"https://issues.apache.org/jira/rest/api/2/issue/12434107","fields":{"summary":"Bug in DataNucleus prevents Hive from building if inside a dir with '+' in it","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12332174","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332174","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12434107","key":"HIVE-802","self":"https://issues.apache.org/jira/rest/api/2/issue/12434107","fields":{"summary":"Bug in DataNucleus prevents Hive from building if inside a dir with '+' in it","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:33.019+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312586","id":"12312586","name":"Query Processor","description":"Tracks issues dealing with query processing."}],"timeoriginalestimate":null,"description":"hive> create table if not exists tmp_select(s string, c string, n int);\norg.apache.hadoop.hive.ql.metadata.HiveException: MetaException(message:Got exception: javax.jdo.JDOUserException JDOQL Single-String query should always start with SELECT)\n        at org.apache.hadoop.hive.ql.metadata.Hive.getTablesForDb(Hive.java:441)\n        at org.apache.hadoop.hive.ql.metadata.Hive.getTablesByPattern(Hive.java:423)\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeCreateTable(SemanticAnalyzer.java:5538)\n        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:5192)\n        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)\n        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:275)\n        at org.apache.hadoop.hive.ql.Driver.runCommand(Driver.java:320)\n        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:312)\n        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)\n        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)\n        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:287)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)\nCaused by: MetaException(message:Got exception: javax.jdo.JDOUserException JDOQL Single-String query should always start with SELECT)\n        at org.apache.hadoop.hive.metastore.MetaStoreUtils.logAndThrowMetaException(MetaStoreUtils.java:612)\n        at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getTables(HiveMetaStoreClient.java:450)\n        at org.apache.hadoop.hive.ql.metadata.Hive.getTablesForDb(Hive.java:439)\n        ... 15 more","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12442204","id":"12442204","filename":"HIVE-1176.lib-files.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-19T18:11:09.626+0000","size":3356113,"mimeType":"application/x-gzip","content":"https://issues.apache.org/jira/secure/attachment/12442204/HIVE-1176.lib-files.tar.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12442203","id":"12442203","filename":"HIVE-1176.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-19T18:11:09.552+0000","size":101450,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12442203/HIVE-1176.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12445905","id":"12445905","filename":"HIVE-1176-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-05-31T06:27:17.948+0000","size":61160,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12445905/HIVE-1176-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12447244","id":"12447244","filename":"HIVE-1176-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T18:03:06.102+0000","size":62323,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12447244/HIVE-1176-2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12447794","id":"12447794","filename":"HIVE-1176-3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T04:32:02.580+0000","size":67830,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12447794/HIVE-1176-3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12447803","id":"12447803","filename":"HIVE-1176-4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T06:31:41.790+0000","size":70594,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12447803/HIVE-1176-4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12447902","id":"12447902","filename":"HIVE-1176-5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T23:14:21.946+0000","size":70633,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12447902/HIVE-1176-5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12447905","id":"12447905","filename":"HIVE-1176-6.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T23:34:29.856+0000","size":70627,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12447905/HIVE-1176-6.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"122887","customfield_12312823":null,"summary":"'create if not exists' fails for a table name with 'select' in it","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasadc","name":"prasadc","key":"prasadc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasad Chakka","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasadc","name":"prasadc","key":"prasadc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasad Chakka","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12835323","id":"12835323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"body":"Can you provide a reproducible test case for this bug?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"created":"2010-02-18T18:28:30.672+0000","updated":"2010-02-18T18:28:30.672+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12835324","id":"12835324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"body":"my bad. There is already a test case :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=athusoo","name":"athusoo","key":"athusoo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashish Thusoo","active":true,"timeZone":"Etc/UTC"},"created":"2010-02-18T18:31:43.563+0000","updated":"2010-02-18T18:31:43.563+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12858616","id":"12858616","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"This problem is due to [a bug in Datanucleus JDOQL|http://www.jpox.org/servlet/jira/browse/NUCCORE-427] implementation and has been fixed in version 2.0.x.\n\nThe fix is therefore to upgrade datanucleus plugins to the latest stable release.\n\n*Details:*\n- Replaced the old datanucleus plugins version 1.1.2 with the latest stable release.\n- Updated jdo2-api library with the version required by datanucleus - 2.3-0ec, available from datanucleus maven repository at http://www.datanucleus.org/downloads/maven2/javax/jdo/jdo2-api/2.3-ec/, Apache licensed\n- Modified the build files to suppress auto-enhancement of all complied classes, a new feature introduced in the latest version.\n- Modified the HiveMetaStoreClient implementation to create deep-copies of non-primitive objects being returned from the thrift server. Without this change, some collections were being fetched as semi-populated proxies with missing session context leading to NPEs.\n\n*Testing Done:*\nBuilt and ran all tests. Only two failures were reported - clientpositive test for input20.q and input33.q. These tests appear to be failing on the trunk as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-19T18:15:03.470+0000","updated":"2010-04-19T18:15:03.470+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12873555","id":"12873555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"This patch replaces the patch submitted before (HIVE-1176.lib-files.tar.gz and HIVE-1176.patch).\n\n{code}\nHIVE-1176-1.patch:\n\n#\tmodified:   build.properties\n#\tmodified:   build.xml\n#\tmodified:   eclipse-templates/.classpath\n#\tmodified:   ivy/ivysettings.xml\n#\tdeleted:    lib/datanucleus-core-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-core-1.1.2.jar\n#\tdeleted:    lib/datanucleus-enhancer-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-enhancer-1.1.2.jar\n#\tdeleted:    lib/datanucleus-rdbms-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-rdbms-1.1.2.jar\n#\tdeleted:    lib/jdo2-api-2.3-SNAPSHOT.LICENSE\n#\tdeleted:    lib/jdo2-api-2.3-SNAPSHOT.jar\n#\tmodified:   metastore/ivy.xml\n#\tmodified:   metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-05-31T06:27:18.034+0000","updated":"2010-05-31T06:27:18.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12873557","id":"12873557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"Updated the patch so that it cleanly applies to the trunk. \n\n*Changes from Previous Patch:*\n\n* This patch uses ivy to download the updated datanucleus plugins and other dependent libraries. There is no need to use the previously supplied tar.gz anymore.\n* At the time the previous patch was written, the enhancer plugin version was 2.0.1 which by default would enable annotation processing. Since then version 2.0.3 has been released which [disables this behavior|http://www.datanucleus.org/servlet/jira/browse/NUCENHANCER-56]. Hence the previously submitted changes to {{javac.args}} in build.properties file are no longer necessary. This patch uses the updated version of the datanucleus enhancer plugin.\n* The JDO2 API library used by datanucleus plugin is distributed by the datanucleus's public maven repository. This repository has been added to ivy configuration to automate the download.\n* The connection pool libraries have been updated to work with the newer datanucleus plugins. Library {{commons-dbcp}} has been updated from 1.2.2 to 1.4, {{commons-pool}} from 1.2 to 1.5.4, and {{datanucleus-connectionpool}} from 1.0.2 to 2.0.1.\n* As with the previously submitted patch, {{HiveMetaStoreClient}} implementation has been modified to create deep-copies of non-primitive objects being returned from the thrift server in order to avoid semi-populated proxies causing NPEs downstream.\n\n*Testing Done:*\n\nBuilt and ran all tests. Only two failures were reported as before - clientpositive test for input20.q and input33.q. These tests appear to be failing on the trunk as well.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-05-31T06:39:47.530+0000","updated":"2010-05-31T06:39:47.530+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12874262","id":"12874262","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"What failures are you seeing on trunk for input20.q and input33.q?  I do see recent Hudson sporadic failures for the flaky negative tests script_broken_pipe1 and loadpart_err, but not input20.q and input33.q.\n\nhttp://hudson.zones.apache.org/hudson/job/Hive-trunk-h0.20/\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-01T21:55:41.222+0000","updated":"2010-06-01T21:55:41.222+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12875960","id":"12875960","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"John - I debugged the failures that I was seeing for input20 and input33 and it turns out to be a subtle difference in the way the stream editor {{sed}} works on Mac vs the regular linux distribution. I installed the GNU port for {{sed}} and the failures no longer occur.\n\nI don't think this is related to the sporadic failures that are reported on hudson.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-05T22:38:29.170+0000","updated":"2010-06-05T22:38:29.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12876106","id":"12876106","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"@Arvind: Can you explain what the difference is between OSX sed and GNU sed? Can we rewrite the sed script so that it works on both platforms? Seems like we are probably relying on a non-POSIX feature that is present in the GNU version.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-07T01:22:25.867+0000","updated":"2010-06-07T01:22:25.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12876127","id":"12876127","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"I think the difference is more likely a bug in Mac OSX version of {{sed}}. Specifically, it fails to process directives with escaped tab sequence characters and instead treats it as unescaped. For example, the command to replace first occurrence of *b* in the string *abc* with a tab character *\\t* fails as shown below:\n\n{code}\n$ echo \"abc\" | /usr/bin/sed \"s@b@\\t@\"\natc\n{code}\n\nWhereas this works fine with the GNU distribution of sed\n\n{code}\n$ echo \"abc\" | /opt/local/bin/sed \"s@b@\\t@\"\na\tc\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-07T05:13:09.442+0000","updated":"2010-06-07T05:13:09.442+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12879208","id":"12879208","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"Can you elaborate on what you mean by 'some collections were being fetched as semi-populated proxies with missing session context leading to NPEs'? Is there something I can do to reproduce this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T00:41:32.206+0000","updated":"2010-06-16T00:41:32.206+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12879428","id":"12879428","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"Updating the patch with latest trunk image. This is necessary since HIVE-1373 updated the eclipse classpath with connection pool libraries which will be outdated with the application of this patch. The updated version of the patch takes care of this problem by updating eclipse classpath to use the updated libraries instead. Tested out launch configuration via eclipse to make sure it is working.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T18:03:06.204+0000","updated":"2010-06-16T18:03:06.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12879432","id":"12879432","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"The updated patch HIVE-1176-2.patch contains the following changes:\n\n#\tmodified:   build.properties\n#\tmodified:   build.xml\n#\tmodified:   eclipse-templates/.classpath\n#\tmodified:   ivy/ivysettings.xml\n#\tdeleted:    lib/datanucleus-core-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-core-1.1.2.jar\n#\tdeleted:    lib/datanucleus-enhancer-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-enhancer-1.1.2.jar\n#\tdeleted:    lib/datanucleus-rdbms-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-rdbms-1.1.2.jar\n#\tdeleted:    lib/jdo2-api-2.3-SNAPSHOT.LICENSE\n#\tdeleted:    lib/jdo2-api-2.3-SNAPSHOT.jar\n#\tmodified:   metastore/ivy.xml\n#\tmodified:   metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T18:12:34.254+0000","updated":"2010-06-16T18:12:34.254+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12879441","id":"12879441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Can you elaborate on what you mean by 'some collections were being fetched as semi-populated proxies with missing session context leading to NPEs'? Is there something I can do to reproduce this?\n\n@Paul: Here are the steps to reproduce this problem:\n\n# Startout with a clean workspace checkout and apply the updated patch HIVE-1176-2.patch. \n# Manually revert the file {{metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java}} to its previous state\n# run {{ant package}} from the root of the workspace\n# run {{ant test}} from within metastore\n\nYou should see failures like the following:\n{code}\n    [junit] testPartition() failed.\n    [junit] java.lang.NullPointerException\n    [junit] \tat org.datanucleus.store.mapped.scostore.AbstractMapStore.validateKeyForWriting(AbstractMapStore.java:333)\n    [junit] \tat org.datanucleus.store.mapped.scostore.JoinMapStore.put(JoinMapStore.java:252)\n    [junit] \tat org.datanucleus.sco.backed.Map.put(Map.java:640)\n    [junit] \tat org.apache.hadoop.hive.metastore.api.Table.putToParameters(Table.java:359)\n    [junit] \tat org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.alter_table(HiveMetaStore.java:1281)\n    [junit] \tat org.apache.hadoop.hive.metastore.HiveMetaStoreClient.alter_table(HiveMetaStoreClient.java:140)\n    [junit] \tat org.apache.hadoop.hive.metastore.TestHiveMetaStore.testAlterTable(TestHiveMetaStore.java:728)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    ...\n{code}\n\nIf you look at {{src/gen-javabean/org/apache/hadoop/hive/metastore/api/Table.java}} you would notice that the line causing this exception should ideally be a {{HashMap}} and not an {{org.datanucleus.store.mapped.scostore.AbstractMapStore}} as indicated by the stack trace. This happens because the datanucleus JDO framework replaces collections with its own implementation in order to allow lazy-dereferencing and optimize for database connections/queries/memory consumption etc.\n\nLazy loading of collections (and second class objects in general) can be disabled at a global level or at entity level. Disabling this globally is generally not recommended unless there is evidence backed by extensive testing that supports that change. Disabling at an entity level is still OK provided the entity object graph is fully dereferenced at all times. This could lead to extensive memory consumption in the system in case the entity graph is huge. \n\nMy approach towards fixing the problem was to *not* change the default behavior in the general case. Instead I felt that it was better to circumvent this problem in the case of a remote metastore by creating a copy explicitly. If you have other suggestions on how to address this, please let me know.\n\nAlso - more information on the lazy dereferencing mechanism used by datanucleus framework can be found [here|http://www.datanucleus.org/plugins/core/sco.html].\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T18:36:12.758+0000","updated":"2010-06-16T18:36:12.758+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881023","id":"12881023","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"@Paul: Any updates on this from your end? Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-22T02:22:39.785+0000","updated":"2010-06-22T02:22:39.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881026","id":"12881026","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"I was going to look at it again today, but looks like I'll get to it around mid-day tomorrow? Will keep this posted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-22T02:26:12.753+0000","updated":"2010-06-22T02:26:12.753+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881293","id":"12881293","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"For some reason, I don't see the JDO files being deleted after applying the patch:\n\n{code}\n?      build.xml.orig\n?      HIVE-1176-2.patch\n?      test.log\nM      eclipse-templates/.classpath\nM      build.properties\nM      build.xml\n?      metastore/test.log\nM      metastore/ivy.xml\nM      metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java\n!      lib/jdo2-api-2.3-SNAPSHOT.LICENSE\n!      lib/datanucleus-rdbms-1.1.2.LICENSE\n!      lib/datanucleus-enhancer-1.1.2.LICENSE\n!      lib/datanucleus-core-1.1.2.LICENSE\nM      ivy/ivysettings.xml\n{code}\n\nAlso, the patch works for branch 0.6 but not for trunk. Can you regenerate it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-22T18:50:00.525+0000","updated":"2010-06-22T18:50:00.525+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881296","id":"12881296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"To clarify, I am referring to the jars under /lib that should be deleted along with the *.LICENSE files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-22T18:55:13.818+0000","updated":"2010-06-22T18:55:13.818+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881304","id":"12881304","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"Nevermind - JVS pointed out that jars are skipped as they are binary files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-22T19:09:48.056+0000","updated":"2010-06-22T19:09:48.056+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881381","id":"12881381","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"@Paul: I just tested the patch (HIVE-1176-2.patch) on latest trunk and it seems to apply cleanly. Can you please try again and see if it works? Also, can you post the errors that you are seeing? If necessary, I can break down the patch into single-file units to help with applying it. Just let me know either way.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-22T21:51:10.941+0000","updated":"2010-06-22T21:51:10.941+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881446","id":"12881446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"Tried it again, and yep, it works. Not sure what happened before. Anyway though, yeah I do see the NPE's that you mentioned. Why did this not occur before? Just changes in behavior between major versions?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-22T23:21:24.637+0000","updated":"2010-06-22T23:21:24.637+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881472","id":"12881472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"Yes - it appears that the change in behavior can be attributed to the difference in major versions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T00:09:07.014+0000","updated":"2010-06-23T00:09:07.014+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881484","id":"12881484","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"One last thing, can you include a unit test to verify the fix?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T00:31:55.254+0000","updated":"2010-06-23T00:31:55.254+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881486","id":"12881486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"Sorry - it is not clear to me what unit test should I be writing. Can you give an example perhaps?\n\nFrom my perspective, any test that uses the metastore exercises this change. And together, all the tests form an exhaustive layer that ensures that there is no regression seeping into the system. Note that this is not a functionality change, only a change of underlying libraries. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T00:35:47.344+0000","updated":"2010-06-23T00:35:47.344+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881488","id":"12881488","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"Also, for the specific change to {{HiveMetaStoreClient.java}} - the tests under {{metastore}} validate that the new libraries are working correctly. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T00:37:32.227+0000","updated":"2010-06-23T00:37:32.227+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881497","id":"12881497","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"Oh, but I thought the original problem (as per title) was an exception with 'create table if not exists tmp_select(s string, c string, n int)'?\n\nSo maybe something like:\n\nCREATE TABLE IF NOT EXISTS tmp_select(s STRING, c STRING, n INT);\nDROP TABLE tmp_select;\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T00:47:02.141+0000","updated":"2010-06-23T00:47:02.141+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881499","id":"12881499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"Makes sense. Will add a test case and update the patch soon. Sorry for the misunderstanding.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T00:49:00.916+0000","updated":"2010-06-23T00:49:00.916+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881538","id":"12881538","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"Updated patch with a test case attached. Please use HIVE-1176-3.patch. The changed files in this patch are as follows:\n\n\n#\tmodified:   build.properties\n#\tmodified:   build.xml\n#\tnew file:   data/files/simple.txt\n#\tmodified:   eclipse-templates/.classpath\n#\tmodified:   ivy/ivysettings.xml\n#\tdeleted:    lib/datanucleus-core-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-core-1.1.2.jar\n#\tdeleted:    lib/datanucleus-enhancer-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-enhancer-1.1.2.jar\n#\tdeleted:    lib/datanucleus-rdbms-1.1.2.LICENSE\n#\tdeleted:    lib/datanucleus-rdbms-1.1.2.jar\n#\tdeleted:    lib/jdo2-api-2.3-SNAPSHOT.LICENSE\n#\tdeleted:    lib/jdo2-api-2.3-SNAPSHOT.jar\n#\tmodified:   metastore/ivy.xml\n#\tmodified:   metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java\n#\tnew file:   ql/src/test/queries/clientpositive/hive_1176.q\n#\tnew file:   ql/src/test/results/clientpositive/hive_1176.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T04:33:43.835+0000","updated":"2010-06-23T04:33:43.835+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881559","id":"12881559","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"@Arvind - While the test that you added is thorough, I think for this case, we might be able to get by with something simpler / faster? \n\ne.g.\n* Use one of the existing source files or insert from an existing table like 'src'. \n* Limit to one select statement / table as we test select more extensively in other unit tests. \n* Remove the drop table statements in the beginning, as other tests aren't supposed to leave tables around at the end of their run. \n* Rename the query file to something more descriptive. This would help developers browsing the list of tests.\n\nWe don't want to sacrifice coverage, but at the same time, the whole suite of tests take quite a while to execute.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T06:04:37.977+0000","updated":"2010-06-23T06:04:37.977+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881562","id":"12881562","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Paul, we currently do pre-drops in the test to avoid collisions in case other tests fail, or if a negative test happens to use the same table name since there's currently no way for a negative test to clean up after itself.  It would be better if our test framework automatically cleaned out the catalog at the beginning of each test, but until we have that, pre-drop is required.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-23T06:10:06.158+0000","updated":"2010-06-23T06:10:06.158+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881566","id":"12881566","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"@Paul: You suggestions are fair enough. I have incorporated all changes you suggested except for the pre-drop based on @John's response. Let me know if you guys need any further tweaking of this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T06:32:49.913+0000","updated":"2010-06-23T06:32:49.913+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881568","id":"12881568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"@John - good point! In which case, we'll probably need to fix up some of the other unit tests with a create table.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T06:35:36.977+0000","updated":"2010-06-23T06:35:36.977+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881572","id":"12881572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks good to me\n\n+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T06:41:29.973+0000","updated":"2010-06-23T06:41:29.973+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881936","id":"12881936","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Just one more change needed...please add an ORDER BY to the select in the testcase.  This is required to avoid spurious diffs later since without ORDER BY, the query result order is non-deterministic.\n\nAfter that I'll run through tests and commit.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-23T22:44:25.054+0000","updated":"2010-06-23T22:44:25.054+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881946","id":"12881946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"@John: done. Please see the new patch attachment -  HIVE-1176-5.patch\n\nSince a lot of good points came out of the discussion on this jira, I took the liberty of adding them to the Hive wiki for posterity. You can find it [here|http://wiki.apache.org/hadoop/Hive/TipsForAddingNewTests]. Please add to it any other points that you feel contributors should take into consideration while adding new tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T23:16:49.395+0000","updated":"2010-06-23T23:16:49.395+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881950","id":"12881950","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for the doc Arvind.  \n\nBut for the patch:  we need the ORDER BY on the SELECT that produces results in the output log (not the INSERT).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-23T23:24:37.740+0000","updated":"2010-06-23T23:24:37.740+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881956","id":"12881956","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"yes - thats what my intention was. Thanks for catching it.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-23T23:35:09.202+0000","updated":"2010-06-23T23:35:09.202+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12881967","id":"12881967","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"+1.  Will commit when tests pass.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-23T23:58:48.550+0000","updated":"2010-06-23T23:58:48.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456570/comment/12882049","id":"12882049","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Committed.  Thanks Arvind!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-06-24T05:23:29.122+0000","updated":"2010-06-24T05:23:29.122+0000"}],"maxResults":38,"total":38,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1176/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ldt3:"}}