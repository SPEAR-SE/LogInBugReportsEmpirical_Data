{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12755363","self":"https://issues.apache.org/jira/rest/api/2/issue/12755363","key":"HIVE-8871","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-08-13T05:37:28.573+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Mar 03 20:50:12 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-8871/watchers","watchCount":5,"isWatching":false},"created":"2014-11-14T13:42:32.274+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["features"],"customfield_12312333":null,"customfield_12310230":"HBase Handler","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"issuelinks":[{"id":"12403729","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12403729","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12754891","key":"HIVE-8848","self":"https://issues.apache.org/jira/rest/api/2/issue/12754891","fields":{"summary":"data loading from text files or text file processing doesn't handle nulls correctly","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-03-03T20:50:12.404+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313461","id":"12313461","name":"HBase Handler"}],"timeoriginalestimate":null,"description":"If you map a Hive column to a Hbase CF where the CF only has qualifiers but no values, Hive always outputs ' {} ' for that key. This hides the fact that qualifiers do exist within the CF. As soon as you put a single byte (like a space) as value you'll get a return like this ' {\"20140911\",\" \"} in Hive.\n\nSince it is a common data modelling technique in Hbase to not use the value (and essentially use the qualifier in a CF as value holder) I think it would be worthwhile to have some support for this in the Hbase handler. \n\nA solution could be to show a data structure like  CF:qualifier:<NULL> like this: {\"20140911\",\"\"}\n, where '20140911' is the qualifier and NULL value in Hbase are shown as empty json strings.\n\nCREATE EXTERNAL TABLE hb_test (\n  userhash string,\n  count bigint,\n  dates map<string,string>)\nSTORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'\nWITH SERDEPROPERTIES (\n  \"hbase.columns.mapping\" =\n  \":key,SUM:COUNT,DATES:\",\n\"hbase.table.default.storage.type\" = \"binary\"\n)\nTBLPROPERTIES(\"hbase.table.name\" = \"test\");","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Hive Hbase Integration : Support for NULL value  columns","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jasperknulst","name":"jasperknulst","key":"jasperknulst","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jasper Knulst","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jasperknulst","name":"jasperknulst","key":"jasperknulst","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jasper Knulst","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12755363/comment/14694725","id":"14694725","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"body":"[~jasperknulst] If I understand this request right, you are proposing that we represent columns which do not have values as empty jsons? Personally I think that is ok but wouldn't that make it harder to differentiate between columns which do not have any values vs those which have actual empty values? For instance, today you can run a IS NULL query and quickly figure out the columns which do not have any values. Wouldn't figuring things like this become harder with the pattern that you are proposing?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-13T05:37:28.573+0000","updated":"2015-08-13T05:37:28.573+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12755363/comment/15895005","id":"15895005","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Chris55427","name":"Chris55427","key":"chris55427","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10445","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10445","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10445","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10445"},"displayName":"Christopher","active":true,"timeZone":"Etc/UTC"},"body":"A concern that I have is that currently in order to perform an update in a hive table, one uses NULLs as place holders.  Those NULLs are ignored if it is a preexisting record.\n\nCREATE TABLE hbase_table_emp(id int, name string, role string)\nSTORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'\nWITH SERDEPROPERTIES (\"hbase.columns.mapping\" = \":key,cf1:name,cf1:role\")\nTBLPROPERTIES (\"hbase.table.name\" = \"emp\");\ninsert into hbase_table_emp select 1,'bob', 'admin';\ninsert into hbase_table_emp select 2,'bobby', 'user';\nselect * from  hbase_table_emp;\ninsert into hbase_table_emp select 1,null, 'superadmin';\n\nSee \"bob\" remains as \"bob\"...\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Chris55427","name":"Chris55427","key":"chris55427","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10445","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10445","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10445","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10445"},"displayName":"Christopher","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-03T20:50:12.404+0000","updated":"2017-03-03T20:50:12.404+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-8871/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i22drj:"}}